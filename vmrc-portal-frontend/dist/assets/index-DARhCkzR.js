var wg=Object.defineProperty;var Mg=(e,n,o)=>n in e?wg(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o;var ke=(e,n,o)=>Mg(e,typeof n!="symbol"?n+"":n,o);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))c(f);new MutationObserver(f=>{for(const g of f)if(g.type==="childList")for(const y of g.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&c(y)}).observe(document,{childList:!0,subtree:!0});function o(f){const g={};return f.integrity&&(g.integrity=f.integrity),f.referrerPolicy&&(g.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?g.credentials="include":f.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function c(f){if(f.ep)return;f.ep=!0;const g=o(f);fetch(f.href,g)}})();var hh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Oh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Sc={exports:{}},hu={},kc={exports:{}},Ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zd;function Eg(){if(zd)return Ye;zd=1;var e=Symbol.for("react.element"),n=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),y=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),A=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),P=Symbol.iterator;function B(rt){return rt===null||typeof rt!="object"?null:(rt=P&&rt[P]||rt["@@iterator"],typeof rt=="function"?rt:null)}var W={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},J=Object.assign,Z={};function q(rt,It,Ce){this.props=rt,this.context=It,this.refs=Z,this.updater=Ce||W}q.prototype.isReactComponent={},q.prototype.setState=function(rt,It){if(typeof rt!="object"&&typeof rt!="function"&&rt!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,rt,It,"setState")},q.prototype.forceUpdate=function(rt){this.updater.enqueueForceUpdate(this,rt,"forceUpdate")};function ct(){}ct.prototype=q.prototype;function ft(rt,It,Ce){this.props=rt,this.context=It,this.refs=Z,this.updater=Ce||W}var St=ft.prototype=new ct;St.constructor=ft,J(St,q.prototype),St.isPureReactComponent=!0;var Tt=Array.isArray,Gt=Object.prototype.hasOwnProperty,zt={current:null},Dt={key:!0,ref:!0,__self:!0,__source:!0};function ut(rt,It,Ce){var pe,ge={},ae=null,Fe=null;if(It!=null)for(pe in It.ref!==void 0&&(Fe=It.ref),It.key!==void 0&&(ae=""+It.key),It)Gt.call(It,pe)&&!Dt.hasOwnProperty(pe)&&(ge[pe]=It[pe]);var Ve=arguments.length-2;if(Ve===1)ge.children=Ce;else if(1<Ve){for(var $e=Array(Ve),Mi=0;Mi<Ve;Mi++)$e[Mi]=arguments[Mi+2];ge.children=$e}if(rt&&rt.defaultProps)for(pe in Ve=rt.defaultProps,Ve)ge[pe]===void 0&&(ge[pe]=Ve[pe]);return{$$typeof:e,type:rt,key:ae,ref:Fe,props:ge,_owner:zt.current}}function Bt(rt,It){return{$$typeof:e,type:rt.type,key:It,ref:rt.ref,props:rt.props,_owner:rt._owner}}function st(rt){return typeof rt=="object"&&rt!==null&&rt.$$typeof===e}function yt(rt){var It={"=":"=0",":":"=2"};return"$"+rt.replace(/[=:]/g,function(Ce){return It[Ce]})}var Ct=/\/+/g;function oe(rt,It){return typeof rt=="object"&&rt!==null&&rt.key!=null?yt(""+rt.key):It.toString(36)}function Le(rt,It,Ce,pe,ge){var ae=typeof rt;(ae==="undefined"||ae==="boolean")&&(rt=null);var Fe=!1;if(rt===null)Fe=!0;else switch(ae){case"string":case"number":Fe=!0;break;case"object":switch(rt.$$typeof){case e:case n:Fe=!0}}if(Fe)return Fe=rt,ge=ge(Fe),rt=pe===""?"."+oe(Fe,0):pe,Tt(ge)?(Ce="",rt!=null&&(Ce=rt.replace(Ct,"$&/")+"/"),Le(ge,It,Ce,"",function(Mi){return Mi})):ge!=null&&(st(ge)&&(ge=Bt(ge,Ce+(!ge.key||Fe&&Fe.key===ge.key?"":(""+ge.key).replace(Ct,"$&/")+"/")+rt)),It.push(ge)),1;if(Fe=0,pe=pe===""?".":pe+":",Tt(rt))for(var Ve=0;Ve<rt.length;Ve++){ae=rt[Ve];var $e=pe+oe(ae,Ve);Fe+=Le(ae,It,Ce,$e,ge)}else if($e=B(rt),typeof $e=="function")for(rt=$e.call(rt),Ve=0;!(ae=rt.next()).done;)ae=ae.value,$e=pe+oe(ae,Ve++),Fe+=Le(ae,It,Ce,$e,ge);else if(ae==="object")throw It=String(rt),Error("Objects are not valid as a React child (found: "+(It==="[object Object]"?"object with keys {"+Object.keys(rt).join(", ")+"}":It)+"). If you meant to render a collection of children, use an array instead.");return Fe}function _e(rt,It,Ce){if(rt==null)return rt;var pe=[],ge=0;return Le(rt,pe,"","",function(ae){return It.call(Ce,ae,ge++)}),pe}function de(rt){if(rt._status===-1){var It=rt._result;It=It(),It.then(function(Ce){(rt._status===0||rt._status===-1)&&(rt._status=1,rt._result=Ce)},function(Ce){(rt._status===0||rt._status===-1)&&(rt._status=2,rt._result=Ce)}),rt._status===-1&&(rt._status=0,rt._result=It)}if(rt._status===1)return rt._result.default;throw rt._result}var ce={current:null},At={transition:null},Qt={ReactCurrentDispatcher:ce,ReactCurrentBatchConfig:At,ReactCurrentOwner:zt};function Rt(){throw Error("act(...) is not supported in production builds of React.")}return Ye.Children={map:_e,forEach:function(rt,It,Ce){_e(rt,function(){It.apply(this,arguments)},Ce)},count:function(rt){var It=0;return _e(rt,function(){It++}),It},toArray:function(rt){return _e(rt,function(It){return It})||[]},only:function(rt){if(!st(rt))throw Error("React.Children.only expected to receive a single React element child.");return rt}},Ye.Component=q,Ye.Fragment=o,Ye.Profiler=f,Ye.PureComponent=ft,Ye.StrictMode=c,Ye.Suspense=E,Ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qt,Ye.act=Rt,Ye.cloneElement=function(rt,It,Ce){if(rt==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+rt+".");var pe=J({},rt.props),ge=rt.key,ae=rt.ref,Fe=rt._owner;if(It!=null){if(It.ref!==void 0&&(ae=It.ref,Fe=zt.current),It.key!==void 0&&(ge=""+It.key),rt.type&&rt.type.defaultProps)var Ve=rt.type.defaultProps;for($e in It)Gt.call(It,$e)&&!Dt.hasOwnProperty($e)&&(pe[$e]=It[$e]===void 0&&Ve!==void 0?Ve[$e]:It[$e])}var $e=arguments.length-2;if($e===1)pe.children=Ce;else if(1<$e){Ve=Array($e);for(var Mi=0;Mi<$e;Mi++)Ve[Mi]=arguments[Mi+2];pe.children=Ve}return{$$typeof:e,type:rt.type,key:ge,ref:ae,props:pe,_owner:Fe}},Ye.createContext=function(rt){return rt={$$typeof:y,_currentValue:rt,_currentValue2:rt,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},rt.Provider={$$typeof:g,_context:rt},rt.Consumer=rt},Ye.createElement=ut,Ye.createFactory=function(rt){var It=ut.bind(null,rt);return It.type=rt,It},Ye.createRef=function(){return{current:null}},Ye.forwardRef=function(rt){return{$$typeof:v,render:rt}},Ye.isValidElement=st,Ye.lazy=function(rt){return{$$typeof:D,_payload:{_status:-1,_result:rt},_init:de}},Ye.memo=function(rt,It){return{$$typeof:A,type:rt,compare:It===void 0?null:It}},Ye.startTransition=function(rt){var It=At.transition;At.transition={};try{rt()}finally{At.transition=It}},Ye.unstable_act=Rt,Ye.useCallback=function(rt,It){return ce.current.useCallback(rt,It)},Ye.useContext=function(rt){return ce.current.useContext(rt)},Ye.useDebugValue=function(){},Ye.useDeferredValue=function(rt){return ce.current.useDeferredValue(rt)},Ye.useEffect=function(rt,It){return ce.current.useEffect(rt,It)},Ye.useId=function(){return ce.current.useId()},Ye.useImperativeHandle=function(rt,It,Ce){return ce.current.useImperativeHandle(rt,It,Ce)},Ye.useInsertionEffect=function(rt,It){return ce.current.useInsertionEffect(rt,It)},Ye.useLayoutEffect=function(rt,It){return ce.current.useLayoutEffect(rt,It)},Ye.useMemo=function(rt,It){return ce.current.useMemo(rt,It)},Ye.useReducer=function(rt,It,Ce){return ce.current.useReducer(rt,It,Ce)},Ye.useRef=function(rt){return ce.current.useRef(rt)},Ye.useState=function(rt){return ce.current.useState(rt)},Ye.useSyncExternalStore=function(rt,It,Ce){return ce.current.useSyncExternalStore(rt,It,Ce)},Ye.useTransition=function(){return ce.current.useTransition()},Ye.version="18.3.1",Ye}var jd;function of(){return jd||(jd=1,kc.exports=Eg()),kc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ud;function Lg(){if(Ud)return hu;Ud=1;var e=of(),n=Symbol.for("react.element"),o=Symbol.for("react.fragment"),c=Object.prototype.hasOwnProperty,f=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,g={key:!0,ref:!0,__self:!0,__source:!0};function y(v,E,A){var D,P={},B=null,W=null;A!==void 0&&(B=""+A),E.key!==void 0&&(B=""+E.key),E.ref!==void 0&&(W=E.ref);for(D in E)c.call(E,D)&&!g.hasOwnProperty(D)&&(P[D]=E[D]);if(v&&v.defaultProps)for(D in E=v.defaultProps,E)P[D]===void 0&&(P[D]=E[D]);return{$$typeof:n,type:v,key:B,ref:W,props:P,_owner:f.current}}return hu.Fragment=o,hu.jsx=y,hu.jsxs=y,hu}var Hd;function Cg(){return Hd||(Hd=1,Sc.exports=Lg()),Sc.exports}var R=Cg(),Mt=of();const ms=Oh(Mt);var ch={},Pc={exports:{}},Er={},Ac={exports:{}},Bc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vd;function bg(){return Vd||(Vd=1,(function(e){function n(At,Qt){var Rt=At.length;At.push(Qt);t:for(;0<Rt;){var rt=Rt-1>>>1,It=At[rt];if(0<f(It,Qt))At[rt]=Qt,At[Rt]=It,Rt=rt;else break t}}function o(At){return At.length===0?null:At[0]}function c(At){if(At.length===0)return null;var Qt=At[0],Rt=At.pop();if(Rt!==Qt){At[0]=Rt;t:for(var rt=0,It=At.length,Ce=It>>>1;rt<Ce;){var pe=2*(rt+1)-1,ge=At[pe],ae=pe+1,Fe=At[ae];if(0>f(ge,Rt))ae<It&&0>f(Fe,ge)?(At[rt]=Fe,At[ae]=Rt,rt=ae):(At[rt]=ge,At[pe]=Rt,rt=pe);else if(ae<It&&0>f(Fe,Rt))At[rt]=Fe,At[ae]=Rt,rt=ae;else break t}}return Qt}function f(At,Qt){var Rt=At.sortIndex-Qt.sortIndex;return Rt!==0?Rt:At.id-Qt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var g=performance;e.unstable_now=function(){return g.now()}}else{var y=Date,v=y.now();e.unstable_now=function(){return y.now()-v}}var E=[],A=[],D=1,P=null,B=3,W=!1,J=!1,Z=!1,q=typeof setTimeout=="function"?setTimeout:null,ct=typeof clearTimeout=="function"?clearTimeout:null,ft=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function St(At){for(var Qt=o(A);Qt!==null;){if(Qt.callback===null)c(A);else if(Qt.startTime<=At)c(A),Qt.sortIndex=Qt.expirationTime,n(E,Qt);else break;Qt=o(A)}}function Tt(At){if(Z=!1,St(At),!J)if(o(E)!==null)J=!0,de(Gt);else{var Qt=o(A);Qt!==null&&ce(Tt,Qt.startTime-At)}}function Gt(At,Qt){J=!1,Z&&(Z=!1,ct(ut),ut=-1),W=!0;var Rt=B;try{for(St(Qt),P=o(E);P!==null&&(!(P.expirationTime>Qt)||At&&!yt());){var rt=P.callback;if(typeof rt=="function"){P.callback=null,B=P.priorityLevel;var It=rt(P.expirationTime<=Qt);Qt=e.unstable_now(),typeof It=="function"?P.callback=It:P===o(E)&&c(E),St(Qt)}else c(E);P=o(E)}if(P!==null)var Ce=!0;else{var pe=o(A);pe!==null&&ce(Tt,pe.startTime-Qt),Ce=!1}return Ce}finally{P=null,B=Rt,W=!1}}var zt=!1,Dt=null,ut=-1,Bt=5,st=-1;function yt(){return!(e.unstable_now()-st<Bt)}function Ct(){if(Dt!==null){var At=e.unstable_now();st=At;var Qt=!0;try{Qt=Dt(!0,At)}finally{Qt?oe():(zt=!1,Dt=null)}}else zt=!1}var oe;if(typeof ft=="function")oe=function(){ft(Ct)};else if(typeof MessageChannel<"u"){var Le=new MessageChannel,_e=Le.port2;Le.port1.onmessage=Ct,oe=function(){_e.postMessage(null)}}else oe=function(){q(Ct,0)};function de(At){Dt=At,zt||(zt=!0,oe())}function ce(At,Qt){ut=q(function(){At(e.unstable_now())},Qt)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(At){At.callback=null},e.unstable_continueExecution=function(){J||W||(J=!0,de(Gt))},e.unstable_forceFrameRate=function(At){0>At||125<At?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Bt=0<At?Math.floor(1e3/At):5},e.unstable_getCurrentPriorityLevel=function(){return B},e.unstable_getFirstCallbackNode=function(){return o(E)},e.unstable_next=function(At){switch(B){case 1:case 2:case 3:var Qt=3;break;default:Qt=B}var Rt=B;B=Qt;try{return At()}finally{B=Rt}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(At,Qt){switch(At){case 1:case 2:case 3:case 4:case 5:break;default:At=3}var Rt=B;B=At;try{return Qt()}finally{B=Rt}},e.unstable_scheduleCallback=function(At,Qt,Rt){var rt=e.unstable_now();switch(typeof Rt=="object"&&Rt!==null?(Rt=Rt.delay,Rt=typeof Rt=="number"&&0<Rt?rt+Rt:rt):Rt=rt,At){case 1:var It=-1;break;case 2:It=250;break;case 5:It=1073741823;break;case 4:It=1e4;break;default:It=5e3}return It=Rt+It,At={id:D++,callback:Qt,priorityLevel:At,startTime:Rt,expirationTime:It,sortIndex:-1},Rt>rt?(At.sortIndex=Rt,n(A,At),o(E)===null&&At===o(A)&&(Z?(ct(ut),ut=-1):Z=!0,ce(Tt,Rt-rt))):(At.sortIndex=It,n(E,At),J||W||(J=!0,de(Gt))),At},e.unstable_shouldYield=yt,e.unstable_wrapCallback=function(At){var Qt=B;return function(){var Rt=B;B=Qt;try{return At.apply(this,arguments)}finally{B=Rt}}}})(Bc)),Bc}var Wd;function Sg(){return Wd||(Wd=1,Ac.exports=bg()),Ac.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $d;function kg(){if($d)return Er;$d=1;var e=of(),n=Sg();function o(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,u=1;u<arguments.length;u++)r+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var c=new Set,f={};function g(t,r){y(t,r),y(t+"Capture",r)}function y(t,r){for(f[t]=r,t=0;t<r.length;t++)c.add(r[t])}var v=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),E=Object.prototype.hasOwnProperty,A=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,D={},P={};function B(t){return E.call(P,t)?!0:E.call(D,t)?!1:A.test(t)?P[t]=!0:(D[t]=!0,!1)}function W(t,r,u,m){if(u!==null&&u.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return m?!1:u!==null?!u.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function J(t,r,u,m){if(r===null||typeof r>"u"||W(t,r,u,m))return!0;if(m)return!1;if(u!==null)switch(u.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function Z(t,r,u,m,M,C,N){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=m,this.attributeNamespace=M,this.mustUseProperty=u,this.propertyName=t,this.type=r,this.sanitizeURL=C,this.removeEmptyString=N}var q={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){q[t]=new Z(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var r=t[0];q[r]=new Z(r,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){q[t]=new Z(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){q[t]=new Z(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){q[t]=new Z(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){q[t]=new Z(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){q[t]=new Z(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){q[t]=new Z(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){q[t]=new Z(t,5,!1,t.toLowerCase(),null,!1,!1)});var ct=/[\-:]([a-z])/g;function ft(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var r=t.replace(ct,ft);q[r]=new Z(r,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var r=t.replace(ct,ft);q[r]=new Z(r,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var r=t.replace(ct,ft);q[r]=new Z(r,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){q[t]=new Z(t,1,!1,t.toLowerCase(),null,!1,!1)}),q.xlinkHref=new Z("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){q[t]=new Z(t,1,!1,t.toLowerCase(),null,!0,!0)});function St(t,r,u,m){var M=q.hasOwnProperty(r)?q[r]:null;(M!==null?M.type!==0:m||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(J(r,u,M,m)&&(u=null),m||M===null?B(r)&&(u===null?t.removeAttribute(r):t.setAttribute(r,""+u)):M.mustUseProperty?t[M.propertyName]=u===null?M.type===3?!1:"":u:(r=M.attributeName,m=M.attributeNamespace,u===null?t.removeAttribute(r):(M=M.type,u=M===3||M===4&&u===!0?"":""+u,m?t.setAttributeNS(m,r,u):t.setAttribute(r,u))))}var Tt=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Gt=Symbol.for("react.element"),zt=Symbol.for("react.portal"),Dt=Symbol.for("react.fragment"),ut=Symbol.for("react.strict_mode"),Bt=Symbol.for("react.profiler"),st=Symbol.for("react.provider"),yt=Symbol.for("react.context"),Ct=Symbol.for("react.forward_ref"),oe=Symbol.for("react.suspense"),Le=Symbol.for("react.suspense_list"),_e=Symbol.for("react.memo"),de=Symbol.for("react.lazy"),ce=Symbol.for("react.offscreen"),At=Symbol.iterator;function Qt(t){return t===null||typeof t!="object"?null:(t=At&&t[At]||t["@@iterator"],typeof t=="function"?t:null)}var Rt=Object.assign,rt;function It(t){if(rt===void 0)try{throw Error()}catch(u){var r=u.stack.trim().match(/\n( *(at )?)/);rt=r&&r[1]||""}return`
`+rt+t}var Ce=!1;function pe(t,r){if(!t||Ce)return"";Ce=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(kt){var m=kt}Reflect.construct(t,[],r)}else{try{r.call()}catch(kt){m=kt}t.call(r.prototype)}else{try{throw Error()}catch(kt){m=kt}t()}}catch(kt){if(kt&&m&&typeof kt.stack=="string"){for(var M=kt.stack.split(`
`),C=m.stack.split(`
`),N=M.length-1,Y=C.length-1;1<=N&&0<=Y&&M[N]!==C[Y];)Y--;for(;1<=N&&0<=Y;N--,Y--)if(M[N]!==C[Y]){if(N!==1||Y!==1)do if(N--,Y--,0>Y||M[N]!==C[Y]){var nt=`
`+M[N].replace(" at new "," at ");return t.displayName&&nt.includes("<anonymous>")&&(nt=nt.replace("<anonymous>",t.displayName)),nt}while(1<=N&&0<=Y);break}}}finally{Ce=!1,Error.prepareStackTrace=u}return(t=t?t.displayName||t.name:"")?It(t):""}function ge(t){switch(t.tag){case 5:return It(t.type);case 16:return It("Lazy");case 13:return It("Suspense");case 19:return It("SuspenseList");case 0:case 2:case 15:return t=pe(t.type,!1),t;case 11:return t=pe(t.type.render,!1),t;case 1:return t=pe(t.type,!0),t;default:return""}}function ae(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Dt:return"Fragment";case zt:return"Portal";case Bt:return"Profiler";case ut:return"StrictMode";case oe:return"Suspense";case Le:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case yt:return(t.displayName||"Context")+".Consumer";case st:return(t._context.displayName||"Context")+".Provider";case Ct:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case _e:return r=t.displayName||null,r!==null?r:ae(t.type)||"Memo";case de:r=t._payload,t=t._init;try{return ae(t(r))}catch{}}return null}function Fe(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ae(r);case 8:return r===ut?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Ve(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function $e(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Mi(t){var r=$e(t)?"checked":"value",u=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),m=""+t[r];if(!t.hasOwnProperty(r)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var M=u.get,C=u.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return M.call(this)},set:function(N){m=""+N,C.call(this,N)}}),Object.defineProperty(t,r,{enumerable:u.enumerable}),{getValue:function(){return m},setValue:function(N){m=""+N},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function en(t){t._valueTracker||(t._valueTracker=Mi(t))}function vs(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var u=r.getValue(),m="";return t&&(m=$e(t)?t.checked?"true":"false":t.value),t=m,t!==u?(r.setValue(t),!0):!1}function nn(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Je(t,r){var u=r.checked;return Rt({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??t._wrapperState.initialChecked})}function _o(t,r){var u=r.defaultValue==null?"":r.defaultValue,m=r.checked!=null?r.checked:r.defaultChecked;u=Ve(r.value!=null?r.value:u),t._wrapperState={initialChecked:m,initialValue:u,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function We(t,r){r=r.checked,r!=null&&St(t,"checked",r,!1)}function jr(t,r){We(t,r);var u=Ve(r.value),m=r.type;if(u!=null)m==="number"?(u===0&&t.value===""||t.value!=u)&&(t.value=""+u):t.value!==""+u&&(t.value=""+u);else if(m==="submit"||m==="reset"){t.removeAttribute("value");return}r.hasOwnProperty("value")?Ks(t,r.type,u):r.hasOwnProperty("defaultValue")&&Ks(t,r.type,Ve(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(t.defaultChecked=!!r.defaultChecked)}function Ei(t,r,u){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var m=r.type;if(!(m!=="submit"&&m!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+t._wrapperState.initialValue,u||r===t.value||(t.value=r),t.defaultValue=r}u=t.name,u!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,u!==""&&(t.name=u)}function Ks(t,r,u){(r!=="number"||nn(t.ownerDocument)!==t)&&(u==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+u&&(t.defaultValue=""+u))}var bi=Array.isArray;function ir(t,r,u,m){if(t=t.options,r){r={};for(var M=0;M<u.length;M++)r["$"+u[M]]=!0;for(u=0;u<t.length;u++)M=r.hasOwnProperty("$"+t[u].value),t[u].selected!==M&&(t[u].selected=M),M&&m&&(t[u].defaultSelected=!0)}else{for(u=""+Ve(u),r=null,M=0;M<t.length;M++){if(t[M].value===u){t[M].selected=!0,m&&(t[M].defaultSelected=!0);return}r!==null||t[M].disabled||(r=t[M])}r!==null&&(r.selected=!0)}}function $i(t,r){if(r.dangerouslySetInnerHTML!=null)throw Error(o(91));return Rt({},r,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function yo(t,r){var u=r.value;if(u==null){if(u=r.children,r=r.defaultValue,u!=null){if(r!=null)throw Error(o(92));if(bi(u)){if(1<u.length)throw Error(o(93));u=u[0]}r=u}r==null&&(r=""),u=r}t._wrapperState={initialValue:Ve(u)}}function si(t,r){var u=Ve(r.value),m=Ve(r.defaultValue);u!=null&&(u=""+u,u!==t.value&&(t.value=u),r.defaultValue==null&&t.defaultValue!==u&&(t.defaultValue=u)),m!=null&&(t.defaultValue=""+m)}function xs(t){var r=t.textContent;r===t._wrapperState.initialValue&&r!==""&&r!==null&&(t.value=r)}function Ii(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ws(t,r){return t==null||t==="http://www.w3.org/1999/xhtml"?Ii(r):t==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ri,vo=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,u,m,M){MSApp.execUnsafeLocalFunction(function(){return t(r,u,m,M)})}:t})(function(t,r){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=r;else{for(Ri=Ri||document.createElement("div"),Ri.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=Ri.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;r.firstChild;)t.appendChild(r.firstChild)}});function kr(t,r){if(r){var u=t.firstChild;if(u&&u===t.lastChild&&u.nodeType===3){u.nodeValue=r;return}}t.textContent=r}var Zi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Un=["Webkit","ms","Moz","O"];Object.keys(Zi).forEach(function(t){Un.forEach(function(r){r=r+t.charAt(0).toUpperCase()+t.substring(1),Zi[r]=Zi[t]})});function Ur(t,r,u){return r==null||typeof r=="boolean"||r===""?"":u||typeof r!="number"||r===0||Zi.hasOwnProperty(t)&&Zi[t]?(""+r).trim():r+"px"}function Hr(t,r){t=t.style;for(var u in r)if(r.hasOwnProperty(u)){var m=u.indexOf("--")===0,M=Ur(u,r[u],m);u==="float"&&(u="cssFloat"),m?t.setProperty(u,M):t[u]=M}}var Oi=Rt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vr(t,r){if(r){if(Oi[t]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(o(137,t));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(o(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(o(61))}if(r.style!=null&&typeof r.style!="object")throw Error(o(62))}}function xn(t,r){if(t.indexOf("-")===-1)return typeof r.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ms=null;function qi(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Es=null,Se=null,rn=null;function Ho(t){if(t=yr(t)){if(typeof Es!="function")throw Error(o(280));var r=t.stateNode;r&&(r=fa(r),Es(t.stateNode,t.type,r))}}function Oa(t){Se?rn?rn.push(t):rn=[t]:Se=t}function xo(){if(Se){var t=Se,r=rn;if(rn=Se=null,Ho(t),r)for(t=0;t<r.length;t++)Ho(r[t])}}function Vo(t,r){return t(r)}function Pr(){}var Ls=!1;function Cs(t,r,u){if(Ls)return t(r,u);Ls=!0;try{return Vo(t,r,u)}finally{Ls=!1,(Se!==null||rn!==null)&&(Pr(),xo())}}function yi(t,r){var u=t.stateNode;if(u===null)return null;var m=fa(u);if(m===null)return null;u=m[r];t:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(t=t.type,m=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!m;break t;default:t=!1}if(t)return null;if(u&&typeof u!="function")throw Error(o(231,r,typeof u));return u}var bs=!1;if(v)try{var wn={};Object.defineProperty(wn,"passive",{get:function(){bs=!0}}),window.addEventListener("test",wn,wn),window.removeEventListener("test",wn,wn)}catch{bs=!1}function Wo(t,r,u,m,M,C,N,Y,nt){var kt=Array.prototype.slice.call(arguments,3);try{r.apply(u,kt)}catch($t){this.onError($t)}}var Di=!1,me=null,Ss=!1,ks=null,Wr={onError:function(t){Di=!0,me=t}};function $o(t,r,u,m,M,C,N,Y,nt){Di=!1,me=null,Wo.apply(Wr,arguments)}function wo(t,r,u,m,M,C,N,Y,nt){if($o.apply(this,arguments),Di){if(Di){var kt=me;Di=!1,me=null}else throw Error(o(198));Ss||(Ss=!0,ks=kt)}}function nr(t){var r=t,u=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(u=r.return),t=r.return;while(t)}return r.tag===3?u:null}function rr(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function $r(t){if(nr(t)!==t)throw Error(o(188))}function Da(t){var r=t.alternate;if(!r){if(r=nr(t),r===null)throw Error(o(188));return r!==t?null:t}for(var u=t,m=r;;){var M=u.return;if(M===null)break;var C=M.alternate;if(C===null){if(m=M.return,m!==null){u=m;continue}break}if(M.child===C.child){for(C=M.child;C;){if(C===u)return $r(M),t;if(C===m)return $r(M),r;C=C.sibling}throw Error(o(188))}if(u.return!==m.return)u=M,m=C;else{for(var N=!1,Y=M.child;Y;){if(Y===u){N=!0,u=M,m=C;break}if(Y===m){N=!0,m=M,u=C;break}Y=Y.sibling}if(!N){for(Y=C.child;Y;){if(Y===u){N=!0,u=C,m=M;break}if(Y===m){N=!0,m=C,u=M;break}Y=Y.sibling}if(!N)throw Error(o(189))}}if(u.alternate!==m)throw Error(o(190))}if(u.tag!==3)throw Error(o(188));return u.stateNode.current===u?t:r}function Zo(t){return t=Da(t),t!==null?qo(t):null}function qo(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=qo(t);if(r!==null)return r;t=t.sibling}return null}var Ko=n.unstable_scheduleCallback,Zr=n.unstable_cancelCallback,Mo=n.unstable_shouldYield,Js=n.unstable_requestPaint,gi=n.unstable_now,Na=n.unstable_getCurrentPriorityLevel,qr=n.unstable_ImmediatePriority,Jo=n.unstable_UserBlockingPriority,Ps=n.unstable_NormalPriority,Kr=n.unstable_LowPriority,Ar=n.unstable_IdlePriority,As=null,Mn=null;function sr(t){if(Mn&&typeof Mn.onCommitFiberRoot=="function")try{Mn.onCommitFiberRoot(As,t,void 0,(t.current.flags&128)===128)}catch{}}var Ne=Math.clz32?Math.clz32:Br,ii=Math.log,Jr=Math.LN2;function Br(t){return t>>>=0,t===0?32:31-(ii(t)/Jr|0)|0}var En=64,V=4194304;function dt(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Pt(t,r){var u=t.pendingLanes;if(u===0)return 0;var m=0,M=t.suspendedLanes,C=t.pingedLanes,N=u&268435455;if(N!==0){var Y=N&~M;Y!==0?m=dt(Y):(C&=N,C!==0&&(m=dt(C)))}else N=u&~M,N!==0?m=dt(N):C!==0&&(m=dt(C));if(m===0)return 0;if(r!==0&&r!==m&&(r&M)===0&&(M=m&-m,C=r&-r,M>=C||M===16&&(C&4194240)!==0))return r;if((m&4)!==0&&(m|=u&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=m;0<r;)u=31-Ne(r),M=1<<u,m|=t[u],r&=~M;return m}function Kt(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jt(t,r){for(var u=t.suspendedLanes,m=t.pingedLanes,M=t.expirationTimes,C=t.pendingLanes;0<C;){var N=31-Ne(C),Y=1<<N,nt=M[N];nt===-1?((Y&u)===0||(Y&m)!==0)&&(M[N]=Kt(Y,r)):nt<=r&&(t.expiredLanes|=Y),C&=~Y}}function Ot(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Yt(){var t=En;return En<<=1,(En&4194240)===0&&(En=64),t}function Jt(t){for(var r=[],u=0;31>u;u++)r.push(t);return r}function Ht(t,r,u){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-Ne(r),t[r]=u}function Zt(t,r){var u=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var m=t.eventTimes;for(t=t.expirationTimes;0<u;){var M=31-Ne(u),C=1<<M;r[M]=0,m[M]=-1,t[M]=-1,u&=~C}}function ye(t,r){var u=t.entangledLanes|=r;for(t=t.entanglements;u;){var m=31-Ne(u),M=1<<m;M&r|t[m]&r&&(t[m]|=r),u&=~M}}var ie=0;function Be(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var Te,Ue,oi,Qe,dn,Xr=!1,we=[],be=null,fi=null,wi=null,Si=new Map,Pe=new Map,ti=[],ei="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sn(t,r){switch(t){case"focusin":case"focusout":be=null;break;case"dragenter":case"dragleave":fi=null;break;case"mouseover":case"mouseout":wi=null;break;case"pointerover":case"pointerout":Si.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pe.delete(r.pointerId)}}function Ln(t,r,u,m,M,C){return t===null||t.nativeEvent!==C?(t={blockedOn:r,domEventName:u,eventSystemFlags:m,nativeEvent:C,targetContainers:[M]},r!==null&&(r=yr(r),r!==null&&Ue(r)),t):(t.eventSystemFlags|=m,r=t.targetContainers,M!==null&&r.indexOf(M)===-1&&r.push(M),t)}function Xs(t,r,u,m,M){switch(r){case"focusin":return be=Ln(be,t,r,u,m,M),!0;case"dragenter":return fi=Ln(fi,t,r,u,m,M),!0;case"mouseover":return wi=Ln(wi,t,r,u,m,M),!0;case"pointerover":var C=M.pointerId;return Si.set(C,Ln(Si.get(C)||null,t,r,u,m,M)),!0;case"gotpointercapture":return C=M.pointerId,Pe.set(C,Ln(Pe.get(C)||null,t,r,u,m,M)),!0}return!1}function Hn(t){var r=Fs(t.target);if(r!==null){var u=nr(r);if(u!==null){if(r=u.tag,r===13){if(r=rr(u),r!==null){t.blockedOn=r,dn(t.priority,function(){oi(u)});return}}else if(r===3&&u.stateNode.current.memoizedState.isDehydrated){t.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Tn(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var u=Xo(t.domEventName,t.eventSystemFlags,r[0],t.nativeEvent);if(u===null){u=t.nativeEvent;var m=new u.constructor(u.type,u);Ms=m,u.target.dispatchEvent(m),Ms=null}else return r=yr(u),r!==null&&Ue(r),t.blockedOn=u,!1;r.shift()}return!0}function Yr(t,r,u){Tn(t)&&u.delete(r)}function Tr(){Xr=!1,be!==null&&Tn(be)&&(be=null),fi!==null&&Tn(fi)&&(fi=null),wi!==null&&Tn(wi)&&(wi=null),Si.forEach(Yr),Pe.forEach(Yr)}function mi(t,r){t.blockedOn===r&&(t.blockedOn=null,Xr||(Xr=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Tr)))}function Cn(t){function r(M){return mi(M,t)}if(0<we.length){mi(we[0],t);for(var u=1;u<we.length;u++){var m=we[u];m.blockedOn===t&&(m.blockedOn=null)}}for(be!==null&&mi(be,t),fi!==null&&mi(fi,t),wi!==null&&mi(wi,t),Si.forEach(r),Pe.forEach(r),u=0;u<ti.length;u++)m=ti[u],m.blockedOn===t&&(m.blockedOn=null);for(;0<ti.length&&(u=ti[0],u.blockedOn===null);)Hn(u),u.blockedOn===null&&ti.shift()}var Ir=Tt.ReactCurrentBatchConfig,Bs=!0;function Eo(t,r,u,m){var M=ie,C=Ir.transition;Ir.transition=null;try{ie=1,Qr(t,r,u,m)}finally{ie=M,Ir.transition=C}}function Lo(t,r,u,m){var M=ie,C=Ir.transition;Ir.transition=null;try{ie=4,Qr(t,r,u,m)}finally{ie=M,Ir.transition=C}}function Qr(t,r,u,m){if(Bs){var M=Xo(t,r,u,m);if(M===null)i(t,r,m,Rr,u),sn(t,m);else if(Xs(M,t,r,u,m))m.stopPropagation();else if(sn(t,m),r&4&&-1<ei.indexOf(t)){for(;M!==null;){var C=yr(M);if(C!==null&&Te(C),C=Xo(t,r,u,m),C===null&&i(t,r,m,Rr,u),C===M)break;M=C}M!==null&&m.stopPropagation()}else i(t,r,m,null,u)}}var Rr=null;function Xo(t,r,u,m){if(Rr=null,t=qi(m),t=Fs(t),t!==null)if(r=nr(t),r===null)t=null;else if(u=r.tag,u===13){if(t=rr(r),t!==null)return t;t=null}else if(u===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null);return Rr=t,null}function qe(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Na()){case qr:return 1;case Jo:return 4;case Ps:case Kr:return 16;case Ar:return 536870912;default:return 16}default:return 16}}var Or=null,De=null,or=null;function Ys(){if(or)return or;var t,r=De,u=r.length,m,M="value"in Or?Or.value:Or.textContent,C=M.length;for(t=0;t<u&&r[t]===M[t];t++);var N=u-t;for(m=1;m<=N&&r[u-m]===M[C-m];m++);return or=M.slice(t,1<m?1-m:void 0)}function Yo(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Ts(){return!0}function ll(){return!1}function Ki(t){function r(u,m,M,C,N){this._reactName=u,this._targetInst=M,this.type=m,this.nativeEvent=C,this.target=N,this.currentTarget=null;for(var Y in t)t.hasOwnProperty(Y)&&(u=t[Y],this[Y]=u?u(C):C[Y]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?Ts:ll,this.isPropagationStopped=ll,this}return Rt(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Ts)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Ts)},persist:function(){},isPersistent:Ts}),r}var Dr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fa=Ki(Dr),pn=Rt({},Dr,{view:0,detail:0}),ul=Ki(pn),Ni,Ga,Qs,Vn=Rt({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rs,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Qs&&(Qs&&t.type==="mousemove"?(Ni=t.screenX-Qs.screenX,Ga=t.screenY-Qs.screenY):Ga=Ni=0,Qs=t),Ni)},movementY:function(t){return"movementY"in t?t.movementY:Ga}}),za=Ki(Vn),hl=Rt({},Vn,{dataTransfer:0}),ja=Ki(hl),Ul=Rt({},pn,{relatedTarget:0}),Qo=Ki(Ul),Ua=Rt({},Dr,{animationName:0,elapsedTime:0,pseudoElement:0}),Hl=Ki(Ua),Fi=Rt({},Dr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ji=Ki(Fi),cl=Rt({},Dr,{data:0}),ts=Ki(cl),Is={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},es={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vl(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=gn[t])?!!r[t]:!1}function Rs(){return Vl}var mn=Rt({},pn,{key:function(t){if(t.key){var r=Is[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Yo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?es[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rs,charCode:function(t){return t.type==="keypress"?Yo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Yo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),In=Ki(mn),Ha=Rt({},Vn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Co=Ki(Ha),Va=Rt({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rs}),Rn=Ki(Va),ar=Rt({},Dr,{propertyName:0,elapsedTime:0,pseudoElement:0}),ta=Ki(ar),Wa=Rt({},Vn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),$a=Ki(Wa),on=[9,13,27,32],is=v&&"CompositionEvent"in window,bo=null;v&&"documentMode"in document&&(bo=document.documentMode);var Wn=v&&"TextEvent"in window&&!bo,fl=v&&(!is||bo&&8<bo&&11>=bo),Os=" ",dl=!1;function to(t,r){switch(t){case"keyup":return on.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function So(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Nr=!1;function Wl(t,r){switch(t){case"compositionend":return So(r);case"keypress":return r.which!==32?null:(dl=!0,Os);case"textInput":return t=r.data,t===Os&&dl?null:t;default:return null}}function Fr(t,r){if(Nr)return t==="compositionend"||!is&&to(t,r)?(t=Ys(),or=De=Or=null,Nr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return fl&&r.locale!=="ko"?null:r.data;default:return null}}var lr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Za(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!lr[t.type]:r==="textarea"}function ea(t,r,u,m){Oa(m),r=p(r,"onChange"),0<r.length&&(u=new Fa("onChange","change",null,u,m),t.push({event:u,listeners:r}))}var $n=null,bn=null;function $l(t){dr(t,0)}function Zn(t){var r=as(t);if(vs(r))return t}function ko(t,r){if(t==="change")return r}var ur=!1;if(v){var eo;if(v){var ia="oninput"in document;if(!ia){var Po=document.createElement("div");Po.setAttribute("oninput","return;"),ia=typeof Po.oninput=="function"}eo=ia}else eo=!1;ur=eo&&(!document.documentMode||9<document.documentMode)}function Ao(){$n&&($n.detachEvent("onpropertychange",Bo),bn=$n=null)}function Bo(t){if(t.propertyName==="value"&&Zn(bn)){var r=[];ea(r,bn,t,qi(t)),Cs($l,r)}}function na(t,r,u){t==="focusin"?(Ao(),$n=r,bn=u,$n.attachEvent("onpropertychange",Bo)):t==="focusout"&&Ao()}function io(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Zn(bn)}function ra(t,r){if(t==="click")return Zn(r)}function sa(t,r){if(t==="input"||t==="change")return Zn(r)}function oa(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var On=typeof Object.is=="function"?Object.is:oa;function hr(t,r){if(On(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var u=Object.keys(t),m=Object.keys(r);if(u.length!==m.length)return!1;for(m=0;m<u.length;m++){var M=u[m];if(!E.call(r,M)||!On(t[M],r[M]))return!1}return!0}function pl(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function no(t,r){var u=pl(t);t=0;for(var m;u;){if(u.nodeType===3){if(m=t+u.textContent.length,t<=r&&m>=r)return{node:u,offset:r-t};t=m}t:{for(;u;){if(u.nextSibling){u=u.nextSibling;break t}u=u.parentNode}u=void 0}u=pl(u)}}function qa(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?qa(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Ka(){for(var t=window,r=nn();r instanceof t.HTMLIFrameElement;){try{var u=typeof r.contentWindow.location.href=="string"}catch{u=!1}if(u)t=r.contentWindow;else break;r=nn(t.document)}return r}function Ja(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}function cr(t){var r=Ka(),u=t.focusedElem,m=t.selectionRange;if(r!==u&&u&&u.ownerDocument&&qa(u.ownerDocument.documentElement,u)){if(m!==null&&Ja(u)){if(r=m.start,t=m.end,t===void 0&&(t=r),"selectionStart"in u)u.selectionStart=r,u.selectionEnd=Math.min(t,u.value.length);else if(t=(r=u.ownerDocument||document)&&r.defaultView||window,t.getSelection){t=t.getSelection();var M=u.textContent.length,C=Math.min(m.start,M);m=m.end===void 0?C:Math.min(m.end,M),!t.extend&&C>m&&(M=m,m=C,C=M),M=no(u,C);var N=no(u,m);M&&N&&(t.rangeCount!==1||t.anchorNode!==M.node||t.anchorOffset!==M.offset||t.focusNode!==N.node||t.focusOffset!==N.offset)&&(r=r.createRange(),r.setStart(M.node,M.offset),t.removeAllRanges(),C>m?(t.addRange(r),t.extend(N.node,N.offset)):(r.setEnd(N.node,N.offset),t.addRange(r)))}}for(r=[],t=u;t=t.parentNode;)t.nodeType===1&&r.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<r.length;u++)t=r[u],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ns=v&&"documentMode"in document&&11>=document.documentMode,ro=null,so=null,To=null,aa=!1;function gl(t,r,u){var m=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;aa||ro==null||ro!==nn(m)||(m=ro,"selectionStart"in m&&Ja(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),To&&hr(To,m)||(To=m,m=p(so,"onSelect"),0<m.length&&(r=new Fa("onSelect","select",null,r,u),t.push({event:r,listeners:m}),r.target=ro)))}function rs(t,r){var u={};return u[t.toLowerCase()]=r.toLowerCase(),u["Webkit"+t]="webkit"+r,u["Moz"+t]="moz"+r,u}var oo={animationend:rs("Animation","AnimationEnd"),animationiteration:rs("Animation","AnimationIteration"),animationstart:rs("Animation","AnimationStart"),transitionend:rs("Transition","TransitionEnd")},ss={},la={};v&&(la=document.createElement("div").style,"AnimationEvent"in window||(delete oo.animationend.animation,delete oo.animationiteration.animation,delete oo.animationstart.animation),"TransitionEvent"in window||delete oo.transitionend.transition);function Ds(t){if(ss[t])return ss[t];if(!oo[t])return t;var r=oo[t],u;for(u in r)if(r.hasOwnProperty(u)&&u in la)return ss[t]=r[u];return t}var ml=Ds("animationend"),fr=Ds("animationiteration"),ua=Ds("animationstart"),Io=Ds("transitionend"),ao=new Map,_l="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sn(t,r){ao.set(t,r),g(r,[t])}for(var ki=0;ki<_l.length;ki++){var Gi=_l[ki],Xa=Gi.toLowerCase(),qn=Gi[0].toUpperCase()+Gi.slice(1);Sn(Xa,"on"+qn)}Sn(ml,"onAnimationEnd"),Sn(fr,"onAnimationIteration"),Sn(ua,"onAnimationStart"),Sn("dblclick","onDoubleClick"),Sn("focusin","onFocus"),Sn("focusout","onBlur"),Sn(Io,"onTransitionEnd"),y("onMouseEnter",["mouseout","mouseover"]),y("onMouseLeave",["mouseout","mouseover"]),y("onPointerEnter",["pointerout","pointerover"]),y("onPointerLeave",["pointerout","pointerover"]),g("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),g("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),g("onBeforeInput",["compositionend","keypress","textInput","paste"]),g("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),g("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),g("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ie="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ha=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ie));function Ro(t,r,u){var m=t.type||"unknown-event";t.currentTarget=u,wo(m,r,void 0,t),t.currentTarget=null}function dr(t,r){r=(r&4)!==0;for(var u=0;u<t.length;u++){var m=t[u],M=m.event;m=m.listeners;t:{var C=void 0;if(r)for(var N=m.length-1;0<=N;N--){var Y=m[N],nt=Y.instance,kt=Y.currentTarget;if(Y=Y.listener,nt!==C&&M.isPropagationStopped())break t;Ro(M,Y,kt),C=nt}else for(N=0;N<m.length;N++){if(Y=m[N],nt=Y.instance,kt=Y.currentTarget,Y=Y.listener,nt!==C&&M.isPropagationStopped())break t;Ro(M,Y,kt),C=nt}}}if(Ss)throw t=ks,Ss=!1,ks=null,t}function Ge(t,r){var u=r[Ns];u===void 0&&(u=r[Ns]=new Set);var m=t+"__bubble";u.has(m)||(os(r,t,2,!1),u.add(m))}function ca(t,r,u){var m=0;r&&(m|=4),os(u,t,m,r)}var Xi="_reactListening"+Math.random().toString(36).slice(2);function zi(t){if(!t[Xi]){t[Xi]=!0,c.forEach(function(u){u!=="selectionchange"&&(ha.has(u)||ca(u,!1,t),ca(u,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Xi]||(r[Xi]=!0,ca("selectionchange",!1,r))}}function os(t,r,u,m){switch(qe(r)){case 1:var M=Eo;break;case 4:M=Lo;break;default:M=Qr}u=M.bind(null,r,u,t),M=void 0,!bs||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(M=!0),m?M!==void 0?t.addEventListener(r,u,{capture:!0,passive:M}):t.addEventListener(r,u,!0):M!==void 0?t.addEventListener(r,u,{passive:M}):t.addEventListener(r,u,!1)}function i(t,r,u,m,M){var C=m;if((r&1)===0&&(r&2)===0&&m!==null)t:for(;;){if(m===null)return;var N=m.tag;if(N===3||N===4){var Y=m.stateNode.containerInfo;if(Y===M||Y.nodeType===8&&Y.parentNode===M)break;if(N===4)for(N=m.return;N!==null;){var nt=N.tag;if((nt===3||nt===4)&&(nt=N.stateNode.containerInfo,nt===M||nt.nodeType===8&&nt.parentNode===M))return;N=N.return}for(;Y!==null;){if(N=Fs(Y),N===null)return;if(nt=N.tag,nt===5||nt===6){m=C=N;continue t}Y=Y.parentNode}}m=m.return}Cs(function(){var kt=C,$t=qi(u),qt=[];t:{var Vt=ao.get(t);if(Vt!==void 0){var ue=Fa,ve=t;switch(t){case"keypress":if(Yo(u)===0)break t;case"keydown":case"keyup":ue=In;break;case"focusin":ve="focus",ue=Qo;break;case"focusout":ve="blur",ue=Qo;break;case"beforeblur":case"afterblur":ue=Qo;break;case"click":if(u.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=za;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=ja;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=Rn;break;case ml:case fr:case ua:ue=Hl;break;case Io:ue=ta;break;case"scroll":ue=ul;break;case"wheel":ue=$a;break;case"copy":case"cut":case"paste":ue=Ji;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=Co}var xe=(r&4)!==0,Hi=!xe&&t==="scroll",vt=xe?Vt!==null?Vt+"Capture":null:Vt;xe=[];for(var lt=kt,Lt;lt!==null;){Lt=lt;var Xt=Lt.stateNode;if(Lt.tag===5&&Xt!==null&&(Lt=Xt,vt!==null&&(Xt=yi(lt,vt),Xt!=null&&xe.push(l(lt,Xt,Lt)))),Hi)break;lt=lt.return}0<xe.length&&(Vt=new ue(Vt,ve,null,u,$t),qt.push({event:Vt,listeners:xe}))}}if((r&7)===0){t:{if(Vt=t==="mouseover"||t==="pointerover",ue=t==="mouseout"||t==="pointerout",Vt&&u!==Ms&&(ve=u.relatedTarget||u.fromElement)&&(Fs(ve)||ve[ni]))break t;if((ue||Vt)&&(Vt=$t.window===$t?$t:(Vt=$t.ownerDocument)?Vt.defaultView||Vt.parentWindow:window,ue?(ve=u.relatedTarget||u.toElement,ue=kt,ve=ve?Fs(ve):null,ve!==null&&(Hi=nr(ve),ve!==Hi||ve.tag!==5&&ve.tag!==6)&&(ve=null)):(ue=null,ve=kt),ue!==ve)){if(xe=za,Xt="onMouseLeave",vt="onMouseEnter",lt="mouse",(t==="pointerout"||t==="pointerover")&&(xe=Co,Xt="onPointerLeave",vt="onPointerEnter",lt="pointer"),Hi=ue==null?Vt:as(ue),Lt=ve==null?Vt:as(ve),Vt=new xe(Xt,lt+"leave",ue,u,$t),Vt.target=Hi,Vt.relatedTarget=Lt,Xt=null,Fs($t)===kt&&(xe=new xe(vt,lt+"enter",ve,u,$t),xe.target=Lt,xe.relatedTarget=Hi,Xt=xe),Hi=Xt,ue&&ve)e:{for(xe=ue,vt=ve,lt=0,Lt=xe;Lt;Lt=x(Lt))lt++;for(Lt=0,Xt=vt;Xt;Xt=x(Xt))Lt++;for(;0<lt-Lt;)xe=x(xe),lt--;for(;0<Lt-lt;)vt=x(vt),Lt--;for(;lt--;){if(xe===vt||vt!==null&&xe===vt.alternate)break e;xe=x(xe),vt=x(vt)}xe=null}else xe=null;ue!==null&&k(qt,Vt,ue,xe,!1),ve!==null&&Hi!==null&&k(qt,Hi,ve,xe,!0)}}t:{if(Vt=kt?as(kt):window,ue=Vt.nodeName&&Vt.nodeName.toLowerCase(),ue==="select"||ue==="input"&&Vt.type==="file")var Ee=ko;else if(Za(Vt))if(ur)Ee=sa;else{Ee=io;var Re=na}else(ue=Vt.nodeName)&&ue.toLowerCase()==="input"&&(Vt.type==="checkbox"||Vt.type==="radio")&&(Ee=ra);if(Ee&&(Ee=Ee(t,kt))){ea(qt,Ee,u,$t);break t}Re&&Re(t,Vt,kt),t==="focusout"&&(Re=Vt._wrapperState)&&Re.controlled&&Vt.type==="number"&&Ks(Vt,"number",Vt.value)}switch(Re=kt?as(kt):window,t){case"focusin":(Za(Re)||Re.contentEditable==="true")&&(ro=Re,so=kt,To=null);break;case"focusout":To=so=ro=null;break;case"mousedown":aa=!0;break;case"contextmenu":case"mouseup":case"dragend":aa=!1,gl(qt,u,$t);break;case"selectionchange":if(ns)break;case"keydown":case"keyup":gl(qt,u,$t)}var Oe;if(is)t:{switch(t){case"compositionstart":var ze="onCompositionStart";break t;case"compositionend":ze="onCompositionEnd";break t;case"compositionupdate":ze="onCompositionUpdate";break t}ze=void 0}else Nr?to(t,u)&&(ze="onCompositionEnd"):t==="keydown"&&u.keyCode===229&&(ze="onCompositionStart");ze&&(fl&&u.locale!=="ko"&&(Nr||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&Nr&&(Oe=Ys()):(Or=$t,De="value"in Or?Or.value:Or.textContent,Nr=!0)),Re=p(kt,ze),0<Re.length&&(ze=new ts(ze,t,null,u,$t),qt.push({event:ze,listeners:Re}),Oe?ze.data=Oe:(Oe=So(u),Oe!==null&&(ze.data=Oe)))),(Oe=Wn?Wl(t,u):Fr(t,u))&&(kt=p(kt,"onBeforeInput"),0<kt.length&&($t=new ts("onBeforeInput","beforeinput",null,u,$t),qt.push({event:$t,listeners:kt}),$t.data=Oe))}dr(qt,r)})}function l(t,r,u){return{instance:t,listener:r,currentTarget:u}}function p(t,r){for(var u=r+"Capture",m=[];t!==null;){var M=t,C=M.stateNode;M.tag===5&&C!==null&&(M=C,C=yi(t,u),C!=null&&m.unshift(l(t,C,M)),C=yi(t,r),C!=null&&m.push(l(t,C,M))),t=t.return}return m}function x(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function k(t,r,u,m,M){for(var C=r._reactName,N=[];u!==null&&u!==m;){var Y=u,nt=Y.alternate,kt=Y.stateNode;if(nt!==null&&nt===m)break;Y.tag===5&&kt!==null&&(Y=kt,M?(nt=yi(u,C),nt!=null&&N.unshift(l(u,nt,Y))):M||(nt=yi(u,C),nt!=null&&N.push(l(u,nt,Y)))),u=u.return}N.length!==0&&t.push({event:r,listeners:N})}var F=/\r\n?/g,Q=/\u0000|\uFFFD/g;function gt(t){return(typeof t=="string"?t:""+t).replace(F,`
`).replace(Q,"")}function bt(t,r,u){if(r=gt(r),gt(t)!==r&&u)throw Error(o(425))}function Ft(){}var re=null,Ae=null;function He(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var ji=typeof setTimeout=="function"?setTimeout:void 0,Pi=typeof clearTimeout=="function"?clearTimeout:void 0,an=typeof Promise=="function"?Promise:void 0,vi=typeof queueMicrotask=="function"?queueMicrotask:typeof an<"u"?function(t){return an.resolve(null).then(t).catch(pr)}:ji;function pr(t){setTimeout(function(){throw t})}function Oo(t,r){var u=r,m=0;do{var M=u.nextSibling;if(t.removeChild(u),M&&M.nodeType===8)if(u=M.data,u==="/$"){if(m===0){t.removeChild(M),Cn(r);return}m--}else u!=="$"&&u!=="$?"&&u!=="$!"||m++;u=M}while(u);Cn(r)}function Kn(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return t}function Ya(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var u=t.data;if(u==="$"||u==="$!"||u==="$?"){if(r===0)return t;r--}else u==="/$"&&r++}t=t.previousSibling}return null}var gr=Math.random().toString(36).slice(2),mr="__reactFiber$"+gr,lo="__reactProps$"+gr,ni="__reactContainer$"+gr,Ns="__reactEvents$"+gr,Zl="__reactListeners$"+gr,_r="__reactHandles$"+gr;function Fs(t){var r=t[mr];if(r)return r;for(var u=t.parentNode;u;){if(r=u[ni]||u[mr]){if(u=r.alternate,r.child!==null||u!==null&&u.child!==null)for(t=Ya(t);t!==null;){if(u=t[mr])return u;t=Ya(t)}return r}t=u,u=t.parentNode}return null}function yr(t){return t=t[mr]||t[ni],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function as(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(o(33))}function fa(t){return t[lo]||null}var yl=[],da=-1;function Gs(t){return{current:t}}function _i(t){0>da||(t.current=yl[da],yl[da]=null,da--)}function di(t,r){da++,yl[da]=t.current,t.current=r}var uo={},Ai=Gs(uo),ln=Gs(!1),Do=uo;function pa(t,r){var u=t.type.contextTypes;if(!u)return uo;var m=t.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===r)return m.__reactInternalMemoizedMaskedChildContext;var M={},C;for(C in u)M[C]=r[C];return m&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=M),M}function un(t){return t=t.childContextTypes,t!=null}function No(){_i(ln),_i(Ai)}function ql(t,r,u){if(Ai.current!==uo)throw Error(o(168));di(Ai,r),di(ln,u)}function Nu(t,r,u){var m=t.stateNode;if(r=r.childContextTypes,typeof m.getChildContext!="function")return u;m=m.getChildContext();for(var M in m)if(!(M in r))throw Error(o(108,Fe(t)||"Unknown",M));return Rt({},u,m)}function vl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||uo,Do=Ai.current,di(Ai,t),di(ln,ln.current),!0}function Kl(t,r,u){var m=t.stateNode;if(!m)throw Error(o(169));u?(t=Nu(t,r,Do),m.__reactInternalMemoizedMergedChildContext=t,_i(ln),_i(Ai),di(Ai,t)):_i(ln),di(ln,u)}var ls=null,xl=!1,Jl=!1;function Xl(t){ls===null?ls=[t]:ls.push(t)}function jh(t){xl=!0,Xl(t)}function ho(){if(!Jl&&ls!==null){Jl=!0;var t=0,r=ie;try{var u=ls;for(ie=1;t<u.length;t++){var m=u[t];do m=m(!0);while(m!==null)}ls=null,xl=!1}catch(M){throw ls!==null&&(ls=ls.slice(t+1)),Ko(qr,ho),M}finally{ie=r,Jl=!1}}return null}var ga=[],ma=0,wl=null,Ml=0,Jn=[],hn=0,us=null,zs=1,js="";function Fo(t,r){ga[ma++]=Ml,ga[ma++]=wl,wl=t,Ml=r}function Ui(t,r,u){Jn[hn++]=zs,Jn[hn++]=js,Jn[hn++]=us,us=t;var m=zs;t=js;var M=32-Ne(m)-1;m&=~(1<<M),u+=1;var C=32-Ne(r)+M;if(30<C){var N=M-M%5;C=(m&(1<<N)-1).toString(32),m>>=N,M-=N,zs=1<<32-Ne(r)+M|u<<M|m,js=C+t}else zs=1<<C|u<<M|m,js=t}function hs(t){t.return!==null&&(Fo(t,1),Ui(t,1,0))}function Yl(t){for(;t===wl;)wl=ga[--ma],ga[ma]=null,Ml=ga[--ma],ga[ma]=null;for(;t===us;)us=Jn[--hn],Jn[hn]=null,js=Jn[--hn],Jn[hn]=null,zs=Jn[--hn],Jn[hn]=null}var Xn=null,kn=null,xi=!1,Gr=null;function Fu(t,r){var u=ds(5,null,null,0);u.elementType="DELETED",u.stateNode=r,u.return=t,r=t.deletions,r===null?(t.deletions=[u],t.flags|=16):r.push(u)}function Ql(t,r){switch(t.tag){case 5:var u=t.type;return r=r.nodeType!==1||u.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(t.stateNode=r,Xn=t,kn=Kn(r.firstChild),!0):!1;case 6:return r=t.pendingProps===""||r.nodeType!==3?null:r,r!==null?(t.stateNode=r,Xn=t,kn=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(u=us!==null?{id:zs,overflow:js}:null,t.memoizedState={dehydrated:r,treeContext:u,retryLane:1073741824},u=ds(18,null,null,0),u.stateNode=r,u.return=t,t.child=u,Xn=t,kn=null,!0):!1;default:return!1}}function El(t){return(t.mode&1)!==0&&(t.flags&128)===0}function s(t){if(xi){var r=kn;if(r){var u=r;if(!Ql(t,r)){if(El(t))throw Error(o(418));r=Kn(u.nextSibling);var m=Xn;r&&Ql(t,r)?Fu(m,u):(t.flags=t.flags&-4097|2,xi=!1,Xn=t)}}else{if(El(t))throw Error(o(418));t.flags=t.flags&-4097|2,xi=!1,Xn=t}}}function a(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Xn=t}function h(t){if(t!==Xn)return!1;if(!xi)return a(t),xi=!0,!1;var r;if((r=t.tag!==3)&&!(r=t.tag!==5)&&(r=t.type,r=r!=="head"&&r!=="body"&&!He(t.type,t.memoizedProps)),r&&(r=kn)){if(El(t))throw d(),Error(o(418));for(;r;)Fu(t,r),r=Kn(r.nextSibling)}if(a(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));t:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8){var u=t.data;if(u==="/$"){if(r===0){kn=Kn(t.nextSibling);break t}r--}else u!=="$"&&u!=="$!"&&u!=="$?"||r++}t=t.nextSibling}kn=null}}else kn=Xn?Kn(t.stateNode.nextSibling):null;return!0}function d(){for(var t=kn;t;)t=Kn(t.nextSibling)}function _(){kn=Xn=null,xi=!1}function w(t){Gr===null?Gr=[t]:Gr.push(t)}var b=Tt.ReactCurrentBatchConfig;function S(t,r,u){if(t=u.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(o(309));var m=u.stateNode}if(!m)throw Error(o(147,t));var M=m,C=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===C?r.ref:(r=function(N){var Y=M.refs;N===null?delete Y[C]:Y[C]=N},r._stringRef=C,r)}if(typeof t!="string")throw Error(o(284));if(!u._owner)throw Error(o(290,t))}return t}function T(t,r){throw t=Object.prototype.toString.call(r),Error(o(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function O(t){var r=t._init;return r(t._payload)}function X(t){function r(vt,lt){if(t){var Lt=vt.deletions;Lt===null?(vt.deletions=[lt],vt.flags|=16):Lt.push(lt)}}function u(vt,lt){if(!t)return null;for(;lt!==null;)r(vt,lt),lt=lt.sibling;return null}function m(vt,lt){for(vt=new Map;lt!==null;)lt.key!==null?vt.set(lt.key,lt):vt.set(lt.index,lt),lt=lt.sibling;return vt}function M(vt,lt){return vt=Ea(vt,lt),vt.index=0,vt.sibling=null,vt}function C(vt,lt,Lt){return vt.index=Lt,t?(Lt=vt.alternate,Lt!==null?(Lt=Lt.index,Lt<lt?(vt.flags|=2,lt):Lt):(vt.flags|=2,lt)):(vt.flags|=1048576,lt)}function N(vt){return t&&vt.alternate===null&&(vt.flags|=2),vt}function Y(vt,lt,Lt,Xt){return lt===null||lt.tag!==6?(lt=wc(Lt,vt.mode,Xt),lt.return=vt,lt):(lt=M(lt,Lt),lt.return=vt,lt)}function nt(vt,lt,Lt,Xt){var Ee=Lt.type;return Ee===Dt?$t(vt,lt,Lt.props.children,Xt,Lt.key):lt!==null&&(lt.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===de&&O(Ee)===lt.type)?(Xt=M(lt,Lt.props),Xt.ref=S(vt,lt,Lt),Xt.return=vt,Xt):(Xt=ih(Lt.type,Lt.key,Lt.props,null,vt.mode,Xt),Xt.ref=S(vt,lt,Lt),Xt.return=vt,Xt)}function kt(vt,lt,Lt,Xt){return lt===null||lt.tag!==4||lt.stateNode.containerInfo!==Lt.containerInfo||lt.stateNode.implementation!==Lt.implementation?(lt=Mc(Lt,vt.mode,Xt),lt.return=vt,lt):(lt=M(lt,Lt.children||[]),lt.return=vt,lt)}function $t(vt,lt,Lt,Xt,Ee){return lt===null||lt.tag!==7?(lt=rl(Lt,vt.mode,Xt,Ee),lt.return=vt,lt):(lt=M(lt,Lt),lt.return=vt,lt)}function qt(vt,lt,Lt){if(typeof lt=="string"&&lt!==""||typeof lt=="number")return lt=wc(""+lt,vt.mode,Lt),lt.return=vt,lt;if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case Gt:return Lt=ih(lt.type,lt.key,lt.props,null,vt.mode,Lt),Lt.ref=S(vt,null,lt),Lt.return=vt,Lt;case zt:return lt=Mc(lt,vt.mode,Lt),lt.return=vt,lt;case de:var Xt=lt._init;return qt(vt,Xt(lt._payload),Lt)}if(bi(lt)||Qt(lt))return lt=rl(lt,vt.mode,Lt,null),lt.return=vt,lt;T(vt,lt)}return null}function Vt(vt,lt,Lt,Xt){var Ee=lt!==null?lt.key:null;if(typeof Lt=="string"&&Lt!==""||typeof Lt=="number")return Ee!==null?null:Y(vt,lt,""+Lt,Xt);if(typeof Lt=="object"&&Lt!==null){switch(Lt.$$typeof){case Gt:return Lt.key===Ee?nt(vt,lt,Lt,Xt):null;case zt:return Lt.key===Ee?kt(vt,lt,Lt,Xt):null;case de:return Ee=Lt._init,Vt(vt,lt,Ee(Lt._payload),Xt)}if(bi(Lt)||Qt(Lt))return Ee!==null?null:$t(vt,lt,Lt,Xt,null);T(vt,Lt)}return null}function ue(vt,lt,Lt,Xt,Ee){if(typeof Xt=="string"&&Xt!==""||typeof Xt=="number")return vt=vt.get(Lt)||null,Y(lt,vt,""+Xt,Ee);if(typeof Xt=="object"&&Xt!==null){switch(Xt.$$typeof){case Gt:return vt=vt.get(Xt.key===null?Lt:Xt.key)||null,nt(lt,vt,Xt,Ee);case zt:return vt=vt.get(Xt.key===null?Lt:Xt.key)||null,kt(lt,vt,Xt,Ee);case de:var Re=Xt._init;return ue(vt,lt,Lt,Re(Xt._payload),Ee)}if(bi(Xt)||Qt(Xt))return vt=vt.get(Lt)||null,$t(lt,vt,Xt,Ee,null);T(lt,Xt)}return null}function ve(vt,lt,Lt,Xt){for(var Ee=null,Re=null,Oe=lt,ze=lt=0,vn=null;Oe!==null&&ze<Lt.length;ze++){Oe.index>ze?(vn=Oe,Oe=null):vn=Oe.sibling;var li=Vt(vt,Oe,Lt[ze],Xt);if(li===null){Oe===null&&(Oe=vn);break}t&&Oe&&li.alternate===null&&r(vt,Oe),lt=C(li,lt,ze),Re===null?Ee=li:Re.sibling=li,Re=li,Oe=vn}if(ze===Lt.length)return u(vt,Oe),xi&&Fo(vt,ze),Ee;if(Oe===null){for(;ze<Lt.length;ze++)Oe=qt(vt,Lt[ze],Xt),Oe!==null&&(lt=C(Oe,lt,ze),Re===null?Ee=Oe:Re.sibling=Oe,Re=Oe);return xi&&Fo(vt,ze),Ee}for(Oe=m(vt,Oe);ze<Lt.length;ze++)vn=ue(Oe,vt,ze,Lt[ze],Xt),vn!==null&&(t&&vn.alternate!==null&&Oe.delete(vn.key===null?ze:vn.key),lt=C(vn,lt,ze),Re===null?Ee=vn:Re.sibling=vn,Re=vn);return t&&Oe.forEach(function(La){return r(vt,La)}),xi&&Fo(vt,ze),Ee}function xe(vt,lt,Lt,Xt){var Ee=Qt(Lt);if(typeof Ee!="function")throw Error(o(150));if(Lt=Ee.call(Lt),Lt==null)throw Error(o(151));for(var Re=Ee=null,Oe=lt,ze=lt=0,vn=null,li=Lt.next();Oe!==null&&!li.done;ze++,li=Lt.next()){Oe.index>ze?(vn=Oe,Oe=null):vn=Oe.sibling;var La=Vt(vt,Oe,li.value,Xt);if(La===null){Oe===null&&(Oe=vn);break}t&&Oe&&La.alternate===null&&r(vt,Oe),lt=C(La,lt,ze),Re===null?Ee=La:Re.sibling=La,Re=La,Oe=vn}if(li.done)return u(vt,Oe),xi&&Fo(vt,ze),Ee;if(Oe===null){for(;!li.done;ze++,li=Lt.next())li=qt(vt,li.value,Xt),li!==null&&(lt=C(li,lt,ze),Re===null?Ee=li:Re.sibling=li,Re=li);return xi&&Fo(vt,ze),Ee}for(Oe=m(vt,Oe);!li.done;ze++,li=Lt.next())li=ue(Oe,vt,ze,li.value,Xt),li!==null&&(t&&li.alternate!==null&&Oe.delete(li.key===null?ze:li.key),lt=C(li,lt,ze),Re===null?Ee=li:Re.sibling=li,Re=li);return t&&Oe.forEach(function(xg){return r(vt,xg)}),xi&&Fo(vt,ze),Ee}function Hi(vt,lt,Lt,Xt){if(typeof Lt=="object"&&Lt!==null&&Lt.type===Dt&&Lt.key===null&&(Lt=Lt.props.children),typeof Lt=="object"&&Lt!==null){switch(Lt.$$typeof){case Gt:t:{for(var Ee=Lt.key,Re=lt;Re!==null;){if(Re.key===Ee){if(Ee=Lt.type,Ee===Dt){if(Re.tag===7){u(vt,Re.sibling),lt=M(Re,Lt.props.children),lt.return=vt,vt=lt;break t}}else if(Re.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===de&&O(Ee)===Re.type){u(vt,Re.sibling),lt=M(Re,Lt.props),lt.ref=S(vt,Re,Lt),lt.return=vt,vt=lt;break t}u(vt,Re);break}else r(vt,Re);Re=Re.sibling}Lt.type===Dt?(lt=rl(Lt.props.children,vt.mode,Xt,Lt.key),lt.return=vt,vt=lt):(Xt=ih(Lt.type,Lt.key,Lt.props,null,vt.mode,Xt),Xt.ref=S(vt,lt,Lt),Xt.return=vt,vt=Xt)}return N(vt);case zt:t:{for(Re=Lt.key;lt!==null;){if(lt.key===Re)if(lt.tag===4&&lt.stateNode.containerInfo===Lt.containerInfo&&lt.stateNode.implementation===Lt.implementation){u(vt,lt.sibling),lt=M(lt,Lt.children||[]),lt.return=vt,vt=lt;break t}else{u(vt,lt);break}else r(vt,lt);lt=lt.sibling}lt=Mc(Lt,vt.mode,Xt),lt.return=vt,vt=lt}return N(vt);case de:return Re=Lt._init,Hi(vt,lt,Re(Lt._payload),Xt)}if(bi(Lt))return ve(vt,lt,Lt,Xt);if(Qt(Lt))return xe(vt,lt,Lt,Xt);T(vt,Lt)}return typeof Lt=="string"&&Lt!==""||typeof Lt=="number"?(Lt=""+Lt,lt!==null&&lt.tag===6?(u(vt,lt.sibling),lt=M(lt,Lt),lt.return=vt,vt=lt):(u(vt,lt),lt=wc(Lt,vt.mode,Xt),lt.return=vt,vt=lt),N(vt)):u(vt,lt)}return Hi}var $=X(!0),_t=X(!1),Et=Gs(null),Ut=null,te=null,le=null;function Ke(){le=te=Ut=null}function K(t){var r=Et.current;_i(Et),t._currentValue=r}function tt(t,r,u){for(;t!==null;){var m=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,m!==null&&(m.childLanes|=r)):m!==null&&(m.childLanes&r)!==r&&(m.childLanes|=r),t===u)break;t=t.return}}function at(t,r){Ut=t,le=te=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&r)!==0&&(xr=!0),t.firstContext=null)}function xt(t){var r=t._currentValue;if(le!==t)if(t={context:t,memoizedValue:r,next:null},te===null){if(Ut===null)throw Error(o(308));te=t,Ut.dependencies={lanes:0,firstContext:t}}else te=te.next=t;return r}var ht=null;function wt(t){ht===null?ht=[t]:ht.push(t)}function I(t,r,u,m){var M=r.interleaved;return M===null?(u.next=u,wt(r)):(u.next=M.next,M.next=u),r.interleaved=u,G(t,m)}function G(t,r){t.lanes|=r;var u=t.alternate;for(u!==null&&(u.lanes|=r),u=t,t=t.return;t!==null;)t.childLanes|=r,u=t.alternate,u!==null&&(u.childLanes|=r),u=t,t=t.return;return u.tag===3?u.stateNode:null}var j=!1;function z(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function H(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function U(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function et(t,r,u){var m=t.updateQueue;if(m===null)return null;if(m=m.shared,(ri&2)!==0){var M=m.pending;return M===null?r.next=r:(r.next=M.next,M.next=r),m.pending=r,G(t,u)}return M=m.interleaved,M===null?(r.next=r,wt(m)):(r.next=M.next,M.next=r),m.interleaved=r,G(t,u)}function it(t,r,u){if(r=r.updateQueue,r!==null&&(r=r.shared,(u&4194240)!==0)){var m=r.lanes;m&=t.pendingLanes,u|=m,r.lanes=u,ye(t,u)}}function ot(t,r){var u=t.updateQueue,m=t.alternate;if(m!==null&&(m=m.updateQueue,u===m)){var M=null,C=null;if(u=u.firstBaseUpdate,u!==null){do{var N={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};C===null?M=C=N:C=C.next=N,u=u.next}while(u!==null);C===null?M=C=r:C=C.next=r}else M=C=r;u={baseState:m.baseState,firstBaseUpdate:M,lastBaseUpdate:C,shared:m.shared,effects:m.effects},t.updateQueue=u;return}t=u.lastBaseUpdate,t===null?u.firstBaseUpdate=r:t.next=r,u.lastBaseUpdate=r}function pt(t,r,u,m){var M=t.updateQueue;j=!1;var C=M.firstBaseUpdate,N=M.lastBaseUpdate,Y=M.shared.pending;if(Y!==null){M.shared.pending=null;var nt=Y,kt=nt.next;nt.next=null,N===null?C=kt:N.next=kt,N=nt;var $t=t.alternate;$t!==null&&($t=$t.updateQueue,Y=$t.lastBaseUpdate,Y!==N&&(Y===null?$t.firstBaseUpdate=kt:Y.next=kt,$t.lastBaseUpdate=nt))}if(C!==null){var qt=M.baseState;N=0,$t=kt=nt=null,Y=C;do{var Vt=Y.lane,ue=Y.eventTime;if((m&Vt)===Vt){$t!==null&&($t=$t.next={eventTime:ue,lane:0,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null});t:{var ve=t,xe=Y;switch(Vt=r,ue=u,xe.tag){case 1:if(ve=xe.payload,typeof ve=="function"){qt=ve.call(ue,qt,Vt);break t}qt=ve;break t;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=xe.payload,Vt=typeof ve=="function"?ve.call(ue,qt,Vt):ve,Vt==null)break t;qt=Rt({},qt,Vt);break t;case 2:j=!0}}Y.callback!==null&&Y.lane!==0&&(t.flags|=64,Vt=M.effects,Vt===null?M.effects=[Y]:Vt.push(Y))}else ue={eventTime:ue,lane:Vt,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null},$t===null?(kt=$t=ue,nt=qt):$t=$t.next=ue,N|=Vt;if(Y=Y.next,Y===null){if(Y=M.shared.pending,Y===null)break;Vt=Y,Y=Vt.next,Vt.next=null,M.lastBaseUpdate=Vt,M.shared.pending=null}}while(!0);if($t===null&&(nt=qt),M.baseState=nt,M.firstBaseUpdate=kt,M.lastBaseUpdate=$t,r=M.shared.interleaved,r!==null){M=r;do N|=M.lane,M=M.next;while(M!==r)}else C===null&&(M.shared.lanes=0);tl|=N,t.lanes=N,t.memoizedState=qt}}function mt(t,r,u){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var m=t[r],M=m.callback;if(M!==null){if(m.callback=null,m=u,typeof M!="function")throw Error(o(191,M));M.call(m)}}}var Nt={},ne=Gs(Nt),he=Gs(Nt),Me=Gs(Nt);function Xe(t){if(t===Nt)throw Error(o(174));return t}function ai(t,r){switch(di(Me,r),di(he,t),di(ne,Nt),t=r.nodeType,t){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:ws(null,"");break;default:t=t===8?r.parentNode:r,r=t.namespaceURI||null,t=t.tagName,r=ws(r,t)}_i(ne),di(ne,r)}function Ze(){_i(ne),_i(he),_i(Me)}function ui(t){Xe(Me.current);var r=Xe(ne.current),u=ws(r,t.type);r!==u&&(di(he,t),di(ne,u))}function Yi(t){he.current===t&&(_i(ne),_i(he))}var pi=Gs(0);function _a(t){for(var r=t;r!==null;){if(r.tag===13){var u=r.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Qa=[];function vr(){for(var t=0;t<Qa.length;t++)Qa[t]._workInProgressVersionPrimary=null;Qa.length=0}var co=Tt.ReactCurrentDispatcher,Dn=Tt.ReactCurrentBatchConfig,Li=0,je=null,cn=null,_n=null,Gu=!1,tu=!1,eu=0,Up=0;function Nn(){throw Error(o(321))}function Uh(t,r){if(r===null)return!1;for(var u=0;u<r.length&&u<t.length;u++)if(!On(t[u],r[u]))return!1;return!0}function Hh(t,r,u,m,M,C){if(Li=C,je=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,co.current=t===null||t.memoizedState===null?$p:Zp,t=u(m,M),tu){C=0;do{if(tu=!1,eu=0,25<=C)throw Error(o(301));C+=1,_n=cn=null,r.updateQueue=null,co.current=qp,t=u(m,M)}while(tu)}if(co.current=Uu,r=cn!==null&&cn.next!==null,Li=0,_n=cn=je=null,Gu=!1,r)throw Error(o(300));return t}function Vh(){var t=eu!==0;return eu=0,t}function fo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _n===null?je.memoizedState=_n=t:_n=_n.next=t,_n}function cs(){if(cn===null){var t=je.alternate;t=t!==null?t.memoizedState:null}else t=cn.next;var r=_n===null?je.memoizedState:_n.next;if(r!==null)_n=r,cn=t;else{if(t===null)throw Error(o(310));cn=t,t={memoizedState:cn.memoizedState,baseState:cn.baseState,baseQueue:cn.baseQueue,queue:cn.queue,next:null},_n===null?je.memoizedState=_n=t:_n=_n.next=t}return _n}function iu(t,r){return typeof r=="function"?r(t):r}function Wh(t){var r=cs(),u=r.queue;if(u===null)throw Error(o(311));u.lastRenderedReducer=t;var m=cn,M=m.baseQueue,C=u.pending;if(C!==null){if(M!==null){var N=M.next;M.next=C.next,C.next=N}m.baseQueue=M=C,u.pending=null}if(M!==null){C=M.next,m=m.baseState;var Y=N=null,nt=null,kt=C;do{var $t=kt.lane;if((Li&$t)===$t)nt!==null&&(nt=nt.next={lane:0,action:kt.action,hasEagerState:kt.hasEagerState,eagerState:kt.eagerState,next:null}),m=kt.hasEagerState?kt.eagerState:t(m,kt.action);else{var qt={lane:$t,action:kt.action,hasEagerState:kt.hasEagerState,eagerState:kt.eagerState,next:null};nt===null?(Y=nt=qt,N=m):nt=nt.next=qt,je.lanes|=$t,tl|=$t}kt=kt.next}while(kt!==null&&kt!==C);nt===null?N=m:nt.next=Y,On(m,r.memoizedState)||(xr=!0),r.memoizedState=m,r.baseState=N,r.baseQueue=nt,u.lastRenderedState=m}if(t=u.interleaved,t!==null){M=t;do C=M.lane,je.lanes|=C,tl|=C,M=M.next;while(M!==t)}else M===null&&(u.lanes=0);return[r.memoizedState,u.dispatch]}function $h(t){var r=cs(),u=r.queue;if(u===null)throw Error(o(311));u.lastRenderedReducer=t;var m=u.dispatch,M=u.pending,C=r.memoizedState;if(M!==null){u.pending=null;var N=M=M.next;do C=t(C,N.action),N=N.next;while(N!==M);On(C,r.memoizedState)||(xr=!0),r.memoizedState=C,r.baseQueue===null&&(r.baseState=C),u.lastRenderedState=C}return[C,m]}function Cf(){}function bf(t,r){var u=je,m=cs(),M=r(),C=!On(m.memoizedState,M);if(C&&(m.memoizedState=M,xr=!0),m=m.queue,Zh(Pf.bind(null,u,m,t),[t]),m.getSnapshot!==r||C||_n!==null&&_n.memoizedState.tag&1){if(u.flags|=2048,nu(9,kf.bind(null,u,m,M,r),void 0,null),yn===null)throw Error(o(349));(Li&30)!==0||Sf(u,r,M)}return M}function Sf(t,r,u){t.flags|=16384,t={getSnapshot:r,value:u},r=je.updateQueue,r===null?(r={lastEffect:null,stores:null},je.updateQueue=r,r.stores=[t]):(u=r.stores,u===null?r.stores=[t]:u.push(t))}function kf(t,r,u,m){r.value=u,r.getSnapshot=m,Af(r)&&Bf(t)}function Pf(t,r,u){return u(function(){Af(r)&&Bf(t)})}function Af(t){var r=t.getSnapshot;t=t.value;try{var u=r();return!On(t,u)}catch{return!0}}function Bf(t){var r=G(t,1);r!==null&&Ws(r,t,1,-1)}function Tf(t){var r=fo();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:iu,lastRenderedState:t},r.queue=t,t=t.dispatch=Wp.bind(null,je,t),[r.memoizedState,t]}function nu(t,r,u,m){return t={tag:t,create:r,destroy:u,deps:m,next:null},r=je.updateQueue,r===null?(r={lastEffect:null,stores:null},je.updateQueue=r,r.lastEffect=t.next=t):(u=r.lastEffect,u===null?r.lastEffect=t.next=t:(m=u.next,u.next=t,t.next=m,r.lastEffect=t)),t}function If(){return cs().memoizedState}function zu(t,r,u,m){var M=fo();je.flags|=t,M.memoizedState=nu(1|r,u,void 0,m===void 0?null:m)}function ju(t,r,u,m){var M=cs();m=m===void 0?null:m;var C=void 0;if(cn!==null){var N=cn.memoizedState;if(C=N.destroy,m!==null&&Uh(m,N.deps)){M.memoizedState=nu(r,u,C,m);return}}je.flags|=t,M.memoizedState=nu(1|r,u,C,m)}function Rf(t,r){return zu(8390656,8,t,r)}function Zh(t,r){return ju(2048,8,t,r)}function Of(t,r){return ju(4,2,t,r)}function Df(t,r){return ju(4,4,t,r)}function Nf(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Ff(t,r,u){return u=u!=null?u.concat([t]):null,ju(4,4,Nf.bind(null,r,t),u)}function qh(){}function Gf(t,r){var u=cs();r=r===void 0?null:r;var m=u.memoizedState;return m!==null&&r!==null&&Uh(r,m[1])?m[0]:(u.memoizedState=[t,r],t)}function zf(t,r){var u=cs();r=r===void 0?null:r;var m=u.memoizedState;return m!==null&&r!==null&&Uh(r,m[1])?m[0]:(t=t(),u.memoizedState=[t,r],t)}function jf(t,r,u){return(Li&21)===0?(t.baseState&&(t.baseState=!1,xr=!0),t.memoizedState=u):(On(u,r)||(u=Yt(),je.lanes|=u,tl|=u,t.baseState=!0),r)}function Hp(t,r){var u=ie;ie=u!==0&&4>u?u:4,t(!0);var m=Dn.transition;Dn.transition={};try{t(!1),r()}finally{ie=u,Dn.transition=m}}function Uf(){return cs().memoizedState}function Vp(t,r,u){var m=wa(t);if(u={lane:m,action:u,hasEagerState:!1,eagerState:null,next:null},Hf(t))Vf(r,u);else if(u=I(t,r,u,m),u!==null){var M=Qn();Ws(u,t,m,M),Wf(u,r,m)}}function Wp(t,r,u){var m=wa(t),M={lane:m,action:u,hasEagerState:!1,eagerState:null,next:null};if(Hf(t))Vf(r,M);else{var C=t.alternate;if(t.lanes===0&&(C===null||C.lanes===0)&&(C=r.lastRenderedReducer,C!==null))try{var N=r.lastRenderedState,Y=C(N,u);if(M.hasEagerState=!0,M.eagerState=Y,On(Y,N)){var nt=r.interleaved;nt===null?(M.next=M,wt(r)):(M.next=nt.next,nt.next=M),r.interleaved=M;return}}catch{}finally{}u=I(t,r,M,m),u!==null&&(M=Qn(),Ws(u,t,m,M),Wf(u,r,m))}}function Hf(t){var r=t.alternate;return t===je||r!==null&&r===je}function Vf(t,r){tu=Gu=!0;var u=t.pending;u===null?r.next=r:(r.next=u.next,u.next=r),t.pending=r}function Wf(t,r,u){if((u&4194240)!==0){var m=r.lanes;m&=t.pendingLanes,u|=m,r.lanes=u,ye(t,u)}}var Uu={readContext:xt,useCallback:Nn,useContext:Nn,useEffect:Nn,useImperativeHandle:Nn,useInsertionEffect:Nn,useLayoutEffect:Nn,useMemo:Nn,useReducer:Nn,useRef:Nn,useState:Nn,useDebugValue:Nn,useDeferredValue:Nn,useTransition:Nn,useMutableSource:Nn,useSyncExternalStore:Nn,useId:Nn,unstable_isNewReconciler:!1},$p={readContext:xt,useCallback:function(t,r){return fo().memoizedState=[t,r===void 0?null:r],t},useContext:xt,useEffect:Rf,useImperativeHandle:function(t,r,u){return u=u!=null?u.concat([t]):null,zu(4194308,4,Nf.bind(null,r,t),u)},useLayoutEffect:function(t,r){return zu(4194308,4,t,r)},useInsertionEffect:function(t,r){return zu(4,2,t,r)},useMemo:function(t,r){var u=fo();return r=r===void 0?null:r,t=t(),u.memoizedState=[t,r],t},useReducer:function(t,r,u){var m=fo();return r=u!==void 0?u(r):r,m.memoizedState=m.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},m.queue=t,t=t.dispatch=Vp.bind(null,je,t),[m.memoizedState,t]},useRef:function(t){var r=fo();return t={current:t},r.memoizedState=t},useState:Tf,useDebugValue:qh,useDeferredValue:function(t){return fo().memoizedState=t},useTransition:function(){var t=Tf(!1),r=t[0];return t=Hp.bind(null,t[1]),fo().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,u){var m=je,M=fo();if(xi){if(u===void 0)throw Error(o(407));u=u()}else{if(u=r(),yn===null)throw Error(o(349));(Li&30)!==0||Sf(m,r,u)}M.memoizedState=u;var C={value:u,getSnapshot:r};return M.queue=C,Rf(Pf.bind(null,m,C,t),[t]),m.flags|=2048,nu(9,kf.bind(null,m,C,u,r),void 0,null),u},useId:function(){var t=fo(),r=yn.identifierPrefix;if(xi){var u=js,m=zs;u=(m&~(1<<32-Ne(m)-1)).toString(32)+u,r=":"+r+"R"+u,u=eu++,0<u&&(r+="H"+u.toString(32)),r+=":"}else u=Up++,r=":"+r+"r"+u.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},Zp={readContext:xt,useCallback:Gf,useContext:xt,useEffect:Zh,useImperativeHandle:Ff,useInsertionEffect:Of,useLayoutEffect:Df,useMemo:zf,useReducer:Wh,useRef:If,useState:function(){return Wh(iu)},useDebugValue:qh,useDeferredValue:function(t){var r=cs();return jf(r,cn.memoizedState,t)},useTransition:function(){var t=Wh(iu)[0],r=cs().memoizedState;return[t,r]},useMutableSource:Cf,useSyncExternalStore:bf,useId:Uf,unstable_isNewReconciler:!1},qp={readContext:xt,useCallback:Gf,useContext:xt,useEffect:Zh,useImperativeHandle:Ff,useInsertionEffect:Of,useLayoutEffect:Df,useMemo:zf,useReducer:$h,useRef:If,useState:function(){return $h(iu)},useDebugValue:qh,useDeferredValue:function(t){var r=cs();return cn===null?r.memoizedState=t:jf(r,cn.memoizedState,t)},useTransition:function(){var t=$h(iu)[0],r=cs().memoizedState;return[t,r]},useMutableSource:Cf,useSyncExternalStore:bf,useId:Uf,unstable_isNewReconciler:!1};function Us(t,r){if(t&&t.defaultProps){r=Rt({},r),t=t.defaultProps;for(var u in t)r[u]===void 0&&(r[u]=t[u]);return r}return r}function Kh(t,r,u,m){r=t.memoizedState,u=u(m,r),u=u==null?r:Rt({},r,u),t.memoizedState=u,t.lanes===0&&(t.updateQueue.baseState=u)}var Hu={isMounted:function(t){return(t=t._reactInternals)?nr(t)===t:!1},enqueueSetState:function(t,r,u){t=t._reactInternals;var m=Qn(),M=wa(t),C=U(m,M);C.payload=r,u!=null&&(C.callback=u),r=et(t,C,M),r!==null&&(Ws(r,t,M,m),it(r,t,M))},enqueueReplaceState:function(t,r,u){t=t._reactInternals;var m=Qn(),M=wa(t),C=U(m,M);C.tag=1,C.payload=r,u!=null&&(C.callback=u),r=et(t,C,M),r!==null&&(Ws(r,t,M,m),it(r,t,M))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var u=Qn(),m=wa(t),M=U(u,m);M.tag=2,r!=null&&(M.callback=r),r=et(t,M,m),r!==null&&(Ws(r,t,m,u),it(r,t,m))}};function $f(t,r,u,m,M,C,N){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(m,C,N):r.prototype&&r.prototype.isPureReactComponent?!hr(u,m)||!hr(M,C):!0}function Zf(t,r,u){var m=!1,M=uo,C=r.contextType;return typeof C=="object"&&C!==null?C=xt(C):(M=un(r)?Do:Ai.current,m=r.contextTypes,C=(m=m!=null)?pa(t,M):uo),r=new r(u,C),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Hu,t.stateNode=r,r._reactInternals=t,m&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=M,t.__reactInternalMemoizedMaskedChildContext=C),r}function qf(t,r,u,m){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(u,m),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(u,m),r.state!==t&&Hu.enqueueReplaceState(r,r.state,null)}function Jh(t,r,u,m){var M=t.stateNode;M.props=u,M.state=t.memoizedState,M.refs={},z(t);var C=r.contextType;typeof C=="object"&&C!==null?M.context=xt(C):(C=un(r)?Do:Ai.current,M.context=pa(t,C)),M.state=t.memoizedState,C=r.getDerivedStateFromProps,typeof C=="function"&&(Kh(t,r,C,u),M.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof M.getSnapshotBeforeUpdate=="function"||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(r=M.state,typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount(),r!==M.state&&Hu.enqueueReplaceState(M,M.state,null),pt(t,u,M,m),M.state=t.memoizedState),typeof M.componentDidMount=="function"&&(t.flags|=4194308)}function Ll(t,r){try{var u="",m=r;do u+=ge(m),m=m.return;while(m);var M=u}catch(C){M=`
Error generating stack: `+C.message+`
`+C.stack}return{value:t,source:r,stack:M,digest:null}}function Xh(t,r,u){return{value:t,source:null,stack:u??null,digest:r??null}}function Yh(t,r){try{console.error(r.value)}catch(u){setTimeout(function(){throw u})}}var Kp=typeof WeakMap=="function"?WeakMap:Map;function Kf(t,r,u){u=U(-1,u),u.tag=3,u.payload={element:null};var m=r.value;return u.callback=function(){Ju||(Ju=!0,dc=m),Yh(t,r)},u}function Jf(t,r,u){u=U(-1,u),u.tag=3;var m=t.type.getDerivedStateFromError;if(typeof m=="function"){var M=r.value;u.payload=function(){return m(M)},u.callback=function(){Yh(t,r)}}var C=t.stateNode;return C!==null&&typeof C.componentDidCatch=="function"&&(u.callback=function(){Yh(t,r),typeof m!="function"&&(va===null?va=new Set([this]):va.add(this));var N=r.stack;this.componentDidCatch(r.value,{componentStack:N!==null?N:""})}),u}function Xf(t,r,u){var m=t.pingCache;if(m===null){m=t.pingCache=new Kp;var M=new Set;m.set(r,M)}else M=m.get(r),M===void 0&&(M=new Set,m.set(r,M));M.has(u)||(M.add(u),t=ug.bind(null,t,r,u),r.then(t,t))}function Yf(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function Qf(t,r,u,m,M){return(t.mode&1)===0?(t===r?t.flags|=65536:(t.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(r=U(-1,1),r.tag=2,et(u,r,1))),u.lanes|=1),t):(t.flags|=65536,t.lanes=M,t)}var Jp=Tt.ReactCurrentOwner,xr=!1;function Yn(t,r,u,m){r.child=t===null?_t(r,null,u,m):$(r,t.child,u,m)}function td(t,r,u,m,M){u=u.render;var C=r.ref;return at(r,M),m=Hh(t,r,u,m,C,M),u=Vh(),t!==null&&!xr?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~M,Go(t,r,M)):(xi&&u&&hs(r),r.flags|=1,Yn(t,r,m,M),r.child)}function ed(t,r,u,m,M){if(t===null){var C=u.type;return typeof C=="function"&&!xc(C)&&C.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(r.tag=15,r.type=C,id(t,r,C,m,M)):(t=ih(u.type,null,m,r,r.mode,M),t.ref=r.ref,t.return=r,r.child=t)}if(C=t.child,(t.lanes&M)===0){var N=C.memoizedProps;if(u=u.compare,u=u!==null?u:hr,u(N,m)&&t.ref===r.ref)return Go(t,r,M)}return r.flags|=1,t=Ea(C,m),t.ref=r.ref,t.return=r,r.child=t}function id(t,r,u,m,M){if(t!==null){var C=t.memoizedProps;if(hr(C,m)&&t.ref===r.ref)if(xr=!1,r.pendingProps=m=C,(t.lanes&M)!==0)(t.flags&131072)!==0&&(xr=!0);else return r.lanes=t.lanes,Go(t,r,M)}return Qh(t,r,u,m,M)}function nd(t,r,u){var m=r.pendingProps,M=m.children,C=t!==null?t.memoizedState:null;if(m.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},di(bl,zr),zr|=u;else{if((u&1073741824)===0)return t=C!==null?C.baseLanes|u:u,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,di(bl,zr),zr|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=C!==null?C.baseLanes:u,di(bl,zr),zr|=m}else C!==null?(m=C.baseLanes|u,r.memoizedState=null):m=u,di(bl,zr),zr|=m;return Yn(t,r,M,u),r.child}function rd(t,r){var u=r.ref;(t===null&&u!==null||t!==null&&t.ref!==u)&&(r.flags|=512,r.flags|=2097152)}function Qh(t,r,u,m,M){var C=un(u)?Do:Ai.current;return C=pa(r,C),at(r,M),u=Hh(t,r,u,m,C,M),m=Vh(),t!==null&&!xr?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~M,Go(t,r,M)):(xi&&m&&hs(r),r.flags|=1,Yn(t,r,u,M),r.child)}function sd(t,r,u,m,M){if(un(u)){var C=!0;vl(r)}else C=!1;if(at(r,M),r.stateNode===null)Wu(t,r),Zf(r,u,m),Jh(r,u,m,M),m=!0;else if(t===null){var N=r.stateNode,Y=r.memoizedProps;N.props=Y;var nt=N.context,kt=u.contextType;typeof kt=="object"&&kt!==null?kt=xt(kt):(kt=un(u)?Do:Ai.current,kt=pa(r,kt));var $t=u.getDerivedStateFromProps,qt=typeof $t=="function"||typeof N.getSnapshotBeforeUpdate=="function";qt||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(Y!==m||nt!==kt)&&qf(r,N,m,kt),j=!1;var Vt=r.memoizedState;N.state=Vt,pt(r,m,N,M),nt=r.memoizedState,Y!==m||Vt!==nt||ln.current||j?(typeof $t=="function"&&(Kh(r,u,$t,m),nt=r.memoizedState),(Y=j||$f(r,u,Y,m,Vt,nt,kt))?(qt||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(r.flags|=4194308)):(typeof N.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=m,r.memoizedState=nt),N.props=m,N.state=nt,N.context=kt,m=Y):(typeof N.componentDidMount=="function"&&(r.flags|=4194308),m=!1)}else{N=r.stateNode,H(t,r),Y=r.memoizedProps,kt=r.type===r.elementType?Y:Us(r.type,Y),N.props=kt,qt=r.pendingProps,Vt=N.context,nt=u.contextType,typeof nt=="object"&&nt!==null?nt=xt(nt):(nt=un(u)?Do:Ai.current,nt=pa(r,nt));var ue=u.getDerivedStateFromProps;($t=typeof ue=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(Y!==qt||Vt!==nt)&&qf(r,N,m,nt),j=!1,Vt=r.memoizedState,N.state=Vt,pt(r,m,N,M);var ve=r.memoizedState;Y!==qt||Vt!==ve||ln.current||j?(typeof ue=="function"&&(Kh(r,u,ue,m),ve=r.memoizedState),(kt=j||$f(r,u,kt,m,Vt,ve,nt)||!1)?($t||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(m,ve,nt),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(m,ve,nt)),typeof N.componentDidUpdate=="function"&&(r.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof N.componentDidUpdate!="function"||Y===t.memoizedProps&&Vt===t.memoizedState||(r.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||Y===t.memoizedProps&&Vt===t.memoizedState||(r.flags|=1024),r.memoizedProps=m,r.memoizedState=ve),N.props=m,N.state=ve,N.context=nt,m=kt):(typeof N.componentDidUpdate!="function"||Y===t.memoizedProps&&Vt===t.memoizedState||(r.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||Y===t.memoizedProps&&Vt===t.memoizedState||(r.flags|=1024),m=!1)}return tc(t,r,u,m,C,M)}function tc(t,r,u,m,M,C){rd(t,r);var N=(r.flags&128)!==0;if(!m&&!N)return M&&Kl(r,u,!1),Go(t,r,C);m=r.stateNode,Jp.current=r;var Y=N&&typeof u.getDerivedStateFromError!="function"?null:m.render();return r.flags|=1,t!==null&&N?(r.child=$(r,t.child,null,C),r.child=$(r,null,Y,C)):Yn(t,r,Y,C),r.memoizedState=m.state,M&&Kl(r,u,!0),r.child}function od(t){var r=t.stateNode;r.pendingContext?ql(t,r.pendingContext,r.pendingContext!==r.context):r.context&&ql(t,r.context,!1),ai(t,r.containerInfo)}function ad(t,r,u,m,M){return _(),w(M),r.flags|=256,Yn(t,r,u,m),r.child}var ec={dehydrated:null,treeContext:null,retryLane:0};function ic(t){return{baseLanes:t,cachePool:null,transitions:null}}function ld(t,r,u){var m=r.pendingProps,M=pi.current,C=!1,N=(r.flags&128)!==0,Y;if((Y=N)||(Y=t!==null&&t.memoizedState===null?!1:(M&2)!==0),Y?(C=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(M|=1),di(pi,M&1),t===null)return s(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((r.mode&1)===0?r.lanes=1:t.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(N=m.children,t=m.fallback,C?(m=r.mode,C=r.child,N={mode:"hidden",children:N},(m&1)===0&&C!==null?(C.childLanes=0,C.pendingProps=N):C=nh(N,m,0,null),t=rl(t,m,u,null),C.return=r,t.return=r,C.sibling=t,r.child=C,r.child.memoizedState=ic(u),r.memoizedState=ec,t):nc(r,N));if(M=t.memoizedState,M!==null&&(Y=M.dehydrated,Y!==null))return Xp(t,r,N,m,Y,M,u);if(C){C=m.fallback,N=r.mode,M=t.child,Y=M.sibling;var nt={mode:"hidden",children:m.children};return(N&1)===0&&r.child!==M?(m=r.child,m.childLanes=0,m.pendingProps=nt,r.deletions=null):(m=Ea(M,nt),m.subtreeFlags=M.subtreeFlags&14680064),Y!==null?C=Ea(Y,C):(C=rl(C,N,u,null),C.flags|=2),C.return=r,m.return=r,m.sibling=C,r.child=m,m=C,C=r.child,N=t.child.memoizedState,N=N===null?ic(u):{baseLanes:N.baseLanes|u,cachePool:null,transitions:N.transitions},C.memoizedState=N,C.childLanes=t.childLanes&~u,r.memoizedState=ec,m}return C=t.child,t=C.sibling,m=Ea(C,{mode:"visible",children:m.children}),(r.mode&1)===0&&(m.lanes=u),m.return=r,m.sibling=null,t!==null&&(u=r.deletions,u===null?(r.deletions=[t],r.flags|=16):u.push(t)),r.child=m,r.memoizedState=null,m}function nc(t,r){return r=nh({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function Vu(t,r,u,m){return m!==null&&w(m),$(r,t.child,null,u),t=nc(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Xp(t,r,u,m,M,C,N){if(u)return r.flags&256?(r.flags&=-257,m=Xh(Error(o(422))),Vu(t,r,N,m)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(C=m.fallback,M=r.mode,m=nh({mode:"visible",children:m.children},M,0,null),C=rl(C,M,N,null),C.flags|=2,m.return=r,C.return=r,m.sibling=C,r.child=m,(r.mode&1)!==0&&$(r,t.child,null,N),r.child.memoizedState=ic(N),r.memoizedState=ec,C);if((r.mode&1)===0)return Vu(t,r,N,null);if(M.data==="$!"){if(m=M.nextSibling&&M.nextSibling.dataset,m)var Y=m.dgst;return m=Y,C=Error(o(419)),m=Xh(C,m,void 0),Vu(t,r,N,m)}if(Y=(N&t.childLanes)!==0,xr||Y){if(m=yn,m!==null){switch(N&-N){case 4:M=2;break;case 16:M=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:M=32;break;case 536870912:M=268435456;break;default:M=0}M=(M&(m.suspendedLanes|N))!==0?0:M,M!==0&&M!==C.retryLane&&(C.retryLane=M,G(t,M),Ws(m,t,M,-1))}return vc(),m=Xh(Error(o(421))),Vu(t,r,N,m)}return M.data==="$?"?(r.flags|=128,r.child=t.child,r=hg.bind(null,t),M._reactRetry=r,null):(t=C.treeContext,kn=Kn(M.nextSibling),Xn=r,xi=!0,Gr=null,t!==null&&(Jn[hn++]=zs,Jn[hn++]=js,Jn[hn++]=us,zs=t.id,js=t.overflow,us=r),r=nc(r,m.children),r.flags|=4096,r)}function ud(t,r,u){t.lanes|=r;var m=t.alternate;m!==null&&(m.lanes|=r),tt(t.return,r,u)}function rc(t,r,u,m,M){var C=t.memoizedState;C===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:m,tail:u,tailMode:M}:(C.isBackwards=r,C.rendering=null,C.renderingStartTime=0,C.last=m,C.tail=u,C.tailMode=M)}function hd(t,r,u){var m=r.pendingProps,M=m.revealOrder,C=m.tail;if(Yn(t,r,m.children,u),m=pi.current,(m&2)!==0)m=m&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)t:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ud(t,u,r);else if(t.tag===19)ud(t,u,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break t;for(;t.sibling===null;){if(t.return===null||t.return===r)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}m&=1}if(di(pi,m),(r.mode&1)===0)r.memoizedState=null;else switch(M){case"forwards":for(u=r.child,M=null;u!==null;)t=u.alternate,t!==null&&_a(t)===null&&(M=u),u=u.sibling;u=M,u===null?(M=r.child,r.child=null):(M=u.sibling,u.sibling=null),rc(r,!1,M,u,C);break;case"backwards":for(u=null,M=r.child,r.child=null;M!==null;){if(t=M.alternate,t!==null&&_a(t)===null){r.child=M;break}t=M.sibling,M.sibling=u,u=M,M=t}rc(r,!0,u,null,C);break;case"together":rc(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Wu(t,r){(r.mode&1)===0&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function Go(t,r,u){if(t!==null&&(r.dependencies=t.dependencies),tl|=r.lanes,(u&r.childLanes)===0)return null;if(t!==null&&r.child!==t.child)throw Error(o(153));if(r.child!==null){for(t=r.child,u=Ea(t,t.pendingProps),r.child=u,u.return=r;t.sibling!==null;)t=t.sibling,u=u.sibling=Ea(t,t.pendingProps),u.return=r;u.sibling=null}return r.child}function Yp(t,r,u){switch(r.tag){case 3:od(r),_();break;case 5:ui(r);break;case 1:un(r.type)&&vl(r);break;case 4:ai(r,r.stateNode.containerInfo);break;case 10:var m=r.type._context,M=r.memoizedProps.value;di(Et,m._currentValue),m._currentValue=M;break;case 13:if(m=r.memoizedState,m!==null)return m.dehydrated!==null?(di(pi,pi.current&1),r.flags|=128,null):(u&r.child.childLanes)!==0?ld(t,r,u):(di(pi,pi.current&1),t=Go(t,r,u),t!==null?t.sibling:null);di(pi,pi.current&1);break;case 19:if(m=(u&r.childLanes)!==0,(t.flags&128)!==0){if(m)return hd(t,r,u);r.flags|=128}if(M=r.memoizedState,M!==null&&(M.rendering=null,M.tail=null,M.lastEffect=null),di(pi,pi.current),m)break;return null;case 22:case 23:return r.lanes=0,nd(t,r,u)}return Go(t,r,u)}var cd,sc,fd,dd;cd=function(t,r){for(var u=r.child;u!==null;){if(u.tag===5||u.tag===6)t.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===r)break;for(;u.sibling===null;){if(u.return===null||u.return===r)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},sc=function(){},fd=function(t,r,u,m){var M=t.memoizedProps;if(M!==m){t=r.stateNode,Xe(ne.current);var C=null;switch(u){case"input":M=Je(t,M),m=Je(t,m),C=[];break;case"select":M=Rt({},M,{value:void 0}),m=Rt({},m,{value:void 0}),C=[];break;case"textarea":M=$i(t,M),m=$i(t,m),C=[];break;default:typeof M.onClick!="function"&&typeof m.onClick=="function"&&(t.onclick=Ft)}Vr(u,m);var N;u=null;for(kt in M)if(!m.hasOwnProperty(kt)&&M.hasOwnProperty(kt)&&M[kt]!=null)if(kt==="style"){var Y=M[kt];for(N in Y)Y.hasOwnProperty(N)&&(u||(u={}),u[N]="")}else kt!=="dangerouslySetInnerHTML"&&kt!=="children"&&kt!=="suppressContentEditableWarning"&&kt!=="suppressHydrationWarning"&&kt!=="autoFocus"&&(f.hasOwnProperty(kt)?C||(C=[]):(C=C||[]).push(kt,null));for(kt in m){var nt=m[kt];if(Y=M!=null?M[kt]:void 0,m.hasOwnProperty(kt)&&nt!==Y&&(nt!=null||Y!=null))if(kt==="style")if(Y){for(N in Y)!Y.hasOwnProperty(N)||nt&&nt.hasOwnProperty(N)||(u||(u={}),u[N]="");for(N in nt)nt.hasOwnProperty(N)&&Y[N]!==nt[N]&&(u||(u={}),u[N]=nt[N])}else u||(C||(C=[]),C.push(kt,u)),u=nt;else kt==="dangerouslySetInnerHTML"?(nt=nt?nt.__html:void 0,Y=Y?Y.__html:void 0,nt!=null&&Y!==nt&&(C=C||[]).push(kt,nt)):kt==="children"?typeof nt!="string"&&typeof nt!="number"||(C=C||[]).push(kt,""+nt):kt!=="suppressContentEditableWarning"&&kt!=="suppressHydrationWarning"&&(f.hasOwnProperty(kt)?(nt!=null&&kt==="onScroll"&&Ge("scroll",t),C||Y===nt||(C=[])):(C=C||[]).push(kt,nt))}u&&(C=C||[]).push("style",u);var kt=C;(r.updateQueue=kt)&&(r.flags|=4)}},dd=function(t,r,u,m){u!==m&&(r.flags|=4)};function ru(t,r){if(!xi)switch(t.tailMode){case"hidden":r=t.tail;for(var u=null;r!==null;)r.alternate!==null&&(u=r),r=r.sibling;u===null?t.tail=null:u.sibling=null;break;case"collapsed":u=t.tail;for(var m=null;u!==null;)u.alternate!==null&&(m=u),u=u.sibling;m===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:m.sibling=null}}function Fn(t){var r=t.alternate!==null&&t.alternate.child===t.child,u=0,m=0;if(r)for(var M=t.child;M!==null;)u|=M.lanes|M.childLanes,m|=M.subtreeFlags&14680064,m|=M.flags&14680064,M.return=t,M=M.sibling;else for(M=t.child;M!==null;)u|=M.lanes|M.childLanes,m|=M.subtreeFlags,m|=M.flags,M.return=t,M=M.sibling;return t.subtreeFlags|=m,t.childLanes=u,r}function Qp(t,r,u){var m=r.pendingProps;switch(Yl(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fn(r),null;case 1:return un(r.type)&&No(),Fn(r),null;case 3:return m=r.stateNode,Ze(),_i(ln),_i(Ai),vr(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(t===null||t.child===null)&&(h(r)?r.flags|=4:t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Gr!==null&&(mc(Gr),Gr=null))),sc(t,r),Fn(r),null;case 5:Yi(r);var M=Xe(Me.current);if(u=r.type,t!==null&&r.stateNode!=null)fd(t,r,u,m,M),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!m){if(r.stateNode===null)throw Error(o(166));return Fn(r),null}if(t=Xe(ne.current),h(r)){m=r.stateNode,u=r.type;var C=r.memoizedProps;switch(m[mr]=r,m[lo]=C,t=(r.mode&1)!==0,u){case"dialog":Ge("cancel",m),Ge("close",m);break;case"iframe":case"object":case"embed":Ge("load",m);break;case"video":case"audio":for(M=0;M<Ie.length;M++)Ge(Ie[M],m);break;case"source":Ge("error",m);break;case"img":case"image":case"link":Ge("error",m),Ge("load",m);break;case"details":Ge("toggle",m);break;case"input":_o(m,C),Ge("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!C.multiple},Ge("invalid",m);break;case"textarea":yo(m,C),Ge("invalid",m)}Vr(u,C),M=null;for(var N in C)if(C.hasOwnProperty(N)){var Y=C[N];N==="children"?typeof Y=="string"?m.textContent!==Y&&(C.suppressHydrationWarning!==!0&&bt(m.textContent,Y,t),M=["children",Y]):typeof Y=="number"&&m.textContent!==""+Y&&(C.suppressHydrationWarning!==!0&&bt(m.textContent,Y,t),M=["children",""+Y]):f.hasOwnProperty(N)&&Y!=null&&N==="onScroll"&&Ge("scroll",m)}switch(u){case"input":en(m),Ei(m,C,!0);break;case"textarea":en(m),xs(m);break;case"select":case"option":break;default:typeof C.onClick=="function"&&(m.onclick=Ft)}m=M,r.updateQueue=m,m!==null&&(r.flags|=4)}else{N=M.nodeType===9?M:M.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ii(u)),t==="http://www.w3.org/1999/xhtml"?u==="script"?(t=N.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof m.is=="string"?t=N.createElement(u,{is:m.is}):(t=N.createElement(u),u==="select"&&(N=t,m.multiple?N.multiple=!0:m.size&&(N.size=m.size))):t=N.createElementNS(t,u),t[mr]=r,t[lo]=m,cd(t,r,!1,!1),r.stateNode=t;t:{switch(N=xn(u,m),u){case"dialog":Ge("cancel",t),Ge("close",t),M=m;break;case"iframe":case"object":case"embed":Ge("load",t),M=m;break;case"video":case"audio":for(M=0;M<Ie.length;M++)Ge(Ie[M],t);M=m;break;case"source":Ge("error",t),M=m;break;case"img":case"image":case"link":Ge("error",t),Ge("load",t),M=m;break;case"details":Ge("toggle",t),M=m;break;case"input":_o(t,m),M=Je(t,m),Ge("invalid",t);break;case"option":M=m;break;case"select":t._wrapperState={wasMultiple:!!m.multiple},M=Rt({},m,{value:void 0}),Ge("invalid",t);break;case"textarea":yo(t,m),M=$i(t,m),Ge("invalid",t);break;default:M=m}Vr(u,M),Y=M;for(C in Y)if(Y.hasOwnProperty(C)){var nt=Y[C];C==="style"?Hr(t,nt):C==="dangerouslySetInnerHTML"?(nt=nt?nt.__html:void 0,nt!=null&&vo(t,nt)):C==="children"?typeof nt=="string"?(u!=="textarea"||nt!=="")&&kr(t,nt):typeof nt=="number"&&kr(t,""+nt):C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&C!=="autoFocus"&&(f.hasOwnProperty(C)?nt!=null&&C==="onScroll"&&Ge("scroll",t):nt!=null&&St(t,C,nt,N))}switch(u){case"input":en(t),Ei(t,m,!1);break;case"textarea":en(t),xs(t);break;case"option":m.value!=null&&t.setAttribute("value",""+Ve(m.value));break;case"select":t.multiple=!!m.multiple,C=m.value,C!=null?ir(t,!!m.multiple,C,!1):m.defaultValue!=null&&ir(t,!!m.multiple,m.defaultValue,!0);break;default:typeof M.onClick=="function"&&(t.onclick=Ft)}switch(u){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break t;case"img":m=!0;break t;default:m=!1}}m&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Fn(r),null;case 6:if(t&&r.stateNode!=null)dd(t,r,t.memoizedProps,m);else{if(typeof m!="string"&&r.stateNode===null)throw Error(o(166));if(u=Xe(Me.current),Xe(ne.current),h(r)){if(m=r.stateNode,u=r.memoizedProps,m[mr]=r,(C=m.nodeValue!==u)&&(t=Xn,t!==null))switch(t.tag){case 3:bt(m.nodeValue,u,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&bt(m.nodeValue,u,(t.mode&1)!==0)}C&&(r.flags|=4)}else m=(u.nodeType===9?u:u.ownerDocument).createTextNode(m),m[mr]=r,r.stateNode=m}return Fn(r),null;case 13:if(_i(pi),m=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(xi&&kn!==null&&(r.mode&1)!==0&&(r.flags&128)===0)d(),_(),r.flags|=98560,C=!1;else if(C=h(r),m!==null&&m.dehydrated!==null){if(t===null){if(!C)throw Error(o(318));if(C=r.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(o(317));C[mr]=r}else _(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Fn(r),C=!1}else Gr!==null&&(mc(Gr),Gr=null),C=!0;if(!C)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=u,r):(m=m!==null,m!==(t!==null&&t.memoizedState!==null)&&m&&(r.child.flags|=8192,(r.mode&1)!==0&&(t===null||(pi.current&1)!==0?fn===0&&(fn=3):vc())),r.updateQueue!==null&&(r.flags|=4),Fn(r),null);case 4:return Ze(),sc(t,r),t===null&&zi(r.stateNode.containerInfo),Fn(r),null;case 10:return K(r.type._context),Fn(r),null;case 17:return un(r.type)&&No(),Fn(r),null;case 19:if(_i(pi),C=r.memoizedState,C===null)return Fn(r),null;if(m=(r.flags&128)!==0,N=C.rendering,N===null)if(m)ru(C,!1);else{if(fn!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(N=_a(t),N!==null){for(r.flags|=128,ru(C,!1),m=N.updateQueue,m!==null&&(r.updateQueue=m,r.flags|=4),r.subtreeFlags=0,m=u,u=r.child;u!==null;)C=u,t=m,C.flags&=14680066,N=C.alternate,N===null?(C.childLanes=0,C.lanes=t,C.child=null,C.subtreeFlags=0,C.memoizedProps=null,C.memoizedState=null,C.updateQueue=null,C.dependencies=null,C.stateNode=null):(C.childLanes=N.childLanes,C.lanes=N.lanes,C.child=N.child,C.subtreeFlags=0,C.deletions=null,C.memoizedProps=N.memoizedProps,C.memoizedState=N.memoizedState,C.updateQueue=N.updateQueue,C.type=N.type,t=N.dependencies,C.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),u=u.sibling;return di(pi,pi.current&1|2),r.child}t=t.sibling}C.tail!==null&&gi()>Sl&&(r.flags|=128,m=!0,ru(C,!1),r.lanes=4194304)}else{if(!m)if(t=_a(N),t!==null){if(r.flags|=128,m=!0,u=t.updateQueue,u!==null&&(r.updateQueue=u,r.flags|=4),ru(C,!0),C.tail===null&&C.tailMode==="hidden"&&!N.alternate&&!xi)return Fn(r),null}else 2*gi()-C.renderingStartTime>Sl&&u!==1073741824&&(r.flags|=128,m=!0,ru(C,!1),r.lanes=4194304);C.isBackwards?(N.sibling=r.child,r.child=N):(u=C.last,u!==null?u.sibling=N:r.child=N,C.last=N)}return C.tail!==null?(r=C.tail,C.rendering=r,C.tail=r.sibling,C.renderingStartTime=gi(),r.sibling=null,u=pi.current,di(pi,m?u&1|2:u&1),r):(Fn(r),null);case 22:case 23:return yc(),m=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==m&&(r.flags|=8192),m&&(r.mode&1)!==0?(zr&1073741824)!==0&&(Fn(r),r.subtreeFlags&6&&(r.flags|=8192)):Fn(r),null;case 24:return null;case 25:return null}throw Error(o(156,r.tag))}function tg(t,r){switch(Yl(r),r.tag){case 1:return un(r.type)&&No(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Ze(),_i(ln),_i(Ai),vr(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 5:return Yi(r),null;case 13:if(_i(pi),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(o(340));_()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return _i(pi),null;case 4:return Ze(),null;case 10:return K(r.type._context),null;case 22:case 23:return yc(),null;case 24:return null;default:return null}}var $u=!1,Gn=!1,eg=typeof WeakSet=="function"?WeakSet:Set,fe=null;function Cl(t,r){var u=t.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(m){Bi(t,r,m)}else u.current=null}function oc(t,r,u){try{u()}catch(m){Bi(t,r,m)}}var pd=!1;function ig(t,r){if(re=Bs,t=Ka(),Ja(t)){if("selectionStart"in t)var u={start:t.selectionStart,end:t.selectionEnd};else t:{u=(u=t.ownerDocument)&&u.defaultView||window;var m=u.getSelection&&u.getSelection();if(m&&m.rangeCount!==0){u=m.anchorNode;var M=m.anchorOffset,C=m.focusNode;m=m.focusOffset;try{u.nodeType,C.nodeType}catch{u=null;break t}var N=0,Y=-1,nt=-1,kt=0,$t=0,qt=t,Vt=null;e:for(;;){for(var ue;qt!==u||M!==0&&qt.nodeType!==3||(Y=N+M),qt!==C||m!==0&&qt.nodeType!==3||(nt=N+m),qt.nodeType===3&&(N+=qt.nodeValue.length),(ue=qt.firstChild)!==null;)Vt=qt,qt=ue;for(;;){if(qt===t)break e;if(Vt===u&&++kt===M&&(Y=N),Vt===C&&++$t===m&&(nt=N),(ue=qt.nextSibling)!==null)break;qt=Vt,Vt=qt.parentNode}qt=ue}u=Y===-1||nt===-1?null:{start:Y,end:nt}}else u=null}u=u||{start:0,end:0}}else u=null;for(Ae={focusedElem:t,selectionRange:u},Bs=!1,fe=r;fe!==null;)if(r=fe,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,fe=t;else for(;fe!==null;){r=fe;try{var ve=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(ve!==null){var xe=ve.memoizedProps,Hi=ve.memoizedState,vt=r.stateNode,lt=vt.getSnapshotBeforeUpdate(r.elementType===r.type?xe:Us(r.type,xe),Hi);vt.__reactInternalSnapshotBeforeUpdate=lt}break;case 3:var Lt=r.stateNode.containerInfo;Lt.nodeType===1?Lt.textContent="":Lt.nodeType===9&&Lt.documentElement&&Lt.removeChild(Lt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(Xt){Bi(r,r.return,Xt)}if(t=r.sibling,t!==null){t.return=r.return,fe=t;break}fe=r.return}return ve=pd,pd=!1,ve}function su(t,r,u){var m=r.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var M=m=m.next;do{if((M.tag&t)===t){var C=M.destroy;M.destroy=void 0,C!==void 0&&oc(r,u,C)}M=M.next}while(M!==m)}}function Zu(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var u=r=r.next;do{if((u.tag&t)===t){var m=u.create;u.destroy=m()}u=u.next}while(u!==r)}}function ac(t){var r=t.ref;if(r!==null){var u=t.stateNode;switch(t.tag){case 5:t=u;break;default:t=u}typeof r=="function"?r(t):r.current=t}}function gd(t){var r=t.alternate;r!==null&&(t.alternate=null,gd(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&(delete r[mr],delete r[lo],delete r[Ns],delete r[Zl],delete r[_r])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function md(t){return t.tag===5||t.tag===3||t.tag===4}function _d(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||md(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function lc(t,r,u){var m=t.tag;if(m===5||m===6)t=t.stateNode,r?u.nodeType===8?u.parentNode.insertBefore(t,r):u.insertBefore(t,r):(u.nodeType===8?(r=u.parentNode,r.insertBefore(t,u)):(r=u,r.appendChild(t)),u=u._reactRootContainer,u!=null||r.onclick!==null||(r.onclick=Ft));else if(m!==4&&(t=t.child,t!==null))for(lc(t,r,u),t=t.sibling;t!==null;)lc(t,r,u),t=t.sibling}function uc(t,r,u){var m=t.tag;if(m===5||m===6)t=t.stateNode,r?u.insertBefore(t,r):u.appendChild(t);else if(m!==4&&(t=t.child,t!==null))for(uc(t,r,u),t=t.sibling;t!==null;)uc(t,r,u),t=t.sibling}var Pn=null,Hs=!1;function ya(t,r,u){for(u=u.child;u!==null;)yd(t,r,u),u=u.sibling}function yd(t,r,u){if(Mn&&typeof Mn.onCommitFiberUnmount=="function")try{Mn.onCommitFiberUnmount(As,u)}catch{}switch(u.tag){case 5:Gn||Cl(u,r);case 6:var m=Pn,M=Hs;Pn=null,ya(t,r,u),Pn=m,Hs=M,Pn!==null&&(Hs?(t=Pn,u=u.stateNode,t.nodeType===8?t.parentNode.removeChild(u):t.removeChild(u)):Pn.removeChild(u.stateNode));break;case 18:Pn!==null&&(Hs?(t=Pn,u=u.stateNode,t.nodeType===8?Oo(t.parentNode,u):t.nodeType===1&&Oo(t,u),Cn(t)):Oo(Pn,u.stateNode));break;case 4:m=Pn,M=Hs,Pn=u.stateNode.containerInfo,Hs=!0,ya(t,r,u),Pn=m,Hs=M;break;case 0:case 11:case 14:case 15:if(!Gn&&(m=u.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){M=m=m.next;do{var C=M,N=C.destroy;C=C.tag,N!==void 0&&((C&2)!==0||(C&4)!==0)&&oc(u,r,N),M=M.next}while(M!==m)}ya(t,r,u);break;case 1:if(!Gn&&(Cl(u,r),m=u.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=u.memoizedProps,m.state=u.memoizedState,m.componentWillUnmount()}catch(Y){Bi(u,r,Y)}ya(t,r,u);break;case 21:ya(t,r,u);break;case 22:u.mode&1?(Gn=(m=Gn)||u.memoizedState!==null,ya(t,r,u),Gn=m):ya(t,r,u);break;default:ya(t,r,u)}}function vd(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var u=t.stateNode;u===null&&(u=t.stateNode=new eg),r.forEach(function(m){var M=cg.bind(null,t,m);u.has(m)||(u.add(m),m.then(M,M))})}}function Vs(t,r){var u=r.deletions;if(u!==null)for(var m=0;m<u.length;m++){var M=u[m];try{var C=t,N=r,Y=N;t:for(;Y!==null;){switch(Y.tag){case 5:Pn=Y.stateNode,Hs=!1;break t;case 3:Pn=Y.stateNode.containerInfo,Hs=!0;break t;case 4:Pn=Y.stateNode.containerInfo,Hs=!0;break t}Y=Y.return}if(Pn===null)throw Error(o(160));yd(C,N,M),Pn=null,Hs=!1;var nt=M.alternate;nt!==null&&(nt.return=null),M.return=null}catch(kt){Bi(M,r,kt)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)xd(r,t),r=r.sibling}function xd(t,r){var u=t.alternate,m=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Vs(r,t),po(t),m&4){try{su(3,t,t.return),Zu(3,t)}catch(xe){Bi(t,t.return,xe)}try{su(5,t,t.return)}catch(xe){Bi(t,t.return,xe)}}break;case 1:Vs(r,t),po(t),m&512&&u!==null&&Cl(u,u.return);break;case 5:if(Vs(r,t),po(t),m&512&&u!==null&&Cl(u,u.return),t.flags&32){var M=t.stateNode;try{kr(M,"")}catch(xe){Bi(t,t.return,xe)}}if(m&4&&(M=t.stateNode,M!=null)){var C=t.memoizedProps,N=u!==null?u.memoizedProps:C,Y=t.type,nt=t.updateQueue;if(t.updateQueue=null,nt!==null)try{Y==="input"&&C.type==="radio"&&C.name!=null&&We(M,C),xn(Y,N);var kt=xn(Y,C);for(N=0;N<nt.length;N+=2){var $t=nt[N],qt=nt[N+1];$t==="style"?Hr(M,qt):$t==="dangerouslySetInnerHTML"?vo(M,qt):$t==="children"?kr(M,qt):St(M,$t,qt,kt)}switch(Y){case"input":jr(M,C);break;case"textarea":si(M,C);break;case"select":var Vt=M._wrapperState.wasMultiple;M._wrapperState.wasMultiple=!!C.multiple;var ue=C.value;ue!=null?ir(M,!!C.multiple,ue,!1):Vt!==!!C.multiple&&(C.defaultValue!=null?ir(M,!!C.multiple,C.defaultValue,!0):ir(M,!!C.multiple,C.multiple?[]:"",!1))}M[lo]=C}catch(xe){Bi(t,t.return,xe)}}break;case 6:if(Vs(r,t),po(t),m&4){if(t.stateNode===null)throw Error(o(162));M=t.stateNode,C=t.memoizedProps;try{M.nodeValue=C}catch(xe){Bi(t,t.return,xe)}}break;case 3:if(Vs(r,t),po(t),m&4&&u!==null&&u.memoizedState.isDehydrated)try{Cn(r.containerInfo)}catch(xe){Bi(t,t.return,xe)}break;case 4:Vs(r,t),po(t);break;case 13:Vs(r,t),po(t),M=t.child,M.flags&8192&&(C=M.memoizedState!==null,M.stateNode.isHidden=C,!C||M.alternate!==null&&M.alternate.memoizedState!==null||(fc=gi())),m&4&&vd(t);break;case 22:if($t=u!==null&&u.memoizedState!==null,t.mode&1?(Gn=(kt=Gn)||$t,Vs(r,t),Gn=kt):Vs(r,t),po(t),m&8192){if(kt=t.memoizedState!==null,(t.stateNode.isHidden=kt)&&!$t&&(t.mode&1)!==0)for(fe=t,$t=t.child;$t!==null;){for(qt=fe=$t;fe!==null;){switch(Vt=fe,ue=Vt.child,Vt.tag){case 0:case 11:case 14:case 15:su(4,Vt,Vt.return);break;case 1:Cl(Vt,Vt.return);var ve=Vt.stateNode;if(typeof ve.componentWillUnmount=="function"){m=Vt,u=Vt.return;try{r=m,ve.props=r.memoizedProps,ve.state=r.memoizedState,ve.componentWillUnmount()}catch(xe){Bi(m,u,xe)}}break;case 5:Cl(Vt,Vt.return);break;case 22:if(Vt.memoizedState!==null){Ed(qt);continue}}ue!==null?(ue.return=Vt,fe=ue):Ed(qt)}$t=$t.sibling}t:for($t=null,qt=t;;){if(qt.tag===5){if($t===null){$t=qt;try{M=qt.stateNode,kt?(C=M.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none"):(Y=qt.stateNode,nt=qt.memoizedProps.style,N=nt!=null&&nt.hasOwnProperty("display")?nt.display:null,Y.style.display=Ur("display",N))}catch(xe){Bi(t,t.return,xe)}}}else if(qt.tag===6){if($t===null)try{qt.stateNode.nodeValue=kt?"":qt.memoizedProps}catch(xe){Bi(t,t.return,xe)}}else if((qt.tag!==22&&qt.tag!==23||qt.memoizedState===null||qt===t)&&qt.child!==null){qt.child.return=qt,qt=qt.child;continue}if(qt===t)break t;for(;qt.sibling===null;){if(qt.return===null||qt.return===t)break t;$t===qt&&($t=null),qt=qt.return}$t===qt&&($t=null),qt.sibling.return=qt.return,qt=qt.sibling}}break;case 19:Vs(r,t),po(t),m&4&&vd(t);break;case 21:break;default:Vs(r,t),po(t)}}function po(t){var r=t.flags;if(r&2){try{t:{for(var u=t.return;u!==null;){if(md(u)){var m=u;break t}u=u.return}throw Error(o(160))}switch(m.tag){case 5:var M=m.stateNode;m.flags&32&&(kr(M,""),m.flags&=-33);var C=_d(t);uc(t,C,M);break;case 3:case 4:var N=m.stateNode.containerInfo,Y=_d(t);lc(t,Y,N);break;default:throw Error(o(161))}}catch(nt){Bi(t,t.return,nt)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function ng(t,r,u){fe=t,wd(t)}function wd(t,r,u){for(var m=(t.mode&1)!==0;fe!==null;){var M=fe,C=M.child;if(M.tag===22&&m){var N=M.memoizedState!==null||$u;if(!N){var Y=M.alternate,nt=Y!==null&&Y.memoizedState!==null||Gn;Y=$u;var kt=Gn;if($u=N,(Gn=nt)&&!kt)for(fe=M;fe!==null;)N=fe,nt=N.child,N.tag===22&&N.memoizedState!==null?Ld(M):nt!==null?(nt.return=N,fe=nt):Ld(M);for(;C!==null;)fe=C,wd(C),C=C.sibling;fe=M,$u=Y,Gn=kt}Md(t)}else(M.subtreeFlags&8772)!==0&&C!==null?(C.return=M,fe=C):Md(t)}}function Md(t){for(;fe!==null;){var r=fe;if((r.flags&8772)!==0){var u=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:Gn||Zu(5,r);break;case 1:var m=r.stateNode;if(r.flags&4&&!Gn)if(u===null)m.componentDidMount();else{var M=r.elementType===r.type?u.memoizedProps:Us(r.type,u.memoizedProps);m.componentDidUpdate(M,u.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var C=r.updateQueue;C!==null&&mt(r,C,m);break;case 3:var N=r.updateQueue;if(N!==null){if(u=null,r.child!==null)switch(r.child.tag){case 5:u=r.child.stateNode;break;case 1:u=r.child.stateNode}mt(r,N,u)}break;case 5:var Y=r.stateNode;if(u===null&&r.flags&4){u=Y;var nt=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":nt.autoFocus&&u.focus();break;case"img":nt.src&&(u.src=nt.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var kt=r.alternate;if(kt!==null){var $t=kt.memoizedState;if($t!==null){var qt=$t.dehydrated;qt!==null&&Cn(qt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(o(163))}Gn||r.flags&512&&ac(r)}catch(Vt){Bi(r,r.return,Vt)}}if(r===t){fe=null;break}if(u=r.sibling,u!==null){u.return=r.return,fe=u;break}fe=r.return}}function Ed(t){for(;fe!==null;){var r=fe;if(r===t){fe=null;break}var u=r.sibling;if(u!==null){u.return=r.return,fe=u;break}fe=r.return}}function Ld(t){for(;fe!==null;){var r=fe;try{switch(r.tag){case 0:case 11:case 15:var u=r.return;try{Zu(4,r)}catch(nt){Bi(r,u,nt)}break;case 1:var m=r.stateNode;if(typeof m.componentDidMount=="function"){var M=r.return;try{m.componentDidMount()}catch(nt){Bi(r,M,nt)}}var C=r.return;try{ac(r)}catch(nt){Bi(r,C,nt)}break;case 5:var N=r.return;try{ac(r)}catch(nt){Bi(r,N,nt)}}}catch(nt){Bi(r,r.return,nt)}if(r===t){fe=null;break}var Y=r.sibling;if(Y!==null){Y.return=r.return,fe=Y;break}fe=r.return}}var rg=Math.ceil,qu=Tt.ReactCurrentDispatcher,hc=Tt.ReactCurrentOwner,fs=Tt.ReactCurrentBatchConfig,ri=0,yn=null,Qi=null,An=0,zr=0,bl=Gs(0),fn=0,ou=null,tl=0,Ku=0,cc=0,au=null,wr=null,fc=0,Sl=1/0,zo=null,Ju=!1,dc=null,va=null,Xu=!1,xa=null,Yu=0,lu=0,pc=null,Qu=-1,th=0;function Qn(){return(ri&6)!==0?gi():Qu!==-1?Qu:Qu=gi()}function wa(t){return(t.mode&1)===0?1:(ri&2)!==0&&An!==0?An&-An:b.transition!==null?(th===0&&(th=Yt()),th):(t=ie,t!==0||(t=window.event,t=t===void 0?16:qe(t.type)),t)}function Ws(t,r,u,m){if(50<lu)throw lu=0,pc=null,Error(o(185));Ht(t,u,m),((ri&2)===0||t!==yn)&&(t===yn&&((ri&2)===0&&(Ku|=u),fn===4&&Ma(t,An)),Mr(t,m),u===1&&ri===0&&(r.mode&1)===0&&(Sl=gi()+500,xl&&ho()))}function Mr(t,r){var u=t.callbackNode;jt(t,r);var m=Pt(t,t===yn?An:0);if(m===0)u!==null&&Zr(u),t.callbackNode=null,t.callbackPriority=0;else if(r=m&-m,t.callbackPriority!==r){if(u!=null&&Zr(u),r===1)t.tag===0?jh(bd.bind(null,t)):Xl(bd.bind(null,t)),vi(function(){(ri&6)===0&&ho()}),u=null;else{switch(Be(m)){case 1:u=qr;break;case 4:u=Jo;break;case 16:u=Ps;break;case 536870912:u=Ar;break;default:u=Ps}u=Rd(u,Cd.bind(null,t))}t.callbackPriority=r,t.callbackNode=u}}function Cd(t,r){if(Qu=-1,th=0,(ri&6)!==0)throw Error(o(327));var u=t.callbackNode;if(kl()&&t.callbackNode!==u)return null;var m=Pt(t,t===yn?An:0);if(m===0)return null;if((m&30)!==0||(m&t.expiredLanes)!==0||r)r=eh(t,m);else{r=m;var M=ri;ri|=2;var C=kd();(yn!==t||An!==r)&&(zo=null,Sl=gi()+500,il(t,r));do try{ag();break}catch(Y){Sd(t,Y)}while(!0);Ke(),qu.current=C,ri=M,Qi!==null?r=0:(yn=null,An=0,r=fn)}if(r!==0){if(r===2&&(M=Ot(t),M!==0&&(m=M,r=gc(t,M))),r===1)throw u=ou,il(t,0),Ma(t,m),Mr(t,gi()),u;if(r===6)Ma(t,m);else{if(M=t.current.alternate,(m&30)===0&&!sg(M)&&(r=eh(t,m),r===2&&(C=Ot(t),C!==0&&(m=C,r=gc(t,C))),r===1))throw u=ou,il(t,0),Ma(t,m),Mr(t,gi()),u;switch(t.finishedWork=M,t.finishedLanes=m,r){case 0:case 1:throw Error(o(345));case 2:nl(t,wr,zo);break;case 3:if(Ma(t,m),(m&130023424)===m&&(r=fc+500-gi(),10<r)){if(Pt(t,0)!==0)break;if(M=t.suspendedLanes,(M&m)!==m){Qn(),t.pingedLanes|=t.suspendedLanes&M;break}t.timeoutHandle=ji(nl.bind(null,t,wr,zo),r);break}nl(t,wr,zo);break;case 4:if(Ma(t,m),(m&4194240)===m)break;for(r=t.eventTimes,M=-1;0<m;){var N=31-Ne(m);C=1<<N,N=r[N],N>M&&(M=N),m&=~C}if(m=M,m=gi()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*rg(m/1960))-m,10<m){t.timeoutHandle=ji(nl.bind(null,t,wr,zo),m);break}nl(t,wr,zo);break;case 5:nl(t,wr,zo);break;default:throw Error(o(329))}}}return Mr(t,gi()),t.callbackNode===u?Cd.bind(null,t):null}function gc(t,r){var u=au;return t.current.memoizedState.isDehydrated&&(il(t,r).flags|=256),t=eh(t,r),t!==2&&(r=wr,wr=u,r!==null&&mc(r)),t}function mc(t){wr===null?wr=t:wr.push.apply(wr,t)}function sg(t){for(var r=t;;){if(r.flags&16384){var u=r.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var m=0;m<u.length;m++){var M=u[m],C=M.getSnapshot;M=M.value;try{if(!On(C(),M))return!1}catch{return!1}}}if(u=r.child,r.subtreeFlags&16384&&u!==null)u.return=r,r=u;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Ma(t,r){for(r&=~cc,r&=~Ku,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var u=31-Ne(r),m=1<<u;t[u]=-1,r&=~m}}function bd(t){if((ri&6)!==0)throw Error(o(327));kl();var r=Pt(t,0);if((r&1)===0)return Mr(t,gi()),null;var u=eh(t,r);if(t.tag!==0&&u===2){var m=Ot(t);m!==0&&(r=m,u=gc(t,m))}if(u===1)throw u=ou,il(t,0),Ma(t,r),Mr(t,gi()),u;if(u===6)throw Error(o(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,nl(t,wr,zo),Mr(t,gi()),null}function _c(t,r){var u=ri;ri|=1;try{return t(r)}finally{ri=u,ri===0&&(Sl=gi()+500,xl&&ho())}}function el(t){xa!==null&&xa.tag===0&&(ri&6)===0&&kl();var r=ri;ri|=1;var u=fs.transition,m=ie;try{if(fs.transition=null,ie=1,t)return t()}finally{ie=m,fs.transition=u,ri=r,(ri&6)===0&&ho()}}function yc(){zr=bl.current,_i(bl)}function il(t,r){t.finishedWork=null,t.finishedLanes=0;var u=t.timeoutHandle;if(u!==-1&&(t.timeoutHandle=-1,Pi(u)),Qi!==null)for(u=Qi.return;u!==null;){var m=u;switch(Yl(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&No();break;case 3:Ze(),_i(ln),_i(Ai),vr();break;case 5:Yi(m);break;case 4:Ze();break;case 13:_i(pi);break;case 19:_i(pi);break;case 10:K(m.type._context);break;case 22:case 23:yc()}u=u.return}if(yn=t,Qi=t=Ea(t.current,null),An=zr=r,fn=0,ou=null,cc=Ku=tl=0,wr=au=null,ht!==null){for(r=0;r<ht.length;r++)if(u=ht[r],m=u.interleaved,m!==null){u.interleaved=null;var M=m.next,C=u.pending;if(C!==null){var N=C.next;C.next=M,m.next=N}u.pending=m}ht=null}return t}function Sd(t,r){do{var u=Qi;try{if(Ke(),co.current=Uu,Gu){for(var m=je.memoizedState;m!==null;){var M=m.queue;M!==null&&(M.pending=null),m=m.next}Gu=!1}if(Li=0,_n=cn=je=null,tu=!1,eu=0,hc.current=null,u===null||u.return===null){fn=1,ou=r,Qi=null;break}t:{var C=t,N=u.return,Y=u,nt=r;if(r=An,Y.flags|=32768,nt!==null&&typeof nt=="object"&&typeof nt.then=="function"){var kt=nt,$t=Y,qt=$t.tag;if(($t.mode&1)===0&&(qt===0||qt===11||qt===15)){var Vt=$t.alternate;Vt?($t.updateQueue=Vt.updateQueue,$t.memoizedState=Vt.memoizedState,$t.lanes=Vt.lanes):($t.updateQueue=null,$t.memoizedState=null)}var ue=Yf(N);if(ue!==null){ue.flags&=-257,Qf(ue,N,Y,C,r),ue.mode&1&&Xf(C,kt,r),r=ue,nt=kt;var ve=r.updateQueue;if(ve===null){var xe=new Set;xe.add(nt),r.updateQueue=xe}else ve.add(nt);break t}else{if((r&1)===0){Xf(C,kt,r),vc();break t}nt=Error(o(426))}}else if(xi&&Y.mode&1){var Hi=Yf(N);if(Hi!==null){(Hi.flags&65536)===0&&(Hi.flags|=256),Qf(Hi,N,Y,C,r),w(Ll(nt,Y));break t}}C=nt=Ll(nt,Y),fn!==4&&(fn=2),au===null?au=[C]:au.push(C),C=N;do{switch(C.tag){case 3:C.flags|=65536,r&=-r,C.lanes|=r;var vt=Kf(C,nt,r);ot(C,vt);break t;case 1:Y=nt;var lt=C.type,Lt=C.stateNode;if((C.flags&128)===0&&(typeof lt.getDerivedStateFromError=="function"||Lt!==null&&typeof Lt.componentDidCatch=="function"&&(va===null||!va.has(Lt)))){C.flags|=65536,r&=-r,C.lanes|=r;var Xt=Jf(C,Y,r);ot(C,Xt);break t}}C=C.return}while(C!==null)}Ad(u)}catch(Ee){r=Ee,Qi===u&&u!==null&&(Qi=u=u.return);continue}break}while(!0)}function kd(){var t=qu.current;return qu.current=Uu,t===null?Uu:t}function vc(){(fn===0||fn===3||fn===2)&&(fn=4),yn===null||(tl&268435455)===0&&(Ku&268435455)===0||Ma(yn,An)}function eh(t,r){var u=ri;ri|=2;var m=kd();(yn!==t||An!==r)&&(zo=null,il(t,r));do try{og();break}catch(M){Sd(t,M)}while(!0);if(Ke(),ri=u,qu.current=m,Qi!==null)throw Error(o(261));return yn=null,An=0,fn}function og(){for(;Qi!==null;)Pd(Qi)}function ag(){for(;Qi!==null&&!Mo();)Pd(Qi)}function Pd(t){var r=Id(t.alternate,t,zr);t.memoizedProps=t.pendingProps,r===null?Ad(t):Qi=r,hc.current=null}function Ad(t){var r=t;do{var u=r.alternate;if(t=r.return,(r.flags&32768)===0){if(u=Qp(u,r,zr),u!==null){Qi=u;return}}else{if(u=tg(u,r),u!==null){u.flags&=32767,Qi=u;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{fn=6,Qi=null;return}}if(r=r.sibling,r!==null){Qi=r;return}Qi=r=t}while(r!==null);fn===0&&(fn=5)}function nl(t,r,u){var m=ie,M=fs.transition;try{fs.transition=null,ie=1,lg(t,r,u,m)}finally{fs.transition=M,ie=m}return null}function lg(t,r,u,m){do kl();while(xa!==null);if((ri&6)!==0)throw Error(o(327));u=t.finishedWork;var M=t.finishedLanes;if(u===null)return null;if(t.finishedWork=null,t.finishedLanes=0,u===t.current)throw Error(o(177));t.callbackNode=null,t.callbackPriority=0;var C=u.lanes|u.childLanes;if(Zt(t,C),t===yn&&(Qi=yn=null,An=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Xu||(Xu=!0,Rd(Ps,function(){return kl(),null})),C=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||C){C=fs.transition,fs.transition=null;var N=ie;ie=1;var Y=ri;ri|=4,hc.current=null,ig(t,u),xd(u,t),cr(Ae),Bs=!!re,Ae=re=null,t.current=u,ng(u),Js(),ri=Y,ie=N,fs.transition=C}else t.current=u;if(Xu&&(Xu=!1,xa=t,Yu=M),C=t.pendingLanes,C===0&&(va=null),sr(u.stateNode),Mr(t,gi()),r!==null)for(m=t.onRecoverableError,u=0;u<r.length;u++)M=r[u],m(M.value,{componentStack:M.stack,digest:M.digest});if(Ju)throw Ju=!1,t=dc,dc=null,t;return(Yu&1)!==0&&t.tag!==0&&kl(),C=t.pendingLanes,(C&1)!==0?t===pc?lu++:(lu=0,pc=t):lu=0,ho(),null}function kl(){if(xa!==null){var t=Be(Yu),r=fs.transition,u=ie;try{if(fs.transition=null,ie=16>t?16:t,xa===null)var m=!1;else{if(t=xa,xa=null,Yu=0,(ri&6)!==0)throw Error(o(331));var M=ri;for(ri|=4,fe=t.current;fe!==null;){var C=fe,N=C.child;if((fe.flags&16)!==0){var Y=C.deletions;if(Y!==null){for(var nt=0;nt<Y.length;nt++){var kt=Y[nt];for(fe=kt;fe!==null;){var $t=fe;switch($t.tag){case 0:case 11:case 15:su(8,$t,C)}var qt=$t.child;if(qt!==null)qt.return=$t,fe=qt;else for(;fe!==null;){$t=fe;var Vt=$t.sibling,ue=$t.return;if(gd($t),$t===kt){fe=null;break}if(Vt!==null){Vt.return=ue,fe=Vt;break}fe=ue}}}var ve=C.alternate;if(ve!==null){var xe=ve.child;if(xe!==null){ve.child=null;do{var Hi=xe.sibling;xe.sibling=null,xe=Hi}while(xe!==null)}}fe=C}}if((C.subtreeFlags&2064)!==0&&N!==null)N.return=C,fe=N;else t:for(;fe!==null;){if(C=fe,(C.flags&2048)!==0)switch(C.tag){case 0:case 11:case 15:su(9,C,C.return)}var vt=C.sibling;if(vt!==null){vt.return=C.return,fe=vt;break t}fe=C.return}}var lt=t.current;for(fe=lt;fe!==null;){N=fe;var Lt=N.child;if((N.subtreeFlags&2064)!==0&&Lt!==null)Lt.return=N,fe=Lt;else t:for(N=lt;fe!==null;){if(Y=fe,(Y.flags&2048)!==0)try{switch(Y.tag){case 0:case 11:case 15:Zu(9,Y)}}catch(Ee){Bi(Y,Y.return,Ee)}if(Y===N){fe=null;break t}var Xt=Y.sibling;if(Xt!==null){Xt.return=Y.return,fe=Xt;break t}fe=Y.return}}if(ri=M,ho(),Mn&&typeof Mn.onPostCommitFiberRoot=="function")try{Mn.onPostCommitFiberRoot(As,t)}catch{}m=!0}return m}finally{ie=u,fs.transition=r}}return!1}function Bd(t,r,u){r=Ll(u,r),r=Kf(t,r,1),t=et(t,r,1),r=Qn(),t!==null&&(Ht(t,1,r),Mr(t,r))}function Bi(t,r,u){if(t.tag===3)Bd(t,t,u);else for(;r!==null;){if(r.tag===3){Bd(r,t,u);break}else if(r.tag===1){var m=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(va===null||!va.has(m))){t=Ll(u,t),t=Jf(r,t,1),r=et(r,t,1),t=Qn(),r!==null&&(Ht(r,1,t),Mr(r,t));break}}r=r.return}}function ug(t,r,u){var m=t.pingCache;m!==null&&m.delete(r),r=Qn(),t.pingedLanes|=t.suspendedLanes&u,yn===t&&(An&u)===u&&(fn===4||fn===3&&(An&130023424)===An&&500>gi()-fc?il(t,0):cc|=u),Mr(t,r)}function Td(t,r){r===0&&((t.mode&1)===0?r=1:(r=V,V<<=1,(V&130023424)===0&&(V=4194304)));var u=Qn();t=G(t,r),t!==null&&(Ht(t,r,u),Mr(t,u))}function hg(t){var r=t.memoizedState,u=0;r!==null&&(u=r.retryLane),Td(t,u)}function cg(t,r){var u=0;switch(t.tag){case 13:var m=t.stateNode,M=t.memoizedState;M!==null&&(u=M.retryLane);break;case 19:m=t.stateNode;break;default:throw Error(o(314))}m!==null&&m.delete(r),Td(t,u)}var Id;Id=function(t,r,u){if(t!==null)if(t.memoizedProps!==r.pendingProps||ln.current)xr=!0;else{if((t.lanes&u)===0&&(r.flags&128)===0)return xr=!1,Yp(t,r,u);xr=(t.flags&131072)!==0}else xr=!1,xi&&(r.flags&1048576)!==0&&Ui(r,Ml,r.index);switch(r.lanes=0,r.tag){case 2:var m=r.type;Wu(t,r),t=r.pendingProps;var M=pa(r,Ai.current);at(r,u),M=Hh(null,r,m,t,M,u);var C=Vh();return r.flags|=1,typeof M=="object"&&M!==null&&typeof M.render=="function"&&M.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,un(m)?(C=!0,vl(r)):C=!1,r.memoizedState=M.state!==null&&M.state!==void 0?M.state:null,z(r),M.updater=Hu,r.stateNode=M,M._reactInternals=r,Jh(r,m,t,u),r=tc(null,r,m,!0,C,u)):(r.tag=0,xi&&C&&hs(r),Yn(null,r,M,u),r=r.child),r;case 16:m=r.elementType;t:{switch(Wu(t,r),t=r.pendingProps,M=m._init,m=M(m._payload),r.type=m,M=r.tag=dg(m),t=Us(m,t),M){case 0:r=Qh(null,r,m,t,u);break t;case 1:r=sd(null,r,m,t,u);break t;case 11:r=td(null,r,m,t,u);break t;case 14:r=ed(null,r,m,Us(m.type,t),u);break t}throw Error(o(306,m,""))}return r;case 0:return m=r.type,M=r.pendingProps,M=r.elementType===m?M:Us(m,M),Qh(t,r,m,M,u);case 1:return m=r.type,M=r.pendingProps,M=r.elementType===m?M:Us(m,M),sd(t,r,m,M,u);case 3:t:{if(od(r),t===null)throw Error(o(387));m=r.pendingProps,C=r.memoizedState,M=C.element,H(t,r),pt(r,m,null,u);var N=r.memoizedState;if(m=N.element,C.isDehydrated)if(C={element:m,isDehydrated:!1,cache:N.cache,pendingSuspenseBoundaries:N.pendingSuspenseBoundaries,transitions:N.transitions},r.updateQueue.baseState=C,r.memoizedState=C,r.flags&256){M=Ll(Error(o(423)),r),r=ad(t,r,m,u,M);break t}else if(m!==M){M=Ll(Error(o(424)),r),r=ad(t,r,m,u,M);break t}else for(kn=Kn(r.stateNode.containerInfo.firstChild),Xn=r,xi=!0,Gr=null,u=_t(r,null,m,u),r.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(_(),m===M){r=Go(t,r,u);break t}Yn(t,r,m,u)}r=r.child}return r;case 5:return ui(r),t===null&&s(r),m=r.type,M=r.pendingProps,C=t!==null?t.memoizedProps:null,N=M.children,He(m,M)?N=null:C!==null&&He(m,C)&&(r.flags|=32),rd(t,r),Yn(t,r,N,u),r.child;case 6:return t===null&&s(r),null;case 13:return ld(t,r,u);case 4:return ai(r,r.stateNode.containerInfo),m=r.pendingProps,t===null?r.child=$(r,null,m,u):Yn(t,r,m,u),r.child;case 11:return m=r.type,M=r.pendingProps,M=r.elementType===m?M:Us(m,M),td(t,r,m,M,u);case 7:return Yn(t,r,r.pendingProps,u),r.child;case 8:return Yn(t,r,r.pendingProps.children,u),r.child;case 12:return Yn(t,r,r.pendingProps.children,u),r.child;case 10:t:{if(m=r.type._context,M=r.pendingProps,C=r.memoizedProps,N=M.value,di(Et,m._currentValue),m._currentValue=N,C!==null)if(On(C.value,N)){if(C.children===M.children&&!ln.current){r=Go(t,r,u);break t}}else for(C=r.child,C!==null&&(C.return=r);C!==null;){var Y=C.dependencies;if(Y!==null){N=C.child;for(var nt=Y.firstContext;nt!==null;){if(nt.context===m){if(C.tag===1){nt=U(-1,u&-u),nt.tag=2;var kt=C.updateQueue;if(kt!==null){kt=kt.shared;var $t=kt.pending;$t===null?nt.next=nt:(nt.next=$t.next,$t.next=nt),kt.pending=nt}}C.lanes|=u,nt=C.alternate,nt!==null&&(nt.lanes|=u),tt(C.return,u,r),Y.lanes|=u;break}nt=nt.next}}else if(C.tag===10)N=C.type===r.type?null:C.child;else if(C.tag===18){if(N=C.return,N===null)throw Error(o(341));N.lanes|=u,Y=N.alternate,Y!==null&&(Y.lanes|=u),tt(N,u,r),N=C.sibling}else N=C.child;if(N!==null)N.return=C;else for(N=C;N!==null;){if(N===r){N=null;break}if(C=N.sibling,C!==null){C.return=N.return,N=C;break}N=N.return}C=N}Yn(t,r,M.children,u),r=r.child}return r;case 9:return M=r.type,m=r.pendingProps.children,at(r,u),M=xt(M),m=m(M),r.flags|=1,Yn(t,r,m,u),r.child;case 14:return m=r.type,M=Us(m,r.pendingProps),M=Us(m.type,M),ed(t,r,m,M,u);case 15:return id(t,r,r.type,r.pendingProps,u);case 17:return m=r.type,M=r.pendingProps,M=r.elementType===m?M:Us(m,M),Wu(t,r),r.tag=1,un(m)?(t=!0,vl(r)):t=!1,at(r,u),Zf(r,m,M),Jh(r,m,M,u),tc(null,r,m,!0,t,u);case 19:return hd(t,r,u);case 22:return nd(t,r,u)}throw Error(o(156,r.tag))};function Rd(t,r){return Ko(t,r)}function fg(t,r,u,m){this.tag=t,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ds(t,r,u,m){return new fg(t,r,u,m)}function xc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function dg(t){if(typeof t=="function")return xc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ct)return 11;if(t===_e)return 14}return 2}function Ea(t,r){var u=t.alternate;return u===null?(u=ds(t.tag,r,t.key,t.mode),u.elementType=t.elementType,u.type=t.type,u.stateNode=t.stateNode,u.alternate=t,t.alternate=u):(u.pendingProps=r,u.type=t.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=t.flags&14680064,u.childLanes=t.childLanes,u.lanes=t.lanes,u.child=t.child,u.memoizedProps=t.memoizedProps,u.memoizedState=t.memoizedState,u.updateQueue=t.updateQueue,r=t.dependencies,u.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},u.sibling=t.sibling,u.index=t.index,u.ref=t.ref,u}function ih(t,r,u,m,M,C){var N=2;if(m=t,typeof t=="function")xc(t)&&(N=1);else if(typeof t=="string")N=5;else t:switch(t){case Dt:return rl(u.children,M,C,r);case ut:N=8,M|=8;break;case Bt:return t=ds(12,u,r,M|2),t.elementType=Bt,t.lanes=C,t;case oe:return t=ds(13,u,r,M),t.elementType=oe,t.lanes=C,t;case Le:return t=ds(19,u,r,M),t.elementType=Le,t.lanes=C,t;case ce:return nh(u,M,C,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case st:N=10;break t;case yt:N=9;break t;case Ct:N=11;break t;case _e:N=14;break t;case de:N=16,m=null;break t}throw Error(o(130,t==null?t:typeof t,""))}return r=ds(N,u,r,M),r.elementType=t,r.type=m,r.lanes=C,r}function rl(t,r,u,m){return t=ds(7,t,m,r),t.lanes=u,t}function nh(t,r,u,m){return t=ds(22,t,m,r),t.elementType=ce,t.lanes=u,t.stateNode={isHidden:!1},t}function wc(t,r,u){return t=ds(6,t,null,r),t.lanes=u,t}function Mc(t,r,u){return r=ds(4,t.children!==null?t.children:[],t.key,r),r.lanes=u,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function pg(t,r,u,m,M){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jt(0),this.expirationTimes=Jt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jt(0),this.identifierPrefix=m,this.onRecoverableError=M,this.mutableSourceEagerHydrationData=null}function Ec(t,r,u,m,M,C,N,Y,nt){return t=new pg(t,r,u,Y,nt),r===1?(r=1,C===!0&&(r|=8)):r=0,C=ds(3,null,null,r),t.current=C,C.stateNode=t,C.memoizedState={element:m,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},z(C),t}function gg(t,r,u){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zt,key:m==null?null:""+m,children:t,containerInfo:r,implementation:u}}function Od(t){if(!t)return uo;t=t._reactInternals;t:{if(nr(t)!==t||t.tag!==1)throw Error(o(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break t;case 1:if(un(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break t}}r=r.return}while(r!==null);throw Error(o(171))}if(t.tag===1){var u=t.type;if(un(u))return Nu(t,u,r)}return r}function Dd(t,r,u,m,M,C,N,Y,nt){return t=Ec(u,m,!0,t,M,C,N,Y,nt),t.context=Od(null),u=t.current,m=Qn(),M=wa(u),C=U(m,M),C.callback=r??null,et(u,C,M),t.current.lanes=M,Ht(t,M,m),Mr(t,m),t}function rh(t,r,u,m){var M=r.current,C=Qn(),N=wa(M);return u=Od(u),r.context===null?r.context=u:r.pendingContext=u,r=U(C,N),r.payload={element:t},m=m===void 0?null:m,m!==null&&(r.callback=m),t=et(M,r,N),t!==null&&(Ws(t,M,N,C),it(t,M,N)),N}function sh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Nd(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var u=t.retryLane;t.retryLane=u!==0&&u<r?u:r}}function Lc(t,r){Nd(t,r),(t=t.alternate)&&Nd(t,r)}function mg(){return null}var Fd=typeof reportError=="function"?reportError:function(t){console.error(t)};function Cc(t){this._internalRoot=t}oh.prototype.render=Cc.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(o(409));rh(t,r,null,null)},oh.prototype.unmount=Cc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;el(function(){rh(null,t,null,null)}),r[ni]=null}};function oh(t){this._internalRoot=t}oh.prototype.unstable_scheduleHydration=function(t){if(t){var r=Qe();t={blockedOn:null,target:t,priority:r};for(var u=0;u<ti.length&&r!==0&&r<ti[u].priority;u++);ti.splice(u,0,t),u===0&&Hn(t)}};function bc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ah(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Gd(){}function _g(t,r,u,m,M){if(M){if(typeof m=="function"){var C=m;m=function(){var kt=sh(N);C.call(kt)}}var N=Dd(r,m,t,0,null,!1,!1,"",Gd);return t._reactRootContainer=N,t[ni]=N.current,zi(t.nodeType===8?t.parentNode:t),el(),N}for(;M=t.lastChild;)t.removeChild(M);if(typeof m=="function"){var Y=m;m=function(){var kt=sh(nt);Y.call(kt)}}var nt=Ec(t,0,!1,null,null,!1,!1,"",Gd);return t._reactRootContainer=nt,t[ni]=nt.current,zi(t.nodeType===8?t.parentNode:t),el(function(){rh(r,nt,u,m)}),nt}function lh(t,r,u,m,M){var C=u._reactRootContainer;if(C){var N=C;if(typeof M=="function"){var Y=M;M=function(){var nt=sh(N);Y.call(nt)}}rh(r,N,t,M)}else N=_g(u,r,t,M,m);return sh(N)}Te=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var u=dt(r.pendingLanes);u!==0&&(ye(r,u|1),Mr(r,gi()),(ri&6)===0&&(Sl=gi()+500,ho()))}break;case 13:el(function(){var m=G(t,1);if(m!==null){var M=Qn();Ws(m,t,1,M)}}),Lc(t,1)}},Ue=function(t){if(t.tag===13){var r=G(t,134217728);if(r!==null){var u=Qn();Ws(r,t,134217728,u)}Lc(t,134217728)}},oi=function(t){if(t.tag===13){var r=wa(t),u=G(t,r);if(u!==null){var m=Qn();Ws(u,t,r,m)}Lc(t,r)}},Qe=function(){return ie},dn=function(t,r){var u=ie;try{return ie=t,r()}finally{ie=u}},Es=function(t,r,u){switch(r){case"input":if(jr(t,u),r=u.name,u.type==="radio"&&r!=null){for(u=t;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<u.length;r++){var m=u[r];if(m!==t&&m.form===t.form){var M=fa(m);if(!M)throw Error(o(90));vs(m),jr(m,M)}}}break;case"textarea":si(t,u);break;case"select":r=u.value,r!=null&&ir(t,!!u.multiple,r,!1)}},Vo=_c,Pr=el;var yg={usingClientEntryPoint:!1,Events:[yr,as,fa,Oa,xo,_c]},uu={findFiberByHostInstance:Fs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vg={bundleType:uu.bundleType,version:uu.version,rendererPackageName:uu.rendererPackageName,rendererConfig:uu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Tt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Zo(t),t===null?null:t.stateNode},findFiberByHostInstance:uu.findFiberByHostInstance||mg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uh.isDisabled&&uh.supportsFiber)try{As=uh.inject(vg),Mn=uh}catch{}}return Er.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yg,Er.createPortal=function(t,r){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bc(r))throw Error(o(200));return gg(t,r,null,u)},Er.createRoot=function(t,r){if(!bc(t))throw Error(o(299));var u=!1,m="",M=Fd;return r!=null&&(r.unstable_strictMode===!0&&(u=!0),r.identifierPrefix!==void 0&&(m=r.identifierPrefix),r.onRecoverableError!==void 0&&(M=r.onRecoverableError)),r=Ec(t,1,!1,null,null,u,!1,m,M),t[ni]=r.current,zi(t.nodeType===8?t.parentNode:t),new Cc(r)},Er.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(o(188)):(t=Object.keys(t).join(","),Error(o(268,t)));return t=Zo(r),t=t===null?null:t.stateNode,t},Er.flushSync=function(t){return el(t)},Er.hydrate=function(t,r,u){if(!ah(r))throw Error(o(200));return lh(null,t,r,!0,u)},Er.hydrateRoot=function(t,r,u){if(!bc(t))throw Error(o(405));var m=u!=null&&u.hydratedSources||null,M=!1,C="",N=Fd;if(u!=null&&(u.unstable_strictMode===!0&&(M=!0),u.identifierPrefix!==void 0&&(C=u.identifierPrefix),u.onRecoverableError!==void 0&&(N=u.onRecoverableError)),r=Dd(r,null,t,1,u??null,M,!1,C,N),t[ni]=r.current,zi(t),m)for(t=0;t<m.length;t++)u=m[t],M=u._getVersion,M=M(u._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[u,M]:r.mutableSourceEagerHydrationData.push(u,M);return new oh(r)},Er.render=function(t,r,u){if(!ah(r))throw Error(o(200));return lh(null,t,r,!1,u)},Er.unmountComponentAtNode=function(t){if(!ah(t))throw Error(o(40));return t._reactRootContainer?(el(function(){lh(null,null,t,!1,function(){t._reactRootContainer=null,t[ni]=null})}),!0):!1},Er.unstable_batchedUpdates=_c,Er.unstable_renderSubtreeIntoContainer=function(t,r,u,m){if(!ah(u))throw Error(o(200));if(t==null||t._reactInternals===void 0)throw Error(o(38));return lh(t,r,u,!1,m)},Er.version="18.3.1-next-f1338f8080-20240426",Er}var Zd;function X0(){if(Zd)return Pc.exports;Zd=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),Pc.exports=kg(),Pc.exports}var qd;function Pg(){if(qd)return ch;qd=1;var e=X0();return ch.createRoot=e.createRoot,ch.hydrateRoot=e.hydrateRoot,ch}var Ag=Pg();const Bg=Oh(Ag);var du={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var Tg=du.exports,Kd;function Ig(){return Kd||(Kd=1,(function(e,n){(function(o,c){c(n)})(Tg,(function(o){var c="1.9.4";function f(i){var l,p,x,k;for(p=1,x=arguments.length;p<x;p++){k=arguments[p];for(l in k)i[l]=k[l]}return i}var g=Object.create||(function(){function i(){}return function(l){return i.prototype=l,new i}})();function y(i,l){var p=Array.prototype.slice;if(i.bind)return i.bind.apply(i,p.call(arguments,1));var x=p.call(arguments,2);return function(){return i.apply(l,x.length?x.concat(p.call(arguments)):arguments)}}var v=0;function E(i){return"_leaflet_id"in i||(i._leaflet_id=++v),i._leaflet_id}function A(i,l,p){var x,k,F,Q;return Q=function(){x=!1,k&&(F.apply(p,k),k=!1)},F=function(){x?k=arguments:(i.apply(p,arguments),setTimeout(Q,l),x=!0)},F}function D(i,l,p){var x=l[1],k=l[0],F=x-k;return i===x&&p?i:((i-k)%F+F)%F+k}function P(){return!1}function B(i,l){if(l===!1)return i;var p=Math.pow(10,l===void 0?6:l);return Math.round(i*p)/p}function W(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function J(i){return W(i).split(/\s+/)}function Z(i,l){Object.prototype.hasOwnProperty.call(i,"options")||(i.options=i.options?g(i.options):{});for(var p in l)i.options[p]=l[p];return i.options}function q(i,l,p){var x=[];for(var k in i)x.push(encodeURIComponent(p?k.toUpperCase():k)+"="+encodeURIComponent(i[k]));return(!l||l.indexOf("?")===-1?"?":"&")+x.join("&")}var ct=/\{ *([\w_ -]+) *\}/g;function ft(i,l){return i.replace(ct,function(p,x){var k=l[x];if(k===void 0)throw new Error("No value provided for variable "+p);return typeof k=="function"&&(k=k(l)),k})}var St=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function Tt(i,l){for(var p=0;p<i.length;p++)if(i[p]===l)return p;return-1}var Gt="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function zt(i){return window["webkit"+i]||window["moz"+i]||window["ms"+i]}var Dt=0;function ut(i){var l=+new Date,p=Math.max(0,16-(l-Dt));return Dt=l+p,window.setTimeout(i,p)}var Bt=window.requestAnimationFrame||zt("RequestAnimationFrame")||ut,st=window.cancelAnimationFrame||zt("CancelAnimationFrame")||zt("CancelRequestAnimationFrame")||function(i){window.clearTimeout(i)};function yt(i,l,p){if(p&&Bt===ut)i.call(l);else return Bt.call(window,y(i,l))}function Ct(i){i&&st.call(window,i)}var oe={__proto__:null,extend:f,create:g,bind:y,get lastId(){return v},stamp:E,throttle:A,wrapNum:D,falseFn:P,formatNum:B,trim:W,splitWords:J,setOptions:Z,getParamString:q,template:ft,isArray:St,indexOf:Tt,emptyImageUrl:Gt,requestFn:Bt,cancelFn:st,requestAnimFrame:yt,cancelAnimFrame:Ct};function Le(){}Le.extend=function(i){var l=function(){Z(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},p=l.__super__=this.prototype,x=g(p);x.constructor=l,l.prototype=x;for(var k in this)Object.prototype.hasOwnProperty.call(this,k)&&k!=="prototype"&&k!=="__super__"&&(l[k]=this[k]);return i.statics&&f(l,i.statics),i.includes&&(_e(i.includes),f.apply(null,[x].concat(i.includes))),f(x,i),delete x.statics,delete x.includes,x.options&&(x.options=p.options?g(p.options):{},f(x.options,i.options)),x._initHooks=[],x.callInitHooks=function(){if(!this._initHooksCalled){p.callInitHooks&&p.callInitHooks.call(this),this._initHooksCalled=!0;for(var F=0,Q=x._initHooks.length;F<Q;F++)x._initHooks[F].call(this)}},l},Le.include=function(i){var l=this.prototype.options;return f(this.prototype,i),i.options&&(this.prototype.options=l,this.mergeOptions(i.options)),this},Le.mergeOptions=function(i){return f(this.prototype.options,i),this},Le.addInitHook=function(i){var l=Array.prototype.slice.call(arguments,1),p=typeof i=="function"?i:function(){this[i].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(p),this};function _e(i){if(!(typeof L>"u"||!L||!L.Mixin)){i=St(i)?i:[i];for(var l=0;l<i.length;l++)i[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var de={on:function(i,l,p){if(typeof i=="object")for(var x in i)this._on(x,i[x],l);else{i=J(i);for(var k=0,F=i.length;k<F;k++)this._on(i[k],l,p)}return this},off:function(i,l,p){if(!arguments.length)delete this._events;else if(typeof i=="object")for(var x in i)this._off(x,i[x],l);else{i=J(i);for(var k=arguments.length===1,F=0,Q=i.length;F<Q;F++)k?this._off(i[F]):this._off(i[F],l,p)}return this},_on:function(i,l,p,x){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(i,l,p)===!1){p===this&&(p=void 0);var k={fn:l,ctx:p};x&&(k.once=!0),this._events=this._events||{},this._events[i]=this._events[i]||[],this._events[i].push(k)}},_off:function(i,l,p){var x,k,F;if(this._events&&(x=this._events[i],!!x)){if(arguments.length===1){if(this._firingCount)for(k=0,F=x.length;k<F;k++)x[k].fn=P;delete this._events[i];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var Q=this._listens(i,l,p);if(Q!==!1){var gt=x[Q];this._firingCount&&(gt.fn=P,this._events[i]=x=x.slice()),x.splice(Q,1)}}},fire:function(i,l,p){if(!this.listens(i,p))return this;var x=f({},l,{type:i,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var k=this._events[i];if(k){this._firingCount=this._firingCount+1||1;for(var F=0,Q=k.length;F<Q;F++){var gt=k[F],bt=gt.fn;gt.once&&this.off(i,bt,gt.ctx),bt.call(gt.ctx||this,x)}this._firingCount--}}return p&&this._propagateEvent(x),this},listens:function(i,l,p,x){typeof i!="string"&&console.warn('"string" type argument expected');var k=l;typeof l!="function"&&(x=!!l,k=void 0,p=void 0);var F=this._events&&this._events[i];if(F&&F.length&&this._listens(i,k,p)!==!1)return!0;if(x){for(var Q in this._eventParents)if(this._eventParents[Q].listens(i,l,p,x))return!0}return!1},_listens:function(i,l,p){if(!this._events)return!1;var x=this._events[i]||[];if(!l)return!!x.length;p===this&&(p=void 0);for(var k=0,F=x.length;k<F;k++)if(x[k].fn===l&&x[k].ctx===p)return k;return!1},once:function(i,l,p){if(typeof i=="object")for(var x in i)this._on(x,i[x],l,!0);else{i=J(i);for(var k=0,F=i.length;k<F;k++)this._on(i[k],l,p,!0)}return this},addEventParent:function(i){return this._eventParents=this._eventParents||{},this._eventParents[E(i)]=i,this},removeEventParent:function(i){return this._eventParents&&delete this._eventParents[E(i)],this},_propagateEvent:function(i){for(var l in this._eventParents)this._eventParents[l].fire(i.type,f({layer:i.target,propagatedFrom:i.target},i),!0)}};de.addEventListener=de.on,de.removeEventListener=de.clearAllEventListeners=de.off,de.addOneTimeEventListener=de.once,de.fireEvent=de.fire,de.hasEventListeners=de.listens;var ce=Le.extend(de);function At(i,l,p){this.x=p?Math.round(i):i,this.y=p?Math.round(l):l}var Qt=Math.trunc||function(i){return i>0?Math.floor(i):Math.ceil(i)};At.prototype={clone:function(){return new At(this.x,this.y)},add:function(i){return this.clone()._add(Rt(i))},_add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.clone()._subtract(Rt(i))},_subtract:function(i){return this.x-=i.x,this.y-=i.y,this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){return this.x/=i,this.y/=i,this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){return this.x*=i,this.y*=i,this},scaleBy:function(i){return new At(this.x*i.x,this.y*i.y)},unscaleBy:function(i){return new At(this.x/i.x,this.y/i.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Qt(this.x),this.y=Qt(this.y),this},distanceTo:function(i){i=Rt(i);var l=i.x-this.x,p=i.y-this.y;return Math.sqrt(l*l+p*p)},equals:function(i){return i=Rt(i),i.x===this.x&&i.y===this.y},contains:function(i){return i=Rt(i),Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+B(this.x)+", "+B(this.y)+")"}};function Rt(i,l,p){return i instanceof At?i:St(i)?new At(i[0],i[1]):i==null?i:typeof i=="object"&&"x"in i&&"y"in i?new At(i.x,i.y):new At(i,l,p)}function rt(i,l){if(i)for(var p=l?[i,l]:i,x=0,k=p.length;x<k;x++)this.extend(p[x])}rt.prototype={extend:function(i){var l,p;if(!i)return this;if(i instanceof At||typeof i[0]=="number"||"x"in i)l=p=Rt(i);else if(i=It(i),l=i.min,p=i.max,!l||!p)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=p.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(p.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(p.y,this.max.y)),this},getCenter:function(i){return Rt((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return Rt(this.min.x,this.max.y)},getTopRight:function(){return Rt(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(i){var l,p;return typeof i[0]=="number"||i instanceof At?i=Rt(i):i=It(i),i instanceof rt?(l=i.min,p=i.max):l=p=i,l.x>=this.min.x&&p.x<=this.max.x&&l.y>=this.min.y&&p.y<=this.max.y},intersects:function(i){i=It(i);var l=this.min,p=this.max,x=i.min,k=i.max,F=k.x>=l.x&&x.x<=p.x,Q=k.y>=l.y&&x.y<=p.y;return F&&Q},overlaps:function(i){i=It(i);var l=this.min,p=this.max,x=i.min,k=i.max,F=k.x>l.x&&x.x<p.x,Q=k.y>l.y&&x.y<p.y;return F&&Q},isValid:function(){return!!(this.min&&this.max)},pad:function(i){var l=this.min,p=this.max,x=Math.abs(l.x-p.x)*i,k=Math.abs(l.y-p.y)*i;return It(Rt(l.x-x,l.y-k),Rt(p.x+x,p.y+k))},equals:function(i){return i?(i=It(i),this.min.equals(i.getTopLeft())&&this.max.equals(i.getBottomRight())):!1}};function It(i,l){return!i||i instanceof rt?i:new rt(i,l)}function Ce(i,l){if(i)for(var p=l?[i,l]:i,x=0,k=p.length;x<k;x++)this.extend(p[x])}Ce.prototype={extend:function(i){var l=this._southWest,p=this._northEast,x,k;if(i instanceof ge)x=i,k=i;else if(i instanceof Ce){if(x=i._southWest,k=i._northEast,!x||!k)return this}else return i?this.extend(ae(i)||pe(i)):this;return!l&&!p?(this._southWest=new ge(x.lat,x.lng),this._northEast=new ge(k.lat,k.lng)):(l.lat=Math.min(x.lat,l.lat),l.lng=Math.min(x.lng,l.lng),p.lat=Math.max(k.lat,p.lat),p.lng=Math.max(k.lng,p.lng)),this},pad:function(i){var l=this._southWest,p=this._northEast,x=Math.abs(l.lat-p.lat)*i,k=Math.abs(l.lng-p.lng)*i;return new Ce(new ge(l.lat-x,l.lng-k),new ge(p.lat+x,p.lng+k))},getCenter:function(){return new ge((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ge(this.getNorth(),this.getWest())},getSouthEast:function(){return new ge(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(i){typeof i[0]=="number"||i instanceof ge||"lat"in i?i=ae(i):i=pe(i);var l=this._southWest,p=this._northEast,x,k;return i instanceof Ce?(x=i.getSouthWest(),k=i.getNorthEast()):x=k=i,x.lat>=l.lat&&k.lat<=p.lat&&x.lng>=l.lng&&k.lng<=p.lng},intersects:function(i){i=pe(i);var l=this._southWest,p=this._northEast,x=i.getSouthWest(),k=i.getNorthEast(),F=k.lat>=l.lat&&x.lat<=p.lat,Q=k.lng>=l.lng&&x.lng<=p.lng;return F&&Q},overlaps:function(i){i=pe(i);var l=this._southWest,p=this._northEast,x=i.getSouthWest(),k=i.getNorthEast(),F=k.lat>l.lat&&x.lat<p.lat,Q=k.lng>l.lng&&x.lng<p.lng;return F&&Q},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i,l){return i?(i=pe(i),this._southWest.equals(i.getSouthWest(),l)&&this._northEast.equals(i.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function pe(i,l){return i instanceof Ce?i:new Ce(i,l)}function ge(i,l,p){if(isNaN(i)||isNaN(l))throw new Error("Invalid LatLng object: ("+i+", "+l+")");this.lat=+i,this.lng=+l,p!==void 0&&(this.alt=+p)}ge.prototype={equals:function(i,l){if(!i)return!1;i=ae(i);var p=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));return p<=(l===void 0?1e-9:l)},toString:function(i){return"LatLng("+B(this.lat,i)+", "+B(this.lng,i)+")"},distanceTo:function(i){return Ve.distance(this,ae(i))},wrap:function(){return Ve.wrapLatLng(this)},toBounds:function(i){var l=180*i/40075017,p=l/Math.cos(Math.PI/180*this.lat);return pe([this.lat-l,this.lng-p],[this.lat+l,this.lng+p])},clone:function(){return new ge(this.lat,this.lng,this.alt)}};function ae(i,l,p){return i instanceof ge?i:St(i)&&typeof i[0]!="object"?i.length===3?new ge(i[0],i[1],i[2]):i.length===2?new ge(i[0],i[1]):null:i==null?i:typeof i=="object"&&"lat"in i?new ge(i.lat,"lng"in i?i.lng:i.lon,i.alt):l===void 0?null:new ge(i,l,p)}var Fe={latLngToPoint:function(i,l){var p=this.projection.project(i),x=this.scale(l);return this.transformation._transform(p,x)},pointToLatLng:function(i,l){var p=this.scale(l),x=this.transformation.untransform(i,p);return this.projection.unproject(x)},project:function(i){return this.projection.project(i)},unproject:function(i){return this.projection.unproject(i)},scale:function(i){return 256*Math.pow(2,i)},zoom:function(i){return Math.log(i/256)/Math.LN2},getProjectedBounds:function(i){if(this.infinite)return null;var l=this.projection.bounds,p=this.scale(i),x=this.transformation.transform(l.min,p),k=this.transformation.transform(l.max,p);return new rt(x,k)},infinite:!1,wrapLatLng:function(i){var l=this.wrapLng?D(i.lng,this.wrapLng,!0):i.lng,p=this.wrapLat?D(i.lat,this.wrapLat,!0):i.lat,x=i.alt;return new ge(p,l,x)},wrapLatLngBounds:function(i){var l=i.getCenter(),p=this.wrapLatLng(l),x=l.lat-p.lat,k=l.lng-p.lng;if(x===0&&k===0)return i;var F=i.getSouthWest(),Q=i.getNorthEast(),gt=new ge(F.lat-x,F.lng-k),bt=new ge(Q.lat-x,Q.lng-k);return new Ce(gt,bt)}},Ve=f({},Fe,{wrapLng:[-180,180],R:6371e3,distance:function(i,l){var p=Math.PI/180,x=i.lat*p,k=l.lat*p,F=Math.sin((l.lat-i.lat)*p/2),Q=Math.sin((l.lng-i.lng)*p/2),gt=F*F+Math.cos(x)*Math.cos(k)*Q*Q,bt=2*Math.atan2(Math.sqrt(gt),Math.sqrt(1-gt));return this.R*bt}}),$e=6378137,Mi={R:$e,MAX_LATITUDE:85.0511287798,project:function(i){var l=Math.PI/180,p=this.MAX_LATITUDE,x=Math.max(Math.min(p,i.lat),-p),k=Math.sin(x*l);return new At(this.R*i.lng*l,this.R*Math.log((1+k)/(1-k))/2)},unproject:function(i){var l=180/Math.PI;return new ge((2*Math.atan(Math.exp(i.y/this.R))-Math.PI/2)*l,i.x*l/this.R)},bounds:(function(){var i=$e*Math.PI;return new rt([-i,-i],[i,i])})()};function en(i,l,p,x){if(St(i)){this._a=i[0],this._b=i[1],this._c=i[2],this._d=i[3];return}this._a=i,this._b=l,this._c=p,this._d=x}en.prototype={transform:function(i,l){return this._transform(i.clone(),l)},_transform:function(i,l){return l=l||1,i.x=l*(this._a*i.x+this._b),i.y=l*(this._c*i.y+this._d),i},untransform:function(i,l){return l=l||1,new At((i.x/l-this._b)/this._a,(i.y/l-this._d)/this._c)}};function vs(i,l,p,x){return new en(i,l,p,x)}var nn=f({},Ve,{code:"EPSG:3857",projection:Mi,transformation:(function(){var i=.5/(Math.PI*Mi.R);return vs(i,.5,-i,.5)})()}),Je=f({},nn,{code:"EPSG:900913"});function _o(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function We(i,l){var p="",x,k,F,Q,gt,bt;for(x=0,F=i.length;x<F;x++){for(gt=i[x],k=0,Q=gt.length;k<Q;k++)bt=gt[k],p+=(k?"L":"M")+bt.x+" "+bt.y;p+=l?me.svg?"z":"x":""}return p||"M0 0"}var jr=document.documentElement.style,Ei="ActiveXObject"in window,Ks=Ei&&!document.addEventListener,bi="msLaunchUri"in navigator&&!("documentMode"in document),ir=Di("webkit"),$i=Di("android"),yo=Di("android 2")||Di("android 3"),si=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),xs=$i&&Di("Google")&&si<537&&!("AudioNode"in window),Ii=!!window.opera,ws=!bi&&Di("chrome"),Ri=Di("gecko")&&!ir&&!Ii&&!Ei,vo=!ws&&Di("safari"),kr=Di("phantom"),Zi="OTransition"in jr,Un=navigator.platform.indexOf("Win")===0,Ur=Ei&&"transition"in jr,Hr="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!yo,Oi="MozPerspective"in jr,Vr=!window.L_DISABLE_3D&&(Ur||Hr||Oi)&&!Zi&&!kr,xn=typeof orientation<"u"||Di("mobile"),Ms=xn&&ir,qi=xn&&Hr,Es=!window.PointerEvent&&window.MSPointerEvent,Se=!!(window.PointerEvent||Es),rn="ontouchstart"in window||!!window.TouchEvent,Ho=!window.L_NO_TOUCH&&(rn||Se),Oa=xn&&Ii,xo=xn&&Ri,Vo=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Pr=(function(){var i=!1;try{var l=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassiveEventSupport",P,l),window.removeEventListener("testPassiveEventSupport",P,l)}catch{}return i})(),Ls=(function(){return!!document.createElement("canvas").getContext})(),Cs=!!(document.createElementNS&&_o("svg").createSVGRect),yi=!!Cs&&(function(){var i=document.createElement("div");return i.innerHTML="<svg/>",(i.firstChild&&i.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),bs=!Cs&&(function(){try{var i=document.createElement("div");i.innerHTML='<v:shape adj="1"/>';var l=i.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}})(),wn=navigator.platform.indexOf("Mac")===0,Wo=navigator.platform.indexOf("Linux")===0;function Di(i){return navigator.userAgent.toLowerCase().indexOf(i)>=0}var me={ie:Ei,ielt9:Ks,edge:bi,webkit:ir,android:$i,android23:yo,androidStock:xs,opera:Ii,chrome:ws,gecko:Ri,safari:vo,phantom:kr,opera12:Zi,win:Un,ie3d:Ur,webkit3d:Hr,gecko3d:Oi,any3d:Vr,mobile:xn,mobileWebkit:Ms,mobileWebkit3d:qi,msPointer:Es,pointer:Se,touch:Ho,touchNative:rn,mobileOpera:Oa,mobileGecko:xo,retina:Vo,passiveEvents:Pr,canvas:Ls,svg:Cs,vml:bs,inlineSvg:yi,mac:wn,linux:Wo},Ss=me.msPointer?"MSPointerDown":"pointerdown",ks=me.msPointer?"MSPointerMove":"pointermove",Wr=me.msPointer?"MSPointerUp":"pointerup",$o=me.msPointer?"MSPointerCancel":"pointercancel",wo={touchstart:Ss,touchmove:ks,touchend:Wr,touchcancel:$o},nr={touchstart:gi,touchmove:Js,touchend:Js,touchcancel:Js},rr={},$r=!1;function Da(i,l,p){return l==="touchstart"&&Mo(),nr[l]?(p=nr[l].bind(this,p),i.addEventListener(wo[l],p,!1),p):(console.warn("wrong event specified:",l),P)}function Zo(i,l,p){if(!wo[l]){console.warn("wrong event specified:",l);return}i.removeEventListener(wo[l],p,!1)}function qo(i){rr[i.pointerId]=i}function Ko(i){rr[i.pointerId]&&(rr[i.pointerId]=i)}function Zr(i){delete rr[i.pointerId]}function Mo(){$r||(document.addEventListener(Ss,qo,!0),document.addEventListener(ks,Ko,!0),document.addEventListener(Wr,Zr,!0),document.addEventListener($o,Zr,!0),$r=!0)}function Js(i,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var p in rr)l.touches.push(rr[p]);l.changedTouches=[l],i(l)}}function gi(i,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&mi(l),Js(i,l)}function Na(i){var l={},p,x;for(x in i)p=i[x],l[x]=p&&p.bind?p.bind(i):p;return i=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var qr=200;function Jo(i,l){i.addEventListener("dblclick",l);var p=0,x;function k(F){if(F.detail!==1){x=F.detail;return}if(!(F.pointerType==="mouse"||F.sourceCapabilities&&!F.sourceCapabilities.firesTouchEvents)){var Q=Ir(F);if(!(Q.some(function(bt){return bt instanceof HTMLLabelElement&&bt.attributes.for})&&!Q.some(function(bt){return bt instanceof HTMLInputElement||bt instanceof HTMLSelectElement}))){var gt=Date.now();gt-p<=qr?(x++,x===2&&l(Na(F))):x=1,p=gt}}}return i.addEventListener("click",k),{dblclick:l,simDblclick:k}}function Ps(i,l){i.removeEventListener("dblclick",l.dblclick),i.removeEventListener("click",l.simDblclick)}var Kr=Jt(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ar=Jt(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),As=Ar==="webkitTransition"||Ar==="OTransition"?Ar+"End":"transitionend";function Mn(i){return typeof i=="string"?document.getElementById(i):i}function sr(i,l){var p=i.style[l]||i.currentStyle&&i.currentStyle[l];if((!p||p==="auto")&&document.defaultView){var x=document.defaultView.getComputedStyle(i,null);p=x?x[l]:null}return p==="auto"?null:p}function Ne(i,l,p){var x=document.createElement(i);return x.className=l||"",p&&p.appendChild(x),x}function ii(i){var l=i.parentNode;l&&l.removeChild(i)}function Jr(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function Br(i){var l=i.parentNode;l&&l.lastChild!==i&&l.appendChild(i)}function En(i){var l=i.parentNode;l&&l.firstChild!==i&&l.insertBefore(i,l.firstChild)}function V(i,l){if(i.classList!==void 0)return i.classList.contains(l);var p=jt(i);return p.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(p)}function dt(i,l){if(i.classList!==void 0)for(var p=J(l),x=0,k=p.length;x<k;x++)i.classList.add(p[x]);else if(!V(i,l)){var F=jt(i);Kt(i,(F?F+" ":"")+l)}}function Pt(i,l){i.classList!==void 0?i.classList.remove(l):Kt(i,W((" "+jt(i)+" ").replace(" "+l+" "," ")))}function Kt(i,l){i.className.baseVal===void 0?i.className=l:i.className.baseVal=l}function jt(i){return i.correspondingElement&&(i=i.correspondingElement),i.className.baseVal===void 0?i.className:i.className.baseVal}function Ot(i,l){"opacity"in i.style?i.style.opacity=l:"filter"in i.style&&Yt(i,l)}function Yt(i,l){var p=!1,x="DXImageTransform.Microsoft.Alpha";try{p=i.filters.item(x)}catch{if(l===1)return}l=Math.round(l*100),p?(p.Enabled=l!==100,p.Opacity=l):i.style.filter+=" progid:"+x+"(opacity="+l+")"}function Jt(i){for(var l=document.documentElement.style,p=0;p<i.length;p++)if(i[p]in l)return i[p];return!1}function Ht(i,l,p){var x=l||new At(0,0);i.style[Kr]=(me.ie3d?"translate("+x.x+"px,"+x.y+"px)":"translate3d("+x.x+"px,"+x.y+"px,0)")+(p?" scale("+p+")":"")}function Zt(i,l){i._leaflet_pos=l,me.any3d?Ht(i,l):(i.style.left=l.x+"px",i.style.top=l.y+"px")}function ye(i){return i._leaflet_pos||new At(0,0)}var ie,Be,Te;if("onselectstart"in document)ie=function(){Pe(window,"selectstart",mi)},Be=function(){ei(window,"selectstart",mi)};else{var Ue=Jt(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ie=function(){if(Ue){var i=document.documentElement.style;Te=i[Ue],i[Ue]="none"}},Be=function(){Ue&&(document.documentElement.style[Ue]=Te,Te=void 0)}}function oi(){Pe(window,"dragstart",mi)}function Qe(){ei(window,"dragstart",mi)}var dn,Xr;function we(i){for(;i.tabIndex===-1;)i=i.parentNode;i.style&&(be(),dn=i,Xr=i.style.outlineStyle,i.style.outlineStyle="none",Pe(window,"keydown",be))}function be(){dn&&(dn.style.outlineStyle=Xr,dn=void 0,Xr=void 0,ei(window,"keydown",be))}function fi(i){do i=i.parentNode;while((!i.offsetWidth||!i.offsetHeight)&&i!==document.body);return i}function wi(i){var l=i.getBoundingClientRect();return{x:l.width/i.offsetWidth||1,y:l.height/i.offsetHeight||1,boundingClientRect:l}}var Si={__proto__:null,TRANSFORM:Kr,TRANSITION:Ar,TRANSITION_END:As,get:Mn,getStyle:sr,create:Ne,remove:ii,empty:Jr,toFront:Br,toBack:En,hasClass:V,addClass:dt,removeClass:Pt,setClass:Kt,getClass:jt,setOpacity:Ot,testProp:Jt,setTransform:Ht,setPosition:Zt,getPosition:ye,get disableTextSelection(){return ie},get enableTextSelection(){return Be},disableImageDrag:oi,enableImageDrag:Qe,preventOutline:we,restoreOutline:be,getSizedParentNode:fi,getScale:wi};function Pe(i,l,p,x){if(l&&typeof l=="object")for(var k in l)Xs(i,k,l[k],p);else{l=J(l);for(var F=0,Q=l.length;F<Q;F++)Xs(i,l[F],p,x)}return this}var ti="_leaflet_events";function ei(i,l,p,x){if(arguments.length===1)sn(i),delete i[ti];else if(l&&typeof l=="object")for(var k in l)Hn(i,k,l[k],p);else if(l=J(l),arguments.length===2)sn(i,function(gt){return Tt(l,gt)!==-1});else for(var F=0,Q=l.length;F<Q;F++)Hn(i,l[F],p,x);return this}function sn(i,l){for(var p in i[ti]){var x=p.split(/\d/)[0];(!l||l(x))&&Hn(i,x,null,null,p)}}var Ln={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Xs(i,l,p,x){var k=l+E(p)+(x?"_"+E(x):"");if(i[ti]&&i[ti][k])return this;var F=function(gt){return p.call(x||i,gt||window.event)},Q=F;!me.touchNative&&me.pointer&&l.indexOf("touch")===0?F=Da(i,l,F):me.touch&&l==="dblclick"?F=Jo(i,F):"addEventListener"in i?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?i.addEventListener(Ln[l]||l,F,me.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(F=function(gt){gt=gt||window.event,Qr(i,gt)&&Q(gt)},i.addEventListener(Ln[l],F,!1)):i.addEventListener(l,Q,!1):i.attachEvent("on"+l,F),i[ti]=i[ti]||{},i[ti][k]=F}function Hn(i,l,p,x,k){k=k||l+E(p)+(x?"_"+E(x):"");var F=i[ti]&&i[ti][k];if(!F)return this;!me.touchNative&&me.pointer&&l.indexOf("touch")===0?Zo(i,l,F):me.touch&&l==="dblclick"?Ps(i,F):"removeEventListener"in i?i.removeEventListener(Ln[l]||l,F,!1):i.detachEvent("on"+l,F),i[ti][k]=null}function Tn(i){return i.stopPropagation?i.stopPropagation():i.originalEvent?i.originalEvent._stopped=!0:i.cancelBubble=!0,this}function Yr(i){return Xs(i,"wheel",Tn),this}function Tr(i){return Pe(i,"mousedown touchstart dblclick contextmenu",Tn),i._leaflet_disable_click=!0,this}function mi(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this}function Cn(i){return mi(i),Tn(i),this}function Ir(i){if(i.composedPath)return i.composedPath();for(var l=[],p=i.target;p;)l.push(p),p=p.parentNode;return l}function Bs(i,l){if(!l)return new At(i.clientX,i.clientY);var p=wi(l),x=p.boundingClientRect;return new At((i.clientX-x.left)/p.x-l.clientLeft,(i.clientY-x.top)/p.y-l.clientTop)}var Eo=me.linux&&me.chrome?window.devicePixelRatio:me.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Lo(i){return me.edge?i.wheelDeltaY/2:i.deltaY&&i.deltaMode===0?-i.deltaY/Eo:i.deltaY&&i.deltaMode===1?-i.deltaY*20:i.deltaY&&i.deltaMode===2?-i.deltaY*60:i.deltaX||i.deltaZ?0:i.wheelDelta?(i.wheelDeltaY||i.wheelDelta)/2:i.detail&&Math.abs(i.detail)<32765?-i.detail*20:i.detail?i.detail/-32765*60:0}function Qr(i,l){var p=l.relatedTarget;if(!p)return!0;try{for(;p&&p!==i;)p=p.parentNode}catch{return!1}return p!==i}var Rr={__proto__:null,on:Pe,off:ei,stopPropagation:Tn,disableScrollPropagation:Yr,disableClickPropagation:Tr,preventDefault:mi,stop:Cn,getPropagationPath:Ir,getMousePosition:Bs,getWheelDelta:Lo,isExternalTarget:Qr,addListener:Pe,removeListener:ei},Xo=ce.extend({run:function(i,l,p,x){this.stop(),this._el=i,this._inProgress=!0,this._duration=p||.25,this._easeOutPower=1/Math.max(x||.5,.2),this._startPos=ye(i),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=yt(this._animate,this),this._step()},_step:function(i){var l=+new Date-this._startTime,p=this._duration*1e3;l<p?this._runFrame(this._easeOut(l/p),i):(this._runFrame(1),this._complete())},_runFrame:function(i,l){var p=this._startPos.add(this._offset.multiplyBy(i));l&&p._round(),Zt(this._el,p),this.fire("step")},_complete:function(){Ct(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}}),qe=ce.extend({options:{crs:nn,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(i,l){l=Z(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(i),this._initLayout(),this._onResize=y(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(ae(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ar&&me.any3d&&!me.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Pe(this._proxy,As,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(i,l,p){if(l=l===void 0?this._zoom:this._limitZoom(l),i=this._limitCenter(ae(i),l,this.options.maxBounds),p=p||{},this._stop(),this._loaded&&!p.reset&&p!==!0){p.animate!==void 0&&(p.zoom=f({animate:p.animate},p.zoom),p.pan=f({animate:p.animate,duration:p.duration},p.pan));var x=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,l,p.zoom):this._tryAnimatedPan(i,p.pan);if(x)return clearTimeout(this._sizeTimer),this}return this._resetView(i,l,p.pan&&p.pan.noMoveStart),this},setZoom:function(i,l){return this._loaded?this.setView(this.getCenter(),i,{zoom:l}):(this._zoom=i,this)},zoomIn:function(i,l){return i=i||(me.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+i,l)},zoomOut:function(i,l){return i=i||(me.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-i,l)},setZoomAround:function(i,l,p){var x=this.getZoomScale(l),k=this.getSize().divideBy(2),F=i instanceof At?i:this.latLngToContainerPoint(i),Q=F.subtract(k).multiplyBy(1-1/x),gt=this.containerPointToLatLng(k.add(Q));return this.setView(gt,l,{zoom:p})},_getBoundsCenterZoom:function(i,l){l=l||{},i=i.getBounds?i.getBounds():pe(i);var p=Rt(l.paddingTopLeft||l.padding||[0,0]),x=Rt(l.paddingBottomRight||l.padding||[0,0]),k=this.getBoundsZoom(i,!1,p.add(x));if(k=typeof l.maxZoom=="number"?Math.min(l.maxZoom,k):k,k===1/0)return{center:i.getCenter(),zoom:k};var F=x.subtract(p).divideBy(2),Q=this.project(i.getSouthWest(),k),gt=this.project(i.getNorthEast(),k),bt=this.unproject(Q.add(gt).divideBy(2).add(F),k);return{center:bt,zoom:k}},fitBounds:function(i,l){if(i=pe(i),!i.isValid())throw new Error("Bounds are not valid.");var p=this._getBoundsCenterZoom(i,l);return this.setView(p.center,p.zoom,l)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,l){return this.setView(i,this._zoom,{pan:l})},panBy:function(i,l){if(i=Rt(i).round(),l=l||{},!i.x&&!i.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(i))return this._resetView(this.unproject(this.project(this.getCenter()).add(i)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Xo,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){dt(this._mapPane,"leaflet-pan-anim");var p=this._getMapPanePos().subtract(i).round();this._panAnim.run(this._mapPane,p,l.duration||.25,l.easeLinearity)}else this._rawPanBy(i),this.fire("move").fire("moveend");return this},flyTo:function(i,l,p){if(p=p||{},p.animate===!1||!me.any3d)return this.setView(i,l,p);this._stop();var x=this.project(this.getCenter()),k=this.project(i),F=this.getSize(),Q=this._zoom;i=ae(i),l=l===void 0?Q:l;var gt=Math.max(F.x,F.y),bt=gt*this.getZoomScale(Q,l),Ft=k.distanceTo(x)||1,re=1.42,Ae=re*re;function He(ni){var Ns=ni?-1:1,Zl=ni?bt:gt,_r=bt*bt-gt*gt+Ns*Ae*Ae*Ft*Ft,Fs=2*Zl*Ae*Ft,yr=_r/Fs,as=Math.sqrt(yr*yr+1)-yr,fa=as<1e-9?-18:Math.log(as);return fa}function ji(ni){return(Math.exp(ni)-Math.exp(-ni))/2}function Pi(ni){return(Math.exp(ni)+Math.exp(-ni))/2}function an(ni){return ji(ni)/Pi(ni)}var vi=He(0);function pr(ni){return gt*(Pi(vi)/Pi(vi+re*ni))}function Oo(ni){return gt*(Pi(vi)*an(vi+re*ni)-ji(vi))/Ae}function Kn(ni){return 1-Math.pow(1-ni,1.5)}var Ya=Date.now(),gr=(He(1)-vi)/re,mr=p.duration?1e3*p.duration:1e3*gr*.8;function lo(){var ni=(Date.now()-Ya)/mr,Ns=Kn(ni)*gr;ni<=1?(this._flyToFrame=yt(lo,this),this._move(this.unproject(x.add(k.subtract(x).multiplyBy(Oo(Ns)/Ft)),Q),this.getScaleZoom(gt/pr(Ns),Q),{flyTo:!0})):this._move(i,l)._moveEnd(!0)}return this._moveStart(!0,p.noMoveStart),lo.call(this),this},flyToBounds:function(i,l){var p=this._getBoundsCenterZoom(i,l);return this.flyTo(p.center,p.zoom,l)},setMaxBounds:function(i){return i=pe(i),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),i.isValid()?(this.options.maxBounds=i,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(i){var l=this.options.minZoom;return this.options.minZoom=i,this._loaded&&l!==i&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(i):this},setMaxZoom:function(i){var l=this.options.maxZoom;return this.options.maxZoom=i,this._loaded&&l!==i&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(i):this},panInsideBounds:function(i,l){this._enforcingBounds=!0;var p=this.getCenter(),x=this._limitCenter(p,this._zoom,pe(i));return p.equals(x)||this.panTo(x,l),this._enforcingBounds=!1,this},panInside:function(i,l){l=l||{};var p=Rt(l.paddingTopLeft||l.padding||[0,0]),x=Rt(l.paddingBottomRight||l.padding||[0,0]),k=this.project(this.getCenter()),F=this.project(i),Q=this.getPixelBounds(),gt=It([Q.min.add(p),Q.max.subtract(x)]),bt=gt.getSize();if(!gt.contains(F)){this._enforcingBounds=!0;var Ft=F.subtract(gt.getCenter()),re=gt.extend(F).getSize().subtract(bt);k.x+=Ft.x<0?-re.x:re.x,k.y+=Ft.y<0?-re.y:re.y,this.panTo(this.unproject(k),l),this._enforcingBounds=!1}return this},invalidateSize:function(i){if(!this._loaded)return this;i=f({animate:!1,pan:!0},i===!0?{animate:!0}:i);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var p=this.getSize(),x=l.divideBy(2).round(),k=p.divideBy(2).round(),F=x.subtract(k);return!F.x&&!F.y?this:(i.animate&&i.pan?this.panBy(F):(i.pan&&this._rawPanBy(F),this.fire("move"),i.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(y(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:p}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(i){if(i=this._locateOptions=f({timeout:1e4,watch:!1},i),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=y(this._handleGeolocationResponse,this),p=y(this._handleGeolocationError,this);return i.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,p,i):navigator.geolocation.getCurrentPosition(l,p,i),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(i){if(this._container._leaflet_id){var l=i.code,p=i.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+p+"."})}},_handleGeolocationResponse:function(i){if(this._container._leaflet_id){var l=i.coords.latitude,p=i.coords.longitude,x=new ge(l,p),k=x.toBounds(i.coords.accuracy*2),F=this._locateOptions;if(F.setView){var Q=this.getBoundsZoom(k);this.setView(x,F.maxZoom?Math.min(Q,F.maxZoom):Q)}var gt={latlng:x,bounds:k,timestamp:i.timestamp};for(var bt in i.coords)typeof i.coords[bt]=="number"&&(gt[bt]=i.coords[bt]);this.fire("locationfound",gt)}},addHandler:function(i,l){if(!l)return this;var p=this[i]=new l(this);return this._handlers.push(p),this.options[i]&&p.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),ii(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Ct(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)ii(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(i,l){var p="leaflet-pane"+(i?" leaflet-"+i.replace("Pane","")+"-pane":""),x=Ne("div",p,l||this._mapPane);return i&&(this._panes[i]=x),x},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var i=this.getPixelBounds(),l=this.unproject(i.getBottomLeft()),p=this.unproject(i.getTopRight());return new Ce(l,p)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(i,l,p){i=pe(i),p=Rt(p||[0,0]);var x=this.getZoom()||0,k=this.getMinZoom(),F=this.getMaxZoom(),Q=i.getNorthWest(),gt=i.getSouthEast(),bt=this.getSize().subtract(p),Ft=It(this.project(gt,x),this.project(Q,x)).getSize(),re=me.any3d?this.options.zoomSnap:1,Ae=bt.x/Ft.x,He=bt.y/Ft.y,ji=l?Math.max(Ae,He):Math.min(Ae,He);return x=this.getScaleZoom(ji,x),re&&(x=Math.round(x/(re/100))*(re/100),x=l?Math.ceil(x/re)*re:Math.floor(x/re)*re),Math.max(k,Math.min(F,x))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new At(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(i,l){var p=this._getTopLeftPoint(i,l);return new rt(p,p.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(i){return this.options.crs.getProjectedBounds(i===void 0?this.getZoom():i)},getPane:function(i){return typeof i=="string"?this._panes[i]:i},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(i,l){var p=this.options.crs;return l=l===void 0?this._zoom:l,p.scale(i)/p.scale(l)},getScaleZoom:function(i,l){var p=this.options.crs;l=l===void 0?this._zoom:l;var x=p.zoom(i*p.scale(l));return isNaN(x)?1/0:x},project:function(i,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(ae(i),l)},unproject:function(i,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(Rt(i),l)},layerPointToLatLng:function(i){var l=Rt(i).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(i){var l=this.project(ae(i))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(i){return this.options.crs.wrapLatLng(ae(i))},wrapLatLngBounds:function(i){return this.options.crs.wrapLatLngBounds(pe(i))},distance:function(i,l){return this.options.crs.distance(ae(i),ae(l))},containerPointToLayerPoint:function(i){return Rt(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return Rt(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var l=this.containerPointToLayerPoint(Rt(i));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ae(i)))},mouseEventToContainerPoint:function(i){return Bs(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(i){var l=this._container=Mn(i);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Pe(l,"scroll",this._onScroll,this),this._containerId=E(l)},_initLayout:function(){var i=this._container;this._fadeAnimated=this.options.fadeAnimation&&me.any3d,dt(i,"leaflet-container"+(me.touch?" leaflet-touch":"")+(me.retina?" leaflet-retina":"")+(me.ielt9?" leaflet-oldie":"")+(me.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=sr(i,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var i=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Zt(this._mapPane,new At(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(dt(i.markerPane,"leaflet-zoom-hide"),dt(i.shadowPane,"leaflet-zoom-hide"))},_resetView:function(i,l,p){Zt(this._mapPane,new At(0,0));var x=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var k=this._zoom!==l;this._moveStart(k,p)._move(i,l)._moveEnd(k),this.fire("viewreset"),x&&this.fire("load")},_moveStart:function(i,l){return i&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(i,l,p,x){l===void 0&&(l=this._zoom);var k=this._zoom!==l;return this._zoom=l,this._lastCenter=i,this._pixelOrigin=this._getNewPixelOrigin(i),x?p&&p.pinch&&this.fire("zoom",p):((k||p&&p.pinch)&&this.fire("zoom",p),this.fire("move",p)),this},_moveEnd:function(i){return i&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Ct(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(i){Zt(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(i){this._targets={},this._targets[E(this._container)]=this;var l=i?ei:Pe;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),me.any3d&&this.options.transform3DLimit&&(i?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Ct(this._resizeRequest),this._resizeRequest=yt(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var i=this._getMapPanePos();Math.max(Math.abs(i.x),Math.abs(i.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(i,l){for(var p=[],x,k=l==="mouseout"||l==="mouseover",F=i.target||i.srcElement,Q=!1;F;){if(x=this._targets[E(F)],x&&(l==="click"||l==="preclick")&&this._draggableMoved(x)){Q=!0;break}if(x&&x.listens(l,!0)&&(k&&!Qr(F,i)||(p.push(x),k))||F===this._container)break;F=F.parentNode}return!p.length&&!Q&&!k&&this.listens(l,!0)&&(p=[this]),p},_isClickDisabled:function(i){for(;i&&i!==this._container;){if(i._leaflet_disable_click)return!0;i=i.parentNode}},_handleDOMEvent:function(i){var l=i.target||i.srcElement;if(!(!this._loaded||l._leaflet_disable_events||i.type==="click"&&this._isClickDisabled(l))){var p=i.type;p==="mousedown"&&we(l),this._fireDOMEvent(i,p)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(i,l,p){if(i.type==="click"){var x=f({},i);x.type="preclick",this._fireDOMEvent(x,x.type,p)}var k=this._findEventTargets(i,l);if(p){for(var F=[],Q=0;Q<p.length;Q++)p[Q].listens(l,!0)&&F.push(p[Q]);k=F.concat(k)}if(k.length){l==="contextmenu"&&mi(i);var gt=k[0],bt={originalEvent:i};if(i.type!=="keypress"&&i.type!=="keydown"&&i.type!=="keyup"){var Ft=gt.getLatLng&&(!gt._radius||gt._radius<=10);bt.containerPoint=Ft?this.latLngToContainerPoint(gt.getLatLng()):this.mouseEventToContainerPoint(i),bt.layerPoint=this.containerPointToLayerPoint(bt.containerPoint),bt.latlng=Ft?gt.getLatLng():this.layerPointToLatLng(bt.layerPoint)}for(Q=0;Q<k.length;Q++)if(k[Q].fire(l,bt,!0),bt.originalEvent._stopped||k[Q].options.bubblingMouseEvents===!1&&Tt(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(i){return i=i.dragging&&i.dragging.enabled()?i:this,i.dragging&&i.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var i=0,l=this._handlers.length;i<l;i++)this._handlers[i].disable()},whenReady:function(i,l){return this._loaded?i.call(l||this,{target:this}):this.on("load",i,l),this},_getMapPanePos:function(){return ye(this._mapPane)||new At(0,0)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(i,l){var p=i&&l!==void 0?this._getNewPixelOrigin(i,l):this.getPixelOrigin();return p.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(i,l){var p=this.getSize()._divideBy(2);return this.project(i,l)._subtract(p)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(i,l,p){var x=this._getNewPixelOrigin(p,l);return this.project(i,l)._subtract(x)},_latLngBoundsToNewLayerBounds:function(i,l,p){var x=this._getNewPixelOrigin(p,l);return It([this.project(i.getSouthWest(),l)._subtract(x),this.project(i.getNorthWest(),l)._subtract(x),this.project(i.getSouthEast(),l)._subtract(x),this.project(i.getNorthEast(),l)._subtract(x)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(i,l,p){if(!p)return i;var x=this.project(i,l),k=this.getSize().divideBy(2),F=new rt(x.subtract(k),x.add(k)),Q=this._getBoundsOffset(F,p,l);return Math.abs(Q.x)<=1&&Math.abs(Q.y)<=1?i:this.unproject(x.add(Q),l)},_limitOffset:function(i,l){if(!l)return i;var p=this.getPixelBounds(),x=new rt(p.min.add(i),p.max.add(i));return i.add(this._getBoundsOffset(x,l))},_getBoundsOffset:function(i,l,p){var x=It(this.project(l.getNorthEast(),p),this.project(l.getSouthWest(),p)),k=x.min.subtract(i.min),F=x.max.subtract(i.max),Q=this._rebound(k.x,-F.x),gt=this._rebound(k.y,-F.y);return new At(Q,gt)},_rebound:function(i,l){return i+l>0?Math.round(i-l)/2:Math.max(0,Math.ceil(i))-Math.max(0,Math.floor(l))},_limitZoom:function(i){var l=this.getMinZoom(),p=this.getMaxZoom(),x=me.any3d?this.options.zoomSnap:1;return x&&(i=Math.round(i/x)*x),Math.max(l,Math.min(p,i))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Pt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(i,l){var p=this._getCenterOffset(i)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(p)?!1:(this.panBy(p,l),!0)},_createAnimProxy:function(){var i=this._proxy=Ne("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(i),this.on("zoomanim",function(l){var p=Kr,x=this._proxy.style[p];Ht(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),x===this._proxy.style[p]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ii(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var i=this.getCenter(),l=this.getZoom();Ht(this._proxy,this.project(i,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,l,p){if(this._animatingZoom)return!0;if(p=p||{},!this._zoomAnimated||p.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var x=this.getZoomScale(l),k=this._getCenterOffset(i)._divideBy(1-1/x);return p.animate!==!0&&!this.getSize().contains(k)?!1:(yt(function(){this._moveStart(!0,p.noMoveStart||!1)._animateZoom(i,l,!0)},this),!0)},_animateZoom:function(i,l,p,x){this._mapPane&&(p&&(this._animatingZoom=!0,this._animateToCenter=i,this._animateToZoom=l,dt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:i,zoom:l,noUpdate:x}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(y(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Pt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Or(i,l){return new qe(i,l)}var De=Le.extend({options:{position:"topright"},initialize:function(i){Z(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var l=this._map;return l&&l.removeControl(this),this.options.position=i,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(i){this.remove(),this._map=i;var l=this._container=this.onAdd(i),p=this.getPosition(),x=i._controlCorners[p];return dt(l,"leaflet-control"),p.indexOf("bottom")!==-1?x.insertBefore(l,x.firstChild):x.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ii(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(i){this._map&&i&&i.screenX>0&&i.screenY>0&&this._map.getContainer().focus()}}),or=function(i){return new De(i)};qe.include({addControl:function(i){return i.addTo(this),this},removeControl:function(i){return i.remove(),this},_initControlPos:function(){var i=this._controlCorners={},l="leaflet-",p=this._controlContainer=Ne("div",l+"control-container",this._container);function x(k,F){var Q=l+k+" "+l+F;i[k+F]=Ne("div",Q,p)}x("top","left"),x("top","right"),x("bottom","left"),x("bottom","right")},_clearControlPos:function(){for(var i in this._controlCorners)ii(this._controlCorners[i]);ii(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ys=De.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(i,l,p,x){return p<x?-1:x<p?1:0}},initialize:function(i,l,p){Z(this,p),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var x in i)this._addLayer(i[x],x);for(x in l)this._addLayer(l[x],x,!0)},onAdd:function(i){this._initLayout(),this._update(),this._map=i,i.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(i){return De.prototype.addTo.call(this,i),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(i,l){return this._addLayer(i,l),this._map?this._update():this},addOverlay:function(i,l){return this._addLayer(i,l,!0),this._map?this._update():this},removeLayer:function(i){i.off("add remove",this._onLayerChange,this);var l=this._getLayer(E(i));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){dt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var i=this._map.getSize().y-(this._container.offsetTop+50);return i<this._section.clientHeight?(dt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=i+"px"):Pt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Pt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var i="leaflet-control-layers",l=this._container=Ne("div",i),p=this.options.collapsed;l.setAttribute("aria-haspopup",!0),Tr(l),Yr(l);var x=this._section=Ne("section",i+"-list");p&&(this._map.on("click",this.collapse,this),Pe(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var k=this._layersLink=Ne("a",i+"-toggle",l);k.href="#",k.title="Layers",k.setAttribute("role","button"),Pe(k,{keydown:function(F){F.keyCode===13&&this._expandSafely()},click:function(F){mi(F),this._expandSafely()}},this),p||this.expand(),this._baseLayersList=Ne("div",i+"-base",x),this._separator=Ne("div",i+"-separator",x),this._overlaysList=Ne("div",i+"-overlays",x),l.appendChild(x)},_getLayer:function(i){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&E(this._layers[l].layer)===i)return this._layers[l]},_addLayer:function(i,l,p){this._map&&i.on("add remove",this._onLayerChange,this),this._layers.push({layer:i,name:l,overlay:p}),this.options.sortLayers&&this._layers.sort(y(function(x,k){return this.options.sortFunction(x.layer,k.layer,x.name,k.name)},this)),this.options.autoZIndex&&i.setZIndex&&(this._lastZIndex++,i.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Jr(this._baseLayersList),Jr(this._overlaysList),this._layerControlInputs=[];var i,l,p,x,k=0;for(p=0;p<this._layers.length;p++)x=this._layers[p],this._addItem(x),l=l||x.overlay,i=i||!x.overlay,k+=x.overlay?0:1;return this.options.hideSingleBase&&(i=i&&k>1,this._baseLayersList.style.display=i?"":"none"),this._separator.style.display=l&&i?"":"none",this},_onLayerChange:function(i){this._handlingClick||this._update();var l=this._getLayer(E(i.target)),p=l.overlay?i.type==="add"?"overlayadd":"overlayremove":i.type==="add"?"baselayerchange":null;p&&this._map.fire(p,l)},_createRadioElement:function(i,l){var p='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"'+(l?' checked="checked"':"")+"/>",x=document.createElement("div");return x.innerHTML=p,x.firstChild},_addItem:function(i){var l=document.createElement("label"),p=this._map.hasLayer(i.layer),x;i.overlay?(x=document.createElement("input"),x.type="checkbox",x.className="leaflet-control-layers-selector",x.defaultChecked=p):x=this._createRadioElement("leaflet-base-layers_"+E(this),p),this._layerControlInputs.push(x),x.layerId=E(i.layer),Pe(x,"click",this._onInputClick,this);var k=document.createElement("span");k.innerHTML=" "+i.name;var F=document.createElement("span");l.appendChild(F),F.appendChild(x),F.appendChild(k);var Q=i.overlay?this._overlaysList:this._baseLayersList;return Q.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var i=this._layerControlInputs,l,p,x=[],k=[];this._handlingClick=!0;for(var F=i.length-1;F>=0;F--)l=i[F],p=this._getLayer(l.layerId).layer,l.checked?x.push(p):l.checked||k.push(p);for(F=0;F<k.length;F++)this._map.hasLayer(k[F])&&this._map.removeLayer(k[F]);for(F=0;F<x.length;F++)this._map.hasLayer(x[F])||this._map.addLayer(x[F]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var i=this._layerControlInputs,l,p,x=this._map.getZoom(),k=i.length-1;k>=0;k--)l=i[k],p=this._getLayer(l.layerId).layer,l.disabled=p.options.minZoom!==void 0&&x<p.options.minZoom||p.options.maxZoom!==void 0&&x>p.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var i=this._section;this._preventClick=!0,Pe(i,"click",mi),this.expand();var l=this;setTimeout(function(){ei(i,"click",mi),l._preventClick=!1})}}),Yo=function(i,l,p){return new Ys(i,l,p)},Ts=De.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(i){var l="leaflet-control-zoom",p=Ne("div",l+" leaflet-bar"),x=this.options;return this._zoomInButton=this._createButton(x.zoomInText,x.zoomInTitle,l+"-in",p,this._zoomIn),this._zoomOutButton=this._createButton(x.zoomOutText,x.zoomOutTitle,l+"-out",p,this._zoomOut),this._updateDisabled(),i.on("zoomend zoomlevelschange",this._updateDisabled,this),p},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(i){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(i.shiftKey?3:1))},_zoomOut:function(i){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(i.shiftKey?3:1))},_createButton:function(i,l,p,x,k){var F=Ne("a",p,x);return F.innerHTML=i,F.href="#",F.title=l,F.setAttribute("role","button"),F.setAttribute("aria-label",l),Tr(F),Pe(F,"click",Cn),Pe(F,"click",k,this),Pe(F,"click",this._refocusOnMap,this),F},_updateDisabled:function(){var i=this._map,l="leaflet-disabled";Pt(this._zoomInButton,l),Pt(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||i._zoom===i.getMinZoom())&&(dt(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||i._zoom===i.getMaxZoom())&&(dt(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});qe.mergeOptions({zoomControl:!0}),qe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ts,this.addControl(this.zoomControl))});var ll=function(i){return new Ts(i)},Ki=De.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(i){var l="leaflet-control-scale",p=Ne("div",l),x=this.options;return this._addScales(x,l+"-line",p),i.on(x.updateWhenIdle?"moveend":"move",this._update,this),i.whenReady(this._update,this),p},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(i,l,p){i.metric&&(this._mScale=Ne("div",l,p)),i.imperial&&(this._iScale=Ne("div",l,p))},_update:function(){var i=this._map,l=i.getSize().y/2,p=i.distance(i.containerPointToLatLng([0,l]),i.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(p)},_updateScales:function(i){this.options.metric&&i&&this._updateMetric(i),this.options.imperial&&i&&this._updateImperial(i)},_updateMetric:function(i){var l=this._getRoundNum(i),p=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,p,l/i)},_updateImperial:function(i){var l=i*3.2808399,p,x,k;l>5280?(p=l/5280,x=this._getRoundNum(p),this._updateScale(this._iScale,x+" mi",x/p)):(k=this._getRoundNum(l),this._updateScale(this._iScale,k+" ft",k/l))},_updateScale:function(i,l,p){i.style.width=Math.round(this.options.maxWidth*p)+"px",i.innerHTML=l},_getRoundNum:function(i){var l=Math.pow(10,(Math.floor(i)+"").length-1),p=i/l;return p=p>=10?10:p>=5?5:p>=3?3:p>=2?2:1,l*p}}),Dr=function(i){return new Ki(i)},Fa='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',pn=De.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(me.inlineSvg?Fa+" ":"")+"Leaflet</a>"},initialize:function(i){Z(this,i),this._attributions={}},onAdd:function(i){i.attributionControl=this,this._container=Ne("div","leaflet-control-attribution"),Tr(this._container);for(var l in i._layers)i._layers[l].getAttribution&&this.addAttribution(i._layers[l].getAttribution());return this._update(),i.on("layeradd",this._addAttribution,this),this._container},onRemove:function(i){i.off("layeradd",this._addAttribution,this)},_addAttribution:function(i){i.layer.getAttribution&&(this.addAttribution(i.layer.getAttribution()),i.layer.once("remove",function(){this.removeAttribution(i.layer.getAttribution())},this))},setPrefix:function(i){return this.options.prefix=i,this._update(),this},addAttribution:function(i){return i?(this._attributions[i]||(this._attributions[i]=0),this._attributions[i]++,this._update(),this):this},removeAttribution:function(i){return i?(this._attributions[i]&&(this._attributions[i]--,this._update()),this):this},_update:function(){if(this._map){var i=[];for(var l in this._attributions)this._attributions[l]&&i.push(l);var p=[];this.options.prefix&&p.push(this.options.prefix),i.length&&p.push(i.join(", ")),this._container.innerHTML=p.join(' <span aria-hidden="true">|</span> ')}}});qe.mergeOptions({attributionControl:!0}),qe.addInitHook(function(){this.options.attributionControl&&new pn().addTo(this)});var ul=function(i){return new pn(i)};De.Layers=Ys,De.Zoom=Ts,De.Scale=Ki,De.Attribution=pn,or.layers=Yo,or.zoom=ll,or.scale=Dr,or.attribution=ul;var Ni=Le.extend({initialize:function(i){this._map=i},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ni.addTo=function(i,l){return i.addHandler(l,this),this};var Ga={Events:de},Qs=me.touch?"touchstart mousedown":"mousedown",Vn=ce.extend({options:{clickTolerance:3},initialize:function(i,l,p,x){Z(this,x),this._element=i,this._dragStartTarget=l||i,this._preventOutline=p},enable:function(){this._enabled||(Pe(this._dragStartTarget,Qs,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Vn._dragging===this&&this.finishDrag(!0),ei(this._dragStartTarget,Qs,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(i){if(this._enabled&&(this._moved=!1,!V(this._element,"leaflet-zoom-anim"))){if(i.touches&&i.touches.length!==1){Vn._dragging===this&&this.finishDrag();return}if(!(Vn._dragging||i.shiftKey||i.which!==1&&i.button!==1&&!i.touches)&&(Vn._dragging=this,this._preventOutline&&we(this._element),oi(),ie(),!this._moving)){this.fire("down");var l=i.touches?i.touches[0]:i,p=fi(this._element);this._startPoint=new At(l.clientX,l.clientY),this._startPos=ye(this._element),this._parentScale=wi(p);var x=i.type==="mousedown";Pe(document,x?"mousemove":"touchmove",this._onMove,this),Pe(document,x?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(i){if(this._enabled){if(i.touches&&i.touches.length>1){this._moved=!0;return}var l=i.touches&&i.touches.length===1?i.touches[0]:i,p=new At(l.clientX,l.clientY)._subtract(this._startPoint);!p.x&&!p.y||Math.abs(p.x)+Math.abs(p.y)<this.options.clickTolerance||(p.x/=this._parentScale.x,p.y/=this._parentScale.y,mi(i),this._moved||(this.fire("dragstart"),this._moved=!0,dt(document.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),dt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(p),this._moving=!0,this._lastEvent=i,this._updatePosition())}},_updatePosition:function(){var i={originalEvent:this._lastEvent};this.fire("predrag",i),Zt(this._element,this._newPos),this.fire("drag",i)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(i){Pt(document.body,"leaflet-dragging"),this._lastTarget&&(Pt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ei(document,"mousemove touchmove",this._onMove,this),ei(document,"mouseup touchend touchcancel",this._onUp,this),Qe(),Be();var l=this._moved&&this._moving;this._moving=!1,Vn._dragging=!1,l&&this.fire("dragend",{noInertia:i,distance:this._newPos.distanceTo(this._startPos)})}});function za(i,l,p){var x,k=[1,4,2,8],F,Q,gt,bt,Ft,re,Ae,He;for(F=0,re=i.length;F<re;F++)i[F]._code=gn(i[F],l);for(gt=0;gt<4;gt++){for(Ae=k[gt],x=[],F=0,re=i.length,Q=re-1;F<re;Q=F++)bt=i[F],Ft=i[Q],bt._code&Ae?Ft._code&Ae||(He=es(Ft,bt,Ae,l,p),He._code=gn(He,l),x.push(He)):(Ft._code&Ae&&(He=es(Ft,bt,Ae,l,p),He._code=gn(He,l),x.push(He)),x.push(bt));i=x}return i}function hl(i,l){var p,x,k,F,Q,gt,bt,Ft,re;if(!i||i.length===0)throw new Error("latlngs not passed");mn(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var Ae=ae([0,0]),He=pe(i),ji=He.getNorthWest().distanceTo(He.getSouthWest())*He.getNorthEast().distanceTo(He.getNorthWest());ji<1700&&(Ae=ja(i));var Pi=i.length,an=[];for(p=0;p<Pi;p++){var vi=ae(i[p]);an.push(l.project(ae([vi.lat-Ae.lat,vi.lng-Ae.lng])))}for(gt=bt=Ft=0,p=0,x=Pi-1;p<Pi;x=p++)k=an[p],F=an[x],Q=k.y*F.x-F.y*k.x,bt+=(k.x+F.x)*Q,Ft+=(k.y+F.y)*Q,gt+=Q*3;gt===0?re=an[0]:re=[bt/gt,Ft/gt];var pr=l.unproject(Rt(re));return ae([pr.lat+Ae.lat,pr.lng+Ae.lng])}function ja(i){for(var l=0,p=0,x=0,k=0;k<i.length;k++){var F=ae(i[k]);l+=F.lat,p+=F.lng,x++}return ae([l/x,p/x])}var Ul={__proto__:null,clipPolygon:za,polygonCenter:hl,centroid:ja};function Qo(i,l){if(!l||!i.length)return i.slice();var p=l*l;return i=cl(i,p),i=Fi(i,p),i}function Ua(i,l,p){return Math.sqrt(Rs(i,l,p,!0))}function Hl(i,l,p){return Rs(i,l,p)}function Fi(i,l){var p=i.length,x=typeof Uint8Array<"u"?Uint8Array:Array,k=new x(p);k[0]=k[p-1]=1,Ji(i,k,l,0,p-1);var F,Q=[];for(F=0;F<p;F++)k[F]&&Q.push(i[F]);return Q}function Ji(i,l,p,x,k){var F=0,Q,gt,bt;for(gt=x+1;gt<=k-1;gt++)bt=Rs(i[gt],i[x],i[k],!0),bt>F&&(Q=gt,F=bt);F>p&&(l[Q]=1,Ji(i,l,p,x,Q),Ji(i,l,p,Q,k))}function cl(i,l){for(var p=[i[0]],x=1,k=0,F=i.length;x<F;x++)Vl(i[x],i[k])>l&&(p.push(i[x]),k=x);return k<F-1&&p.push(i[F-1]),p}var ts;function Is(i,l,p,x,k){var F=x?ts:gn(i,p),Q=gn(l,p),gt,bt,Ft;for(ts=Q;;){if(!(F|Q))return[i,l];if(F&Q)return!1;gt=F||Q,bt=es(i,l,gt,p,k),Ft=gn(bt,p),gt===F?(i=bt,F=Ft):(l=bt,Q=Ft)}}function es(i,l,p,x,k){var F=l.x-i.x,Q=l.y-i.y,gt=x.min,bt=x.max,Ft,re;return p&8?(Ft=i.x+F*(bt.y-i.y)/Q,re=bt.y):p&4?(Ft=i.x+F*(gt.y-i.y)/Q,re=gt.y):p&2?(Ft=bt.x,re=i.y+Q*(bt.x-i.x)/F):p&1&&(Ft=gt.x,re=i.y+Q*(gt.x-i.x)/F),new At(Ft,re,k)}function gn(i,l){var p=0;return i.x<l.min.x?p|=1:i.x>l.max.x&&(p|=2),i.y<l.min.y?p|=4:i.y>l.max.y&&(p|=8),p}function Vl(i,l){var p=l.x-i.x,x=l.y-i.y;return p*p+x*x}function Rs(i,l,p,x){var k=l.x,F=l.y,Q=p.x-k,gt=p.y-F,bt=Q*Q+gt*gt,Ft;return bt>0&&(Ft=((i.x-k)*Q+(i.y-F)*gt)/bt,Ft>1?(k=p.x,F=p.y):Ft>0&&(k+=Q*Ft,F+=gt*Ft)),Q=i.x-k,gt=i.y-F,x?Q*Q+gt*gt:new At(k,F)}function mn(i){return!St(i[0])||typeof i[0][0]!="object"&&typeof i[0][0]<"u"}function In(i){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),mn(i)}function Ha(i,l){var p,x,k,F,Q,gt,bt,Ft;if(!i||i.length===0)throw new Error("latlngs not passed");mn(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var re=ae([0,0]),Ae=pe(i),He=Ae.getNorthWest().distanceTo(Ae.getSouthWest())*Ae.getNorthEast().distanceTo(Ae.getNorthWest());He<1700&&(re=ja(i));var ji=i.length,Pi=[];for(p=0;p<ji;p++){var an=ae(i[p]);Pi.push(l.project(ae([an.lat-re.lat,an.lng-re.lng])))}for(p=0,x=0;p<ji-1;p++)x+=Pi[p].distanceTo(Pi[p+1])/2;if(x===0)Ft=Pi[0];else for(p=0,F=0;p<ji-1;p++)if(Q=Pi[p],gt=Pi[p+1],k=Q.distanceTo(gt),F+=k,F>x){bt=(F-x)/k,Ft=[gt.x-bt*(gt.x-Q.x),gt.y-bt*(gt.y-Q.y)];break}var vi=l.unproject(Rt(Ft));return ae([vi.lat+re.lat,vi.lng+re.lng])}var Co={__proto__:null,simplify:Qo,pointToSegmentDistance:Ua,closestPointOnSegment:Hl,clipSegment:Is,_getEdgeIntersection:es,_getBitCode:gn,_sqClosestPointOnSegment:Rs,isFlat:mn,_flat:In,polylineCenter:Ha},Va={project:function(i){return new At(i.lng,i.lat)},unproject:function(i){return new ge(i.y,i.x)},bounds:new rt([-180,-90],[180,90])},Rn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new rt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(i){var l=Math.PI/180,p=this.R,x=i.lat*l,k=this.R_MINOR/p,F=Math.sqrt(1-k*k),Q=F*Math.sin(x),gt=Math.tan(Math.PI/4-x/2)/Math.pow((1-Q)/(1+Q),F/2);return x=-p*Math.log(Math.max(gt,1e-10)),new At(i.lng*l*p,x)},unproject:function(i){for(var l=180/Math.PI,p=this.R,x=this.R_MINOR/p,k=Math.sqrt(1-x*x),F=Math.exp(-i.y/p),Q=Math.PI/2-2*Math.atan(F),gt=0,bt=.1,Ft;gt<15&&Math.abs(bt)>1e-7;gt++)Ft=k*Math.sin(Q),Ft=Math.pow((1-Ft)/(1+Ft),k/2),bt=Math.PI/2-2*Math.atan(F*Ft)-Q,Q+=bt;return new ge(Q*l,i.x*l/p)}},ar={__proto__:null,LonLat:Va,Mercator:Rn,SphericalMercator:Mi},ta=f({},Ve,{code:"EPSG:3395",projection:Rn,transformation:(function(){var i=.5/(Math.PI*Rn.R);return vs(i,.5,-i,.5)})()}),Wa=f({},Ve,{code:"EPSG:4326",projection:Va,transformation:vs(1/180,1,-1/180,.5)}),$a=f({},Fe,{projection:Va,transformation:vs(1,0,-1,0),scale:function(i){return Math.pow(2,i)},zoom:function(i){return Math.log(i)/Math.LN2},distance:function(i,l){var p=l.lng-i.lng,x=l.lat-i.lat;return Math.sqrt(p*p+x*x)},infinite:!0});Fe.Earth=Ve,Fe.EPSG3395=ta,Fe.EPSG3857=nn,Fe.EPSG900913=Je,Fe.EPSG4326=Wa,Fe.Simple=$a;var on=ce.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(i){return i.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(i){return i&&i.removeLayer(this),this},getPane:function(i){return this._map.getPane(i?this.options[i]||i:this.options.pane)},addInteractiveTarget:function(i){return this._map._targets[E(i)]=this,this},removeInteractiveTarget:function(i){return delete this._map._targets[E(i)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(i){var l=i.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var p=this.getEvents();l.on(p,this),this.once("remove",function(){l.off(p,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});qe.include({addLayer:function(i){if(!i._layerAdd)throw new Error("The provided object is not a Layer.");var l=E(i);return this._layers[l]?this:(this._layers[l]=i,i._mapToAdd=this,i.beforeAdd&&i.beforeAdd(this),this.whenReady(i._layerAdd,i),this)},removeLayer:function(i){var l=E(i);return this._layers[l]?(this._loaded&&i.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:i}),i.fire("remove")),i._map=i._mapToAdd=null,this):this},hasLayer:function(i){return E(i)in this._layers},eachLayer:function(i,l){for(var p in this._layers)i.call(l,this._layers[p]);return this},_addLayers:function(i){i=i?St(i)?i:[i]:[];for(var l=0,p=i.length;l<p;l++)this.addLayer(i[l])},_addZoomLimit:function(i){(!isNaN(i.options.maxZoom)||!isNaN(i.options.minZoom))&&(this._zoomBoundLayers[E(i)]=i,this._updateZoomLevels())},_removeZoomLimit:function(i){var l=E(i);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var i=1/0,l=-1/0,p=this._getZoomSpan();for(var x in this._zoomBoundLayers){var k=this._zoomBoundLayers[x].options;i=k.minZoom===void 0?i:Math.min(i,k.minZoom),l=k.maxZoom===void 0?l:Math.max(l,k.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=i===1/0?void 0:i,p!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var is=on.extend({initialize:function(i,l){Z(this,l),this._layers={};var p,x;if(i)for(p=0,x=i.length;p<x;p++)this.addLayer(i[p])},addLayer:function(i){var l=this.getLayerId(i);return this._layers[l]=i,this._map&&this._map.addLayer(i),this},removeLayer:function(i){var l=i in this._layers?i:this.getLayerId(i);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(i){var l=typeof i=="number"?i:this.getLayerId(i);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(i){var l=Array.prototype.slice.call(arguments,1),p,x;for(p in this._layers)x=this._layers[p],x[i]&&x[i].apply(x,l);return this},onAdd:function(i){this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i)},eachLayer:function(i,l){for(var p in this._layers)i.call(l,this._layers[p]);return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var i=[];return this.eachLayer(i.push,i),i},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return E(i)}}),bo=function(i,l){return new is(i,l)},Wn=is.extend({addLayer:function(i){return this.hasLayer(i)?this:(i.addEventParent(this),is.prototype.addLayer.call(this,i),this.fire("layeradd",{layer:i}))},removeLayer:function(i){return this.hasLayer(i)?(i in this._layers&&(i=this._layers[i]),i.removeEventParent(this),is.prototype.removeLayer.call(this,i),this.fire("layerremove",{layer:i})):this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new Ce;for(var l in this._layers){var p=this._layers[l];i.extend(p.getBounds?p.getBounds():p.getLatLng())}return i}}),fl=function(i,l){return new Wn(i,l)},Os=Le.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(i){Z(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(i,l){var p=this._getIconUrl(i);if(!p){if(i==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var x=this._createImg(p,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(x,i),(this.options.crossOrigin||this.options.crossOrigin==="")&&(x.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),x},_setIconStyles:function(i,l){var p=this.options,x=p[l+"Size"];typeof x=="number"&&(x=[x,x]);var k=Rt(x),F=Rt(l==="shadow"&&p.shadowAnchor||p.iconAnchor||k&&k.divideBy(2,!0));i.className="leaflet-marker-"+l+" "+(p.className||""),F&&(i.style.marginLeft=-F.x+"px",i.style.marginTop=-F.y+"px"),k&&(i.style.width=k.x+"px",i.style.height=k.y+"px")},_createImg:function(i,l){return l=l||document.createElement("img"),l.src=i,l},_getIconUrl:function(i){return me.retina&&this.options[i+"RetinaUrl"]||this.options[i+"Url"]}});function dl(i){return new Os(i)}var to=Os.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(i){return typeof to.imagePath!="string"&&(to.imagePath=this._detectIconPath()),(this.options.imagePath||to.imagePath)+Os.prototype._getIconUrl.call(this,i)},_stripUrl:function(i){var l=function(p,x,k){var F=x.exec(p);return F&&F[k]};return i=l(i,/^url\((['"])?(.+)\1\)$/,2),i&&l(i,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var i=Ne("div","leaflet-default-icon-path",document.body),l=sr(i,"background-image")||sr(i,"backgroundImage");if(document.body.removeChild(i),l=this._stripUrl(l),l)return l;var p=document.querySelector('link[href$="leaflet.css"]');return p?p.href.substring(0,p.href.length-11-1):""}}),So=Ni.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;this._draggable||(this._draggable=new Vn(i,i,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),dt(i,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Pt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(i){var l=this._marker,p=l._map,x=this._marker.options.autoPanSpeed,k=this._marker.options.autoPanPadding,F=ye(l._icon),Q=p.getPixelBounds(),gt=p.getPixelOrigin(),bt=It(Q.min._subtract(gt).add(k),Q.max._subtract(gt).subtract(k));if(!bt.contains(F)){var Ft=Rt((Math.max(bt.max.x,F.x)-bt.max.x)/(Q.max.x-bt.max.x)-(Math.min(bt.min.x,F.x)-bt.min.x)/(Q.min.x-bt.min.x),(Math.max(bt.max.y,F.y)-bt.max.y)/(Q.max.y-bt.max.y)-(Math.min(bt.min.y,F.y)-bt.min.y)/(Q.min.y-bt.min.y)).multiplyBy(x);p.panBy(Ft,{animate:!1}),this._draggable._newPos._add(Ft),this._draggable._startPos._add(Ft),Zt(l._icon,this._draggable._newPos),this._onDrag(i),this._panRequest=yt(this._adjustPan.bind(this,i))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(i){this._marker.options.autoPan&&(Ct(this._panRequest),this._panRequest=yt(this._adjustPan.bind(this,i)))},_onDrag:function(i){var l=this._marker,p=l._shadow,x=ye(l._icon),k=l._map.layerPointToLatLng(x);p&&Zt(p,x),l._latlng=k,i.latlng=k,i.oldLatLng=this._oldLatLng,l.fire("move",i).fire("drag",i)},_onDragEnd:function(i){Ct(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",i)}}),Nr=on.extend({options:{icon:new to,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(i,l){Z(this,l),this._latlng=ae(i)},onAdd:function(i){this._zoomAnimated=this._zoomAnimated&&i.options.markerZoomAnimation,this._zoomAnimated&&i.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(i){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&i.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(i){var l=this._latlng;return this._latlng=ae(i),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(i){return this.options.zIndexOffset=i,this.update()},getIcon:function(){return this.options.icon},setIcon:function(i){return this.options.icon=i,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var i=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),p=i.icon.createIcon(this._icon),x=!1;p!==this._icon&&(this._icon&&this._removeIcon(),x=!0,i.title&&(p.title=i.title),p.tagName==="IMG"&&(p.alt=i.alt||"")),dt(p,l),i.keyboard&&(p.tabIndex="0",p.setAttribute("role","button")),this._icon=p,i.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Pe(p,"focus",this._panOnFocus,this);var k=i.icon.createShadow(this._shadow),F=!1;k!==this._shadow&&(this._removeShadow(),F=!0),k&&(dt(k,l),k.alt=""),this._shadow=k,i.opacity<1&&this._updateOpacity(),x&&this.getPane().appendChild(this._icon),this._initInteraction(),k&&F&&this.getPane(i.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ei(this._icon,"focus",this._panOnFocus,this),ii(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ii(this._shadow),this._shadow=null},_setPos:function(i){this._icon&&Zt(this._icon,i),this._shadow&&Zt(this._shadow,i),this._zIndex=i.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(i){this._icon&&(this._icon.style.zIndex=this._zIndex+i)},_animateZoom:function(i){var l=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(dt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),So)){var i=this.options.draggable;this.dragging&&(i=this.dragging.enabled(),this.dragging.disable()),this.dragging=new So(this),i&&this.dragging.enable()}},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var i=this.options.opacity;this._icon&&Ot(this._icon,i),this._shadow&&Ot(this._shadow,i)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var i=this._map;if(i){var l=this.options.icon.options,p=l.iconSize?Rt(l.iconSize):Rt(0,0),x=l.iconAnchor?Rt(l.iconAnchor):Rt(0,0);i.panInside(this._latlng,{paddingTopLeft:x,paddingBottomRight:p.subtract(x)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Wl(i,l){return new Nr(i,l)}var Fr=on.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(i){this._renderer=i.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(i){return Z(this,i),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&i&&Object.prototype.hasOwnProperty.call(i,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),lr=Fr.extend({options:{fill:!0,radius:10},initialize:function(i,l){Z(this,l),this._latlng=ae(i),this._radius=this.options.radius},setLatLng:function(i){var l=this._latlng;return this._latlng=ae(i),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(i){return this.options.radius=this._radius=i,this.redraw()},getRadius:function(){return this._radius},setStyle:function(i){var l=i&&i.radius||this._radius;return Fr.prototype.setStyle.call(this,i),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var i=this._radius,l=this._radiusY||i,p=this._clickTolerance(),x=[i+p,l+p];this._pxBounds=new rt(this._point.subtract(x),this._point.add(x))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(i){return i.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Za(i,l){return new lr(i,l)}var ea=lr.extend({initialize:function(i,l,p){if(typeof l=="number"&&(l=f({},p,{radius:l})),Z(this,l),this._latlng=ae(i),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(i){return this._mRadius=i,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var i=[this._radius,this._radiusY||this._radius];return new Ce(this._map.layerPointToLatLng(this._point.subtract(i)),this._map.layerPointToLatLng(this._point.add(i)))},setStyle:Fr.prototype.setStyle,_project:function(){var i=this._latlng.lng,l=this._latlng.lat,p=this._map,x=p.options.crs;if(x.distance===Ve.distance){var k=Math.PI/180,F=this._mRadius/Ve.R/k,Q=p.project([l+F,i]),gt=p.project([l-F,i]),bt=Q.add(gt).divideBy(2),Ft=p.unproject(bt).lat,re=Math.acos((Math.cos(F*k)-Math.sin(l*k)*Math.sin(Ft*k))/(Math.cos(l*k)*Math.cos(Ft*k)))/k;(isNaN(re)||re===0)&&(re=F/Math.cos(Math.PI/180*l)),this._point=bt.subtract(p.getPixelOrigin()),this._radius=isNaN(re)?0:bt.x-p.project([Ft,i-re]).x,this._radiusY=bt.y-Q.y}else{var Ae=x.unproject(x.project(this._latlng).subtract([this._mRadius,0]));this._point=p.latLngToLayerPoint(this._latlng),this._radius=this._point.x-p.latLngToLayerPoint(Ae).x}this._updateBounds()}});function $n(i,l,p){return new ea(i,l,p)}var bn=Fr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(i,l){Z(this,l),this._setLatLngs(i)},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){return this._setLatLngs(i),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(i){for(var l=1/0,p=null,x=Rs,k,F,Q=0,gt=this._parts.length;Q<gt;Q++)for(var bt=this._parts[Q],Ft=1,re=bt.length;Ft<re;Ft++){k=bt[Ft-1],F=bt[Ft];var Ae=x(i,k,F,!0);Ae<l&&(l=Ae,p=x(i,k,F))}return p&&(p.distance=Math.sqrt(l)),p},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ha(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(i,l){return l=l||this._defaultShape(),i=ae(i),l.push(i),this._bounds.extend(i),this.redraw()},_setLatLngs:function(i){this._bounds=new Ce,this._latlngs=this._convertLatLngs(i)},_defaultShape:function(){return mn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(i){for(var l=[],p=mn(i),x=0,k=i.length;x<k;x++)p?(l[x]=ae(i[x]),this._bounds.extend(l[x])):l[x]=this._convertLatLngs(i[x]);return l},_project:function(){var i=new rt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,i),this._bounds.isValid()&&i.isValid()&&(this._rawPxBounds=i,this._updateBounds())},_updateBounds:function(){var i=this._clickTolerance(),l=new At(i,i);this._rawPxBounds&&(this._pxBounds=new rt([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(i,l,p){var x=i[0]instanceof ge,k=i.length,F,Q;if(x){for(Q=[],F=0;F<k;F++)Q[F]=this._map.latLngToLayerPoint(i[F]),p.extend(Q[F]);l.push(Q)}else for(F=0;F<k;F++)this._projectLatlngs(i[F],l,p)},_clipPoints:function(){var i=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,p,x,k,F,Q,gt,bt;for(p=0,k=0,F=this._rings.length;p<F;p++)for(bt=this._rings[p],x=0,Q=bt.length;x<Q-1;x++)gt=Is(bt[x],bt[x+1],i,x,!0),gt&&(l[k]=l[k]||[],l[k].push(gt[0]),(gt[1]!==bt[x+1]||x===Q-2)&&(l[k].push(gt[1]),k++))}},_simplifyPoints:function(){for(var i=this._parts,l=this.options.smoothFactor,p=0,x=i.length;p<x;p++)i[p]=Qo(i[p],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(i,l){var p,x,k,F,Q,gt,bt=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(p=0,F=this._parts.length;p<F;p++)for(gt=this._parts[p],x=0,Q=gt.length,k=Q-1;x<Q;k=x++)if(!(!l&&x===0)&&Ua(i,gt[k],gt[x])<=bt)return!0;return!1}});function $l(i,l){return new bn(i,l)}bn._flat=In;var Zn=bn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return hl(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(i){var l=bn.prototype._convertLatLngs.call(this,i),p=l.length;return p>=2&&l[0]instanceof ge&&l[0].equals(l[p-1])&&l.pop(),l},_setLatLngs:function(i){bn.prototype._setLatLngs.call(this,i),mn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return mn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var i=this._renderer._bounds,l=this.options.weight,p=new At(l,l);if(i=new rt(i.min.subtract(p),i.max.add(p)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}for(var x=0,k=this._rings.length,F;x<k;x++)F=za(this._rings[x],i,!0),F.length&&this._parts.push(F)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(i){var l=!1,p,x,k,F,Q,gt,bt,Ft;if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(F=0,bt=this._parts.length;F<bt;F++)for(p=this._parts[F],Q=0,Ft=p.length,gt=Ft-1;Q<Ft;gt=Q++)x=p[Q],k=p[gt],x.y>i.y!=k.y>i.y&&i.x<(k.x-x.x)*(i.y-x.y)/(k.y-x.y)+x.x&&(l=!l);return l||bn.prototype._containsPoint.call(this,i,!0)}});function ko(i,l){return new Zn(i,l)}var ur=Wn.extend({initialize:function(i,l){Z(this,l),this._layers={},i&&this.addData(i)},addData:function(i){var l=St(i)?i:i.features,p,x,k;if(l){for(p=0,x=l.length;p<x;p++)k=l[p],(k.geometries||k.geometry||k.features||k.coordinates)&&this.addData(k);return this}var F=this.options;if(F.filter&&!F.filter(i))return this;var Q=eo(i,F);return Q?(Q.feature=ra(i),Q.defaultOptions=Q.options,this.resetStyle(Q),F.onEachFeature&&F.onEachFeature(i,Q),this.addLayer(Q)):this},resetStyle:function(i){return i===void 0?this.eachLayer(this.resetStyle,this):(i.options=f({},i.defaultOptions),this._setLayerStyle(i,this.options.style),this)},setStyle:function(i){return this.eachLayer(function(l){this._setLayerStyle(l,i)},this)},_setLayerStyle:function(i,l){i.setStyle&&(typeof l=="function"&&(l=l(i.feature)),i.setStyle(l))}});function eo(i,l){var p=i.type==="Feature"?i.geometry:i,x=p?p.coordinates:null,k=[],F=l&&l.pointToLayer,Q=l&&l.coordsToLatLng||Po,gt,bt,Ft,re;if(!x&&!p)return null;switch(p.type){case"Point":return gt=Q(x),ia(F,i,gt,l);case"MultiPoint":for(Ft=0,re=x.length;Ft<re;Ft++)gt=Q(x[Ft]),k.push(ia(F,i,gt,l));return new Wn(k);case"LineString":case"MultiLineString":return bt=Ao(x,p.type==="LineString"?0:1,Q),new bn(bt,l);case"Polygon":case"MultiPolygon":return bt=Ao(x,p.type==="Polygon"?1:2,Q),new Zn(bt,l);case"GeometryCollection":for(Ft=0,re=p.geometries.length;Ft<re;Ft++){var Ae=eo({geometry:p.geometries[Ft],type:"Feature",properties:i.properties},l);Ae&&k.push(Ae)}return new Wn(k);case"FeatureCollection":for(Ft=0,re=p.features.length;Ft<re;Ft++){var He=eo(p.features[Ft],l);He&&k.push(He)}return new Wn(k);default:throw new Error("Invalid GeoJSON object.")}}function ia(i,l,p,x){return i?i(l,p):new Nr(p,x&&x.markersInheritOptions&&x)}function Po(i){return new ge(i[1],i[0],i[2])}function Ao(i,l,p){for(var x=[],k=0,F=i.length,Q;k<F;k++)Q=l?Ao(i[k],l-1,p):(p||Po)(i[k]),x.push(Q);return x}function Bo(i,l){return i=ae(i),i.alt!==void 0?[B(i.lng,l),B(i.lat,l),B(i.alt,l)]:[B(i.lng,l),B(i.lat,l)]}function na(i,l,p,x){for(var k=[],F=0,Q=i.length;F<Q;F++)k.push(l?na(i[F],mn(i[F])?0:l-1,p,x):Bo(i[F],x));return!l&&p&&k.length>0&&k.push(k[0].slice()),k}function io(i,l){return i.feature?f({},i.feature,{geometry:l}):ra(l)}function ra(i){return i.type==="Feature"||i.type==="FeatureCollection"?i:{type:"Feature",properties:{},geometry:i}}var sa={toGeoJSON:function(i){return io(this,{type:"Point",coordinates:Bo(this.getLatLng(),i)})}};Nr.include(sa),ea.include(sa),lr.include(sa),bn.include({toGeoJSON:function(i){var l=!mn(this._latlngs),p=na(this._latlngs,l?1:0,!1,i);return io(this,{type:(l?"Multi":"")+"LineString",coordinates:p})}}),Zn.include({toGeoJSON:function(i){var l=!mn(this._latlngs),p=l&&!mn(this._latlngs[0]),x=na(this._latlngs,p?2:l?1:0,!0,i);return l||(x=[x]),io(this,{type:(p?"Multi":"")+"Polygon",coordinates:x})}}),is.include({toMultiPoint:function(i){var l=[];return this.eachLayer(function(p){l.push(p.toGeoJSON(i).geometry.coordinates)}),io(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(i){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(i);var p=l==="GeometryCollection",x=[];return this.eachLayer(function(k){if(k.toGeoJSON){var F=k.toGeoJSON(i);if(p)x.push(F.geometry);else{var Q=ra(F);Q.type==="FeatureCollection"?x.push.apply(x,Q.features):x.push(Q)}}}),p?io(this,{geometries:x,type:"GeometryCollection"}):{type:"FeatureCollection",features:x}}});function oa(i,l){return new ur(i,l)}var On=oa,hr=on.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(i,l,p){this._url=i,this._bounds=pe(l),Z(this,p)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(dt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ii(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(i){return this.options.opacity=i,this._image&&this._updateOpacity(),this},setStyle:function(i){return i.opacity&&this.setOpacity(i.opacity),this},bringToFront:function(){return this._map&&Br(this._image),this},bringToBack:function(){return this._map&&En(this._image),this},setUrl:function(i){return this._url=i,this._image&&(this._image.src=i),this},setBounds:function(i){return this._bounds=pe(i),this._map&&this._reset(),this},getEvents:function(){var i={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var i=this._url.tagName==="IMG",l=this._image=i?this._url:Ne("img");if(dt(l,"leaflet-image-layer"),this._zoomAnimated&&dt(l,"leaflet-zoom-animated"),this.options.className&&dt(l,this.options.className),l.onselectstart=P,l.onmousemove=P,l.onload=y(this.fire,this,"load"),l.onerror=y(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),i){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(i){var l=this._map.getZoomScale(i.zoom),p=this._map._latLngBoundsToNewLayerBounds(this._bounds,i.zoom,i.center).min;Ht(this._image,p,l)},_reset:function(){var i=this._image,l=new rt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),p=l.getSize();Zt(i,l.min),i.style.width=p.x+"px",i.style.height=p.y+"px"},_updateOpacity:function(){Ot(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var i=this.options.errorOverlayUrl;i&&this._url!==i&&(this._url=i,this._image.src=i)},getCenter:function(){return this._bounds.getCenter()}}),pl=function(i,l,p){return new hr(i,l,p)},no=hr.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var i=this._url.tagName==="VIDEO",l=this._image=i?this._url:Ne("video");if(dt(l,"leaflet-image-layer"),this._zoomAnimated&&dt(l,"leaflet-zoom-animated"),this.options.className&&dt(l,this.options.className),l.onselectstart=P,l.onmousemove=P,l.onloadeddata=y(this.fire,this,"load"),i){for(var p=l.getElementsByTagName("source"),x=[],k=0;k<p.length;k++)x.push(p[k].src);this._url=p.length>0?x:[l.src];return}St(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var F=0;F<this._url.length;F++){var Q=Ne("source");Q.src=this._url[F],l.appendChild(Q)}}});function qa(i,l,p){return new no(i,l,p)}var Ka=hr.extend({_initImage:function(){var i=this._image=this._url;dt(i,"leaflet-image-layer"),this._zoomAnimated&&dt(i,"leaflet-zoom-animated"),this.options.className&&dt(i,this.options.className),i.onselectstart=P,i.onmousemove=P}});function Ja(i,l,p){return new Ka(i,l,p)}var cr=on.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(i,l){i&&(i instanceof ge||St(i))?(this._latlng=ae(i),Z(this,l)):(Z(this,i),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(i){return i=arguments.length?i:this._source._map,i.hasLayer(this)||i.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(i){return this._map?this.close():(arguments.length?this._source=i:i=this._source,this._prepareOpen(),this.openOn(i._map)),this},onAdd:function(i){this._zoomAnimated=i._zoomAnimated,this._container||this._initLayout(),i._fadeAnimated&&Ot(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),i._fadeAnimated&&Ot(this._container,1),this.bringToFront(),this.options.interactive&&(dt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(i){i._fadeAnimated?(Ot(this._container,0),this._removeTimeout=setTimeout(y(ii,void 0,this._container),200)):ii(this._container),this.options.interactive&&(Pt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=ae(i),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(i){return this._content=i,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var i={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Br(this._container),this},bringToBack:function(){return this._map&&En(this._container),this},_prepareOpen:function(i){var l=this._source;if(!l._map)return!1;if(l instanceof Wn){l=null;var p=this._source._layers;for(var x in p)if(p[x]._map){l=p[x];break}if(!l)return!1;this._source=l}if(!i)if(l.getCenter)i=l.getCenter();else if(l.getLatLng)i=l.getLatLng();else if(l.getBounds)i=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(i),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var i=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")i.innerHTML=l;else{for(;i.hasChildNodes();)i.removeChild(i.firstChild);i.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var i=this._map.latLngToLayerPoint(this._latlng),l=Rt(this.options.offset),p=this._getAnchor();this._zoomAnimated?Zt(this._container,i.add(p)):l=l.add(i).add(p);var x=this._containerBottom=-l.y,k=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=x+"px",this._container.style.left=k+"px"}},_getAnchor:function(){return[0,0]}});qe.include({_initOverlay:function(i,l,p,x){var k=l;return k instanceof i||(k=new i(x).setContent(l)),p&&k.setLatLng(p),k}}),on.include({_initOverlay:function(i,l,p,x){var k=p;return k instanceof i?(Z(k,x),k._source=this):(k=l&&!x?l:new i(x,this),k.setContent(p)),k}});var ns=cr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(i){return i=arguments.length?i:this._source._map,!i.hasLayer(this)&&i._popup&&i._popup.options.autoClose&&i.removeLayer(i._popup),i._popup=this,cr.prototype.openOn.call(this,i)},onAdd:function(i){cr.prototype.onAdd.call(this,i),i.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Fr||this._source.on("preclick",Tn))},onRemove:function(i){cr.prototype.onRemove.call(this,i),i.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Fr||this._source.off("preclick",Tn))},getEvents:function(){var i=cr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(i.preclick=this.close),this.options.keepInView&&(i.moveend=this._adjustPan),i},_initLayout:function(){var i="leaflet-popup",l=this._container=Ne("div",i+" "+(this.options.className||"")+" leaflet-zoom-animated"),p=this._wrapper=Ne("div",i+"-content-wrapper",l);if(this._contentNode=Ne("div",i+"-content",p),Tr(l),Yr(this._contentNode),Pe(l,"contextmenu",Tn),this._tipContainer=Ne("div",i+"-tip-container",l),this._tip=Ne("div",i+"-tip",this._tipContainer),this.options.closeButton){var x=this._closeButton=Ne("a",i+"-close-button",l);x.setAttribute("role","button"),x.setAttribute("aria-label","Close popup"),x.href="#close",x.innerHTML='<span aria-hidden="true">&#215;</span>',Pe(x,"click",function(k){mi(k),this.close()},this)}},_updateLayout:function(){var i=this._contentNode,l=i.style;l.width="",l.whiteSpace="nowrap";var p=i.offsetWidth;p=Math.min(p,this.options.maxWidth),p=Math.max(p,this.options.minWidth),l.width=p+1+"px",l.whiteSpace="",l.height="";var x=i.offsetHeight,k=this.options.maxHeight,F="leaflet-popup-scrolled";k&&x>k?(l.height=k+"px",dt(i,F)):Pt(i,F),this._containerWidth=this._container.offsetWidth},_animateZoom:function(i){var l=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center),p=this._getAnchor();Zt(this._container,l.add(p))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var i=this._map,l=parseInt(sr(this._container,"marginBottom"),10)||0,p=this._container.offsetHeight+l,x=this._containerWidth,k=new At(this._containerLeft,-p-this._containerBottom);k._add(ye(this._container));var F=i.layerPointToContainerPoint(k),Q=Rt(this.options.autoPanPadding),gt=Rt(this.options.autoPanPaddingTopLeft||Q),bt=Rt(this.options.autoPanPaddingBottomRight||Q),Ft=i.getSize(),re=0,Ae=0;F.x+x+bt.x>Ft.x&&(re=F.x+x-Ft.x+bt.x),F.x-re-gt.x<0&&(re=F.x-gt.x),F.y+p+bt.y>Ft.y&&(Ae=F.y+p-Ft.y+bt.y),F.y-Ae-gt.y<0&&(Ae=F.y-gt.y),(re||Ae)&&(this.options.keepInView&&(this._autopanning=!0),i.fire("autopanstart").panBy([re,Ae]))}},_getAnchor:function(){return Rt(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),ro=function(i,l){return new ns(i,l)};qe.mergeOptions({closePopupOnClick:!0}),qe.include({openPopup:function(i,l,p){return this._initOverlay(ns,i,l,p).openOn(this),this},closePopup:function(i){return i=arguments.length?i:this._popup,i&&i.close(),this}}),on.include({bindPopup:function(i,l){return this._popup=this._initOverlay(ns,this._popup,i,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(i){return this._popup&&(this instanceof Wn||(this._popup._source=this),this._popup._prepareOpen(i||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(i){return this._popup&&this._popup.setContent(i),this},getPopup:function(){return this._popup},_openPopup:function(i){if(!(!this._popup||!this._map)){Cn(i);var l=i.layer||i.target;if(this._popup._source===l&&!(l instanceof Fr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(i.latlng);return}this._popup._source=l,this.openPopup(i.latlng)}},_movePopup:function(i){this._popup.setLatLng(i.latlng)},_onKeyPress:function(i){i.originalEvent.keyCode===13&&this._openPopup(i)}});var so=cr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(i){cr.prototype.onAdd.call(this,i),this.setOpacity(this.options.opacity),i.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(i){cr.prototype.onRemove.call(this,i),i.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var i=cr.prototype.getEvents.call(this);return this.options.permanent||(i.preclick=this.close),i},_initLayout:function(){var i="leaflet-tooltip",l=i+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ne("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+E(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(i){var l,p,x=this._map,k=this._container,F=x.latLngToContainerPoint(x.getCenter()),Q=x.layerPointToContainerPoint(i),gt=this.options.direction,bt=k.offsetWidth,Ft=k.offsetHeight,re=Rt(this.options.offset),Ae=this._getAnchor();gt==="top"?(l=bt/2,p=Ft):gt==="bottom"?(l=bt/2,p=0):gt==="center"?(l=bt/2,p=Ft/2):gt==="right"?(l=0,p=Ft/2):gt==="left"?(l=bt,p=Ft/2):Q.x<F.x?(gt="right",l=0,p=Ft/2):(gt="left",l=bt+(re.x+Ae.x)*2,p=Ft/2),i=i.subtract(Rt(l,p,!0)).add(re).add(Ae),Pt(k,"leaflet-tooltip-right"),Pt(k,"leaflet-tooltip-left"),Pt(k,"leaflet-tooltip-top"),Pt(k,"leaflet-tooltip-bottom"),dt(k,"leaflet-tooltip-"+gt),Zt(k,i)},_updatePosition:function(){var i=this._map.latLngToLayerPoint(this._latlng);this._setPosition(i)},setOpacity:function(i){this.options.opacity=i,this._container&&Ot(this._container,i)},_animateZoom:function(i){var l=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);this._setPosition(l)},_getAnchor:function(){return Rt(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),To=function(i,l){return new so(i,l)};qe.include({openTooltip:function(i,l,p){return this._initOverlay(so,i,l,p).openOn(this),this},closeTooltip:function(i){return i.close(),this}}),on.include({bindTooltip:function(i,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(so,this._tooltip,i,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(i){if(!(!i&&this._tooltipHandlersAdded)){var l=i?"off":"on",p={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?p.add=this._openTooltip:(p.mouseover=this._openTooltip,p.mouseout=this.closeTooltip,p.click=this._openTooltip,this._map?this._addFocusListeners():p.add=this._addFocusListeners),this._tooltip.options.sticky&&(p.mousemove=this._moveTooltip),this[l](p),this._tooltipHandlersAdded=!i}},openTooltip:function(i){return this._tooltip&&(this instanceof Wn||(this._tooltip._source=this),this._tooltip._prepareOpen(i)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(i){return this._tooltip&&this._tooltip.setContent(i),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(i){var l=typeof i.getElement=="function"&&i.getElement();l&&(Pe(l,"focus",function(){this._tooltip._source=i,this.openTooltip()},this),Pe(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(i){var l=typeof i.getElement=="function"&&i.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(i){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(i)});return}this._tooltip._source=i.layer||i.target,this.openTooltip(this._tooltip.options.sticky?i.latlng:void 0)}},_moveTooltip:function(i){var l=i.latlng,p,x;this._tooltip.options.sticky&&i.originalEvent&&(p=this._map.mouseEventToContainerPoint(i.originalEvent),x=this._map.containerPointToLayerPoint(p),l=this._map.layerPointToLatLng(x)),this._tooltip.setLatLng(l)}});var aa=Os.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(i){var l=i&&i.tagName==="DIV"?i:document.createElement("div"),p=this.options;if(p.html instanceof Element?(Jr(l),l.appendChild(p.html)):l.innerHTML=p.html!==!1?p.html:"",p.bgPos){var x=Rt(p.bgPos);l.style.backgroundPosition=-x.x+"px "+-x.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function gl(i){return new aa(i)}Os.Default=to;var rs=on.extend({options:{tileSize:256,opacity:1,updateWhenIdle:me.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(i){Z(this,i)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(i){i._addZoomLimit(this)},onRemove:function(i){this._removeAllTiles(),ii(this._container),i._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Br(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(En(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(i){return this.options.opacity=i,this._updateOpacity(),this},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var i=this._clampZoom(this._map.getZoom());i!==this._tileZoom&&(this._tileZoom=i,this._updateLevels()),this._update()}return this},getEvents:function(){var i={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=A(this._onMoveEnd,this.options.updateInterval,this)),i.move=this._onMove),this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},createTile:function(){return document.createElement("div")},getTileSize:function(){var i=this.options.tileSize;return i instanceof At?i:new At(i,i)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(i){for(var l=this.getPane().children,p=-i(-1/0,1/0),x=0,k=l.length,F;x<k;x++)F=l[x].style.zIndex,l[x]!==this._container&&F&&(p=i(p,+F));isFinite(p)&&(this.options.zIndex=p+i(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!me.ielt9){Ot(this._container,this.options.opacity);var i=+new Date,l=!1,p=!1;for(var x in this._tiles){var k=this._tiles[x];if(!(!k.current||!k.loaded)){var F=Math.min(1,(i-k.loaded)/200);Ot(k.el,F),F<1?l=!0:(k.active?p=!0:this._onOpaqueTile(k),k.active=!0)}}p&&!this._noPrune&&this._pruneTiles(),l&&(Ct(this._fadeFrame),this._fadeFrame=yt(this._updateOpacity,this))}},_onOpaqueTile:P,_initContainer:function(){this._container||(this._container=Ne("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var i=this._tileZoom,l=this.options.maxZoom;if(i!==void 0){for(var p in this._levels)p=Number(p),this._levels[p].el.children.length||p===i?(this._levels[p].el.style.zIndex=l-Math.abs(i-p),this._onUpdateLevel(p)):(ii(this._levels[p].el),this._removeTilesAtZoom(p),this._onRemoveLevel(p),delete this._levels[p]);var x=this._levels[i],k=this._map;return x||(x=this._levels[i]={},x.el=Ne("div","leaflet-tile-container leaflet-zoom-animated",this._container),x.el.style.zIndex=l,x.origin=k.project(k.unproject(k.getPixelOrigin()),i).round(),x.zoom=i,this._setZoomTransform(x,k.getCenter(),k.getZoom()),P(x.el.offsetWidth),this._onCreateLevel(x)),this._level=x,x}},_onUpdateLevel:P,_onRemoveLevel:P,_onCreateLevel:P,_pruneTiles:function(){if(this._map){var i,l,p=this._map.getZoom();if(p>this.options.maxZoom||p<this.options.minZoom){this._removeAllTiles();return}for(i in this._tiles)l=this._tiles[i],l.retain=l.current;for(i in this._tiles)if(l=this._tiles[i],l.current&&!l.active){var x=l.coords;this._retainParent(x.x,x.y,x.z,x.z-5)||this._retainChildren(x.x,x.y,x.z,x.z+2)}for(i in this._tiles)this._tiles[i].retain||this._removeTile(i)}},_removeTilesAtZoom:function(i){for(var l in this._tiles)this._tiles[l].coords.z===i&&this._removeTile(l)},_removeAllTiles:function(){for(var i in this._tiles)this._removeTile(i)},_invalidateAll:function(){for(var i in this._levels)ii(this._levels[i].el),this._onRemoveLevel(Number(i)),delete this._levels[i];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(i,l,p,x){var k=Math.floor(i/2),F=Math.floor(l/2),Q=p-1,gt=new At(+k,+F);gt.z=+Q;var bt=this._tileCoordsToKey(gt),Ft=this._tiles[bt];return Ft&&Ft.active?(Ft.retain=!0,!0):(Ft&&Ft.loaded&&(Ft.retain=!0),Q>x?this._retainParent(k,F,Q,x):!1)},_retainChildren:function(i,l,p,x){for(var k=2*i;k<2*i+2;k++)for(var F=2*l;F<2*l+2;F++){var Q=new At(k,F);Q.z=p+1;var gt=this._tileCoordsToKey(Q),bt=this._tiles[gt];if(bt&&bt.active){bt.retain=!0;continue}else bt&&bt.loaded&&(bt.retain=!0);p+1<x&&this._retainChildren(k,F,p+1,x)}},_resetView:function(i){var l=i&&(i.pinch||i.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(i){this._setView(i.center,i.zoom,!0,i.noUpdate)},_clampZoom:function(i){var l=this.options;return l.minNativeZoom!==void 0&&i<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<i?l.maxNativeZoom:i},_setView:function(i,l,p,x){var k=Math.round(l);this.options.maxZoom!==void 0&&k>this.options.maxZoom||this.options.minZoom!==void 0&&k<this.options.minZoom?k=void 0:k=this._clampZoom(k);var F=this.options.updateWhenZooming&&k!==this._tileZoom;(!x||F)&&(this._tileZoom=k,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),k!==void 0&&this._update(i),p||this._pruneTiles(),this._noPrune=!!p),this._setZoomTransforms(i,l)},_setZoomTransforms:function(i,l){for(var p in this._levels)this._setZoomTransform(this._levels[p],i,l)},_setZoomTransform:function(i,l,p){var x=this._map.getZoomScale(p,i.zoom),k=i.origin.multiplyBy(x).subtract(this._map._getNewPixelOrigin(l,p)).round();me.any3d?Ht(i.el,k,x):Zt(i.el,k)},_resetGrid:function(){var i=this._map,l=i.options.crs,p=this._tileSize=this.getTileSize(),x=this._tileZoom,k=this._map.getPixelWorldBounds(this._tileZoom);k&&(this._globalTileRange=this._pxBoundsToTileRange(k)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(i.project([0,l.wrapLng[0]],x).x/p.x),Math.ceil(i.project([0,l.wrapLng[1]],x).x/p.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(i.project([l.wrapLat[0],0],x).y/p.x),Math.ceil(i.project([l.wrapLat[1],0],x).y/p.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(i){var l=this._map,p=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),x=l.getZoomScale(p,this._tileZoom),k=l.project(i,this._tileZoom).floor(),F=l.getSize().divideBy(x*2);return new rt(k.subtract(F),k.add(F))},_update:function(i){var l=this._map;if(l){var p=this._clampZoom(l.getZoom());if(i===void 0&&(i=l.getCenter()),this._tileZoom!==void 0){var x=this._getTiledPixelBounds(i),k=this._pxBoundsToTileRange(x),F=k.getCenter(),Q=[],gt=this.options.keepBuffer,bt=new rt(k.getBottomLeft().subtract([gt,-gt]),k.getTopRight().add([gt,-gt]));if(!(isFinite(k.min.x)&&isFinite(k.min.y)&&isFinite(k.max.x)&&isFinite(k.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Ft in this._tiles){var re=this._tiles[Ft].coords;(re.z!==this._tileZoom||!bt.contains(new At(re.x,re.y)))&&(this._tiles[Ft].current=!1)}if(Math.abs(p-this._tileZoom)>1){this._setView(i,p);return}for(var Ae=k.min.y;Ae<=k.max.y;Ae++)for(var He=k.min.x;He<=k.max.x;He++){var ji=new At(He,Ae);if(ji.z=this._tileZoom,!!this._isValidTile(ji)){var Pi=this._tiles[this._tileCoordsToKey(ji)];Pi?Pi.current=!0:Q.push(ji)}}if(Q.sort(function(vi,pr){return vi.distanceTo(F)-pr.distanceTo(F)}),Q.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var an=document.createDocumentFragment();for(He=0;He<Q.length;He++)this._addTile(Q[He],an);this._level.el.appendChild(an)}}}},_isValidTile:function(i){var l=this._map.options.crs;if(!l.infinite){var p=this._globalTileRange;if(!l.wrapLng&&(i.x<p.min.x||i.x>p.max.x)||!l.wrapLat&&(i.y<p.min.y||i.y>p.max.y))return!1}if(!this.options.bounds)return!0;var x=this._tileCoordsToBounds(i);return pe(this.options.bounds).overlaps(x)},_keyToBounds:function(i){return this._tileCoordsToBounds(this._keyToTileCoords(i))},_tileCoordsToNwSe:function(i){var l=this._map,p=this.getTileSize(),x=i.scaleBy(p),k=x.add(p),F=l.unproject(x,i.z),Q=l.unproject(k,i.z);return[F,Q]},_tileCoordsToBounds:function(i){var l=this._tileCoordsToNwSe(i),p=new Ce(l[0],l[1]);return this.options.noWrap||(p=this._map.wrapLatLngBounds(p)),p},_tileCoordsToKey:function(i){return i.x+":"+i.y+":"+i.z},_keyToTileCoords:function(i){var l=i.split(":"),p=new At(+l[0],+l[1]);return p.z=+l[2],p},_removeTile:function(i){var l=this._tiles[i];l&&(ii(l.el),delete this._tiles[i],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(i)}))},_initTile:function(i){dt(i,"leaflet-tile");var l=this.getTileSize();i.style.width=l.x+"px",i.style.height=l.y+"px",i.onselectstart=P,i.onmousemove=P,me.ielt9&&this.options.opacity<1&&Ot(i,this.options.opacity)},_addTile:function(i,l){var p=this._getTilePos(i),x=this._tileCoordsToKey(i),k=this.createTile(this._wrapCoords(i),y(this._tileReady,this,i));this._initTile(k),this.createTile.length<2&&yt(y(this._tileReady,this,i,null,k)),Zt(k,p),this._tiles[x]={el:k,coords:i,current:!0},l.appendChild(k),this.fire("tileloadstart",{tile:k,coords:i})},_tileReady:function(i,l,p){l&&this.fire("tileerror",{error:l,tile:p,coords:i});var x=this._tileCoordsToKey(i);p=this._tiles[x],p&&(p.loaded=+new Date,this._map._fadeAnimated?(Ot(p.el,0),Ct(this._fadeFrame),this._fadeFrame=yt(this._updateOpacity,this)):(p.active=!0,this._pruneTiles()),l||(dt(p.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:p.el,coords:i})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),me.ielt9||!this._map._fadeAnimated?yt(this._pruneTiles,this):setTimeout(y(this._pruneTiles,this),250)))},_getTilePos:function(i){return i.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(i){var l=new At(this._wrapX?D(i.x,this._wrapX):i.x,this._wrapY?D(i.y,this._wrapY):i.y);return l.z=i.z,l},_pxBoundsToTileRange:function(i){var l=this.getTileSize();return new rt(i.min.unscaleBy(l).floor(),i.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var i in this._tiles)if(!this._tiles[i].loaded)return!1;return!0}});function oo(i){return new rs(i)}var ss=rs.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(i,l){this._url=i,l=Z(this,l),l.detectRetina&&me.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(i,l){return this._url===i&&l===void 0&&(l=!0),this._url=i,l||this.redraw(),this},createTile:function(i,l){var p=document.createElement("img");return Pe(p,"load",y(this._tileOnLoad,this,l,p)),Pe(p,"error",y(this._tileOnError,this,l,p)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(p.referrerPolicy=this.options.referrerPolicy),p.alt="",p.src=this.getTileUrl(i),p},getTileUrl:function(i){var l={r:me.retina?"@2x":"",s:this._getSubdomain(i),x:i.x,y:i.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var p=this._globalTileRange.max.y-i.y;this.options.tms&&(l.y=p),l["-y"]=p}return ft(this._url,f(l,this.options))},_tileOnLoad:function(i,l){me.ielt9?setTimeout(y(i,this,null,l),0):i(null,l)},_tileOnError:function(i,l,p){var x=this.options.errorTileUrl;x&&l.getAttribute("src")!==x&&(l.src=x),i(p,l)},_onTileRemove:function(i){i.tile.onload=null},_getZoomForUrl:function(){var i=this._tileZoom,l=this.options.maxZoom,p=this.options.zoomReverse,x=this.options.zoomOffset;return p&&(i=l-i),i+x},_getSubdomain:function(i){var l=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var i,l;for(i in this._tiles)if(this._tiles[i].coords.z!==this._tileZoom&&(l=this._tiles[i].el,l.onload=P,l.onerror=P,!l.complete)){l.src=Gt;var p=this._tiles[i].coords;ii(l),delete this._tiles[i],this.fire("tileabort",{tile:l,coords:p})}},_removeTile:function(i){var l=this._tiles[i];if(l)return l.el.setAttribute("src",Gt),rs.prototype._removeTile.call(this,i)},_tileReady:function(i,l,p){if(!(!this._map||p&&p.getAttribute("src")===Gt))return rs.prototype._tileReady.call(this,i,l,p)}});function la(i,l){return new ss(i,l)}var Ds=ss.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(i,l){this._url=i;var p=f({},this.defaultWmsParams);for(var x in l)x in this.options||(p[x]=l[x]);l=Z(this,l);var k=l.detectRetina&&me.retina?2:1,F=this.getTileSize();p.width=F.x*k,p.height=F.y*k,this.wmsParams=p},onAdd:function(i){this._crs=this.options.crs||i.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,ss.prototype.onAdd.call(this,i)},getTileUrl:function(i){var l=this._tileCoordsToNwSe(i),p=this._crs,x=It(p.project(l[0]),p.project(l[1])),k=x.min,F=x.max,Q=(this._wmsVersion>=1.3&&this._crs===Wa?[k.y,k.x,F.y,F.x]:[k.x,k.y,F.x,F.y]).join(","),gt=ss.prototype.getTileUrl.call(this,i);return gt+q(this.wmsParams,gt,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Q},setParams:function(i,l){return f(this.wmsParams,i),l||this.redraw(),this}});function ml(i,l){return new Ds(i,l)}ss.WMS=Ds,la.wms=ml;var fr=on.extend({options:{padding:.1},initialize:function(i){Z(this,i),E(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),dt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var i={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(i.zoomanim=this._onAnimZoom),i},_onAnimZoom:function(i){this._updateTransform(i.center,i.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(i,l){var p=this._map.getZoomScale(l,this._zoom),x=this._map.getSize().multiplyBy(.5+this.options.padding),k=this._map.project(this._center,l),F=x.multiplyBy(-p).add(k).subtract(this._map._getNewPixelOrigin(i,l));me.any3d?Ht(this._container,F,p):Zt(this._container,F)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var i in this._layers)this._layers[i]._reset()},_onZoomEnd:function(){for(var i in this._layers)this._layers[i]._project()},_updatePaths:function(){for(var i in this._layers)this._layers[i]._update()},_update:function(){var i=this.options.padding,l=this._map.getSize(),p=this._map.containerPointToLayerPoint(l.multiplyBy(-i)).round();this._bounds=new rt(p,p.add(l.multiplyBy(1+i*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ua=fr.extend({options:{tolerance:0},getEvents:function(){var i=fr.prototype.getEvents.call(this);return i.viewprereset=this._onViewPreReset,i},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){fr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var i=this._container=document.createElement("canvas");Pe(i,"mousemove",this._onMouseMove,this),Pe(i,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Pe(i,"mouseout",this._handleMouseOut,this),i._leaflet_disable_events=!0,this._ctx=i.getContext("2d")},_destroyContainer:function(){Ct(this._redrawRequest),delete this._ctx,ii(this._container),ei(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var i;this._redrawBounds=null;for(var l in this._layers)i=this._layers[l],i._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){fr.prototype._update.call(this);var i=this._bounds,l=this._container,p=i.getSize(),x=me.retina?2:1;Zt(l,i.min),l.width=x*p.x,l.height=x*p.y,l.style.width=p.x+"px",l.style.height=p.y+"px",me.retina&&this._ctx.scale(2,2),this._ctx.translate(-i.min.x,-i.min.y),this.fire("update")}},_reset:function(){fr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(i){this._updateDashArray(i),this._layers[E(i)]=i;var l=i._order={layer:i,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(i){this._requestRedraw(i)},_removePath:function(i){var l=i._order,p=l.next,x=l.prev;p?p.prev=x:this._drawLast=x,x?x.next=p:this._drawFirst=p,delete i._order,delete this._layers[E(i)],this._requestRedraw(i)},_updatePath:function(i){this._extendRedrawBounds(i),i._project(),i._update(),this._requestRedraw(i)},_updateStyle:function(i){this._updateDashArray(i),this._requestRedraw(i)},_updateDashArray:function(i){if(typeof i.options.dashArray=="string"){var l=i.options.dashArray.split(/[, ]+/),p=[],x,k;for(k=0;k<l.length;k++){if(x=Number(l[k]),isNaN(x))return;p.push(x)}i.options._dashArray=p}else i.options._dashArray=i.options.dashArray},_requestRedraw:function(i){this._map&&(this._extendRedrawBounds(i),this._redrawRequest=this._redrawRequest||yt(this._redraw,this))},_extendRedrawBounds:function(i){if(i._pxBounds){var l=(i.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new rt,this._redrawBounds.extend(i._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(i._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var i=this._redrawBounds;if(i){var l=i.getSize();this._ctx.clearRect(i.min.x,i.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var i,l=this._redrawBounds;if(this._ctx.save(),l){var p=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,p.x,p.y),this._ctx.clip()}this._drawing=!0;for(var x=this._drawFirst;x;x=x.next)i=x.layer,(!l||i._pxBounds&&i._pxBounds.intersects(l))&&i._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(i,l){if(this._drawing){var p,x,k,F,Q=i._parts,gt=Q.length,bt=this._ctx;if(gt){for(bt.beginPath(),p=0;p<gt;p++){for(x=0,k=Q[p].length;x<k;x++)F=Q[p][x],bt[x?"lineTo":"moveTo"](F.x,F.y);l&&bt.closePath()}this._fillStroke(bt,i)}}},_updateCircle:function(i){if(!(!this._drawing||i._empty())){var l=i._point,p=this._ctx,x=Math.max(Math.round(i._radius),1),k=(Math.max(Math.round(i._radiusY),1)||x)/x;k!==1&&(p.save(),p.scale(1,k)),p.beginPath(),p.arc(l.x,l.y/k,x,0,Math.PI*2,!1),k!==1&&p.restore(),this._fillStroke(p,i)}},_fillStroke:function(i,l){var p=l.options;p.fill&&(i.globalAlpha=p.fillOpacity,i.fillStyle=p.fillColor||p.color,i.fill(p.fillRule||"evenodd")),p.stroke&&p.weight!==0&&(i.setLineDash&&i.setLineDash(l.options&&l.options._dashArray||[]),i.globalAlpha=p.opacity,i.lineWidth=p.weight,i.strokeStyle=p.color,i.lineCap=p.lineCap,i.lineJoin=p.lineJoin,i.stroke())},_onClick:function(i){for(var l=this._map.mouseEventToLayerPoint(i),p,x,k=this._drawFirst;k;k=k.next)p=k.layer,p.options.interactive&&p._containsPoint(l)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(p))&&(x=p);this._fireEvent(x?[x]:!1,i)},_onMouseMove:function(i){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(i);this._handleMouseHover(i,l)}},_handleMouseOut:function(i){var l=this._hoveredLayer;l&&(Pt(this._container,"leaflet-interactive"),this._fireEvent([l],i,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(i,l){if(!this._mouseHoverThrottled){for(var p,x,k=this._drawFirst;k;k=k.next)p=k.layer,p.options.interactive&&p._containsPoint(l)&&(x=p);x!==this._hoveredLayer&&(this._handleMouseOut(i),x&&(dt(this._container,"leaflet-interactive"),this._fireEvent([x],i,"mouseover"),this._hoveredLayer=x)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,i),this._mouseHoverThrottled=!0,setTimeout(y(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(i,l,p){this._map._fireDOMEvent(l,p||l.type,i)},_bringToFront:function(i){var l=i._order;if(l){var p=l.next,x=l.prev;if(p)p.prev=x;else return;x?x.next=p:p&&(this._drawFirst=p),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(i)}},_bringToBack:function(i){var l=i._order;if(l){var p=l.next,x=l.prev;if(x)x.next=p;else return;p?p.prev=x:x&&(this._drawLast=x),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(i)}}});function Io(i){return me.canvas?new ua(i):null}var ao=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(i){return document.createElement("<lvml:"+i+' class="lvml">')}}catch{}return function(i){return document.createElement("<"+i+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),_l={_initContainer:function(){this._container=Ne("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(fr.prototype._update.call(this),this.fire("update"))},_initPath:function(i){var l=i._container=ao("shape");dt(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",i._path=ao("path"),l.appendChild(i._path),this._updateStyle(i),this._layers[E(i)]=i},_addPath:function(i){var l=i._container;this._container.appendChild(l),i.options.interactive&&i.addInteractiveTarget(l)},_removePath:function(i){var l=i._container;ii(l),i.removeInteractiveTarget(l),delete this._layers[E(i)]},_updateStyle:function(i){var l=i._stroke,p=i._fill,x=i.options,k=i._container;k.stroked=!!x.stroke,k.filled=!!x.fill,x.stroke?(l||(l=i._stroke=ao("stroke")),k.appendChild(l),l.weight=x.weight+"px",l.color=x.color,l.opacity=x.opacity,x.dashArray?l.dashStyle=St(x.dashArray)?x.dashArray.join(" "):x.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=x.lineCap.replace("butt","flat"),l.joinstyle=x.lineJoin):l&&(k.removeChild(l),i._stroke=null),x.fill?(p||(p=i._fill=ao("fill")),k.appendChild(p),p.color=x.fillColor||x.color,p.opacity=x.fillOpacity):p&&(k.removeChild(p),i._fill=null)},_updateCircle:function(i){var l=i._point.round(),p=Math.round(i._radius),x=Math.round(i._radiusY||p);this._setPath(i,i._empty()?"M0 0":"AL "+l.x+","+l.y+" "+p+","+x+" 0,"+65535*360)},_setPath:function(i,l){i._path.v=l},_bringToFront:function(i){Br(i._container)},_bringToBack:function(i){En(i._container)}},Sn=me.vml?ao:_o,ki=fr.extend({_initContainer:function(){this._container=Sn("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Sn("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ii(this._container),ei(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){fr.prototype._update.call(this);var i=this._bounds,l=i.getSize(),p=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,p.setAttribute("width",l.x),p.setAttribute("height",l.y)),Zt(p,i.min),p.setAttribute("viewBox",[i.min.x,i.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(i){var l=i._path=Sn("path");i.options.className&&dt(l,i.options.className),i.options.interactive&&dt(l,"leaflet-interactive"),this._updateStyle(i),this._layers[E(i)]=i},_addPath:function(i){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(i._path),i.addInteractiveTarget(i._path)},_removePath:function(i){ii(i._path),i.removeInteractiveTarget(i._path),delete this._layers[E(i)]},_updatePath:function(i){i._project(),i._update()},_updateStyle:function(i){var l=i._path,p=i.options;l&&(p.stroke?(l.setAttribute("stroke",p.color),l.setAttribute("stroke-opacity",p.opacity),l.setAttribute("stroke-width",p.weight),l.setAttribute("stroke-linecap",p.lineCap),l.setAttribute("stroke-linejoin",p.lineJoin),p.dashArray?l.setAttribute("stroke-dasharray",p.dashArray):l.removeAttribute("stroke-dasharray"),p.dashOffset?l.setAttribute("stroke-dashoffset",p.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),p.fill?(l.setAttribute("fill",p.fillColor||p.color),l.setAttribute("fill-opacity",p.fillOpacity),l.setAttribute("fill-rule",p.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(i,l){this._setPath(i,We(i._parts,l))},_updateCircle:function(i){var l=i._point,p=Math.max(Math.round(i._radius),1),x=Math.max(Math.round(i._radiusY),1)||p,k="a"+p+","+x+" 0 1,0 ",F=i._empty()?"M0 0":"M"+(l.x-p)+","+l.y+k+p*2+",0 "+k+-p*2+",0 ";this._setPath(i,F)},_setPath:function(i,l){i._path.setAttribute("d",l)},_bringToFront:function(i){Br(i._path)},_bringToBack:function(i){En(i._path)}});me.vml&&ki.include(_l);function Gi(i){return me.svg||me.vml?new ki(i):null}qe.include({getRenderer:function(i){var l=i.options.renderer||this._getPaneRenderer(i.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(i){if(i==="overlayPane"||i===void 0)return!1;var l=this._paneRenderers[i];return l===void 0&&(l=this._createRenderer({pane:i}),this._paneRenderers[i]=l),l},_createRenderer:function(i){return this.options.preferCanvas&&Io(i)||Gi(i)}});var Xa=Zn.extend({initialize:function(i,l){Zn.prototype.initialize.call(this,this._boundsToLatLngs(i),l)},setBounds:function(i){return this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){return i=pe(i),[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}});function qn(i,l){return new Xa(i,l)}ki.create=Sn,ki.pointsToPath=We,ur.geometryToLayer=eo,ur.coordsToLatLng=Po,ur.coordsToLatLngs=Ao,ur.latLngToCoords=Bo,ur.latLngsToCoords=na,ur.getFeature=io,ur.asFeature=ra,qe.mergeOptions({boxZoom:!0});var Ie=Ni.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane,this._resetStateTimeout=0,i.on("unload",this._destroy,this)},addHooks:function(){Pe(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ei(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ii(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(i){if(!i.shiftKey||i.which!==1&&i.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ie(),oi(),this._startPoint=this._map.mouseEventToContainerPoint(i),Pe(document,{contextmenu:Cn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(i){this._moved||(this._moved=!0,this._box=Ne("div","leaflet-zoom-box",this._container),dt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(i);var l=new rt(this._point,this._startPoint),p=l.getSize();Zt(this._box,l.min),this._box.style.width=p.x+"px",this._box.style.height=p.y+"px"},_finish:function(){this._moved&&(ii(this._box),Pt(this._container,"leaflet-crosshair")),Be(),Qe(),ei(document,{contextmenu:Cn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(i){if(!(i.which!==1&&i.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(y(this._resetState,this),0);var l=new Ce(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(i){i.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});qe.addInitHook("addHandler","boxZoom",Ie),qe.mergeOptions({doubleClickZoom:!0});var ha=Ni.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(i){var l=this._map,p=l.getZoom(),x=l.options.zoomDelta,k=i.originalEvent.shiftKey?p-x:p+x;l.options.doubleClickZoom==="center"?l.setZoom(k):l.setZoomAround(i.containerPoint,k)}});qe.addInitHook("addHandler","doubleClickZoom",ha),qe.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Ro=Ni.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new Vn(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),i.on("zoomend",this._onZoomEnd,this),i.whenReady(this._onZoomEnd,this))}dt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Pt(this._map._container,"leaflet-grab"),Pt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var i=this._map;if(i._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=pe(this._map.options.maxBounds);this._offsetLimit=It(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(i){if(this._map.options.inertia){var l=this._lastTime=+new Date,p=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(p),this._times.push(l),this._prunePositions(l)}this._map.fire("move",i).fire("drag",i)},_prunePositions:function(i){for(;this._positions.length>1&&i-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var i=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(i).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(i,l){return i-(i-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var i=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;i.x<l.min.x&&(i.x=this._viscousLimit(i.x,l.min.x)),i.y<l.min.y&&(i.y=this._viscousLimit(i.y,l.min.y)),i.x>l.max.x&&(i.x=this._viscousLimit(i.x,l.max.x)),i.y>l.max.y&&(i.y=this._viscousLimit(i.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(i)}},_onPreDragWrap:function(){var i=this._worldWidth,l=Math.round(i/2),p=this._initialWorldOffset,x=this._draggable._newPos.x,k=(x-l+p)%i+l-p,F=(x+l+p)%i-l-p,Q=Math.abs(k+p)<Math.abs(F+p)?k:F;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Q},_onDragEnd:function(i){var l=this._map,p=l.options,x=!p.inertia||i.noInertia||this._times.length<2;if(l.fire("dragend",i),x)l.fire("moveend");else{this._prunePositions(+new Date);var k=this._lastPos.subtract(this._positions[0]),F=(this._lastTime-this._times[0])/1e3,Q=p.easeLinearity,gt=k.multiplyBy(Q/F),bt=gt.distanceTo([0,0]),Ft=Math.min(p.inertiaMaxSpeed,bt),re=gt.multiplyBy(Ft/bt),Ae=Ft/(p.inertiaDeceleration*Q),He=re.multiplyBy(-Ae/2).round();!He.x&&!He.y?l.fire("moveend"):(He=l._limitOffset(He,l.options.maxBounds),yt(function(){l.panBy(He,{duration:Ae,easeLinearity:Q,noMoveStart:!0,animate:!0})}))}}});qe.addInitHook("addHandler","dragging",Ro),qe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var dr=Ni.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(i){this._map=i,this._setPanDelta(i.options.keyboardPanDelta),this._setZoomDelta(i.options.zoomDelta)},addHooks:function(){var i=this._map._container;i.tabIndex<=0&&(i.tabIndex="0"),Pe(i,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ei(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=document.body,l=document.documentElement,p=i.scrollTop||l.scrollTop,x=i.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(x,p)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(i){var l=this._panKeys={},p=this.keyCodes,x,k;for(x=0,k=p.left.length;x<k;x++)l[p.left[x]]=[-1*i,0];for(x=0,k=p.right.length;x<k;x++)l[p.right[x]]=[i,0];for(x=0,k=p.down.length;x<k;x++)l[p.down[x]]=[0,i];for(x=0,k=p.up.length;x<k;x++)l[p.up[x]]=[0,-1*i]},_setZoomDelta:function(i){var l=this._zoomKeys={},p=this.keyCodes,x,k;for(x=0,k=p.zoomIn.length;x<k;x++)l[p.zoomIn[x]]=i;for(x=0,k=p.zoomOut.length;x<k;x++)l[p.zoomOut[x]]=-i},_addHooks:function(){Pe(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ei(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(i){if(!(i.altKey||i.ctrlKey||i.metaKey)){var l=i.keyCode,p=this._map,x;if(l in this._panKeys){if(!p._panAnim||!p._panAnim._inProgress)if(x=this._panKeys[l],i.shiftKey&&(x=Rt(x).multiplyBy(3)),p.options.maxBounds&&(x=p._limitOffset(Rt(x),p.options.maxBounds)),p.options.worldCopyJump){var k=p.wrapLatLng(p.unproject(p.project(p.getCenter()).add(x)));p.panTo(k)}else p.panBy(x)}else if(l in this._zoomKeys)p.setZoom(p.getZoom()+(i.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&p._popup&&p._popup.options.closeOnEscapeKey)p.closePopup();else return;Cn(i)}}});qe.addInitHook("addHandler","keyboard",dr),qe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Ge=Ni.extend({addHooks:function(){Pe(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ei(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(i){var l=Lo(i),p=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(i),this._startTime||(this._startTime=+new Date);var x=Math.max(p-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(y(this._performZoom,this),x),Cn(i)},_performZoom:function(){var i=this._map,l=i.getZoom(),p=this._map.options.zoomSnap||0;i._stop();var x=this._delta/(this._map.options.wheelPxPerZoomLevel*4),k=4*Math.log(2/(1+Math.exp(-Math.abs(x))))/Math.LN2,F=p?Math.ceil(k/p)*p:k,Q=i._limitZoom(l+(this._delta>0?F:-F))-l;this._delta=0,this._startTime=null,Q&&(i.options.scrollWheelZoom==="center"?i.setZoom(l+Q):i.setZoomAround(this._lastMousePos,l+Q))}});qe.addInitHook("addHandler","scrollWheelZoom",Ge);var ca=600;qe.mergeOptions({tapHold:me.touchNative&&me.safari&&me.mobile,tapTolerance:15});var Xi=Ni.extend({addHooks:function(){Pe(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ei(this._map._container,"touchstart",this._onDown,this)},_onDown:function(i){if(clearTimeout(this._holdTimeout),i.touches.length===1){var l=i.touches[0];this._startPos=this._newPos=new At(l.clientX,l.clientY),this._holdTimeout=setTimeout(y(function(){this._cancel(),this._isTapValid()&&(Pe(document,"touchend",mi),Pe(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),ca),Pe(document,"touchend touchcancel contextmenu",this._cancel,this),Pe(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function i(){ei(document,"touchend",mi),ei(document,"touchend touchcancel",i)},_cancel:function(){clearTimeout(this._holdTimeout),ei(document,"touchend touchcancel contextmenu",this._cancel,this),ei(document,"touchmove",this._onMove,this)},_onMove:function(i){var l=i.touches[0];this._newPos=new At(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(i,l){var p=new MouseEvent(i,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});p._simulated=!0,l.target.dispatchEvent(p)}});qe.addInitHook("addHandler","tapHold",Xi),qe.mergeOptions({touchZoom:me.touch,bounceAtZoomLimits:!0});var zi=Ni.extend({addHooks:function(){dt(this._map._container,"leaflet-touch-zoom"),Pe(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Pt(this._map._container,"leaflet-touch-zoom"),ei(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(i){var l=this._map;if(!(!i.touches||i.touches.length!==2||l._animatingZoom||this._zooming)){var p=l.mouseEventToContainerPoint(i.touches[0]),x=l.mouseEventToContainerPoint(i.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(p.add(x)._divideBy(2))),this._startDist=p.distanceTo(x),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),Pe(document,"touchmove",this._onTouchMove,this),Pe(document,"touchend touchcancel",this._onTouchEnd,this),mi(i)}},_onTouchMove:function(i){if(!(!i.touches||i.touches.length!==2||!this._zooming)){var l=this._map,p=l.mouseEventToContainerPoint(i.touches[0]),x=l.mouseEventToContainerPoint(i.touches[1]),k=p.distanceTo(x)/this._startDist;if(this._zoom=l.getScaleZoom(k,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&k<1||this._zoom>l.getMaxZoom()&&k>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,k===1)return}else{var F=p._add(x)._divideBy(2)._subtract(this._centerPoint);if(k===1&&F.x===0&&F.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(F),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),Ct(this._animRequest);var Q=y(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=yt(Q,this,!0),mi(i)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Ct(this._animRequest),ei(document,"touchmove",this._onTouchMove,this),ei(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});qe.addInitHook("addHandler","touchZoom",zi),qe.BoxZoom=Ie,qe.DoubleClickZoom=ha,qe.Drag=Ro,qe.Keyboard=dr,qe.ScrollWheelZoom=Ge,qe.TapHold=Xi,qe.TouchZoom=zi,o.Bounds=rt,o.Browser=me,o.CRS=Fe,o.Canvas=ua,o.Circle=ea,o.CircleMarker=lr,o.Class=Le,o.Control=De,o.DivIcon=aa,o.DivOverlay=cr,o.DomEvent=Rr,o.DomUtil=Si,o.Draggable=Vn,o.Evented=ce,o.FeatureGroup=Wn,o.GeoJSON=ur,o.GridLayer=rs,o.Handler=Ni,o.Icon=Os,o.ImageOverlay=hr,o.LatLng=ge,o.LatLngBounds=Ce,o.Layer=on,o.LayerGroup=is,o.LineUtil=Co,o.Map=qe,o.Marker=Nr,o.Mixin=Ga,o.Path=Fr,o.Point=At,o.PolyUtil=Ul,o.Polygon=Zn,o.Polyline=bn,o.Popup=ns,o.PosAnimation=Xo,o.Projection=ar,o.Rectangle=Xa,o.Renderer=fr,o.SVG=ki,o.SVGOverlay=Ka,o.TileLayer=ss,o.Tooltip=so,o.Transformation=en,o.Util=oe,o.VideoOverlay=no,o.bind=y,o.bounds=It,o.canvas=Io,o.circle=$n,o.circleMarker=Za,o.control=or,o.divIcon=gl,o.extend=f,o.featureGroup=fl,o.geoJSON=oa,o.geoJson=On,o.gridLayer=oo,o.icon=dl,o.imageOverlay=pl,o.latLng=ae,o.latLngBounds=pe,o.layerGroup=bo,o.map=Or,o.marker=Wl,o.point=Rt,o.polygon=ko,o.polyline=$l,o.popup=ro,o.rectangle=qn,o.setOptions=Z,o.stamp=E,o.svg=Gi,o.svgOverlay=Ja,o.tileLayer=la,o.tooltip=To,o.transformation=vs,o.version=c,o.videoOverlay=qa;var os=window.L;o.noConflict=function(){return window.L=os,this},window.L=o}))})(du,du.exports)),du.exports}var go=Ig();const tn=Oh(go),Rg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABSCAMAAAAhFXfZAAAC91BMVEVMaXEzeak2f7I4g7g3g7cua5gzeKg8hJo3grY4g7c3grU0gLI2frE0daAubJc2gbQwd6QzeKk2gLMtd5sxdKIua5g1frA2f7IydaM0e6w2fq41fK01eqo3grgubJgta5cxdKI1f7AydaQydaMxc6EubJgvbJkwcZ4ubZkwcJwubZgubJcydqUydKIxapgubJctbJcubZcubJcvbJYubJcvbZkubJctbJctbZcubJg2f7AubJcrbZcubJcubJcua5g3grY0fq8ubJcubJdEkdEwhsw6i88vhswuhcsuhMtBjMgthMsrg8srgss6is8qgcs8i9A9iMYtg8spgcoogMo7hcMngMonf8olfso4gr8kfck5iM8jfMk4iM8he8k1fro7itAgesk2hs8eecgzfLcofssdeMg0hc4cd8g2hcsxeLQbdsgZdcgxeLImfcszhM0vda4xgckzhM4xg84wf8Yxgs4udKsvfcQucqhUndROmdM1fK0wcZ8vb5w0eqpQm9MzeKhXoNVcpdYydKNWn9VZotVKltJFjsIwcJ1Rms9OlslLmtH///8+kc9epdYzd6dbo9VHkMM2f7FHmNBClM8ydqVcpNY9hro3gLM9hLczealQmcw3fa46f7A8gLMxc6I3eagyc6FIldJMl9JSnNRSntNNl9JPnNJFi75UnM9ZodVKksg8kM45jc09e6ZHltFBk883gbRBh7pDk9EwcaBzn784g7dKkcY2i81Om9M7j85Llc81is09g7Q4grY/j9A0eqxKmdFFltBEjcXf6fFImdBCiLxJl9FGlNFBi78yiMxVndEvbpo6js74+vx+psPP3+o/ks5HkcpGmNCjwdZCkNDM3ehYoNJEls+lxNkxh8xHks0+jdC1zd5Lg6r+/v/H2ufz9/o3jM3t8/edvdM/k89Th61OiLBSjbZklbaTt9BfptdjmL1AicBHj8hGk9FAgK1dkLNTjLRekrdClc/k7fM0icy0y9tgp9c4jc2NtM9Dlc8zicxeXZn3AAAAQ3RSTlMAHDdTb4yPA+LtnEQmC4L2EmHqB7XA0d0sr478x4/Yd5i1zOfyPkf1sLVq4Nh3FvjxopQ2/STNuFzUwFIwxKaejILpIBEV9wAABhVJREFUeF6s1NdyFEcYBeBeoQIhRAkLlRDGrhIgY3BJL8CVeKzuyXFzzjkn5ZxzzuScg3PO8cKzu70JkO0LfxdTU//pM9vTu7Xgf6KqOVTb9X7toRrVEfBf1HTVjZccrT/2by1VV928Yty9ZbVuucdz90frG8DBjl9pVApbOstvmMuvVgaNXSfAAd6pGxpy6yxf5ph43pS/4f3uoaGm2rdu72S9xzOvMymkZFq/ptDrk90mhW7e4zl7HLzhxGWPR20xmSxJ/VqldG5m9XhaVOA1DadsNh3Pu5L2N6QtPO/32JpqQBVVk20oy/Pi2s23WEvyfHbe1thadVQttvm7Llf65gGmXK67XtupyoM7HQhmXdLS8oGWJNeOJ3C5fG5XCEJnkez3/oFdsvgJ4l2ANZwhrJKk/7OSXa+3Vw2WJMlKnGkobouYk6T0TyX30klOUnTD9HJ5qpckL3EW/w4XF3Xd0FGywXUrstrclVsqz5Pd/sXFYyDnPdrLcQODmGOK47IZb4CmibmMn+MYRzFZ5jg33ZL/EJrWcszHmANy3ARBK/IXtciJy8VsitPSdE3uuHxzougojcUdr8/32atnz/ev3f/K5wtpxUTpcaI45zusVDpYtZi+jg0oU9b3x74h7+n9ABvYEZeKaVq0sh0AtLKsFtqNBdeT0MrSzwwlq9+x6xAO4tgOtSzbCjrNQQiNvQUbUEubvzBUeGw26yDCsRHCoLkTHDa7IdOLIThs/gHvChszh2CimE8peRs47cxANI0lYNB5y1DljpOF0IhzBDPOZnDOqYYbeGKECbPzWnXludPphw5c2YBq5zlwXphIbO4VDCZ0gnPfUO1TwZoYwAs2ExPCedAu9DAjfQUjzITQb3jNj0KG2Sgt6BHaQUdYzWz+XmBktOHwanXjaSTcwwziBcuMOtwBmqPrTOxFQR/DRKKPqyur0aiW6cULYsx6tBm0jXpR/AUWR6HRq9WVW6MRhIq5jLyjbaCTDCijyYJNpCajdyobP/eTw0iexBAKkJ3gA5KcQb2zBXsIBckn+xVv8jkZSaEFHE+jFEleAEfayRU0MouNoBmB/L50Ai/HSLIHxcrpCvnhSQAuakKp2C/YbCylJjXRVy/z3+Kv/RrNcCo+WUzlVEhzKffnTQnxeN9fWF88fiNCUdSTsaufaChKWInHeysygfpIqagoakW+vV20J8uyl6TyNKEZWV4oRSPyCkWpgOLSbkCObT8o2r6tlG58HQquf6O0v50tB7JM7F4EORd2dx/K0w/KHsVkLPaoYrwgP/y7krr3SSMA4zj+OBgmjYkxcdIJQyQRKgg2viX9Hddi9UBb29LrKR7CVVEEEXWojUkXNyfTNDE14W9gbHJNuhjDettN3ZvbOvdOqCD3Jp/9l+/wJE+9PkYGjx/fqkys3S2rMozM/o2106rfMUINo6hVqz+eu/hd1c4xTg0TAfy5kV+4UG6+IthHTU9woWmxuKNbTfuCSfovBCxq7EtHqvYL4Sm6F8GVxsSXHMQ07TOi1DKtZxjWaaIyi4CXWjxPccUw8WVbMYY5wxC1mzEyXMJWkllpRloi+Kkoq69sxBTlElF6aAxYUbjXNlhlDZilDnM4U5SlN5biRsRHnbx3mbeWjEh4mEyiuJDl5XcWVmX5GvNkFgLWZM5qwsop4/AWfLhU1cR7k1VVvcYCWRkOI6Xy5gmnphCYIkvzuNYzHzosq2oNk2RtSs8khfUOfHIDgR6ysYBaMpl4uEgk2U/oJTs9AaTSwma7dT69geAE2ZpEjUsn2ieJNHeKfrI3EcAGJ2ZaNgVuC8EBctCLc57P5u5led6IOBkIYkuQMrmmjChs4VkfOerHqSBkPzZlhe06RslZ3zMjk2sscqKwY0RcjKK+LWbzd7KiHhkncs/siFJ+V5eXxD34B8nVuJEpGJNmxN2gH3vSvp7J70tF+D1Ej8qUJD1TkErAND2GZwTFg/LubvmgiBG3SOvdlsqFQrkEzJCL1rstlnVFROixZoDDSuXQFHESwVGlcuQcMb/b42NgjLowh5MTDFE3vNB5qStRIErdCQEh6pLPR92anSUb/wAIhldAaDMpGgAAAABJRU5ErkJggg==",Og="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",Dg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC";function Y0(e,n){const o=Mt.useRef(n);Mt.useEffect(function(){n!==o.current&&e.attributionControl!=null&&(o.current!=null&&e.attributionControl.removeAttribution(o.current),n!=null&&e.attributionControl.addAttribution(n)),o.current=n},[e,n])}var Ng=X0();const Fg=1;function Gg(e){return Object.freeze({__version:Fg,map:e})}function Dh(e,n){return Object.freeze({...e,...n})}const Q0=Mt.createContext(null),af=Q0.Provider;function Pu(){const e=Mt.useContext(Q0);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function tp(e){function n(o,c){const{instance:f,context:g}=e(o).current;return Mt.useImperativeHandle(c,()=>f),o.children==null?null:ms.createElement(af,{value:g},o.children)}return Mt.forwardRef(n)}function zg(e){function n(o,c){const[f,g]=Mt.useState(!1),{instance:y}=e(o,g).current;Mt.useImperativeHandle(c,()=>y),Mt.useEffect(function(){f&&y.update()},[y,f,o.children]);const v=y._contentNode;return v?Ng.createPortal(o.children,v):null}return Mt.forwardRef(n)}function jg(e){function n(o,c){const{instance:f}=e(o).current;return Mt.useImperativeHandle(c,()=>f),null}return Mt.forwardRef(n)}function Ug(e){return function(o){const c=Pu(),f=e(o,c),{instance:g}=f.current,y=Mt.useRef(o.position),{position:v}=o;return Mt.useEffect(function(){return g.addTo(c.map),function(){g.remove()}},[c.map,g]),Mt.useEffect(function(){v!=null&&v!==y.current&&(g.setPosition(v),y.current=v)},[g,v]),f}}function ep(e,n){const o=Mt.useRef();Mt.useEffect(function(){return n!=null&&e.instance.on(n),o.current=n,function(){o.current!=null&&e.instance.off(o.current),o.current=null}},[e,n])}function lf(e,n){const o=e.pane??n.pane;return o?{...e,pane:o}:e}function Hg(e,n){return function(c,f){const g=Pu(),y=e(lf(c,g),g);return Y0(g.map,c.attribution),ep(y.current,c.eventHandlers),n(y.current,g,c,f),y}}function Au(e,n,o){return Object.freeze({instance:e,context:n,container:o})}function Nh(e,n){return n==null?function(c,f){const g=Mt.useRef();return g.current||(g.current=e(c,f)),g}:function(c,f){const g=Mt.useRef();g.current||(g.current=e(c,f));const y=Mt.useRef(c),{instance:v}=g.current;return Mt.useEffect(function(){y.current!==c&&(n(v,c,y.current),y.current=c)},[v,c,f]),g}}function Vg(e,n){Mt.useEffect(function(){return(n.layerContainer??n.map).addLayer(e.instance),function(){var g;(g=n.layerContainer)==null||g.removeLayer(e.instance),n.map.removeLayer(e.instance)}},[n,e])}function ip(e){return function(o){const c=Pu(),f=e(lf(o,c),c);return Y0(c.map,o.attribution),ep(f.current,o.eventHandlers),Vg(f.current,c),f}}function np(e,n){const o=Nh(e,n),c=ip(o);return tp(c)}function Wg(e,n){const o=Nh(e),c=Hg(o,n);return zg(c)}function $g(e,n){const o=Nh(e,n),c=ip(o);return jg(c)}function Zg(e,n,o){const{opacity:c,zIndex:f}=n;c!=null&&c!==o.opacity&&e.setOpacity(c),f!=null&&f!==o.zIndex&&e.setZIndex(f)}function qg(e,n,o){n.bounds instanceof go.LatLngBounds&&n.bounds!==o.bounds&&e.setBounds(n.bounds),n.opacity!=null&&n.opacity!==o.opacity&&e.setOpacity(n.opacity),n.zIndex!=null&&n.zIndex!==o.zIndex&&e.setZIndex(n.zIndex)}function Ia(){return Pu().map}function Kg(e){const n=Ia();return Mt.useEffect(function(){return n.on(e),function(){n.off(e)}},[n,e]),n}const Jg=np(function({bounds:n,url:o,...c},f){const g=new go.ImageOverlay(o,n,c);return Au(g,Dh(f,{overlayContainer:g}))},function(n,o,c){if(qg(n,o,c),o.bounds!==c.bounds){const f=o.bounds instanceof go.LatLngBounds?o.bounds:new go.LatLngBounds(o.bounds);n.setBounds(f)}o.url!==c.url&&n.setUrl(o.url)}),Xg=Nh(function({children:n,...o},c){const f=new go.Control.Layers(void 0,void 0,o);return Au(f,Dh(c,{layersControl:f}))},function(n,o,c){o.collapsed!==c.collapsed&&(o.collapsed===!0?n.collapse():n.expand())}),Yg=Ug(Xg),Tl=tp(Yg);function rp(e){return function(o){const c=Pu(),f=Mt.useRef(o),[g,y]=Mt.useState(null),{layersControl:v,map:E}=c,A=Mt.useCallback(B=>{v!=null&&(f.current.checked&&E.addLayer(B),e(v,B,f.current.name),y(B))},[v,E]),D=Mt.useCallback(B=>{v==null||v.removeLayer(B),y(null)},[v]),P=Mt.useMemo(()=>Dh(c,{layerContainer:{addLayer:A,removeLayer:D}}),[c,A,D]);return Mt.useEffect(()=>{g!==null&&f.current!==o&&(o.checked===!0&&(f.current.checked==null||f.current.checked===!1)?E.addLayer(g):f.current.checked===!0&&(o.checked==null||o.checked===!1)&&E.removeLayer(g),f.current=o)}),o.children?ms.createElement(af,{value:P},o.children):null}}Tl.BaseLayer=rp(function(n,o,c){n.addBaseLayer(o,c)});Tl.Overlay=rp(function(n,o,c){n.addOverlay(o,c)});function Vc(){return Vc=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(e[c]=o[c])}return e},Vc.apply(this,arguments)}function Qg({bounds:e,boundsOptions:n,center:o,children:c,className:f,id:g,placeholder:y,style:v,whenReady:E,zoom:A,...D},P){const[B]=Mt.useState({className:f,id:g,style:v}),[W,J]=Mt.useState(null);Mt.useImperativeHandle(P,()=>(W==null?void 0:W.map)??null,[W]);const Z=Mt.useCallback(ct=>{if(ct!==null&&W===null){const ft=new go.Map(ct,D);o!=null&&A!=null?ft.setView(o,A):e!=null&&ft.fitBounds(e,n),E!=null&&ft.whenReady(E),J(Gg(ft))}},[]);Mt.useEffect(()=>()=>{W==null||W.map.remove()},[W]);const q=W?ms.createElement(af,{value:W},c):y??null;return ms.createElement("div",Vc({},B,{ref:Z}),q)}const tm=Mt.forwardRef(Qg),em=np(function({position:n,...o},c){const f=new go.Marker(n,o);return Au(f,Dh(c,{overlayContainer:f}))},function(n,o,c){o.position!==c.position&&n.setLatLng(o.position),o.icon!=null&&o.icon!==c.icon&&n.setIcon(o.icon),o.zIndexOffset!=null&&o.zIndexOffset!==c.zIndexOffset&&n.setZIndexOffset(o.zIndexOffset),o.opacity!=null&&o.opacity!==c.opacity&&n.setOpacity(o.opacity),n.dragging!=null&&o.draggable!==c.draggable&&(o.draggable===!0?n.dragging.enable():n.dragging.disable())}),Tc=$g(function({url:n,...o},c){const f=new go.TileLayer(n,lf(o,c));return Au(f,c)},function(n,o,c){Zg(n,o,c);const{url:f}=o;f!=null&&f!==c.url&&n.setUrl(f)}),im=Wg(function(n,o){const c=new go.Tooltip(n,o.overlayContainer);return Au(c,o)},function(n,o,{position:c},f){Mt.useEffect(function(){const y=o.overlayContainer;if(y==null)return;const{instance:v}=n,E=D=>{D.tooltip===v&&(c!=null&&v.setLatLng(c),v.update(),f(!0))},A=D=>{D.tooltip===v&&f(!1)};return y.on({tooltipopen:E,tooltipclose:A}),y.bindTooltip(v),function(){y.off({tooltipopen:E,tooltipclose:A}),y._map!=null&&y.unbindTooltip()}},[n,o,f,c])});var Jd={},Xd;function nm(){return Xd||(Xd=1,(()=>{var Ql,El;var e=Object.create,n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,f=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty,y=(s,a)=>()=>(a||s((a={exports:{}}).exports,a),a.exports),v=(s,a,h,d)=>{if(a&&typeof a=="object"||typeof a=="function")for(let _ of c(a))!g.call(s,_)&&_!==h&&n(s,_,{get:()=>a[_],enumerable:!(d=o(a,_))||d.enumerable});return s},E=(s,a,h)=>(h=s!=null?e(f(s)):{},v(a||!s||!s.__esModule?n(h,"default",{value:s,enumerable:!0}):h,s)),A=y((s,a)=>{function h(){this.__data__=[],this.size=0}a.exports=h}),D=y((s,a)=>{function h(d,_){return d===_||d!==d&&_!==_}a.exports=h}),P=y((s,a)=>{var h=D();function d(_,w){for(var b=_.length;b--;)if(h(_[b][0],w))return b;return-1}a.exports=d}),B=y((s,a)=>{var h=P(),d=Array.prototype,_=d.splice;function w(b){var S=this.__data__,T=h(S,b);if(T<0)return!1;var O=S.length-1;return T==O?S.pop():_.call(S,T,1),--this.size,!0}a.exports=w}),W=y((s,a)=>{var h=P();function d(_){var w=this.__data__,b=h(w,_);return b<0?void 0:w[b][1]}a.exports=d}),J=y((s,a)=>{var h=P();function d(_){return h(this.__data__,_)>-1}a.exports=d}),Z=y((s,a)=>{var h=P();function d(_,w){var b=this.__data__,S=h(b,_);return S<0?(++this.size,b.push([_,w])):b[S][1]=w,this}a.exports=d}),q=y((s,a)=>{var h=A(),d=B(),_=W(),w=J(),b=Z();function S(T){var O=-1,X=T==null?0:T.length;for(this.clear();++O<X;){var $=T[O];this.set($[0],$[1])}}S.prototype.clear=h,S.prototype.delete=d,S.prototype.get=_,S.prototype.has=w,S.prototype.set=b,a.exports=S}),ct=y((s,a)=>{var h=q();function d(){this.__data__=new h,this.size=0}a.exports=d}),ft=y((s,a)=>{function h(d){var _=this.__data__,w=_.delete(d);return this.size=_.size,w}a.exports=h}),St=y((s,a)=>{function h(d){return this.__data__.get(d)}a.exports=h}),Tt=y((s,a)=>{function h(d){return this.__data__.has(d)}a.exports=h}),Gt=y((s,a)=>{var h=typeof hh=="object"&&hh&&hh.Object===Object&&hh;a.exports=h}),zt=y((s,a)=>{var h=Gt(),d=typeof self=="object"&&self&&self.Object===Object&&self,_=h||d||Function("return this")();a.exports=_}),Dt=y((s,a)=>{var h=zt(),d=h.Symbol;a.exports=d}),ut=y((s,a)=>{var h=Dt(),d=Object.prototype,_=d.hasOwnProperty,w=d.toString,b=h?h.toStringTag:void 0;function S(T){var O=_.call(T,b),X=T[b];try{T[b]=void 0;var $=!0}catch{}var _t=w.call(T);return $&&(O?T[b]=X:delete T[b]),_t}a.exports=S}),Bt=y((s,a)=>{var h=Object.prototype,d=h.toString;function _(w){return d.call(w)}a.exports=_}),st=y((s,a)=>{var h=Dt(),d=ut(),_=Bt(),w="[object Null]",b="[object Undefined]",S=h?h.toStringTag:void 0;function T(O){return O==null?O===void 0?b:w:S&&S in Object(O)?d(O):_(O)}a.exports=T}),yt=y((s,a)=>{function h(d){var _=typeof d;return d!=null&&(_=="object"||_=="function")}a.exports=h}),Ct=y((s,a)=>{var h=st(),d=yt(),_="[object AsyncFunction]",w="[object Function]",b="[object GeneratorFunction]",S="[object Proxy]";function T(O){if(!d(O))return!1;var X=h(O);return X==w||X==b||X==_||X==S}a.exports=T}),oe=y((s,a)=>{var h=zt(),d=h["__core-js_shared__"];a.exports=d}),Le=y((s,a)=>{var h=oe(),d=(function(){var w=/[^.]+$/.exec(h&&h.keys&&h.keys.IE_PROTO||"");return w?"Symbol(src)_1."+w:""})();function _(w){return!!d&&d in w}a.exports=_}),_e=y((s,a)=>{var h=Function.prototype,d=h.toString;function _(w){if(w!=null){try{return d.call(w)}catch{}try{return w+""}catch{}}return""}a.exports=_}),de=y((s,a)=>{var h=Ct(),d=Le(),_=yt(),w=_e(),b=/[\\^$.*+?()[\]{}|]/g,S=/^\[object .+?Constructor\]$/,T=Function.prototype,O=Object.prototype,X=T.toString,$=O.hasOwnProperty,_t=RegExp("^"+X.call($).replace(b,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Et(Ut){if(!_(Ut)||d(Ut))return!1;var te=h(Ut)?_t:S;return te.test(w(Ut))}a.exports=Et}),ce=y((s,a)=>{function h(d,_){return d==null?void 0:d[_]}a.exports=h}),At=y((s,a)=>{var h=de(),d=ce();function _(w,b){var S=d(w,b);return h(S)?S:void 0}a.exports=_}),Qt=y((s,a)=>{var h=At(),d=zt(),_=h(d,"Map");a.exports=_}),Rt=y((s,a)=>{var h=At(),d=h(Object,"create");a.exports=d}),rt=y((s,a)=>{var h=Rt();function d(){this.__data__=h?h(null):{},this.size=0}a.exports=d}),It=y((s,a)=>{function h(d){var _=this.has(d)&&delete this.__data__[d];return this.size-=_?1:0,_}a.exports=h}),Ce=y((s,a)=>{var h=Rt(),d="__lodash_hash_undefined__",_=Object.prototype,w=_.hasOwnProperty;function b(S){var T=this.__data__;if(h){var O=T[S];return O===d?void 0:O}return w.call(T,S)?T[S]:void 0}a.exports=b}),pe=y((s,a)=>{var h=Rt(),d=Object.prototype,_=d.hasOwnProperty;function w(b){var S=this.__data__;return h?S[b]!==void 0:_.call(S,b)}a.exports=w}),ge=y((s,a)=>{var h=Rt(),d="__lodash_hash_undefined__";function _(w,b){var S=this.__data__;return this.size+=this.has(w)?0:1,S[w]=h&&b===void 0?d:b,this}a.exports=_}),ae=y((s,a)=>{var h=rt(),d=It(),_=Ce(),w=pe(),b=ge();function S(T){var O=-1,X=T==null?0:T.length;for(this.clear();++O<X;){var $=T[O];this.set($[0],$[1])}}S.prototype.clear=h,S.prototype.delete=d,S.prototype.get=_,S.prototype.has=w,S.prototype.set=b,a.exports=S}),Fe=y((s,a)=>{var h=ae(),d=q(),_=Qt();function w(){this.size=0,this.__data__={hash:new h,map:new(_||d),string:new h}}a.exports=w}),Ve=y((s,a)=>{function h(d){var _=typeof d;return _=="string"||_=="number"||_=="symbol"||_=="boolean"?d!=="__proto__":d===null}a.exports=h}),$e=y((s,a)=>{var h=Ve();function d(_,w){var b=_.__data__;return h(w)?b[typeof w=="string"?"string":"hash"]:b.map}a.exports=d}),Mi=y((s,a)=>{var h=$e();function d(_){var w=h(this,_).delete(_);return this.size-=w?1:0,w}a.exports=d}),en=y((s,a)=>{var h=$e();function d(_){return h(this,_).get(_)}a.exports=d}),vs=y((s,a)=>{var h=$e();function d(_){return h(this,_).has(_)}a.exports=d}),nn=y((s,a)=>{var h=$e();function d(_,w){var b=h(this,_),S=b.size;return b.set(_,w),this.size+=b.size==S?0:1,this}a.exports=d}),Je=y((s,a)=>{var h=Fe(),d=Mi(),_=en(),w=vs(),b=nn();function S(T){var O=-1,X=T==null?0:T.length;for(this.clear();++O<X;){var $=T[O];this.set($[0],$[1])}}S.prototype.clear=h,S.prototype.delete=d,S.prototype.get=_,S.prototype.has=w,S.prototype.set=b,a.exports=S}),_o=y((s,a)=>{var h=q(),d=Qt(),_=Je(),w=200;function b(S,T){var O=this.__data__;if(O instanceof h){var X=O.__data__;if(!d||X.length<w-1)return X.push([S,T]),this.size=++O.size,this;O=this.__data__=new _(X)}return O.set(S,T),this.size=O.size,this}a.exports=b}),We=y((s,a)=>{var h=q(),d=ct(),_=ft(),w=St(),b=Tt(),S=_o();function T(O){var X=this.__data__=new h(O);this.size=X.size}T.prototype.clear=d,T.prototype.delete=_,T.prototype.get=w,T.prototype.has=b,T.prototype.set=S,a.exports=T}),jr=y((s,a)=>{var h=At(),d=(function(){try{var _=h(Object,"defineProperty");return _({},"",{}),_}catch{}})();a.exports=d}),Ei=y((s,a)=>{var h=jr();function d(_,w,b){w=="__proto__"&&h?h(_,w,{configurable:!0,enumerable:!0,value:b,writable:!0}):_[w]=b}a.exports=d}),Ks=y((s,a)=>{var h=Ei(),d=D();function _(w,b,S){(S!==void 0&&!d(w[b],S)||S===void 0&&!(b in w))&&h(w,b,S)}a.exports=_}),bi=y((s,a)=>{function h(d){return function(_,w,b){for(var S=-1,T=Object(_),O=b(_),X=O.length;X--;){var $=O[d?X:++S];if(w(T[$],$,T)===!1)break}return _}}a.exports=h}),ir=y((s,a)=>{var h=bi(),d=h();a.exports=d}),$i=y((s,a)=>{var h=zt(),d=typeof s=="object"&&s&&!s.nodeType&&s,_=d&&typeof a=="object"&&a&&!a.nodeType&&a,w=_&&_.exports===d,b=w?h.Buffer:void 0,S=b?b.allocUnsafe:void 0;function T(O,X){if(X)return O.slice();var $=O.length,_t=S?S($):new O.constructor($);return O.copy(_t),_t}a.exports=T}),yo=y((s,a)=>{var h=zt(),d=h.Uint8Array;a.exports=d}),si=y((s,a)=>{var h=yo();function d(_){var w=new _.constructor(_.byteLength);return new h(w).set(new h(_)),w}a.exports=d}),xs=y((s,a)=>{var h=si();function d(_,w){var b=w?h(_.buffer):_.buffer;return new _.constructor(b,_.byteOffset,_.length)}a.exports=d}),Ii=y((s,a)=>{function h(d,_){var w=-1,b=d.length;for(_||(_=Array(b));++w<b;)_[w]=d[w];return _}a.exports=h}),ws=y((s,a)=>{var h=yt(),d=Object.create,_=(function(){function w(){}return function(b){if(!h(b))return{};if(d)return d(b);w.prototype=b;var S=new w;return w.prototype=void 0,S}})();a.exports=_}),Ri=y((s,a)=>{function h(d,_){return function(w){return d(_(w))}}a.exports=h}),vo=y((s,a)=>{var h=Ri(),d=h(Object.getPrototypeOf,Object);a.exports=d}),kr=y((s,a)=>{var h=Object.prototype;function d(_){var w=_&&_.constructor,b=typeof w=="function"&&w.prototype||h;return _===b}a.exports=d}),Zi=y((s,a)=>{var h=ws(),d=vo(),_=kr();function w(b){return typeof b.constructor=="function"&&!_(b)?h(d(b)):{}}a.exports=w}),Un=y((s,a)=>{function h(d){return d!=null&&typeof d=="object"}a.exports=h}),Ur=y((s,a)=>{var h=st(),d=Un(),_="[object Arguments]";function w(b){return d(b)&&h(b)==_}a.exports=w}),Hr=y((s,a)=>{var h=Ur(),d=Un(),_=Object.prototype,w=_.hasOwnProperty,b=_.propertyIsEnumerable,S=h((function(){return arguments})())?h:function(T){return d(T)&&w.call(T,"callee")&&!b.call(T,"callee")};a.exports=S}),Oi=y((s,a)=>{var h=Array.isArray;a.exports=h}),Vr=y((s,a)=>{var h=9007199254740991;function d(_){return typeof _=="number"&&_>-1&&_%1==0&&_<=h}a.exports=d}),xn=y((s,a)=>{var h=Ct(),d=Vr();function _(w){return w!=null&&d(w.length)&&!h(w)}a.exports=_}),Ms=y((s,a)=>{var h=xn(),d=Un();function _(w){return d(w)&&h(w)}a.exports=_}),qi=y((s,a)=>{function h(){return!1}a.exports=h}),Es=y((s,a)=>{var h=zt(),d=qi(),_=typeof s=="object"&&s&&!s.nodeType&&s,w=_&&typeof a=="object"&&a&&!a.nodeType&&a,b=w&&w.exports===_,S=b?h.Buffer:void 0,T=S?S.isBuffer:void 0,O=T||d;a.exports=O}),Se=y((s,a)=>{var h=st(),d=vo(),_=Un(),w="[object Object]",b=Function.prototype,S=Object.prototype,T=b.toString,O=S.hasOwnProperty,X=T.call(Object);function $(_t){if(!_(_t)||h(_t)!=w)return!1;var Et=d(_t);if(Et===null)return!0;var Ut=O.call(Et,"constructor")&&Et.constructor;return typeof Ut=="function"&&Ut instanceof Ut&&T.call(Ut)==X}a.exports=$}),rn=y((s,a)=>{var h=st(),d=Vr(),_=Un(),w="[object Arguments]",b="[object Array]",S="[object Boolean]",T="[object Date]",O="[object Error]",X="[object Function]",$="[object Map]",_t="[object Number]",Et="[object Object]",Ut="[object RegExp]",te="[object Set]",le="[object String]",Ke="[object WeakMap]",K="[object ArrayBuffer]",tt="[object DataView]",at="[object Float32Array]",xt="[object Float64Array]",ht="[object Int8Array]",wt="[object Int16Array]",I="[object Int32Array]",G="[object Uint8Array]",j="[object Uint8ClampedArray]",z="[object Uint16Array]",H="[object Uint32Array]",U={};U[at]=U[xt]=U[ht]=U[wt]=U[I]=U[G]=U[j]=U[z]=U[H]=!0,U[w]=U[b]=U[K]=U[S]=U[tt]=U[T]=U[O]=U[X]=U[$]=U[_t]=U[Et]=U[Ut]=U[te]=U[le]=U[Ke]=!1;function et(it){return _(it)&&d(it.length)&&!!U[h(it)]}a.exports=et}),Ho=y((s,a)=>{function h(d){return function(_){return d(_)}}a.exports=h}),Oa=y((s,a)=>{var h=Gt(),d=typeof s=="object"&&s&&!s.nodeType&&s,_=d&&typeof a=="object"&&a&&!a.nodeType&&a,w=_&&_.exports===d,b=w&&h.process,S=(function(){try{var T=_&&_.require&&_.require("util").types;return T||b&&b.binding&&b.binding("util")}catch{}})();a.exports=S}),xo=y((s,a)=>{var h=rn(),d=Ho(),_=Oa(),w=_&&_.isTypedArray,b=w?d(w):h;a.exports=b}),Vo=y((s,a)=>{function h(d,_){if(!(_==="constructor"&&typeof d[_]=="function")&&_!="__proto__")return d[_]}a.exports=h}),Pr=y((s,a)=>{var h=Ei(),d=D(),_=Object.prototype,w=_.hasOwnProperty;function b(S,T,O){var X=S[T];(!(w.call(S,T)&&d(X,O))||O===void 0&&!(T in S))&&h(S,T,O)}a.exports=b}),Ls=y((s,a)=>{var h=Pr(),d=Ei();function _(w,b,S,T){var O=!S;S||(S={});for(var X=-1,$=b.length;++X<$;){var _t=b[X],Et=T?T(S[_t],w[_t],_t,S,w):void 0;Et===void 0&&(Et=w[_t]),O?d(S,_t,Et):h(S,_t,Et)}return S}a.exports=_}),Cs=y((s,a)=>{function h(d,_){for(var w=-1,b=Array(d);++w<d;)b[w]=_(w);return b}a.exports=h}),yi=y((s,a)=>{var h=9007199254740991,d=/^(?:0|[1-9]\d*)$/;function _(w,b){var S=typeof w;return b=b??h,!!b&&(S=="number"||S!="symbol"&&d.test(w))&&w>-1&&w%1==0&&w<b}a.exports=_}),bs=y((s,a)=>{var h=Cs(),d=Hr(),_=Oi(),w=Es(),b=yi(),S=xo(),T=Object.prototype,O=T.hasOwnProperty;function X($,_t){var Et=_($),Ut=!Et&&d($),te=!Et&&!Ut&&w($),le=!Et&&!Ut&&!te&&S($),Ke=Et||Ut||te||le,K=Ke?h($.length,String):[],tt=K.length;for(var at in $)(_t||O.call($,at))&&!(Ke&&(at=="length"||te&&(at=="offset"||at=="parent")||le&&(at=="buffer"||at=="byteLength"||at=="byteOffset")||b(at,tt)))&&K.push(at);return K}a.exports=X}),wn=y((s,a)=>{function h(d){var _=[];if(d!=null)for(var w in Object(d))_.push(w);return _}a.exports=h}),Wo=y((s,a)=>{var h=yt(),d=kr(),_=wn(),w=Object.prototype,b=w.hasOwnProperty;function S(T){if(!h(T))return _(T);var O=d(T),X=[];for(var $ in T)$=="constructor"&&(O||!b.call(T,$))||X.push($);return X}a.exports=S}),Di=y((s,a)=>{var h=bs(),d=Wo(),_=xn();function w(b){return _(b)?h(b,!0):d(b)}a.exports=w}),me=y((s,a)=>{var h=Ls(),d=Di();function _(w){return h(w,d(w))}a.exports=_}),Ss=y((s,a)=>{var h=Ks(),d=$i(),_=xs(),w=Ii(),b=Zi(),S=Hr(),T=Oi(),O=Ms(),X=Es(),$=Ct(),_t=yt(),Et=Se(),Ut=xo(),te=Vo(),le=me();function Ke(K,tt,at,xt,ht,wt,I){var G=te(K,at),j=te(tt,at),z=I.get(j);if(z){h(K,at,z);return}var H=wt?wt(G,j,at+"",K,tt,I):void 0,U=H===void 0;if(U){var et=T(j),it=!et&&X(j),ot=!et&&!it&&Ut(j);H=j,et||it||ot?T(G)?H=G:O(G)?H=w(G):it?(U=!1,H=d(j,!0)):ot?(U=!1,H=_(j,!0)):H=[]:Et(j)||S(j)?(H=G,S(G)?H=le(G):(!_t(G)||$(G))&&(H=b(j))):U=!1}U&&(I.set(j,H),ht(H,j,xt,wt,I),I.delete(j)),h(K,at,H)}a.exports=Ke}),ks=y((s,a)=>{var h=We(),d=Ks(),_=ir(),w=Ss(),b=yt(),S=Di(),T=Vo();function O(X,$,_t,Et,Ut){X!==$&&_($,function(te,le){if(Ut||(Ut=new h),b(te))w(X,$,le,_t,O,Et,Ut);else{var Ke=Et?Et(T(X,le),te,le+"",X,$,Ut):void 0;Ke===void 0&&(Ke=te),d(X,le,Ke)}},S)}a.exports=O}),Wr=y((s,a)=>{function h(d){return d}a.exports=h}),$o=y((s,a)=>{function h(d,_,w){switch(w.length){case 0:return d.call(_);case 1:return d.call(_,w[0]);case 2:return d.call(_,w[0],w[1]);case 3:return d.call(_,w[0],w[1],w[2])}return d.apply(_,w)}a.exports=h}),wo=y((s,a)=>{var h=$o(),d=Math.max;function _(w,b,S){return b=d(b===void 0?w.length-1:b,0),function(){for(var T=arguments,O=-1,X=d(T.length-b,0),$=Array(X);++O<X;)$[O]=T[b+O];O=-1;for(var _t=Array(b+1);++O<b;)_t[O]=T[O];return _t[b]=S($),h(w,this,_t)}}a.exports=_}),nr=y((s,a)=>{function h(d){return function(){return d}}a.exports=h}),rr=y((s,a)=>{var h=nr(),d=jr(),_=Wr(),w=d?function(b,S){return d(b,"toString",{configurable:!0,enumerable:!1,value:h(S),writable:!0})}:_;a.exports=w}),$r=y((s,a)=>{var h=800,d=16,_=Date.now;function w(b){var S=0,T=0;return function(){var O=_(),X=d-(O-T);if(T=O,X>0){if(++S>=h)return arguments[0]}else S=0;return b.apply(void 0,arguments)}}a.exports=w}),Da=y((s,a)=>{var h=rr(),d=$r(),_=d(h);a.exports=_}),Zo=y((s,a)=>{var h=Wr(),d=wo(),_=Da();function w(b,S){return _(d(b,S,h),b+"")}a.exports=w}),qo=y((s,a)=>{var h=D(),d=xn(),_=yi(),w=yt();function b(S,T,O){if(!w(O))return!1;var X=typeof T;return(X=="number"?d(O)&&_(T,O.length):X=="string"&&T in O)?h(O[T],S):!1}a.exports=b}),Ko=y((s,a)=>{var h=Zo(),d=qo();function _(w){return h(function(b,S){var T=-1,O=S.length,X=O>1?S[O-1]:void 0,$=O>2?S[2]:void 0;for(X=w.length>3&&typeof X=="function"?(O--,X):void 0,$&&d(S[0],S[1],$)&&(X=O<3?void 0:X,O=1),b=Object(b);++T<O;){var _t=S[T];_t&&w(b,_t,T,X)}return b})}a.exports=_}),Zr=y((s,a)=>{var h=ks(),d=Ko(),_=d(function(w,b,S){h(w,b,S)});a.exports=_}),Mo=y((s,a)=>{var h=st(),d=Un(),_="[object Symbol]";function w(b){return typeof b=="symbol"||d(b)&&h(b)==_}a.exports=w}),Js=y((s,a)=>{var h=Oi(),d=Mo(),_=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,w=/^\w*$/;function b(S,T){if(h(S))return!1;var O=typeof S;return O=="number"||O=="symbol"||O=="boolean"||S==null||d(S)?!0:w.test(S)||!_.test(S)||T!=null&&S in Object(T)}a.exports=b}),gi=y((s,a)=>{var h=Je(),d="Expected a function";function _(w,b){if(typeof w!="function"||b!=null&&typeof b!="function")throw new TypeError(d);var S=function(){var T=arguments,O=b?b.apply(this,T):T[0],X=S.cache;if(X.has(O))return X.get(O);var $=w.apply(this,T);return S.cache=X.set(O,$)||X,$};return S.cache=new(_.Cache||h),S}_.Cache=h,a.exports=_}),Na=y((s,a)=>{var h=gi(),d=500;function _(w){var b=h(w,function(T){return S.size===d&&S.clear(),T}),S=b.cache;return b}a.exports=_}),qr=y((s,a)=>{var h=Na(),d=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_=/\\(\\)?/g,w=h(function(b){var S=[];return b.charCodeAt(0)===46&&S.push(""),b.replace(d,function(T,O,X,$){S.push(X?$.replace(_,"$1"):O||T)}),S});a.exports=w}),Jo=y((s,a)=>{function h(d,_){for(var w=-1,b=d==null?0:d.length,S=Array(b);++w<b;)S[w]=_(d[w],w,d);return S}a.exports=h}),Ps=y((s,a)=>{var h=Dt(),d=Jo(),_=Oi(),w=Mo(),b=h?h.prototype:void 0,S=b?b.toString:void 0;function T(O){if(typeof O=="string")return O;if(_(O))return d(O,T)+"";if(w(O))return S?S.call(O):"";var X=O+"";return X=="0"&&1/O==-1/0?"-0":X}a.exports=T}),Kr=y((s,a)=>{var h=Ps();function d(_){return _==null?"":h(_)}a.exports=d}),Ar=y((s,a)=>{var h=Oi(),d=Js(),_=qr(),w=Kr();function b(S,T){return h(S)?S:d(S,T)?[S]:_(w(S))}a.exports=b}),As=y((s,a)=>{var h=Mo();function d(_){if(typeof _=="string"||h(_))return _;var w=_+"";return w=="0"&&1/_==-1/0?"-0":w}a.exports=d}),Mn=y((s,a)=>{var h=Ar(),d=As();function _(w,b){b=h(b,w);for(var S=0,T=b.length;w!=null&&S<T;)w=w[d(b[S++])];return S&&S==T?w:void 0}a.exports=_}),sr=y((s,a)=>{var h=Mn();function d(_,w,b){var S=_==null?void 0:h(_,w);return S===void 0?b:S}a.exports=d}),Ne=y((s,a)=>{(function(h,d){typeof s=="object"&&typeof a<"u"?a.exports=d():(h=h||self).RBush=d()})(s,function(){function h(K,tt,at,xt,ht){(function wt(I,G,j,z,H){for(;z>j;){if(z-j>600){var U=z-j+1,et=G-j+1,it=Math.log(U),ot=.5*Math.exp(2*it/3),pt=.5*Math.sqrt(it*ot*(U-ot)/U)*(et-U/2<0?-1:1),mt=Math.max(j,Math.floor(G-et*ot/U+pt)),Nt=Math.min(z,Math.floor(G+(U-et)*ot/U+pt));wt(I,G,mt,Nt,H)}var ne=I[G],he=j,Me=z;for(d(I,j,G),H(I[z],ne)>0&&d(I,j,z);he<Me;){for(d(I,he,Me),he++,Me--;H(I[he],ne)<0;)he++;for(;H(I[Me],ne)>0;)Me--}H(I[j],ne)===0?d(I,j,Me):d(I,++Me,z),Me<=G&&(j=Me+1),G<=Me&&(z=Me-1)}})(K,tt,at||0,xt||K.length-1,ht||_)}function d(K,tt,at){var xt=K[tt];K[tt]=K[at],K[at]=xt}function _(K,tt){return K<tt?-1:K>tt?1:0}var w=function(K){K===void 0&&(K=9),this._maxEntries=Math.max(4,K),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function b(K,tt,at){if(!at)return tt.indexOf(K);for(var xt=0;xt<tt.length;xt++)if(at(K,tt[xt]))return xt;return-1}function S(K,tt){T(K,0,K.children.length,tt,K)}function T(K,tt,at,xt,ht){ht||(ht=le(null)),ht.minX=1/0,ht.minY=1/0,ht.maxX=-1/0,ht.maxY=-1/0;for(var wt=tt;wt<at;wt++){var I=K.children[wt];O(ht,K.leaf?xt(I):I)}return ht}function O(K,tt){return K.minX=Math.min(K.minX,tt.minX),K.minY=Math.min(K.minY,tt.minY),K.maxX=Math.max(K.maxX,tt.maxX),K.maxY=Math.max(K.maxY,tt.maxY),K}function X(K,tt){return K.minX-tt.minX}function $(K,tt){return K.minY-tt.minY}function _t(K){return(K.maxX-K.minX)*(K.maxY-K.minY)}function Et(K){return K.maxX-K.minX+(K.maxY-K.minY)}function Ut(K,tt){return K.minX<=tt.minX&&K.minY<=tt.minY&&tt.maxX<=K.maxX&&tt.maxY<=K.maxY}function te(K,tt){return tt.minX<=K.maxX&&tt.minY<=K.maxY&&tt.maxX>=K.minX&&tt.maxY>=K.minY}function le(K){return{children:K,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Ke(K,tt,at,xt,ht){for(var wt=[tt,at];wt.length;)if(!((at=wt.pop())-(tt=wt.pop())<=xt)){var I=tt+Math.ceil((at-tt)/xt/2)*xt;h(K,I,tt,at,ht),wt.push(tt,I,I,at)}}return w.prototype.all=function(){return this._all(this.data,[])},w.prototype.search=function(K){var tt=this.data,at=[];if(!te(K,tt))return at;for(var xt=this.toBBox,ht=[];tt;){for(var wt=0;wt<tt.children.length;wt++){var I=tt.children[wt],G=tt.leaf?xt(I):I;te(K,G)&&(tt.leaf?at.push(I):Ut(K,G)?this._all(I,at):ht.push(I))}tt=ht.pop()}return at},w.prototype.collides=function(K){var tt=this.data;if(!te(K,tt))return!1;for(var at=[];tt;){for(var xt=0;xt<tt.children.length;xt++){var ht=tt.children[xt],wt=tt.leaf?this.toBBox(ht):ht;if(te(K,wt)){if(tt.leaf||Ut(K,wt))return!0;at.push(ht)}}tt=at.pop()}return!1},w.prototype.load=function(K){if(!K||!K.length)return this;if(K.length<this._minEntries){for(var tt=0;tt<K.length;tt++)this.insert(K[tt]);return this}var at=this._build(K.slice(),0,K.length-1,0);if(this.data.children.length)if(this.data.height===at.height)this._splitRoot(this.data,at);else{if(this.data.height<at.height){var xt=this.data;this.data=at,at=xt}this._insert(at,this.data.height-at.height-1,!0)}else this.data=at;return this},w.prototype.insert=function(K){return K&&this._insert(K,this.data.height-1),this},w.prototype.clear=function(){return this.data=le([]),this},w.prototype.remove=function(K,tt){if(!K)return this;for(var at,xt,ht,wt=this.data,I=this.toBBox(K),G=[],j=[];wt||G.length;){if(wt||(wt=G.pop(),xt=G[G.length-1],at=j.pop(),ht=!0),wt.leaf){var z=b(K,wt.children,tt);if(z!==-1)return wt.children.splice(z,1),G.push(wt),this._condense(G),this}ht||wt.leaf||!Ut(wt,I)?xt?(at++,wt=xt.children[at],ht=!1):wt=null:(G.push(wt),j.push(at),at=0,xt=wt,wt=wt.children[0])}return this},w.prototype.toBBox=function(K){return K},w.prototype.compareMinX=function(K,tt){return K.minX-tt.minX},w.prototype.compareMinY=function(K,tt){return K.minY-tt.minY},w.prototype.toJSON=function(){return this.data},w.prototype.fromJSON=function(K){return this.data=K,this},w.prototype._all=function(K,tt){for(var at=[];K;)K.leaf?tt.push.apply(tt,K.children):at.push.apply(at,K.children),K=at.pop();return tt},w.prototype._build=function(K,tt,at,xt){var ht,wt=at-tt+1,I=this._maxEntries;if(wt<=I)return S(ht=le(K.slice(tt,at+1)),this.toBBox),ht;xt||(xt=Math.ceil(Math.log(wt)/Math.log(I)),I=Math.ceil(wt/Math.pow(I,xt-1))),(ht=le([])).leaf=!1,ht.height=xt;var G=Math.ceil(wt/I),j=G*Math.ceil(Math.sqrt(I));Ke(K,tt,at,j,this.compareMinX);for(var z=tt;z<=at;z+=j){var H=Math.min(z+j-1,at);Ke(K,z,H,G,this.compareMinY);for(var U=z;U<=H;U+=G){var et=Math.min(U+G-1,H);ht.children.push(this._build(K,U,et,xt-1))}}return S(ht,this.toBBox),ht},w.prototype._chooseSubtree=function(K,tt,at,xt){for(;xt.push(tt),!tt.leaf&&xt.length-1!==at;){for(var ht=1/0,wt=1/0,I=void 0,G=0;G<tt.children.length;G++){var j=tt.children[G],z=_t(j),H=(U=K,et=j,(Math.max(et.maxX,U.maxX)-Math.min(et.minX,U.minX))*(Math.max(et.maxY,U.maxY)-Math.min(et.minY,U.minY))-z);H<wt?(wt=H,ht=z<ht?z:ht,I=j):H===wt&&z<ht&&(ht=z,I=j)}tt=I||tt.children[0]}var U,et;return tt},w.prototype._insert=function(K,tt,at){var xt=at?K:this.toBBox(K),ht=[],wt=this._chooseSubtree(xt,this.data,tt,ht);for(wt.children.push(K),O(wt,xt);tt>=0&&ht[tt].children.length>this._maxEntries;)this._split(ht,tt),tt--;this._adjustParentBBoxes(xt,ht,tt)},w.prototype._split=function(K,tt){var at=K[tt],xt=at.children.length,ht=this._minEntries;this._chooseSplitAxis(at,ht,xt);var wt=this._chooseSplitIndex(at,ht,xt),I=le(at.children.splice(wt,at.children.length-wt));I.height=at.height,I.leaf=at.leaf,S(at,this.toBBox),S(I,this.toBBox),tt?K[tt-1].children.push(I):this._splitRoot(at,I)},w.prototype._splitRoot=function(K,tt){this.data=le([K,tt]),this.data.height=K.height+1,this.data.leaf=!1,S(this.data,this.toBBox)},w.prototype._chooseSplitIndex=function(K,tt,at){for(var xt,ht,wt,I,G,j,z,H=1/0,U=1/0,et=tt;et<=at-tt;et++){var it=T(K,0,et,this.toBBox),ot=T(K,et,at,this.toBBox),pt=(ht=it,wt=ot,I=void 0,G=void 0,j=void 0,z=void 0,I=Math.max(ht.minX,wt.minX),G=Math.max(ht.minY,wt.minY),j=Math.min(ht.maxX,wt.maxX),z=Math.min(ht.maxY,wt.maxY),Math.max(0,j-I)*Math.max(0,z-G)),mt=_t(it)+_t(ot);pt<H?(H=pt,xt=et,U=mt<U?mt:U):pt===H&&mt<U&&(U=mt,xt=et)}return xt||at-tt},w.prototype._chooseSplitAxis=function(K,tt,at){var xt=K.leaf?this.compareMinX:X,ht=K.leaf?this.compareMinY:$;this._allDistMargin(K,tt,at,xt)<this._allDistMargin(K,tt,at,ht)&&K.children.sort(xt)},w.prototype._allDistMargin=function(K,tt,at,xt){K.children.sort(xt);for(var ht=this.toBBox,wt=T(K,0,tt,ht),I=T(K,at-tt,at,ht),G=Et(wt)+Et(I),j=tt;j<at-tt;j++){var z=K.children[j];O(wt,K.leaf?ht(z):z),G+=Et(wt)}for(var H=at-tt-1;H>=tt;H--){var U=K.children[H];O(I,K.leaf?ht(U):U),G+=Et(I)}return G},w.prototype._adjustParentBBoxes=function(K,tt,at){for(var xt=at;xt>=0;xt--)O(tt[xt],K)},w.prototype._condense=function(K){for(var tt=K.length-1,at=void 0;tt>=0;tt--)K[tt].children.length===0?tt>0?(at=K[tt-1].children).splice(at.indexOf(K[tt]),1):this.clear():S(K[tt],this.toBBox)},w})}),ii=y(s=>{Object.defineProperty(s,"__esModule",{value:!0}),s.earthRadius=63710088e-1,s.factors={centimeters:s.earthRadius*100,centimetres:s.earthRadius*100,degrees:s.earthRadius/111325,feet:s.earthRadius*3.28084,inches:s.earthRadius*39.37,kilometers:s.earthRadius/1e3,kilometres:s.earthRadius/1e3,meters:s.earthRadius,metres:s.earthRadius,miles:s.earthRadius/1609.344,millimeters:s.earthRadius*1e3,millimetres:s.earthRadius*1e3,nauticalmiles:s.earthRadius/1852,radians:1,yards:s.earthRadius*1.0936},s.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/s.earthRadius,yards:1.0936133},s.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function a(z,H,U){U===void 0&&(U={});var et={type:"Feature"};return(U.id===0||U.id)&&(et.id=U.id),U.bbox&&(et.bbox=U.bbox),et.properties=H||{},et.geometry=z,et}s.feature=a;function h(z,H,U){switch(z){case"Point":return d(H).geometry;case"LineString":return S(H).geometry;case"Polygon":return w(H).geometry;case"MultiPoint":return $(H).geometry;case"MultiLineString":return X(H).geometry;case"MultiPolygon":return _t(H).geometry;default:throw new Error(z+" is invalid")}}s.geometry=h;function d(z,H,U){if(U===void 0&&(U={}),!z)throw new Error("coordinates is required");if(!Array.isArray(z))throw new Error("coordinates must be an Array");if(z.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!wt(z[0])||!wt(z[1]))throw new Error("coordinates must contain numbers");var et={type:"Point",coordinates:z};return a(et,H,U)}s.point=d;function _(z,H,U){return U===void 0&&(U={}),O(z.map(function(et){return d(et,H)}),U)}s.points=_;function w(z,H,U){U===void 0&&(U={});for(var et=0,it=z;et<it.length;et++){var ot=it[et];if(ot.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var pt=0;pt<ot[ot.length-1].length;pt++)if(ot[ot.length-1][pt]!==ot[0][pt])throw new Error("First and last Position are not equivalent.")}var mt={type:"Polygon",coordinates:z};return a(mt,H,U)}s.polygon=w;function b(z,H,U){return U===void 0&&(U={}),O(z.map(function(et){return w(et,H)}),U)}s.polygons=b;function S(z,H,U){if(U===void 0&&(U={}),z.length<2)throw new Error("coordinates must be an array of two or more positions");var et={type:"LineString",coordinates:z};return a(et,H,U)}s.lineString=S;function T(z,H,U){return U===void 0&&(U={}),O(z.map(function(et){return S(et,H)}),U)}s.lineStrings=T;function O(z,H){H===void 0&&(H={});var U={type:"FeatureCollection"};return H.id&&(U.id=H.id),H.bbox&&(U.bbox=H.bbox),U.features=z,U}s.featureCollection=O;function X(z,H,U){U===void 0&&(U={});var et={type:"MultiLineString",coordinates:z};return a(et,H,U)}s.multiLineString=X;function $(z,H,U){U===void 0&&(U={});var et={type:"MultiPoint",coordinates:z};return a(et,H,U)}s.multiPoint=$;function _t(z,H,U){U===void 0&&(U={});var et={type:"MultiPolygon",coordinates:z};return a(et,H,U)}s.multiPolygon=_t;function Et(z,H,U){U===void 0&&(U={});var et={type:"GeometryCollection",geometries:z};return a(et,H,U)}s.geometryCollection=Et;function Ut(z,H){if(H===void 0&&(H=0),H&&!(H>=0))throw new Error("precision must be a positive number");var U=Math.pow(10,H||0);return Math.round(z*U)/U}s.round=Ut;function te(z,H){H===void 0&&(H="kilometers");var U=s.factors[H];if(!U)throw new Error(H+" units is invalid");return z*U}s.radiansToLength=te;function le(z,H){H===void 0&&(H="kilometers");var U=s.factors[H];if(!U)throw new Error(H+" units is invalid");return z/U}s.lengthToRadians=le;function Ke(z,H){return tt(le(z,H))}s.lengthToDegrees=Ke;function K(z){var H=z%360;return H<0&&(H+=360),H}s.bearingToAzimuth=K;function tt(z){var H=z%(2*Math.PI);return H*180/Math.PI}s.radiansToDegrees=tt;function at(z){var H=z%360;return H*Math.PI/180}s.degreesToRadians=at;function xt(z,H,U){if(H===void 0&&(H="kilometers"),U===void 0&&(U="kilometers"),!(z>=0))throw new Error("length must be a positive number");return te(le(z,H),U)}s.convertLength=xt;function ht(z,H,U){if(H===void 0&&(H="meters"),U===void 0&&(U="kilometers"),!(z>=0))throw new Error("area must be a positive number");var et=s.areaFactors[H];if(!et)throw new Error("invalid original units");var it=s.areaFactors[U];if(!it)throw new Error("invalid final units");return z/et*it}s.convertArea=ht;function wt(z){return!isNaN(z)&&z!==null&&!Array.isArray(z)}s.isNumber=wt;function I(z){return!!z&&z.constructor===Object}s.isObject=I;function G(z){if(!z)throw new Error("bbox is required");if(!Array.isArray(z))throw new Error("bbox must be an Array");if(z.length!==4&&z.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");z.forEach(function(H){if(!wt(H))throw new Error("bbox must only contain numbers")})}s.validateBBox=G;function j(z){if(!z)throw new Error("id is required");if(["string","number"].indexOf(typeof z)===-1)throw new Error("id must be a number or a string")}s.validateId=j}),Jr=y(s=>{Object.defineProperty(s,"__esModule",{value:!0});var a=ii();function h(tt,at,xt){if(tt!==null)for(var ht,wt,I,G,j,z,H,U=0,et=0,it,ot=tt.type,pt=ot==="FeatureCollection",mt=ot==="Feature",Nt=pt?tt.features.length:1,ne=0;ne<Nt;ne++){H=pt?tt.features[ne].geometry:mt?tt.geometry:tt,it=H?H.type==="GeometryCollection":!1,j=it?H.geometries.length:1;for(var he=0;he<j;he++){var Me=0,Xe=0;if(G=it?H.geometries[he]:H,G!==null){z=G.coordinates;var ai=G.type;switch(U=xt&&(ai==="Polygon"||ai==="MultiPolygon")?1:0,ai){case null:break;case"Point":if(at(z,et,ne,Me,Xe)===!1)return!1;et++,Me++;break;case"LineString":case"MultiPoint":for(ht=0;ht<z.length;ht++){if(at(z[ht],et,ne,Me,Xe)===!1)return!1;et++,ai==="MultiPoint"&&Me++}ai==="LineString"&&Me++;break;case"Polygon":case"MultiLineString":for(ht=0;ht<z.length;ht++){for(wt=0;wt<z[ht].length-U;wt++){if(at(z[ht][wt],et,ne,Me,Xe)===!1)return!1;et++}ai==="MultiLineString"&&Me++,ai==="Polygon"&&Xe++}ai==="Polygon"&&Me++;break;case"MultiPolygon":for(ht=0;ht<z.length;ht++){for(Xe=0,wt=0;wt<z[ht].length;wt++){for(I=0;I<z[ht][wt].length-U;I++){if(at(z[ht][wt][I],et,ne,Me,Xe)===!1)return!1;et++}Xe++}Me++}break;case"GeometryCollection":for(ht=0;ht<G.geometries.length;ht++)if(h(G.geometries[ht],at,xt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function d(tt,at,xt,ht){var wt=xt;return h(tt,function(I,G,j,z,H){G===0&&xt===void 0?wt=I:wt=at(wt,I,G,j,z,H)},ht),wt}function _(tt,at){var xt;switch(tt.type){case"FeatureCollection":for(xt=0;xt<tt.features.length&&at(tt.features[xt].properties,xt)!==!1;xt++);break;case"Feature":at(tt.properties,0);break}}function w(tt,at,xt){var ht=xt;return _(tt,function(wt,I){I===0&&xt===void 0?ht=wt:ht=at(ht,wt,I)}),ht}function b(tt,at){if(tt.type==="Feature")at(tt,0);else if(tt.type==="FeatureCollection")for(var xt=0;xt<tt.features.length&&at(tt.features[xt],xt)!==!1;xt++);}function S(tt,at,xt){var ht=xt;return b(tt,function(wt,I){I===0&&xt===void 0?ht=wt:ht=at(ht,wt,I)}),ht}function T(tt){var at=[];return h(tt,function(xt){at.push(xt)}),at}function O(tt,at){var xt,ht,wt,I,G,j,z,H,U,et,it=0,ot=tt.type==="FeatureCollection",pt=tt.type==="Feature",mt=ot?tt.features.length:1;for(xt=0;xt<mt;xt++){for(j=ot?tt.features[xt].geometry:pt?tt.geometry:tt,H=ot?tt.features[xt].properties:pt?tt.properties:{},U=ot?tt.features[xt].bbox:pt?tt.bbox:void 0,et=ot?tt.features[xt].id:pt?tt.id:void 0,z=j?j.type==="GeometryCollection":!1,G=z?j.geometries.length:1,wt=0;wt<G;wt++){if(I=z?j.geometries[wt]:j,I===null){if(at(null,it,H,U,et)===!1)return!1;continue}switch(I.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(at(I,it,H,U,et)===!1)return!1;break}case"GeometryCollection":{for(ht=0;ht<I.geometries.length;ht++)if(at(I.geometries[ht],it,H,U,et)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}it++}}function X(tt,at,xt){var ht=xt;return O(tt,function(wt,I,G,j,z){I===0&&xt===void 0?ht=wt:ht=at(ht,wt,I,G,j,z)}),ht}function $(tt,at){O(tt,function(xt,ht,wt,I,G){var j=xt===null?null:xt.type;switch(j){case null:case"Point":case"LineString":case"Polygon":return at(a.feature(xt,wt,{bbox:I,id:G}),ht,0)===!1?!1:void 0}var z;switch(j){case"MultiPoint":z="Point";break;case"MultiLineString":z="LineString";break;case"MultiPolygon":z="Polygon";break}for(var H=0;H<xt.coordinates.length;H++){var U=xt.coordinates[H],et={type:z,coordinates:U};if(at(a.feature(et,wt),ht,H)===!1)return!1}})}function _t(tt,at,xt){var ht=xt;return $(tt,function(wt,I,G){I===0&&G===0&&xt===void 0?ht=wt:ht=at(ht,wt,I,G)}),ht}function Et(tt,at){$(tt,function(xt,ht,wt){var I=0;if(xt.geometry){var G=xt.geometry.type;if(!(G==="Point"||G==="MultiPoint")){var j,z=0,H=0,U=0;if(h(xt,function(et,it,ot,pt,mt){if(j===void 0||ht>z||pt>H||mt>U){j=et,z=ht,H=pt,U=mt,I=0;return}var Nt=a.lineString([j,et],xt.properties);if(at(Nt,ht,wt,mt,I)===!1)return!1;I++,j=et})===!1)return!1}}})}function Ut(tt,at,xt){var ht=xt,wt=!1;return Et(tt,function(I,G,j,z,H){wt===!1&&xt===void 0?ht=I:ht=at(ht,I,G,j,z,H),wt=!0}),ht}function te(tt,at){if(!tt)throw new Error("geojson is required");$(tt,function(xt,ht,wt){if(xt.geometry!==null){var I=xt.geometry.type,G=xt.geometry.coordinates;switch(I){case"LineString":if(at(xt,ht,wt,0,0)===!1)return!1;break;case"Polygon":for(var j=0;j<G.length;j++)if(at(a.lineString(G[j],xt.properties),ht,wt,j)===!1)return!1;break}}})}function le(tt,at,xt){var ht=xt;return te(tt,function(wt,I,G,j){I===0&&xt===void 0?ht=wt:ht=at(ht,wt,I,G,j)}),ht}function Ke(tt,at){if(at=at||{},!a.isObject(at))throw new Error("options is invalid");var xt=at.featureIndex||0,ht=at.multiFeatureIndex||0,wt=at.geometryIndex||0,I=at.segmentIndex||0,G=at.properties,j;switch(tt.type){case"FeatureCollection":xt<0&&(xt=tt.features.length+xt),G=G||tt.features[xt].properties,j=tt.features[xt].geometry;break;case"Feature":G=G||tt.properties,j=tt.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":j=tt;break;default:throw new Error("geojson is invalid")}if(j===null)return null;var z=j.coordinates;switch(j.type){case"Point":case"MultiPoint":return null;case"LineString":return I<0&&(I=z.length+I-1),a.lineString([z[I],z[I+1]],G,at);case"Polygon":return wt<0&&(wt=z.length+wt),I<0&&(I=z[wt].length+I-1),a.lineString([z[wt][I],z[wt][I+1]],G,at);case"MultiLineString":return ht<0&&(ht=z.length+ht),I<0&&(I=z[ht].length+I-1),a.lineString([z[ht][I],z[ht][I+1]],G,at);case"MultiPolygon":return ht<0&&(ht=z.length+ht),wt<0&&(wt=z[ht].length+wt),I<0&&(I=z[ht][wt].length-I-1),a.lineString([z[ht][wt][I],z[ht][wt][I+1]],G,at)}throw new Error("geojson is invalid")}function K(tt,at){if(at=at||{},!a.isObject(at))throw new Error("options is invalid");var xt=at.featureIndex||0,ht=at.multiFeatureIndex||0,wt=at.geometryIndex||0,I=at.coordIndex||0,G=at.properties,j;switch(tt.type){case"FeatureCollection":xt<0&&(xt=tt.features.length+xt),G=G||tt.features[xt].properties,j=tt.features[xt].geometry;break;case"Feature":G=G||tt.properties,j=tt.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":j=tt;break;default:throw new Error("geojson is invalid")}if(j===null)return null;var z=j.coordinates;switch(j.type){case"Point":return a.point(z,G,at);case"MultiPoint":return ht<0&&(ht=z.length+ht),a.point(z[ht],G,at);case"LineString":return I<0&&(I=z.length+I),a.point(z[I],G,at);case"Polygon":return wt<0&&(wt=z.length+wt),I<0&&(I=z[wt].length+I),a.point(z[wt][I],G,at);case"MultiLineString":return ht<0&&(ht=z.length+ht),I<0&&(I=z[ht].length+I),a.point(z[ht][I],G,at);case"MultiPolygon":return ht<0&&(ht=z.length+ht),wt<0&&(wt=z[ht].length+wt),I<0&&(I=z[ht][wt].length-I),a.point(z[ht][wt][I],G,at)}throw new Error("geojson is invalid")}s.coordAll=T,s.coordEach=h,s.coordReduce=d,s.featureEach=b,s.featureReduce=S,s.findPoint=K,s.findSegment=Ke,s.flattenEach=$,s.flattenReduce=_t,s.geomEach=O,s.geomReduce=X,s.lineEach=te,s.lineReduce=le,s.propEach=_,s.propReduce=w,s.segmentEach=Et,s.segmentReduce=Ut}),Br=y(s=>{Object.defineProperty(s,"__esModule",{value:!0});var a=Jr();function h(d){var _=[1/0,1/0,-1/0,-1/0];return a.coordEach(d,function(w){_[0]>w[0]&&(_[0]=w[0]),_[1]>w[1]&&(_[1]=w[1]),_[2]<w[0]&&(_[2]=w[0]),_[3]<w[1]&&(_[3]=w[1])}),_}h.default=h,s.default=h}),En=y((s,a)=>{var h=Ne(),d=ii(),_=Jr(),w=Br().default,b=_.featureEach;_.coordEach,d.polygon;var S=d.featureCollection;function T(O){var X=new h(O);return X.insert=function($){if($.type!=="Feature")throw new Error("invalid feature");return $.bbox=$.bbox?$.bbox:w($),h.prototype.insert.call(this,$)},X.load=function($){var _t=[];return Array.isArray($)?$.forEach(function(Et){if(Et.type!=="Feature")throw new Error("invalid features");Et.bbox=Et.bbox?Et.bbox:w(Et),_t.push(Et)}):b($,function(Et){if(Et.type!=="Feature")throw new Error("invalid features");Et.bbox=Et.bbox?Et.bbox:w(Et),_t.push(Et)}),h.prototype.load.call(this,_t)},X.remove=function($,_t){if($.type!=="Feature")throw new Error("invalid feature");return $.bbox=$.bbox?$.bbox:w($),h.prototype.remove.call(this,$,_t)},X.clear=function(){return h.prototype.clear.call(this)},X.search=function($){var _t=h.prototype.search.call(this,this.toBBox($));return S(_t)},X.collides=function($){return h.prototype.collides.call(this,this.toBBox($))},X.all=function(){var $=h.prototype.all.call(this);return S($)},X.toJSON=function(){return h.prototype.toJSON.call(this)},X.fromJSON=function($){return h.prototype.fromJSON.call(this,$)},X.toBBox=function($){var _t;if($.bbox)_t=$.bbox;else if(Array.isArray($)&&$.length===4)_t=$;else if(Array.isArray($)&&$.length===6)_t=[$[0],$[1],$[3],$[4]];else if($.type==="Feature")_t=w($);else if($.type==="FeatureCollection")_t=w($);else throw new Error("invalid geojson");return{minX:_t[0],minY:_t[1],maxX:_t[2],maxY:_t[3]}},X}a.exports=T,a.exports.default=T});Array.prototype.findIndex=Array.prototype.findIndex||function(s){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof s!="function")throw new TypeError("callback must be a function");for(var a=Object(this),h=a.length>>>0,d=arguments[1],_=0;_<h;_++)if(s.call(d,a[_],_,a))return _;return-1},Array.prototype.find=Array.prototype.find||function(s){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof s!="function")throw new TypeError("callback must be a function");for(var a=Object(this),h=a.length>>>0,d=arguments[1],_=0;_<h;_++){var w=a[_];if(s.call(d,w,_,a))return w}},typeof Object.assign!="function"&&(Object.assign=function(s){if(s==null)throw new TypeError("Cannot convert undefined or null to object");s=Object(s);for(var a=1;a<arguments.length;a++){var h=arguments[a];if(h!=null)for(var d in h)Object.prototype.hasOwnProperty.call(h,d)&&(s[d]=h[d])}return s}),(function(s){s.forEach(function(a){a.hasOwnProperty("remove")||Object.defineProperty(a,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})})([Element.prototype,CharacterData.prototype,DocumentType.prototype]),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(s,a){if(this==null)throw new TypeError('"this" is null or not defined');var h=Object(this),d=h.length>>>0;if(d===0)return!1;var _=a|0,w=Math.max(_>=0?_:d-Math.abs(_),0);function b(S,T){return S===T||typeof S=="number"&&typeof T=="number"&&isNaN(S)&&isNaN(T)}for(;w<d;){if(b(h[w],s))return!0;w++}return!1}});var V={version:"2.18.3"},dt=E(Zr()),Pt={tooltips:{placeMarker:"Click to place marker",firstVertex:"Click to place first vertex",continueLine:"Click to continue drawing",finishLine:"Click any existing marker to finish",finishPoly:"Click first marker to finish",finishRect:"Click to finish",startCircle:"Click to place circle center",finishCircle:"Click to finish circle",placeCircleMarker:"Click to place circle marker",placeText:"Click to place text",selectFirstLayerFor:"Select first layer for {action}",selectSecondLayerFor:"Select second layer for {action}"},actions:{finish:"Finish",cancel:"Cancel",removeLastVertex:"Remove Last Vertex"},buttonTitles:{drawMarkerButton:"Draw Marker",drawPolyButton:"Draw Polygons",drawLineButton:"Draw Polyline",drawCircleButton:"Draw Circle",drawRectButton:"Draw Rectangle",editButton:"Edit Layers",dragButton:"Drag Layers",cutButton:"Cut Layers",deleteButton:"Remove Layers",drawCircleMarkerButton:"Draw Circle Marker",snappingButton:"Snap dragged marker to other layers and vertices",pinningButton:"Pin shared vertices together",rotateButton:"Rotate Layers",drawTextButton:"Draw Text",scaleButton:"Scale Layers",autoTracingButton:"Auto trace Line",snapGuidesButton:"Show SnapGuides",unionButton:"Union layers",differenceButton:"Subtract layers"},measurements:{totalLength:"Length",segmentLength:"Segment length",area:"Area",radius:"Radius",perimeter:"Perimeter",height:"Height",width:"Width",coordinates:"Position",coordinatesMarker:"Position Marker"}},Kt={tooltips:{placeMarker:"Platziere den Marker mit Klick",firstVertex:"Platziere den ersten Marker mit Klick",continueLine:"Klicke, um weiter zu zeichnen",finishLine:"Beende mit Klick auf existierenden Marker",finishPoly:"Beende mit Klick auf ersten Marker",finishRect:"Beende mit Klick",startCircle:"Platziere das Kreiszentrum mit Klick",finishCircle:"Beende den Kreis mit Klick",placeCircleMarker:"Platziere den Kreismarker mit Klick",placeText:"Platziere den Text mit Klick"},actions:{finish:"Beenden",cancel:"Abbrechen",removeLastVertex:"Letzten Vertex lschen"},buttonTitles:{drawMarkerButton:"Marker zeichnen",drawPolyButton:"Polygon zeichnen",drawLineButton:"Polyline zeichnen",drawCircleButton:"Kreis zeichnen",drawRectButton:"Rechteck zeichnen",editButton:"Layer editieren",dragButton:"Layer bewegen",cutButton:"Layer schneiden",deleteButton:"Layer lschen",drawCircleMarkerButton:"Kreismarker zeichnen",snappingButton:"Bewegter Layer an andere Layer oder Vertexe einhacken",pinningButton:"Vertexe an der gleichen Position verknpfen",rotateButton:"Layer drehen",drawTextButton:"Text zeichnen",scaleButton:"Layer skalieren",autoTracingButton:"Linie automatisch nachzeichen"},measurements:{totalLength:"Lnge",segmentLength:"Segment Lnge",area:"Flche",radius:"Radius",perimeter:"Umfang",height:"Hhe",width:"Breite",coordinates:"Position",coordinatesMarker:"Position Marker"}},jt={tooltips:{placeMarker:"Clicca per posizionare un Marker",firstVertex:"Clicca per posizionare il primo vertice",continueLine:"Clicca per continuare a disegnare",finishLine:"Clicca qualsiasi marker esistente per terminare",finishPoly:"Clicca il primo marker per terminare",finishRect:"Clicca per terminare",startCircle:"Clicca per posizionare il punto centrale del cerchio",finishCircle:"Clicca per terminare il cerchio",placeCircleMarker:"Clicca per posizionare un Marker del cherchio"},actions:{finish:"Termina",cancel:"Annulla",removeLastVertex:"Rimuovi l'ultimo vertice"},buttonTitles:{drawMarkerButton:"Disegna Marker",drawPolyButton:"Disegna Poligoni",drawLineButton:"Disegna Polilinea",drawCircleButton:"Disegna Cerchio",drawRectButton:"Disegna Rettangolo",editButton:"Modifica Livelli",dragButton:"Sposta Livelli",cutButton:"Ritaglia Livelli",deleteButton:"Elimina Livelli",drawCircleMarkerButton:"Disegna Marker del Cerchio",snappingButton:"Snap ha trascinato il pennarello su altri strati e vertici",pinningButton:"Pin condiviso vertici insieme",rotateButton:"Ruota livello"}},Ot={tooltips:{placeMarker:"Klik untuk menempatkan marker",firstVertex:"Klik untuk menempatkan vertex pertama",continueLine:"Klik untuk meneruskan digitasi",finishLine:"Klik pada sembarang marker yang ada untuk mengakhiri",finishPoly:"Klik marker pertama untuk mengakhiri",finishRect:"Klik untuk mengakhiri",startCircle:"Klik untuk menempatkan titik pusat lingkaran",finishCircle:"Klik untuk mengakhiri lingkaran",placeCircleMarker:"Klik untuk menempatkan penanda lingkarann"},actions:{finish:"Selesai",cancel:"Batal",removeLastVertex:"Hilangkan Vertex Terakhir"},buttonTitles:{drawMarkerButton:"Digitasi Marker",drawPolyButton:"Digitasi Polygon",drawLineButton:"Digitasi Polyline",drawCircleButton:"Digitasi Lingkaran",drawRectButton:"Digitasi Segi Empat",editButton:"Edit Layer",dragButton:"Geser Layer",cutButton:"Potong Layer",deleteButton:"Hilangkan Layer",drawCircleMarkerButton:"Digitasi Penanda Lingkaran",snappingButton:"Jepretkan penanda yang ditarik ke lapisan dan simpul lain",pinningButton:"Sematkan simpul bersama bersama",rotateButton:"Putar lapisan"}},Yt={tooltips:{placeMarker:"Adaug un punct",firstVertex:"Apas aici pentru a aduga primul Vertex",continueLine:"Apas aici pentru a continua desenul",finishLine:"Apas pe orice obiect pentru a finisa desenul",finishPoly:"Apas pe primul obiect pentru a finisa",finishRect:"Apas pentru a finisa",startCircle:"Apas pentru a desena un cerc",finishCircle:"Apas pentru a finisa un cerc",placeCircleMarker:"Adaug un punct"},actions:{finish:"Termin",cancel:"Anuleaz",removeLastVertex:"terge ultimul Vertex"},buttonTitles:{drawMarkerButton:"Adaug o bulin",drawPolyButton:"Deseneaz un poligon",drawLineButton:"Deseneaz o linie",drawCircleButton:"Deseneaz un cerc",drawRectButton:"Deseneaz un dreptunghi",editButton:"Editeaz straturile",dragButton:"Mut straturile",cutButton:"Taie straturile",deleteButton:"terge straturile",drawCircleMarkerButton:"Deseneaz marcatorul cercului",snappingButton:"Fixai marcatorul glisat pe alte straturi i vrfuri",pinningButton:"Fixai vrfurile partajate mpreun",rotateButton:"Rotii stratul"}},Jt={tooltips:{placeMarker:",   ",firstVertex:",    ",continueLine:",   ",finishLine:"     ",finishPoly:"  ,  ",finishRect:",  ",startCircle:",    ",finishCircle:",   ",placeCircleMarker:",    "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"   ",rotateButton:" "}},Ht={tooltips:{placeMarker:"Presiona para colocar un marcador",firstVertex:"Presiona para colocar el primer vrtice",continueLine:"Presiona para continuar dibujando",finishLine:"Presiona cualquier marcador existente para finalizar",finishPoly:"Presiona el primer marcador para finalizar",finishRect:"Presiona para finalizar",startCircle:"Presiona para colocar el centro del crculo",finishCircle:"Presiona para finalizar el crculo",placeCircleMarker:"Presiona para colocar un marcador de crculo"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Eliminar ltimo vrtice"},buttonTitles:{drawMarkerButton:"Dibujar Marcador",drawPolyButton:"Dibujar Polgono",drawLineButton:"Dibujar Lnea",drawCircleButton:"Dibujar Crculo",drawRectButton:"Dibujar Rectngulo",editButton:"Editar Capas",dragButton:"Arrastrar Capas",cutButton:"Cortar Capas",deleteButton:"Eliminar Capas",drawCircleMarkerButton:"Dibujar Marcador de Crculo",snappingButton:"El marcador de Snap arrastrado a otras capas y vrtices",pinningButton:"Fijar juntos los vrtices compartidos",rotateButton:"Rotar capa"}},Zt={tooltips:{placeMarker:"Klik om een marker te plaatsen",firstVertex:"Klik om het eerste punt te plaatsen",continueLine:"Klik om te blijven tekenen",finishLine:"Klik op een bestaand punt om te beindigen",finishPoly:"Klik op het eerst punt om te beindigen",finishRect:"Klik om te beindigen",startCircle:"Klik om het middelpunt te plaatsen",finishCircle:"Klik om de cirkel te beindigen",placeCircleMarker:"Klik om een marker te plaatsen"},actions:{finish:"Bewaar",cancel:"Annuleer",removeLastVertex:"Verwijder laatste punt"},buttonTitles:{drawMarkerButton:"Plaats Marker",drawPolyButton:"Teken een vlak",drawLineButton:"Teken een lijn",drawCircleButton:"Teken een cirkel",drawRectButton:"Teken een vierkant",editButton:"Bewerk",dragButton:"Verplaats",cutButton:"Knip",deleteButton:"Verwijder",drawCircleMarkerButton:"Plaats Marker",snappingButton:"Snap gesleepte marker naar andere lagen en hoekpunten",pinningButton:"Speld gedeelde hoekpunten samen",rotateButton:"Laag roteren"}},ye={tooltips:{placeMarker:"Cliquez pour placer un marqueur",firstVertex:"Cliquez pour placer le premier sommet",continueLine:"Cliquez pour continuer  dessiner",finishLine:"Cliquez sur n'importe quel marqueur pour terminer",finishPoly:"Cliquez sur le premier marqueur pour terminer",finishRect:"Cliquez pour terminer",startCircle:"Cliquez pour placer le centre du cercle",finishCircle:"Cliquez pour finir le cercle",placeCircleMarker:"Cliquez pour placer le marqueur circulaire"},actions:{finish:"Terminer",cancel:"Annuler",removeLastVertex:"Retirer le dernier sommet"},buttonTitles:{drawMarkerButton:"Placer des marqueurs",drawPolyButton:"Dessiner des polygones",drawLineButton:"Dessiner des polylignes",drawCircleButton:"Dessiner un cercle",drawRectButton:"Dessiner un rectangle",editButton:"diter des calques",dragButton:"Dplacer des calques",cutButton:"Couper des calques",deleteButton:"Supprimer des calques",drawCircleMarkerButton:"Dessiner un marqueur circulaire",snappingButton:"Glisser le marqueur vers d'autres couches et sommets",pinningButton:"pingler ensemble les sommets partags",rotateButton:"Tourner des calques"}},ie={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:""}},Be={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:""}},Te={tooltips:{placeMarker:"Clique para posicionar o marcador",firstVertex:"Clique para posicionar o primeiro vrtice",continueLine:"Clique para continuar desenhando",finishLine:"Clique em qualquer marcador existente para finalizar",finishPoly:"Clique no primeiro marcador para finalizar",finishRect:"Clique para finalizar",startCircle:"Clique para posicionar o centro do crculo",finishCircle:"Clique para finalizar o crculo",placeCircleMarker:"Clique para posicionar o marcador circular",placeText:"Clique para inserir texto"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Remover ltimo vrtice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polgonos",drawLineButton:"Desenhar Linha Poligonal",drawCircleButton:"Desenhar Crculo",drawRectButton:"Desenhar Retngulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Recortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Crculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vrtices",pinningButton:"Unir vrtices compartilhados",rotateButton:"Rotacionar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Redimensionar Camadas",autoTracingButton:"Traado Automtico de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"rea",radius:"Raio",perimeter:"Permetro",height:"Altura",width:"Largura",coordinates:"Posio",coordinatesMarker:"Marcador de Posio"}},Ue={tooltips:{placeMarker:"Clique para colocar marcador",firstVertex:"Clique para colocar primeiro vrtice",continueLine:"Clique para continuar a desenhar",finishLine:"Clique num marcador existente para terminar",finishPoly:"Clique no primeiro marcador para terminar",finishRect:"Clique para terminar",startCircle:"Clique para colocar o centro do crculo",finishCircle:"Clique para terminar o crculo",placeCircleMarker:"Clique para colocar marcador de crculo",placeText:"Clique para colocar texto"},actions:{finish:"Terminar",cancel:"Cancelar",removeLastVertex:"Remover ltimo Vrtice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polgonos",drawLineButton:"Desenhar Polilinha",drawCircleButton:"Desenhar Crculo",drawRectButton:"Desenhar Retngulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Cortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Crculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vrtices",pinningButton:"Unir vrtices partilhados",rotateButton:"Rodar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Escalar Camadas",autoTracingButton:"Traado Automtico de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"rea",radius:"Raio",perimeter:"Permetro",height:"Altura",width:"Largura",coordinates:"Posio",coordinatesMarker:"Marcador de Posio"}},oi={tooltips:{placeMarker:"Kliknij, aby umieci znacznik",firstVertex:"Kliknij, aby umieci pierwszy wierzchoek",continueLine:"Kliknij, aby kontynuowa rysowanie",finishLine:"Kliknij dowolny istniejcy znacznik, aby zakoczy",finishPoly:"Kliknij pierwszy znacznik, aby zakoczy",finishRect:"Kliknij, aby zakoczy",startCircle:"Kliknij, aby umieci rodek okrgu",finishCircle:"Kliknij, aby zakoczy okrg",placeCircleMarker:"Kliknij, aby umieci znacznik okrgu",placeText:"Kliknij, aby umieci tekst"},actions:{finish:"Zakocz",cancel:"Anuluj",removeLastVertex:"Usu ostatni wierzchoek"},buttonTitles:{drawMarkerButton:"Rysuj znacznik",drawPolyButton:"Rysuj wielokt",drawLineButton:"Rysuj lini",drawCircleButton:"Rysuj okrg",drawRectButton:"Rysuj prostokt",editButton:"Edytuj warstwy",dragButton:"Przecignij warstwy",cutButton:"Wytnij warstwy",deleteButton:"Usu warstwy",drawCircleMarkerButton:"Rysuj znacznik okrgy",snappingButton:"Przycignij przenoszony znacznik do innych warstw i wierzchokw",pinningButton:"Przypnij wsplne wierzchoki razem",rotateButton:"Obr warstwy",drawTextButton:"Rysuj tekst",scaleButton:"Skaluj warstwy",autoTracingButton:"Automatyczne ledzenie linii"},measurements:{totalLength:"Dugo",segmentLength:"Dugo odcinka",area:"Obszar",radius:"Promie",perimeter:"Obwd",height:"Wysoko",width:"Szeroko",coordinates:"Pozycja",coordinatesMarker:"Znacznik pozycji"}},Qe={tooltips:{placeMarker:"Klicka fr att placera markr",firstVertex:"Klicka fr att placera frsta hrnet",continueLine:"Klicka fr att fortstta rita",finishLine:"Klicka p en existerande punkt fr att slutfra",finishPoly:"Klicka p den frsta punkten fr att slutfra",finishRect:"Klicka fr att slutfra",startCircle:"Klicka fr att placera cirkelns centrum",finishCircle:"Klicka fr att slutfra cirkeln",placeCircleMarker:"Klicka fr att placera cirkelmarkr"},actions:{finish:"Slutfr",cancel:"Avbryt",removeLastVertex:"Ta bort sista hrnet"},buttonTitles:{drawMarkerButton:"Rita Markr",drawPolyButton:"Rita Polygoner",drawLineButton:"Rita Linje",drawCircleButton:"Rita Cirkel",drawRectButton:"Rita Rektangel",editButton:"Redigera Lager",dragButton:"Dra Lager",cutButton:"Klipp i Lager",deleteButton:"Ta bort Lager",drawCircleMarkerButton:"Rita Cirkelmarkr",snappingButton:"Snpp dra markren till andra lager och hrn",pinningButton:"Fst delade hrn tillsammans",rotateButton:"Rotera lagret"}},dn={tooltips:{placeMarker:"     ",firstVertex:"       ",continueLine:"      ",finishLine:"        ",finishPoly:"       ",finishRect:"    ",startCircle:"      ",finishCircle:"      ",placeCircleMarker:"      "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"        ",pinningButton:"   ",rotateButton:"  "}},Xr={tooltips:{placeMarker:"Kattintson a jell elhelyezshez",firstVertex:"Kattintson az els pont elhelyezshez",continueLine:"Kattintson a kvetkez pont elhelyezshez",finishLine:"A befejezshez kattintson egy meglv pontra",finishPoly:"A befejezshez kattintson az els pontra",finishRect:"Kattintson a befejezshez",startCircle:"Kattintson a kr kzppontjnak elhelyezshez",finishCircle:"Kattintson a kr befejezshez",placeCircleMarker:"Kattintson a krjell elhelyezshez"},actions:{finish:"Befejezs",cancel:"Mgse",removeLastVertex:"Utols pont eltvoltsa"},buttonTitles:{drawMarkerButton:"Jell rajzolsa",drawPolyButton:"Poligon rajzolsa",drawLineButton:"Vonal rajzolsa",drawCircleButton:"Kr rajzolsa",drawRectButton:"Ngyzet rajzolsa",editButton:"Elemek szerkesztse",dragButton:"Elemek mozgatsa",cutButton:"Elemek vgsa",deleteButton:"Elemek trlse",drawCircleMarkerButton:"Kr jell rajzolsa",snappingButton:"Kapcsolja a jelltt msik elemhez vagy ponthoz",pinningButton:"Kzs pontok sszektse",rotateButton:"Flia elforgatsa"}},we={tooltips:{placeMarker:"Tryk for at placere en markr",firstVertex:"Tryk for at placere det frste punkt",continueLine:"Tryk for at fortstte linjen",finishLine:"Tryk p et eksisterende punkt for at afslutte",finishPoly:"Tryk p det frste punkt for at afslutte",finishRect:"Tryk for at afslutte",startCircle:"Tryk for at placere cirklens center",finishCircle:"Tryk for at afslutte cirklen",placeCircleMarker:"Tryk for at placere en cirkelmarkr"},actions:{finish:"Afslut",cancel:"Afbryd",removeLastVertex:"Fjern sidste punkt"},buttonTitles:{drawMarkerButton:"Placer markr",drawPolyButton:"Tegn polygon",drawLineButton:"Tegn linje",drawCircleButton:"Tegn cirkel",drawRectButton:"Tegn firkant",editButton:"Rediger",dragButton:"Trk",cutButton:"Klip",deleteButton:"Fjern",drawCircleMarkerButton:"Tegn cirkelmarkr",snappingButton:"Fastgr trukket markr til andre elementer",pinningButton:"Sammenlg delte elementer",rotateButton:"Roter laget"}},be={tooltips:{placeMarker:"Klikk for  plassere punkt",firstVertex:"Klikk for  plassere frste punkt",continueLine:"Klikk for  tegne videre",finishLine:"Klikk p et eksisterende punkt for  fullfre",finishPoly:"Klikk frste punkt for  fullfre",finishRect:"Klikk for  fullfre",startCircle:"Klikk for  sette sirkel midtpunkt",finishCircle:"Klikk for  fullfre sirkel",placeCircleMarker:"Klikk for  plassere sirkel",placeText:"Klikk for  plassere tekst"},actions:{finish:"Fullfr",cancel:"Kanseller",removeLastVertex:"Fjern forrige punkt"},buttonTitles:{drawMarkerButton:"Tegn punkt",drawPolyButton:"Tegn flate",drawLineButton:"Tegn linje",drawCircleButton:"Tegn sirkel",drawRectButton:"Tegn rektangel",editButton:"Rediger objekter",dragButton:"Dra objekter",cutButton:"Kutt objekter",deleteButton:"Fjern objekter",drawCircleMarkerButton:"Tegn sirkel-punkt",snappingButton:"Fest dratt punkt til andre objekter og punkt",pinningButton:"Pin delte punkter sammen",rotateButton:"Rotr objekter",drawTextButton:"Tegn tekst",scaleButton:"Skalr objekter",autoTracingButton:"Automatisk sporing av linje"},measurements:{totalLength:"Lengde",segmentLength:"Segmentlengde",area:"Omrde",radius:"Radius",perimeter:"Omriss",height:"Hyde",width:"Bredde",coordinates:"Posisjon",coordinatesMarker:"Posisjonsmarkr"}},fi={tooltips:{placeMarker:"   ",firstVertex:"    ",continueLine:"   ",finishLine:"      ",finishPoly:"     ",finishRect:"  ",startCircle:"    ",finishCircle:"    ",placeCircleMarker:"    ",placeText:"   "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"      ",rotateButton:" ",drawTextButton:" ",scaleButton:"",autoTracingButton:" "},measurements:{totalLength:"",segmentLength:" ",area:"",radius:"",perimeter:"",height:"",width:"",coordinates:"",coordinatesMarker:" "}},wi={tooltips:{placeMarker:",   ",firstVertex:",    ",continueLine:",   ",finishLine:" -    ",finishPoly:"  ,  ",finishRect:",  ",startCircle:",    ",finishCircle:",   ",placeCircleMarker:",    "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"'   ",rotateButton:" "}},Si={tooltips:{placeMarker:"areti yerletirmek iin tklayn",firstVertex:"lk tepe noktasn yerletirmek iin tklayn",continueLine:"izime devam etmek iin tklayn",finishLine:"Bitirmek iin mevcut herhangi bir iaretiyi tklayn",finishPoly:"Bitirmek iin ilk iaretiyi tklayn",finishRect:"Bitirmek iin tklayn",startCircle:"Daire merkezine yerletirmek iin tklayn",finishCircle:"Daireyi bitirmek iin tklayn",placeCircleMarker:"Daire iaretisi yerletirmek iin tklayn"},actions:{finish:"Bitir",cancel:"ptal",removeLastVertex:"Son keyi kaldr"},buttonTitles:{drawMarkerButton:"izim aretisi",drawPolyButton:"okgenler iz",drawLineButton:"oklu izgi iz",drawCircleButton:"ember iz",drawRectButton:"Dikdrtgen iz",editButton:"Katmanlar dzenle",dragButton:"Katmanlar srkle",cutButton:"Katmanlar kes",deleteButton:"Katmanlar kaldr",drawCircleMarkerButton:"Daire iaretisi iz",snappingButton:"Srklenen iaretiyi dier katmanlara ve kelere yaptr",pinningButton:"Paylalan keleri birbirine sabitle",rotateButton:"Katman dndr"}},Pe={tooltips:{placeMarker:"Kliknutm vytvote znaku",firstVertex:"Kliknutm vytvote prvn objekt",continueLine:"Kliknutm pokraujte v kreslen",finishLine:"Kliknut na libovolnou existujc znaku pro dokonen",finishPoly:"Vyberte prvn bod pro dokonen",finishRect:"Kliknte pro dokonen",startCircle:"Kliknutm pidejte sted kruhu",finishCircle:",   ",placeCircleMarker:"Kliknutm nastavte polomr"},actions:{finish:"Dokonit",cancel:"Zruit",removeLastVertex:"Zruit posledn akci"},buttonTitles:{drawMarkerButton:"Pidat znaku",drawPolyButton:"Nakreslit polygon",drawLineButton:"Nakreslit kivku",drawCircleButton:"Nakreslit kruh",drawRectButton:"Nakreslit obdlnk",editButton:"Upravit vrstvu",dragButton:"Peneste vrstvu",cutButton:"Vyjmout vrstvu",deleteButton:"Smazat vrstvu",drawCircleMarkerButton:"Pidat kruhovou znaku",snappingButton:"Navzat tanou znaku k dalm vrstvm a vrcholm",pinningButton:"Spojit spolen body dohromady",rotateButton:"Otote vrstvu"}},ti={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:"",placeText:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:"",drawTextButton:""}},ei={tooltips:{placeMarker:"Klikkaa asettaaksesi merkin",firstVertex:"Klikkaa asettaakseni ensimmisen osuuden",continueLine:"Klikkaa jatkaaksesi piirtmist",finishLine:"Klikkaa olemassa olevaa merkki lopettaaksesi",finishPoly:"Klikkaa ensimmist merkki lopettaaksesi",finishRect:"Klikkaa lopettaaksesi",startCircle:"Klikkaa asettaaksesi ympyrn keskipisteen",finishCircle:"Klikkaa lopettaaksesi ympyrn",placeCircleMarker:"Klikkaa asettaaksesi ympyrmerkin",placeText:"Klikkaa asettaaksesi tekstin"},actions:{finish:"Valmis",cancel:"Peruuta",removeLastVertex:"Poista viimeinen osuus"},buttonTitles:{drawMarkerButton:"Piirr merkkej",drawPolyButton:"Piirr monikulmioita",drawLineButton:"Piirr viivoja",drawCircleButton:"Piirr ympyr",drawRectButton:"Piirr neliskulmioita",editButton:"Muokkaa",dragButton:"Siirr",cutButton:"Leikkaa",deleteButton:"Poista",drawCircleMarkerButton:"Piirr ympyrmerkki",snappingButton:"Kiinnit siirrettv merkki toisiin muotoihin",pinningButton:"Kiinnit jaetut muodot yhteen",rotateButton:"Knn",drawTextButton:"Piirr teksti"}},sn={tooltips:{placeMarker:"  ",firstVertex:"   ",continueLine:"  ",finishLine:"   ",finishPoly:"   ",finishRect:" ",startCircle:"    ",finishCircle:"  ",placeCircleMarker:"   ",placeText:"  "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"   ",rotateButton:" ",drawTextButton:" "}},Ln={tooltips:{placeMarker:"   ",firstVertex:"    ",continueLine:"    ",finishLine:"    ",finishPoly:"    ",finishRect:"  ",startCircle:"    ",finishCircle:"   ",placeCircleMarker:"    ",placeText:"   "},actions:{finish:"",cancel:" ",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:"  ",cutButton:"  ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"     ",pinningButton:"   ",rotateButton:" ",drawTextButton:" ",scaleButton:"  ",autoTracingButton:"  "},measurements:{totalLength:"",segmentLength:" ",area:"",radius:"",perimeter:"",height:"",width:"",coordinates:"",coordinatesMarker:" "}},Xs=Ue,Hn={en:Pt,de:Kt,it:jt,id:Ot,ro:Yt,ru:Jt,es:Ht,nl:Zt,fr:ye,pt:Xs,pt_br:Te,pt_pt:Ue,zh:ie,zh_tw:Be,pl:oi,sv:Qe,el:dn,hu:Xr,da:we,no:be,fa:fi,ua:wi,tr:Si,cz:Pe,ja:ti,fi:ei,ko:sn,ky:Ln},Tn={_globalEditModeEnabled:!1,enableGlobalEditMode(s){let a={...s};this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(h=>{this._isRelevantForEdit(h)&&h.pm.enable(a)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayersEdit={},this.map.on("layeradd",this._layerAddedEdit,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(s=>{s.pm.disable()}),this.map.off("layeradd",this._layerAddedEdit,this),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled(){return this.globalEditModeEnabled()},globalEditModeEnabled(){return this._globalEditModeEnabled},toggleGlobalEditMode(s=this.globalOptions){this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(s)},handleLayerAdditionInGlobalEditMode(){let s=this._addedLayersEdit;if(this._addedLayersEdit={},this.globalEditModeEnabled())for(let a in s){let h=s[a];this._isRelevantForEdit(h)&&h.pm.enable({...this.globalOptions})}},_layerAddedEdit({layer:s}){this._addedLayersEdit[L.stamp(s)]=s},_isRelevantForEdit(s){return s.pm&&!(s instanceof L.LayerGroup)&&(!L.PM.optIn&&!s.options.pmIgnore||L.PM.optIn&&s.options.pmIgnore===!1)&&!s._pmTempLayer&&s.pm.options.allowEditing}},Yr=Tn,Tr={_globalDragModeEnabled:!1,enableGlobalDragMode(){let s=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},s.forEach(a=>{this._isRelevantForDrag(a)&&a.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode(){let s=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,s.forEach(a=>{a.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled(){return!!this._globalDragModeEnabled},toggleGlobalDragMode(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode(){let s=this._addedLayersDrag;if(this._addedLayersDrag={},this.globalDragModeEnabled())for(let a in s){let h=s[a];this._isRelevantForDrag(h)&&h.pm.enableLayerDrag()}},_layerAddedDrag({layer:s}){this._addedLayersDrag[L.stamp(s)]=s},_isRelevantForDrag(s){return s.pm&&!(s instanceof L.LayerGroup)&&(!L.PM.optIn&&!s.options.pmIgnore||L.PM.optIn&&s.options.pmIgnore===!1)&&!s._pmTempLayer&&s.pm.options.draggable}},mi=Tr,Cn={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode(){this._globalRemovalModeEnabled=!0,this.map.eachLayer(s=>{this._isRelevantForRemoval(s)&&(s.pm.enabled()&&s.pm.disable(),s.on("click",this.removeLayer,this))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.handleLayerAdditionInGlobalRemovalMode,100,this)),this._addedLayersRemoval={},this.map.on("layeradd",this._layerAddedRemoval,this),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode(){this._globalRemovalModeEnabled=!1,this.map.eachLayer(s=>{s.off("click",this.removeLayer,this)}),this.map.off("layeradd",this._layerAddedRemoval,this),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},removeLayer(s){let a=s.target;this._isRelevantForRemoval(a)&&!a.pm.dragging()&&(a.removeFrom(this.map.pm._getContainingLayer()),a.remove(),a instanceof L.LayerGroup?(this._fireRemoveLayerGroup(a),this._fireRemoveLayerGroup(this.map,a)):(a.pm._fireRemove(a),a.pm._fireRemove(this.map,a)))},_isRelevantForRemoval(s){return s.pm&&!(s instanceof L.LayerGroup)&&(!L.PM.optIn&&!s.options.pmIgnore||L.PM.optIn&&s.options.pmIgnore===!1)&&!s._pmTempLayer&&s.pm.options.allowRemoval},handleLayerAdditionInGlobalRemovalMode(){let s=this._addedLayersRemoval;if(this._addedLayersRemoval={},this.globalRemovalModeEnabled())for(let a in s){let h=s[a];this._isRelevantForRemoval(h)&&(h.pm.enabled()&&h.pm.disable(),h.on("click",this.removeLayer,this))}},_layerAddedRemoval({layer:s}){this._addedLayersRemoval[L.stamp(s)]=s}},Ir=Cn,Bs={_globalRotateModeEnabled:!1,enableGlobalRotateMode(){this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(s=>s instanceof L.Polyline).forEach(s=>{this._isRelevantForRotate(s)&&s.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this.handleLayerAdditionInGlobalRotateMode,100,this)),this._addedLayersRotate={},this.map.on("layeradd",this._layerAddedRotate,this),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(s=>s instanceof L.Polyline).forEach(s=>{s.pm.disableRotate()}),this.map.off("layeradd",this._layerAddedRotate,this),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_isRelevantForRotate(s){return s.pm&&s instanceof L.Polyline&&!(s instanceof L.LayerGroup)&&(!L.PM.optIn&&!s.options.pmIgnore||L.PM.optIn&&s.options.pmIgnore===!1)&&!s._pmTempLayer&&s.pm.options.allowRotation},handleLayerAdditionInGlobalRotateMode(){let s=this._addedLayersRotate;if(this._addedLayersRotate={},this.globalRotateModeEnabled())for(let a in s){let h=s[a];this._isRelevantForRemoval(h)&&h.pm.enableRotate()}},_layerAddedRotate({layer:s}){this._addedLayersRotate[L.stamp(s)]=s}},Eo=Bs,Lo=E(Zr()),Qr={_fireDrawStart(s="Draw",a={}){this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},s,a)},_fireDrawEnd(s="Draw",a={}){this.__fire(this._map,"pm:drawend",{shape:this._shape},s,a)},_fireCreate(s,a="Draw",h={}){this.__fire(this._map,"pm:create",{shape:this._shape,marker:s,layer:s},a,h)},_fireCenterPlaced(s="Draw",a={}){let h=s==="Draw"?this._layer:void 0,d=s!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:h,layer:d,latlng:this._layer.getLatLng()},s,a)},_fireCut(s,a,h,d="Draw",_={}){this.__fire(s,"pm:cut",{shape:this._shape,layer:a,originalLayer:h},d,_)},_fireEdit(s=this._layer,a="Edit",h={}){this.__fire(s,"pm:edit",{layer:this._layer,shape:this.getShape()},a,h)},_fireEnable(s="Edit",a={}){this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},s,a)},_fireDisable(s="Edit",a={}){this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},s,a)},_fireUpdate(s="Edit",a={}){this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},s,a)},_fireMarkerDragStart(s,a=void 0,h="Edit",d={}){this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:s,shape:this.getShape(),indexPath:a},h,d)},_fireMarkerDrag(s,a=void 0,h="Edit",d={}){this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:s,shape:this.getShape(),indexPath:a},h,d)},_fireMarkerDragEnd(s,a=void 0,h=void 0,d="Edit",_={}){this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:s,shape:this.getShape(),indexPath:a,intersectionReset:h},d,_)},_fireDragStart(s="Edit",a={}){this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},s,a)},_fireDrag(s,a="Edit",h={}){this.__fire(this._layer,"pm:drag",{...s,shape:this.getShape()},a,h)},_fireDragEnd(s="Edit",a={}){this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},s,a)},_fireDragEnable(s="Edit",a={}){this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},s,a)},_fireDragDisable(s="Edit",a={}){this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},s,a)},_fireRemove(s,a=s,h="Edit",d={}){this.__fire(s,"pm:remove",{layer:a,shape:this.getShape()},h,d)},_fireVertexAdded(s,a,h,d="Edit",_={}){this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:s,indexPath:a,latlng:h,shape:this.getShape()},d,_)},_fireVertexRemoved(s,a,h="Edit",d={}){this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:s,indexPath:a,shape:this.getShape()},h,d)},_fireVertexClick(s,a,h="Edit",d={}){this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:s,indexPath:a,shape:this.getShape()},h,d)},_fireIntersect(s,a=this._layer,h="Edit",d={}){this.__fire(a,"pm:intersect",{layer:this._layer,intersection:s,shape:this.getShape()},h,d)},_fireLayerReset(s,a,h="Edit",d={}){this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:s,indexPath:a,shape:this.getShape()},h,d)},_fireChange(s,a="Edit",h={}){this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:s,shape:this.getShape()},a,h)},_fireTextChange(s,a="Edit",h={}){this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:s,shape:this.getShape()},a,h)},_fireTextFocus(s="Edit",a={}){this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},s,a)},_fireTextBlur(s="Edit",a={}){this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},s,a)},_fireSnapDrag(s,a,h="Snapping",d={}){this.__fire(s,"pm:snapdrag",a,h,d)},_fireSnap(s,a,h="Snapping",d={}){this.__fire(s,"pm:snap",a,h,d)},_fireUnsnap(s,a,h="Snapping",d={}){this.__fire(s,"pm:unsnap",a,h,d)},_fireRotationEnable(s,a,h="Rotation",d={}){this.__fire(s,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},h,d)},_fireRotationDisable(s,a="Rotation",h={}){this.__fire(s,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},a,h)},_fireRotationStart(s,a,h="Rotation",d={}){this.__fire(s,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:a},h,d)},_fireRotation(s,a,h,d=this._rotationLayer,_="Rotation",w={}){this.__fire(s,"pm:rotate",{layer:d,helpLayer:this._layer,startAngle:this._startAngle,angle:d.pm.getAngle(),angleDiff:a,oldLatLngs:h,newLatLngs:d.getLatLngs()},_,w)},_fireRotationEnd(s,a,h,d="Rotation",_={}){this.__fire(s,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:a,angle:this._rotationLayer.pm.getAngle(),originLatLngs:h,newLatLngs:this._rotationLayer.getLatLngs()},d,_)},_fireActionClick(s,a,h,d="Toolbar",_={}){this.__fire(this._map,"pm:actionclick",{text:s.text,action:s,btnName:a,button:h},d,_)},_fireButtonClick(s,a,h="Toolbar",d={}){this.__fire(this._map,"pm:buttonclick",{btnName:s,button:a},h,d)},_fireLangChange(s,a,h,d,_="Global",w={}){this.__fire(this.map,"pm:langchange",{oldLang:s,activeLang:a,fallback:h,translations:d},_,w)},_fireGlobalDragModeToggled(s,a="Global",h={}){this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:s,map:this.map},a,h)},_fireGlobalEditModeToggled(s,a="Global",h={}){this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:s,map:this.map},a,h)},_fireGlobalRemovalModeToggled(s,a="Global",h={}){this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:s,map:this.map},a,h)},_fireGlobalCutModeToggled(s="Global",a={}){this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},s,a)},_fireGlobalDrawModeToggled(s="Global",a={}){this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},s,a)},_fireGlobalRotateModeToggled(s="Global",a={}){this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},s,a)},_fireRemoveLayerGroup(s,a=s,h="Edit",d={}){this.__fire(s,"pm:remove",{layer:a,shape:void 0},h,d)},_fireKeyeventEvent(s,a,h,d="Global",_={}){this.__fire(this.map,"pm:keyevent",{event:s,eventType:a,focusOn:h},d,_)},__fire(s,a,h,d,_={}){h=(0,Lo.default)(h,_,{source:d}),L.PM.Utils._fireEvent(s,a,h)}},Rr=Qr,Xo=()=>({_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener(s){this.map=s,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this),s.once("unload",this._unbindKeyListenerEvents,this)},_unbindKeyListenerEvents(){L.DomEvent.off(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.off(window,"blur",this._onBlur,this)},_onKeyListener(s){let a="document";this.map.getContainer().contains(s.target)&&(a="map");let h={event:s,eventType:s.type,focusOn:a};this._lastEvents[s.type]=h,this._lastEvents.current=h,this.map.pm._fireKeyeventEvent(s,s.type,a)},_onBlur(s){s.altKey=!1;let a={event:s,eventType:s.type,focusOn:"document"};this._lastEvents[s.type]=a,this._lastEvents.current=a},getLastKeyEvent(s="current"){return this._lastEvents[s]},isShiftKeyPressed(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.shiftKey},isAltKeyPressed(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.altKey},isCtrlKeyPressed(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.ctrlKey},isMetaKeyPressed(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.metaKey},getPressedKey(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.key}}),qe=Xo,Or=E(sr());function De(s){let a=L.PM.activeLang;return(0,Or.default)(Hn[a],s)||(0,Or.default)(Hn.en,s)||s}function or(s){for(let a=0;a<s.length;a+=1){let h=s[a];if(Array.isArray(h)){if(or(h))return!0}else if(h!=null&&h!=="")return!0}return!1}function Ys(s){return s.reduce((a,h)=>{if(h.length!==0){let d=Array.isArray(h)?Ys(h):h;Array.isArray(d)?d.length!==0&&a.push(d):a.push(d)}return a},[])}function Yo(s,a,h){let d={a:L.CRS.Earth.R,b:63567523142e-4,f:.0033528106647474805},{a:_,b:w,f:b}=d,S=s.lng,T=s.lat,O=h,X=Math.PI,$=a*X/180,_t=Math.sin($),Et=Math.cos($),Ut=(1-b)*Math.tan(T*X/180),te=1/Math.sqrt(1+Ut*Ut),le=Ut*te,Ke=Math.atan2(Ut,Et),K=te*_t,tt=1-K*K,at=tt*(_*_-w*w)/(w*w),xt=1+at/16384*(4096+at*(-768+at*(320-175*at))),ht=at/1024*(256+at*(-128+at*(74-47*at))),wt=O/(w*xt),I=2*Math.PI,G,j,z;for(;Math.abs(wt-I)>1e-12;){G=Math.cos(2*Ke+wt),j=Math.sin(wt),z=Math.cos(wt);let Nt=ht*j*(G+ht/4*(z*(-1+2*G*G)-ht/6*G*(-3+4*j*j)*(-3+4*G*G)));I=wt,wt=O/(w*xt)+Nt}let H=le*j-te*z*Et,U=Math.atan2(le*z+te*j*Et,(1-b)*Math.sqrt(K*K+H*H)),et=Math.atan2(j*_t,te*z-le*j*Et),it=b/16*tt*(4+b*(4-3*tt)),ot=et-(1-it)*b*K*(wt+it*j*(G+it*z*(-1+2*G*G))),pt=S+ot*180/X,mt=U*180/X;return L.latLng(pt,mt)}function Ts(s,a,h,d,_=!0){let w,b,S,T=[];for(let O=0;O<h;O+=1){if(_)w=O*360/h+d,b=Yo(s,w,a),S=L.latLng(b.lng,b.lat);else{let X=s.lat+Math.cos(2*O*Math.PI/h)*a,$=s.lng+Math.sin(2*O*Math.PI/h)*a;S=L.latLng(X,$)}T.push(S)}return T}function ll(s,a,h){a=(a+360)%360;let d=Math.PI/180,_=180/Math.PI,{R:w}=L.CRS.Earth,b=s.lng*d,S=s.lat*d,T=a*d,O=Math.sin(S),X=Math.cos(S),$=Math.cos(h/w),_t=Math.sin(h/w),Et=Math.asin(O*$+X*_t*Math.cos(T)),Ut=b+Math.atan2(Math.sin(T)*_t*X,$-O*Math.sin(Et));Ut*=_;let te=Ut-360,le=Ut<-180?Ut+360:Ut;return Ut=Ut>180?te:le,L.latLng([Et*_,Ut])}function Ki(s,a,h){let d=s.latLngToContainerPoint(a),_=s.latLngToContainerPoint(h),w=Math.atan2(_.y-d.y,_.x-d.x)*180/Math.PI+90;return w+=w<0?360:0,w}function Dr(s,a,h,d){let _=Ki(s,a,h);return ll(a,_,d)}function Fa(s,a,h="asc"){if(!a||Object.keys(a).length===0)return(T,O)=>T-O;let d=Object.keys(a),_,w=d.length-1,b={};for(;w>=0;)_=d[w],b[_.toLowerCase()]=a[_],w-=1;function S(T){if(T instanceof L.Marker)return"Marker";if(T instanceof L.Circle)return"Circle";if(T instanceof L.CircleMarker)return"CircleMarker";if(T instanceof L.Rectangle)return"Rectangle";if(T instanceof L.Polygon)return"Polygon";if(T instanceof L.Polyline)return"Line"}return(T,O)=>{let X,$;if(X=S(T.layer).toLowerCase(),$=S(O.layer).toLowerCase(),!X||!$)return 0;let _t=X in b?b[X]:Number.MAX_SAFE_INTEGER,Et=$ in b?b[$]:Number.MAX_SAFE_INTEGER,Ut=0;return _t<Et?Ut=-1:_t>Et&&(Ut=1),h==="desc"?Ut*-1:Ut}}function pn(s,a=s.getLatLngs()){return s instanceof L.Polygon?L.polygon(a).getLatLngs():L.polyline(a).getLatLngs()}function ul(s,a){var h,d,_,w;if((d=(h=a.options.crs)==null?void 0:h.projection)!=null&&d.MAX_LATITUDE){let b=(w=(_=a.options.crs)==null?void 0:_.projection)==null?void 0:w.MAX_LATITUDE;s.lat=Math.max(Math.min(b,s.lat),-b)}return s}function Ni(s){return s.options.renderer||s._map&&(s._map._getPaneRenderer(s.options.pane)||s._map.options.renderer||s._map._renderer)||s._renderer}var Ga=L.Class.extend({includes:[Yr,mi,Ir,Eo,Rr],initialize(s){this.map=s,this.Draw=new L.PM.Draw(s),this.Toolbar=new L.PM.Toolbar(s),this.Keyboard=qe(),this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(s)},setLang(s="en",a,h="en"){if(s=s.trim().toLowerCase(),!/^[a-z]{2}$/.test(s)){let _=s.replace(/[-_\s]/g,"-").replace(/^(\w{2})$/,"$1-").match(/([a-z]{2})-?([a-z]{2})?/);if(_){let w=[`${_[1]}_${_[2]}`,`${_[1]}`];for(let b of w)if(Hn[b]){s=b;break}}}let d=L.PM.activeLang;a&&(Hn[s]=(0,dt.default)(Hn[h],a)),L.PM.activeLang=s,this.map.pm.Toolbar.reinit(),this._fireLangChange(d,s,h,Hn[s])},addControls(s){this.Toolbar.addControls(s)},removeControls(){this.Toolbar.removeControls()},toggleControls(){this.Toolbar.toggleControls()},controlsVisible(){return this.Toolbar.isVisible},enableDraw(s="Polygon",a){s==="Poly"&&(s="Polygon"),this.Draw.enable(s,a)},disableDraw(s="Polygon"){s==="Poly"&&(s="Polygon"),this.Draw.disable(s)},setPathOptions(s,a={}){let h=a.ignoreShapes||[],d=a.merge||!1;this.map.pm.Draw.shapes.forEach(_=>{h.indexOf(_)===-1&&this.map.pm.Draw[_].setPathOptions(s,d)})},getGlobalOptions(){return this.globalOptions},setGlobalOptions(s){let a=(0,dt.default)(this.globalOptions,s);a.editable&&(a.resizeableCircleMarker=a.editable,delete a.editable);let h=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.resizeableCircleMarker!=!!a.resizeableCircleMarker&&(this.map.pm.Draw.CircleMarker.disable(),h=!0);let d=!1;this.map.pm.Draw.Circle.enabled()&&!!this.map.pm.Draw.Circle.options.resizeableCircle!=!!a.resizeableCircle&&(this.map.pm.Draw.Circle.disable(),d=!0),this.map.pm.Draw.shapes.forEach(_=>{this.map.pm.Draw[_].setOptions(a)}),h&&this.map.pm.Draw.CircleMarker.enable(),d&&this.map.pm.Draw.Circle.enable(),L.PM.Utils.findLayers(this.map).forEach(_=>{_.pm.setOptions(a)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=a,this.applyGlobalOptions()},applyGlobalOptions(){L.PM.Utils.findLayers(this.map).forEach(s=>{s.pm.enabled()&&s.pm.applyOptions()})},globalDrawModeEnabled(){return!!this.Draw.getActiveShape()},globalCutModeEnabled(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode(s){return this.Draw.Cut.enable(s)},toggleGlobalCutMode(s){return this.Draw.Cut.toggle(s)},disableGlobalCutMode(){return this.Draw.Cut.disable()},getGeomanLayers(s=!1){let a=L.PM.Utils.findLayers(this.map);if(!s)return a;let h=L.featureGroup();return h._pmTempLayer=!0,a.forEach(d=>{h.addLayer(d)}),h},getGeomanDrawLayers(s=!1){let a=L.PM.Utils.findLayers(this.map).filter(d=>d._drawnByGeoman===!0);if(!s)return a;let h=L.featureGroup();return h._pmTempLayer=!0,a.forEach(d=>{h.addLayer(d)}),h},_getContainingLayer(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents(s){this._touchEventCounter===0&&(L.DomEvent.on(s,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(s,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents(s){this._touchEventCounter===1&&(L.DomEvent.off(s,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(s,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove(s){Ni(this.map)._onMouseMove(this._createMouseEvent("mousemove",s))},_canvasTouchClick(s){let a="";s.type==="touchstart"||s.type==="pointerdown"?a="mousedown":(s.type==="touchend"||s.type==="pointerup"||s.type==="touchcancel"||s.type==="pointercancel")&&(a="mouseup"),a&&Ni(this.map)._onClick(this._createMouseEvent(a,s))},_createMouseEvent(s,a){let h,d=a.touches[0]||a.changedTouches[0];try{h=new MouseEvent(s,{bubbles:a.bubbles,cancelable:a.cancelable,view:a.view,detail:d.detail,screenX:d.screenX,screenY:d.screenY,clientX:d.clientX,clientY:d.clientY,ctrlKey:a.ctrlKey,altKey:a.altKey,shiftKey:a.shiftKey,metaKey:a.metaKey,button:a.button,relatedTarget:a.relatedTarget})}catch{h=document.createEvent("MouseEvents"),h.initMouseEvent(s,a.bubbles,a.cancelable,a.view,d.detail,d.screenX,d.screenY,d.clientX,d.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,a.button,a.relatedTarget)}return h}}),Qs=Ga,Vn=L.Control.extend({includes:[Rr],options:{position:"topleft",disableByOtherButtons:!0},initialize(s){this._button=L.Util.extend({},this.options,s)},onAdd(s){return this._map=s,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this._renderButton(),this._container},_renderButton(){let s=this.buttonsDomNode;this.buttonsDomNode=this._makeButton(this._button),s?s.replaceWith(this.buttonsDomNode):this._container.appendChild(this.buttonsDomNode)},onRemove(){return this.buttonsDomNode.remove(),this._container},getText(){return this._button.text},getIconUrl(){return this._button.iconUrl},destroy(){this._button={},this._update()},toggle(s){return typeof s=="boolean"?this._button.toggleStatus=s:this._button.toggleStatus=!this._button.toggleStatus,this._applyStyleClasses(),this._updateActiveAction(this._button),this._button.toggleStatus},toggled(){return this._button.toggleStatus},onCreate(){this.toggle(!1)},disable(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable(){this._button.disabled=!1,this._updateDisabled(),this._updateActiveAction(this._button)},_triggerClick(s){s&&s.preventDefault(),!this._button.disabled&&(this._button.onClick(s,{button:this,event:s}),this._clicked(s),this._button.afterClick(s,{button:this,event:s}))},_makeButton(s){let a=this.options.position.indexOf("right")>-1?"pos-right":"",h=L.DomUtil.create("div",`button-container  ${a}`,this._container);s.title&&h.setAttribute("title",s.title);let d=L.DomUtil.create("a","leaflet-buttons-control-button",h);d.setAttribute("role","button"),d.setAttribute("tabindex","0"),d.href="#";let _=L.DomUtil.create("div",`leaflet-pm-actions-container ${a}`,h),w=s.actions,b={cancel:{text:De("actions.cancel"),title:De("actions.cancel"),onClick(){this._triggerClick()}},finishMode:{text:De("actions.finish"),title:De("actions.finish"),onClick(){this._triggerClick()}},removeLastVertex:{text:De("actions.removeLastVertex"),title:De("actions.removeLastVertex"),onClick(){this._map.pm.Draw[s.jsClass]._removeLastVertex()}},finish:{text:De("actions.finish"),title:De("actions.finish"),onClick(T){this._map.pm.Draw[s.jsClass]._finishShape(T)}}};s._preparedActions=w.map(T=>{let O=typeof T=="string"?T:T.name,X;if(b[O])X=b[O];else if(T.text)X=T;else return X;let $=L.DomUtil.create("a",`leaflet-pm-action ${a} action-${O}`,_);if($.setAttribute("role","button"),$.setAttribute("tabindex","0"),$.href="#",X.title&&($.title=X.title),$.innerHTML=X.text,L.DomEvent.disableClickPropagation($),L.DomEvent.on($,"click",L.DomEvent.stop),X._node=$,!s.disabled&&X.onClick){let _t=Et=>{Et.preventDefault();let Ut="",{buttons:te}=this._map.pm.Toolbar;for(let le in te)if(te[le]._button===s){Ut=le;break}this._fireActionClick(X,Ut,s)};L.DomEvent.addListener($,"click",_t,this),L.DomEvent.addListener($,"click",X.onClick,this),L.DomEvent.addListener($,"click",()=>this._updateActiveAction(s))}return X}),this._updateActiveAction(s),s.toggleStatus&&L.DomUtil.addClass(h,"active");let S=L.DomUtil.create("div","control-icon",d);return s.iconUrl&&S.setAttribute("src",s.iconUrl),s.className&&L.DomUtil.addClass(S,s.className),L.DomEvent.disableClickPropagation(d),L.DomEvent.on(d,"click",L.DomEvent.stop),s.disabled||(L.DomEvent.addListener(d,"click",this._onBtnClick,this),L.DomEvent.addListener(d,"click",this._triggerClick,this)),s.disabled&&(L.DomUtil.addClass(d,"pm-disabled"),d.setAttribute("aria-disabled","true")),h},_applyStyleClasses(){this._container&&(!this._button.toggleStatus||this._button.cssToggle===!1?(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")):(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")))},_onBtnClick(){if(this._button.disabled)return;this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);let s="",{buttons:a}=this._map.pm.Toolbar;for(let h in a)if(a[h]._button===this._button){s=h;break}this._fireButtonClick(s,this._button)},_clicked(){this._button.doToggle&&this.toggle()},_updateDisabled(){if(!this._container)return;let s="pm-disabled",a=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(a,s),a.setAttribute("aria-disabled","true")):(L.DomUtil.removeClass(a,s),a.setAttribute("aria-disabled","false"))},_updateActiveAction(s){var a;(a=s._preparedActions)==null||a.forEach(h=>{h!=null&&h._node&&(h.isActive&&h.isActive.call(this)?L.DomUtil.addClass(h._node,"active-action"):L.DomUtil.removeClass(h._node,"active-action"))})}}),za=Vn;L.Control.PMButton=za;var hl=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize(s){this.customButtons=[],this.options.positions={draw:"",edit:"",options:"",custom:""},this.init(s)},reinit(){let s=this.isVisible;this.removeControls(),this._defineButtons(),s&&this.addControls()},init(s){this.map=s,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer(s){let a=`${s}Container`;return this[a]||(this[a]=L.DomUtil.create("div",`leaflet-pm-toolbar leaflet-pm-${s} leaflet-bar leaflet-control`)),this[a]},getButtons(){return this.buttons},addControls(s=this.options){typeof s.editPolygon<"u"&&(s.editMode=s.editPolygon),typeof s.deleteLayer<"u"&&(s.removalMode=s.deleteLayer),L.Util.setOptions(this,s),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle(){let s=this.getButtons(),a={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(let h in s){let d=s[h];L.Util.setOptions(d,{className:a.geomanIcons[h]})}},removeControls(){let s=this.getButtons();for(let a in s)s[a].remove();this.isVisible=!1},toggleControls(s=this.options){this.isVisible?this.removeControls():this.addControls(s)},_addButton(s,a){return this.buttons[s]=a,this.options[s]=!!this.options[s]||!1,this.buttons[s]},triggerClickOnToggledButtons(s){for(let a in this.buttons){let h=this.buttons[a];h._button.disableByOtherButtons&&h!==s&&h.toggled()&&h._triggerClick()}},toggleButton(s,a,h=!0){s==="editPolygon"&&(s="editMode"),s==="deleteLayer"&&(s="removalMode");let d=s;return h&&this.triggerClickOnToggledButtons(this.buttons[d]),this.buttons[d]?this.buttons[d].toggle(a):!1},_defineButtons(){let s={className:"control-icon leaflet-pm-icon-marker",title:De("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:()=>{},afterClick:(_t,Et)=>{this.map.pm.Draw[Et.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},a={title:De("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:()=>{},afterClick:(_t,Et)=>{this.map.pm.Draw[Et.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},h={className:"control-icon leaflet-pm-icon-polyline",title:De("buttonTitles.drawLineButton"),jsClass:"Line",onClick:()=>{},afterClick:(_t,Et)=>{this.map.pm.Draw[Et.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},d={title:De("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:()=>{},afterClick:(_t,Et)=>{this.map.pm.Draw[Et.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},_={title:De("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:()=>{},afterClick:(_t,Et)=>{this.map.pm.Draw[Et.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},w={title:De("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:()=>{},afterClick:(_t,Et)=>{this.map.pm.Draw[Et.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},b={title:De("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},S={title:De("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},T={title:De("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:()=>{},afterClick:(_t,Et)=>{this.map.pm.Draw[Et.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},O={title:De("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},X={title:De("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},$={className:"control-icon leaflet-pm-icon-text",title:De("buttonTitles.drawTextButton"),jsClass:"Text",onClick:()=>{},afterClick:(_t,Et)=>{this.map.pm.Draw[Et.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(s)),this._addButton("drawPolyline",new L.Control.PMButton(h)),this._addButton("drawRectangle",new L.Control.PMButton(w)),this._addButton("drawPolygon",new L.Control.PMButton(a)),this._addButton("drawCircle",new L.Control.PMButton(d)),this._addButton("drawCircleMarker",new L.Control.PMButton(_)),this._addButton("drawText",new L.Control.PMButton($)),this._addButton("editMode",new L.Control.PMButton(b)),this._addButton("dragMode",new L.Control.PMButton(S)),this._addButton("cutPolygon",new L.Control.PMButton(T)),this._addButton("removalMode",new L.Control.PMButton(O)),this._addButton("rotateMode",new L.Control.PMButton(X))},_showHideButtons(){if(!this.isVisible)return;this.removeControls(),this.isVisible=!0;let s=this.getButtons(),a=[];this.options.drawControls===!1&&(a=a.concat(Object.keys(s).filter(h=>!s[h]._button.tool))),this.options.editControls===!1&&(a=a.concat(Object.keys(s).filter(h=>s[h]._button.tool==="edit"))),this.options.optionsControls===!1&&(a=a.concat(Object.keys(s).filter(h=>s[h]._button.tool==="options"))),this.options.customControls===!1&&(a=a.concat(Object.keys(s).filter(h=>s[h]._button.tool==="custom")));for(let h in s)if(this.options[h]&&a.indexOf(h)===-1){let d=s[h]._button.tool;d||(d="draw"),s[h].setPosition(this._getBtnPosition(d)),s[h].addTo(this.map)}},_getBtnPosition(s){return this.options.positions&&this.options.positions[s]?this.options.positions[s]:this.options.position},setBlockPosition(s,a){this.options.positions[s]=a,this._showHideButtons(),this.changeControlOrder()},getBlockPositions(){return this.options.positions},copyDrawControl(s,a){if(a)typeof a!="object"&&(a={name:a});else throw new TypeError("Button has no name");let h=this._btnNameMapping(s);if(!a.name)throw new TypeError("Button has no name");if(this.buttons[a.name])throw new TypeError("Button with this name already exists");let d=this.map.pm.Draw.createNewDrawInstance(a.name,h);a={...this.buttons[h]._button,...a};let _=this.createCustomControl(a);return{drawInstance:d,control:_}},createCustomControl(s){if(!s.name)throw new TypeError("Button has no name");if(this.buttons[s.name])throw new TypeError("Button with this name already exists");s.onClick||(s.onClick=()=>{}),s.afterClick||(s.afterClick=()=>{}),s.toggle!==!1&&(s.toggle=!0),s.block&&(s.block=s.block.toLowerCase()),(!s.block||s.block==="draw")&&(s.block=""),s.className?s.className.indexOf("control-icon")===-1&&(s.className=`control-icon ${s.className}`):s.className="control-icon";let a={tool:s.block,className:s.className,title:s.title||"",jsClass:s.name,onClick:s.onClick,afterClick:s.afterClick,doToggle:s.toggle,toggleStatus:!1,disableOtherButtons:s.disableOtherButtons??!0,disableByOtherButtons:s.disableByOtherButtons??!0,cssToggle:s.toggle,position:this.options.position,actions:s.actions||[],disabled:!!s.disabled};this.options[s.name]!==!1&&(this.options[s.name]=!0);let h=this._addButton(s.name,new L.Control.PMButton(a));return this.changeControlOrder(),h},controlExists(s){return!!this.getButton(s)},getButton(s){return this.getButtons()[s]},getButtonsInBlock(s){let a={};if(s)for(let h in this.getButtons()){let d=this.getButtons()[h];(d._button.tool===s||s==="draw"&&!d._button.tool)&&(a[h]=d)}return a},changeControlOrder(s=[]){let a=this._shapeMapping(),h=[];s.forEach(w=>{a[w]?h.push(a[w]):h.push(w)});let d=this.getButtons(),_={};h.forEach(w=>{d[w]&&(_[w]=d[w])}),Object.keys(d).filter(w=>!d[w]._button.tool||d[w]._button.tool==="draw").forEach(w=>{h.indexOf(w)===-1&&(_[w]=d[w])}),Object.keys(d).filter(w=>d[w]._button.tool==="edit").forEach(w=>{h.indexOf(w)===-1&&(_[w]=d[w])}),Object.keys(d).filter(w=>d[w]._button.tool==="options").forEach(w=>{h.indexOf(w)===-1&&(_[w]=d[w])}),Object.keys(d).filter(w=>d[w]._button.tool==="custom").forEach(w=>{h.indexOf(w)===-1&&(_[w]=d[w])}),Object.keys(d).forEach(w=>{h.indexOf(w)===-1&&(_[w]=d[w])}),this.map.pm.Toolbar.buttons=_,this._showHideButtons()},getControlOrder(){let s=this.getButtons(),a=[];for(let h in s)a.push(h);return a},changeActionsOfControl(s,a){let h=this._btnNameMapping(s);if(!h)throw new TypeError("No name passed");if(!a)throw new TypeError("No actions passed");if(!this.buttons[h])throw new TypeError("Button with this name not exists");this.buttons[h]._button.actions=a,this.changeControlOrder()},setButtonDisabled(s,a){let h=this._btnNameMapping(s);a?this.buttons[h].disable():this.buttons[h].enable()},_shapeMapping(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping(s){let a=this._shapeMapping();return a[s]?a[s]:s}}),ja=hl,Ul=E(Zr()),Qo={_initSnappableMarkers(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents(s){s.forEach(a=>{if(Array.isArray(a)){this._assignEvents(a);return}a.off("drag",this._handleSnapping,this),a.on("drag",this._handleSnapping,this),a.off("dragend",this._cleanupSnapping,this),a.on("dragend",this._cleanupSnapping,this)})},_cleanupSnapping(s){if(s){let a=s.target;a._snapped=!1}delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("layerremove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(a=>{a.remove()})},_handleThrottleSnapping(){this.throttledList&&this._createSnapList()},_handleSnapping(s){var S,T,O;let a=s.target;if(a._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),((S=s==null?void 0:s.originalEvent)==null?void 0:S.altKey)||((O=(T=this._map)==null?void 0:T.pm)==null?void 0:O.Keyboard.isAltKeyPressed())||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;let h=this._calcClosestLayer(a.getLatLng(),this._snapList);if(Object.keys(h).length===0)return!1;let d=h.layer instanceof L.Marker||h.layer instanceof L.CircleMarker||!this.options.snapSegment,_;d?_=h.latlng:_=this._checkPrioritiySnapping(h);let w=this.options.snapDistance,b={marker:a,shape:this._shape,snapLatLng:_,segment:h.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:h.layer,distance:h.distance};if(this._fireSnapDrag(b.marker,b),this._fireSnapDrag(this._layer,b),h.distance<w){a._orgLatLng=a.getLatLng(),a.setLatLng(_),a._snapped=!0,a._snapInfo=b;let X=()=>{this._snapLatLng=_,this._fireSnap(a,b),this._fireSnap(this._layer,b)},$=this._snapLatLng||{},_t=_||{};($.lat!==_t.lat||$.lng!==_t.lng)&&X()}else this._snapLatLng&&(this._unsnap(b),a._snapped=!1,a._snapInfo=void 0,this._fireUnsnap(b.marker,b),this._fireUnsnap(this._layer,b));return!0},_createSnapList(){let s=[],a=[],h=this._map;h.off("layerremove",this._handleSnapLayerRemoval,this),h.on("layerremove",this._handleSnapLayerRemoval,this),h.eachLayer(d=>{if((d instanceof L.Polyline||d instanceof L.Marker||d instanceof L.CircleMarker||d instanceof L.ImageOverlay)&&d.options.snapIgnore!==!0){if(d.options.snapIgnore===void 0&&(!L.PM.optIn&&d.options.pmIgnore===!0||L.PM.optIn&&d.options.pmIgnore!==!1))return;(d instanceof L.Circle||d instanceof L.CircleMarker)&&d.pm&&d.pm._hiddenPolyCircle?s.push(d.pm._hiddenPolyCircle):d instanceof L.ImageOverlay&&(d=L.rectangle(d.getBounds())),s.push(d);let _=L.polyline([],{color:"red",pmIgnore:!0});_._pmTempLayer=!0,a.push(_),(d instanceof L.Circle||d instanceof L.CircleMarker)&&a.push(_)}}),s=s.filter(d=>this._layer!==d),s=s.filter(d=>d._latlng||d._latlngs&&or(d._latlngs)),s=s.filter(d=>!d._pmTempLayer),this._otherSnapLayers?(this._otherSnapLayers.forEach(()=>{let d=L.polyline([],{color:"red",pmIgnore:!0});d._pmTempLayer=!0,a.push(d)}),this._snapList=s.concat(this._otherSnapLayers)):this._snapList=s,this.debugIndicatorLines=a},_handleSnapLayerRemoval({layer:s}){if(!s._leaflet_id)return;let a=this._snapList.findIndex(h=>h._leaflet_id===s._leaflet_id);a>-1&&this._snapList.splice(a,1)},_calcClosestLayer(s,a){return this._calcClosestLayers(s,a,1)[0]},_calcClosestLayers(s,a,h=1){let d=[],_={};a.forEach((b,S)=>{var O;if(b._parentCopy&&b._parentCopy===this._layer||((O=b.getLatLngs)==null?void 0:O.call(b).flat(5).length)<2)return;let T=this._calcLayerDistances(s,b);if(T.distance=Math.floor(T.distance),this.debugIndicatorLines){if(!this.debugIndicatorLines[S]){let X=L.polyline([],{color:"red",pmIgnore:!0});X._pmTempLayer=!0,this.debugIndicatorLines[S]=X}this.debugIndicatorLines[S].setLatLngs([s,T.latlng])}h===1&&(_.distance===void 0||T.distance-5<=_.distance)?(T.distance+5<_.distance&&(d=[]),_=T,_.layer=b,d.push(_)):h!==1&&(_={},_=T,_.layer=b,d.push(_))}),h!==1&&(d=d.sort((b,S)=>b.distance-S.distance)),h===-1&&(h=d.length);let w=this._getClosestLayerByPriority(d,h);return L.Util.isArray(w)?w:[w]},_calcLayerDistances(s,a){let h=this._map,d=a instanceof L.Marker||a instanceof L.CircleMarker,_=a instanceof L.Polygon,w=s;if(d){let b=a.getLatLng();return{latlng:{...b},distance:this._getDistance(h,b,w)}}return this._calcLatLngDistances(w,a.getLatLngs(),h,_)},_calcLatLngDistances(s,a,h,d=!1){let _,w,b,S=T=>{T.forEach((O,X)=>{if(Array.isArray(O)){S(O);return}if(this.options.snapSegment){let $=O,_t;d?_t=X+1===T.length?0:X+1:_t=X+1===T.length?void 0:X+1;let Et=T[_t];if(Et){let Ut=this._getDistanceToSegment(h,s,$,Et);(w===void 0||Ut<w)&&(w=Ut,b=[$,Et])}}else{let $=this._getDistance(h,s,O);(w===void 0||$<w)&&(w=$,_=O)}})};return S(a),this.options.snapSegment?{latlng:{...this._getClosestPointOnSegment(h,s,b[0],b[1])},segment:b,distance:w}:{latlng:_,distance:w}},_getClosestLayerByPriority(s,a=1){s=s.sort((b,S)=>b._leaflet_id-S._leaflet_id);let h=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],d=this._map.pm.globalOptions.snappingOrder||[],_=0,w={};return d.concat(h).forEach(b=>{w[b]||(_+=1,w[b]=_)}),s.sort(Fa("instanceofShape",w)),a===1?s[0]||{}:s.slice(0,a)},_checkPrioritiySnapping(s){let a=this._map,h=s.segment[0],d=s.segment[1],_=s.latlng,w=_;if(this.options.snapVertex){let b=this._getDistance(a,h,_),S=this._getDistance(a,d,_),T=b<S?h:d,O=b<S?b:S;if(this.options.snapMiddle){let $=L.PM.Utils.calcMiddleLatLng(a,h,d),_t=this._getDistance(a,$,_);_t<b&&_t<S&&(T=$,O=_t)}let X=this.options.snapDistance;O<X&&(w=T)}return{...w}},_unsnap(){delete this._snapLatLng},_getClosestPointOnSegment(s,a,h,d){let _=s.getMaxZoom();_===1/0&&(_=s.getZoom());let w=s.project(a,_),b=s.project(h,_),S=s.project(d,_),T=L.LineUtil.closestPointOnSegment(w,b,S);return s.unproject(T,_)},_getDistanceToSegment(s,a,h,d){let _=s.latLngToContainerPoint(a),w=s.latLngToContainerPoint(h),b=s.latLngToContainerPoint(d);return L.LineUtil.pointToSegmentDistance(_,w,b)},_getDistance(s,a,h){return s.latLngToContainerPoint(a).distanceTo(s.latLngToContainerPoint(h))}},Ua=Qo,Hl=L.Class.extend({includes:[Ua,Rr],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,resizeableCircleMarker:!1,resizeableCircle:!0,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1,rectangleAngle:0,textOptions:{text:null,focusAfterDraw:null,removeIfEmpty:null,className:null},snapVertex:!0},setOptions(s){L.Util.setOptions(this,s),this.setStyle(this.options)},setStyle(){},getOptions(){return this.options},initialize(s){let a=new L.Icon.Default;a.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=a,this._map=s,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(h=>{this[h]=new L.PM.Draw[h](this._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions(s,a=!1){a?this.options.pathOptions=(0,Ul.default)(this.options.pathOptions,s):this.options.pathOptions=s},getShapes(){return this.shapes},getShape(){return this._shape},enable(s,a){if(!s)throw new Error(`Error: Please pass a shape as a parameter. Possible shapes are: ${this.getShapes().join(",")}`);this.disable(),this[s].enable(a)},disable(){this.shapes.forEach(s=>{this[s].disable()})},addControls(){this.shapes.forEach(s=>{this[s].addButton()})},getActiveShape(){let s;return this.shapes.forEach(a=>{this[a]._enabled&&(s=a)}),s},_setGlobalDrawMode(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();let s=[];this._map.eachLayer(a=>{(a instanceof L.Polyline||a instanceof L.Marker||a instanceof L.Circle||a instanceof L.CircleMarker||a instanceof L.ImageOverlay)&&(a._pmTempLayer||s.push(a))}),this._enabled?s.forEach(a=>{L.PM.Utils.disablePopup(a)}):s.forEach(a=>{L.PM.Utils.enablePopup(a)})},createNewDrawInstance(s,a){let h=this._getShapeFromBtnName(a);if(this[s])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[h])throw new TypeError(`There is no class L.PM.Draw.${h}`);return this[s]=new L.PM.Draw[h](this._map),this[s].toolbarButtonName=s,this[s]._shape=s,this.shapes.push(s),this[a]&&this[s].setOptions(this[a].options),this[s].setOptions(this[s].options),this[s]},_getShapeFromBtnName(s){let a={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return a[s]?a[s]:this[s]?this[s]._shape:s},_finishLayer(s){s.pm&&(s.pm.setOptions(this.options),s.pm._shape=this._shape,s.pm._map=this._map),this._addDrawnLayerProp(s)},_addDrawnLayerProp(s){s._drawnByGeoman=!0},_setPane(s,a){a==="layerPane"?s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":a==="vertexPane"?s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":a==="markerPane"&&(s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}}),Fi=Hl;Fi.Marker=Fi.extend({initialize(s){this._map=s,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable(s){L.Util.setOptions(this,s),this._enabled=!0,this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(De("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(a=>{this.isRelevantMarker(a)&&a.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(s=>{this.isRelevantMarker(s)&&s.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},isRelevantMarker(s){return s instanceof L.Marker&&s.pm&&!s._pmTempLayer&&!s.pm._initTextMarker},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this.options.snappable){let a=s;a.target=this._hintMarker,this._handleSnapping(a)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker(s){if(!s.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let a=this._hintMarker.getLatLng(),h=new L.Marker(a,this.options.markerStyle);this._setPane(h,"markerPane"),this._finishLayer(h),h.pm||(h.options.draggable=!1),h.addTo(this._map.pm._getContainingLayer()),h.pm&&this.options.markerEditable?h.pm.enable():h.dragging&&h.dragging.disable(),this._fireCreate(h),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},setStyle(){var s,a;(s=this.options.markerStyle)!=null&&s.icon&&((a=this._hintMarker)==null||a.setIcon(this.options.markerStyle.icon))}});var Ji=63710088e-1,cl={centimeters:Ji*100,centimetres:Ji*100,degrees:Ji/111325,feet:Ji*3.28084,inches:Ji*39.37,kilometers:Ji/1e3,kilometres:Ji/1e3,meters:Ji,metres:Ji,miles:Ji/1609.344,millimeters:Ji*1e3,millimetres:Ji*1e3,nauticalmiles:Ji/1852,radians:1,yards:Ji*1.0936};function ts(s,a,h){h===void 0&&(h={});var d={type:"Feature"};return(h.id===0||h.id)&&(d.id=h.id),h.bbox&&(d.bbox=h.bbox),d.properties=a||{},d.geometry=s,d}function Is(s,a,h){if(h===void 0&&(h={}),!s)throw new Error("coordinates is required");if(!Array.isArray(s))throw new Error("coordinates must be an Array");if(s.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Ha(s[0])||!Ha(s[1]))throw new Error("coordinates must contain numbers");var d={type:"Point",coordinates:s};return ts(d,a,h)}function es(s,a,h){if(h===void 0&&(h={}),s.length<2)throw new Error("coordinates must be an array of two or more positions");var d={type:"LineString",coordinates:s};return ts(d,a,h)}function gn(s,a){a===void 0&&(a={});var h={type:"FeatureCollection"};return a.id&&(h.id=a.id),a.bbox&&(h.bbox=a.bbox),h.features=s,h}function Vl(s,a){a===void 0&&(a="kilometers");var h=cl[a];if(!h)throw new Error(a+" units is invalid");return s*h}function Rs(s,a){a===void 0&&(a="kilometers");var h=cl[a];if(!h)throw new Error(a+" units is invalid");return s/h}function mn(s){var a=s%(2*Math.PI);return a*180/Math.PI}function In(s){var a=s%360;return a*Math.PI/180}function Ha(s){return!isNaN(s)&&s!==null&&!Array.isArray(s)}function Co(s){var a,h,d={type:"FeatureCollection",features:[]};if(s.type==="Feature"?h=s.geometry:h=s,h.type==="LineString")a=[h.coordinates];else if(h.type==="MultiLineString")a=h.coordinates;else if(h.type==="MultiPolygon")a=[].concat.apply([],h.coordinates);else if(h.type==="Polygon")a=h.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return a.forEach(function(_){a.forEach(function(w){for(var b=0;b<_.length-1;b++)for(var S=b;S<w.length-1;S++)if(!(_===w&&(Math.abs(b-S)===1||b===0&&S===_.length-2&&_[b][0]===_[_.length-1][0]&&_[b][1]===_[_.length-1][1]))){var T=Va(_[b][0],_[b][1],_[b+1][0],_[b+1][1],w[S][0],w[S][1],w[S+1][0],w[S+1][1]);T&&d.features.push(Is([T[0],T[1]]))}})}),d}function Va(s,a,h,d,_,w,b,S){var T,O,X,$,_t,Et={x:null,y:null,onLine1:!1,onLine2:!1};return T=(S-w)*(h-s)-(b-_)*(d-a),T===0?Et.x!==null&&Et.y!==null?Et:!1:(O=a-w,X=s-_,$=(b-_)*O-(S-w)*X,_t=(h-s)*O-(d-a)*X,O=$/T,X=_t/T,Et.x=s+O*(h-s),Et.y=a+O*(d-a),O>=0&&O<=1&&(Et.onLine1=!0),X>=0&&X<=1&&(Et.onLine2=!0),Et.onLine1&&Et.onLine2?[Et.x,Et.y]:!1)}Fi.Line=Fi.extend({initialize(s){this._map=s,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable(s){L.Util.setOptions(this,s),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],{...this.options.templineStyle,pmIgnore:!1}),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(De("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this.isRed=!1,this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},_syncHintLine(){let s=this._layer.getLatLngs();if(s.length>0){let a=s[s.length-1];this._hintline.setLatLngs([a,this._hintMarker.getLatLng()])}},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this.options.snappable){let h=s;h.target=this._hintMarker,this._handleSnapping(h)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());let a=this._layer._defaultShape().slice();a.push(this._hintMarker.getLatLng()),this._change(a)},hasSelfIntersection(){return Co(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection(s,a){let h=L.polyline(this._layer.getLatLngs());s&&(a||(a=this._hintMarker.getLatLng()),h.addLatLng(a));let d=Co(h.toGeoJSON(15));this._doesSelfIntersect=d.features.length>0,this._doesSelfIntersect?this.isRed||(this.isRed=!0,this._hintline.setStyle({color:"#f00000ff"}),this._fireIntersect(d,this._map,"Draw")):this._hintline.isEmpty()||(this.isRed=!1,this._hintline.setStyle(this.options.hintlineStyle))},_createVertex(s){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,s.latlng),this._doesSelfIntersect))return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let a=this._hintMarker.getLatLng(),h=this._layer.getLatLngs(),d=h[h.length-1];if(a.equals(h[0])||h.length>0&&a.equals(d)){this._finishShape();return}this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:a,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(a);let _=this._createMarker(a);this._setTooltipText(),this._setHintLineAfterNewVertex(a),this._fireVertexAdded(_,void 0,a,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(s)},_setHintLineAfterNewVertex(s){this._hintline.setLatLngs([s,s])},_removeLastVertex(){let s=this._markers;if(s.length<=1){this.disable();return}let a=this._layer.getLatLngs(),h=s[s.length-1],{indexPath:d}=L.PM.Utils.findDeepMarkerIndex(s,h);s.pop(),this._layerGroup.removeLayer(h);let _=s[s.length-1],w=a.indexOf(_.getLatLng());a=a.slice(0,w+1),this._layer.setLatLngs(a),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(h,d,"Draw"),this._change(this._layer.getLatLngs())},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!1),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let s=this._layer.getLatLngs();if(s.length<=1)return;let a=L.polyline(s,this.options.pathOptions);this._setPane(a,"layerPane"),this._finishLayer(a),a.addTo(this._map.pm._getContainingLayer()),this._fireCreate(a),this.options.snappable&&this._cleanupSnapping();let h=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(h))},_createMarker(s){let a=new L.Marker(s,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(a,"vertexPane"),a._pmTempLayer=!0,this._layerGroup.addLayer(a),this._markers.push(a),a.on("click",this._finishShape,this),a},_setTooltipText(){let{length:s}=this._layer.getLatLngs().flat(),a="";s<=1?a=De("tooltips.continueLine"):a=De("tooltips.finishLine"),this._hintMarker.setTooltipContent(a)},_change(s){this._fireChange(s,"Draw")},setStyle(){var s,a;(s=this._layer)==null||s.setStyle(this.options.templineStyle),(a=this._hintline)==null||a.setStyle(this.options.hintlineStyle)}}),Fi.Polygon=Fi.Line.extend({initialize(s){this._map=s,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable(s){L.PM.Draw.Line.prototype.enable.call(this,s),this._layer.pm._shape="Polygon"},_createMarker(s){let a=new L.Marker(s,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(a,"vertexPane"),a._pmTempLayer=!0,this._layerGroup.addLayer(a),this._markers.push(a),this._layer.getLatLngs().flat().length===1?(a.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(a)-1,this.options.snappable&&this._cleanupSnapping()):a.on("click",()=>1),a},_setTooltipText(){let{length:s}=this._layer.getLatLngs().flat(),a="";s<=2?a=De("tooltips.continueLine"):a=De("tooltips.finishPoly"),this._hintMarker.setTooltipContent(a)},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let s=this._layer.getLatLngs();if(s.length<=2)return;let a=L.polygon(s,this.options.pathOptions);this._setPane(a,"layerPane"),this._finishLayer(a),a.addTo(this._map.pm._getContainingLayer()),this._fireCreate(a),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex;let h=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(h))}}),Fi.Rectangle=Fi.extend({initialize(s){this._map=s,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable(s){if(L.Util.setOptions(this,s),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(De("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(let a=0;a<2;a+=1){let h=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(h,"vertexPane"),h._pmTempLayer=!0,this._layerGroup.addLayer(h),this._styleMarkers.push(h)}}this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},_placeStartingMarkers(s){this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let a=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(a),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(h=>{L.DomUtil.addClass(h._icon,"visible"),h.setLatLng(a)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(De("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin(){let s=this._startMarker.getLatLng();s&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([s,s]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this.options.snappable){let h=s;h.target=this._hintMarker,this._handleSnapping(h)}let a=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(a,"Draw")},_syncRectangleSize(){let s=ul(this._startMarker.getLatLng(),this._map),a=ul(this._hintMarker.getLatLng(),this._map),h=L.PM.Utils._getRotatedRectangle(s,a,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(h),this.options.cursorMarker&&this._styleMarkers){let d=[];h.forEach(_=>{!_.equals(s,1e-8)&&!_.equals(a,1e-8)&&d.push(_)}),d.forEach((_,w)=>{try{this._styleMarkers[w].setLatLng(_)}catch{}})}},_findCorners(){let s=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(s[0],s[2],this.options.rectangleAngle||0,this._map)},_finishShape(s){this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let a=this._hintMarker.getLatLng(),h=this._startMarker.getLatLng();if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||h.equals(a))return;let d=L.rectangle([h,a],this.options.pathOptions);if(this.options.rectangleAngle){let w=L.PM.Utils._getRotatedRectangle(h,a,this.options.rectangleAngle||0,this._map);d.setLatLngs(w),d.pm&&d.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(d,"layerPane"),this._finishLayer(d),d.addTo(this._map.pm._getContainingLayer()),this._fireCreate(d);let _=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(_))},setStyle(){var s;(s=this._layer)==null||s.setStyle(this.options.pathOptions)}}),Fi.CircleMarker=Fi.extend({initialize(s){this._map=s,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1,this._BaseCircleClass=L.CircleMarker,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._defaultRadius=10},enable(s){if(L.Util.setOptions(this,s),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._map.getContainer().classList.add("geoman-draw-cursor"),this.options[this._editableOption]){let a={};L.extend(a,this.options.templineStyle),a.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=new this._BaseCircleClass(this._map.getCenter(),a),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(De("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this)}else this._map.on("click",this._createMarker,this),this._hintMarker=new this._BaseCircleClass(this._map.getCenter(),{radius:this._defaultRadius,...this.options.templineStyle}),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(De("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),this._extendingEnable(),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},_extendingEnable(){!this.options[this._editableOption]&&this.options.markerEditable&&this._map.eachLayer(s=>{this.isRelevantMarker(s)&&s.pm.enable()}),this._layer.bringToBack()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this.options[this._editableOption]?(this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._extendingDisable(),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_extendingDisable(){this._map.eachLayer(s=>{this.isRelevantMarker(s)&&s.pm.disable()})},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},_placeCenterMarker(s){this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng),this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker);let a=this._hintMarker.getLatLng();this._centerMarker.setLatLng(a),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter(){let s=this._centerMarker.getLatLng();s&&(this._layer.setLatLng(s),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(De("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine(){let s=this._centerMarker.getLatLng(),a=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([s,a])},_syncCircleRadius(){let s=this._centerMarker.getLatLng(),a=this._hintMarker.getLatLng(),h=this._distanceCalculation(s,a);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(h)},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){let h=s;h.target=this._hintMarker,this._handleSnapping(h)}this._handleHintMarkerSnapping();let a=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(a,"Draw")},isRelevantMarker(s){return s instanceof L.CircleMarker&&!(s instanceof L.Circle)&&s.pm&&!s._pmTempLayer},_createMarker(s){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||!s.latlng||this._layerIsDragging)return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let a=this._hintMarker.getLatLng(),h=new this._BaseCircleClass(a,{radius:this._defaultRadius,...this.options.pathOptions});this._setPane(h,"layerPane"),this._finishLayer(h),h.addTo(this._map.pm._getContainingLayer()),this._extendingCreateMarker(h),this._fireCreate(h),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},_extendingCreateMarker(s){s.pm&&this.options.markerEditable&&s.pm.enable()},_finishShape(s){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let a=this._centerMarker.getLatLng(),h=this._defaultRadius;if(this.options[this._editableOption]){let b=this._hintMarker.getLatLng();h=this._distanceCalculation(a,b),this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?h=this.options[this._minRadiusOption]:this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&(h=this.options[this._maxRadiusOption])}let d={...this.options.pathOptions,radius:h},_=new this._BaseCircleClass(a,d);this._setPane(_,"layerPane"),this._finishLayer(_),_.addTo(this._map.pm._getContainingLayer()),_.pm&&_.pm._updateHiddenPolyCircle(),this._fireCreate(_);let w=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(w))},_getNewDestinationOfHintMarker(){let s=this._hintMarker.getLatLng();if(this.options[this._editableOption]){if(!this._layerGroup.hasLayer(this._centerMarker))return s;let a=this._centerMarker.getLatLng(),h=this._distanceCalculation(a,s);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?s=Dr(this._map,a,s,this._getMinDistanceInMeter()):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&(s=Dr(this._map,a,s,this._getMaxDistanceInMeter()))}return s},_getMinDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,this._centerMarker.getLatLng())},_getMaxDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,this._centerMarker.getLatLng())},_handleHintMarkerSnapping(){if(this.options[this._editableOption]){if(this._hintMarker._snapped){let s=this._centerMarker.getLatLng(),a=this._hintMarker.getLatLng(),h=this._distanceCalculation(s,a);this._layerGroup.hasLayer(this._centerMarker)&&(this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._hintMarker.setLatLng(this._hintMarker._orgLatLng):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng))}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},setStyle(){var a,h;let s={};L.extend(s,this.options.templineStyle),this.options[this._editableOption]&&(s.radius=0),(a=this._layer)==null||a.setStyle(s),(h=this._hintline)==null||h.setStyle(this.options.hintlineStyle)},_distanceCalculation(s,a){return this._map.project(s).distanceTo(this._map.project(a))}}),Fi.Circle=Fi.CircleMarker.extend({initialize(s){this._map=s,this._shape="Circle",this.toolbarButtonName="drawCircle",this._BaseCircleClass=L.Circle,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._defaultRadius=100},_extendingEnable(){},_extendingDisable(){},_extendingCreateMarker(){},isRelevantMarker(){},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_distanceCalculation(s,a){return this._map.distance(s,a)}});function Rn(s){if(!s)throw new Error("coord is required");if(!Array.isArray(s)){if(s.type==="Feature"&&s.geometry!==null&&s.geometry.type==="Point")return s.geometry.coordinates;if(s.type==="Point")return s.coordinates}if(Array.isArray(s)&&s.length>=2&&!Array.isArray(s[0])&&!Array.isArray(s[1]))return s;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function ar(s){if(Array.isArray(s))return s;if(s.type==="Feature"){if(s.geometry!==null)return s.geometry.coordinates}else if(s.coordinates)return s.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function ta(s){return s.type==="Feature"?s.geometry:s}function Wa(s,a){return s.type==="FeatureCollection"?"FeatureCollection":s.type==="GeometryCollection"?"GeometryCollection":s.type==="Feature"&&s.geometry!==null?s.geometry.type:s.type}function $a(s,a,h){if(s!==null)for(var d,_,w,b,S,T,O,X=0,$=0,_t,Et=s.type,Ut=Et==="FeatureCollection",te=Et==="Feature",le=Ut?s.features.length:1,Ke=0;Ke<le;Ke++){O=Ut?s.features[Ke].geometry:te?s.geometry:s,_t=O?O.type==="GeometryCollection":!1,S=_t?O.geometries.length:1;for(var K=0;K<S;K++){var tt=0,at=0;if(b=_t?O.geometries[K]:O,b!==null){T=b.coordinates;var xt=b.type;switch(X=0,xt){case null:break;case"Point":if(a(T,$,Ke,tt,at)===!1)return!1;$++,tt++;break;case"LineString":case"MultiPoint":for(d=0;d<T.length;d++){if(a(T[d],$,Ke,tt,at)===!1)return!1;$++,xt==="MultiPoint"&&tt++}xt==="LineString"&&tt++;break;case"Polygon":case"MultiLineString":for(d=0;d<T.length;d++){for(_=0;_<T[d].length-X;_++){if(a(T[d][_],$,Ke,tt,at)===!1)return!1;$++}xt==="MultiLineString"&&tt++,xt==="Polygon"&&at++}xt==="Polygon"&&tt++;break;case"MultiPolygon":for(d=0;d<T.length;d++){for(at=0,_=0;_<T[d].length;_++){for(w=0;w<T[d][_].length-X;w++){if(a(T[d][_][w],$,Ke,tt,at)===!1)return!1;$++}at++}tt++}break;case"GeometryCollection":for(d=0;d<b.geometries.length;d++)if($a(b.geometries[d],a)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function on(s,a){if(s.type==="Feature")a(s,0);else if(s.type==="FeatureCollection")for(var h=0;h<s.features.length&&a(s.features[h],h)!==!1;h++);}function is(s,a,h){var d=h;return on(s,function(_,w){w===0&&h===void 0?d=_:d=a(d,_,w)}),d}function bo(s,a){var h,d,_,w,b,S,T,O,X,$,_t=0,Et=s.type==="FeatureCollection",Ut=s.type==="Feature",te=Et?s.features.length:1;for(h=0;h<te;h++){for(S=Et?s.features[h].geometry:Ut?s.geometry:s,O=Et?s.features[h].properties:Ut?s.properties:{},X=Et?s.features[h].bbox:Ut?s.bbox:void 0,$=Et?s.features[h].id:Ut?s.id:void 0,T=S?S.type==="GeometryCollection":!1,b=T?S.geometries.length:1,_=0;_<b;_++){if(w=T?S.geometries[_]:S,w===null){if(a(null,_t,O,X,$)===!1)return!1;continue}switch(w.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(a(w,_t,O,X,$)===!1)return!1;break}case"GeometryCollection":{for(d=0;d<w.geometries.length;d++)if(a(w.geometries[d],_t,O,X,$)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}_t++}}function Wn(s,a){bo(s,function(h,d,_,w,b){var S=h===null?null:h.type;switch(S){case null:case"Point":case"LineString":case"Polygon":return a(ts(h,_,{bbox:w,id:b}),d,0)===!1?!1:void 0}var T;switch(S){case"MultiPoint":T="Point";break;case"MultiLineString":T="LineString";break;case"MultiPolygon":T="Polygon";break}for(var O=0;O<h.coordinates.length;O++){var X=h.coordinates[O],$={type:T,coordinates:X};if(a(ts($,_),d,O)===!1)return!1}})}function fl(s){if(!s)throw new Error("geojson is required");var a=[];return Wn(s,function(h){Os(h,a)}),gn(a)}function Os(s,a){var h=[],d=s.geometry;if(d!==null){switch(d.type){case"Polygon":h=ar(d);break;case"LineString":h=[ar(d)]}h.forEach(function(_){var w=dl(_,s.properties);w.forEach(function(b){b.id=a.length,a.push(b)})})}}function dl(s,a){var h=[];return s.reduce(function(d,_){var w=es([d,_],a);return w.bbox=to(d,_),h.push(w),_}),h}function to(s,a){var h=s[0],d=s[1],_=a[0],w=a[1],b=h<_?h:_,S=d<w?d:w,T=h>_?h:_,O=d>w?d:w;return[b,S,T,O]}var So=fl,Nr=E(En(),1);function Wl(s,a){var h={},d=[];if(s.type==="LineString"&&(s=ts(s)),a.type==="LineString"&&(a=ts(a)),s.type==="Feature"&&a.type==="Feature"&&s.geometry!==null&&a.geometry!==null&&s.geometry.type==="LineString"&&a.geometry.type==="LineString"&&s.geometry.coordinates.length===2&&a.geometry.coordinates.length===2){var _=Fr(s,a);return _&&d.push(_),gn(d)}var w=(0,Nr.default)();return w.load(So(a)),on(So(s),function(b){on(w.search(b),function(S){var T=Fr(b,S);if(T){var O=ar(T).join(",");h[O]||(h[O]=!0,d.push(T))}})}),gn(d)}function Fr(s,a){var h=ar(s),d=ar(a);if(h.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(d.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var _=h[0][0],w=h[0][1],b=h[1][0],S=h[1][1],T=d[0][0],O=d[0][1],X=d[1][0],$=d[1][1],_t=($-O)*(b-_)-(X-T)*(S-w),Et=(X-T)*(w-O)-($-O)*(_-T),Ut=(b-_)*(w-O)-(S-w)*(_-T);if(_t===0)return null;var te=Et/_t,le=Ut/_t;if(te>=0&&te<=1&&le>=0&&le<=1){var Ke=_+te*(b-_),K=w+te*(S-w);return Is([Ke,K])}return null}var lr=Wl,Za=E(En(),1);function ea(s,a,h){h===void 0&&(h={});var d=Rn(s),_=Rn(a),w=In(_[1]-d[1]),b=In(_[0]-d[0]),S=In(d[1]),T=In(_[1]),O=Math.pow(Math.sin(w/2),2)+Math.pow(Math.sin(b/2),2)*Math.cos(S)*Math.cos(T);return Vl(2*Math.atan2(Math.sqrt(O),Math.sqrt(1-O)),h.units)}var $n=ea;function bn(s){var a=s[0],h=s[1],d=s[2],_=s[3],w=$n(s.slice(0,2),[d,h]),b=$n(s.slice(0,2),[a,_]);if(w>=b){var S=(h+_)/2;return[a,S-(d-a)/2,d,S+(d-a)/2]}else{var T=(a+d)/2;return[T-(_-h)/2,h,T+(_-h)/2,_]}}var $l=bn;function Zn(s){var a=[1/0,1/0,-1/0,-1/0];return $a(s,function(h){a[0]>h[0]&&(a[0]=h[0]),a[1]>h[1]&&(a[1]=h[1]),a[2]<h[0]&&(a[2]=h[0]),a[3]<h[1]&&(a[3]=h[1])}),a}Zn.default=Zn;var ko=Zn;function ur(s,a){a===void 0&&(a={});var h=a.precision,d=a.coordinates,_=a.mutate;if(h=h==null||isNaN(h)?6:h,d=d==null||isNaN(d)?3:d,!s)throw new Error("<geojson> is required");if(typeof h!="number")throw new Error("<precision> must be a number");if(typeof d!="number")throw new Error("<coordinates> must be a number");(_===!1||_===void 0)&&(s=JSON.parse(JSON.stringify(s)));var w=Math.pow(10,h);return $a(s,function(b){eo(b,w,d)}),s}function eo(s,a,h){s.length>h&&s.splice(h,s.length);for(var d=0;d<s.length;d++)s[d]=Math.round(s[d]*a)/a;return s}var ia=ur;function Po(s,a,h){if(h===void 0&&(h={}),h.final===!0)return Ao(s,a);var d=Rn(s),_=Rn(a),w=In(d[0]),b=In(_[0]),S=In(d[1]),T=In(_[1]),O=Math.sin(b-w)*Math.cos(T),X=Math.cos(S)*Math.sin(T)-Math.sin(S)*Math.cos(T)*Math.cos(b-w);return mn(Math.atan2(O,X))}function Ao(s,a){var h=Po(a,s);return h=(h+180)%360,h}function Bo(s,a,h,d){d===void 0&&(d={});var _=Rn(s),w=In(_[0]),b=In(_[1]),S=In(h),T=Rs(a,d.units),O=Math.asin(Math.sin(b)*Math.cos(T)+Math.cos(b)*Math.sin(T)*Math.cos(S)),X=w+Math.atan2(Math.sin(S)*Math.sin(T)*Math.cos(b),Math.cos(T)-Math.sin(b)*Math.sin(O)),$=mn(X),_t=mn(O);return Is([$,_t],d.properties)}function na(s,a,h){h===void 0&&(h={});var d=Is([1/0,1/0],{dist:1/0}),_=0;return Wn(s,function(w){for(var b=ar(w),S=0;S<b.length-1;S++){var T=Is(b[S]);T.properties.dist=$n(a,T,h);var O=Is(b[S+1]);O.properties.dist=$n(a,O,h);var X=$n(T,O,h),$=Math.max(T.properties.dist,O.properties.dist),_t=Po(T,O),Et=Bo(a,$,_t+90,h),Ut=Bo(a,$,_t-90,h),te=lr(es([Et.geometry.coordinates,Ut.geometry.coordinates]),es([T.geometry.coordinates,O.geometry.coordinates])),le=null;te.features.length>0&&(le=te.features[0],le.properties.dist=$n(a,le,h),le.properties.location=_+$n(T,le,h)),T.properties.dist<d.properties.dist&&(d=T,d.properties.index=S,d.properties.location=_),O.properties.dist<d.properties.dist&&(d=O,d.properties.index=S+1,d.properties.location=_+X),le&&le.properties.dist<d.properties.dist&&(d=le,d.properties.index=S),_+=X}}),d}var io=na;function ra(s,a){if(!s)throw new Error("line is required");if(!a)throw new Error("splitter is required");var h=Wa(s),d=Wa(a);if(h!=="LineString")throw new Error("line must be LineString");if(d==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(d==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var _=ia(a,{precision:7});switch(d){case"Point":return oa(s,_);case"MultiPoint":return sa(s,_);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return sa(s,lr(s,_))}}function sa(s,a){var h=[],d=(0,Za.default)();return Wn(a,function(_){if(h.forEach(function(S,T){S.id=T}),!h.length)h=oa(s,_).features,h.forEach(function(S){S.bbox||(S.bbox=$l(ko(S)))}),d.load(gn(h));else{var w=d.search(_);if(w.features.length){var b=On(_,w);h=h.filter(function(S){return S.id!==b.id}),d.remove(b),on(oa(b,_),function(S){h.push(S),d.insert(S)})}}}),gn(h)}function oa(s,a){var h=[],d=ar(s)[0],_=ar(s)[s.geometry.coordinates.length-1];if(hr(d,Rn(a))||hr(_,Rn(a)))return gn([s]);var w=(0,Za.default)(),b=So(s);w.load(b);var S=w.search(a);if(!S.features.length)return gn([s]);var T=On(a,S),O=[d],X=is(b,function($,_t,Et){var Ut=ar(_t)[1],te=Rn(a);return Et===T.id?($.push(te),h.push(es($)),hr(te,Ut)?[te]:[te,Ut]):($.push(Ut),$)},O);return X.length>1&&h.push(es(X)),gn(h)}function On(s,a){if(!a.features.length)throw new Error("lines must contain features");if(a.features.length===1)return a.features[0];var h,d=1/0;return on(a,function(_){var w=io(_,s),b=w.properties.dist;b<d&&(h=_,d=b)}),h}function hr(s,a){return s[0]===a[0]&&s[1]===a[1]}var pl=ra;function no(s,a,h){if(h===void 0&&(h={}),!s)throw new Error("point is required");if(!a)throw new Error("polygon is required");var d=Rn(s),_=ta(a),w=_.type,b=a.bbox,S=_.coordinates;if(b&&Ka(d,b)===!1)return!1;w==="Polygon"&&(S=[S]);for(var T=!1,O=0;O<S.length&&!T;O++)if(qa(d,S[O][0],h.ignoreBoundary)){for(var X=!1,$=1;$<S[O].length&&!X;)qa(d,S[O][$],!h.ignoreBoundary)&&(X=!0),$++;X||(T=!0)}return T}function qa(s,a,h){var d=!1;a[0][0]===a[a.length-1][0]&&a[0][1]===a[a.length-1][1]&&(a=a.slice(0,a.length-1));for(var _=0,w=a.length-1;_<a.length;w=_++){var b=a[_][0],S=a[_][1],T=a[w][0],O=a[w][1],X=s[1]*(b-T)+S*(T-s[0])+O*(s[0]-b)===0&&(b-s[0])*(T-s[0])<=0&&(S-s[1])*(O-s[1])<=0;if(X)return!h;var $=S>s[1]!=O>s[1]&&s[0]<(T-b)*(s[1]-S)/(O-S)+b;$&&(d=!d)}return d}function Ka(s,a){return a[0]<=s[0]&&a[1]<=s[1]&&a[2]>=s[0]&&a[3]>=s[1]}function Ja(s,a,h){h===void 0&&(h={});for(var d=Rn(s),_=ar(a),w=0;w<_.length-1;w++){var b=!1;if(h.ignoreEndVertices&&(w===0&&(b="start"),w===_.length-2&&(b="end"),w===0&&w+1===_.length-1&&(b="both")),cr(_[w],_[w+1],d,b,typeof h.epsilon>"u"?null:h.epsilon))return!0}return!1}function cr(s,a,h,d,_){var w=h[0],b=h[1],S=s[0],T=s[1],O=a[0],X=a[1],$=h[0]-S,_t=h[1]-T,Et=O-S,Ut=X-T,te=$*Ut-_t*Et;if(_!==null){if(Math.abs(te)>_)return!1}else if(te!==0)return!1;if(d){if(d==="start")return Math.abs(Et)>=Math.abs(Ut)?Et>0?S<w&&w<=O:O<=w&&w<S:Ut>0?T<b&&b<=X:X<=b&&b<T;if(d==="end")return Math.abs(Et)>=Math.abs(Ut)?Et>0?S<=w&&w<O:O<w&&w<=S:Ut>0?T<=b&&b<X:X<b&&b<=T;if(d==="both")return Math.abs(Et)>=Math.abs(Ut)?Et>0?S<w&&w<O:O<w&&w<S:Ut>0?T<b&&b<X:X<b&&b<T}else return Math.abs(Et)>=Math.abs(Ut)?Et>0?S<=w&&w<=O:O<=w&&w<=S:Ut>0?T<=b&&b<=X:X<=b&&b<=T;return!1}var ns=Ja;function ro(s,a){var h=ta(s),d=ta(a),_=h.type,w=d.type,b=h.coordinates,S=d.coordinates;switch(_){case"Point":switch(w){case"Point":return Ds(b,S);default:throw new Error("feature2 "+w+" geometry not supported")}case"MultiPoint":switch(w){case"Point":return so(h,d);case"MultiPoint":return To(h,d);default:throw new Error("feature2 "+w+" geometry not supported")}case"LineString":switch(w){case"Point":return ns(d,h,{ignoreEndVertices:!0});case"LineString":return rs(h,d);case"MultiPoint":return aa(h,d);default:throw new Error("feature2 "+w+" geometry not supported")}case"Polygon":switch(w){case"Point":return no(d,h,{ignoreBoundary:!0});case"LineString":return oo(h,d);case"Polygon":return ss(h,d);case"MultiPoint":return gl(h,d);default:throw new Error("feature2 "+w+" geometry not supported")}default:throw new Error("feature1 "+_+" geometry not supported")}}function so(s,a){var h,d=!1;for(h=0;h<s.coordinates.length;h++)if(Ds(s.coordinates[h],a.coordinates)){d=!0;break}return d}function To(s,a){for(var h=0,d=a.coordinates;h<d.length;h++){for(var _=d[h],w=!1,b=0,S=s.coordinates;b<S.length;b++){var T=S[b];if(Ds(_,T)){w=!0;break}}if(!w)return!1}return!0}function aa(s,a){for(var h=!1,d=0,_=a.coordinates;d<_.length;d++){var w=_[d];if(ns(w,s,{ignoreEndVertices:!0})&&(h=!0),!ns(w,s))return!1}return!!h}function gl(s,a){for(var h=0,d=a.coordinates;h<d.length;h++){var _=d[h];if(!no(_,s,{ignoreBoundary:!0}))return!1}return!0}function rs(s,a){for(var h=!1,d=0,_=a.coordinates;d<_.length;d++){var w=_[d];if(ns({type:"Point",coordinates:w},s,{ignoreEndVertices:!0})&&(h=!0),!ns({type:"Point",coordinates:w},s,{ignoreEndVertices:!1}))return!1}return h}function oo(s,a){var h=!1,d=0,_=ko(s),w=ko(a);if(!la(_,w))return!1;for(d;d<a.coordinates.length-1;d++){var b=ml(a.coordinates[d],a.coordinates[d+1]);if(no({type:"Point",coordinates:b},s,{ignoreBoundary:!0})){h=!0;break}}return h}function ss(s,a){if(s.type==="Feature"&&s.geometry===null||a.type==="Feature"&&a.geometry===null)return!1;var h=ko(s),d=ko(a);if(!la(h,d))return!1;for(var _=ta(a).coordinates,w=0,b=_;w<b.length;w++)for(var S=b[w],T=0,O=S;T<O.length;T++){var X=O[T];if(!no(X,s))return!1}return!0}function la(s,a){return!(s[0]>a[0]||s[2]<a[2]||s[1]>a[1]||s[3]<a[3])}function Ds(s,a){return s[0]===a[0]&&s[1]===a[1]}function ml(s,a){return[(s[0]+a[0])/2,(s[1]+a[1])/2]}var fr=E(sr()),ua=s=>()=>s,Io=s=>{let a=s?(h,d)=>d.minus(h).abs().isLessThanOrEqualTo(s):ua(!1);return(h,d)=>a(h,d)?0:h.comparedTo(d)};function ao(s){let a=s?(h,d,_,w,b)=>h.exponentiatedBy(2).isLessThanOrEqualTo(w.minus(d).exponentiatedBy(2).plus(b.minus(_).exponentiatedBy(2)).times(s)):ua(!1);return(h,d,_)=>{let w=h.x,b=h.y,S=_.x,T=_.y,O=b.minus(T).times(d.x.minus(S)).minus(w.minus(S).times(d.y.minus(T)));return a(O,w,b,S,T)?0:O.comparedTo(0)}}var _l=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,Sn=Math.ceil,ki=Math.floor,Gi="[BigNumber Error] ",Xa=Gi+"Number primitive has more than 15 significant digits: ",qn=1e14,Ie=14,ha=9007199254740991,Ro=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],dr=1e7,Ge=1e9;function ca(s){var a,h,d,_=K.prototype={constructor:K,toString:null,valueOf:null},w=new K(1),b=20,S=4,T=-7,O=21,X=-1e7,$=1e7,_t=!1,Et=1,Ut=0,te={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},le="0123456789abcdefghijklmnopqrstuvwxyz",Ke=!0;function K(I,G){var j,z,H,U,et,it,ot,pt,mt=this;if(!(mt instanceof K))return new K(I,G);if(G==null){if(I&&I._isBigNumber===!0){mt.s=I.s,!I.c||I.e>$?mt.c=mt.e=null:I.e<X?mt.c=[mt.e=0]:(mt.e=I.e,mt.c=I.c.slice());return}if((it=typeof I=="number")&&I*0==0){if(mt.s=1/I<0?(I=-I,-1):1,I===~~I){for(U=0,et=I;et>=10;et/=10,U++);U>$?mt.c=mt.e=null:(mt.e=U,mt.c=[I]);return}pt=String(I)}else{if(!_l.test(pt=String(I)))return d(mt,pt,it);mt.s=pt.charCodeAt(0)==45?(pt=pt.slice(1),-1):1}(U=pt.indexOf("."))>-1&&(pt=pt.replace(".","")),(et=pt.search(/e/i))>0?(U<0&&(U=et),U+=+pt.slice(et+1),pt=pt.substring(0,et)):U<0&&(U=pt.length)}else{if(i(G,2,le.length,"Base"),G==10&&Ke)return mt=new K(I),ht(mt,b+mt.e+1,S);if(pt=String(I),it=typeof I=="number"){if(I*0!=0)return d(mt,pt,it,G);if(mt.s=1/I<0?(pt=pt.slice(1),-1):1,K.DEBUG&&pt.replace(/^0\.0*|\./,"").length>15)throw Error(Xa+I)}else mt.s=pt.charCodeAt(0)===45?(pt=pt.slice(1),-1):1;for(j=le.slice(0,G),U=et=0,ot=pt.length;et<ot;et++)if(j.indexOf(z=pt.charAt(et))<0){if(z=="."){if(et>U){U=ot;continue}}else if(!H&&(pt==pt.toUpperCase()&&(pt=pt.toLowerCase())||pt==pt.toLowerCase()&&(pt=pt.toUpperCase()))){H=!0,et=-1,U=0;continue}return d(mt,String(I),it,G)}it=!1,pt=h(pt,G,10,mt.s),(U=pt.indexOf("."))>-1?pt=pt.replace(".",""):U=pt.length}for(et=0;pt.charCodeAt(et)===48;et++);for(ot=pt.length;pt.charCodeAt(--ot)===48;);if(pt=pt.slice(et,++ot)){if(ot-=et,it&&K.DEBUG&&ot>15&&(I>ha||I!==ki(I)))throw Error(Xa+mt.s*I);if((U=U-et-1)>$)mt.c=mt.e=null;else if(U<X)mt.c=[mt.e=0];else{if(mt.e=U,mt.c=[],et=(U+1)%Ie,U<0&&(et+=Ie),et<ot){for(et&&mt.c.push(+pt.slice(0,et)),ot-=Ie;et<ot;)mt.c.push(+pt.slice(et,et+=Ie));et=Ie-(pt=pt.slice(et)).length}else et-=ot;for(;et--;pt+="0");mt.c.push(+pt)}}else mt.c=[mt.e=0]}K.clone=ca,K.ROUND_UP=0,K.ROUND_DOWN=1,K.ROUND_CEIL=2,K.ROUND_FLOOR=3,K.ROUND_HALF_UP=4,K.ROUND_HALF_DOWN=5,K.ROUND_HALF_EVEN=6,K.ROUND_HALF_CEIL=7,K.ROUND_HALF_FLOOR=8,K.EUCLID=9,K.config=K.set=function(I){var G,j;if(I!=null)if(typeof I=="object"){if(I.hasOwnProperty(G="DECIMAL_PLACES")&&(j=I[G],i(j,0,Ge,G),b=j),I.hasOwnProperty(G="ROUNDING_MODE")&&(j=I[G],i(j,0,8,G),S=j),I.hasOwnProperty(G="EXPONENTIAL_AT")&&(j=I[G],j&&j.pop?(i(j[0],-Ge,0,G),i(j[1],0,Ge,G),T=j[0],O=j[1]):(i(j,-Ge,Ge,G),T=-(O=j<0?-j:j))),I.hasOwnProperty(G="RANGE"))if(j=I[G],j&&j.pop)i(j[0],-Ge,-1,G),i(j[1],1,Ge,G),X=j[0],$=j[1];else if(i(j,-Ge,Ge,G),j)X=-($=j<0?-j:j);else throw Error(Gi+G+" cannot be zero: "+j);if(I.hasOwnProperty(G="CRYPTO"))if(j=I[G],j===!!j)if(j)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))_t=j;else throw _t=!j,Error(Gi+"crypto unavailable");else _t=j;else throw Error(Gi+G+" not true or false: "+j);if(I.hasOwnProperty(G="MODULO_MODE")&&(j=I[G],i(j,0,9,G),Et=j),I.hasOwnProperty(G="POW_PRECISION")&&(j=I[G],i(j,0,Ge,G),Ut=j),I.hasOwnProperty(G="FORMAT"))if(j=I[G],typeof j=="object")te=j;else throw Error(Gi+G+" not an object: "+j);if(I.hasOwnProperty(G="ALPHABET"))if(j=I[G],typeof j=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(j))Ke=j.slice(0,10)=="0123456789",le=j;else throw Error(Gi+G+" invalid: "+j)}else throw Error(Gi+"Object expected: "+I);return{DECIMAL_PLACES:b,ROUNDING_MODE:S,EXPONENTIAL_AT:[T,O],RANGE:[X,$],CRYPTO:_t,MODULO_MODE:Et,POW_PRECISION:Ut,FORMAT:te,ALPHABET:le}},K.isBigNumber=function(I){if(!I||I._isBigNumber!==!0)return!1;if(!K.DEBUG)return!0;var G,j,z=I.c,H=I.e,U=I.s;t:if({}.toString.call(z)=="[object Array]"){if((U===1||U===-1)&&H>=-Ge&&H<=Ge&&H===ki(H)){if(z[0]===0){if(H===0&&z.length===1)return!0;break t}if(G=(H+1)%Ie,G<1&&(G+=Ie),String(z[0]).length==G){for(G=0;G<z.length;G++)if(j=z[G],j<0||j>=qn||j!==ki(j))break t;if(j!==0)return!0}}}else if(z===null&&H===null&&(U===null||U===1||U===-1))return!0;throw Error(Gi+"Invalid BigNumber: "+I)},K.maximum=K.max=function(){return at(arguments,-1)},K.minimum=K.min=function(){return at(arguments,1)},K.random=(function(){var I=9007199254740992,G=Math.random()*I&2097151?function(){return ki(Math.random()*I)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(j){var z,H,U,et,it,ot=0,pt=[],mt=new K(w);if(j==null?j=b:i(j,0,Ge),et=Sn(j/Ie),_t)if(crypto.getRandomValues){for(z=crypto.getRandomValues(new Uint32Array(et*=2));ot<et;)it=z[ot]*131072+(z[ot+1]>>>11),it>=9e15?(H=crypto.getRandomValues(new Uint32Array(2)),z[ot]=H[0],z[ot+1]=H[1]):(pt.push(it%1e14),ot+=2);ot=et/2}else if(crypto.randomBytes){for(z=crypto.randomBytes(et*=7);ot<et;)it=(z[ot]&31)*281474976710656+z[ot+1]*1099511627776+z[ot+2]*4294967296+z[ot+3]*16777216+(z[ot+4]<<16)+(z[ot+5]<<8)+z[ot+6],it>=9e15?crypto.randomBytes(7).copy(z,ot):(pt.push(it%1e14),ot+=7);ot=et/7}else throw _t=!1,Error(Gi+"crypto unavailable");if(!_t)for(;ot<et;)it=G(),it<9e15&&(pt[ot++]=it%1e14);for(et=pt[--ot],j%=Ie,et&&j&&(it=Ro[Ie-j],pt[ot]=ki(et/it)*it);pt[ot]===0;pt.pop(),ot--);if(ot<0)pt=[U=0];else{for(U=-1;pt[0]===0;pt.splice(0,1),U-=Ie);for(ot=1,it=pt[0];it>=10;it/=10,ot++);ot<Ie&&(U-=Ie-ot)}return mt.e=U,mt.c=pt,mt}})(),K.sum=function(){for(var I=1,G=arguments,j=new K(G[0]);I<G.length;)j=j.plus(G[I++]);return j},h=(function(){var I="0123456789";function G(j,z,H,U){for(var et,it=[0],ot,pt=0,mt=j.length;pt<mt;){for(ot=it.length;ot--;it[ot]*=z);for(it[0]+=U.indexOf(j.charAt(pt++)),et=0;et<it.length;et++)it[et]>H-1&&(it[et+1]==null&&(it[et+1]=0),it[et+1]+=it[et]/H|0,it[et]%=H)}return it.reverse()}return function(j,z,H,U,et){var it,ot,pt,mt,Nt,ne,he,Me,Xe=j.indexOf("."),ai=b,Ze=S;for(Xe>=0&&(mt=Ut,Ut=0,j=j.replace(".",""),Me=new K(z),ne=Me.pow(j.length-Xe),Ut=mt,Me.c=G(x(zi(ne.c),ne.e,"0"),10,H,I),Me.e=Me.c.length),he=G(j,z,H,et?(it=le,I):(it=I,le)),pt=mt=he.length;he[--mt]==0;he.pop());if(!he[0])return it.charAt(0);if(Xe<0?--pt:(ne.c=he,ne.e=pt,ne.s=U,ne=a(ne,Me,ai,Ze,H),he=ne.c,Nt=ne.r,pt=ne.e),ot=pt+ai+1,Xe=he[ot],mt=H/2,Nt=Nt||ot<0||he[ot+1]!=null,Nt=Ze<4?(Xe!=null||Nt)&&(Ze==0||Ze==(ne.s<0?3:2)):Xe>mt||Xe==mt&&(Ze==4||Nt||Ze==6&&he[ot-1]&1||Ze==(ne.s<0?8:7)),ot<1||!he[0])j=Nt?x(it.charAt(1),-ai,it.charAt(0)):it.charAt(0);else{if(he.length=ot,Nt)for(--H;++he[--ot]>H;)he[ot]=0,ot||(++pt,he=[1].concat(he));for(mt=he.length;!he[--mt];);for(Xe=0,j="";Xe<=mt;j+=it.charAt(he[Xe++]));j=x(j,pt,it.charAt(0))}return j}})(),a=(function(){function I(z,H,U){var et,it,ot,pt,mt=0,Nt=z.length,ne=H%dr,he=H/dr|0;for(z=z.slice();Nt--;)ot=z[Nt]%dr,pt=z[Nt]/dr|0,et=he*ot+pt*ne,it=ne*ot+et%dr*dr+mt,mt=(it/U|0)+(et/dr|0)+he*pt,z[Nt]=it%U;return mt&&(z=[mt].concat(z)),z}function G(z,H,U,et){var it,ot;if(U!=et)ot=U>et?1:-1;else for(it=ot=0;it<U;it++)if(z[it]!=H[it]){ot=z[it]>H[it]?1:-1;break}return ot}function j(z,H,U,et){for(var it=0;U--;)z[U]-=it,it=z[U]<H[U]?1:0,z[U]=it*et+z[U]-H[U];for(;!z[0]&&z.length>1;z.splice(0,1));}return function(z,H,U,et,it){var ot,pt,mt,Nt,ne,he,Me,Xe,ai,Ze,ui,Yi,pi,_a,Qa,vr,co,Dn=z.s==H.s?1:-1,Li=z.c,je=H.c;if(!Li||!Li[0]||!je||!je[0])return new K(!z.s||!H.s||(Li?je&&Li[0]==je[0]:!je)?NaN:Li&&Li[0]==0||!je?Dn*0:Dn/0);for(Xe=new K(Dn),ai=Xe.c=[],pt=z.e-H.e,Dn=U+pt+1,it||(it=qn,pt=Xi(z.e/Ie)-Xi(H.e/Ie),Dn=Dn/Ie|0),mt=0;je[mt]==(Li[mt]||0);mt++);if(je[mt]>(Li[mt]||0)&&pt--,Dn<0)ai.push(1),Nt=!0;else{for(_a=Li.length,vr=je.length,mt=0,Dn+=2,ne=ki(it/(je[0]+1)),ne>1&&(je=I(je,ne,it),Li=I(Li,ne,it),vr=je.length,_a=Li.length),pi=vr,Ze=Li.slice(0,vr),ui=Ze.length;ui<vr;Ze[ui++]=0);co=je.slice(),co=[0].concat(co),Qa=je[0],je[1]>=it/2&&Qa++;do{if(ne=0,ot=G(je,Ze,vr,ui),ot<0){if(Yi=Ze[0],vr!=ui&&(Yi=Yi*it+(Ze[1]||0)),ne=ki(Yi/Qa),ne>1)for(ne>=it&&(ne=it-1),he=I(je,ne,it),Me=he.length,ui=Ze.length;G(he,Ze,Me,ui)==1;)ne--,j(he,vr<Me?co:je,Me,it),Me=he.length,ot=1;else ne==0&&(ot=ne=1),he=je.slice(),Me=he.length;if(Me<ui&&(he=[0].concat(he)),j(Ze,he,ui,it),ui=Ze.length,ot==-1)for(;G(je,Ze,vr,ui)<1;)ne++,j(Ze,vr<ui?co:je,ui,it),ui=Ze.length}else ot===0&&(ne++,Ze=[0]);ai[mt++]=ne,Ze[0]?Ze[ui++]=Li[pi]||0:(Ze=[Li[pi]],ui=1)}while((pi++<_a||Ze[0]!=null)&&Dn--);Nt=Ze[0]!=null,ai[0]||ai.splice(0,1)}if(it==qn){for(mt=1,Dn=ai[0];Dn>=10;Dn/=10,mt++);ht(Xe,U+(Xe.e=mt+pt*Ie-1)+1,et,Nt)}else Xe.e=pt,Xe.r=+Nt;return Xe}})();function tt(I,G,j,z){var H,U,et,it,ot;if(j==null?j=S:i(j,0,8),!I.c)return I.toString();if(H=I.c[0],et=I.e,G==null)ot=zi(I.c),ot=z==1||z==2&&(et<=T||et>=O)?p(ot,et):x(ot,et,"0");else if(I=ht(new K(I),G,j),U=I.e,ot=zi(I.c),it=ot.length,z==1||z==2&&(G<=U||U<=T)){for(;it<G;ot+="0",it++);ot=p(ot,U)}else if(G-=et,ot=x(ot,U,"0"),U+1>it){if(--G>0)for(ot+=".";G--;ot+="0");}else if(G+=U-it,G>0)for(U+1==it&&(ot+=".");G--;ot+="0");return I.s<0&&H?"-"+ot:ot}function at(I,G){for(var j,z,H=1,U=new K(I[0]);H<I.length;H++)z=new K(I[H]),(!z.s||(j=os(U,z))===G||j===0&&U.s===G)&&(U=z);return U}function xt(I,G,j){for(var z=1,H=G.length;!G[--H];G.pop());for(H=G[0];H>=10;H/=10,z++);return(j=z+j*Ie-1)>$?I.c=I.e=null:j<X?I.c=[I.e=0]:(I.e=j,I.c=G),I}d=(function(){var I=/^(-?)0([xbo])(?=\w[\w.]*$)/i,G=/^([^.]+)\.$/,j=/^\.([^.]+)$/,z=/^-?(Infinity|NaN)$/,H=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(U,et,it,ot){var pt,mt=it?et:et.replace(H,"");if(z.test(mt))U.s=isNaN(mt)?null:mt<0?-1:1;else{if(!it&&(mt=mt.replace(I,function(Nt,ne,he){return pt=(he=he.toLowerCase())=="x"?16:he=="b"?2:8,!ot||ot==pt?ne:Nt}),ot&&(pt=ot,mt=mt.replace(G,"$1").replace(j,"0.$1")),et!=mt))return new K(mt,pt);if(K.DEBUG)throw Error(Gi+"Not a"+(ot?" base "+ot:"")+" number: "+et);U.s=null}U.c=U.e=null}})();function ht(I,G,j,z){var H,U,et,it,ot,pt,mt,Nt=I.c,ne=Ro;if(Nt){t:{for(H=1,it=Nt[0];it>=10;it/=10,H++);if(U=G-H,U<0)U+=Ie,et=G,ot=Nt[pt=0],mt=ki(ot/ne[H-et-1]%10);else if(pt=Sn((U+1)/Ie),pt>=Nt.length)if(z){for(;Nt.length<=pt;Nt.push(0));ot=mt=0,H=1,U%=Ie,et=U-Ie+1}else break t;else{for(ot=it=Nt[pt],H=1;it>=10;it/=10,H++);U%=Ie,et=U-Ie+H,mt=et<0?0:ki(ot/ne[H-et-1]%10)}if(z=z||G<0||Nt[pt+1]!=null||(et<0?ot:ot%ne[H-et-1]),z=j<4?(mt||z)&&(j==0||j==(I.s<0?3:2)):mt>5||mt==5&&(j==4||z||j==6&&(U>0?et>0?ot/ne[H-et]:0:Nt[pt-1])%10&1||j==(I.s<0?8:7)),G<1||!Nt[0])return Nt.length=0,z?(G-=I.e+1,Nt[0]=ne[(Ie-G%Ie)%Ie],I.e=-G||0):Nt[0]=I.e=0,I;if(U==0?(Nt.length=pt,it=1,pt--):(Nt.length=pt+1,it=ne[Ie-U],Nt[pt]=et>0?ki(ot/ne[H-et]%ne[et])*it:0),z)for(;;)if(pt==0){for(U=1,et=Nt[0];et>=10;et/=10,U++);for(et=Nt[0]+=it,it=1;et>=10;et/=10,it++);U!=it&&(I.e++,Nt[0]==qn&&(Nt[0]=1));break}else{if(Nt[pt]+=it,Nt[pt]!=qn)break;Nt[pt--]=0,it=1}for(U=Nt.length;Nt[--U]===0;Nt.pop());}I.e>$?I.c=I.e=null:I.e<X&&(I.c=[I.e=0])}return I}function wt(I){var G,j=I.e;return j===null?I.toString():(G=zi(I.c),G=j<=T||j>=O?p(G,j):x(G,j,"0"),I.s<0?"-"+G:G)}return _.absoluteValue=_.abs=function(){var I=new K(this);return I.s<0&&(I.s=1),I},_.comparedTo=function(I,G){return os(this,new K(I,G))},_.decimalPlaces=_.dp=function(I,G){var j,z,H,U=this;if(I!=null)return i(I,0,Ge),G==null?G=S:i(G,0,8),ht(new K(U),I+U.e+1,G);if(!(j=U.c))return null;if(z=((H=j.length-1)-Xi(this.e/Ie))*Ie,H=j[H])for(;H%10==0;H/=10,z--);return z<0&&(z=0),z},_.dividedBy=_.div=function(I,G){return a(this,new K(I,G),b,S)},_.dividedToIntegerBy=_.idiv=function(I,G){return a(this,new K(I,G),0,1)},_.exponentiatedBy=_.pow=function(I,G){var j,z,H,U,et,it,ot,pt,mt,Nt=this;if(I=new K(I),I.c&&!I.isInteger())throw Error(Gi+"Exponent not an integer: "+wt(I));if(G!=null&&(G=new K(G)),it=I.e>14,!Nt.c||!Nt.c[0]||Nt.c[0]==1&&!Nt.e&&Nt.c.length==1||!I.c||!I.c[0])return mt=new K(Math.pow(+wt(Nt),it?I.s*(2-l(I)):+wt(I))),G?mt.mod(G):mt;if(ot=I.s<0,G){if(G.c?!G.c[0]:!G.s)return new K(NaN);z=!ot&&Nt.isInteger()&&G.isInteger(),z&&(Nt=Nt.mod(G))}else{if(I.e>9&&(Nt.e>0||Nt.e<-1||(Nt.e==0?Nt.c[0]>1||it&&Nt.c[1]>=24e7:Nt.c[0]<8e13||it&&Nt.c[0]<=9999975e7)))return U=Nt.s<0&&l(I)?-0:0,Nt.e>-1&&(U=1/U),new K(ot?1/U:U);Ut&&(U=Sn(Ut/Ie+2))}for(it?(j=new K(.5),ot&&(I.s=1),pt=l(I)):(H=Math.abs(+wt(I)),pt=H%2),mt=new K(w);;){if(pt){if(mt=mt.times(Nt),!mt.c)break;U?mt.c.length>U&&(mt.c.length=U):z&&(mt=mt.mod(G))}if(H){if(H=ki(H/2),H===0)break;pt=H%2}else if(I=I.times(j),ht(I,I.e+1,1),I.e>14)pt=l(I);else{if(H=+wt(I),H===0)break;pt=H%2}Nt=Nt.times(Nt),U?Nt.c&&Nt.c.length>U&&(Nt.c.length=U):z&&(Nt=Nt.mod(G))}return z?mt:(ot&&(mt=w.div(mt)),G?mt.mod(G):U?ht(mt,Ut,S,et):mt)},_.integerValue=function(I){var G=new K(this);return I==null?I=S:i(I,0,8),ht(G,G.e+1,I)},_.isEqualTo=_.eq=function(I,G){return os(this,new K(I,G))===0},_.isFinite=function(){return!!this.c},_.isGreaterThan=_.gt=function(I,G){return os(this,new K(I,G))>0},_.isGreaterThanOrEqualTo=_.gte=function(I,G){return(G=os(this,new K(I,G)))===1||G===0},_.isInteger=function(){return!!this.c&&Xi(this.e/Ie)>this.c.length-2},_.isLessThan=_.lt=function(I,G){return os(this,new K(I,G))<0},_.isLessThanOrEqualTo=_.lte=function(I,G){return(G=os(this,new K(I,G)))===-1||G===0},_.isNaN=function(){return!this.s},_.isNegative=function(){return this.s<0},_.isPositive=function(){return this.s>0},_.isZero=function(){return!!this.c&&this.c[0]==0},_.minus=function(I,G){var j,z,H,U,et=this,it=et.s;if(I=new K(I,G),G=I.s,!it||!G)return new K(NaN);if(it!=G)return I.s=-G,et.plus(I);var ot=et.e/Ie,pt=I.e/Ie,mt=et.c,Nt=I.c;if(!ot||!pt){if(!mt||!Nt)return mt?(I.s=-G,I):new K(Nt?et:NaN);if(!mt[0]||!Nt[0])return Nt[0]?(I.s=-G,I):new K(mt[0]?et:S==3?-0:0)}if(ot=Xi(ot),pt=Xi(pt),mt=mt.slice(),it=ot-pt){for((U=it<0)?(it=-it,H=mt):(pt=ot,H=Nt),H.reverse(),G=it;G--;H.push(0));H.reverse()}else for(z=(U=(it=mt.length)<(G=Nt.length))?it:G,it=G=0;G<z;G++)if(mt[G]!=Nt[G]){U=mt[G]<Nt[G];break}if(U&&(H=mt,mt=Nt,Nt=H,I.s=-I.s),G=(z=Nt.length)-(j=mt.length),G>0)for(;G--;mt[j++]=0);for(G=qn-1;z>it;){if(mt[--z]<Nt[z]){for(j=z;j&&!mt[--j];mt[j]=G);--mt[j],mt[z]+=qn}mt[z]-=Nt[z]}for(;mt[0]==0;mt.splice(0,1),--pt);return mt[0]?xt(I,mt,pt):(I.s=S==3?-1:1,I.c=[I.e=0],I)},_.modulo=_.mod=function(I,G){var j,z,H=this;return I=new K(I,G),!H.c||!I.s||I.c&&!I.c[0]?new K(NaN):!I.c||H.c&&!H.c[0]?new K(H):(Et==9?(z=I.s,I.s=1,j=a(H,I,0,3),I.s=z,j.s*=z):j=a(H,I,0,Et),I=H.minus(j.times(I)),!I.c[0]&&Et==1&&(I.s=H.s),I)},_.multipliedBy=_.times=function(I,G){var j,z,H,U,et,it,ot,pt,mt,Nt,ne,he,Me,Xe,ai,Ze=this,ui=Ze.c,Yi=(I=new K(I,G)).c;if(!ui||!Yi||!ui[0]||!Yi[0])return!Ze.s||!I.s||ui&&!ui[0]&&!Yi||Yi&&!Yi[0]&&!ui?I.c=I.e=I.s=null:(I.s*=Ze.s,!ui||!Yi?I.c=I.e=null:(I.c=[0],I.e=0)),I;for(z=Xi(Ze.e/Ie)+Xi(I.e/Ie),I.s*=Ze.s,ot=ui.length,Nt=Yi.length,ot<Nt&&(Me=ui,ui=Yi,Yi=Me,H=ot,ot=Nt,Nt=H),H=ot+Nt,Me=[];H--;Me.push(0));for(Xe=qn,ai=dr,H=Nt;--H>=0;){for(j=0,ne=Yi[H]%ai,he=Yi[H]/ai|0,et=ot,U=H+et;U>H;)pt=ui[--et]%ai,mt=ui[et]/ai|0,it=he*pt+mt*ne,pt=ne*pt+it%ai*ai+Me[U]+j,j=(pt/Xe|0)+(it/ai|0)+he*mt,Me[U--]=pt%Xe;Me[U]=j}return j?++z:Me.splice(0,1),xt(I,Me,z)},_.negated=function(){var I=new K(this);return I.s=-I.s||null,I},_.plus=function(I,G){var j,z=this,H=z.s;if(I=new K(I,G),G=I.s,!H||!G)return new K(NaN);if(H!=G)return I.s=-G,z.minus(I);var U=z.e/Ie,et=I.e/Ie,it=z.c,ot=I.c;if(!U||!et){if(!it||!ot)return new K(H/0);if(!it[0]||!ot[0])return ot[0]?I:new K(it[0]?z:H*0)}if(U=Xi(U),et=Xi(et),it=it.slice(),H=U-et){for(H>0?(et=U,j=ot):(H=-H,j=it),j.reverse();H--;j.push(0));j.reverse()}for(H=it.length,G=ot.length,H-G<0&&(j=ot,ot=it,it=j,G=H),H=0;G;)H=(it[--G]=it[G]+ot[G]+H)/qn|0,it[G]=qn===it[G]?0:it[G]%qn;return H&&(it=[H].concat(it),++et),xt(I,it,et)},_.precision=_.sd=function(I,G){var j,z,H,U=this;if(I!=null&&I!==!!I)return i(I,1,Ge),G==null?G=S:i(G,0,8),ht(new K(U),I,G);if(!(j=U.c))return null;if(H=j.length-1,z=H*Ie+1,H=j[H]){for(;H%10==0;H/=10,z--);for(H=j[0];H>=10;H/=10,z++);}return I&&U.e+1>z&&(z=U.e+1),z},_.shiftedBy=function(I){return i(I,-ha,ha),this.times("1e"+I)},_.squareRoot=_.sqrt=function(){var I,G,j,z,H,U=this,et=U.c,it=U.s,ot=U.e,pt=b+4,mt=new K("0.5");if(it!==1||!et||!et[0])return new K(!it||it<0&&(!et||et[0])?NaN:et?U:1/0);if(it=Math.sqrt(+wt(U)),it==0||it==1/0?(G=zi(et),(G.length+ot)%2==0&&(G+="0"),it=Math.sqrt(+G),ot=Xi((ot+1)/2)-(ot<0||ot%2),it==1/0?G="5e"+ot:(G=it.toExponential(),G=G.slice(0,G.indexOf("e")+1)+ot),j=new K(G)):j=new K(it+""),j.c[0]){for(ot=j.e,it=ot+pt,it<3&&(it=0);;)if(H=j,j=mt.times(H.plus(a(U,H,pt,1))),zi(H.c).slice(0,it)===(G=zi(j.c)).slice(0,it))if(j.e<ot&&--it,G=G.slice(it-3,it+1),G=="9999"||!z&&G=="4999"){if(!z&&(ht(H,H.e+b+2,0),H.times(H).eq(U))){j=H;break}pt+=4,it+=4,z=1}else{(!+G||!+G.slice(1)&&G.charAt(0)=="5")&&(ht(j,j.e+b+2,1),I=!j.times(j).eq(U));break}}return ht(j,j.e+b+1,S,I)},_.toExponential=function(I,G){return I!=null&&(i(I,0,Ge),I++),tt(this,I,G,1)},_.toFixed=function(I,G){return I!=null&&(i(I,0,Ge),I=I+this.e+1),tt(this,I,G)},_.toFormat=function(I,G,j){var z,H=this;if(j==null)I!=null&&G&&typeof G=="object"?(j=G,G=null):I&&typeof I=="object"?(j=I,I=G=null):j=te;else if(typeof j!="object")throw Error(Gi+"Argument not an object: "+j);if(z=H.toFixed(I,G),H.c){var U,et=z.split("."),it=+j.groupSize,ot=+j.secondaryGroupSize,pt=j.groupSeparator||"",mt=et[0],Nt=et[1],ne=H.s<0,he=ne?mt.slice(1):mt,Me=he.length;if(ot&&(U=it,it=ot,ot=U,Me-=U),it>0&&Me>0){for(U=Me%it||it,mt=he.substr(0,U);U<Me;U+=it)mt+=pt+he.substr(U,it);ot>0&&(mt+=pt+he.slice(U)),ne&&(mt="-"+mt)}z=Nt?mt+(j.decimalSeparator||"")+((ot=+j.fractionGroupSize)?Nt.replace(new RegExp("\\d{"+ot+"}\\B","g"),"$&"+(j.fractionGroupSeparator||"")):Nt):mt}return(j.prefix||"")+z+(j.suffix||"")},_.toFraction=function(I){var G,j,z,H,U,et,it,ot,pt,mt,Nt,ne,he=this,Me=he.c;if(I!=null&&(it=new K(I),!it.isInteger()&&(it.c||it.s!==1)||it.lt(w)))throw Error(Gi+"Argument "+(it.isInteger()?"out of range: ":"not an integer: ")+wt(it));if(!Me)return new K(he);for(G=new K(w),pt=j=new K(w),z=ot=new K(w),ne=zi(Me),U=G.e=ne.length-he.e-1,G.c[0]=Ro[(et=U%Ie)<0?Ie+et:et],I=!I||it.comparedTo(G)>0?U>0?G:pt:it,et=$,$=1/0,it=new K(ne),ot.c[0]=0;mt=a(it,G,0,1),H=j.plus(mt.times(z)),H.comparedTo(I)!=1;)j=z,z=H,pt=ot.plus(mt.times(H=pt)),ot=H,G=it.minus(mt.times(H=G)),it=H;return H=a(I.minus(j),z,0,1),ot=ot.plus(H.times(pt)),j=j.plus(H.times(z)),ot.s=pt.s=he.s,U=U*2,Nt=a(pt,z,U,S).minus(he).abs().comparedTo(a(ot,j,U,S).minus(he).abs())<1?[pt,z]:[ot,j],$=et,Nt},_.toNumber=function(){return+wt(this)},_.toPrecision=function(I,G){return I!=null&&i(I,1,Ge),tt(this,I,G,2)},_.toString=function(I){var G,j=this,z=j.s,H=j.e;return H===null?z?(G="Infinity",z<0&&(G="-"+G)):G="NaN":(I==null?G=H<=T||H>=O?p(zi(j.c),H):x(zi(j.c),H,"0"):I===10&&Ke?(j=ht(new K(j),b+H+1,S),G=x(zi(j.c),j.e,"0")):(i(I,2,le.length,"Base"),G=h(x(zi(j.c),H,"0"),10,I,z,!0)),z<0&&j.c[0]&&(G="-"+G)),G},_.valueOf=_.toJSON=function(){return wt(this)},_._isBigNumber=!0,_[Symbol.toStringTag]="BigNumber",_[Symbol.for("nodejs.util.inspect.custom")]=_.valueOf,s!=null&&K.set(s),K}function Xi(s){var a=s|0;return s>0||s===a?a:a-1}function zi(s){for(var a,h,d=1,_=s.length,w=s[0]+"";d<_;){for(a=s[d++]+"",h=Ie-a.length;h--;a="0"+a);w+=a}for(_=w.length;w.charCodeAt(--_)===48;);return w.slice(0,_+1||1)}function os(s,a){var h,d,_=s.c,w=a.c,b=s.s,S=a.s,T=s.e,O=a.e;if(!b||!S)return null;if(h=_&&!_[0],d=w&&!w[0],h||d)return h?d?0:-S:b;if(b!=S)return b;if(h=b<0,d=T==O,!_||!w)return d?0:!_^h?1:-1;if(!d)return T>O^h?1:-1;for(S=(T=_.length)<(O=w.length)?T:O,b=0;b<S;b++)if(_[b]!=w[b])return _[b]>w[b]^h?1:-1;return T==O?0:T>O^h?1:-1}function i(s,a,h,d){if(s<a||s>h||s!==ki(s))throw Error(Gi+(d||"Argument")+(typeof s=="number"?s<a||s>h?" out of range: ":" not an integer: ":" not a primitive number: ")+String(s))}function l(s){var a=s.c.length-1;return Xi(s.e/Ie)==a&&s.c[a]%2!=0}function p(s,a){return(s.length>1?s.charAt(0)+"."+s.slice(1):s)+(a<0?"e":"e+")+a}function x(s,a,h){var d,_;if(a<0){for(_=h+".";++a;_+=h);s=_+s}else if(d=s.length,++a>d){for(_=h,a-=d;--a;_+=h);s+=_}else a<d&&(s=s.slice(0,a)+"."+s.slice(a));return s}var k=ca(),F=k,Q=class{constructor(s){ke(this,"key");ke(this,"left",null);ke(this,"right",null);this.key=s}},gt=class extends Q{constructor(s){super(s)}},bt=class{constructor(){ke(this,"size",0);ke(this,"modificationCount",0);ke(this,"splayCount",0)}splay(s){let a=this.root;if(a==null)return this.compare(s,s),-1;let h=null,d=null,_=null,w=null,b=a,S=this.compare,T;for(;;)if(T=S(b.key,s),T>0){let O=b.left;if(O==null||(T=S(O.key,s),T>0&&(b.left=O.right,O.right=b,b=O,O=b.left,O==null)))break;h==null?d=b:h.left=b,h=b,b=O}else if(T<0){let O=b.right;if(O==null||(T=S(O.key,s),T<0&&(b.right=O.left,O.left=b,b=O,O=b.right,O==null)))break;_==null?w=b:_.right=b,_=b,b=O}else break;return _!=null&&(_.right=b.left,b.left=w),h!=null&&(h.left=b.right,b.right=d),this.root!==b&&(this.root=b,this.splayCount++),T}splayMin(s){let a=s,h=a.left;for(;h!=null;){let d=h;a.left=d.right,d.right=a,a=d,h=a.left}return a}splayMax(s){let a=s,h=a.right;for(;h!=null;){let d=h;a.right=d.left,d.left=a,a=d,h=a.right}return a}_delete(s){if(this.root==null||this.splay(s)!=0)return null;let a=this.root,h=a,d=a.left;if(this.size--,d==null)this.root=a.right;else{let _=a.right;a=this.splayMax(d),a.right=_,this.root=a}return this.modificationCount++,h}addNewRoot(s,a){this.size++,this.modificationCount++;let h=this.root;if(h==null){this.root=s;return}a<0?(s.left=h,s.right=h.right,h.right=null):(s.right=h,s.left=h.left,h.left=null),this.root=s}_first(){let s=this.root;return s==null?null:(this.root=this.splayMin(s),this.root)}_last(){let s=this.root;return s==null?null:(this.root=this.splayMax(s),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(s){return this.validKey(s)&&this.splay(s)==0}defaultCompare(){return(s,a)=>s<a?-1:s>a?1:0}wrap(){return{getRoot:()=>this.root,setRoot:s=>{this.root=s},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:s=>{this.splayCount=s},splay:s=>this.splay(s),has:s=>this.has(s)}}},Ft=class pu extends bt{constructor(h,d){super();ke(this,"root",null);ke(this,"compare");ke(this,"validKey");ke(this,Ql,"[object Set]");this.compare=h??this.defaultCompare(),this.validKey=d??(_=>_!=null&&_!=null)}delete(h){return this.validKey(h)?this._delete(h)!=null:!1}deleteAll(h){for(let d of h)this.delete(d)}forEach(h){let d=this[Symbol.iterator](),_;for(;_=d.next(),!_.done;)h(_.value,_.value,this)}add(h){let d=this.splay(h);return d!=0&&this.addNewRoot(new gt(h),d),this}addAndReturn(h){let d=this.splay(h);return d!=0&&this.addNewRoot(new gt(h),d),this.root.key}addAll(h){for(let d of h)this.add(d)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(h){if(h==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(h)<0)return this.root.key;let d=this.root.left;if(d==null)return null;let _=d.right;for(;_!=null;)d=_,_=d.right;return d.key}firstAfter(h){if(h==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(h)>0)return this.root.key;let d=this.root.right;if(d==null)return null;let _=d.left;for(;_!=null;)d=_,_=d.left;return d.key}retainAll(h){let d=new pu(this.compare,this.validKey),_=this.modificationCount;for(let w of h){if(_!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(w)&&this.splay(w)==0&&d.add(this.root.key)}d.size!=this.size&&(this.root=d.root,this.size=d.size,this.modificationCount++)}lookup(h){return!this.validKey(h)||this.splay(h)!=0?null:this.root.key}intersection(h){let d=new pu(this.compare,this.validKey);for(let _ of this)h.has(_)&&d.add(_);return d}difference(h){let d=new pu(this.compare,this.validKey);for(let _ of this)h.has(_)||d.add(_);return d}union(h){let d=this.clone();return d.addAll(h),d}clone(){let h=new pu(this.compare,this.validKey);return h.size=this.size,h.root=this.copyNode(this.root),h}copyNode(h){if(h==null)return null;function d(w,b){let S,T;do{if(S=w.left,T=w.right,S!=null){let O=new gt(S.key);b.left=O,d(S,O)}if(T!=null){let O=new gt(T.key);b.right=O,w=T,b=O}}while(T!=null)}let _=new gt(h.key);return d(h,_),_}toSet(){return this.clone()}entries(){return new He(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(El=Symbol.iterator,Ql=Symbol.toStringTag,El)](){return new Ae(this.wrap())}},re=class{constructor(s){ke(this,"tree");ke(this,"path",new Array);ke(this,"modificationCount",null);ke(this,"splayCount");this.tree=s,this.splayCount=s.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;let s=this.path[this.path.length-1];return this.getValue(s)}rebuildPath(s){this.path.splice(0,this.path.length),this.tree.splay(s),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(s){for(;s!=null;)this.path.push(s),s=s.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let h=this.tree.getRoot();for(;h!=null;)this.path.push(h),h=h.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let s=this.path[this.path.length-1],a=s.right;if(a!=null){for(;a!=null;)this.path.push(a),a=a.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===s;)s=this.path.pop();return this.path.length>0}},Ae=class extends re{getValue(s){return s.key}},He=class extends re{getValue(s){return[s.key,s.key]}},ji=s=>s,Pi=s=>{if(s){let a=new Ft(Io(s)),h=new Ft(Io(s)),d=(w,b)=>b.addAndReturn(w),_=w=>({x:d(w.x,a),y:d(w.y,h)});return _({x:new F(0),y:new F(0)}),_}return ji},an=s=>({set:a=>{vi=an(a)},reset:()=>an(s),compare:Io(s),snap:Pi(s),orient:ao(s)}),vi=an(),pr=(s,a)=>s.ll.x.isLessThanOrEqualTo(a.x)&&a.x.isLessThanOrEqualTo(s.ur.x)&&s.ll.y.isLessThanOrEqualTo(a.y)&&a.y.isLessThanOrEqualTo(s.ur.y),Oo=(s,a)=>{if(a.ur.x.isLessThan(s.ll.x)||s.ur.x.isLessThan(a.ll.x)||a.ur.y.isLessThan(s.ll.y)||s.ur.y.isLessThan(a.ll.y))return null;let h=s.ll.x.isLessThan(a.ll.x)?a.ll.x:s.ll.x,d=s.ur.x.isLessThan(a.ur.x)?s.ur.x:a.ur.x,_=s.ll.y.isLessThan(a.ll.y)?a.ll.y:s.ll.y,w=s.ur.y.isLessThan(a.ur.y)?s.ur.y:a.ur.y;return{ll:{x:h,y:_},ur:{x:d,y:w}}},Kn=(s,a)=>s.x.times(a.y).minus(s.y.times(a.x)),Ya=(s,a)=>s.x.times(a.x).plus(s.y.times(a.y)),gr=s=>Ya(s,s).sqrt(),mr=(s,a,h)=>{let d={x:a.x.minus(s.x),y:a.y.minus(s.y)},_={x:h.x.minus(s.x),y:h.y.minus(s.y)};return Kn(_,d).div(gr(_)).div(gr(d))},lo=(s,a,h)=>{let d={x:a.x.minus(s.x),y:a.y.minus(s.y)},_={x:h.x.minus(s.x),y:h.y.minus(s.y)};return Ya(_,d).div(gr(_)).div(gr(d))},ni=(s,a,h)=>a.y.isZero()?null:{x:s.x.plus(a.x.div(a.y).times(h.minus(s.y))),y:h},Ns=(s,a,h)=>a.x.isZero()?null:{x:h,y:s.y.plus(a.y.div(a.x).times(h.minus(s.x)))},Zl=(s,a,h,d)=>{if(a.x.isZero())return Ns(h,d,s.x);if(d.x.isZero())return Ns(s,a,h.x);if(a.y.isZero())return ni(h,d,s.y);if(d.y.isZero())return ni(s,a,h.y);let _=Kn(a,d);if(_.isZero())return null;let w={x:h.x.minus(s.x),y:h.y.minus(s.y)},b=Kn(w,a).div(_),S=Kn(w,d).div(_),T=s.x.plus(S.times(a.x)),O=h.x.plus(b.times(d.x)),X=s.y.plus(S.times(a.y)),$=h.y.plus(b.times(d.y)),_t=T.plus(O).div(2),Et=X.plus($).div(2);return{x:_t,y:Et}},_r=class sp{constructor(a,h){ke(this,"point");ke(this,"isLeft");ke(this,"segment");ke(this,"otherSE");ke(this,"consumedBy");a.events===void 0?a.events=[this]:a.events.push(this),this.point=a,this.isLeft=h}static compare(a,h){let d=sp.comparePoints(a.point,h.point);return d!==0?d:(a.point!==h.point&&a.link(h),a.isLeft!==h.isLeft?a.isLeft?1:-1:yr.compare(a.segment,h.segment))}static comparePoints(a,h){return a.x.isLessThan(h.x)?-1:a.x.isGreaterThan(h.x)?1:a.y.isLessThan(h.y)?-1:a.y.isGreaterThan(h.y)?1:0}link(a){if(a.point===this.point)throw new Error("Tried to link already linked events");let h=a.point.events;for(let d=0,_=h.length;d<_;d++){let w=h[d];this.point.events.push(w),w.point=this.point}this.checkForConsuming()}checkForConsuming(){let a=this.point.events.length;for(let h=0;h<a;h++){let d=this.point.events[h];if(d.segment.consumedBy===void 0)for(let _=h+1;_<a;_++){let w=this.point.events[_];w.consumedBy===void 0&&d.otherSE.point.events===w.otherSE.point.events&&d.segment.consume(w.segment)}}}getAvailableLinkedEvents(){let a=[];for(let h=0,d=this.point.events.length;h<d;h++){let _=this.point.events[h];_!==this&&!_.segment.ringOut&&_.segment.isInResult()&&a.push(_)}return a}getLeftmostComparator(a){let h=new Map,d=_=>{let w=_.otherSE;h.set(_,{sine:mr(this.point,a.point,w.point),cosine:lo(this.point,a.point,w.point)})};return(_,w)=>{h.has(_)||d(_),h.has(w)||d(w);let{sine:b,cosine:S}=h.get(_),{sine:T,cosine:O}=h.get(w);return b.isGreaterThanOrEqualTo(0)&&T.isGreaterThanOrEqualTo(0)?S.isLessThan(O)?1:S.isGreaterThan(O)?-1:0:b.isLessThan(0)&&T.isLessThan(0)?S.isLessThan(O)?-1:S.isGreaterThan(O)?1:0:T.isLessThan(b)?-1:T.isGreaterThan(b)?1:0}}},Fs=0,yr=class mh{constructor(a,h,d,_){ke(this,"id");ke(this,"leftSE");ke(this,"rightSE");ke(this,"rings");ke(this,"windings");ke(this,"ringOut");ke(this,"consumedBy");ke(this,"prev");ke(this,"_prevInResult");ke(this,"_beforeState");ke(this,"_afterState");ke(this,"_isInResult");this.id=++Fs,this.leftSE=a,a.segment=this,a.otherSE=h,this.rightSE=h,h.segment=this,h.otherSE=a,this.rings=d,this.windings=_}static compare(a,h){let d=a.leftSE.point.x,_=h.leftSE.point.x,w=a.rightSE.point.x,b=h.rightSE.point.x;if(b.isLessThan(d))return 1;if(w.isLessThan(_))return-1;let S=a.leftSE.point.y,T=h.leftSE.point.y,O=a.rightSE.point.y,X=h.rightSE.point.y;if(d.isLessThan(_)){if(T.isLessThan(S)&&T.isLessThan(O))return 1;if(T.isGreaterThan(S)&&T.isGreaterThan(O))return-1;let $=a.comparePoint(h.leftSE.point);if($<0)return 1;if($>0)return-1;let _t=h.comparePoint(a.rightSE.point);return _t!==0?_t:-1}if(d.isGreaterThan(_)){if(S.isLessThan(T)&&S.isLessThan(X))return-1;if(S.isGreaterThan(T)&&S.isGreaterThan(X))return 1;let $=h.comparePoint(a.leftSE.point);if($!==0)return $;let _t=a.comparePoint(h.rightSE.point);return _t<0?1:_t>0?-1:1}if(S.isLessThan(T))return-1;if(S.isGreaterThan(T))return 1;if(w.isLessThan(b)){let $=h.comparePoint(a.rightSE.point);if($!==0)return $}if(w.isGreaterThan(b)){let $=a.comparePoint(h.rightSE.point);if($<0)return 1;if($>0)return-1}if(!w.eq(b)){let $=O.minus(S),_t=w.minus(d),Et=X.minus(T),Ut=b.minus(_);if($.isGreaterThan(_t)&&Et.isLessThan(Ut))return 1;if($.isLessThan(_t)&&Et.isGreaterThan(Ut))return-1}return w.isGreaterThan(b)?1:w.isLessThan(b)||O.isLessThan(X)?-1:O.isGreaterThan(X)?1:a.id<h.id?-1:a.id>h.id?1:0}static fromRing(a,h,d){let _,w,b,S=_r.comparePoints(a,h);if(S<0)_=a,w=h,b=1;else if(S>0)_=h,w=a,b=-1;else throw new Error(`Tried to create degenerate segment at [${a.x}, ${a.y}]`);let T=new _r(_,!0),O=new _r(w,!1);return new mh(T,O,[d],[b])}replaceRightSE(a){this.rightSE=a,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){let a=this.leftSE.point.y,h=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:a.isLessThan(h)?a:h},ur:{x:this.rightSE.point.x,y:a.isGreaterThan(h)?a:h}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(a){return a.x.eq(this.leftSE.point.x)&&a.y.eq(this.leftSE.point.y)||a.x.eq(this.rightSE.point.x)&&a.y.eq(this.rightSE.point.y)}comparePoint(a){return vi.orient(this.leftSE.point,a,this.rightSE.point)}getIntersection(a){let h=this.bbox(),d=a.bbox(),_=Oo(h,d);if(_===null)return null;let w=this.leftSE.point,b=this.rightSE.point,S=a.leftSE.point,T=a.rightSE.point,O=pr(h,S)&&this.comparePoint(S)===0,X=pr(d,w)&&a.comparePoint(w)===0,$=pr(h,T)&&this.comparePoint(T)===0,_t=pr(d,b)&&a.comparePoint(b)===0;if(X&&O)return _t&&!$?b:!_t&&$?T:null;if(X)return $&&w.x.eq(T.x)&&w.y.eq(T.y)?null:w;if(O)return _t&&b.x.eq(S.x)&&b.y.eq(S.y)?null:S;if(_t&&$)return null;if(_t)return b;if($)return T;let Et=Zl(w,this.vector(),S,a.vector());return Et===null||!pr(_,Et)?null:vi.snap(Et)}split(a){let h=[],d=a.events!==void 0,_=new _r(a,!0),w=new _r(a,!1),b=this.rightSE;this.replaceRightSE(w),h.push(w),h.push(_);let S=new mh(_,b,this.rings.slice(),this.windings.slice());return _r.comparePoints(S.leftSE.point,S.rightSE.point)>0&&S.swapEvents(),_r.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),d&&(_.checkForConsuming(),w.checkForConsuming()),h}swapEvents(){let a=this.rightSE;this.rightSE=this.leftSE,this.leftSE=a,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let h=0,d=this.windings.length;h<d;h++)this.windings[h]*=-1}consume(a){let h=this,d=a;for(;h.consumedBy;)h=h.consumedBy;for(;d.consumedBy;)d=d.consumedBy;let _=mh.compare(h,d);if(_!==0){if(_>0){let w=h;h=d,d=w}if(h.prev===d){let w=h;h=d,d=w}for(let w=0,b=d.rings.length;w<b;w++){let S=d.rings[w],T=d.windings[w],O=h.rings.indexOf(S);O===-1?(h.rings.push(S),h.windings.push(T)):h.windings[O]+=T}d.rings=null,d.windings=null,d.consumedBy=h,d.leftSE.consumedBy=h.leftSE,d.rightSE.consumedBy=h.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{let a=this.prev.consumedBy||this.prev;this._beforeState=a.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;let a=this.beforeState();this._afterState={rings:a.rings.slice(0),windings:a.windings.slice(0),multiPolys:[]};let h=this._afterState.rings,d=this._afterState.windings,_=this._afterState.multiPolys;for(let S=0,T=this.rings.length;S<T;S++){let O=this.rings[S],X=this.windings[S],$=h.indexOf(O);$===-1?(h.push(O),d.push(X)):d[$]+=X}let w=[],b=[];for(let S=0,T=h.length;S<T;S++){if(d[S]===0)continue;let O=h[S],X=O.poly;if(b.indexOf(X)===-1)if(O.isExterior)w.push(X);else{b.indexOf(X)===-1&&b.push(X);let $=w.indexOf(O.poly);$!==-1&&w.splice($,1)}}for(let S=0,T=w.length;S<T;S++){let O=w[S].multiPoly;_.indexOf(O)===-1&&_.push(O)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;let a=this.beforeState().multiPolys,h=this.afterState().multiPolys;switch(ln.type){case"union":{let d=a.length===0,_=h.length===0;this._isInResult=d!==_;break}case"intersection":{let d,_;a.length<h.length?(d=a.length,_=h.length):(d=h.length,_=a.length),this._isInResult=_===ln.numMultiPolys&&d<_;break}case"xor":{let d=Math.abs(a.length-h.length);this._isInResult=d%2===1;break}case"difference":{let d=_=>_.length===1&&_[0].isSubject;this._isInResult=d(a)!==d(h);break}}return this._isInResult}},as=class{constructor(s,a,h){ke(this,"poly");ke(this,"isExterior");ke(this,"segments");ke(this,"bbox");if(!Array.isArray(s)||s.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=a,this.isExterior=h,this.segments=[],typeof s[0][0]!="number"||typeof s[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let d=vi.snap({x:new F(s[0][0]),y:new F(s[0][1])});this.bbox={ll:{x:d.x,y:d.y},ur:{x:d.x,y:d.y}};let _=d;for(let w=1,b=s.length;w<b;w++){if(typeof s[w][0]!="number"||typeof s[w][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let S=vi.snap({x:new F(s[w][0]),y:new F(s[w][1])});S.x.eq(_.x)&&S.y.eq(_.y)||(this.segments.push(yr.fromRing(_,S,this)),S.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=S.x),S.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=S.y),S.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=S.x),S.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=S.y),_=S)}(!d.x.eq(_.x)||!d.y.eq(_.y))&&this.segments.push(yr.fromRing(_,d,this))}getSweepEvents(){let s=[];for(let a=0,h=this.segments.length;a<h;a++){let d=this.segments[a];s.push(d.leftSE),s.push(d.rightSE)}return s}},fa=class{constructor(s,a){ke(this,"multiPoly");ke(this,"exteriorRing");ke(this,"interiorRings");ke(this,"bbox");if(!Array.isArray(s))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new as(s[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let h=1,d=s.length;h<d;h++){let _=new as(s[h],this,!1);_.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=_.bbox.ll.x),_.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=_.bbox.ll.y),_.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=_.bbox.ur.x),_.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=_.bbox.ur.y),this.interiorRings.push(_)}this.multiPoly=a}getSweepEvents(){let s=this.exteriorRing.getSweepEvents();for(let a=0,h=this.interiorRings.length;a<h;a++){let d=this.interiorRings[a].getSweepEvents();for(let _=0,w=d.length;_<w;_++)s.push(d[_])}return s}},yl=class{constructor(s,a){ke(this,"isSubject");ke(this,"polys");ke(this,"bbox");if(!Array.isArray(s))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof s[0][0][0]=="number"&&(s=[s])}catch{}this.polys=[],this.bbox={ll:{x:new F(Number.POSITIVE_INFINITY),y:new F(Number.POSITIVE_INFINITY)},ur:{x:new F(Number.NEGATIVE_INFINITY),y:new F(Number.NEGATIVE_INFINITY)}};for(let h=0,d=s.length;h<d;h++){let _=new fa(s[h],this);_.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=_.bbox.ll.x),_.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=_.bbox.ll.y),_.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=_.bbox.ur.x),_.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=_.bbox.ur.y),this.polys.push(_)}this.isSubject=a}getSweepEvents(){let s=[];for(let a=0,h=this.polys.length;a<h;a++){let d=this.polys[a].getSweepEvents();for(let _=0,w=d.length;_<w;_++)s.push(d[_])}return s}},da=class Wc{constructor(a){ke(this,"events");ke(this,"poly");ke(this,"_isExteriorRing");ke(this,"_enclosingRing");this.events=a;for(let h=0,d=a.length;h<d;h++)a[h].segment.ringOut=this;this.poly=null}static factory(a){let h=[];for(let d=0,_=a.length;d<_;d++){let w=a[d];if(!w.isInResult()||w.ringOut)continue;let b=null,S=w.leftSE,T=w.rightSE,O=[S],X=S.point,$=[];for(;b=S,S=T,O.push(S),S.point!==X;)for(;;){let _t=S.getAvailableLinkedEvents();if(_t.length===0){let te=O[0].point,le=O[O.length-1].point;throw new Error(`Unable to complete output ring starting at [${te.x}, ${te.y}]. Last matching segment found ends at [${le.x}, ${le.y}].`)}if(_t.length===1){T=_t[0].otherSE;break}let Et=null;for(let te=0,le=$.length;te<le;te++)if($[te].point===S.point){Et=te;break}if(Et!==null){let te=$.splice(Et)[0],le=O.splice(te.index);le.unshift(le[0].otherSE),h.push(new Wc(le.reverse()));continue}$.push({index:O.length,point:S.point});let Ut=S.getLeftmostComparator(b);T=_t.sort(Ut)[0].otherSE;break}h.push(new Wc(O))}return h}getGeom(){let a=this.events[0].point,h=[a];for(let O=1,X=this.events.length-1;O<X;O++){let $=this.events[O].point,_t=this.events[O+1].point;vi.orient($,a,_t)!==0&&(h.push($),a=$)}if(h.length===1)return null;let d=h[0],_=h[1];vi.orient(d,a,_)===0&&h.shift(),h.push(h[0]);let w=this.isExteriorRing()?1:-1,b=this.isExteriorRing()?0:h.length-1,S=this.isExteriorRing()?h.length:-1,T=[];for(let O=b;O!=S;O+=w)T.push([h[O].x.toNumber(),h[O].y.toNumber()]);return T}isExteriorRing(){if(this._isExteriorRing===void 0){let a=this.enclosingRing();this._isExteriorRing=a?!a.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var _,w;let a=this.events[0];for(let b=1,S=this.events.length;b<S;b++){let T=this.events[b];_r.compare(a,T)>0&&(a=T)}let h=a.segment.prevInResult(),d=h?h.prevInResult():null;for(;;){if(!h)return null;if(!d)return h.ringOut;if(d.ringOut!==h.ringOut)return((_=d.ringOut)==null?void 0:_.enclosingRing())!==h.ringOut?h.ringOut:(w=h.ringOut)==null?void 0:w.enclosingRing();h=d.prevInResult(),d=h?h.prevInResult():null}}},Gs=class{constructor(s){ke(this,"exteriorRing");ke(this,"interiorRings");this.exteriorRing=s,s.poly=this,this.interiorRings=[]}addInterior(s){this.interiorRings.push(s),s.poly=this}getGeom(){let s=this.exteriorRing.getGeom();if(s===null)return null;let a=[s];for(let h=0,d=this.interiorRings.length;h<d;h++){let _=this.interiorRings[h].getGeom();_!==null&&a.push(_)}return a}},_i=class{constructor(s){ke(this,"rings");ke(this,"polys");this.rings=s,this.polys=this._composePolys(s)}getGeom(){let s=[];for(let a=0,h=this.polys.length;a<h;a++){let d=this.polys[a].getGeom();d!==null&&s.push(d)}return s}_composePolys(s){var h;let a=[];for(let d=0,_=s.length;d<_;d++){let w=s[d];if(!w.poly)if(w.isExteriorRing())a.push(new Gs(w));else{let b=w.enclosingRing();b!=null&&b.poly||a.push(new Gs(b)),(h=b==null?void 0:b.poly)==null||h.addInterior(w)}}return a}},di=class{constructor(s,a=yr.compare){ke(this,"queue");ke(this,"tree");ke(this,"segments");this.queue=s,this.tree=new Ft(a),this.segments=[]}process(s){let a=s.segment,h=[];if(s.consumedBy)return s.isLeft?this.queue.delete(s.otherSE):this.tree.delete(a),h;s.isLeft&&this.tree.add(a);let d=a,_=a;do d=this.tree.lastBefore(d);while(d!=null&&d.consumedBy!=null);do _=this.tree.firstAfter(_);while(_!=null&&_.consumedBy!=null);if(s.isLeft){let w=null;if(d){let S=d.getIntersection(a);if(S!==null&&(a.isAnEndpoint(S)||(w=S),!d.isAnEndpoint(S))){let T=this._splitSafely(d,S);for(let O=0,X=T.length;O<X;O++)h.push(T[O])}}let b=null;if(_){let S=_.getIntersection(a);if(S!==null&&(a.isAnEndpoint(S)||(b=S),!_.isAnEndpoint(S))){let T=this._splitSafely(_,S);for(let O=0,X=T.length;O<X;O++)h.push(T[O])}}if(w!==null||b!==null){let S=null;w===null?S=b:b===null?S=w:S=_r.comparePoints(w,b)<=0?w:b,this.queue.delete(a.rightSE),h.push(a.rightSE);let T=a.split(S);for(let O=0,X=T.length;O<X;O++)h.push(T[O])}h.length>0?(this.tree.delete(a),h.push(s)):(this.segments.push(a),a.prev=d)}else{if(d&&_){let w=d.getIntersection(_);if(w!==null){if(!d.isAnEndpoint(w)){let b=this._splitSafely(d,w);for(let S=0,T=b.length;S<T;S++)h.push(b[S])}if(!_.isAnEndpoint(w)){let b=this._splitSafely(_,w);for(let S=0,T=b.length;S<T;S++)h.push(b[S])}}}this.tree.delete(a)}return h}_splitSafely(s,a){this.tree.delete(s);let h=s.rightSE;this.queue.delete(h);let d=s.split(a);return d.push(h),s.consumedBy===void 0&&this.tree.add(s),d}},uo=class{constructor(){ke(this,"type");ke(this,"numMultiPolys")}run(s,a,h){Ai.type=s;let d=[new yl(a,!0)];for(let T=0,O=h.length;T<O;T++)d.push(new yl(h[T],!1));if(Ai.numMultiPolys=d.length,Ai.type==="difference"){let T=d[0],O=1;for(;O<d.length;)Oo(d[O].bbox,T.bbox)!==null?O++:d.splice(O,1)}if(Ai.type==="intersection")for(let T=0,O=d.length;T<O;T++){let X=d[T];for(let $=T+1,_t=d.length;$<_t;$++)if(Oo(X.bbox,d[$].bbox)===null)return[]}let _=new Ft(_r.compare);for(let T=0,O=d.length;T<O;T++){let X=d[T].getSweepEvents();for(let $=0,_t=X.length;$<_t;$++)_.add(X[$])}let w=new di(_),b=null;for(_.size!=0&&(b=_.first(),_.delete(b));b;){let T=w.process(b);for(let O=0,X=T.length;O<X;O++){let $=T[O];$.consumedBy===void 0&&_.add($)}_.size!=0?(b=_.first(),_.delete(b)):b=null}vi.reset();let S=da.factory(w.segments);return new _i(S).getGeom()}},Ai=new uo,ln=Ai,Do=(s,...a)=>ln.run("intersection",s,a),pa=(s,...a)=>ln.run("difference",s,a);vi.set;function un(s){let a={type:"Feature"};return a.geometry=s,a}function No(s){return s.type==="Feature"?s.geometry:s}function ql(s){return s&&s.geometry&&s.geometry.coordinates?s.geometry.coordinates:s}function Nu(s){return un({type:"LineString",coordinates:s})}function vl(s){return un({type:"MultiLineString",coordinates:s})}function Kl(s){return un({type:"Polygon",coordinates:s})}function ls(s){return un({type:"MultiPolygon",coordinates:s})}function xl(s,a){let h=No(s),d=No(a),_=Do(h.coordinates,d.coordinates);return _.length===0?null:_.length===1?Kl(_[0]):ls(_)}function Jl(s,a){let h=No(s),d=No(a),_=pa(h.coordinates,d.coordinates);return _.length===0?null:_.length===1?Kl(_[0]):ls(_)}function Xl(s){return Array.isArray(s)?1+Xl(s[0]):-1}function jh(s){s instanceof L.Polyline&&(s=s.toGeoJSON(15));let a=ql(s),h=Xl(a),d=[];return h>1?a.forEach(_=>{d.push(Nu(_))}):d.push(s),d}function ho(s){let a=[];return s.eachLayer(h=>{a.push(ql(h.toGeoJSON(15)))}),vl(a)}Fi.Cut=Fi.Polygon.extend({initialize(s){this._map=s,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape(){if(this._editedLayers=[],!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let s=this._layer.getLatLngs();if(s.length<=2)return;let a=L.polygon(s,this.options.pathOptions);a._latlngInfos=this._layer._latlngInfo,this.cut(a),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(({layer:d,originalLayer:_})=>{this._fireCut(_,d,_),this._fireCut(this._map,d,_),_.pm._fireEdit()}),this._editedLayers=[];let h=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(h))},cut(s){let a=this._map._layers,h=s._latlngInfos||[];Object.keys(a).map(d=>a[d]).filter(d=>d.pm).filter(d=>!d._pmTempLayer).filter(d=>!L.PM.optIn&&!d.options.pmIgnore||L.PM.optIn&&d.options.pmIgnore===!1).filter(d=>d instanceof L.Polyline).filter(d=>d!==s).filter(d=>d.pm.options.allowCutting).filter(d=>this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0?this.options.layersToCut.indexOf(d)>-1:!0).filter(d=>!this._layerGroup.hasLayer(d)).filter(d=>{try{let _=!!lr(s.toGeoJSON(15),d.toGeoJSON(15)).features.length>0;return _||d instanceof L.Polyline&&!(d instanceof L.Polygon)?_:!!xl(s.toGeoJSON(15),d.toGeoJSON(15))}catch{return d instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}}).forEach(d=>{let _;if(d instanceof L.Polygon){_=L.polygon(d.getLatLngs());let T=_.getLatLngs();h.forEach(O=>{if(O&&O.snapInfo){let{latlng:X}=O,$=this._calcClosestLayer(X,[_]);if($&&$.segment&&$.distance<this.options.snapDistance){let{segment:_t}=$;if(_t&&_t.length===2){let{indexPath:Et,parentPath:Ut,newIndex:te}=L.PM.Utils._getIndexFromSegment(T,_t);(Et.length>1?(0,fr.default)(T,Ut):T).splice(te,0,X)}}}})}else _=d;let w=this._cutLayer(s,_),b=L.geoJSON(w,d.options);b.getLayers().length===1&&([b]=b.getLayers()),this._setPane(b,"layerPane");let S=b.addTo(this._map.pm._getContainingLayer());if(S.pm.enable(d.pm.options),S.pm.disable(),d._pmTempLayer=!0,s._pmTempLayer=!0,d.remove(),d.removeFrom(this._map.pm._getContainingLayer()),s.remove(),s.removeFrom(this._map.pm._getContainingLayer()),S.getLayers&&S.getLayers().length===0&&this._map.pm.removeLayer({target:S}),S instanceof L.LayerGroup?(S.eachLayer(T=>{this._addDrawnLayerProp(T)}),this._addDrawnLayerProp(S)):this._addDrawnLayerProp(S),this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0){let T=this.options.layersToCut.indexOf(d);T>-1&&this.options.layersToCut.splice(T,1)}this._editedLayers.push({layer:S,originalLayer:d})})},_cutLayer(s,a){let h=L.geoJSON(),d;if(a instanceof L.Polygon)d=Jl(a.toGeoJSON(15),s.toGeoJSON(15));else{let _=jh(a);_.forEach(w=>{let b=pl(w,s.toGeoJSON(15)),S;b&&b.features.length>0?S=L.geoJSON(b):S=L.geoJSON(w),S.getLayers().forEach(T=>{ro(s.toGeoJSON(15),T.toGeoJSON(15))||T.addTo(h)})}),_.length>1?d=ho(h):d=h.toGeoJSON(15)}return d},_change:L.Util.falseFn}),Fi.Text=Fi.extend({initialize(s){this._map=s,this._shape="Text",this.toolbarButtonName="drawText"},enable(s){L.Util.setOptions(this,s),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(De("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._map.getContainer().classList.add("geoman-draw-cursor"),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){var s;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),(s=this._hintMarker)==null||s.remove(),this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("mousemove",this._syncHintMarker,this),this._map.off("mousemove",this._showHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this.options.snappable){let a=s;a.target=this._hintMarker,this._handleSnapping(a)}},_createMarker(s){var _,w,b,S;if(!s.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let a=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(_=this.options.textOptions)==null?void 0:_.className){let T=this.options.textOptions.className.split(" ");this.textArea.classList.add(...T)}let h=this._createTextIcon(this.textArea),d=new L.Marker(a,{textMarker:!0,_textMarkerOverPM:!0,icon:h});if(this._setPane(d,"markerPane"),this._finishLayer(d),d.pm||(d.options.draggable=!1),d.addTo(this._map.pm._getContainingLayer()),d.pm){d.pm.textArea=this.textArea,L.setOptions(d.pm,{removeIfEmpty:((w=this.options.textOptions)==null?void 0:w.removeIfEmpty)??!0});let T=((b=this.options.textOptions)==null?void 0:b.focusAfterDraw)??!0;d.pm._createTextMarker(T),(S=this.options.textOptions)!=null&&S.text&&d.pm.setText(this.options.textOptions.text)}this._fireCreate(d),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this._map.once("mousemove",this._showHintMarkerAfterMoving,this)},_showHintMarkerAfterMoving(s){this.enable(),this._hintMarker.setLatLng(s.latlng)},_createTextArea(){let s=document.createElement("textarea");return s.readOnly=!0,s.classList.add("pm-textarea","pm-disabled"),s},_createTextIcon(s){return L.divIcon({className:"pm-text-marker",html:s})}});var ga={enableLayerDrag(){if(!this.options.draggable||!this._layer._map)return;this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,Ni(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;let s=this._getDOMElem();s&&(Ni(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(s)):L.DomEvent.on(s,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()},disableLayerDrag(){this._layerDragEnabled=!1,Ni(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();let s=this._getDOMElem();s&&(Ni(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(s)):L.DomEvent.off(s,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging(){return this._dragging},layerDragEnabled(){return!!this._layerDragEnabled},_simulateMouseDownEvent(s){let a=s.touches?s.touches[0]:s,h={originalEvent:a,target:this._layer};return h.containerPoint=this._map.mouseEventToContainerPoint(a),h.latlng=this._map.containerPointToLatLng(h.containerPoint),this._dragMixinOnMouseDown(h),!1},_simulateMouseMoveEvent(s){let a=s.touches?s.touches[0]:s,h={originalEvent:a,target:this._layer};return h.containerPoint=this._map.mouseEventToContainerPoint(a),h.latlng=this._map.containerPointToLatLng(h.containerPoint),this._dragMixinOnMouseMove(h),!1},_simulateMouseUpEvent(s){let a={originalEvent:s.touches?s.touches[0]:s,target:this._layer};return s.type.indexOf("touch")===-1&&(a.containerPoint=this._map.mouseEventToContainerPoint(s),a.latlng=this._map.containerPointToLatLng(a.containerPoint)),this._dragMixinOnMouseUp(a),!1},_dragMixinOnMouseDown(s){if(s.originalEvent.button>0)return;this._overwriteEventIfItComesFromMarker(s);let a=s._fromLayerSync,h=this._syncLayers("_dragMixinOnMouseDown",s);if(this._layer instanceof L.Marker&&(this.options.snappable&&!a&&!h?this._initSnappableMarkers():this._disableSnapping()),this._layer instanceof L.CircleMarker){let d="resizeableCircleMarker";this._layer instanceof L.Circle&&(d="resizeableCircle"),this.options.snappable&&!a&&!h?this._layer.pm.options[d]||this._initSnappableMarkersDrag():this._layer.pm.options[d]?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag()}this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=s.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)},_dragMixinOnMouseMove(s){this._overwriteEventIfItComesFromMarker(s);let a=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",s),this._dragging||(this._dragging=!0,L.DomUtil.addClass(a,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=s.latlng),this._onLayerDrag(s),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp(s){let a=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",s),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),this._dragging?(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(()=>{this._dragging=!1,a&&L.DomUtil.removeClass(a,"leaflet-pm-dragging"),this._fireDragEnd(),this._fireEdit(),this._layerEdited=!0},10),!0):!1},_onLayerDrag(s){let{latlng:a}=s,h={lat:a.lat-this._tempDragCoord.lat,lng:a.lng-this._tempDragCoord.lng},d=_=>_.map(w=>{if(Array.isArray(w))return d(w);let b={lat:w.lat+h.lat,lng:w.lng+h.lng};return(w.alt||w.alt===0)&&(b.alt=w.alt),b});if(this._layer instanceof L.Circle&&this._layer.options.resizeableCircle||this._layer instanceof L.CircleMarker&&this._layer.options.resizeableCircleMarker){let _=d([this._layer.getLatLng()]);this._layer.setLatLng(_[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){let _=this._layer.getLatLng();this._layer._snapped&&(_=this._layer._orgLatLng);let w=d([_]);this._layer.setLatLng(w[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){let _=d([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(_),this._fireChange(this._layer.getBounds(),"Edit")}else{let _=d(this._layer.getLatLngs());this._layer.setLatLngs(_),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=a,s.layer=this._layer,this._fireDrag(s)},addDraggingClass(){let s=this._getDOMElem();s&&L.DomUtil.addClass(s,"leaflet-pm-draggable")},removeDraggingClass(){let s=this._getDOMElem();s&&L.DomUtil.removeClass(s,"leaflet-pm-draggable")},_getDOMElem(){let s=null;return this._layer._path?s=this._layer._path:this._layer._renderer&&this._layer._renderer._container?s=this._layer._renderer._container:this._layer._image?s=this._layer._image:this._layer._icon&&(s=this._layer._icon),s},_overwriteEventIfItComesFromMarker(s){s.target.getLatLng&&(!s.target._radius||s.target._radius<=10)&&(s.containerPoint=this._map.mouseEventToContainerPoint(s.originalEvent),s.latlng=this._map.containerPointToLatLng(s.containerPoint))},_syncLayers(s,a){if(this.enabled())return!1;if(!a._fromLayerSync&&this._layer===a.target&&this.options.syncLayersOnDrag){a._fromLayerSync=!0;let h=[];if(L.Util.isArray(this.options.syncLayersOnDrag))h=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(d=>{d instanceof L.LayerGroup&&(h=h.concat(d.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(let d in this._parentLayerGroup){let _=this._parentLayerGroup[d];_.pm&&(h=_.pm.getLayers(!0))}return L.Util.isArray(h)&&h.length>0&&(h=h.filter(d=>!!d.pm).filter(d=>!!d.pm.options.draggable),h.forEach(d=>{d!==this._layer&&d.pm[s]&&(d._snapped=!1,d.pm[s](a))})),h.length>0}return!1},_stopDOMImageDrag(s){return s.preventDefault(),!1}},ma=ga,wl=E(sr());function Ml(s,a,h,d){return h.unproject(a.transform(h.project(s,d)),d)}function Jn(s,a,h){let d=h.getMaxZoom();if(d===1/0&&(d=h.getZoom()),L.Util.isArray(s)){let _=[];return s.forEach(w=>{_.push(Jn(w,a,h))}),_}return s instanceof L.LatLng?Ml(s,a,h,d):null}function hn(s,a){a instanceof L.Layer&&(a=a.getLatLng());let h=s.getMaxZoom();return h===1/0&&(h=s.getZoom()),s.project(a,h)}function us(s,a){let h=s.getMaxZoom();return h===1/0&&(h=s.getZoom()),s.unproject(a,h)}var zs={_onRotateStart(s){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=hn(this._map,this._rotationOriginLatLng),this._rotationStartPoint=hn(this._map,s.target.getLatLng()),this._initialRotateLatLng=pn(this._layer),this._startAngle=this.getAngle();let a=pn(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,a),this._fireRotationStart(this._map,a)},_onRotate(s){let a=hn(this._map,s.target.getLatLng()),h=this._rotationStartPoint,d=this._rotationOriginPoint,_=Math.atan2(a.y-d.y,a.x-d.x)-Math.atan2(h.y-d.y,h.x-d.x);this._layer.setLatLngs(this._rotateLayer(_,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let w=this;function b(X,$=[],_t=-1){if(_t>-1&&$.push(_t),L.Util.isArray(X[0]))X.forEach((Et,Ut)=>b(Et,$.slice(),Ut));else{let Et=$.length>0?(0,wl.default)(w._markers,$):w._markers[0];X.forEach((Ut,te)=>{Et[te].setLatLng(Ut)})}}b(this._layer.getLatLngs());let S=pn(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(_,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let T=_*180/Math.PI;T=T<0?T+360:T;let O=T+this._startAngle;this._setAngle(O),this._rotationLayer.pm._setAngle(O),this._fireRotation(this._rotationLayer,T,S),this._fireRotation(this._map,T,S),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd(){let s=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;let a=pn(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=pn(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,s,a),this._fireRotationEnd(this._map,s,a),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer(s,a,h,d,_){let w=hn(_,h);return this._matrix=d.clone().rotate(s,w).flip(),Jn(a,this._matrix,_)},_setAngle(s){s=s<0?s+360:s,this._angle=s%360},_getRotationCenter(){if(this._rotationCenter)return this._rotationCenter;let s=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),a=s.getCenter();return s.removeFrom(this._layer._map),a},enableRotate(){if(!this.options.allowRotation){this.disableRotate();return}this.rotateEnabled()&&this.disableRotate(),this._layer instanceof L.Rectangle&&this._angle===void 0&&this.setInitAngle(Ki(this._layer._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let s={fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0};this._rotatePoly=L.polygon(this._layer.getLatLngs(),s),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setRotationCenter(this.getRotationCenter()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=pn(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)},disableRotate(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled(){return!!this._rotateEnabled},rotateLayer(s){let a=this.getAngle(),h=this._layer.getLatLngs(),d=s*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(d,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+s),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(d,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());let _=this.getAngle()-a;_=_<0?_+360:_,this._startAngle=a,this._fireRotation(this._layer,_,h,this._layer),this._fireRotation(this._map||this._layer._map,_,h,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle(s){let a=s-this.getAngle();this.rotateLayer(a)},getAngle(){return this._angle||0},setInitAngle(s){this._setAngle(s)},getRotationCenter(){return this._getRotationCenter()},setRotationCenter(s){this._rotationCenter=s,this._rotatePoly&&this._rotatePoly.pm.setRotationCenter(s)}},js=zs,Fo=L.Class.extend({includes:[ma,Ua,js,Rr],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0,resizeableCircleMarker:!1,resizeableCircle:!0,snapMiddle:!1,snapVertex:!0},setOptions(s){L.Util.setOptions(this,s)},getOptions(){return this.options},applyOptions(){},isPolygon(){return this._layer instanceof L.Polygon},getShape(){return this._shape},_setPane(s,a){a==="layerPane"?s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":a==="vertexPane"?s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":a==="markerPane"&&(s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation(s,a){let h=a.target,d={layer:this._layer,marker:h,event:a},_="";return s==="move"?_="moveVertexValidation":s==="add"?_="addVertexValidation":s==="remove"&&(_="removeVertexValidation"),this.options[_]&&typeof this.options[_]=="function"&&!this.options[_](d)?(s==="move"&&(h._cancelDragEventChain=h.getLatLng()),!1):(h._cancelDragEventChain=null,!0)},_vertexValidationDrag(s){return s._cancelDragEventChain?(s._latlng=s._cancelDragEventChain,s.update(),!1):!0},_vertexValidationDragEnd(s){return s._cancelDragEventChain?(s._cancelDragEventChain=null,!1):!0}}),Ui=Fo;Ui.LayerGroup=L.Class.extend({initialize(s){this._layerGroup=s,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(d=>this._initLayer(d));let a=d=>{if(d.layer._pmTempLayer)return;this._layers=this.getLayers();let _=this._layers.filter(w=>!w.pm._parentLayerGroup||!(this._layerGroup._leaflet_id in w.pm._parentLayerGroup));_.forEach(w=>{this._initLayer(w)}),_.length>0&&this._getMap()&&this._getMap().pm.globalEditModeEnabled()&&this.enabled()&&this.enable(this.getOptions())};this._layerGroup.on("layeradd",L.Util.throttle(a,100,this),this),this._layerGroup.on("layerremove",d=>{this._removeLayerFromGroup(d.target)},this);let h=d=>{d.target._pmTempLayer||(this._layers=this.getLayers())};this._layerGroup.on("layerremove",L.Util.throttle(h,100,this),this)},enable(s,a=[]){a.length===0&&(this._layers=this.getLayers()),this._options=s,this._layers.forEach(h=>{h instanceof L.LayerGroup?a.indexOf(h._leaflet_id)===-1&&(a.push(h._leaflet_id),h.pm.enable(s,a)):h.pm.enable(s)})},disable(s=[]){s.length===0&&(this._layers=this.getLayers()),this._layers.forEach(a=>{a instanceof L.LayerGroup?s.indexOf(a._leaflet_id)===-1&&(s.push(a._leaflet_id),a.pm.disable(s)):a.pm.disable()})},enabled(s=[]){return s.length===0&&(this._layers=this.getLayers()),!!this._layers.find(a=>a instanceof L.LayerGroup?s.indexOf(a._leaflet_id)===-1?(s.push(a._leaflet_id),a.pm.enabled(s)):!1:a.pm.enabled())},toggleEdit(s,a=[]){a.length===0&&(this._layers=this.getLayers()),this._options=s,this._layers.forEach(h=>{h instanceof L.LayerGroup?a.indexOf(h._leaflet_id)===-1&&(a.push(h._leaflet_id),h.pm.toggleEdit(s,a)):h.pm.toggleEdit(s)})},_initLayer(s){let a=L.Util.stamp(this._layerGroup);s.pm._parentLayerGroup||(s.pm._parentLayerGroup={}),s.pm._parentLayerGroup[a]=this._layerGroup},_removeLayerFromGroup(s){if(s.pm&&s.pm._layerGroup){let a=L.Util.stamp(this._layerGroup);delete s.pm._layerGroup[a]}},dragging(){return this._layers=this.getLayers(),this._layers?!!this._layers.find(s=>s.pm.dragging()):!1},getOptions(){return this.options},_getMap(){var s;return this._map||((s=this._layers.find(a=>!!a._map))==null?void 0:s._map)||null},getLayers(s=!1,a=!0,h=!0,d=[]){let _=[];return s?this._layerGroup.getLayers().forEach(w=>{_.push(w),w instanceof L.LayerGroup&&d.indexOf(w._leaflet_id)===-1&&(d.push(w._leaflet_id),_=_.concat(w.pm.getLayers(!0,!0,!0,d)))}):_=this._layerGroup.getLayers(),h&&(_=_.filter(w=>!(w instanceof L.LayerGroup))),a&&(_=_.filter(w=>!!w.pm),_=_.filter(w=>!w._pmTempLayer),_=_.filter(w=>!L.PM.optIn&&!w.options.pmIgnore||L.PM.optIn&&w.options.pmIgnore===!1)),_},setOptions(s,a=[]){a.length===0&&(this._layers=this.getLayers()),this.options=s,this._layers.forEach(h=>{h.pm&&(h instanceof L.LayerGroup?a.indexOf(h._leaflet_id)===-1&&(a.push(h._leaflet_id),h.pm.setOptions(s,a)):h.pm.setOptions(s))})}}),Ui.Marker=Ui.extend({_shape:"Marker",initialize(s){this._layer=s,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable(s={draggable:!0}){if(L.Util.setOptions(this,s),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()},disable(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled(){return this._enabled},toggleEdit(s){this.enabled()?this.disable():this.enable(s)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker(s){let a=s.target;a.remove(),this._fireRemove(a),this._fireRemove(this._map,a)},_onDragEnd(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers(){let s=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,s.off("pm:drag",this._handleSnapping,this),s.on("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.on("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this),s.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let s=this._layer;s.off("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this)}});var hs=E(sr()),Yl={filterMarkerGroup(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this._layer.on("remove",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache(){let s=[...this._markerGroup.getLayers(),...this.markerCache];this.markerCache=s.filter((a,h,d)=>d.indexOf(a)===h)},_removeFromCache(s){let a=this.markerCache.indexOf(s);a>-1&&this.markerCache.splice(a,1)},renderLimits(s){this.markerCache.forEach(a=>{s.includes(a)?this._markerGroup.addLayer(a):this._markerGroup.removeLayer(a)})},applyLimitFilters({latlng:s={lat:0,lng:0}}){if(this._preventRenderMarkers)return;let a=[...this._filterClosestMarkers(s)];this.renderLimits(a)},_filterClosestMarkers(s){let a=[...this.markerCache],h=this.options.limitMarkersToCount;return h===-1?a:(a.sort((d,_)=>{let w=d._latlng.distanceTo(s),b=_._latlng.distanceTo(s);return w-b}),a.filter((d,_)=>h>-1?_<h:!0))},_preventRenderMarkers:!1,_preventRenderingMarkers(s){this._preventRenderMarkers=!!s}},Xn=Yl;Ui.Line=Ui.extend({includes:[Xn],_shape:"Line",initialize(s){this._layer=s,this._enabled=!1},enable(s){if(L.Util.setOptions(this,s),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()}},disable(){if(!this.enabled()||this._dragging)return;this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);let s=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(s,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()},enabled(){return this._enabled},toggleEdit(s){return this.enabled()?this.disable():this.enable(s),this.enabled()},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers(){let s=this._map,a=this._layer.getLatLngs();this._markerGroup&&(this._markerGroup.removeFrom(s),this._markerGroup.clearLayers()),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0;let h=d=>{if(Array.isArray(d[0]))return d.map(h,this);let _=d.map(this._createMarker,this);return this.options.hideMiddleMarkers!==!0&&d.map((w,b)=>{let S=this.isPolygon()?(b+1)%d.length:b+1;return this._createMiddleMarker(_[b],_[S])}),_};this._markers=h(a),this.filterMarkerGroup(),s.addLayer(this._markerGroup)},_createMarker(s){let a=new L.Marker(s,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(a,"vertexPane"),a._pmTempLayer=!0,this.options.rotate?(a.on("dragstart",this._onRotateStart,this),a.on("drag",this._onRotate,this),a.on("dragend",this._onRotateEnd,this)):(a.on("click",this._onVertexClick,this),a.on("dragstart",this._onMarkerDragStart,this),a.on("move",this._onMarkerDrag,this),a.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||a.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(a),a},_createMiddleMarker(s,a){if(!s||!a)return!1;let h=L.PM.Utils.calcMiddleLatLng(this._map,s.getLatLng(),a.getLatLng()),d=this._createMarker(h),_=L.divIcon({className:"marker-icon marker-icon-middle"});return d.setIcon(_),d.leftM=s,d.rightM=a,s._middleMarkerNext=d,a._middleMarkerPrev=d,d.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),d.on("movestart",this._onMiddleMarkerMoveStart,this),d},_onMiddleMarkerClick(s){let a=s.target;if(!this._vertexValidation("add",s))return;let h=L.divIcon({className:"marker-icon"});a.setIcon(h),this._addMarker(a,a.leftM,a.rightM)},_onMiddleMarkerMoveStart(s){let a=s.target;if(a.on("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidation("add",s)){a.on("move",this._onMiddleMarkerMovePrevent,this);return}a._dragging=!0,this._addMarker(a,a.leftM,a.rightM)},_onMiddleMarkerMovePrevent(s){let a=s.target;this._vertexValidationDrag(a)},_onMiddleMarkerMoveEnd(s){let a=s.target;if(a.off("move",this._onMiddleMarkerMovePrevent,this),a.off("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidationDragEnd(a))return;let h=L.divIcon({className:"marker-icon"});a.setIcon(h),setTimeout(()=>{delete a._dragging},100)},_addMarker(s,a,h){s.off("movestart",this._onMiddleMarkerMoveStart,this),s.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);let d=s.getLatLng(),_=this._layer._latlngs;delete s.leftM,delete s.rightM;let{indexPath:w,index:b,parentPath:S}=L.PM.Utils.findDeepMarkerIndex(this._markers,a),T=w.length>1?(0,hs.default)(_,S):_,O=w.length>1?(0,hs.default)(this._markers,S):this._markers;T.splice(b+1,0,d),O.splice(b+1,0,s),this._layer.setLatLngs(_),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(a,s),this._createMiddleMarker(s,h)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(s,L.PM.Utils.findDeepMarkerIndex(this._markers,s).indexPath,d),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection(){return Co(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval(){this._handleLayerStyle(!0)&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle(s){let a=this._layer,h,d;if(this.options.allowSelfIntersection?h=!1:(d=Co(this._layer.toGeoJSON(15)),h=d.features.length>0),h){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return h;s?this._flashLayer():(a.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(d)}else a.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1);return h},_flashLayer(){this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(()=>{this._layer.setStyle({color:this.cachedColor}),this.isRed=!1},200)},_updateDisabledMarkerStyle(s,a){s.forEach(h=>{Array.isArray(h)?this._updateDisabledMarkerStyle(h,a):h._icon&&(a&&!this._checkMarkerAllowedToDrag(h)?L.DomUtil.addClass(h._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(h._icon,"vertexmarker-disabled"))})},_removeMarker(s){let a=s.target;if(!this._vertexValidation("remove",s))return;this.options.allowSelfIntersection||(this._coordsBeforeEdit=pn(this._layer,this._layer.getLatLngs()));let h=this._layer.getLatLngs(),{indexPath:d,index:_,parentPath:w}=L.PM.Utils.findDeepMarkerIndex(this._markers,a);if(!d)return;let b=d.length>1?(0,hs.default)(h,w):h,S=d.length>1?(0,hs.default)(this._markers,w):this._markers,T=w[w.length-1]>0&&this._layer instanceof L.Polygon;if(!this.options.removeLayerBelowMinVertexCount&&!T&&(b.length<=2||this.isPolygon()&&b.length<=3)){this._flashLayer();return}b.splice(_,1),this._layer.setLatLngs(h),this.isPolygon()&&b.length<=2&&b.splice(0,b.length);let O=!1;if(b.length<=1&&(b.splice(0,b.length),w.length>1&&d.length>1&&(h=Ys(h)),this._layer.setLatLngs(h),this._initMarkers(),O=!0),or(h)||this._layer.remove(),h=Ys(h),this._layer.setLatLngs(h),this._markers=Ys(this._markers),!O&&(S=d.length>1?(0,hs.default)(this._markers,w):this._markers,a._middleMarkerPrev&&(this._markerGroup.removeLayer(a._middleMarkerPrev),this._removeFromCache(a._middleMarkerPrev)),a._middleMarkerNext&&(this._markerGroup.removeLayer(a._middleMarkerNext),this._removeFromCache(a._middleMarkerNext)),this._markerGroup.removeLayer(a),this._removeFromCache(a),S)){let X,$;if(this.isPolygon()?(X=(_+1)%S.length,$=(_+(S.length-1))%S.length):($=_-1<0?void 0:_-1,X=_+1>=S.length?void 0:_+1),X!==$){let _t=S[$],Et=S[X];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(_t,Et)}S.splice(_,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(a,d),this._fireChange(this._layer.getLatLngs(),"Edit")},updatePolygonCoordsFromMarkerDrag(s){let a=this._layer.getLatLngs(),h=s.getLatLng(),{indexPath:d,index:_,parentPath:w}=L.PM.Utils.findDeepMarkerIndex(this._markers,s);(d.length>1?(0,hs.default)(a,w):a).splice(_,1,h),this._layer.setLatLngs(a)},_getNeighborMarkers(s){let{indexPath:a,index:h,parentPath:d}=L.PM.Utils.findDeepMarkerIndex(this._markers,s),_=a.length>1?(0,hs.default)(this._markers,d):this._markers,w=(h+1)%_.length,b=(h+(_.length-1))%_.length,S=_[b],T=_[w];return{prevMarker:S,nextMarker:T}},_checkMarkerAllowedToDrag(s){let{prevMarker:a,nextMarker:h}=this._getNeighborMarkers(s),d=L.polyline([a.getLatLng(),s.getLatLng()]),_=L.polyline([s.getLatLng(),h.getLatLng()]),w=lr(this._layer.toGeoJSON(15),d.toGeoJSON(15)).features.length,b=lr(this._layer.toGeoJSON(15),_.toGeoJSON(15)).features.length;return s.getLatLng()===this._markers[0][0].getLatLng()?b+=1:s.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(w+=1),!(w<=2&&b<=2)},_onMarkerDragStart(s){let a=s.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),!this._vertexValidation("move",s))return;let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,a);this._fireMarkerDragStart(s,h),this.options.allowSelfIntersection||(this._coordsBeforeEdit=pn(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(a):this._markerAllowedToDrag=null},_onMarkerDrag(s){let a=s.target;if(!this._vertexValidationDrag(a))return;let{indexPath:h,index:d,parentPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,a);if(!h)return;if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1){this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),this._handleLayerStyle();return}this.updatePolygonCoordsFromMarkerDrag(a);let w=h.length>1?(0,hs.default)(this._markers,_):this._markers,b=(d+1)%w.length,S=(d+(w.length-1))%w.length,T=a.getLatLng(),O=w[S].getLatLng(),X=w[b].getLatLng();if(a._middleMarkerNext){let $=L.PM.Utils.calcMiddleLatLng(this._map,T,X);a._middleMarkerNext.setLatLng($)}if(a._middleMarkerPrev){let $=L.PM.Utils.calcMiddleLatLng(this._map,T,O);a._middleMarkerPrev.setLatLng($)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(s,h),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(s){let a=s.target;if(!this._vertexValidationDragEnd(a))return;let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,a),d=!this.options.allowSelfIntersection&&this.hasSelfIntersection();d&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(d=!1);let _=!this.options.allowSelfIntersection&&d;if(this._fireMarkerDragEnd(s,h,_),_){this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),this._fireLayerReset(s,h);return}!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_onVertexClick(s){let a=s.target;if(a._dragging)return;let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,a);this._fireVertexClick(s,h)}}),Ui.Polygon=Ui.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag(s){let{prevMarker:a,nextMarker:h}=this._getNeighborMarkers(s),d=L.polyline([a.getLatLng(),s.getLatLng()]),_=L.polyline([s.getLatLng(),h.getLatLng()]),w=lr(this._layer.toGeoJSON(15),d.toGeoJSON(15)).features.length,b=lr(this._layer.toGeoJSON(15),_.toGeoJSON(15)).features.length;return!(w<=2&&b<=2)}}),Ui.Rectangle=Ui.Polygon.extend({_shape:"Rectangle",_initMarkers(){let s=this._map,a=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,s.addLayer(this._markerGroup),this._markers=[],this._markers[0]=a.map(this._createMarker,this),[this._cornerMarkers]=this._markers,this._layer.getLatLngs()[0].forEach((h,d)=>{let _=this._cornerMarkers.find(w=>w._index===d);_&&_.setLatLng(h)})},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker(s,a){let h=new L.Marker(s,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(h,"vertexPane"),h._origLatLng=s,h._index=a,h._pmTempLayer=!0,h.on("click",this._onVertexClick,this),this._markerGroup.addLayer(h),h},_addMarkerEvents(){this._markers[0].forEach(s=>{s.on("dragstart",this._onMarkerDragStart,this),s.on("drag",this._onMarkerDrag,this),s.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||s.on("contextmenu",this._removeMarker,this)})},_removeMarker(){return null},_onMarkerDragStart(s){if(!this._vertexValidation("move",s))return;let a=s.target,h=this._cornerMarkers;a._oppositeCornerLatLng=h.find(_=>_._index===(a._index+2)%4).getLatLng(),a._snapped=!1;let{indexPath:d}=L.PM.Utils.findDeepMarkerIndex(this._markers,a);this._fireMarkerDragStart(s,d)},_onMarkerDrag(s){let a=s.target;if(!this._vertexValidationDrag(a)||a._index===void 0)return;this._adjustRectangleForMarkerMove(a);let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,a);this._fireMarkerDrag(s,h),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(s){let a=s.target;if(!this._vertexValidationDragEnd(a))return;this._cornerMarkers.forEach(d=>{delete d._oppositeCornerLatLng});let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,a);this._fireMarkerDragEnd(s,h),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_adjustRectangleForMarkerMove(s){L.extend(s._origLatLng,s._latlng);let a=L.PM.Utils._getRotatedRectangle(s.getLatLng(),s._oppositeCornerLatLng,this.getAngle(),this._map);this._layer.setLatLngs(a),this._adjustAllMarkers(s),this._layer.redraw()},_adjustAllMarkers(s){let a=this._layer.getLatLngs()[0];if(a&&a.length!==4&&a.length>0)a.forEach((h,d)=>{this._cornerMarkers[d].setLatLng(h)}),this._cornerMarkers.slice(a.length).forEach(h=>{h.setLatLng(a[0])});else if(!a||!a.length)console.error("The layer has no LatLngs");else{let h=a.findIndex(d=>s.getLatLng().equals(d));h>-1?(this._cornerMarkers[(s._index+1)%4].setLatLng(a[(h+1)%4]),this._cornerMarkers[(s._index+2)%4].setLatLng(a[(h+2)%4]),this._cornerMarkers[(s._index+3)%4].setLatLng(a[(h+3)%4])):this._cornerMarkers.forEach(d=>{d.setLatLng(a[d._index])})}},_findCorners(){this._angle===void 0&&this.setInitAngle(Ki(this._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let s=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(s[0],s[2],this.getAngle(),this._map||this)}}),Ui.CircleMarker=Ui.extend({_shape:"CircleMarker",initialize(s){this._layer=s,this._enabled=!1,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._updateHiddenPolyCircle()},enable(s={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,s),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._extendingEnable(),this._updateHiddenPolyCircle(),this._fireEnable()},_extendingEnable(){this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this)},disable(){this.dragging()||(this._map||(this._map=this._layer._map),this._map&&this.enabled()&&(this.layerDragEnabled()&&this.disableLayerDrag(),this._helperLayers&&(this._helperLayers.clearLayers(),this._helperLayers.removeFrom(this._map)),this.options[this._editableOption]?(this._map.off("move",this._syncMarkers,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this),this._extendingDisable(),this._layer.off("remove",this.disable,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1))},_extendingDisable(){this._layer.off("contextmenu",this._removeMarker,this)},enabled(){return this._enabled},toggleEdit(s){this.enabled()?this.disable():this.enable(s)},applyOptions(){this.options[this._editableOption]?(this._initMarkers(),this._map.on("move",this._syncMarkers,this),this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._disableSnapping()):(this.options.draggable&&this.enableLayerDrag(),this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this._initSnappableMarkersDrag():this._disableSnappingDrag()),this._extendingApplyOptions()},_extendingApplyOptions(){this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers(){let s=this._map;this._helperLayers&&(this._helperLayers.removeFrom(s),this._helperLayers.clearLayers()),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(s);let a=this._layer.getLatLng(),h=this._layer._radius,d=this._getLatLngOnCircle(a,h);this._centerMarker=this._createCenterMarker(a),this._outerMarker=this._createOuterMarker(d),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle(s,a){let h=this._map.project(s),d=L.point(h.x+a,h.y);return this._map.unproject(d)},_createHintLine(s,a){let h=s.getLatLng(),d=a.getLatLng();this._hintline=L.polyline([h,d],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker(s){let a=this._createMarker(s);return this.options.draggable?(L.DomUtil.addClass(a._icon,"leaflet-pm-draggable"),a.on("move",this._moveCircle,this)):a.dragging.disable(),a},_createOuterMarker(s){let a=this._createMarker(s);return a.on("drag",this._resizeCircle,this),a},_createMarker(s){let a=new L.Marker(s,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(a,"vertexPane"),a._origLatLng=s,a._pmTempLayer=!0,a.on("dragstart",this._onMarkerDragStart,this),a.on("drag",this._onMarkerDrag,this),a.on("dragend",this._onMarkerDragEnd,this),a.on("click",this._onVertexClick,this),this._helperLayers.addLayer(a),a},_moveCircle(s){if(s.target._cancelDragEventChain)return;let a=this._centerMarker.getLatLng();this._layer.setLatLng(a);let h=this._layer._radius,d=this._getLatLngOnCircle(a,h);this._outerMarker._latlng=d,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers(){let s=this._layer.getLatLng(),a=this._layer._radius,h=this._getLatLngOnCircle(s,a);this._outerMarker.setLatLng(h),this._centerMarker.setLatLng(s),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius(){let s=this._centerMarker.getLatLng(),a=this._outerMarker.getLatLng(),h=this._distanceCalculation(s,a);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(h),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine(){let s=this._centerMarker.getLatLng(),a=this._outerMarker.getLatLng();this._hintline.setLatLngs([s,a])},_removeMarker(){this.options[this._editableOption]&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart(s){this._vertexValidation("move",s)&&this._fireMarkerDragStart(s)},_onMarkerDrag(s){let a=s.target;a instanceof L.Marker&&!this._vertexValidationDrag(a)||this._fireMarkerDrag(s)},_onMarkerDragEnd(s){this._extedingMarkerDragEnd();let a=s.target;this._vertexValidationDragEnd(a)&&(this.options[this._editableOption]&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(s))},_extedingMarkerDragEnd(){this._map.pm.Draw.CircleMarker._layerIsDragging=!1},_initSnappableMarkersDrag(){let s=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,s.off("pm:drag",this._handleSnapping,this),s.on("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.on("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this),s.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag(){let s=this._layer;s.off("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle(){let s=this._layer._map||this._map;if(s){let a=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),s,this._layer.getLatLng()),h=L.circle(this._layer.getLatLng(),this._layer.options);h.setRadius(a);let d=s&&s.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(h,200,!d).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(h,200,!d),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker(){let s=this._centerMarker.getLatLng(),a=this._outerMarker.getLatLng(),h=this._distanceCalculation(s,a);return this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?a=Dr(this._map,s,a,this._getMinDistanceInMeter(s)):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&(a=Dr(this._map,s,a,this._getMaxDistanceInMeter(s))),a},_handleOuterMarkerSnapping(){if(this._outerMarker._snapped){let s=this._centerMarker.getLatLng(),a=this._outerMarker.getLatLng(),h=this._distanceCalculation(s,a);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._outerMarker.setLatLng(this._outerMarker._orgLatLng):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_distanceCalculation(s,a){return this._map.project(s).distanceTo(this._map.project(a))},_getMinDistanceInMeter(s){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,s)},_getMaxDistanceInMeter(s){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,s)},_onVertexClick(s){s.target._dragging||this._fireVertexClick(s,void 0)}}),Ui.Circle=Ui.CircleMarker.extend({_shape:"Circle",initialize(s){this._layer=s,this._enabled=!1,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._updateHiddenPolyCircle()},enable(s){L.PM.Edit.CircleMarker.prototype.enable.call(this,s||{})},_extendingEnable(){},_extendingDisable(){this._layer.off("remove",this.disable,this);let s=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(s,"leaflet-pm-draggable")},_extendingApplyOptions(){},_syncMarkers(){},_removeMarker(){},_onDragStart(){},_extedingMarkerDragEnd(){},_updateHiddenPolyCircle(){let s=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!s).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!s),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_distanceCalculation(s,a){return this._map.distance(s,a)},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_onVertexClick(s){s.target._dragging||this._fireVertexClick(s,void 0)}}),Ui.ImageOverlay=Ui.extend({_shape:"ImageOverlay",initialize(s){this._layer=s,this._enabled=!1},toggleEdit(s){this.enabled()?this.disable():this.enable(s)},enabled(){return this._enabled},enable(s={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,s),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()}},disable(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners(){let s=this._layer.getBounds(),a=s.getNorthWest(),h=s.getNorthEast(),d=s.getSouthEast(),_=s.getSouthWest();return[a,h,d,_]}}),Ui.Text=Ui.extend({_shape:"Text",initialize(s){this._layer=s,this._enabled=!1},enable(s){if(L.Util.setOptions(this,s),!!this.textArea){if(!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()}},disable(){if(!this.enabled())return;this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");let s=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),s.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1},enabled(){return this._enabled},toggleEdit(s){this.enabled()?this.disable():this.enable(s)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers(){let s=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,s.off("pm:drag",this._handleSnapping,this),s.on("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.on("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this),s.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let s=this._layer;s.off("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this)},_autoResize(){this.textArea.style.height="1px",this.textArea.style.width="1px";let s=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,a=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height=`${s}px`,this.textArea.style.width=`${a}px`,this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur(){this._disableOnBlurActive=!0,setTimeout(()=>{this.enabled()&&L.DomEvent.on(document,"click",this._documentClick,this)},100)},_documentClick(s){s.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange(s={}){let a=this._hasFocus;this._hasFocus=s.type==="focus",!a!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus(){return this._hasFocus},getElement(){return this.textArea},setText(s){s&&(this.textArea.value=s),this._autoResize()},getText(){return this.textArea.value},_initTextMarker(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){let a=this.options.className.split(" ");this.textArea.classList.add(...a)}let s=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(s),this._layer.once("add",this._createTextMarker,this)},_createTextMarker(s=!1){this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),s===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection(s){s.preventDefault()}});var kn=function(s,a,h,d,_,w){this._matrix=[s,a,h,d,_,w]};kn.init=()=>new L.PM.Matrix(1,0,0,1,0,0),kn.prototype={transform(s){return this._transform(s.clone())},_transform(s){let a=this._matrix,{x:h,y:d}=s;return s.x=a[0]*h+a[1]*d+a[4],s.y=a[2]*h+a[3]*d+a[5],s},untransform(s){let a=this._matrix;return new L.Point((s.x/a[0]-a[4])/a[0],(s.y/a[2]-a[5])/a[2])},clone(){let s=this._matrix;return new L.PM.Matrix(s[0],s[1],s[2],s[3],s[4],s[5])},translate(s){if(s===void 0)return new L.Point(this._matrix[4],this._matrix[5]);let a,h;return typeof s=="number"?(a=s,h=s):(a=s.x,h=s.y),this._add(1,0,0,1,a,h)},scale(s,a){if(s===void 0)return new L.Point(this._matrix[0],this._matrix[3]);let h,d;return a=a||L.point(0,0),typeof s=="number"?(h=s,d=s):(h=s.x,d=s.y),this._add(h,0,0,d,a.x,a.y)._add(1,0,0,1,-a.x,-a.y)},rotate(s,a){let h=Math.cos(s),d=Math.sin(s);return a=a||new L.Point(0,0),this._add(h,d,-d,h,a.x,a.y)._add(1,0,0,1,-a.x,-a.y)},flip(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add(s,a,h,d,_,w){let b=[[],[],[]],S=this._matrix,T=[[S[0],S[2],S[4]],[S[1],S[3],S[5]],[0,0,1]],O=[[s,h,_],[a,d,w],[0,0,1]],X;s&&s instanceof L.PM.Matrix&&(S=s._matrix,O=[[S[0],S[2],S[4]],[S[1],S[3],S[5]],[0,0,1]]);for(let $=0;$<3;$+=1)for(let _t=0;_t<3;_t+=1){X=0;for(let Et=0;Et<3;Et+=1)X+=T[$][Et]*O[Et][_t];b[$][_t]=X}return this._matrix=[b[0][0],b[1][0],b[0][1],b[1][1],b[0][2],b[1][2]],this}};var xi=kn,Gr={calcMiddleLatLng(s,a,h){let d=s.project(a),_=s.project(h);return s.unproject(d._add(_)._divideBy(2))},findLayers(s){let a=[];return s.eachLayer(h=>{(h instanceof L.Polyline||h instanceof L.Marker||h instanceof L.Circle||h instanceof L.CircleMarker||h instanceof L.ImageOverlay)&&a.push(h)}),a=a.filter(h=>!!h.pm),a=a.filter(h=>!h._pmTempLayer),a=a.filter(h=>!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1),a},circleToPolygon(s,a=60,h=!0){let d=s.getLatLng(),_=s.getRadius(),w=Ts(d,_,a,0,h),b=[];for(let S=0;S<w.length;S+=1){let T=[w[S].lat,w[S].lng];b.push(T)}return L.polygon(b,s.options)},disablePopup(s){s.getPopup()&&(s._tempPopupCopy=s.getPopup(),s.unbindPopup())},enablePopup(s){s._tempPopupCopy&&(s.bindPopup(s._tempPopupCopy),delete s._tempPopupCopy)},_fireEvent(s,a,h,d=!1){s.fire(a,h,d);let{groups:_}=this.getAllParentGroups(s);_.forEach(w=>{w.fire(a,h,d)})},getAllParentGroups(s){let a=[],h=[],d=_=>{for(let w in _._eventParents)if(a.indexOf(w)===-1){a.push(w);let b=_._eventParents[w];h.push(b),d(b)}};return!s._pmLastGroupFetch||!s._pmLastGroupFetch.time||new Date().getTime()-s._pmLastGroupFetch.time>1e3?(d(s),s._pmLastGroupFetch={time:new Date().getTime(),groups:h,groupIds:a},{groupIds:a,groups:h}):{groups:s._pmLastGroupFetch.groups,groupIds:s._pmLastGroupFetch.groupIds}},createGeodesicPolygon:Ts,getTranslation:De,findDeepCoordIndex(s,a,h=!0){let d,_=b=>(S,T)=>{let O=b.concat(T);if(h){if(S.lat&&S.lat===a.lat&&S.lng===a.lng)return d=O,!0}else if(S.lat&&L.latLng(S).equals(a))return d=O,!0;return Array.isArray(S)&&S.some(_(O))};s.some(_([]));let w={};return d&&(w={indexPath:d,index:d[d.length-1],parentPath:d.slice(0,d.length-1)}),w},findDeepMarkerIndex(s,a){let h,d=w=>(b,S)=>{let T=w.concat(S);return b._leaflet_id===a._leaflet_id?(h=T,!0):Array.isArray(b)&&b.some(d(T))};s.some(d([]));let _={};return h&&(_={indexPath:h,index:h[h.length-1],parentPath:h.slice(0,h.length-1)}),_},_getIndexFromSegment(s,a){if(a&&a.length===2){let h=this.findDeepCoordIndex(s,a[0]),d=this.findDeepCoordIndex(s,a[1]),_=Math.max(h.index,d.index);return(h.index===0||d.index===0)&&_!==1&&(_+=1),{indexA:h,indexB:d,newIndex:_,indexPath:h.indexPath,parentPath:h.parentPath}}return null},_getRotatedRectangle(s,a,h,d){let _=hn(d,s),w=hn(d,a),b=h*Math.PI/180,S=Math.cos(b),T=Math.sin(b),O=(w.x-_.x)*S+(w.y-_.y)*T,X=(w.y-_.y)*S-(w.x-_.x)*T,$=O*S+_.x,_t=O*T+_.y,Et=-X*T+_.x,Ut=X*S+_.y,te=us(d,_),le=us(d,{x:$,y:_t}),Ke=us(d,w),K=us(d,{x:Et,y:Ut});return[te,le,Ke,K]},pxRadiusToMeterRadius(s,a,h){let d=a.project(h),_=L.point(d.x+s,d.y);return a.distance(a.unproject(_),h)}},Fu=Gr;L.PM=L.PM||{version:V.version,Map:Qs,Toolbar:ja,Draw:Fi,Edit:Ui,Utils:Fu,Matrix:xi,activeLang:"en",optIn:!1,initialize(s){this.addInitHooks(s)},setOptIn(s){this.optIn=!!s},addInitHooks(){function s(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}L.Map.addInitHook(s);function a(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}L.LayerGroup.addInitHook(a);function h(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}L.Marker.addInitHook(h);function d(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}L.CircleMarker.addInitHook(d);function _(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}L.Polyline.addInitHook(_);function w(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}L.Polygon.addInitHook(w);function b(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}L.Rectangle.addInitHook(b);function S(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}L.Circle.addInitHook(S);function T(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))}L.ImageOverlay.addInitHook(T)},reInitLayer(s){s instanceof L.LayerGroup&&s.eachLayer(a=>{this.reInitLayer(a)}),s.pm||L.PM.optIn&&s.options.pmIgnore!==!1||s.options.pmIgnore||(s instanceof L.Map?s.pm=new L.PM.Map(s):s instanceof L.Marker?s.options.textMarker?(s.pm=new L.PM.Edit.Text(s),s.pm._initTextMarker(),s.pm._createTextMarker(!1)):s.pm=new L.PM.Edit.Marker(s):s instanceof L.Circle?s.pm=new L.PM.Edit.Circle(s):s instanceof L.CircleMarker?s.pm=new L.PM.Edit.CircleMarker(s):s instanceof L.Rectangle?s.pm=new L.PM.Edit.Rectangle(s):s instanceof L.Polygon?s.pm=new L.PM.Edit.Polygon(s):s instanceof L.Polyline?s.pm=new L.PM.Edit.Line(s):s instanceof L.LayerGroup?s.pm=new L.PM.Edit.LayerGroup(s):s instanceof L.ImageOverlay&&(s.pm=new L.PM.Edit.ImageOverlay(s)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick(s){let a=this._map.mouseEventToLayerPoint(s),h,d;for(let _=this._drawFirst;_;_=_.next)h=_.layer,h.options.interactive&&h._containsPoint(a)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(h))&&(d=h);d&&(L.DomEvent.fakeStop(s),this._fireEvent([d],s))}}),L.PM.initialize()})()),Jd}nm();var K0,J0;const uf=(((J0=(K0=import.meta)==null?void 0:K0.env)==null?void 0:J0.VITE_API_BASE_URL)||"").trim();function rm(e){return e?e.endsWith("/")?e.slice(0,-1):e:""}function ys(e){const n=rm(uf),o=e.startsWith("/")?e:`/${e}`,c=o.startsWith("/api/v1")?o:`/api/v1${o}`;return`${n}${c}`}const fh=uf;console.log("[rasterApi] API Base URL:",uf||"(relative via Vite proxy)");async function sm(){const e=await fetch(ys("/aoi")),n=await e.text();if(!e.ok)throw console.error("[rasterApi] fetchGlobalAOI failed:",e.status,n),new Error("Failed to load global AOI");return JSON.parse(n)}async function om({rasterLayerId:e,userClipGeoJSON:n,zoom:o}){const c=await fetch(ys("/rasters/clip"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({raster_layer_id:e,user_clip_geojson:n,zoom:o})}),f=await c.text();if(!c.ok){console.error("[rasterApi] clipRaster failed:",c.status,f);let g="Clip failed";try{const v=JSON.parse(f),E=(v==null?void 0:v.detail)||(v==null?void 0:v.message)||f;c.status===422&&(E.includes("AOI contains no raster data")||E.includes("no raster data for this layer")||E.includes("AOI outside raster extent")||E.includes("AOI too small")||E.includes("no intersect"))?g="AOI doesn't overlap this raster. Try a different area.":g=E}catch{g=f||"Clip failed"}const y=new Error(g);throw y.status=c.status,y.detail=g,y}return f?JSON.parse(f):{}}async function am({rasterLayerId:e,userClipGeoJSON:n,formats:o,filename:c,context:f,overlayUrl:g,aoiName:y,overlayUrls:v}){let E;try{const D={raster_layer_id:e,user_clip_geojson:n,formats:o||[],filename:c||null,context:f||{}};g&&(D.overlay_url=g),y&&(D.aoi_name=y),v&&Array.isArray(v)&&v.length>0&&(D.overlay_urls=v),E=await fetch(ys("/rasters/export"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)})}catch(D){throw console.error("[rasterApi] network error in exportRaster:",D),new Error("Network error while exporting (backend not reachable?)")}const A=await E.text();if(!E.ok)try{const D=JSON.parse(A),P=(D==null?void 0:D.detail)||JSON.stringify(D);throw new Error(`Export failed (${E.status}): ${P}`)}catch{throw new Error(`Export failed (${E.status})`)}return A?JSON.parse(A):{}}async function lm({rasterLayerId:e,lat:n,lng:o}){const c=await fetch(ys("/rasters/sample"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rasterLayerId:e,lon:o,lat:n})}),f=await c.text();if(!c.ok)throw console.error("[rasterApi] sampleRasterValue failed:",c.status,f),new Error("Failed to sample raster value");return f?JSON.parse(f):{}}async function um({rasterLayerId:e,lat:n,lon:o}){const c=ys(`/rasters/value?layer_id=${e}&lat=${n}&lon=${o}`),f=await fetch(c,{method:"GET",headers:{"Content-Type":"application/json"}}),g=await f.text();if(!f.ok)throw console.error("[rasterApi] getRasterValueAt failed:",f.status,g),new Error("Failed to get value at point");return g?JSON.parse(g):{}}async function hm(e){const n=await fetch(ys(`/geopdf/${e}`),{method:"DELETE"}),o=await n.text();if(!n.ok)try{const c=JSON.parse(o),f=(c==null?void 0:c.detail)||JSON.stringify(c);throw new Error(`Delete failed (${n.status}): ${f}`)}catch{throw new Error(`Delete failed (${n.status})`)}return o?JSON.parse(o):{}}async function cm(){const e=await fetch(ys("/datasets")),n=await e.text();if(!e.ok)throw new Error(`Failed to list datasets: ${e.status}`);return n?JSON.parse(n):{}}function fm(e){const n=ys(`/datasets/${e}/download`);window.open(n,"_blank")}async function Yd(e){const n=e.split("/").pop();if(!n)throw new Error("Invalid overlay URL: cannot extract filename");const o=await fetch(ys(`/rasters/overlays/${n}`),{method:"DELETE"}),c=await o.text();if(!o.ok){console.error("[rasterApi] deleteOverlay failed:",o.status,c);try{const f=JSON.parse(c),g=(f==null?void 0:f.detail)||JSON.stringify(f);throw new Error(`Delete failed (${o.status}): ${g}`)}catch{throw new Error(`Delete failed (${o.status})`)}}return c?JSON.parse(c):{}}var Ic={exports:{}},Rc,Qd;function dm(){if(Qd)return Rc;Qd=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Rc=e,Rc}var Oc,t0;function pm(){if(t0)return Oc;t0=1;var e=dm();function n(){}function o(){}return o.resetWarningCache=n,Oc=function(){function c(y,v,E,A,D,P){if(P!==e){var B=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw B.name="Invariant Violation",B}}c.isRequired=c;function f(){return c}var g={array:c,bigint:c,bool:c,func:c,number:c,object:c,string:c,symbol:c,any:c,arrayOf:f,element:c,elementType:c,instanceOf:f,node:c,objectOf:f,oneOf:f,oneOfType:f,shape:f,exact:f,checkPropTypes:o,resetWarningCache:n};return g.PropTypes=g,g},Oc}var e0;function gm(){return e0||(e0=1,Ic.exports=pm()()),Ic.exports}var mm=gm();const Pl=Oh(mm),_m="http://127.0.0.1:8000";function $c({overlayUrl:e,bounds:n}){if(!e||!n)return console.warn("RasterOverlay: Missing overlayUrl or bounds, not rendering"),null;if(typeof n.west!="number"||typeof n.south!="number"||typeof n.east!="number"||typeof n.north!="number")return console.error("RasterOverlay: Invalid bounds structure",n),null;const o=e.startsWith("http")?e:`${_m}${e}`,c=[[n.south,n.west],[n.north,n.east]];return console.log("RasterOverlay: Rendering with bounds:",{west:n.west,south:n.south,east:n.east,north:n.north,leafletBounds:c}),R.jsx(Jg,{url:o,bounds:c,opacity:1,interactive:!1,zIndex:200,className:"vmrc-raster-overlay raster-overlay-pixelated"})}$c.propTypes={overlayUrl:Pl.string,bounds:Pl.shape({north:Pl.number,south:Pl.number,east:Pl.number,west:Pl.number})};function i0(e){var n,o;if(!e)return null;try{let c=[];if(e.type==="FeatureCollection"?c=e.features||[]:e.type==="Feature"?c=[e]:e.type&&e.coordinates&&(c=[{geometry:e}]),c.length===0)return null;const f=(o=(n=c[0])==null?void 0:n.geometry)==null?void 0:o.coordinates;if(!f)return null;const g=v=>Array.isArray(v[0])?v.map(g):v.map(E=>typeof E=="number"?Number(E.toFixed(6)):E),y=g(f);return JSON.stringify(y)}catch(c){return console.warn("[LayerGroupManager] Error computing geometry hash:",c),null}}function ym({globalAoi:e,uploadedAois:n=[],drawnAoi:o,createdRasters:c=[],onRemoveAoi:f,onRemoveRaster:g,onRemoveRasterByAoiId:y}){const v=Ia(),E=Mt.useRef(null),A=Mt.useRef(null),D=Mt.useRef(null),P=Mt.useRef(new Map),B=Mt.useRef(null),W=Mt.useRef(null),J=Mt.useRef(new Map),Z=Mt.useRef(null),q=Mt.useRef(new Map),ct=Mt.useRef(new Map),ft=Mt.useRef(!1),St=Mt.useCallback(()=>{if(!v)return;const ut=st=>{var yt,Ct,oe,Le;if(st===W.current||st.__locked||(yt=st.options)!=null&&yt.__locked)return!1;if((Ct=E.current)!=null&&Ct.hasLayer(st)||(oe=A.current)!=null&&oe.hasLayer(st))return!0;for(const[_e,de]of P.current.entries()){if(de===st)return!0;de.eachLayer&&de.eachLayer(ce=>{if(ce===st)return!0})}return!!(B.current===st||st.__aoiId||(Le=st.options)!=null&&Le.__aoiId)},Bt=[];v.eachLayer(st=>{var oe,Le,_e,de;if(!st.options||!(st instanceof tn.GeoJSON||st instanceof tn.Polygon||st instanceof tn.Rectangle||st instanceof tn.Path)||st.__locked||(oe=st.options)!=null&&oe.__locked||st===W.current||ut(st))return;const yt=((Le=st.options)==null?void 0:Le.pmTempLayer)||((_e=st.options)==null?void 0:_e._pmTempLayer)||st._pmTempLayer,Ct=!!((de=st.options)!=null&&de.dashArray)&&String(st.options.dashArray).length>0;(yt||Ct&&!ut(st))&&Bt.push(st)});for(const st of Bt)try{console.log("[LayerGroupManager] clearPmTempLayers: Removing Geoman temp/hint layer:",st),v.removeLayer(st)}catch(yt){console.warn("[LayerGroupManager] clearPmTempLayers: Error removing temp layer:",yt)}Bt.length>0&&console.log(`[LayerGroupManager] clearPmTempLayers: Cleared ${Bt.length} Geoman temp/hint layer(s)`)},[v]),Tt=Mt.useCallback((ut,Bt,st)=>{if(!ut||!Bt){console.warn("[LayerGroupManager] registerAoiLayer: Missing aoiId or layer");return}Bt.__aoiId=ut,Bt.options.__aoiId=ut,Bt.__locked=!1,J.current.set(ut,Bt),st==="upload"?P.current.set(ut,Bt):st==="draw"&&(B.current=Bt),console.log(`[LayerGroupManager]  Registered AOI layer: aoiId=${ut}, type=${st}`)},[]),Gt=Mt.useCallback((ut,Bt,st)=>{if(!ut||!Bt||!st){console.warn("[LayerGroupManager] registerOverlay: Missing aoiId, overlayLayer, or rasterId");return}const yt=J.current.get(ut);if(!yt){console.warn(`[LayerGroupManager] registerOverlay: AOI layer not found for aoiId=${ut}`);return}Bt.__aoiId=ut,Bt.options.__aoiId=ut,Bt.__createdRasterId=st,ct.current.set(ut,{aoiLayer:yt,overlayLayer:Bt,createdRasterId:st}),console.log(`[PAIR] register overlay: aoiId=${ut}, rasterId=${st}`)},[]),zt=Mt.useCallback(ut=>{var Ct;if(!ut){console.warn("[LayerGroupManager] removeOverlayForAoiId: No aoiId provided");return}const Bt=ct.current.get(ut);if(!Bt){console.log(`[LayerGroupManager] removeOverlayForAoiId: No pair found for aoiId: ${ut}`);return}const{overlayLayer:st,createdRasterId:yt}=Bt;if(console.log(`[LayerGroupManager] removeOverlayForAoiId: Removing overlay only (Raster: ${yt}, AOI: ${ut}) - AOI layer preserved`),st)try{(Ct=D.current)!=null&&Ct.hasLayer(st)&&D.current.removeLayer(st),v.hasLayer&&v.hasLayer(st)&&v.removeLayer(st),console.log("[LayerGroupManager] removeOverlayForAoiId: Removed overlay layer from map")}catch(oe){console.warn("[LayerGroupManager] Error removing overlay:",oe)}return ct.current.delete(ut),y&&ut?(console.log(`[LayerGroupManager] removeOverlayForAoiId: Calling onRemoveRasterByAoiId(${ut}) to remove raster from React state`),y(ut)):g&&yt&&(console.log(`[LayerGroupManager] removeOverlayForAoiId: Calling onRemoveRaster(${yt}) to remove raster from React state`),g(yt)),console.log(`[LayerGroupManager] removeOverlayForAoiId:  Completed overlay removal (Raster: ${yt}, AOI: ${ut}) - AOI layer preserved`),!0},[v,g,y]),Dt=Mt.useCallback(ut=>{var oe,Le,_e,de;if(!ut){console.warn("[LayerGroupManager] deletePairByAoiId: No aoiId provided");return}const Bt=ct.current.get(ut);if(!Bt){console.warn(`[LayerGroupManager] deletePairByAoiId: No pair found for aoiId: ${ut}`),console.warn("[LayerGroupManager] Available keys in pairsRef:",Array.from(ct.current.keys()));return}const{aoiLayer:st,overlayLayer:yt,createdRasterId:Ct}=Bt;if(console.log(`[LayerGroupManager] deletePairByAoiId: Deleting pair (Raster: ${Ct}, AOI: ${ut}) - FULL DELETE`),st!=null&&st.__locked||(oe=st==null?void 0:st.options)!=null&&oe.__locked||st===W.current){console.log("[LayerGroupManager] deletePairByAoiId: Blocked deletion of locked AOI (base AOI)");return}if(yt)try{(Le=D.current)!=null&&Le.hasLayer(yt)&&D.current.removeLayer(yt),v.hasLayer&&v.hasLayer(yt)&&v.removeLayer(yt),console.log("[LayerGroupManager] deletePairByAoiId: Removed overlay layer from map")}catch(ce){console.warn("[LayerGroupManager] Error removing overlay:",ce)}if(st&&v.hasLayer&&v.hasLayer(st))try{(_e=E.current)!=null&&_e.hasLayer(st)?E.current.removeLayer(st):(de=A.current)!=null&&de.hasLayer(st)?A.current.removeLayer(st):v.removeLayer(st),console.log("[LayerGroupManager] deletePairByAoiId: Removed AOI layer from map")}catch(ce){console.warn("[LayerGroupManager] Error removing AOI layer:",ce)}return ct.current.delete(ut),P.current.has(ut)&&P.current.delete(ut),B.current===st&&(B.current=null),J.current.delete(ut),y&&ut?(console.log(`[LayerGroupManager] deletePairByAoiId: Calling onRemoveRasterByAoiId(${ut}) to remove raster from React state`),y(ut)):g&&Ct&&(console.log(`[LayerGroupManager] deletePairByAoiId: Calling onRemoveRaster(${Ct}) to remove raster from React state`),g(Ct)),f&&ut&&(console.log(`[LayerGroupManager] deletePairByAoiId: Calling onRemoveAoi(${ut}) to remove AOI from React state`),f(ut)),console.log(`[LayerGroupManager] deletePairByAoiId:  Completed FULL deletion of pair (Raster: ${Ct}, AOI: ${ut})`),!0},[v,f,g,y]);return Mt.useCallback(ut=>{var st,yt,Ct;if(!ut)return;if(ut.__locked||(st=ut.options)!=null&&st.__locked||ut===W.current){console.log("[LayerGroupManager] deletePairByAoiLayer: Blocked deletion of locked AOI (base AOI)");return}const Bt=ut.__aoiId||((yt=ut.options)==null?void 0:yt.__aoiId);if(!Bt){console.warn("[LayerGroupManager] deletePairByAoiLayer: AOI layer has no __aoiId");for(const[oe,Le]of P.current.entries())if(Le===ut){Dt(oe);return}if(B.current===ut){const oe=(Ct=ut.options)==null?void 0:Ct.__aoiKey;oe&&f&&f(oe)}return}Dt(Bt)},[Dt,f]),Mt.useEffect(()=>{if(v){if(!v.getPane("baseAoiPane")){const ut=v.createPane("baseAoiPane");ut.style.zIndex=350,ut.style.pointerEvents="none",console.log("[LayerGroupManager] Created baseAoiPane (zIndex: 350, pointerEvents: none)")}if(!v.getPane("userAoiPane")){const ut=v.createPane("userAoiPane");ut.style.zIndex=450,console.log("[LayerGroupManager] Created userAoiPane (zIndex: 450)")}if(!v.getPane("rasterPane")){const ut=v.createPane("rasterPane");ut.style.zIndex=200,console.log("[LayerGroupManager] Created rasterPane (zIndex: 200)")}E.current||(E.current=tn.layerGroup().addTo(v),console.log("[LayerGroupManager] Created uploadedAoiLayerGroup")),A.current||(A.current=tn.layerGroup().addTo(v),console.log("[LayerGroupManager] Created drawnAoiLayerGroup")),D.current||(D.current=tn.layerGroup().addTo(v),console.log("[LayerGroupManager] Created overlayLayerGroup"))}},[v]),Mt.useEffect(()=>{if(!v)return;const ut=()=>{console.log("[LayerGroupManager] pm:create - clearing temp layers"),St()},Bt=()=>{console.log("[LayerGroupManager] pm:drawend - clearing temp layers"),St()},st=Ct=>{Ct.enabled||(console.log("[LayerGroupManager] pm:globaldrawmodetoggled (disabled) - clearing temp layers"),St())},yt=Ct=>{Ct.enabled&&(console.log("[LayerGroupManager] pm:globalremovalmodetoggled (enabled) - clearing temp layers"),St())};return v.on("pm:create",ut),v.on("pm:drawend",Bt),v.on("pm:globaldrawmodetoggled",st),v.on("pm:globalremovalmodetoggled",yt),()=>{v.off("pm:create",ut),v.off("pm:drawend",Bt),v.off("pm:globaldrawmodetoggled",st),v.off("pm:globalremovalmodetoggled",yt)}},[v,St]),Mt.useEffect(()=>{if(!v)return;const ut=Bt=>{var Ct,oe,Le,_e,de;const st=Bt.layer;if(!st)return;if(st.__locked||(Ct=st.options)!=null&&Ct.__locked||st===W.current){console.log("[LayerGroupManager] pm:remove: Blocked removal of locked layer (AOI_diss)"),(oe=Bt.preventDefault)==null||oe.call(Bt);return}const yt=st.__aoiId||((Le=st.options)==null?void 0:Le.__aoiId)||((de=(_e=st.feature)==null?void 0:_e.properties)==null?void 0:de.__aoiId);if(!yt){console.warn("[LayerGroupManager] pm:remove: Layer has no __aoiId, cannot delete pair"),console.warn("[LayerGroupManager] Available keys in pairsRef:",Array.from(ct.current.keys()));return}console.log("[PAIR] erase",yt,st._leaflet_id),Dt(yt)};return v.on("pm:remove",ut),()=>{v.off("pm:remove",ut)}},[v,Dt]),Mt.useEffect(()=>{if(!v)return;const ut=st=>{ft.current=!!st.enabled,console.log(`[LayerGroupManager] Removal mode ${ft.current?"enabled":"disabled"}`)};v.on("pm:globalremovalmodetoggled",ut);const Bt=st=>{if(!ft.current||!(st!=null&&st.latlng)||!Number.isFinite(st.latlng.lat)||!Number.isFinite(st.latlng.lng))return;const yt=st.latlng;D.current&&D.current.eachLayer(Ct=>{var Le,_e,de,ce,At;let oe=null;if(Ct.__bounds)try{oe=tn.latLngBounds(Ct.__bounds)}catch{oe=(Le=Ct.getBounds)==null?void 0:Le.call(Ct)}else oe=(_e=Ct.getBounds)==null?void 0:_e.call(Ct);if(!oe){const Qt=((de=Ct.options)==null?void 0:de.__overlayId)||Ct._leaflet_id;console.warn(`[LayerGroupManager] Overlay ${Qt} has no bounds, skipping erase check`);return}try{if(!oe.isValid||!oe.isValid())return;if(oe.contains(yt)){const Qt=Ct.__aoiId||((ce=Ct.options)==null?void 0:ce.__aoiId);if(!Qt){const Rt=((At=Ct.options)==null?void 0:At.__overlayId)||Ct._leaflet_id;console.warn(`[LayerGroupManager] erase click hit overlay ${Rt} but no aoiId found`);return}console.log("[LayerGroupManager]  Erase click hit overlay - deleting pair",{overlayAoiId:Qt,overlayId:Ct._leaflet_id,rasterId:Ct.__createdRasterId}),Dt(Qt);return}}catch(Qt){console.warn("[LayerGroupManager] Error checking bounds for overlay:",Qt)}})};return v.on("click",Bt),()=>{v.off("pm:globalremovalmodetoggled",ut),v.off("click",Bt)}},[v,Dt]),Mt.useEffect(()=>{if(v){if(W.current&&(v.removeLayer(W.current),W.current=null),e){const ut=tn.geoJSON(e,{style:{color:"#00BFFF",weight:3,fillColor:"#00BFFF",fillOpacity:.05},pane:"baseAoiPane",interactive:!1,pmIgnore:!0});ut.options.__locked=!0,ut.__locked=!0,ut.options.pmIgnore=!0,ut._pmIgnore=!0,ut.pm&&ut.pm.disable(),ut.eachLayer&&ut.eachLayer(Bt=>{Bt.options.__locked=!0,Bt.__locked=!0,Bt.options.pmIgnore=!0,Bt.options.interactive=!1,Bt._pmIgnore=!0,Bt.pm&&Bt.pm.disable()}),ut.addTo(v),W.current=ut,console.log("[LayerGroupManager] Added AOI_diss directly to map:",{interactive:ut.options.interactive,pmIgnore:ut.options.pmIgnore,__locked:ut.options.__locked,pane:ut.options.pane})}return()=>{W.current&&(v.removeLayer(W.current),W.current=null)}}},[v,e]),Mt.useEffect(()=>{if(!v||!E.current)return;const ut=new Set(n.map(st=>st.id)),Bt=new Set(P.current.keys());Bt.forEach(st=>{if(!ut.has(st)){const yt=P.current.get(st);if(yt)if(n.length>0||Bt.size===1)console.log(`[LayerGroupManager] Explicit removal of uploaded AOI ${st} - deleting pair`),Dt(st);else{console.log(`[LayerGroupManager] Skipping removal of uploaded AOI ${st} - may be temporary re-render (array empty)`);return}else E.current.hasLayer(yt)&&E.current.removeLayer(yt),P.current.delete(st),J.current.delete(st)}}),n.forEach(st=>{if(!P.current.has(st.id)&&st.geojson){const yt=tn.geoJSON(st.geojson,{style:{color:"#f97316",weight:2,fillOpacity:.15},pane:"userAoiPane",interactive:!0,pmIgnore:!1});yt.options.__aoiKey=st.id,yt.options.__aoiType="uploaded",yt.options.__aoiId=st.id,yt.__aoiId=st.id,yt.__locked=!1,yt.eachLayer?yt.eachLayer(Ct=>{Ct.options.__aoiKey=st.id,Ct.options.__aoiType="uploaded",Ct.options.__aoiId=st.id,Ct.__aoiId=st.id,Ct.__locked=!1,Ct.options.interactive=!0,Ct.options.pmIgnore=!1,Ct.pm&&Ct.pm.disable()}):yt.pm&&yt.pm.disable(),E.current.addLayer(yt),P.current.set(st.id,yt),J.current.set(st.id,yt),Tt(st.id,yt,"upload"),console.log(`[LayerGroupManager] Added uploaded AOI layer: ${st.id}`)}})},[v,n,Dt]),Mt.useEffect(()=>{var oe,Le;if(!v||!A.current)return;const ut=!!B.current,Bt=o&&o.geojson,st=Z.current&&Z.current.geojson,yt=!o&&st&&ut;let Ct=!1;if(Bt&&ut){const _e=B.current.__aoiId||((oe=B.current.options)==null?void 0:oe.__aoiId),de=o.id;if(_e===de){const ce=q.current.get(_e),At=i0(o.geojson);ce&&At?(Ct=ce!==At,Ct||console.log(`[LayerGroupManager] Drawn AOI ${_e} geometry unchanged (same hash) - skipping replace`)):Ct=!0}else Ct=!0}else Bt&&!ut&&(Ct=!0);if(ut&&(Bt&&Ct||yt)){const _e=B.current.__aoiId||((Le=B.current.options)==null?void 0:Le.__aoiId);if(_e&&(Bt&&Ct?(console.log(`[LayerGroupManager] Replacing drawn AOI ${_e} with new geometry - removing old overlay only`),zt(_e)):yt&&(console.log(`[LayerGroupManager] Explicit removal of drawn AOI ${_e} - full delete`),Dt(_e),q.current.delete(_e)),J.current.delete(_e)),B.current&&A.current.hasLayer(B.current))try{A.current.removeLayer(B.current)}catch(de){console.warn("[LayerGroupManager] Error removing drawn layer:",de)}B.current=null}if(o&&o.geojson){const _e=tn.geoJSON(o.geojson,{style:{color:"#2563eb",weight:3,fillColor:"#2563eb",fillOpacity:.1,dashArray:"5, 5"},pane:"userAoiPane",interactive:!0,pmIgnore:!1});_e.options.__aoiKey=o.id,_e.options.__aoiType="drawn",_e.options.__aoiId=o.id,_e.__aoiId=o.id,_e.__locked=!1,_e.eachLayer?_e.eachLayer(ce=>{ce.options.__aoiKey=o.id,ce.options.__aoiType="drawn",ce.options.__aoiId=o.id,ce.__aoiId=o.id,ce.__locked=!1,ce.options.interactive=!0,ce.options.pmIgnore=!1,ce.pm&&ce.pm.disable()}):_e.pm&&_e.pm.disable(),A.current.addLayer(_e),B.current=_e,J.current.set(o.id,_e),Tt(o.id,_e,"draw");const de=i0(o.geojson);de&&q.current.set(o.id,de),console.log(`[LayerGroupManager] Added drawn AOI layer: ${o.id}`)}else ut&&!Bt&&!yt&&console.log("[LayerGroupManager] Preserving drawn AOI layer - drawnAoi is temporarily null (likely re-render, not explicit removal)");Z.current=o},[v,o,Dt,zt,Tt]),Mt.useEffect(()=>{if(console.log("[LayerGroupManager]  useEffect createdRasters triggered - count:",(c==null?void 0:c.length)||0),!v||!D.current)return;const ut=new Set(c.map(yt=>yt.id));for(const[yt,Ct]of ct.current.entries())ut.has(Ct.createdRasterId)||(ct.current.delete(yt),Ct.overlayLayer&&D.current.hasLayer(Ct.overlayLayer)&&(D.current.removeLayer(Ct.overlayLayer),v.removeLayer(Ct.overlayLayer)),console.log(`[LayerGroupManager] Removed raster overlay pair: ${Ct.createdRasterId}`));const Bt=ct.current.size>0,st=c.length===0&&Bt;if(c.length===0)if(st){console.trace("[CLEAR_OVERLAYS] LayerGroupManager - createdRasters is empty AND pairs exist - explicit clear"),ct.current.clear(),D.current.clearLayers(),console.log("[LayerGroupManager] Cleared all overlay pairs and layers (explicit user action)");return}else{console.log("[LayerGroupManager] Preserving overlays - createdRasters is empty but no pairs exist (likely remount/re-render)");return}for(const yt of c){if(!yt.overlayUrl||!yt.overlayBounds){console.warn(`[LayerGroupManager] Skipping raster ${yt.id}: missing overlayUrl or overlayBounds`);continue}const Ct=yt.aoiId;Ct&&ct.current.has(Ct)&&(console.log(`[LayerGroupManager] Replacing overlay for AOI ${Ct} (regenerating with new filters)`),zt(Ct));const Le=yt.overlayUrl.startsWith("http")?yt.overlayUrl:`http://127.0.0.1:8000${yt.overlayUrl}`;let _e;if(Array.isArray(yt.overlayBounds)&&yt.overlayBounds.length===2){const[At,Qt]=yt.overlayBounds;if(!At||!Qt||!Array.isArray(At)||!Array.isArray(Qt)||At.length<2||Qt.length<2||!Number.isFinite(At[0])||!Number.isFinite(At[1])||!Number.isFinite(Qt[0])||!Number.isFinite(Qt[1])){console.warn(`[LayerGroupManager] Invalid bounds array format for raster ${yt.id}:`,yt.overlayBounds);continue}_e=yt.overlayBounds}else if(yt.overlayBounds.south!==void 0){const{south:At,west:Qt,north:Rt,east:rt}=yt.overlayBounds;if(!Number.isFinite(At)||!Number.isFinite(Qt)||!Number.isFinite(Rt)||!Number.isFinite(rt)){console.warn(`[LayerGroupManager] Invalid bounds object format for raster ${yt.id}:`,yt.overlayBounds);continue}_e=[[At,Qt],[Rt,rt]]}else{console.warn(`[LayerGroupManager] Invalid bounds format for raster ${yt.id}:`,yt.overlayBounds);continue}try{if(!tn.latLngBounds(_e).isValid()){console.warn(`[LayerGroupManager] Invalid Leaflet bounds for raster ${yt.id}:`,_e);continue}}catch(At){console.warn(`[LayerGroupManager] Error validating bounds for raster ${yt.id}:`,At);continue}const de=tn.imageOverlay(Le,_e,{opacity:1,interactive:!1,pane:"rasterPane",className:"raster-overlay-pixelated"});de.options.__overlayId=yt.id,de._pmIgnore=!0,de.__bounds=_e,D.current.addLayer(de);const ce=Ct;ce?Gt(ce,de,yt.id):console.warn(`[LayerGroupManager]  Could not register overlay for raster ${yt.id}: missing aoiId`)}},[v,c,Gt,zt]),Mt.useEffect(()=>{v&&(v._layerGroups={uploaded:E.current,drawn:A.current,overlay:D.current},v._clearPmTempLayers=St,v._clearGeomanTempLayers=St)},[v,St]),null}delete tn.Icon.Default.prototype._getIconUrl;tn.Icon.Default.mergeOptions({iconRetinaUrl:Rg,iconUrl:Og,shadowUrl:Dg});function vm({onUserClipChange:e,onRemoveAoi:n,aois:o=[],onDrawStart:c=null,onClearDrawnAoi:f=null,lastDrawnAoiRef:g,onAoiErased:y=null}){const v=Ia(),E=Mt.useRef(null),A=Mt.useRef([]),D=Mt.useRef(o.length),P=Mt.useRef(null),B=Mt.useCallback(()=>{if(v){if(P.current){console.log(" Removing previous AOI geometry layer");try{v.removeLayer(P.current)}catch{console.log("Previous AOI layer already removed or not on map")}P.current=null}E.current=null}},[v]),W=Mt.useCallback(()=>{v&&(console.log(" Clearing drawn AOI geometry layers"),B(),A.current=[],f&&f())},[v,f,B]);return Mt.useEffect(()=>{if(!v||v.pmInitialized)return;v.pmInitialized=!0,v.pm.addControls({position:"topleft",drawPolygon:!0,drawRectangle:!0,removalMode:!0,drawMarker:!1,drawCircle:!1,drawPolyline:!1,drawCircleMarker:!1,drawText:!1,editControls:!0,editMode:!1,dragMode:!1,rotateMode:!1,cutPolygon:!1}),setTimeout(()=>{if(v.pm&&v.pm.Toolbar)try{v.pm.Toolbar.removeControl("Text"),v.pm.Toolbar.removeControl("RotateMode"),v.pm.Toolbar.removeControl("Cut"),v.pm.Toolbar.removeControl("EditMode"),v.pm.Toolbar.removeControl("editMode"),v.pm.Toolbar.removeControl("edit");const Z=["RemovalMode","removalMode","Remove","Delete","Erase"];let q=null;for(const ct of Z)try{const ft=v.pm.Toolbar.getControl(ct);if(ft){q=ft,console.log(` RemovalMode (erase) control found as "${ct}"`);break}}catch{}if(!q){try{const ct=v.pm.Toolbar._toolbars;console.warn(" RemovalMode control not found. Available controls:",Object.keys(ct||{}))}catch{console.warn(" Could not list available controls")}console.warn(" Make sure removalMode: true is set in addControls()")}}catch(Z){console.warn("Error managing Geoman toolbar controls:",Z)}},200);const J=Z=>{console.log(" PM DRAW START  Clearing old drawn AOI geometry"),B(),W()};return v.on("pm:drawstart",J),v.on("pm:globaldrawmodetoggled",Z=>{Z.enabled&&(Z.shape==="Polygon"||Z.shape==="Rectangle")&&(console.log(" PM DRAW MODE TOGGLED  Clearing old drawn AOI geometry"),W())}),v.on("pm:create",Z=>{console.log("[BaseMap] pm:create fired");const q=Z.layer;if(P.current&&P.current!==q){console.log(" Removing previous AOI layer before storing new one");try{v.removeLayer(P.current)}catch{console.log("Previous AOI layer already removed")}}P.current=q,E.current=q,A.current.push(q);const ct=`drawn-${Date.now()}`;q.__aoiId=ct,q.options&&(q.options.__aoiId=ct);const ft=q.toGeoJSON(),St=ft.type==="FeatureCollection"?ft.features[0]:ft;St&&(St.properties={...St.properties||{},__aoiId:ct,__aoiType:"draw"});const Tt=ft.type==="FeatureCollection"?{...ft,features:ft.features.map(Gt=>({...Gt,properties:{...Gt.properties||{},__aoiId:ct,__aoiType:"draw"}}))}:{type:"FeatureCollection",features:[{...ft,properties:{...ft.properties||{},__aoiId:ct,__aoiType:"draw"}}]};g&&(g.current=Tt,console.log("[MapTools]  Saved drawn AOI to persistent ref:",ct)),console.log(" PM CREATE  Clearing overlays (new AOI created)"),c&&c("draw-start"),e(Tt)}),v.on("pm:update",Z=>{var ct,ft;const q=Z.layer;if(q===P.current||q===E.current){console.log(" PM UPDATE FIRED  DRAWN AOI EDITED");const St=q.__aoiId||((ct=q.options)==null?void 0:ct.__aoiId);St||console.warn("[MapTools] pm:update: Layer has no __aoiId, cannot preserve aoiId");const Tt=q.toGeoJSON(),Gt=Tt.type==="FeatureCollection"?Tt.features[0]:Tt;Gt&&St&&(Gt.properties={...Gt.properties||{},__aoiId:St,__aoiType:"draw"});const zt=Tt.type==="FeatureCollection"?{...Tt,features:Tt.features.map(Dt=>{var ut;return{...Dt,properties:{...Dt.properties||{},__aoiId:St||((ut=Dt.properties)==null?void 0:ut.__aoiId),__aoiType:"draw"}}})}:{type:"FeatureCollection",features:[{...Tt,properties:{...Tt.properties||{},__aoiId:St||((ft=Tt.properties)==null?void 0:ft.__aoiId),__aoiType:"draw"}}]};g&&(g.current=zt,console.log("[MapTools]  Updated drawn AOI in persistent ref")),e(zt)}}),v.on("pm:remove",Z=>{var ct,ft;console.log(" PM REMOVE FIRED  LAYER REMOVED");const q=Z.layer;if(q.options&&q.options.__locked){console.warn("[MapTools] Attempted to remove locked layer (AOI_diss) - blocked"),(ct=Z.preventDefault)==null||ct.call(Z);return}if(q===E.current||q===P.current){console.log("[MapTools] Removing drawn AOI layer - clearing persistent ref");const St=q.__aoiId||((ft=q.options)==null?void 0:ft.__aoiId);E.current=null,P.current=null,g&&(g.current=null),St&&y&&(console.log("[MapTools] Calling onAoiErased with aoiId:",St),y(St)),e(null)}}),()=>{v.off("pm:drawstart",J),v.off("pm:globaldrawmodetoggled")}},[v,e,c,W]),Mt.useEffect(()=>{o.length>D.current&&D.current>0&&(console.log(" New AOIs detected (likely import) - clearing old drawn geometry"),W()),D.current=o.length},[o.length,W]),null}const xm=[{color:"#006400",label:"010"},{color:"#228B22",label:"1020"},{color:"#9ACD32",label:"2030"},{color:"#FFD700",label:"3040"},{color:"#FFA500",label:"4050"},{color:"#FF8C00",label:"5060"},{color:"#FF6B00",label:"6070"},{color:"#FF4500",label:"7080"},{color:"#DC143C",label:"8090"},{color:"#B22222",label:"90100"}];function wm(){const e=Ia(),n=Mt.useRef(null),o=Mt.useRef(null);return Mt.useEffect(()=>{if(!e||n.current)return;const c=tn.Control.extend({onAdd:function(g){const y=tn.DomUtil.create("div","leaflet-control vmrc-legend");y.style.pointerEvents="none",y.style.zIndex="1000",o.current=y;const v=`
          <div class="legend-card">
            <div class="legend-title">Value (%)</div>
            ${xm.map(E=>`
              <div class="legend-row">
                <span class="legend-swatch" style="background-color: ${E.color}; pointer-events: none;"></span>
                <span class="legend-label" style="pointer-events: none;">${E.label}</span>
              </div>
            `).join("")}
          </div>
        `;return y.innerHTML=v,y},onRemove:function(g){}}),f=new c({position:"topleft"});f.addTo(e),n.current=f},[e]),null}function Mm({onMapReady:e}){const n=Ia();return Mt.useEffect(()=>{n&&e&&e(n)},[n,e]),null}function Em({overlayUrl:e,overlayBounds:n}){const o=Ia(),c=Mt.useRef(null),f=Mt.useRef(null),g=750,y=e&&n;Mt.useEffect(()=>{if(!o)return;if(!y){c.current&&(o.removeControl(c.current),c.current=null,f.current=null);return}if(c.current)return;const E=tn.Control.extend({onAdd:function(D){const P=tn.DomUtil.create("div","leaflet-control zoom-resolution-indicator");return P.style.pointerEvents="none",P.style.zIndex="1000",f.current=P,P},onRemove:function(D){}}),A=new E({position:"bottomright"});A.addTo(o),c.current=A},[o,y]);const v=Mt.useCallback(()=>{if(!f.current||!y)return;const E=o.getZoom(),A=o.getCenter(),D=156543.03392*Math.cos(A.lat*Math.PI/180)/Math.pow(2,E),P=g/D;let B;P<=30?B="good":P<=80?B="warning":B="error";const J={good:{color:"#10b981",text:"True to size",label:"GOOD"},warning:{color:"#f59e0b",text:"Getting blocky",label:"WARNING"},error:{color:"#ef4444",text:"Too zoomed in  pixels huge",label:"ERROR"}}[B];f.current.innerHTML=`
      <div class="zoom-resolution-badge zoom-resolution-${B}" style="border-left-color: ${J.color}; pointer-events: none;">
        <div class="zoom-resolution-label" style="color: ${J.color}; pointer-events: none;">
          ${J.label}
        </div>
        <div class="zoom-resolution-text" style="pointer-events: none;">
          ${J.text}
        </div>
        <div class="zoom-resolution-size" style="pointer-events: none;">
          ${P.toFixed(0)}px/pixel
        </div>
      </div>
    `},[o,y]);return Mt.useEffect(()=>{v()},[v]),Mt.useEffect(()=>{if(f.current)return o.on("zoomend",v),()=>{o.off("zoomend",v)}},[o,v]),null}function Lm({activeRasterId:e,overlayBounds:n,onSample:o}){return Kg({async click(c){if(!(c!=null&&c.latlng)||!Number.isFinite(c.latlng.lat)||!Number.isFinite(c.latlng.lng)||(console.log(" Map clicked:",c.latlng),!e)||!n)return;const{lat:f,lng:g}=c.latlng;try{const y=await lm({rasterLayerId:e,lat:f,lng:g});console.log(" Sample Result from .tif:",y),o({lat:f,lon:g,value:y.value,isNoData:y.is_nodata})}catch(y){console.error(" Sample failed:",y)}}}),null}function Cm(){const e=Ia(),[n,o]=Mt.useState(!1);return Mt.useEffect(()=>{if(!e)return;const c=D=>{o(D.enabled),D.enabled?console.log("[GeomanState] Removal mode enabled - disabling tooltip"):console.log("[GeomanState] Removal mode disabled - enabling tooltip")},f=D=>{o(D.enabled),D.enabled?console.log("[GeomanState] Draw mode enabled - disabling tooltip"):console.log("[GeomanState] Draw mode disabled - enabling tooltip")},g=D=>{o(D.enabled),D.enabled?console.log("[GeomanState] Edit mode enabled - disabling tooltip"):console.log("[GeomanState] Edit mode disabled - enabling tooltip")},y=()=>{o(!0),console.log("[GeomanState] Draw started - disabling tooltip")},v=()=>{const D=e.pm;if(D){const P=D.globalRemovalModeEnabled()||D.globalDrawModeEnabled()||D.globalEditModeEnabled();o(P),P||console.log("[GeomanState] Draw ended and no modes active - enabling tooltip")}else o(!1)},E=()=>{o(!0),setTimeout(()=>{const D=e.pm;if(D){const P=D.globalRemovalModeEnabled()||D.globalDrawModeEnabled()||D.globalEditModeEnabled();o(P)}else o(!1)},100)};e.on("pm:globalremovalmodetoggled",c),e.on("pm:globaldrawmodetoggled",f),e.on("pm:globaleditmodetoggled",g),e.on("pm:drawstart",y),e.on("pm:drawend",v),e.on("pm:remove",E);const A=e.pm;if(A){const D=A.globalRemovalModeEnabled()||A.globalDrawModeEnabled()||A.globalEditModeEnabled();o(D)}return()=>{e.off("pm:globalremovalmodetoggled",c),e.off("pm:globaldrawmodetoggled",f),e.off("pm:globaleditmodetoggled",g),e.off("pm:drawstart",y),e.off("pm:drawend",v),e.off("pm:remove",E)}},[e]),n}function bm({activeRasterId:e,createdRasters:n=[],activeCreatedRasterId:o=null}){const c=Cm();return R.jsx(Sm,{activeRasterId:e,createdRasters:n,activeCreatedRasterId:o,isGeomanBusy:c})}function Sm({activeRasterId:e,createdRasters:n=[],activeCreatedRasterId:o=null,isGeomanBusy:c=!1}){const f=Ia(),[g,y]=Mt.useState(null),[v,E]=Mt.useState(null),[A,D]=Mt.useState(!1),P=Mt.useRef(null),B=Mt.useRef({lat:null,lng:null,timestamp:0}),W=100,J=Mt.useRef(new Map),Z=n.find(Gt=>Gt.id===o)||(n.length>0?n[0]:null),q=(Z==null?void 0:Z.overlayBounds)||null,ct=(Z==null?void 0:Z.activeRasterId)||e,ft=Mt.useCallback((Gt,zt)=>{if(!Number.isFinite(Gt)||!Number.isFinite(zt)||!q)return!1;let Dt,ut,Bt,st;if(Array.isArray(q)&&q.length===2){const[yt,Ct]=q;if(!Array.isArray(yt)||!Array.isArray(Ct)||yt.length<2||Ct.length<2)return!1;Dt=yt[0],ut=yt[1],Bt=Ct[0],st=Ct[1]}else if(q.south!==void 0)Dt=q.south,ut=q.west,Bt=q.north,st=q.east;else return!1;return!Number.isFinite(Dt)||!Number.isFinite(ut)||!Number.isFinite(Bt)||!Number.isFinite(st)?!1:Gt>=Dt&&Gt<=Bt&&zt>=ut&&zt<=st},[q]),St=Gt=>Math.round(Gt*1e4)/1e4,Tt=Mt.useCallback(async(Gt,zt)=>{if(!ct)return null;const Dt=St(Gt),ut=St(zt),Bt=`${Dt},${ut}`,st=J.current.get(Bt);if(st&&Date.now()-st.timestamp<5e3)return st.value;const yt=Date.now();if(yt-B.current.timestamp<W||B.current.lat===Dt&&B.current.lng===ut)return null;B.current={lat:Dt,lng:ut,timestamp:yt};try{const Ct=await um({rasterLayerId:ct,lat:Gt,lon:zt});if(J.current.set(Bt,{value:Ct,timestamp:yt}),J.current.size>100){const oe=J.current.keys().next().value;J.current.delete(oe)}return Ct}catch(Ct){return console.error("[RasterHoverTooltip] Failed to get raster value:",Ct),null}},[ct]);return Mt.useEffect(()=>{if(c&&(y(null),E(null),D(!1),P.current&&f&&f.hasLayer&&f.hasLayer(P.current)))try{f.closePopup(P.current)}catch{}},[c,f]),Mt.useEffect(()=>{if(!f||!ct||!q){if(y(null),E(null),P.current&&f&&f.hasLayer&&f.hasLayer(P.current))try{f.closePopup(P.current)}catch{}return}if(c)return;const Gt=async Dt=>{if(A)return;if(c){y(null),E(null);return}if(!(Dt!=null&&Dt.latlng)||!Number.isFinite(Dt.latlng.lat)||!Number.isFinite(Dt.latlng.lng)){y(null),E(null);return}const ut=Dt.latlng.lat,Bt=Dt.latlng.lng;if(!ft(ut,Bt)){y(null),E(null);return}E({lat:ut,lng:Bt});const st=await Tt(ut,Bt);st&&(st.nodata||st.value===null||st.value===void 0?y(null):y({lat:ut,lng:Bt,value:st.value}))},zt=Dt=>{if(c||!(Dt!=null&&Dt.latlng)||!Number.isFinite(Dt.latlng.lat)||!Number.isFinite(Dt.latlng.lng))return;const ut=Dt.latlng.lat,Bt=Dt.latlng.lng;A?(D(!1),y(null),E(null)):ft(ut,Bt)&&(D(!0),E({lat:ut,lng:Bt}),Tt(ut,Bt).then(st=>{st&&!st.nodata&&st.value!==null&&st.value!==void 0&&y({lat:ut,lng:Bt,value:st.value})}))};return f.on("mousemove",Gt),f.on("click",zt),()=>{f.off("mousemove",Gt),f.off("click",zt)}},[f,ct,q,ft,Tt,A,c]),Mt.useEffect(()=>{if(f){if(c){if(P.current&&f.hasLayer&&f.hasLayer(P.current))try{f.closePopup(P.current)}catch{}return}if(g&&v&&Number.isFinite(v.lat)&&Number.isFinite(v.lng)&&Number.isFinite(g.lat)&&Number.isFinite(g.lng)&&Number.isFinite(g.value)){P.current||(P.current=tn.popup({closeButton:!1,className:"raster-hover-tooltip",offset:[10,10],autoPan:!1}));const Gt=`
        <div class="raster-tooltip-content">
          <div class="raster-tooltip-title">Location Info</div>
          <div class="raster-tooltip-line"><strong>Lat:</strong> ${g.lat.toFixed(4)}</div>
          <div class="raster-tooltip-line"><strong>Lon:</strong> ${g.lng.toFixed(4)}</div>
          <div class="raster-tooltip-line"><strong>Value:</strong> ${g.value.toFixed(2)}%</div>
        </div>
      `;try{P.current.setLatLng([v.lat,v.lng]).setContent(Gt).openOn(f)}catch(zt){console.error("[RasterHoverTooltip] Failed to set tooltip position:",zt),y(null),E(null)}}else if(P.current&&f.hasLayer&&f.hasLayer(P.current))try{f.closePopup(P.current)}catch{}return()=>{if(P.current&&f&&f.hasLayer&&f.hasLayer(P.current))try{f.closePopup(P.current)}catch{}}}},[f,g,v,c]),null}function km({globalAoi:e,uploadedAois:n=[],aois:o=[],userClip:c,overlayUrl:f=null,overlayBounds:g=null,createdRasters:y=[],onUserClipChange:v,onRemoveAoi:E=null,onRemoveRaster:A=null,onRemoveRasterByAoiId:D=null,onDrawStart:P=null,onClearDrawnAoi:B=null,activeRasterId:W,activeCreatedRasterId:J=null,datasetPreview:Z=null,onMapReady:q,onLastDrawnAoiRefReady:ct=null,onAoiErased:ft=null}){const[St,Tt]=Mt.useState(null),Gt=Mt.useRef(null);return Mt.useEffect(()=>{ct&&ct(Gt)},[ct]),console.log("[BaseMap]  MapContainer rendering - createdRasters:",(y==null?void 0:y.length)||0,"overlayUrl:",!!f),R.jsx("div",{className:"map-container",children:R.jsxs(tm,{center:[44,-123],zoom:7,scrollWheelZoom:!0,className:"vmrc-map",style:{width:"100%",height:"100%"},children:[R.jsxs(Tl,{position:"topright",children:[R.jsx(Tl.BaseLayer,{checked:!0,name:"Topographic",children:R.jsx(Tc,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"})}),R.jsx(Tl.BaseLayer,{name:"Satellite (Esri)",children:R.jsx(Tc,{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"})}),R.jsx(Tl.BaseLayer,{name:"Dark",children:R.jsx(Tc,{url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png"})})]}),R.jsx(ym,{globalAoi:e,uploadedAois:n.filter(zt=>zt.type==="upload"),drawnAoi:o.find(zt=>zt.type==="draw")||null,createdRasters:y,onRemoveAoi:E,onRemoveRaster:A,onRemoveRasterByAoiId:D}),f&&g&&(!y||y.length===0)&&(o.length===0||!o.some(zt=>zt.overlayUrl&&zt.overlayBounds))&&R.jsx($c,{overlayUrl:f,bounds:g}),Z&&Z.preview_url&&Z.preview_bounds&&R.jsx($c,{overlayUrl:Z.preview_url,bounds:Z.preview_bounds}),R.jsx(vm,{onUserClipChange:v,onRemoveAoi:E,aois:o,onDrawStart:P,onClearDrawnAoi:B}),R.jsx(wm,{}),R.jsx(Em,{overlayUrl:f,overlayBounds:g}),R.jsx(Mm,{onMapReady:q}),R.jsx(Lm,{activeRasterId:W,overlayBounds:g,onSample:Tt}),R.jsx(bm,{activeRasterId:W,createdRasters:y,activeCreatedRasterId:J||(y.length>0?y[0].id:null)}),St&&!St.isNoData&&R.jsx(em,{position:[St.lat,St.lon],children:R.jsx(im,{permanent:!0,direction:"top",offset:[0,-18],className:"inspect-tooltip",children:R.jsxs("div",{className:"inspect-tooltip-inner",children:[R.jsx("div",{className:"inspect-title",children:"Location Info"}),R.jsxs("div",{className:"inspect-line",children:[R.jsx("strong",{children:"Lat:"})," ",St.lat.toFixed(4)]}),R.jsxs("div",{className:"inspect-line",children:[R.jsx("strong",{children:"Lon:"})," ",St.lon.toFixed(4)]}),R.jsxs("div",{className:"inspect-line",children:[R.jsx("strong",{children:"Value:"})," ",St.value.toFixed(2)]})]})})})]})})}var op={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},n0=ms.createContext&&ms.createContext(op),Pm=["attr","size","title"];function Am(e,n){if(e==null)return{};var o=Bm(e,n),c,f;if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(f=0;f<g.length;f++)c=g[f],!(n.indexOf(c)>=0)&&Object.prototype.propertyIsEnumerable.call(e,c)&&(o[c]=e[c])}return o}function Bm(e,n){if(e==null)return{};var o={};for(var c in e)if(Object.prototype.hasOwnProperty.call(e,c)){if(n.indexOf(c)>=0)continue;o[c]=e[c]}return o}function Mh(){return Mh=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(e[c]=o[c])}return e},Mh.apply(this,arguments)}function r0(e,n){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);n&&(c=c.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),o.push.apply(o,c)}return o}function Eh(e){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?arguments[n]:{};n%2?r0(Object(o),!0).forEach(function(c){Tm(e,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r0(Object(o)).forEach(function(c){Object.defineProperty(e,c,Object.getOwnPropertyDescriptor(o,c))})}return e}function Tm(e,n,o){return n=Im(n),n in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,e}function Im(e){var n=Rm(e,"string");return typeof n=="symbol"?n:n+""}function Rm(e,n){if(typeof e!="object"||!e)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var c=o.call(e,n);if(typeof c!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function ap(e){return e&&e.map((n,o)=>ms.createElement(n.tag,Eh({key:o},n.attr),ap(n.child)))}function Fh(e){return n=>ms.createElement(Om,Mh({attr:Eh({},e.attr)},n),ap(e.child))}function Om(e){var n=o=>{var{attr:c,size:f,title:g}=e,y=Am(e,Pm),v=f||o.size||"1em",E;return o.className&&(E=o.className),e.className&&(E=(E?E+" ":"")+e.className),ms.createElement("svg",Mh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},o.attr,c,y,{className:E,style:Eh(Eh({color:e.color||o.color},o.style),e.style),height:v,width:v,xmlns:"http://www.w3.org/2000/svg"}),g&&ms.createElement("title",null,g),e.children)};return n0!==void 0?ms.createElement(n0.Consumer,null,o=>n(o)):n(op)}function Dm(e){return Fh({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 18 9 12 15 6"},child:[]}]})(e)}function Nm(e){return Fh({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 18 15 12 9 6"},child:[]}]})(e)}function Fm({width:e=350,children:n}){const[o,c]=Mt.useState(!0),f=o?e:0;return R.jsxs(R.Fragment,{children:[R.jsx("div",{className:"sliding-panel",style:{width:`${f}px`,minWidth:`${f}px`},children:o&&R.jsx("div",{className:"sliding-panel-inner",children:n})}),R.jsx("button",{className:"panel-toggle-button",style:{right:o?`calc(18px + ${e}px)`:"18px"},onClick:()=>c(g=>!g),"aria-label":"Toggle side panel",children:o?R.jsx(Nm,{size:20}):R.jsx(Dm,{size:20})})]})}const s0=["010","1020","2030","3040","4050","5060","6070","7080","8090","90100"],Gm=["#006400","#228B22","#9ACD32","#FFD700","#FFA500","#FF8C00","#FF6B00","#FF4500","#DC143C","#B22222"];function zm({values:e,pixels:n,pixelValues:o,stats:c,histogram:f}){let g,y,v;if(f&&Array.isArray(f.counts)&&f.counts.length===10){g=f.counts.map(Z=>Number(Z)||0),y=Number(f.total_valid_pixels)||0;const W=Number(f.pixels_in_range)||g.reduce((Z,q)=>Z+q,0);if(Array.isArray(f.percentages)&&f.percentages.length===10)v=f.percentages.map(Z=>Number(Z)||0),console.log("[HistogramPanel] Using backend-provided percentages");else{const Z=W||g.reduce((q,ct)=>q+ct,0)||1;v=g.map(q=>q/Z*100),console.log("[HistogramPanel] Computing percentages from counts")}console.log("[HistogramPanel] Using backend histogram (matches map overlay exactly)"),console.log("[HistogramPanel] Backend histogram counts:",g),console.log("[HistogramPanel] Backend histogram percentages:",v.map(Z=>`${Z.toFixed(2)}%`)),console.log("[HistogramPanel] Total valid pixels:",y),console.log("[HistogramPanel] Pixels in [0, 100] range:",W),console.log("[HistogramPanel] Sum of bins:",g.reduce((Z,q)=>Z+q,0));const J=g.reduce((Z,q)=>Z+q,0);J!==W&&W>0?console.warn(`[HistogramPanel] Backend histogram mismatch: sum=${J}, pixels_in_range=${W}`):console.log(`[HistogramPanel]  Bin count verified: sum=${J} equals pixels in range`)}else{const W=e??n??o??[];if(!W||W.length===0)return R.jsx("div",{className:"panel-body",children:R.jsx("p",{style:{color:"#64748b",fontSize:13},children:"No data available. Draw a clip region."})});const J=[-9999,-32768,null,void 0],Z=W.map(st=>Number(st)).filter(st=>Number.isFinite(st)&&st!==null&&st!==void 0&&!J.includes(st));if(!Z.length)return R.jsx("div",{className:"panel-body",children:R.jsx("p",{style:{color:"#64748b",fontSize:13},children:"No numeric data available."})});const q=Math.min(...Z),ct=Math.max(...Z),ft=c==null?void 0:c.min,St=c==null?void 0:c.max,Tt=ft??q,Gt=St??ct,zt=Gt<=1.5&&Tt>=0,Dt=zt?Z.map(st=>Math.max(0,Math.min(100,st*100))):Z.map(st=>Math.max(0,Math.min(100,st)));console.log("[HistogramPanel] Computing histogram from pixel values (fallback)"),console.log("[HistogramPanel] Debug Info:",{inputCount:W.length,numericCount:Z.length,nodataFiltered:W.length-Z.length,valueRange:{min:q,max:ct},statsRange:c?{min:ft,max:St}:null,detectedRange:{min:Tt,max:Gt},needsScaling:zt,scaledRange:{min:Math.min(...Dt),max:Math.max(...Dt)}}),g=new Array(10).fill(0),Dt.forEach(st=>{const yt=Math.max(0,Math.min(100,st)),Ct=yt===100?9:Math.max(0,Math.min(9,Math.floor(yt/10)));g[Ct]+=1}),y=Dt.length;const ut=g.reduce((st,yt)=>st+yt,0);ut!==y?console.warn(`[HistogramPanel] Bin count mismatch: sum=${ut}, input=${y}`):console.log(`[HistogramPanel]  Bin count verified: sum=${ut} equals input count`),console.log("[HistogramPanel] Used values range:",{min:Math.min(...Dt),max:Math.max(...Dt)});const Bt=g.reduce((st,yt)=>st+yt,0)||1;v=g.map(st=>st/Bt*100)}const E=180,A=44,D=10,P=2,B=[0,25,50,75,100];return R.jsxs("div",{className:"panel-body",style:{padding:12,width:"100%"},children:[R.jsx("h3",{style:{color:"#111827",fontSize:25,fontWeight:700,marginBottom:0},children:"Histogram"}),R.jsx("div",{style:{background:"#fff",border:"1px solid #e5e7eb",borderRadius:0,padding:"6px 10px 10px 0px"},children:R.jsxs("div",{style:{display:"flex",alignItems:"stretch",gap:D},children:[R.jsxs("div",{style:{width:A,position:"relative",height:E,flexShrink:0},children:[B.map(W=>{const J=E-W/100*E;return R.jsxs("div",{style:{position:"absolute",top:J-7,right:0,fontSize:10,color:"#6b7280",fontWeight:600},children:[W,"%"]},W)}),R.jsx("div",{style:{position:"absolute",left:-34,top:"50%",transform:"rotate(-90deg) translateX(50%)",transformOrigin:"left center",fontSize:11,color:"#374151",fontWeight:700,whiteSpace:"nowrap"}})]}),R.jsxs("div",{style:{flex:1,minWidth:0},children:[R.jsxs("div",{style:{position:"relative",height:E,borderLeft:"1px solid #9ca3af",borderBottom:"1px solid #9ca3af",paddingLeft:0,paddingBottom:0},children:[B.slice(1).map(W=>R.jsx("div",{style:{position:"absolute",left:0,right:0,bottom:`${W/100*E}px`,height:1,background:"#e5e7eb",opacity:.9,pointerEvents:"none"}},W)),R.jsx("div",{style:{position:"absolute",left:0,right:0,bottom:0,top:0,display:"flex",alignItems:"flex-end",gap:P,padding:"0 2px 0 2px"},children:v.map((W,J)=>{const Z=Math.max(2,W/100*E);return R.jsx("div",{style:{flex:1,height:Z,background:Gm[J],borderRadius:0,cursor:"pointer"},title:`${s0[J]}: ${W.toFixed(2)}% (${g[J]} pixels)`,onMouseEnter:q=>q.currentTarget.style.opacity="0.85",onMouseLeave:q=>q.currentTarget.style.opacity="1"},J)})})]}),R.jsx("div",{style:{display:"flex",gap:P,marginTop:6,padding:"0 2px"},children:s0.map((W,J)=>R.jsx("div",{style:{flex:1,textAlign:"center",fontSize:9,color:"#6b7280",fontWeight:600,lineHeight:1.1},children:W},J))}),R.jsx("div",{style:{textAlign:"center",marginTop:8,fontSize:11,color:"#374151",fontWeight:700},children:"Value Range (%)"})]})]})})]})}function jm({stats:e,values:n,rasterName:o,rasterPath:c}){var ct;const f=Array.isArray(n)?n.map(ft=>Number(ft)).filter(ft=>Number.isFinite(ft)):[],g=f.length>0,y=e&&typeof e=="object";if(!g&&!y)return R.jsx("div",{className:"panel-body",children:R.jsx("p",{style:{color:"#64748b",fontSize:13},children:"No statistics available. Draw a clip region and generate a map."})});let v={};if(g){const ft=[...f].sort((Bt,st)=>Bt-st),St=ft.length,Gt=ft.reduce((Bt,st)=>Bt+st,0)/St,zt=ft.reduce((Bt,st)=>Bt+Math.pow(st-Gt,2),0)/St,Dt=Math.sqrt(zt),ut=(Bt,st)=>{if(Bt.length===0)return null;const yt=st/100*(Bt.length-1),Ct=Math.floor(yt),oe=Math.ceil(yt),Le=yt-Ct;return Bt[Ct]*(1-Le)+Bt[oe]*Le};v={count:St,min:ft[0],max:ft[ft.length-1],mean:Gt,std:Dt,median:ut(ft,50),p10:ut(ft,10),p25:ut(ft,25),p50:ut(ft,50),p75:ut(ft,75),p90:ut(ft,90)}}const E={...v,...y?e:{}},A=g?{pct70Plus:f.filter(ft=>ft>=70).length/f.length*100,pct50Plus:f.filter(ft=>ft>=50).length/f.length*100,pct30Minus:f.filter(ft=>ft<=30).length/f.length*100}:{pct70Plus:null,pct50Plus:null,pct30Minus:null},D=new Array(10).fill(0);g&&f.forEach(ft=>{const St=Math.max(0,Math.min(100,ft)),Tt=St===100?9:Math.max(0,Math.min(9,Math.floor(St/10)));D[Tt]+=1});const P=D.reduce((ft,St)=>ft+St,0)||1,B=Math.max(...D),W=D.indexOf(B),J=W===9?"90100":`${W*10}${(W+1)*10}`,Z=B/P*100,q=(ft,St=2)=>ft==null||isNaN(ft)?"--":Number(ft).toFixed(St);return R.jsxs("div",{className:"panel-body",style:{padding:"12px",width:"100%"},children:[R.jsx("h3",{style:{color:"#111827",fontSize:20,fontWeight:700,marginBottom:16},children:"Statistics Summary"}),R.jsxs("div",{style:{marginBottom:20,padding:"12px",background:"#f9fafb",border:"1px solid #e5e7eb",borderRadius:0},children:[R.jsx("h4",{style:{color:"#374151",fontSize:13,fontWeight:700,marginBottom:4,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Raster Overview"}),R.jsx("p",{style:{fontSize:11,color:"#9ca3af",marginBottom:10,marginTop:0,lineHeight:1.4},children:"Information about the raster dataset being analyzed."}),R.jsx("div",{style:{fontSize:12,color:"#6b7280",lineHeight:1.8},children:R.jsxs("div",{children:[R.jsx("strong",{style:{color:"#374151"},children:"Raster Name:"})," ",o||"(not provided)"]})})]}),R.jsxs("div",{style:{marginBottom:20,padding:"12px",background:"#f9fafb",border:"1px solid #e5e7eb",borderRadius:0},children:[R.jsx("h4",{style:{color:"#374151",fontSize:13,fontWeight:700,marginBottom:4,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Area Summary (Within Selected AOI)"}),R.jsx("p",{style:{fontSize:11,color:"#9ca3af",marginBottom:12,marginTop:0,lineHeight:1.4},children:"Statistical measures computed from all pixel values within the selected area of interest."}),R.jsx("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12},children:R.jsxs("tbody",{children:[R.jsxs("tr",{children:[R.jsx("td",{style:{padding:"6px 8px",color:"#6b7280",fontWeight:600},children:"Total Pixels"}),R.jsx("td",{style:{padding:"6px 8px",textAlign:"right",color:"#111827",fontWeight:600},children:((ct=E.count)==null?void 0:ct.toLocaleString())||"--"})]}),R.jsxs("tr",{children:[R.jsx("td",{style:{padding:"6px 8px",color:"#6b7280",fontWeight:600},children:"Minimum Value"}),R.jsx("td",{style:{padding:"6px 8px",textAlign:"right",color:"#111827",fontWeight:600},children:q(E.min)})]}),R.jsxs("tr",{children:[R.jsx("td",{style:{padding:"6px 8px",color:"#6b7280",fontWeight:600},children:"Maximum Value"}),R.jsx("td",{style:{padding:"6px 8px",textAlign:"right",color:"#111827",fontWeight:600},children:q(E.max)})]}),R.jsxs("tr",{children:[R.jsx("td",{style:{padding:"6px 8px",color:"#6b7280",fontWeight:600},children:"Average (Mean)"}),R.jsx("td",{style:{padding:"6px 8px",textAlign:"right",color:"#111827",fontWeight:600},children:q(E.mean)})]}),R.jsxs("tr",{children:[R.jsx("td",{style:{padding:"6px 8px",color:"#6b7280",fontWeight:600},children:"Median Value"}),R.jsx("td",{style:{padding:"6px 8px",textAlign:"right",color:"#111827",fontWeight:600},children:q(E.median)})]}),R.jsxs("tr",{children:[R.jsx("td",{style:{padding:"6px 8px",color:"#6b7280",fontWeight:600},children:"Variability (Std. Dev)"}),R.jsx("td",{style:{padding:"6px 8px",textAlign:"right",color:"#111827",fontWeight:600},children:q(E.std)})]})]})})]}),R.jsxs("div",{style:{marginBottom:20,padding:"12px",background:"#f9fafb",border:"1px solid #e5e7eb",borderRadius:0},children:[R.jsx("h4",{style:{color:"#374151",fontSize:13,fontWeight:700,marginBottom:4,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Area by Threshold"}),R.jsx("p",{style:{fontSize:11,color:"#9ca3af",marginBottom:12,marginTop:0,lineHeight:1.4},children:"Percentage of pixels that fall within specific value ranges."}),R.jsx("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12},children:R.jsxs("tbody",{children:[R.jsxs("tr",{children:[R.jsx("td",{style:{padding:"6px 8px",color:"#6b7280",fontWeight:600},children:"High Values ( 70)"}),R.jsxs("td",{style:{padding:"6px 8px",textAlign:"right",color:"#111827",fontWeight:600},children:[q(A.pct70Plus),"%"]})]}),R.jsxs("tr",{children:[R.jsx("td",{style:{padding:"6px 8px",color:"#6b7280",fontWeight:600},children:"ModerateHigh Values ( 50)"}),R.jsxs("td",{style:{padding:"6px 8px",textAlign:"right",color:"#111827",fontWeight:600},children:[q(A.pct50Plus),"%"]})]}),R.jsxs("tr",{children:[R.jsx("td",{style:{padding:"6px 8px",color:"#6b7280",fontWeight:600},children:"Low Values ( 30)"}),R.jsxs("td",{style:{padding:"6px 8px",textAlign:"right",color:"#111827",fontWeight:600},children:[q(A.pct30Minus),"%"]})]})]})})]}),R.jsxs("div",{style:{marginBottom:20,padding:"12px",background:"#f9fafb",border:"1px solid #e5e7eb",borderRadius:0},children:[R.jsx("h4",{style:{color:"#374151",fontSize:13,fontWeight:700,marginBottom:4,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Most Common Value Range"}),R.jsx("p",{style:{fontSize:11,color:"#9ca3af",marginBottom:12,marginTop:0,lineHeight:1.4},children:"The value range that contains the most pixels in the selected area."}),R.jsx("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12},children:R.jsxs("tbody",{children:[R.jsxs("tr",{children:[R.jsx("td",{style:{padding:"6px 8px",color:"#6b7280",fontWeight:600},children:"Dominant Range"}),R.jsx("td",{style:{padding:"6px 8px",textAlign:"right",color:"#111827",fontWeight:600},children:J})]}),R.jsxs("tr",{children:[R.jsx("td",{style:{padding:"6px 8px",color:"#6b7280",fontWeight:600},children:"Coverage"}),R.jsxs("td",{style:{padding:"6px 8px",textAlign:"right",color:"#111827",fontWeight:600},children:[q(Z),"%"]})]})]})})]})]})}const Um=["#006400","#228B22","#9ACD32","#FFD700","#FFA500","#FF8C00","#FF6B00","#FF4500","#DC143C","#B22222"],Hm=["010","1020","2030","3040","4050","5060","6070","7080","8090","90100"];function Vm({ramp:e}){const n=(e==null?void 0:e.colors)||Um,o=(e==null?void 0:e.labels)||Hm;return R.jsx("div",{style:{display:"flex",height:"20px",borderRadius:"2px",overflow:"hidden",border:"1px solid #e5e7eb",marginTop:"8px"},children:n.map((c,f)=>R.jsx("div",{style:{flex:1,backgroundColor:c,display:"flex",alignItems:"center",justifyContent:"center"},title:o[f]||`${f*10}${(f+1)*10}`},f))})}function Wm({raster:e,isActive:n,onShow:o,onRemove:c}){const f=new Date(e.createdAt),g=f.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),y=f.toLocaleDateString([],{month:"short",day:"numeric"}),v=e.overlayUrl?e.overlayUrl.startsWith("http")?e.overlayUrl:ys(e.overlayUrl):null;return R.jsxs("div",{className:`raster-item ${n?"raster-item-active":""}`,style:{padding:"10px",border:`1px solid ${n?"#2563eb":"#e5e7eb"}`,borderRadius:"4px",backgroundColor:n?"#eff6ff":"#ffffff",marginBottom:"8px"},children:[R.jsx("div",{style:{fontSize:"13px",fontWeight:600,color:"#111827",marginBottom:"8px",wordBreak:"break-word"},children:e.name}),v&&R.jsx("div",{className:"raster-thumbnail-container",onClick:o,style:{cursor:"pointer",marginBottom:"8px"},title:"Click to activate this raster",children:R.jsx("div",{className:"raster-thumbnail-checkerboard",children:R.jsx("img",{src:v,alt:"Raster preview",className:"raster-thumbnail-image",onError:E=>{E.target.style.display="none"}})})}),R.jsx(Vm,{ramp:e.ramp}),R.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"8px"},children:[R.jsxs("div",{style:{fontSize:"11px",color:"#6b7280"},children:[y," ",g]}),R.jsxs("div",{style:{display:"flex",gap:"6px"},children:[R.jsx("button",{onClick:o,style:{padding:"4px 10px",fontSize:"11px",background:n?"#2563eb":"#f3f4f6",color:n?"#ffffff":"#374151",border:"none",borderRadius:"3px",cursor:"pointer",fontWeight:500},disabled:n,children:n?"Active":"Show"}),R.jsx("button",{onClick:c,style:{padding:"4px 10px",fontSize:"11px",background:"#ef4444",color:"#ffffff",border:"none",borderRadius:"3px",cursor:"pointer",fontWeight:500},children:"Remove"})]})]})]})}function $m({rasters:e=[],activeRasterId:n=null,onShowRaster:o,onRemoveRaster:c,onClearAll:f=null}){return e.length===0?R.jsx("div",{style:{padding:"12px",fontSize:"12px",color:"#6b7280",textAlign:"center"},children:"No rasters created yet. Generate a map to add rasters to this list."}):R.jsxs("div",{style:{maxHeight:"400px",overflowY:"auto",padding:"12px"},children:[R.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[R.jsxs("h3",{style:{fontSize:"16px",fontWeight:700,color:"#111827",margin:0},children:["Created Rasters (",e.length,")"]}),f&&R.jsx("button",{onClick:f,style:{padding:"6px 12px",fontSize:"12px",background:"#ef4444",color:"#ffffff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500},title:"Remove all rasters from map and list",children:"Clear All"})]}),e.map(g=>R.jsx(Wm,{raster:g,isActive:g.id===n,onShow:()=>o(g.id),onRemove:()=>c(g.id)},g.id))]})}function Zm({metadata:e,isLoading:n}){const[o,c]=Mt.useState(!1);if(n)return R.jsx("div",{style:{padding:"16px",fontSize:"13px",color:"#6b7280",textAlign:"center"},children:"Loading layer metadata..."});if(!e)return null;const f=()=>{navigator.clipboard.writeText(JSON.stringify(e,null,2)),c(!0),setTimeout(()=>c(!1),2e3)},g=v=>{if(!v||!Array.isArray(v)||v.length!==2)return"N/A";const[[E,A],[D,P]]=v;return`[${E.toFixed(6)}, ${A.toFixed(6)}], [${D.toFixed(6)}, ${P.toFixed(6)}]`},y=v=>{if(!v)return"N/A";try{return new Date(v).toLocaleString()}catch{return v}};return R.jsxs("div",{style:{padding:"16px",backgroundColor:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"4px"},children:[R.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px"},children:[R.jsx("h3",{style:{fontSize:"18px",fontWeight:700,color:"#111827",margin:0},children:e.title||"Layer Info"}),R.jsx("button",{onClick:f,style:{padding:"4px 10px",fontSize:"11px",background:o?"#10b981":"#f3f4f6",color:o?"#ffffff":"#374151",border:"none",borderRadius:"3px",cursor:"pointer",fontWeight:500},children:o?"Copied!":"Copy JSON"})]}),e.summary&&R.jsx("p",{style:{fontSize:"13px",color:"#374151",lineHeight:"1.6",marginBottom:"16px"},children:e.summary}),e.tags&&e.tags.length>0&&R.jsx("div",{style:{marginBottom:"16px"},children:R.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px"},children:e.tags.map((v,E)=>R.jsx("span",{style:{padding:"4px 8px",fontSize:"11px",backgroundColor:"#eff6ff",color:"#1e40af",borderRadius:"3px",fontWeight:500},children:v},E))})}),R.jsx("div",{style:{marginBottom:"16px"},children:R.jsx("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"12px"},children:R.jsxs("tbody",{children:[R.jsxs("tr",{children:[R.jsx("td",{style:{padding:"6px 8px",fontWeight:600,color:"#6b7280",borderBottom:"1px solid #e5e7eb",width:"40%"},children:"Source Type"}),R.jsx("td",{style:{padding:"6px 8px",color:"#111827",borderBottom:"1px solid #e5e7eb"},children:e.source_type||"N/A"})]}),R.jsxs("tr",{children:[R.jsx("td",{style:{padding:"6px 8px",fontWeight:600,color:"#6b7280",borderBottom:"1px solid #e5e7eb"},children:"CRS"}),R.jsx("td",{style:{padding:"6px 8px",color:"#111827",borderBottom:"1px solid #e5e7eb"},children:e.crs||"N/A"})]}),e.bounds&&R.jsxs("tr",{children:[R.jsx("td",{style:{padding:"6px 8px",fontWeight:600,color:"#6b7280",borderBottom:"1px solid #e5e7eb"},children:"Bounds (EPSG:4326)"}),R.jsx("td",{style:{padding:"6px 8px",color:"#111827",borderBottom:"1px solid #e5e7eb",fontFamily:"monospace",fontSize:"11px"},children:g(e.bounds)})]}),e.pixel_size&&R.jsxs("tr",{children:[R.jsx("td",{style:{padding:"6px 8px",fontWeight:600,color:"#6b7280",borderBottom:"1px solid #e5e7eb"},children:"Pixel Size"}),R.jsxs("td",{style:{padding:"6px 8px",color:"#111827",borderBottom:"1px solid #e5e7eb"},children:[e.pixel_size[0].toFixed(1),"m  ",e.pixel_size[1].toFixed(1),"m"]})]}),e.units&&R.jsxs("tr",{children:[R.jsx("td",{style:{padding:"6px 8px",fontWeight:600,color:"#6b7280",borderBottom:"1px solid #e5e7eb"},children:"Units"}),R.jsx("td",{style:{padding:"6px 8px",color:"#111827",borderBottom:"1px solid #e5e7eb"},children:e.units})]}),e.created_at&&R.jsxs("tr",{children:[R.jsx("td",{style:{padding:"6px 8px",fontWeight:600,color:"#6b7280",borderBottom:"1px solid #e5e7eb"},children:"Created"}),R.jsx("td",{style:{padding:"6px 8px",color:"#111827",borderBottom:"1px solid #e5e7eb"},children:y(e.created_at)})]}),e.credits&&R.jsxs("tr",{children:[R.jsx("td",{style:{padding:"6px 8px",fontWeight:600,color:"#6b7280",borderBottom:"1px solid #e5e7eb"},children:"Credits"}),R.jsx("td",{style:{padding:"6px 8px",color:"#111827",borderBottom:"1px solid #e5e7eb"},children:e.credits})]})]})})}),e.stats&&R.jsxs("div",{style:{marginTop:"16px",padding:"12px",backgroundColor:"#f9fafb",borderRadius:"4px"},children:[R.jsx("h4",{style:{fontSize:"13px",fontWeight:700,color:"#111827",marginBottom:"10px"},children:"Statistics"}),R.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px",fontSize:"12px"},children:[e.stats.min!==null&&e.stats.min!==void 0&&R.jsxs(R.Fragment,{children:[R.jsx("div",{style:{color:"#6b7280",fontWeight:600},children:"Min:"}),R.jsx("div",{style:{color:"#111827"},children:e.stats.min.toFixed(2)})]}),e.stats.max!==null&&e.stats.max!==void 0&&R.jsxs(R.Fragment,{children:[R.jsx("div",{style:{color:"#6b7280",fontWeight:600},children:"Max:"}),R.jsx("div",{style:{color:"#111827"},children:e.stats.max.toFixed(2)})]}),e.stats.mean!==null&&e.stats.mean!==void 0&&R.jsxs(R.Fragment,{children:[R.jsx("div",{style:{color:"#6b7280",fontWeight:600},children:"Mean:"}),R.jsx("div",{style:{color:"#111827"},children:e.stats.mean.toFixed(2)})]}),e.stats.std!==null&&e.stats.std!==void 0&&R.jsxs(R.Fragment,{children:[R.jsx("div",{style:{color:"#6b7280",fontWeight:600},children:"Std Dev:"}),R.jsx("div",{style:{color:"#111827"},children:e.stats.std.toFixed(2)})]}),e.stats.nodata!==null&&e.stats.nodata!==void 0&&R.jsxs(R.Fragment,{children:[R.jsx("div",{style:{color:"#6b7280",fontWeight:600},children:"NoData:"}),R.jsx("div",{style:{color:"#111827"},children:e.stats.nodata})]}),e.stats.count!==null&&e.stats.count!==void 0&&R.jsxs(R.Fragment,{children:[R.jsx("div",{style:{color:"#6b7280",fontWeight:600},children:"Valid Pixels:"}),R.jsx("div",{style:{color:"#111827"},children:e.stats.count.toLocaleString()})]})]})]})]})}function qm(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var n=1;n<=60;++n)e("EPSG:"+(32600+n),"+proj=utm +zone="+n+" +datum=WGS84 +units=m"),e("EPSG:"+(32700+n),"+proj=utm +zone="+n+" +south +datum=WGS84 +units=m");e("EPSG:5041","+title=WGS 84 / UPS North (E,N) +proj=stere +lat_0=90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),e("EPSG:5042","+title=WGS 84 / UPS South (E,N) +proj=stere +lat_0=-90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),e.WGS84=e["EPSG:4326"],e["EPSG:3785"]=e["EPSG:3857"],e.GOOGLE=e["EPSG:3857"],e["EPSG:900913"]=e["EPSG:3857"],e["EPSG:102113"]=e["EPSG:3857"]}var ol=1,al=2,Nl=3,Km=4,Zc=5,o0=6378137,Jm=6356752314e-3,a0=.0066943799901413165,yu=484813681109536e-20,Wt=Math.PI/2,Xm=.16666666666666666,Ym=.04722222222222222,Qm=.022156084656084655,ee=1e-10,Ti=.017453292519943295,br=57.29577951308232,hi=Math.PI/4,Eu=Math.PI*2,Vi=3.14159265359,Sr={};Sr.greenwich=0;Sr.lisbon=-9.131906111111;Sr.paris=2.337229166667;Sr.bogota=-74.080916666667;Sr.madrid=-3.687938888889;Sr.rome=12.452333333333;Sr.bern=7.439583333333;Sr.jakarta=106.807719444444;Sr.ferro=-17.666666666667;Sr.brussels=4.367975;Sr.stockholm=18.058277777778;Sr.athens=23.7163375;Sr.oslo=10.722916666667;const t_={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.1},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var l0=/[\s_\-\/\(\)]/g;function Aa(e,n){if(e[n])return e[n];for(var o=Object.keys(e),c=n.toLowerCase().replace(l0,""),f=-1,g,y;++f<o.length;)if(g=o[f],y=g.toLowerCase().replace(l0,""),y===c)return e[g]}function qc(e){var n={},o=e.split("+").map(function(v){return v.trim()}).filter(function(v){return v}).reduce(function(v,E){var A=E.split("=");return A.push(!0),v[A[0].toLowerCase()]=A[1],v},{}),c,f,g,y={proj:"projName",datum:"datumCode",rf:function(v){n.rf=parseFloat(v)},lat_0:function(v){n.lat0=v*Ti},lat_1:function(v){n.lat1=v*Ti},lat_2:function(v){n.lat2=v*Ti},lat_ts:function(v){n.lat_ts=v*Ti},lon_0:function(v){n.long0=v*Ti},lon_1:function(v){n.long1=v*Ti},lon_2:function(v){n.long2=v*Ti},alpha:function(v){n.alpha=parseFloat(v)*Ti},gamma:function(v){n.rectified_grid_angle=parseFloat(v)*Ti},lonc:function(v){n.longc=v*Ti},x_0:function(v){n.x0=parseFloat(v)},y_0:function(v){n.y0=parseFloat(v)},k_0:function(v){n.k0=parseFloat(v)},k:function(v){n.k0=parseFloat(v)},a:function(v){n.a=parseFloat(v)},b:function(v){n.b=parseFloat(v)},r:function(v){n.a=n.b=parseFloat(v)},r_a:function(){n.R_A=!0},zone:function(v){n.zone=parseInt(v,10)},south:function(){n.utmSouth=!0},towgs84:function(v){n.datum_params=v.split(",").map(function(E){return parseFloat(E)})},to_meter:function(v){n.to_meter=parseFloat(v)},units:function(v){n.units=v;var E=Aa(t_,v);E&&(n.to_meter=E.to_meter)},from_greenwich:function(v){n.from_greenwich=v*Ti},pm:function(v){var E=Aa(Sr,v);n.from_greenwich=(E||parseFloat(v))*Ti},nadgrids:function(v){v==="@null"?n.datumCode="none":n.nadgrids=v},axis:function(v){var E="ewnsud";v.length===3&&E.indexOf(v.substr(0,1))!==-1&&E.indexOf(v.substr(1,1))!==-1&&E.indexOf(v.substr(2,1))!==-1&&(n.axis=v)},approx:function(){n.approx=!0},over:function(){n.over=!0}};for(c in o)f=o[c],c in y?(g=y[c],typeof g=="function"?g(f):n[g]=f):n[c]=f;return typeof n.datumCode=="string"&&n.datumCode!=="WGS84"&&(n.datumCode=n.datumCode.toLowerCase()),n.projStr=e,n}class lp{static getId(n){const o=n.find(c=>Array.isArray(c)&&c[0]==="ID");return o&&o.length>=3?{authority:o[1],code:parseInt(o[2],10)}:null}static convertUnit(n,o="unit"){if(!n||n.length<3)return{type:o,name:"unknown",conversion_factor:null};const c=n[1],f=parseFloat(n[2])||null,g=n.find(v=>Array.isArray(v)&&v[0]==="ID"),y=g?{authority:g[1],code:parseInt(g[2],10)}:null;return{type:o,name:c,conversion_factor:f,id:y}}static convertAxis(n){const o=n[1]||"Unknown";let c;const f=o.match(/^\((.)\)$/);if(f){const A=f[1].toUpperCase();if(A==="E")c="east";else if(A==="N")c="north";else if(A==="U")c="up";else throw new Error(`Unknown axis abbreviation: ${A}`)}else c=n[2]?n[2].toLowerCase():"unknown";const g=n.find(A=>Array.isArray(A)&&A[0]==="ORDER"),y=g?parseInt(g[1],10):null,v=n.find(A=>Array.isArray(A)&&(A[0]==="LENGTHUNIT"||A[0]==="ANGLEUNIT"||A[0]==="SCALEUNIT")),E=this.convertUnit(v);return{name:o,direction:c,unit:E,order:y}}static extractAxes(n){return n.filter(o=>Array.isArray(o)&&o[0]==="AXIS").map(o=>this.convertAxis(o)).sort((o,c)=>(o.order||0)-(c.order||0))}static convert(n,o={}){switch(n[0]){case"PROJCRS":o.type="ProjectedCRS",o.name=n[1],o.base_crs=n.find(B=>Array.isArray(B)&&B[0]==="BASEGEOGCRS")?this.convert(n.find(B=>Array.isArray(B)&&B[0]==="BASEGEOGCRS")):null,o.conversion=n.find(B=>Array.isArray(B)&&B[0]==="CONVERSION")?this.convert(n.find(B=>Array.isArray(B)&&B[0]==="CONVERSION")):null;const c=n.find(B=>Array.isArray(B)&&B[0]==="CS");c&&(o.coordinate_system={type:c[1],axis:this.extractAxes(n)});const f=n.find(B=>Array.isArray(B)&&B[0]==="LENGTHUNIT");if(f){const B=this.convertUnit(f);o.coordinate_system.unit=B}o.id=this.getId(n);break;case"BASEGEOGCRS":case"GEOGCRS":o.type="GeographicCRS",o.name=n[1];const g=n.find(B=>Array.isArray(B)&&(B[0]==="DATUM"||B[0]==="ENSEMBLE"));if(g){const B=this.convert(g);g[0]==="ENSEMBLE"?o.datum_ensemble=B:o.datum=B;const W=n.find(J=>Array.isArray(J)&&J[0]==="PRIMEM");W&&W[1]!=="Greenwich"&&(B.prime_meridian={name:W[1],longitude:parseFloat(W[2])})}o.coordinate_system={type:"ellipsoidal",axis:this.extractAxes(n)},o.id=this.getId(n);break;case"DATUM":o.type="GeodeticReferenceFrame",o.name=n[1],o.ellipsoid=n.find(B=>Array.isArray(B)&&B[0]==="ELLIPSOID")?this.convert(n.find(B=>Array.isArray(B)&&B[0]==="ELLIPSOID")):null;break;case"ENSEMBLE":o.type="DatumEnsemble",o.name=n[1],o.members=n.filter(B=>Array.isArray(B)&&B[0]==="MEMBER").map(B=>({type:"DatumEnsembleMember",name:B[1],id:this.getId(B)}));const y=n.find(B=>Array.isArray(B)&&B[0]==="ENSEMBLEACCURACY");y&&(o.accuracy=parseFloat(y[1]));const v=n.find(B=>Array.isArray(B)&&B[0]==="ELLIPSOID");v&&(o.ellipsoid=this.convert(v)),o.id=this.getId(n);break;case"ELLIPSOID":o.type="Ellipsoid",o.name=n[1],o.semi_major_axis=parseFloat(n[2]),o.inverse_flattening=parseFloat(n[3]),n.find(B=>Array.isArray(B)&&B[0]==="LENGTHUNIT")&&this.convert(n.find(B=>Array.isArray(B)&&B[0]==="LENGTHUNIT"),o);break;case"CONVERSION":o.type="Conversion",o.name=n[1],o.method=n.find(B=>Array.isArray(B)&&B[0]==="METHOD")?this.convert(n.find(B=>Array.isArray(B)&&B[0]==="METHOD")):null,o.parameters=n.filter(B=>Array.isArray(B)&&B[0]==="PARAMETER").map(B=>this.convert(B));break;case"METHOD":o.type="Method",o.name=n[1],o.id=this.getId(n);break;case"PARAMETER":o.type="Parameter",o.name=n[1],o.value=parseFloat(n[2]),o.unit=this.convertUnit(n.find(B=>Array.isArray(B)&&(B[0]==="LENGTHUNIT"||B[0]==="ANGLEUNIT"||B[0]==="SCALEUNIT"))),o.id=this.getId(n);break;case"BOUNDCRS":o.type="BoundCRS";const E=n.find(B=>Array.isArray(B)&&B[0]==="SOURCECRS");if(E){const B=E.find(W=>Array.isArray(W));o.source_crs=B?this.convert(B):null}const A=n.find(B=>Array.isArray(B)&&B[0]==="TARGETCRS");if(A){const B=A.find(W=>Array.isArray(W));o.target_crs=B?this.convert(B):null}const D=n.find(B=>Array.isArray(B)&&B[0]==="ABRIDGEDTRANSFORMATION");D?o.transformation=this.convert(D):o.transformation=null;break;case"ABRIDGEDTRANSFORMATION":if(o.type="Transformation",o.name=n[1],o.method=n.find(B=>Array.isArray(B)&&B[0]==="METHOD")?this.convert(n.find(B=>Array.isArray(B)&&B[0]==="METHOD")):null,o.parameters=n.filter(B=>Array.isArray(B)&&(B[0]==="PARAMETER"||B[0]==="PARAMETERFILE")).map(B=>{if(B[0]==="PARAMETER")return this.convert(B);if(B[0]==="PARAMETERFILE")return{name:B[1],value:B[2],id:{authority:"EPSG",code:8656}}}),o.parameters.length===7){const B=o.parameters[6];B.name==="Scale difference"&&(B.value=Math.round((B.value-1)*1e12)/1e6)}o.id=this.getId(n);break;case"AXIS":o.coordinate_system||(o.coordinate_system={type:"unspecified",axis:[]}),o.coordinate_system.axis.push(this.convertAxis(n));break;case"LENGTHUNIT":const P=this.convertUnit(n,"LinearUnit");o.coordinate_system&&o.coordinate_system.axis&&o.coordinate_system.axis.forEach(B=>{B.unit||(B.unit=P)}),P.conversion_factor&&P.conversion_factor!==1&&o.semi_major_axis&&(o.semi_major_axis={value:o.semi_major_axis,unit:P});break;default:o.keyword=n[0];break}return o}}class e_ extends lp{static convert(n,o={}){return super.convert(n,o),o.coordinate_system&&o.coordinate_system.subtype==="Cartesian"&&delete o.coordinate_system,o.usage&&delete o.usage,o}}class i_ extends lp{static convert(n,o={}){super.convert(n,o);const c=n.find(g=>Array.isArray(g)&&g[0]==="CS");c&&(o.coordinate_system={subtype:c[1],axis:this.extractAxes(n)});const f=n.find(g=>Array.isArray(g)&&g[0]==="USAGE");if(f){const g=f.find(E=>Array.isArray(E)&&E[0]==="SCOPE"),y=f.find(E=>Array.isArray(E)&&E[0]==="AREA"),v=f.find(E=>Array.isArray(E)&&E[0]==="BBOX");o.usage={},g&&(o.usage.scope=g[1]),y&&(o.usage.area=y[1]),v&&(o.usage.bbox=v.slice(1))}return o}}function n_(e){return e.find(n=>Array.isArray(n)&&n[0]==="USAGE")?"2019":(e.find(n=>Array.isArray(n)&&n[0]==="CS")||e[0]==="BOUNDCRS"||e[0]==="PROJCRS"||e[0]==="GEOGCRS","2015")}function r_(e){return(n_(e)==="2019"?i_:e_).convert(e)}function s_(e){const n=e.toUpperCase();return n.includes("PROJCRS")||n.includes("GEOGCRS")||n.includes("BOUNDCRS")||n.includes("VERTCRS")||n.includes("LENGTHUNIT")||n.includes("ANGLEUNIT")||n.includes("SCALEUNIT")?"WKT2":(n.includes("PROJCS")||n.includes("GEOGCS")||n.includes("LOCAL_CS")||n.includes("VERT_CS")||n.includes("UNIT"),"WKT1")}var Lu=1,up=2,hp=3,Lh=4,cp=5,hf=-1,o_=/\s/,a_=/[A-Za-z]/,l_=/[A-Za-z84_]/,Gh=/[,\]]/,fp=/[\d\.E\-\+]/;function Uo(e){if(typeof e!="string")throw new Error("not a string");this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=Lu}Uo.prototype.readCharicter=function(){var e=this.text[this.place++];if(this.state!==Lh)for(;o_.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case Lu:return this.neutral(e);case up:return this.keyword(e);case Lh:return this.quoted(e);case cp:return this.afterquote(e);case hp:return this.number(e);case hf:return}};Uo.prototype.afterquote=function(e){if(e==='"'){this.word+='"',this.state=Lh;return}if(Gh.test(e)){this.word=this.word.trim(),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in afterquote yet, index '+this.place)};Uo.prototype.afterItem=function(e){if(e===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=Lu;return}if(e==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=Lu,this.currentObject=this.stack.pop(),this.currentObject||(this.state=hf);return}};Uo.prototype.number=function(e){if(fp.test(e)){this.word+=e;return}if(Gh.test(e)){this.word=parseFloat(this.word),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in number yet, index '+this.place)};Uo.prototype.quoted=function(e){if(e==='"'){this.state=cp;return}this.word+=e};Uo.prototype.keyword=function(e){if(l_.test(e)){this.word+=e;return}if(e==="["){var n=[];n.push(this.word),this.level++,this.root===null?this.root=n:this.currentObject.push(n),this.stack.push(this.currentObject),this.currentObject=n,this.state=Lu;return}if(Gh.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in keyword yet, index '+this.place)};Uo.prototype.neutral=function(e){if(a_.test(e)){this.word=e,this.state=up;return}if(e==='"'){this.word="",this.state=Lh;return}if(fp.test(e)){this.word=e,this.state=hp;return}if(Gh.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in neutral yet, index '+this.place)};Uo.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===hf)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function u_(e){var n=new Uo(e);return n.output()}function Dc(e,n,o){Array.isArray(n)&&(o.unshift(n),n=null);var c=n?{}:e,f=o.reduce(function(g,y){return Il(y,g),g},c);n&&(e[n]=f)}function Il(e,n){if(!Array.isArray(e)){n[e]=!0;return}var o=e.shift();if(o==="PARAMETER"&&(o=e.shift()),e.length===1){if(Array.isArray(e[0])){n[o]={},Il(e[0],n[o]);return}n[o]=e[0];return}if(!e.length){n[o]=!0;return}if(o==="TOWGS84"){n[o]=e;return}if(o==="AXIS"){o in n||(n[o]=[]),n[o].push(e);return}Array.isArray(o)||(n[o]={});var c;switch(o){case"UNIT":case"PRIMEM":case"VERT_DATUM":n[o]={name:e[0].toLowerCase(),convert:e[1]},e.length===3&&Il(e[2],n[o]);return;case"SPHEROID":case"ELLIPSOID":n[o]={name:e[0],a:e[1],rf:e[2]},e.length===4&&Il(e[3],n[o]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":e[0]=["name",e[0]],Dc(n,o,e);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":e[0]=["name",e[0]],Dc(n,o,e),n[o].type=o;return;default:for(c=-1;++c<e.length;)if(!Array.isArray(e[c]))return Il(e,n[o]);return Dc(n,o,e)}}var h_=.017453292519943295;function $s(e){return e*h_}function dp(e){const n=(e.projName||"").toLowerCase().replace(/_/g," ");!e.long0&&e.longc&&(n==="albers conic equal area"||n==="lambert azimuthal equal area")&&(e.long0=e.longc),!e.lat_ts&&e.lat1&&(n==="stereographic south pole"||n==="polar stereographic (variant b)")?(e.lat0=$s(e.lat1>0?90:-90),e.lat_ts=e.lat1,delete e.lat1):!e.lat_ts&&e.lat0&&(n==="polar stereographic"||n==="polar stereographic (variant a)")&&(e.lat_ts=e.lat0,e.lat0=$s(e.lat0>0?90:-90),delete e.lat1)}function u0(e){let n={units:null,to_meter:void 0};return typeof e=="string"?(n.units=e.toLowerCase(),n.units==="metre"&&(n.units="meter"),n.units==="meter"&&(n.to_meter=1)):e&&e.name&&(n.units=e.name.toLowerCase(),n.units==="metre"&&(n.units="meter"),n.to_meter=e.conversion_factor),n}function h0(e){return typeof e=="object"?e.value*e.unit.conversion_factor:e}function c0(e,n){e.ellipsoid.radius?(n.a=e.ellipsoid.radius,n.rf=0):(n.a=h0(e.ellipsoid.semi_major_axis),e.ellipsoid.inverse_flattening!==void 0?n.rf=e.ellipsoid.inverse_flattening:e.ellipsoid.semi_major_axis!==void 0&&e.ellipsoid.semi_minor_axis!==void 0&&(n.rf=n.a/(n.a-h0(e.ellipsoid.semi_minor_axis))))}function Ch(e,n={}){return!e||typeof e!="object"?e:e.type==="BoundCRS"?(Ch(e.source_crs,n),e.transformation&&(e.transformation.method&&e.transformation.method.name==="NTv2"?n.nadgrids=e.transformation.parameters[0].value:n.datum_params=e.transformation.parameters.map(o=>o.value)),n):(Object.keys(e).forEach(o=>{const c=e[o];if(c!==null)switch(o){case"name":if(n.srsCode)break;n.name=c,n.srsCode=c;break;case"type":c==="GeographicCRS"?n.projName="longlat":c==="ProjectedCRS"&&e.conversion&&e.conversion.method&&(n.projName=e.conversion.method.name);break;case"datum":case"datum_ensemble":c.ellipsoid&&(n.ellps=c.ellipsoid.name,c0(c,n)),c.prime_meridian&&(n.from_greenwich=c.prime_meridian.longitude*Math.PI/180);break;case"ellipsoid":n.ellps=c.name,c0(c,n);break;case"prime_meridian":n.long0=(c.longitude||0)*Math.PI/180;break;case"coordinate_system":if(c.axis){if(n.axis=c.axis.map(f=>{const g=f.direction;if(g==="east")return"e";if(g==="north")return"n";if(g==="west")return"w";if(g==="south")return"s";throw new Error(`Unknown axis direction: ${g}`)}).join("")+"u",c.unit){const{units:f,to_meter:g}=u0(c.unit);n.units=f,n.to_meter=g}else if(c.axis[0]&&c.axis[0].unit){const{units:f,to_meter:g}=u0(c.axis[0].unit);n.units=f,n.to_meter=g}}break;case"id":c.authority&&c.code&&(n.title=c.authority+":"+c.code);break;case"conversion":c.method&&c.method.name&&(n.projName=c.method.name),c.parameters&&c.parameters.forEach(f=>{const g=f.name.toLowerCase().replace(/\s+/g,"_"),y=f.value;f.unit&&f.unit.conversion_factor?n[g]=y*f.unit.conversion_factor:f.unit==="degree"?n[g]=y*Math.PI/180:n[g]=y});break;case"unit":c.name&&(n.units=c.name.toLowerCase(),n.units==="metre"&&(n.units="meter")),c.conversion_factor&&(n.to_meter=c.conversion_factor);break;case"base_crs":Ch(c,n),n.datumCode=c.id?c.id.authority+"_"+c.id.code:c.name;break}}),n.latitude_of_false_origin!==void 0&&(n.lat0=n.latitude_of_false_origin),n.longitude_of_false_origin!==void 0&&(n.long0=n.longitude_of_false_origin),n.latitude_of_standard_parallel!==void 0&&(n.lat0=n.latitude_of_standard_parallel,n.lat1=n.latitude_of_standard_parallel),n.latitude_of_1st_standard_parallel!==void 0&&(n.lat1=n.latitude_of_1st_standard_parallel),n.latitude_of_2nd_standard_parallel!==void 0&&(n.lat2=n.latitude_of_2nd_standard_parallel),n.latitude_of_projection_centre!==void 0&&(n.lat0=n.latitude_of_projection_centre),n.longitude_of_projection_centre!==void 0&&(n.longc=n.longitude_of_projection_centre),n.easting_at_false_origin!==void 0&&(n.x0=n.easting_at_false_origin),n.northing_at_false_origin!==void 0&&(n.y0=n.northing_at_false_origin),n.latitude_of_natural_origin!==void 0&&(n.lat0=n.latitude_of_natural_origin),n.longitude_of_natural_origin!==void 0&&(n.long0=n.longitude_of_natural_origin),n.longitude_of_origin!==void 0&&(n.long0=n.longitude_of_origin),n.false_easting!==void 0&&(n.x0=n.false_easting),n.easting_at_projection_centre&&(n.x0=n.easting_at_projection_centre),n.false_northing!==void 0&&(n.y0=n.false_northing),n.northing_at_projection_centre&&(n.y0=n.northing_at_projection_centre),n.standard_parallel_1!==void 0&&(n.lat1=n.standard_parallel_1),n.standard_parallel_2!==void 0&&(n.lat2=n.standard_parallel_2),n.scale_factor_at_natural_origin!==void 0&&(n.k0=n.scale_factor_at_natural_origin),n.scale_factor_at_projection_centre!==void 0&&(n.k0=n.scale_factor_at_projection_centre),n.scale_factor_on_pseudo_standard_parallel!==void 0&&(n.k0=n.scale_factor_on_pseudo_standard_parallel),n.azimuth!==void 0&&(n.alpha=n.azimuth),n.azimuth_at_projection_centre!==void 0&&(n.alpha=n.azimuth_at_projection_centre),n.angle_from_rectified_to_skew_grid&&(n.rectified_grid_angle=n.angle_from_rectified_to_skew_grid),dp(n),n)}var c_=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function f_(e,n){var o=n[0],c=n[1];!(o in e)&&c in e&&(e[o]=e[c],n.length===3&&(e[o]=n[2](e[o])))}function pp(e){for(var n=Object.keys(e),o=0,c=n.length;o<c;++o){var f=n[o];c_.indexOf(f)!==-1&&d_(e[f]),typeof e[f]=="object"&&pp(e[f])}}function d_(e){if(e.AUTHORITY){var n=Object.keys(e.AUTHORITY)[0];n&&n in e.AUTHORITY&&(e.title=n+":"+e.AUTHORITY[n])}if(e.type==="GEOGCS"?e.projName="longlat":e.type==="LOCAL_CS"?(e.projName="identity",e.local=!0):typeof e.PROJECTION=="object"?e.projName=Object.keys(e.PROJECTION)[0]:e.projName=e.PROJECTION,e.AXIS){for(var o="",c=0,f=e.AXIS.length;c<f;++c){var g=[e.AXIS[c][0].toLowerCase(),e.AXIS[c][1].toLowerCase()];g[0].indexOf("north")!==-1||(g[0]==="y"||g[0]==="lat")&&g[1]==="north"?o+="n":g[0].indexOf("south")!==-1||(g[0]==="y"||g[0]==="lat")&&g[1]==="south"?o+="s":g[0].indexOf("east")!==-1||(g[0]==="x"||g[0]==="lon")&&g[1]==="east"?o+="e":(g[0].indexOf("west")!==-1||(g[0]==="x"||g[0]==="lon")&&g[1]==="west")&&(o+="w")}o.length===2&&(o+="u"),o.length===3&&(e.axis=o)}e.UNIT&&(e.units=e.UNIT.name.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.UNIT.convert&&(e.type==="GEOGCS"?e.DATUM&&e.DATUM.SPHEROID&&(e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a):e.to_meter=e.UNIT.convert));var y=e.GEOGCS;e.type==="GEOGCS"&&(y=e),y&&(y.DATUM?e.datumCode=y.DATUM.name.toLowerCase():e.datumCode=y.name.toLowerCase(),e.datumCode.slice(0,2)==="d_"&&(e.datumCode=e.datumCode.slice(2)),e.datumCode==="new_zealand_1949"&&(e.datumCode="nzgd49"),(e.datumCode==="wgs_1984"||e.datumCode==="world_geodetic_system_1984")&&(e.PROJECTION==="Mercator_Auxiliary_Sphere"&&(e.sphere=!0),e.datumCode="wgs84"),e.datumCode==="belge_1972"&&(e.datumCode="rnb72"),y.DATUM&&y.DATUM.SPHEROID&&(e.ellps=y.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),e.ellps.toLowerCase().slice(0,13)==="international"&&(e.ellps="intl"),e.a=y.DATUM.SPHEROID.a,e.rf=parseFloat(y.DATUM.SPHEROID.rf,10)),y.DATUM&&y.DATUM.TOWGS84&&(e.datum_params=y.DATUM.TOWGS84),~e.datumCode.indexOf("osgb_1936")&&(e.datumCode="osgb36"),~e.datumCode.indexOf("osni_1952")&&(e.datumCode="osni52"),(~e.datumCode.indexOf("tm65")||~e.datumCode.indexOf("geodetic_datum_of_1965"))&&(e.datumCode="ire65"),e.datumCode==="ch1903+"&&(e.datumCode="ch1903"),~e.datumCode.indexOf("israel")&&(e.datumCode="isr93")),e.b&&!isFinite(e.b)&&(e.b=e.a),e.rectified_grid_angle&&(e.rectified_grid_angle=$s(e.rectified_grid_angle));function v(D){var P=e.to_meter||1;return D*P}var E=function(D){return f_(e,D)},A=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",$s],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",$s],["x0","false_easting",v],["y0","false_northing",v],["long0","central_meridian",$s],["lat0","latitude_of_origin",$s],["lat0","standard_parallel_1",$s],["lat1","standard_parallel_1",$s],["lat2","standard_parallel_2",$s],["azimuth","Azimuth"],["alpha","azimuth",$s],["srsCode","name"]];A.forEach(E),dp(e)}function bh(e){if(typeof e=="object")return Ch(e);const n=s_(e);var o=u_(e);if(n==="WKT2"){const g=r_(o);return Ch(g)}var c=o[0],f={};return Il(o,f),pp(f),f[c]}function Bn(e){var n=this;if(arguments.length===2){var o=arguments[1];typeof o=="string"?o.charAt(0)==="+"?Bn[e]=qc(arguments[1]):Bn[e]=bh(arguments[1]):o&&typeof o=="object"&&!("projName"in o)?Bn[e]=bh(arguments[1]):(Bn[e]=o,o||delete Bn[e])}else if(arguments.length===1){if(Array.isArray(e))return e.map(function(c){return Array.isArray(c)?Bn.apply(n,c):Bn(c)});if(typeof e=="string"){if(e in Bn)return Bn[e]}else"EPSG"in e?Bn["EPSG:"+e.EPSG]=e:"ESRI"in e?Bn["ESRI:"+e.ESRI]=e:"IAU2000"in e?Bn["IAU2000:"+e.IAU2000]=e:console.log(e);return}}qm(Bn);function p_(e){return typeof e=="string"}function g_(e){return e in Bn}function m_(e){return e.indexOf("+")!==0&&e.indexOf("[")!==-1||typeof e=="object"&&!("srsCode"in e)}var __=["3857","900913","3785","102113"];function y_(e){var n=Aa(e,"authority");if(n){var o=Aa(n,"epsg");return o&&__.indexOf(o)>-1}}function v_(e){var n=Aa(e,"extension");if(n)return Aa(n,"proj4")}function x_(e){return e[0]==="+"}function w_(e){if(p_(e)){if(g_(e))return Bn[e];if(m_(e)){var n=bh(e);if(y_(n))return Bn["EPSG:3857"];var o=v_(n);return o?qc(o):n}if(x_(e))return qc(e)}else return"projName"in e?e:bh(e)}function f0(e,n){e=e||{};var o,c;if(!n)return e;for(c in n)o=n[c],o!==void 0&&(e[c]=o);return e}function mo(e,n,o){var c=e*n;return o/Math.sqrt(1-c*c)}function Bu(e){return e<0?-1:1}function se(e,n){return n||Math.abs(e)<=Vi?e:e-Bu(e)*Eu}function qs(e,n,o){var c=e*o,f=.5*e;return c=Math.pow((1-c)/(1+c),f),Math.tan(.5*(Wt-n))/c}function Cu(e,n){for(var o=.5*e,c,f,g=Wt-2*Math.atan(n),y=0;y<=15;y++)if(c=e*Math.sin(g),f=Wt-2*Math.atan(n*Math.pow((1-c)/(1+c),o))-g,g+=f,Math.abs(f)<=1e-10)return g;return-9999}function M_(){var e=this.b/this.a;this.es=1-e*e,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=mo(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function E_(e){var n=e.x,o=e.y;if(o*br>90&&o*br<-90&&n*br>180&&n*br<-180)return null;var c,f;if(Math.abs(Math.abs(o)-Wt)<=ee)return null;if(this.sphere)c=this.x0+this.a*this.k0*se(n-this.long0,this.over),f=this.y0+this.a*this.k0*Math.log(Math.tan(hi+.5*o));else{var g=Math.sin(o),y=qs(this.e,o,g);c=this.x0+this.a*this.k0*se(n-this.long0,this.over),f=this.y0-this.a*this.k0*Math.log(y)}return e.x=c,e.y=f,e}function L_(e){var n=e.x-this.x0,o=e.y-this.y0,c,f;if(this.sphere)f=Wt-2*Math.atan(Math.exp(-o/(this.a*this.k0)));else{var g=Math.exp(-o/(this.a*this.k0));if(f=Cu(this.e,g),f===-9999)return null}return c=se(this.long0+n/(this.a*this.k0),this.over),e.x=c,e.y=f,e}var C_=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","Mercator_Variant_A","merc"];const b_={init:M_,forward:E_,inverse:L_,names:C_};function S_(){}function d0(e){return e}var gp=["longlat","identity"];const k_={init:S_,forward:d0,inverse:d0,names:gp};var P_=[b_,k_],sl={},Rl=[];function mp(e,n){var o=Rl.length;return e.names?(Rl[o]=e,e.names.forEach(function(c){sl[c.toLowerCase()]=o}),this):(console.log(n),!0)}function _p(e){return e.replace(/[-\(\)\s]+/g," ").trim().replace(/ /g,"_")}function A_(e){if(!e)return!1;var n=e.toLowerCase();if(typeof sl[n]<"u"&&Rl[sl[n]]||(n=_p(n),n in sl&&Rl[sl[n]]))return Rl[sl[n]]}function B_(){P_.forEach(mp)}const T_={start:B_,add:mp,get:A_};var yp={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"},andrae:{a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"},clrk80:{a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:63558348467e-4,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"},WGS84:{a:6378137,rf:298.257223563,ellipseName:"WGS 84"},sphere:{a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}};const I_=yp.WGS84;function R_(e,n,o,c){var f=e*e,g=n*n,y=(f-g)/f,v=0;c?(e*=1-y*(Xm+y*(Ym+y*Qm)),f=e*e,y=0):v=Math.sqrt(y);var E=(f-g)/g;return{es:y,e:v,ep2:E}}function O_(e,n,o,c,f){if(!e){var g=Aa(yp,c);g||(g=I_),e=g.a,n=g.b,o=g.rf}return o&&!n&&(n=(1-1/o)*e),(o===0||Math.abs(e-n)<ee)&&(f=!0,n=e),{a:e,b:n,rf:o,sphere:f}}var _h={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},EPSG_5451:{towgs84:"6.41,-49.05,-11.28,1.5657,0.5242,6.9718,-5.7649"},IGNF_LURESG:{towgs84:"-192.986,13.673,-39.309,-0.4099,-2.9332,2.6881,0.43"},EPSG_4614:{towgs84:"-119.4248,-303.65872,-11.00061,1.164298,0.174458,1.096259,3.657065"},EPSG_4615:{towgs84:"-494.088,-312.129,279.877,-1.423,-1.013,1.59,-0.748"},ESRI_37241:{towgs84:"-76.822,257.457,-12.817,2.136,-0.033,-2.392,-0.031"},ESRI_37249:{towgs84:"-440.296,58.548,296.265,1.128,10.202,4.559,-0.438"},ESRI_37245:{towgs84:"-511.151,-181.269,139.609,1.05,2.703,1.798,3.071"},EPSG_4178:{towgs84:"24.9,-126.4,-93.2,-0.063,-0.247,-0.041,1.01"},EPSG_4622:{towgs84:"-472.29,-5.63,-304.12,0.4362,-0.8374,0.2563,1.8984"},EPSG_4625:{towgs84:"126.93,547.94,130.41,-2.7867,5.1612,-0.8584,13.8227"},EPSG_5252:{towgs84:"0.023,0.036,-0.068,0.00176,0.00912,-0.01136,0.00439"},EPSG_4314:{towgs84:"597.1,71.4,412.1,0.894,0.068,-1.563,7.58"},EPSG_4282:{towgs84:"-178.3,-316.7,-131.5,5.278,6.077,10.979,19.166"},EPSG_4231:{towgs84:"-83.11,-97.38,-117.22,0.0276,-0.2167,0.2147,0.1218"},EPSG_4274:{towgs84:"-230.994,102.591,25.199,0.633,-0.239,0.9,1.95"},EPSG_4134:{towgs84:"-180.624,-225.516,173.919,-0.81,-1.898,8.336,16.71006"},EPSG_4254:{towgs84:"18.38,192.45,96.82,0.056,-0.142,-0.2,-0.0013"},EPSG_4159:{towgs84:"-194.513,-63.978,-25.759,-3.4027,3.756,-3.352,-0.9175"},EPSG_4687:{towgs84:"0.072,-0.507,-0.245,0.0183,-0.0003,0.007,-0.0093"},EPSG_4227:{towgs84:"-83.58,-397.54,458.78,-17.595,-2.847,4.256,3.225"},EPSG_4746:{towgs84:"599.4,72.4,419.2,-0.062,-0.022,-2.723,6.46"},EPSG_4745:{towgs84:"612.4,77,440.2,-0.054,0.057,-2.797,2.55"},EPSG_6311:{towgs84:"8.846,-4.394,-1.122,-0.00237,-0.146528,0.130428,0.783926"},EPSG_4289:{towgs84:"565.7381,50.4018,465.2904,-1.91514,1.60363,-9.09546,4.07244"},EPSG_4230:{towgs84:"-68.863,-134.888,-111.49,-0.53,-0.14,0.57,-3.4"},EPSG_4154:{towgs84:"-123.02,-158.95,-168.47"},EPSG_4156:{towgs84:"570.8,85.7,462.8,4.998,1.587,5.261,3.56"},EPSG_4299:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4179:{towgs84:"33.4,-146.6,-76.3,-0.359,-0.053,0.844,-0.84"},EPSG_4313:{towgs84:"-106.8686,52.2978,-103.7239,0.3366,-0.457,1.8422,-1.2747"},EPSG_4194:{towgs84:"163.511,127.533,-159.789"},EPSG_4195:{towgs84:"105,326,-102.5"},EPSG_4196:{towgs84:"-45,417,-3.5"},EPSG_4611:{towgs84:"-162.619,-276.959,-161.764,0.067753,-2.243649,-1.158827,-1.094246"},EPSG_4633:{towgs84:"137.092,131.66,91.475,-1.9436,-11.5993,-4.3321,-7.4824"},EPSG_4641:{towgs84:"-408.809,366.856,-412.987,1.8842,-0.5308,2.1655,-121.0993"},EPSG_4643:{towgs84:"-480.26,-438.32,-643.429,16.3119,20.1721,-4.0349,-111.7002"},EPSG_4300:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4188:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4660:{towgs84:"982.6087,552.753,-540.873,32.39344,-153.25684,-96.2266,16.805"},EPSG_4662:{towgs84:"97.295,-263.247,310.882,-1.5999,0.8386,3.1409,13.3259"},EPSG_3906:{towgs84:"577.88891,165.22205,391.18289,4.9145,-0.94729,-13.05098,7.78664"},EPSG_4307:{towgs84:"-209.3622,-87.8162,404.6198,0.0046,3.4784,0.5805,-1.4547"},EPSG_6892:{towgs84:"-76.269,-16.683,68.562,-6.275,10.536,-4.286,-13.686"},EPSG_4690:{towgs84:"221.597,152.441,176.523,2.403,1.3893,0.884,11.4648"},EPSG_4691:{towgs84:"218.769,150.75,176.75,3.5231,2.0037,1.288,10.9817"},EPSG_4629:{towgs84:"72.51,345.411,79.241,-1.5862,-0.8826,-0.5495,1.3653"},EPSG_4630:{towgs84:"165.804,216.213,180.26,-0.6251,-0.4515,-0.0721,7.4111"},EPSG_4692:{towgs84:"217.109,86.452,23.711,0.0183,-0.0003,0.007,-0.0093"},EPSG_9333:{towgs84:"0,0,0,-8.393,0.749,-10.276,0"},EPSG_9059:{towgs84:"0,0,0"},EPSG_4312:{towgs84:"601.705,84.263,485.227,4.7354,1.3145,5.393,-2.3887"},EPSG_4123:{towgs84:"-96.062,-82.428,-121.753,4.801,0.345,-1.376,1.496"},EPSG_4309:{towgs84:"-124.45,183.74,44.64,-0.4384,0.5446,-0.9706,-2.1365"},ESRI_104106:{towgs84:"-283.088,-70.693,117.445,-1.157,0.059,-0.652,-4.058"},EPSG_4281:{towgs84:"-219.247,-73.802,269.529"},EPSG_4322:{towgs84:"0,0,4.5"},EPSG_4324:{towgs84:"0,0,1.9"},EPSG_4284:{towgs84:"43.822,-108.842,-119.585,1.455,-0.761,0.737,0.549"},EPSG_4277:{towgs84:"446.448,-125.157,542.06,0.15,0.247,0.842,-20.489"},EPSG_4207:{towgs84:"-282.1,-72.2,120,-1.529,0.145,-0.89,-4.46"},EPSG_4688:{towgs84:"347.175,1077.618,2623.677,33.9058,-70.6776,9.4013,186.0647"},EPSG_4689:{towgs84:"410.793,54.542,80.501,-2.5596,-2.3517,-0.6594,17.3218"},EPSG_4720:{towgs84:"0,0,4.5"},EPSG_4273:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},EPSG_4240:{towgs84:"204.64,834.74,293.8"},EPSG_4817:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},ESRI_104131:{towgs84:"426.62,142.62,460.09,4.98,4.49,-12.42,-17.1"},EPSG_4265:{towgs84:"-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68"},EPSG_4263:{towgs84:"-111.92,-87.85,114.5,1.875,0.202,0.219,0.032"},EPSG_4298:{towgs84:"-689.5937,623.84046,-65.93566,-0.02331,1.17094,-0.80054,5.88536"},EPSG_4270:{towgs84:"-253.4392,-148.452,386.5267,0.15605,0.43,-0.1013,-0.0424"},EPSG_4229:{towgs84:"-121.8,98.1,-10.7"},EPSG_4220:{towgs84:"-55.5,-348,-229.2"},EPSG_4214:{towgs84:"12.646,-155.176,-80.863"},EPSG_4232:{towgs84:"-345,3,223"},EPSG_4238:{towgs84:"-1.977,-13.06,-9.993,0.364,0.254,0.689,-1.037"},EPSG_4168:{towgs84:"-170,33,326"},EPSG_4131:{towgs84:"199,931,318.9"},EPSG_4152:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_5228:{towgs84:"572.213,85.334,461.94,4.9732,1.529,5.2484,3.5378"},EPSG_8351:{towgs84:"485.021,169.465,483.839,7.786342,4.397554,4.102655,0"},EPSG_4683:{towgs84:"-127.62,-67.24,-47.04,-3.068,4.903,1.578,-1.06"},EPSG_4133:{towgs84:"0,0,0"},EPSG_7373:{towgs84:"0.819,-0.5762,-1.6446,-0.00378,-0.03317,0.00318,0.0693"},EPSG_9075:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9072:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9294:{towgs84:"1.16835,-1.42001,-2.24431,-0.00822,-0.05508,0.01818,0.23388"},EPSG_4212:{towgs84:"-267.434,173.496,181.814,-13.4704,8.7154,7.3926,14.7492"},EPSG_4191:{towgs84:"-44.183,-0.58,-38.489,2.3867,2.7072,-3.5196,-8.2703"},EPSG_4237:{towgs84:"52.684,-71.194,-13.975,-0.312,-0.1063,-0.3729,1.0191"},EPSG_4740:{towgs84:"-1.08,-0.27,-0.9"},EPSG_4124:{towgs84:"419.3836,99.3335,591.3451,0.850389,1.817277,-7.862238,-0.99496"},EPSG_5681:{towgs84:"584.9636,107.7175,413.8067,1.1155,0.2824,-3.1384,7.9922"},EPSG_4141:{towgs84:"23.772,17.49,17.859,-0.3132,-1.85274,1.67299,-5.4262"},EPSG_4204:{towgs84:"-85.645,-273.077,-79.708,2.289,-1.421,2.532,3.194"},EPSG_4319:{towgs84:"226.702,-193.337,-35.371,-2.229,-4.391,9.238,0.9798"},EPSG_4200:{towgs84:"24.82,-131.21,-82.66"},EPSG_4130:{towgs84:"0,0,0"},EPSG_4127:{towgs84:"-82.875,-57.097,-156.768,-2.158,1.524,-0.982,-0.359"},EPSG_4149:{towgs84:"674.374,15.056,405.346"},EPSG_4617:{towgs84:"-0.991,1.9072,0.5129,1.25033e-7,4.6785e-8,5.6529e-8,0"},EPSG_4663:{towgs84:"-210.502,-66.902,-48.476,2.094,-15.067,-5.817,0.485"},EPSG_4664:{towgs84:"-211.939,137.626,58.3,-0.089,0.251,0.079,0.384"},EPSG_4665:{towgs84:"-105.854,165.589,-38.312,-0.003,-0.026,0.024,-0.048"},EPSG_4666:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},EPSG_4756:{towgs84:"-192.873,-39.382,-111.202,-0.00205,-0.0005,0.00335,0.0188"},EPSG_4723:{towgs84:"-179.483,-69.379,-27.584,-7.862,8.163,6.042,-13.925"},EPSG_4726:{towgs84:"8.853,-52.644,180.304,-0.393,-2.323,2.96,-24.081"},EPSG_4267:{towgs84:"-8.0,160.0,176.0"},EPSG_5365:{towgs84:"-0.16959,0.35312,0.51846,0.03385,-0.16325,0.03446,0.03693"},EPSG_4218:{towgs84:"304.5,306.5,-318.1"},EPSG_4242:{towgs84:"-33.722,153.789,94.959,-8.581,-4.478,4.54,8.95"},EPSG_4216:{towgs84:"-292.295,248.758,429.447,4.9971,2.99,6.6906,1.0289"},ESRI_104105:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},ESRI_104129:{towgs84:"0,0,0"},EPSG_4673:{towgs84:"174.05,-25.49,112.57"},EPSG_4202:{towgs84:"-124,-60,154"},EPSG_4203:{towgs84:"-117.763,-51.51,139.061,0.292,0.443,0.277,-0.191"},EPSG_3819:{towgs84:"595.48,121.69,515.35,4.115,-2.9383,0.853,-3.408"},EPSG_8694:{towgs84:"-93.799,-132.737,-219.073,-1.844,0.648,-6.37,-0.169"},EPSG_4145:{towgs84:"275.57,676.78,229.6"},EPSG_4283:{towgs84:"61.55,-10.87,-40.19,39.4924,32.7221,32.8979,-9.994"},EPSG_4317:{towgs84:"2.3287,-147.0425,-92.0802,-0.3092483,0.32482185,0.49729934,5.68906266"},EPSG_4272:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993"},EPSG_4248:{towgs84:"-307.7,265.3,-363.5"},EPSG_5561:{towgs84:"24,-121,-76"},EPSG_5233:{towgs84:"-0.293,766.95,87.713,0.195704,1.695068,3.473016,-0.039338"},ESRI_104130:{towgs84:"-86,-98,-119"},ESRI_104102:{towgs84:"682,-203,480"},ESRI_37207:{towgs84:"7,-10,-26"},EPSG_4675:{towgs84:"59.935,118.4,-10.871"},ESRI_104109:{towgs84:"-89.121,-348.182,260.871"},ESRI_104112:{towgs84:"-185.583,-230.096,281.361"},ESRI_104113:{towgs84:"25.1,-275.6,222.6"},IGNF_WGS72G:{towgs84:"0,12,6"},IGNF_NTFG:{towgs84:"-168,-60,320"},IGNF_EFATE57G:{towgs84:"-127,-769,472"},IGNF_PGP50G:{towgs84:"324.8,153.6,172.1"},IGNF_REUN47G:{towgs84:"94,-948,-1262"},IGNF_CSG67G:{towgs84:"-186,230,110"},IGNF_GUAD48G:{towgs84:"-467,-16,-300"},IGNF_TAHI51G:{towgs84:"162,117,154"},IGNF_TAHAAG:{towgs84:"65,342,77"},IGNF_NUKU72G:{towgs84:"84,274,65"},IGNF_PETRELS72G:{towgs84:"365,194,166"},IGNF_WALL78G:{towgs84:"253,-133,-127"},IGNF_MAYO50G:{towgs84:"-382,-59,-262"},IGNF_TANNAG:{towgs84:"-139,-967,436"},IGNF_IGN72G:{towgs84:"-13,-348,292"},IGNF_ATIGG:{towgs84:"1118,23,66"},IGNF_FANGA84G:{towgs84:"150.57,158.33,118.32"},IGNF_RUSAT84G:{towgs84:"202.13,174.6,-15.74"},IGNF_KAUE70G:{towgs84:"126.74,300.1,-75.49"},IGNF_MOP90G:{towgs84:"-10.8,-1.8,12.77"},IGNF_MHPF67G:{towgs84:"338.08,212.58,-296.17"},IGNF_TAHI79G:{towgs84:"160.61,116.05,153.69"},IGNF_ANAA92G:{towgs84:"1.5,3.84,4.81"},IGNF_MARQUI72G:{towgs84:"330.91,-13.92,58.56"},IGNF_APAT86G:{towgs84:"143.6,197.82,74.05"},IGNF_TUBU69G:{towgs84:"237.17,171.61,-77.84"},IGNF_STPM50G:{towgs84:"11.363,424.148,373.13"},EPSG_4150:{towgs84:"674.374,15.056,405.346"},EPSG_4754:{towgs84:"-208.4058,-109.8777,-2.5764"},ESRI_104101:{towgs84:"374,150,588"},EPSG_4693:{towgs84:"0,-0.15,0.68"},EPSG_6207:{towgs84:"293.17,726.18,245.36"},EPSG_4153:{towgs84:"-133.63,-157.5,-158.62"},EPSG_4132:{towgs84:"-241.54,-163.64,396.06"},EPSG_4221:{towgs84:"-154.5,150.7,100.4"},EPSG_4266:{towgs84:"-80.7,-132.5,41.1"},EPSG_4193:{towgs84:"-70.9,-151.8,-41.4"},EPSG_5340:{towgs84:"-0.41,0.46,-0.35"},EPSG_4246:{towgs84:"-294.7,-200.1,525.5"},EPSG_4318:{towgs84:"-3.2,-5.7,2.8"},EPSG_4121:{towgs84:"-199.87,74.79,246.62"},EPSG_4223:{towgs84:"-260.1,5.5,432.2"},EPSG_4158:{towgs84:"-0.465,372.095,171.736"},EPSG_4285:{towgs84:"-128.16,-282.42,21.93"},EPSG_4613:{towgs84:"-404.78,685.68,45.47"},EPSG_4607:{towgs84:"195.671,332.517,274.607"},EPSG_4475:{towgs84:"-381.788,-57.501,-256.673"},EPSG_4208:{towgs84:"-157.84,308.54,-146.6"},EPSG_4743:{towgs84:"70.995,-335.916,262.898"},EPSG_4710:{towgs84:"-323.65,551.39,-491.22"},EPSG_7881:{towgs84:"-0.077,0.079,0.086"},EPSG_4682:{towgs84:"283.729,735.942,261.143"},EPSG_4739:{towgs84:"-156,-271,-189"},EPSG_4679:{towgs84:"-80.01,253.26,291.19"},EPSG_4750:{towgs84:"-56.263,16.136,-22.856"},EPSG_4644:{towgs84:"-10.18,-350.43,291.37"},EPSG_4695:{towgs84:"-103.746,-9.614,-255.95"},EPSG_4292:{towgs84:"-355,21,72"},EPSG_4302:{towgs84:"-61.702,284.488,472.052"},EPSG_4143:{towgs84:"-124.76,53,466.79"},EPSG_4606:{towgs84:"-153,153,307"},EPSG_4699:{towgs84:"-770.1,158.4,-498.2"},EPSG_4247:{towgs84:"-273.5,110.6,-357.9"},EPSG_4160:{towgs84:"8.88,184.86,106.69"},EPSG_4161:{towgs84:"-233.43,6.65,173.64"},EPSG_9251:{towgs84:"-9.5,122.9,138.2"},EPSG_9253:{towgs84:"-78.1,101.6,133.3"},EPSG_4297:{towgs84:"-198.383,-240.517,-107.909"},EPSG_4269:{towgs84:"0,0,0"},EPSG_4301:{towgs84:"-147,506,687"},EPSG_4618:{towgs84:"-59,-11,-52"},EPSG_4612:{towgs84:"0,0,0"},EPSG_4678:{towgs84:"44.585,-131.212,-39.544"},EPSG_4250:{towgs84:"-130,29,364"},EPSG_4144:{towgs84:"214,804,268"},EPSG_4147:{towgs84:"-17.51,-108.32,-62.39"},EPSG_4259:{towgs84:"-254.1,-5.36,-100.29"},EPSG_4164:{towgs84:"-76,-138,67"},EPSG_4211:{towgs84:"-378.873,676.002,-46.255"},EPSG_4182:{towgs84:"-422.651,-172.995,84.02"},EPSG_4224:{towgs84:"-143.87,243.37,-33.52"},EPSG_4225:{towgs84:"-205.57,168.77,-4.12"},EPSG_5527:{towgs84:"-67.35,3.88,-38.22"},EPSG_4752:{towgs84:"98,390,-22"},EPSG_4310:{towgs84:"-30,190,89"},EPSG_9248:{towgs84:"-192.26,65.72,132.08"},EPSG_4680:{towgs84:"124.5,-63.5,-281"},EPSG_4701:{towgs84:"-79.9,-158,-168.9"},EPSG_4706:{towgs84:"-146.21,112.63,4.05"},EPSG_4805:{towgs84:"682,-203,480"},EPSG_4201:{towgs84:"-165,-11,206"},EPSG_4210:{towgs84:"-157,-2,-299"},EPSG_4183:{towgs84:"-104,167,-38"},EPSG_4139:{towgs84:"11,72,-101"},EPSG_4668:{towgs84:"-86,-98,-119"},EPSG_4717:{towgs84:"-2,151,181"},EPSG_4732:{towgs84:"102,52,-38"},EPSG_4280:{towgs84:"-377,681,-50"},EPSG_4209:{towgs84:"-138,-105,-289"},EPSG_4261:{towgs84:"31,146,47"},EPSG_4658:{towgs84:"-73,46,-86"},EPSG_4721:{towgs84:"265.025,384.929,-194.046"},EPSG_4222:{towgs84:"-136,-108,-292"},EPSG_4601:{towgs84:"-255,-15,71"},EPSG_4602:{towgs84:"725,685,536"},EPSG_4603:{towgs84:"72,213.7,93"},EPSG_4605:{towgs84:"9,183,236"},EPSG_4621:{towgs84:"137,248,-430"},EPSG_4657:{towgs84:"-28,199,5"},EPSG_4316:{towgs84:"103.25,-100.4,-307.19"},EPSG_4642:{towgs84:"-13,-348,292"},EPSG_4698:{towgs84:"145,-187,103"},EPSG_4192:{towgs84:"-206.1,-174.7,-87.7"},EPSG_4311:{towgs84:"-265,120,-358"},EPSG_4135:{towgs84:"58,-283,-182"},ESRI_104138:{towgs84:"198,-226,-347"},EPSG_4245:{towgs84:"-11,851,5"},EPSG_4142:{towgs84:"-125,53,467"},EPSG_4213:{towgs84:"-106,-87,188"},EPSG_4253:{towgs84:"-133,-77,-51"},EPSG_4129:{towgs84:"-132,-110,-335"},EPSG_4713:{towgs84:"-77,-128,142"},EPSG_4239:{towgs84:"217,823,299"},EPSG_4146:{towgs84:"295,736,257"},EPSG_4155:{towgs84:"-83,37,124"},EPSG_4165:{towgs84:"-173,253,27"},EPSG_4672:{towgs84:"175,-38,113"},EPSG_4236:{towgs84:"-637,-549,-203"},EPSG_4251:{towgs84:"-90,40,88"},EPSG_4271:{towgs84:"-2,374,172"},EPSG_4175:{towgs84:"-88,4,101"},EPSG_4716:{towgs84:"298,-304,-375"},EPSG_4315:{towgs84:"-23,259,-9"},EPSG_4744:{towgs84:"-242.2,-144.9,370.3"},EPSG_4244:{towgs84:"-97,787,86"},EPSG_4293:{towgs84:"616,97,-251"},EPSG_4714:{towgs84:"-127,-769,472"},EPSG_4736:{towgs84:"260,12,-147"},EPSG_6883:{towgs84:"-235,-110,393"},EPSG_6894:{towgs84:"-63,176,185"},EPSG_4205:{towgs84:"-43,-163,45"},EPSG_4256:{towgs84:"41,-220,-134"},EPSG_4262:{towgs84:"639,405,60"},EPSG_4604:{towgs84:"174,359,365"},EPSG_4169:{towgs84:"-115,118,426"},EPSG_4620:{towgs84:"-106,-129,165"},EPSG_4184:{towgs84:"-203,141,53"},EPSG_4616:{towgs84:"-289,-124,60"},EPSG_9403:{towgs84:"-307,-92,127"},EPSG_4684:{towgs84:"-133,-321,50"},EPSG_4708:{towgs84:"-491,-22,435"},EPSG_4707:{towgs84:"114,-116,-333"},EPSG_4709:{towgs84:"145,75,-272"},EPSG_4712:{towgs84:"-205,107,53"},EPSG_4711:{towgs84:"124,-234,-25"},EPSG_4718:{towgs84:"230,-199,-752"},EPSG_4719:{towgs84:"211,147,111"},EPSG_4724:{towgs84:"208,-435,-229"},EPSG_4725:{towgs84:"189,-79,-202"},EPSG_4735:{towgs84:"647,1777,-1124"},EPSG_4722:{towgs84:"-794,119,-298"},EPSG_4728:{towgs84:"-307,-92,127"},EPSG_4734:{towgs84:"-632,438,-609"},EPSG_4727:{towgs84:"912,-58,1227"},EPSG_4729:{towgs84:"185,165,42"},EPSG_4730:{towgs84:"170,42,84"},EPSG_4733:{towgs84:"276,-57,149"},ESRI_37218:{towgs84:"230,-199,-752"},ESRI_37240:{towgs84:"-7,215,225"},ESRI_37221:{towgs84:"252,-209,-751"},ESRI_4305:{towgs84:"-123,-206,219"},ESRI_104139:{towgs84:"-73,-247,227"},EPSG_4748:{towgs84:"51,391,-36"},EPSG_4219:{towgs84:"-384,664,-48"},EPSG_4255:{towgs84:"-333,-222,114"},EPSG_4257:{towgs84:"-587.8,519.75,145.76"},EPSG_4646:{towgs84:"-963,510,-359"},EPSG_6881:{towgs84:"-24,-203,268"},EPSG_6882:{towgs84:"-183,-15,273"},EPSG_4715:{towgs84:"-104,-129,239"},IGNF_RGF93GDD:{towgs84:"0,0,0"},IGNF_RGM04GDD:{towgs84:"0,0,0"},IGNF_RGSPM06GDD:{towgs84:"0,0,0"},IGNF_RGTAAF07GDD:{towgs84:"0,0,0"},IGNF_RGFG95GDD:{towgs84:"0,0,0"},IGNF_RGNCG:{towgs84:"0,0,0"},IGNF_RGPFGDD:{towgs84:"0,0,0"},IGNF_ETRS89G:{towgs84:"0,0,0"},IGNF_RGR92GDD:{towgs84:"0,0,0"},EPSG_4173:{towgs84:"0,0,0"},EPSG_4180:{towgs84:"0,0,0"},EPSG_4619:{towgs84:"0,0,0"},EPSG_4667:{towgs84:"0,0,0"},EPSG_4075:{towgs84:"0,0,0"},EPSG_6706:{towgs84:"0,0,0"},EPSG_7798:{towgs84:"0,0,0"},EPSG_4661:{towgs84:"0,0,0"},EPSG_4669:{towgs84:"0,0,0"},EPSG_8685:{towgs84:"0,0,0"},EPSG_4151:{towgs84:"0,0,0"},EPSG_9702:{towgs84:"0,0,0"},EPSG_4758:{towgs84:"0,0,0"},EPSG_4761:{towgs84:"0,0,0"},EPSG_4765:{towgs84:"0,0,0"},EPSG_8997:{towgs84:"0,0,0"},EPSG_4023:{towgs84:"0,0,0"},EPSG_4670:{towgs84:"0,0,0"},EPSG_4694:{towgs84:"0,0,0"},EPSG_4148:{towgs84:"0,0,0"},EPSG_4163:{towgs84:"0,0,0"},EPSG_4167:{towgs84:"0,0,0"},EPSG_4189:{towgs84:"0,0,0"},EPSG_4190:{towgs84:"0,0,0"},EPSG_4176:{towgs84:"0,0,0"},EPSG_4659:{towgs84:"0,0,0"},EPSG_3824:{towgs84:"0,0,0"},EPSG_3889:{towgs84:"0,0,0"},EPSG_4046:{towgs84:"0,0,0"},EPSG_4081:{towgs84:"0,0,0"},EPSG_4558:{towgs84:"0,0,0"},EPSG_4483:{towgs84:"0,0,0"},EPSG_5013:{towgs84:"0,0,0"},EPSG_5264:{towgs84:"0,0,0"},EPSG_5324:{towgs84:"0,0,0"},EPSG_5354:{towgs84:"0,0,0"},EPSG_5371:{towgs84:"0,0,0"},EPSG_5373:{towgs84:"0,0,0"},EPSG_5381:{towgs84:"0,0,0"},EPSG_5393:{towgs84:"0,0,0"},EPSG_5489:{towgs84:"0,0,0"},EPSG_5593:{towgs84:"0,0,0"},EPSG_6135:{towgs84:"0,0,0"},EPSG_6365:{towgs84:"0,0,0"},EPSG_5246:{towgs84:"0,0,0"},EPSG_7886:{towgs84:"0,0,0"},EPSG_8431:{towgs84:"0,0,0"},EPSG_8427:{towgs84:"0,0,0"},EPSG_8699:{towgs84:"0,0,0"},EPSG_8818:{towgs84:"0,0,0"},EPSG_4757:{towgs84:"0,0,0"},EPSG_9140:{towgs84:"0,0,0"},EPSG_8086:{towgs84:"0,0,0"},EPSG_4686:{towgs84:"0,0,0"},EPSG_4737:{towgs84:"0,0,0"},EPSG_4702:{towgs84:"0,0,0"},EPSG_4747:{towgs84:"0,0,0"},EPSG_4749:{towgs84:"0,0,0"},EPSG_4674:{towgs84:"0,0,0"},EPSG_4755:{towgs84:"0,0,0"},EPSG_4759:{towgs84:"0,0,0"},EPSG_4762:{towgs84:"0,0,0"},EPSG_4763:{towgs84:"0,0,0"},EPSG_4764:{towgs84:"0,0,0"},EPSG_4166:{towgs84:"0,0,0"},EPSG_4170:{towgs84:"0,0,0"},EPSG_5546:{towgs84:"0,0,0"},EPSG_7844:{towgs84:"0,0,0"},EPSG_4818:{towgs84:"589,76,480"}};for(var D_ in _h){var Nc=_h[D_];Nc.datumName&&(_h[Nc.datumName]=Nc)}function N_(e,n,o,c,f,g,y){var v={};return e===void 0||e==="none"?v.datum_type=Zc:v.datum_type=Km,n&&(v.datum_params=n.map(parseFloat),(v.datum_params[0]!==0||v.datum_params[1]!==0||v.datum_params[2]!==0)&&(v.datum_type=ol),v.datum_params.length>3&&(v.datum_params[3]!==0||v.datum_params[4]!==0||v.datum_params[5]!==0||v.datum_params[6]!==0)&&(v.datum_type=al,v.datum_params[3]*=yu,v.datum_params[4]*=yu,v.datum_params[5]*=yu,v.datum_params[6]=v.datum_params[6]/1e6+1)),y&&(v.datum_type=Nl,v.grids=y),v.a=o,v.b=c,v.es=f,v.ep2=g,v}var cf={};function F_(e,n,o){return n instanceof ArrayBuffer?G_(e,n,o):{ready:z_(e,n)}}function G_(e,n,o){var c=!0;o!==void 0&&o.includeErrorFields===!1&&(c=!1);var f=new DataView(n),g=H_(f),y=V_(f,g),v=W_(f,y,g,c),E={header:y,subgrids:v};return cf[e]=E,E}async function z_(e,n){for(var o=[],c=await n.getImageCount(),f=c-1;f>=0;f--){var g=await n.getImage(f),y=await g.readRasters(),v=y,E=[g.getWidth(),g.getHeight()],A=g.getBoundingBox().map(p0),D=[g.fileDirectory.ModelPixelScale[0],g.fileDirectory.ModelPixelScale[1]].map(p0),P=A[0]+(E[0]-1)*D[0],B=A[3]-(E[1]-1)*D[1],W=v[0],J=v[1],Z=[];for(let ft=E[1]-1;ft>=0;ft--)for(let St=E[0]-1;St>=0;St--){var q=ft*E[0]+St;Z.push([-ba(J[q]),ba(W[q])])}o.push({del:D,lim:E,ll:[-P,B],cvs:Z})}var ct={header:{nSubgrids:c},subgrids:o};return cf[e]=ct,ct}function j_(e){if(e===void 0)return null;var n=e.split(",");return n.map(U_)}function U_(e){if(e.length===0)return null;var n=e[0]==="@";return n&&(e=e.slice(1)),e==="null"?{name:"null",mandatory:!n,grid:null,isNull:!0}:{name:e,mandatory:!n,grid:cf[e]||null,isNull:!1}}function p0(e){return e*Math.PI/180}function ba(e){return e/3600*Math.PI/180}function H_(e){var n=e.getInt32(8,!1);return n===11?!1:(n=e.getInt32(8,!0),n!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function V_(e,n){return{nFields:e.getInt32(8,n),nSubgridFields:e.getInt32(24,n),nSubgrids:e.getInt32(40,n),shiftType:Kc(e,56,64).trim(),fromSemiMajorAxis:e.getFloat64(120,n),fromSemiMinorAxis:e.getFloat64(136,n),toSemiMajorAxis:e.getFloat64(152,n),toSemiMinorAxis:e.getFloat64(168,n)}}function Kc(e,n,o){return String.fromCharCode.apply(null,new Uint8Array(e.buffer.slice(n,o)))}function W_(e,n,o,c){for(var f=176,g=[],y=0;y<n.nSubgrids;y++){var v=Z_(e,f,o),E=q_(e,f,v,o,c),A=Math.round(1+(v.upperLongitude-v.lowerLongitude)/v.longitudeInterval),D=Math.round(1+(v.upperLatitude-v.lowerLatitude)/v.latitudeInterval);g.push({ll:[ba(v.lowerLongitude),ba(v.lowerLatitude)],del:[ba(v.longitudeInterval),ba(v.latitudeInterval)],lim:[A,D],count:v.gridNodeCount,cvs:$_(E)});var P=16;c===!1&&(P=8),f+=176+v.gridNodeCount*P}return g}function $_(e){return e.map(function(n){return[ba(n.longitudeShift),ba(n.latitudeShift)]})}function Z_(e,n,o){return{name:Kc(e,n+8,n+16).trim(),parent:Kc(e,n+24,n+24+8).trim(),lowerLatitude:e.getFloat64(n+72,o),upperLatitude:e.getFloat64(n+88,o),lowerLongitude:e.getFloat64(n+104,o),upperLongitude:e.getFloat64(n+120,o),latitudeInterval:e.getFloat64(n+136,o),longitudeInterval:e.getFloat64(n+152,o),gridNodeCount:e.getInt32(n+168,o)}}function q_(e,n,o,c,f){var g=n+176,y=16;f===!1&&(y=8);for(var v=[],E=0;E<o.gridNodeCount;E++){var A={latitudeShift:e.getFloat32(g+E*y,c),longitudeShift:e.getFloat32(g+E*y+4,c)};f!==!1&&(A.latitudeAccuracy=e.getFloat32(g+E*y+8,c),A.longitudeAccuracy=e.getFloat32(g+E*y+12,c)),v.push(A)}return v}function _s(e,n){if(!(this instanceof _s))return new _s(e);this.forward=null,this.inverse=null,this.init=null,this.name,this.names=null,this.title,n=n||function(A){if(A)throw A};var o=w_(e);if(typeof o!="object"){n("Could not parse to valid json: "+e);return}var c=_s.projections.get(o.projName);if(!c){n("Could not get projection name from: "+e);return}if(o.datumCode&&o.datumCode!=="none"){var f=Aa(_h,o.datumCode);f&&(o.datum_params=o.datum_params||(f.towgs84?f.towgs84.split(","):null),o.ellps=f.ellipse,o.datumName=f.datumName?f.datumName:o.datumCode)}o.k0=o.k0||1,o.axis=o.axis||"enu",o.ellps=o.ellps||"wgs84",o.lat1=o.lat1||o.lat0;var g=O_(o.a,o.b,o.rf,o.ellps,o.sphere),y=R_(g.a,g.b,g.rf,o.R_A),v=j_(o.nadgrids),E=o.datum||N_(o.datumCode,o.datum_params,g.a,g.b,y.es,y.ep2,v);f0(this,o),f0(this,c),this.a=g.a,this.b=g.b,this.rf=g.rf,this.sphere=g.sphere,this.es=y.es,this.e=y.e,this.ep2=y.ep2,this.datum=E,"init"in this&&typeof this.init=="function"&&this.init(),n(null,this)}_s.projections=T_;_s.projections.start();function K_(e,n){return e.datum_type!==n.datum_type||e.a!==n.a||Math.abs(e.es-n.es)>5e-11?!1:e.datum_type===ol?e.datum_params[0]===n.datum_params[0]&&e.datum_params[1]===n.datum_params[1]&&e.datum_params[2]===n.datum_params[2]:e.datum_type===al?e.datum_params[0]===n.datum_params[0]&&e.datum_params[1]===n.datum_params[1]&&e.datum_params[2]===n.datum_params[2]&&e.datum_params[3]===n.datum_params[3]&&e.datum_params[4]===n.datum_params[4]&&e.datum_params[5]===n.datum_params[5]&&e.datum_params[6]===n.datum_params[6]:!0}function vp(e,n,o){var c=e.x,f=e.y,g=e.z?e.z:0,y,v,E,A;if(f<-Wt&&f>-1.001*Wt)f=-Wt;else if(f>Wt&&f<1.001*Wt)f=Wt;else{if(f<-Wt)return{x:-1/0,y:-1/0,z:e.z};if(f>Wt)return{x:1/0,y:1/0,z:e.z}}return c>Math.PI&&(c-=2*Math.PI),v=Math.sin(f),A=Math.cos(f),E=v*v,y=o/Math.sqrt(1-n*E),{x:(y+g)*A*Math.cos(c),y:(y+g)*A*Math.sin(c),z:(y*(1-n)+g)*v}}function xp(e,n,o,c){var f=1e-12,g=f*f,y=30,v,E,A,D,P,B,W,J,Z,q,ct,ft,St,Tt=e.x,Gt=e.y,zt=e.z?e.z:0,Dt,ut,Bt;if(v=Math.sqrt(Tt*Tt+Gt*Gt),E=Math.sqrt(Tt*Tt+Gt*Gt+zt*zt),v/o<f){if(Dt=0,E/o<f)return ut=Wt,Bt=-c,{x:e.x,y:e.y,z:e.z}}else Dt=Math.atan2(Gt,Tt);A=zt/E,D=v/E,P=1/Math.sqrt(1-n*(2-n)*D*D),J=D*(1-n)*P,Z=A*P,St=0;do St++,W=o/Math.sqrt(1-n*Z*Z),Bt=v*J+zt*Z-W*(1-n*Z*Z),B=n*W/(W+Bt),P=1/Math.sqrt(1-B*(2-B)*D*D),q=D*(1-B)*P,ct=A*P,ft=ct*J-q*Z,J=q,Z=ct;while(ft*ft>g&&St<y);return ut=Math.atan(ct/Math.abs(q)),{x:Dt,y:ut,z:Bt}}function J_(e,n,o){if(n===ol)return{x:e.x+o[0],y:e.y+o[1],z:e.z+o[2]};if(n===al){var c=o[0],f=o[1],g=o[2],y=o[3],v=o[4],E=o[5],A=o[6];return{x:A*(e.x-E*e.y+v*e.z)+c,y:A*(E*e.x+e.y-y*e.z)+f,z:A*(-v*e.x+y*e.y+e.z)+g}}}function X_(e,n,o){if(n===ol)return{x:e.x-o[0],y:e.y-o[1],z:e.z-o[2]};if(n===al){var c=o[0],f=o[1],g=o[2],y=o[3],v=o[4],E=o[5],A=o[6],D=(e.x-c)/A,P=(e.y-f)/A,B=(e.z-g)/A;return{x:D+E*P-v*B,y:-E*D+P+y*B,z:v*D-y*P+B}}}function dh(e){return e===ol||e===al}function Y_(e,n,o){if(K_(e,n)||e.datum_type===Zc||n.datum_type===Zc)return o;var c=e.a,f=e.es;if(e.datum_type===Nl){var g=g0(e,!1,o);if(g!==0)return;c=o0,f=a0}var y=n.a,v=n.b,E=n.es;if(n.datum_type===Nl&&(y=o0,v=Jm,E=a0),f===E&&c===y&&!dh(e.datum_type)&&!dh(n.datum_type))return o;if(o=vp(o,f,c),dh(e.datum_type)&&(o=J_(o,e.datum_type,e.datum_params)),dh(n.datum_type)&&(o=X_(o,n.datum_type,n.datum_params)),o=xp(o,E,y,v),n.datum_type===Nl){var A=g0(n,!0,o);if(A!==0)return}return o}function g0(e,n,o){if(e.grids===null||e.grids.length===0)return console.log("Grid shift grids not found"),-1;var c={x:-o.x,y:o.y},f={x:Number.NaN,y:Number.NaN},g=[];t:for(var y=0;y<e.grids.length;y++){var v=e.grids[y];if(g.push(v.name),v.isNull){f=c;break}if(v.grid===null){if(v.mandatory)return console.log("Unable to find mandatory grid '"+v.name+"'"),-1;continue}for(var E=v.grid.subgrids,A=0,D=E.length;A<D;A++){var P=E[A],B=(Math.abs(P.del[1])+Math.abs(P.del[0]))/1e4,W=P.ll[0]-B,J=P.ll[1]-B,Z=P.ll[0]+(P.lim[0]-1)*P.del[0]+B,q=P.ll[1]+(P.lim[1]-1)*P.del[1]+B;if(!(J>c.y||W>c.x||q<c.y||Z<c.x)&&(f=Q_(c,n,P),!isNaN(f.x)))break t}}return isNaN(f.x)?(console.log("Failed to find a grid shift table for location '"+-c.x*br+" "+c.y*br+" tried: '"+g+"'"),-1):(o.x=-f.x,o.y=f.y,0)}function Q_(e,n,o){var c={x:Number.NaN,y:Number.NaN};if(isNaN(e.x))return c;var f={x:e.x,y:e.y};f.x-=o.ll[0],f.y-=o.ll[1],f.x=se(f.x-Math.PI)+Math.PI;var g=m0(f,o);if(n){if(isNaN(g.x))return c;g.x=f.x-g.x,g.y=f.y-g.y;var y=9,v=1e-12,E,A;do{if(A=m0(g,o),isNaN(A.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}E={x:f.x-(A.x+g.x),y:f.y-(A.y+g.y)},g.x+=E.x,g.y+=E.y}while(y--&&Math.abs(E.x)>v&&Math.abs(E.y)>v);if(y<0)return console.log("Inverse grid shift iterator failed to converge."),c;c.x=se(g.x+o.ll[0]),c.y=g.y+o.ll[1]}else isNaN(g.x)||(c.x=e.x+g.x,c.y=e.y+g.y);return c}function m0(e,n){var o={x:e.x/n.del[0],y:e.y/n.del[1]},c={x:Math.floor(o.x),y:Math.floor(o.y)},f={x:o.x-1*c.x,y:o.y-1*c.y},g={x:Number.NaN,y:Number.NaN},y;if(c.x<0||c.x>=n.lim[0]||c.y<0||c.y>=n.lim[1])return g;y=c.y*n.lim[0]+c.x;var v={x:n.cvs[y][0],y:n.cvs[y][1]};y++;var E={x:n.cvs[y][0],y:n.cvs[y][1]};y+=n.lim[0];var A={x:n.cvs[y][0],y:n.cvs[y][1]};y--;var D={x:n.cvs[y][0],y:n.cvs[y][1]},P=f.x*f.y,B=f.x*(1-f.y),W=(1-f.x)*(1-f.y),J=(1-f.x)*f.y;return g.x=W*v.x+B*E.x+J*D.x+P*A.x,g.y=W*v.y+B*E.y+J*D.y+P*A.y,g}function _0(e,n,o){var c=o.x,f=o.y,g=o.z||0,y,v,E,A={};for(E=0;E<3;E++)if(!(n&&E===2&&o.z===void 0))switch(E===0?(y=c,"ew".indexOf(e.axis[E])!==-1?v="x":v="y"):E===1?(y=f,"ns".indexOf(e.axis[E])!==-1?v="y":v="x"):(y=g,v="z"),e.axis[E]){case"e":A[v]=y;break;case"w":A[v]=-y;break;case"n":A[v]=y;break;case"s":A[v]=-y;break;case"u":o[v]!==void 0&&(A.z=y);break;case"d":o[v]!==void 0&&(A.z=-y);break;default:return null}return A}function wp(e){var n={x:e[0],y:e[1]};return e.length>2&&(n.z=e[2]),e.length>3&&(n.m=e[3]),n}function ty(e){y0(e.x),y0(e.y)}function y0(e){if(typeof Number.isFinite=="function"){if(Number.isFinite(e))return;throw new TypeError("coordinates must be finite numbers")}if(typeof e!="number"||e!==e||!isFinite(e))throw new TypeError("coordinates must be finite numbers")}function ey(e,n){return(e.datum.datum_type===ol||e.datum.datum_type===al||e.datum.datum_type===Nl)&&n.datumCode!=="WGS84"||(n.datum.datum_type===ol||n.datum.datum_type===al||n.datum.datum_type===Nl)&&e.datumCode!=="WGS84"}function Sh(e,n,o,c){var f;Array.isArray(o)?o=wp(o):o={x:o.x,y:o.y,z:o.z,m:o.m};var g=o.z!==void 0;if(ty(o),e.datum&&n.datum&&ey(e,n)&&(f=new _s("WGS84"),o=Sh(e,f,o,c),e=f),c&&e.axis!=="enu"&&(o=_0(e,!1,o)),e.projName==="longlat")o={x:o.x*Ti,y:o.y*Ti,z:o.z||0};else if(e.to_meter&&(o={x:o.x*e.to_meter,y:o.y*e.to_meter,z:o.z||0}),o=e.inverse(o),!o)return;if(e.from_greenwich&&(o.x+=e.from_greenwich),o=Y_(e.datum,n.datum,o),!!o)return o=o,n.from_greenwich&&(o={x:o.x-n.from_greenwich,y:o.y,z:o.z||0}),n.projName==="longlat"?o={x:o.x*br,y:o.y*br,z:o.z||0}:(o=n.forward(o),n.to_meter&&(o={x:o.x/n.to_meter,y:o.y/n.to_meter,z:o.z||0})),c&&n.axis!=="enu"?_0(n,!0,o):(o&&!g&&delete o.z,o)}var v0=_s("WGS84");function Fc(e,n,o,c){var f,g,y;return Array.isArray(o)?(f=Sh(e,n,o,c)||{x:NaN,y:NaN},o.length>2?typeof e.name<"u"&&e.name==="geocent"||typeof n.name<"u"&&n.name==="geocent"?typeof f.z=="number"?[f.x,f.y,f.z].concat(o.slice(3)):[f.x,f.y,o[2]].concat(o.slice(3)):[f.x,f.y].concat(o.slice(2)):[f.x,f.y]):(g=Sh(e,n,o,c),y=Object.keys(o),y.length===2||y.forEach(function(v){if(typeof e.name<"u"&&e.name==="geocent"||typeof n.name<"u"&&n.name==="geocent"){if(v==="x"||v==="y"||v==="z")return}else if(v==="x"||v==="y")return;g[v]=o[v]}),g)}function ph(e){return e instanceof _s?e:typeof e=="object"&&"oProj"in e?e.oProj:_s(e)}function iy(e,n,o){var c,f,g=!1,y;return typeof n>"u"?(f=ph(e),c=v0,g=!0):(typeof n.x<"u"||Array.isArray(n))&&(o=n,f=ph(e),c=v0,g=!0),c||(c=ph(e)),f||(f=ph(n)),o?Fc(c,f,o):(y={forward:function(v,E){return Fc(c,f,v,E)},inverse:function(v,E){return Fc(f,c,v,E)}},g&&(y.oProj=f),y)}var x0=6,Mp="AJSAJS",Ep="AFAFAF",Ol=65,Lr=73,ps=79,gu=86,mu=90;const ny={forward:Lp,inverse:ry,toPoint:Cp};function Lp(e,n){return n=n||5,ay(sy({lat:e[1],lon:e[0]}),n)}function ry(e){var n=ff(Sp(e.toUpperCase()));return n.lat&&n.lon?[n.lon,n.lat,n.lon,n.lat]:[n.left,n.bottom,n.right,n.top]}function Cp(e){var n=ff(Sp(e.toUpperCase()));return n.lat&&n.lon?[n.lon,n.lat]:[(n.left+n.right)/2,(n.top+n.bottom)/2]}function Gc(e){return e*(Math.PI/180)}function w0(e){return 180*(e/Math.PI)}function sy(e){var n=e.lat,o=e.lon,c=6378137,f=.00669438,g=.9996,y,v,E,A,D,P,B,W=Gc(n),J=Gc(o),Z,q;q=Math.floor((o+180)/6)+1,o===180&&(q=60),n>=56&&n<64&&o>=3&&o<12&&(q=32),n>=72&&n<84&&(o>=0&&o<9?q=31:o>=9&&o<21?q=33:o>=21&&o<33?q=35:o>=33&&o<42&&(q=37)),y=(q-1)*6-180+3,Z=Gc(y),v=f/(1-f),E=c/Math.sqrt(1-f*Math.sin(W)*Math.sin(W)),A=Math.tan(W)*Math.tan(W),D=v*Math.cos(W)*Math.cos(W),P=Math.cos(W)*(J-Z),B=c*((1-f/4-3*f*f/64-5*f*f*f/256)*W-(3*f/8+3*f*f/32+45*f*f*f/1024)*Math.sin(2*W)+(15*f*f/256+45*f*f*f/1024)*Math.sin(4*W)-35*f*f*f/3072*Math.sin(6*W));var ct=g*E*(P+(1-A+D)*P*P*P/6+(5-18*A+A*A+72*D-58*v)*P*P*P*P*P/120)+5e5,ft=g*(B+E*Math.tan(W)*(P*P/2+(5-A+9*D+4*D*D)*P*P*P*P/24+(61-58*A+A*A+600*D-330*v)*P*P*P*P*P*P/720));return n<0&&(ft+=1e7),{northing:Math.round(ft),easting:Math.round(ct),zoneNumber:q,zoneLetter:oy(n)}}function ff(e){var n=e.northing,o=e.easting,c=e.zoneLetter,f=e.zoneNumber;if(f<0||f>60)return null;var g=.9996,y=6378137,v=.00669438,E,A=(1-Math.sqrt(1-v))/(1+Math.sqrt(1-v)),D,P,B,W,J,Z,q,ct,ft,St=o-5e5,Tt=n;c<"N"&&(Tt-=1e7),q=(f-1)*6-180+3,E=v/(1-v),Z=Tt/g,ct=Z/(y*(1-v/4-3*v*v/64-5*v*v*v/256)),ft=ct+(3*A/2-27*A*A*A/32)*Math.sin(2*ct)+(21*A*A/16-55*A*A*A*A/32)*Math.sin(4*ct)+151*A*A*A/96*Math.sin(6*ct),D=y/Math.sqrt(1-v*Math.sin(ft)*Math.sin(ft)),P=Math.tan(ft)*Math.tan(ft),B=E*Math.cos(ft)*Math.cos(ft),W=y*(1-v)/Math.pow(1-v*Math.sin(ft)*Math.sin(ft),1.5),J=St/(D*g);var Gt=ft-D*Math.tan(ft)/W*(J*J/2-(5+3*P+10*B-4*B*B-9*E)*J*J*J*J/24+(61+90*P+298*B+45*P*P-252*E-3*B*B)*J*J*J*J*J*J/720);Gt=w0(Gt);var zt=(J-(1+2*P+B)*J*J*J/6+(5-2*B+28*P-3*B*B+8*E+24*P*P)*J*J*J*J*J/120)/Math.cos(ft);zt=q+w0(zt);var Dt;if(e.accuracy){var ut=ff({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});Dt={top:ut.lat,right:ut.lon,bottom:Gt,left:zt}}else Dt={lat:Gt,lon:zt};return Dt}function oy(e){var n="Z";return 84>=e&&e>=72?n="X":72>e&&e>=64?n="W":64>e&&e>=56?n="V":56>e&&e>=48?n="U":48>e&&e>=40?n="T":40>e&&e>=32?n="S":32>e&&e>=24?n="R":24>e&&e>=16?n="Q":16>e&&e>=8?n="P":8>e&&e>=0?n="N":0>e&&e>=-8?n="M":-8>e&&e>=-16?n="L":-16>e&&e>=-24?n="K":-24>e&&e>=-32?n="J":-32>e&&e>=-40?n="H":-40>e&&e>=-48?n="G":-48>e&&e>=-56?n="F":-56>e&&e>=-64?n="E":-64>e&&e>=-72?n="D":-72>e&&e>=-80&&(n="C"),n}function ay(e,n){var o="00000"+e.easting,c="00000"+e.northing;return e.zoneNumber+e.zoneLetter+ly(e.easting,e.northing,e.zoneNumber)+o.substr(o.length-5,n)+c.substr(c.length-5,n)}function ly(e,n,o){var c=bp(o),f=Math.floor(e/1e5),g=Math.floor(n/1e5)%20;return uy(f,g,c)}function bp(e){var n=e%x0;return n===0&&(n=x0),n}function uy(e,n,o){var c=o-1,f=Mp.charCodeAt(c),g=Ep.charCodeAt(c),y=f+e-1,v=g+n,E=!1;y>mu&&(y=y-mu+Ol-1,E=!0),(y===Lr||f<Lr&&y>Lr||(y>Lr||f<Lr)&&E)&&y++,(y===ps||f<ps&&y>ps||(y>ps||f<ps)&&E)&&(y++,y===Lr&&y++),y>mu&&(y=y-mu+Ol-1),v>gu?(v=v-gu+Ol-1,E=!0):E=!1,(v===Lr||g<Lr&&v>Lr||(v>Lr||g<Lr)&&E)&&v++,(v===ps||g<ps&&v>ps||(v>ps||g<ps)&&E)&&(v++,v===Lr&&v++),v>gu&&(v=v-gu+Ol-1);var A=String.fromCharCode(y)+String.fromCharCode(v);return A}function Sp(e){if(e&&e.length===0)throw"MGRSPoint coverting from nothing";for(var n=e.length,o=null,c="",f,g=0;!/[A-Z]/.test(f=e.charAt(g));){if(g>=2)throw"MGRSPoint bad conversion from: "+e;c+=f,g++}var y=parseInt(c,10);if(g===0||g+3>n)throw"MGRSPoint bad conversion from: "+e;var v=e.charAt(g++);if(v<="A"||v==="B"||v==="Y"||v>="Z"||v==="I"||v==="O")throw"MGRSPoint zone letter "+v+" not handled: "+e;o=e.substring(g,g+=2);for(var E=bp(y),A=hy(o.charAt(0),E),D=cy(o.charAt(1),E);D<fy(v);)D+=2e6;var P=n-g;if(P%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+e;var B=P/2,W=0,J=0,Z,q,ct,ft,St;return B>0&&(Z=1e5/Math.pow(10,B),q=e.substring(g,g+B),W=parseFloat(q)*Z,ct=e.substring(g+B),J=parseFloat(ct)*Z),ft=W+A,St=J+D,{easting:ft,northing:St,zoneLetter:v,zoneNumber:y,accuracy:Z}}function hy(e,n){for(var o=Mp.charCodeAt(n-1),c=1e5,f=!1;o!==e.charCodeAt(0);){if(o++,o===Lr&&o++,o===ps&&o++,o>mu){if(f)throw"Bad character: "+e;o=Ol,f=!0}c+=1e5}return c}function cy(e,n){if(e>"V")throw"MGRSPoint given invalid Northing "+e;for(var o=Ep.charCodeAt(n-1),c=0,f=!1;o!==e.charCodeAt(0);){if(o++,o===Lr&&o++,o===ps&&o++,o>gu){if(f)throw"Bad character: "+e;o=Ol,f=!0}c+=1e5}return c}function fy(e){var n;switch(e){case"C":n=11e5;break;case"D":n=2e6;break;case"E":n=28e5;break;case"F":n=37e5;break;case"G":n=46e5;break;case"H":n=55e5;break;case"J":n=64e5;break;case"K":n=73e5;break;case"L":n=82e5;break;case"M":n=91e5;break;case"N":n=0;break;case"P":n=8e5;break;case"Q":n=17e5;break;case"R":n=26e5;break;case"S":n=35e5;break;case"T":n=44e5;break;case"U":n=53e5;break;case"V":n=62e5;break;case"W":n=7e6;break;case"X":n=79e5;break;default:n=-1}if(n>=0)return n;throw"Invalid zone letter: "+e}function Gl(e,n,o){if(!(this instanceof Gl))return new Gl(e,n,o);if(Array.isArray(e))this.x=e[0],this.y=e[1],this.z=e[2]||0;else if(typeof e=="object")this.x=e.x,this.y=e.y,this.z=e.z||0;else if(typeof e=="string"&&typeof n>"u"){var c=e.split(",");this.x=parseFloat(c[0]),this.y=parseFloat(c[1]),this.z=parseFloat(c[2])||0}else this.x=e,this.y=n,this.z=o||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Gl.fromMGRS=function(e){return new Gl(Cp(e))};Gl.prototype.toMGRS=function(e){return Lp([this.x,this.y],e)};var dy=1,py=.25,M0=.046875,E0=.01953125,L0=.01068115234375,gy=.75,my=.46875,_y=.013020833333333334,yy=.007120768229166667,vy=.3645833333333333,xy=.005696614583333333,wy=.3076171875;function df(e){var n=[];n[0]=dy-e*(py+e*(M0+e*(E0+e*L0))),n[1]=e*(gy-e*(M0+e*(E0+e*L0)));var o=e*e;return n[2]=o*(my-e*(_y+e*yy)),o*=e,n[3]=o*(vy-e*xy),n[4]=o*e*wy,n}function jl(e,n,o,c){return o*=n,n*=n,c[0]*e-o*(c[1]+n*(c[2]+n*(c[3]+n*c[4])))}var My=20;function pf(e,n,o){for(var c=1/(1-n),f=e,g=My;g;--g){var y=Math.sin(f),v=1-n*y*y;if(v=(jl(f,y,Math.cos(f),o)-e)*(v*Math.sqrt(v))*c,f-=v,Math.abs(v)<ee)return f}return f}function Ey(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=df(this.es),this.ml0=jl(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function Ly(e){var n=e.x,o=e.y,c=se(n-this.long0,this.over),f,g,y,v=Math.sin(o),E=Math.cos(o);if(this.es){var D=E*c,P=Math.pow(D,2),B=this.ep2*Math.pow(E,2),W=Math.pow(B,2),J=Math.abs(E)>ee?Math.tan(o):0,Z=Math.pow(J,2),q=Math.pow(Z,2);f=1-this.es*Math.pow(v,2),D=D/Math.sqrt(f);var ct=jl(o,v,E,this.en);g=this.a*(this.k0*D*(1+P/6*(1-Z+B+P/20*(5-18*Z+q+14*B-58*Z*B+P/42*(61+179*q-q*Z-479*Z)))))+this.x0,y=this.a*(this.k0*(ct-this.ml0+v*c*D/2*(1+P/12*(5-Z+9*B+4*W+P/30*(61+q-58*Z+270*B-330*Z*B+P/56*(1385+543*q-q*Z-3111*Z))))))+this.y0}else{var A=E*Math.sin(c);if(Math.abs(Math.abs(A)-1)<ee)return 93;if(g=.5*this.a*this.k0*Math.log((1+A)/(1-A))+this.x0,y=E*Math.cos(c)/Math.sqrt(1-Math.pow(A,2)),A=Math.abs(y),A>=1){if(A-1>ee)return 93;y=0}else y=Math.acos(y);o<0&&(y=-y),y=this.a*this.k0*(y-this.lat0)+this.y0}return e.x=g,e.y=y,e}function Cy(e){var n,o,c,f,g=(e.x-this.x0)*(1/this.a),y=(e.y-this.y0)*(1/this.a);if(this.es)if(n=this.ml0+y/this.k0,o=pf(n,this.es,this.en),Math.abs(o)<Wt){var P=Math.sin(o),B=Math.cos(o),W=Math.abs(B)>ee?Math.tan(o):0,J=this.ep2*Math.pow(B,2),Z=Math.pow(J,2),q=Math.pow(W,2),ct=Math.pow(q,2);n=1-this.es*Math.pow(P,2);var ft=g*Math.sqrt(n)/this.k0,St=Math.pow(ft,2);n=n*W,c=o-n*St/(1-this.es)*.5*(1-St/12*(5+3*q-9*J*q+J-4*Z-St/30*(61+90*q-252*J*q+45*ct+46*J-St/56*(1385+3633*q+4095*ct+1574*ct*q)))),f=se(this.long0+ft*(1-St/6*(1+2*q+J-St/20*(5+28*q+24*ct+8*J*q+6*J-St/42*(61+662*q+1320*ct+720*ct*q))))/B,this.over)}else c=Wt*Bu(y),f=0;else{var v=Math.exp(g/this.k0),E=.5*(v-1/v),A=this.lat0+y/this.k0,D=Math.cos(A);n=Math.sqrt((1-Math.pow(D,2))/(1+Math.pow(E,2))),c=Math.asin(n),y<0&&(c=-c),E===0&&D===0?f=0:f=se(Math.atan2(E,D)+this.long0,this.over)}return e.x=f,e.y=c,e}var by=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const yh={init:Ey,forward:Ly,inverse:Cy,names:by};function kp(e){var n=Math.exp(e);return n=(n-1/n)/2,n}function Cr(e,n){e=Math.abs(e),n=Math.abs(n);var o=Math.max(e,n),c=Math.min(e,n)/(o||1);return o*Math.sqrt(1+Math.pow(c,2))}function Sy(e){var n=1+e,o=n-1;return o===0?e:e*Math.log(n)/o}function ky(e){var n=Math.abs(e);return n=Sy(n*(1+n/(Cr(1,n)+1))),e<0?-n:n}function gf(e,n){for(var o=2*Math.cos(2*n),c=e.length-1,f=e[c],g=0,y;--c>=0;)y=-g+o*f+e[c],g=f,f=y;return n+y*Math.sin(2*n)}function Py(e,n){for(var o=2*Math.cos(n),c=e.length-1,f=e[c],g=0,y;--c>=0;)y=-g+o*f+e[c],g=f,f=y;return Math.sin(n)*y}function Ay(e){var n=Math.exp(e);return n=(n+1/n)/2,n}function Pp(e,n,o){for(var c=Math.sin(n),f=Math.cos(n),g=kp(o),y=Ay(o),v=2*f*y,E=-2*c*g,A=e.length-1,D=e[A],P=0,B=0,W=0,J,Z;--A>=0;)J=B,Z=P,B=D,P=W,D=-J+v*B-E*P+e[A],W=-Z+E*B+v*P;return v=c*y,E=f*g,[v*D-E*W,v*W+E*D]}function By(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(yh.init.apply(this),this.forward=yh.forward,this.inverse=yh.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var e=this.es/(1+Math.sqrt(1-this.es)),n=e/(2-e),o=n;this.cgb[0]=n*(2+n*(-2/3+n*(-2+n*(116/45+n*(26/45+n*(-2854/675)))))),this.cbg[0]=n*(-2+n*(2/3+n*(4/3+n*(-82/45+n*(32/45+n*(4642/4725)))))),o=o*n,this.cgb[1]=o*(7/3+n*(-8/5+n*(-227/45+n*(2704/315+n*(2323/945))))),this.cbg[1]=o*(5/3+n*(-16/15+n*(-13/9+n*(904/315+n*(-1522/945))))),o=o*n,this.cgb[2]=o*(56/15+n*(-136/35+n*(-1262/105+n*(73814/2835)))),this.cbg[2]=o*(-26/15+n*(34/21+n*(8/5+n*(-12686/2835)))),o=o*n,this.cgb[3]=o*(4279/630+n*(-332/35+n*(-399572/14175))),this.cbg[3]=o*(1237/630+n*(-12/5+n*(-24832/14175))),o=o*n,this.cgb[4]=o*(4174/315+n*(-144838/6237)),this.cbg[4]=o*(-734/315+n*(109598/31185)),o=o*n,this.cgb[5]=o*(601676/22275),this.cbg[5]=o*(444337/155925),o=Math.pow(n,2),this.Qn=this.k0/(1+n)*(1+o*(1/4+o*(1/64+o/256))),this.utg[0]=n*(-.5+n*(2/3+n*(-37/96+n*(1/360+n*(81/512+n*(-96199/604800)))))),this.gtu[0]=n*(.5+n*(-2/3+n*(5/16+n*(41/180+n*(-127/288+n*(7891/37800)))))),this.utg[1]=o*(-1/48+n*(-1/15+n*(437/1440+n*(-46/105+n*(1118711/3870720))))),this.gtu[1]=o*(13/48+n*(-3/5+n*(557/1440+n*(281/630+n*(-1983433/1935360))))),o=o*n,this.utg[2]=o*(-17/480+n*(37/840+n*(209/4480+n*(-5569/90720)))),this.gtu[2]=o*(61/240+n*(-103/140+n*(15061/26880+n*(167603/181440)))),o=o*n,this.utg[3]=o*(-4397/161280+n*(11/504+n*(830251/7257600))),this.gtu[3]=o*(49561/161280+n*(-179/168+n*(6601661/7257600))),o=o*n,this.utg[4]=o*(-4583/161280+n*(108847/3991680)),this.gtu[4]=o*(34729/80640+n*(-3418889/1995840)),o=o*n,this.utg[5]=o*(-20648693/638668800),this.gtu[5]=o*(212378941/319334400);var c=gf(this.cbg,this.lat0);this.Zb=-this.Qn*(c+Py(this.gtu,2*c))}function Ty(e){var n=se(e.x-this.long0,this.over),o=e.y;o=gf(this.cbg,o);var c=Math.sin(o),f=Math.cos(o),g=Math.sin(n),y=Math.cos(n);o=Math.atan2(c,y*f),n=Math.atan2(g*f,Cr(c,f*y)),n=ky(Math.tan(n));var v=Pp(this.gtu,2*o,2*n);o=o+v[0],n=n+v[1];var E,A;return Math.abs(n)<=2.623395162778?(E=this.a*(this.Qn*n)+this.x0,A=this.a*(this.Qn*o+this.Zb)+this.y0):(E=1/0,A=1/0),e.x=E,e.y=A,e}function Iy(e){var n=(e.x-this.x0)*(1/this.a),o=(e.y-this.y0)*(1/this.a);o=(o-this.Zb)/this.Qn,n=n/this.Qn;var c,f;if(Math.abs(n)<=2.623395162778){var g=Pp(this.utg,2*o,2*n);o=o+g[0],n=n+g[1],n=Math.atan(kp(n));var y=Math.sin(o),v=Math.cos(o),E=Math.sin(n),A=Math.cos(n);o=Math.atan2(y*A,Cr(E,A*v)),n=Math.atan2(E,A*v),c=se(n+this.long0,this.over),f=gf(this.cgb,o)}else c=1/0,f=1/0;return e.x=c,e.y=f,e}var Ry=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const vh={init:By,forward:Ty,inverse:Iy,names:Ry};function Oy(e,n){if(e===void 0){if(e=Math.floor((se(n)+Math.PI)*30/Math.PI)+1,e<0)return 0;if(e>60)return 60}return e}var Dy="etmerc";function Ny(){var e=Oy(this.zone,this.long0);if(e===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(e)-183)*Ti,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,vh.init.apply(this),this.forward=vh.forward,this.inverse=vh.inverse}var Fy=["Universal Transverse Mercator System","utm"];const Gy={init:Ny,names:Fy,dependsOn:Dy};function mf(e,n){return Math.pow((1-e)/(1+e),n)}var zy=20;function jy(){var e=Math.sin(this.lat0),n=Math.cos(this.lat0);n*=n,this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e),this.C=Math.sqrt(1+this.es*n*n/(1-this.es)),this.phic0=Math.asin(e/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+hi)/(Math.pow(Math.tan(.5*this.lat0+hi),this.C)*mf(this.e*e,this.ratexp))}function Uy(e){var n=e.x,o=e.y;return e.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*o+hi),this.C)*mf(this.e*Math.sin(o),this.ratexp))-Wt,e.x=this.C*n,e}function Hy(e){for(var n=1e-14,o=e.x/this.C,c=e.y,f=Math.pow(Math.tan(.5*c+hi)/this.K,1/this.C),g=zy;g>0&&(c=2*Math.atan(f*mf(this.e*Math.sin(e.y),-.5*this.e))-Wt,!(Math.abs(c-e.y)<n));--g)e.y=c;return g?(e.x=o,e.y=c,e):null}const _f={init:jy,forward:Uy,inverse:Hy};function Vy(){_f.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function Wy(e){var n,o,c,f;return e.x=se(e.x-this.long0,this.over),_f.forward.apply(this,[e]),n=Math.sin(e.y),o=Math.cos(e.y),c=Math.cos(e.x),f=this.k0*this.R2/(1+this.sinc0*n+this.cosc0*o*c),e.x=f*o*Math.sin(e.x),e.y=f*(this.cosc0*n-this.sinc0*o*c),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function $y(e){var n,o,c,f,g;if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,g=Cr(e.x,e.y)){var y=2*Math.atan2(g,this.R2);n=Math.sin(y),o=Math.cos(y),f=Math.asin(o*this.sinc0+e.y*n*this.cosc0/g),c=Math.atan2(e.x*n,g*this.cosc0*o-e.y*this.sinc0*n)}else f=this.phic0,c=0;return e.x=c,e.y=f,_f.inverse.apply(this,[e]),e.x=se(e.x+this.long0,this.over),e}var Zy=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const qy={init:Vy,forward:Wy,inverse:$y,names:Zy};function yf(e,n,o){return n*=o,Math.tan(.5*(Wt+e))*Math.pow((1-n)/(1+n),.5*o)}function Ky(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=ee&&(this.k0=.5*(1+Bu(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=ee&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=ee&&Math.abs(Math.cos(this.lat_ts))>ee&&(this.k0=.5*this.cons*mo(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/qs(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=mo(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(yf(this.lat0,this.sinlat0,this.e))-Wt,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function Jy(e){var n=e.x,o=e.y,c=Math.sin(o),f=Math.cos(o),g,y,v,E,A,D,P=se(n-this.long0,this.over);return Math.abs(Math.abs(n-this.long0)-Math.PI)<=ee&&Math.abs(o+this.lat0)<=ee?(e.x=NaN,e.y=NaN,e):this.sphere?(g=2*this.k0/(1+this.sinlat0*c+this.coslat0*f*Math.cos(P)),e.x=this.a*g*f*Math.sin(P)+this.x0,e.y=this.a*g*(this.coslat0*c-this.sinlat0*f*Math.cos(P))+this.y0,e):(y=2*Math.atan(yf(o,c,this.e))-Wt,E=Math.cos(y),v=Math.sin(y),Math.abs(this.coslat0)<=ee?(A=qs(this.e,o*this.con,this.con*c),D=2*this.a*this.k0*A/this.cons,e.x=this.x0+D*Math.sin(n-this.long0),e.y=this.y0-this.con*D*Math.cos(n-this.long0),e):(Math.abs(this.sinlat0)<ee?(g=2*this.a*this.k0/(1+E*Math.cos(P)),e.y=g*v):(g=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*v+this.cosX0*E*Math.cos(P))),e.y=g*(this.cosX0*v-this.sinX0*E*Math.cos(P))+this.y0),e.x=g*E*Math.sin(P)+this.x0,e))}function Xy(e){e.x-=this.x0,e.y-=this.y0;var n,o,c,f,g,y=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere){var v=2*Math.atan(y/(2*this.a*this.k0));return n=this.long0,o=this.lat0,y<=ee?(e.x=n,e.y=o,e):(o=Math.asin(Math.cos(v)*this.sinlat0+e.y*Math.sin(v)*this.coslat0/y),Math.abs(this.coslat0)<ee?this.lat0>0?n=se(this.long0+Math.atan2(e.x,-1*e.y),this.over):n=se(this.long0+Math.atan2(e.x,e.y),this.over):n=se(this.long0+Math.atan2(e.x*Math.sin(v),y*this.coslat0*Math.cos(v)-e.y*this.sinlat0*Math.sin(v)),this.over),e.x=n,e.y=o,e)}else if(Math.abs(this.coslat0)<=ee){if(y<=ee)return o=this.lat0,n=this.long0,e.x=n,e.y=o,e;e.x*=this.con,e.y*=this.con,c=y*this.cons/(2*this.a*this.k0),o=this.con*Cu(this.e,c),n=this.con*se(this.con*this.long0+Math.atan2(e.x,-1*e.y),this.over)}else f=2*Math.atan(y*this.cosX0/(2*this.a*this.k0*this.ms1)),n=this.long0,y<=ee?g=this.X0:(g=Math.asin(Math.cos(f)*this.sinX0+e.y*Math.sin(f)*this.cosX0/y),n=se(this.long0+Math.atan2(e.x*Math.sin(f),y*this.cosX0*Math.cos(f)-e.y*this.sinX0*Math.sin(f)),this.over)),o=-1*Cu(this.e,Math.tan(.5*(Wt+g)));return e.x=n,e.y=o,e}var Yy=["stere","Stereographic_South_Pole","Polar_Stereographic_variant_A","Polar_Stereographic_variant_B","Polar_Stereographic"];const Qy={init:Ky,forward:Jy,inverse:Xy,names:Yy,ssfn_:yf};function tv(){var e=this.lat0;this.lambda0=this.long0;var n=Math.sin(e),o=this.a,c=this.rf,f=1/c,g=2*f-Math.pow(f,2),y=this.e=Math.sqrt(g);this.R=this.k0*o*Math.sqrt(1-g)/(1-g*Math.pow(n,2)),this.alpha=Math.sqrt(1+g/(1-g)*Math.pow(Math.cos(e),4)),this.b0=Math.asin(n/this.alpha);var v=Math.log(Math.tan(Math.PI/4+this.b0/2)),E=Math.log(Math.tan(Math.PI/4+e/2)),A=Math.log((1+y*n)/(1-y*n));this.K=v-this.alpha*E+this.alpha*y/2*A}function ev(e){var n=Math.log(Math.tan(Math.PI/4-e.y/2)),o=this.e/2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y))),c=-this.alpha*(n+o)+this.K,f=2*(Math.atan(Math.exp(c))-Math.PI/4),g=this.alpha*(e.x-this.lambda0),y=Math.atan(Math.sin(g)/(Math.sin(this.b0)*Math.tan(f)+Math.cos(this.b0)*Math.cos(g))),v=Math.asin(Math.cos(this.b0)*Math.sin(f)-Math.sin(this.b0)*Math.cos(f)*Math.cos(g));return e.y=this.R/2*Math.log((1+Math.sin(v))/(1-Math.sin(v)))+this.y0,e.x=this.R*y+this.x0,e}function iv(e){for(var n=e.x-this.x0,o=e.y-this.y0,c=n/this.R,f=2*(Math.atan(Math.exp(o/this.R))-Math.PI/4),g=Math.asin(Math.cos(this.b0)*Math.sin(f)+Math.sin(this.b0)*Math.cos(f)*Math.cos(c)),y=Math.atan(Math.sin(c)/(Math.cos(this.b0)*Math.cos(c)-Math.sin(this.b0)*Math.tan(f))),v=this.lambda0+y/this.alpha,E=0,A=g,D=-1e3,P=0;Math.abs(A-D)>1e-7;){if(++P>20)return;E=1/this.alpha*(Math.log(Math.tan(Math.PI/4+g/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(A))/2)),D=A,A=2*Math.atan(Math.exp(E))-Math.PI/2}return e.x=v,e.y=A,e}var nv=["somerc"];const rv={init:tv,forward:ev,inverse:iv,names:nv};var Bl=1e-7;function sv(e){var n=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],o=typeof e.projName=="object"?Object.keys(e.projName)[0]:e.projName;return"no_uoff"in e||"no_off"in e||n.indexOf(o)!==-1||n.indexOf(_p(o))!==-1}function ov(){var e,n,o,c,f,g,y,v,E,A,D=0,P,B=0,W=0,J=0,Z=0,q=0,ct=0;this.no_off=sv(this),this.no_rot="no_rot"in this;var ft=!1;"alpha"in this&&(ft=!0);var St=!1;if("rectified_grid_angle"in this&&(St=!0),ft&&(ct=this.alpha),St&&(D=this.rectified_grid_angle),ft||St)B=this.longc;else if(W=this.long1,Z=this.lat1,J=this.long2,q=this.lat2,Math.abs(Z-q)<=Bl||(e=Math.abs(Z))<=Bl||Math.abs(e-Wt)<=Bl||Math.abs(Math.abs(this.lat0)-Wt)<=Bl||Math.abs(Math.abs(q)-Wt)<=Bl)throw new Error;var Tt=1-this.es;n=Math.sqrt(Tt),Math.abs(this.lat0)>ee?(v=Math.sin(this.lat0),o=Math.cos(this.lat0),e=1-this.es*v*v,this.B=o*o,this.B=Math.sqrt(1+this.es*this.B*this.B/Tt),this.A=this.B*this.k0*n/e,c=this.B*n/(o*Math.sqrt(e)),f=c*c-1,f<=0?f=0:(f=Math.sqrt(f),this.lat0<0&&(f=-f)),this.E=f+=c,this.E*=Math.pow(qs(this.e,this.lat0,v),this.B)):(this.B=1/n,this.A=this.k0,this.E=c=f=1),ft||St?(ft?(P=Math.asin(Math.sin(ct)/c),St||(D=ct)):(P=D,ct=Math.asin(c*Math.sin(P))),this.lam0=B-Math.asin(.5*(f-1/f)*Math.tan(P))/this.B):(g=Math.pow(qs(this.e,Z,Math.sin(Z)),this.B),y=Math.pow(qs(this.e,q,Math.sin(q)),this.B),f=this.E/g,E=(y-g)/(y+g),A=this.E*this.E,A=(A-y*g)/(A+y*g),e=W-J,e<-Math.PI?J-=Eu:e>Math.PI&&(J+=Eu),this.lam0=se(.5*(W+J)-Math.atan(A*Math.tan(.5*this.B*(W-J))/E)/this.B,this.over),P=Math.atan(2*Math.sin(this.B*se(W-this.lam0,this.over))/(f-1/f)),D=ct=Math.asin(c*Math.sin(P))),this.singam=Math.sin(P),this.cosgam=Math.cos(P),this.sinrot=Math.sin(D),this.cosrot=Math.cos(D),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(c*c-1)/Math.cos(ct))),this.lat0<0&&(this.u_0=-this.u_0)),f=.5*P,this.v_pole_n=this.ArB*Math.log(Math.tan(hi-f)),this.v_pole_s=this.ArB*Math.log(Math.tan(hi+f))}function av(e){var n={},o,c,f,g,y,v,E,A;if(e.x=e.x-this.lam0,Math.abs(Math.abs(e.y)-Wt)>ee){if(y=this.E/Math.pow(qs(this.e,e.y,Math.sin(e.y)),this.B),v=1/y,o=.5*(y-v),c=.5*(y+v),g=Math.sin(this.B*e.x),f=(o*this.singam-g*this.cosgam)/c,Math.abs(Math.abs(f)-1)<ee)throw new Error;A=.5*this.ArB*Math.log((1-f)/(1+f)),v=Math.cos(this.B*e.x),Math.abs(v)<Bl?E=this.A*e.x:E=this.ArB*Math.atan2(o*this.cosgam+g*this.singam,v)}else A=e.y>0?this.v_pole_n:this.v_pole_s,E=this.ArB*e.y;return this.no_rot?(n.x=E,n.y=A):(E-=this.u_0,n.x=A*this.cosrot+E*this.sinrot,n.y=E*this.cosrot-A*this.sinrot),n.x=this.a*n.x+this.x0,n.y=this.a*n.y+this.y0,n}function lv(e){var n,o,c,f,g,y,v,E={};if(e.x=(e.x-this.x0)*(1/this.a),e.y=(e.y-this.y0)*(1/this.a),this.no_rot?(o=e.y,n=e.x):(o=e.x*this.cosrot-e.y*this.sinrot,n=e.y*this.cosrot+e.x*this.sinrot+this.u_0),c=Math.exp(-this.BrA*o),f=.5*(c-1/c),g=.5*(c+1/c),y=Math.sin(this.BrA*n),v=(y*this.cosgam+f*this.singam)/g,Math.abs(Math.abs(v)-1)<ee)E.x=0,E.y=v<0?-Wt:Wt;else{if(E.y=this.E/Math.sqrt((1+v)/(1-v)),E.y=Cu(this.e,Math.pow(E.y,1/this.B)),E.y===1/0)throw new Error;E.x=-this.rB*Math.atan2(f*this.cosgam-y*this.singam,Math.cos(this.BrA*n))}return E.x+=this.lam0,E}var uv=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Variant_B","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const hv={init:ov,forward:av,inverse:lv,names:uv};function cv(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<ee)){var e=this.b/this.a;this.e=Math.sqrt(1-e*e);var n=Math.sin(this.lat1),o=Math.cos(this.lat1),c=mo(this.e,n,o),f=qs(this.e,this.lat1,n),g=Math.sin(this.lat2),y=Math.cos(this.lat2),v=mo(this.e,g,y),E=qs(this.e,this.lat2,g),A=Math.abs(Math.abs(this.lat0)-Wt)<ee?0:qs(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>ee?this.ns=Math.log(c/v)/Math.log(f/E):this.ns=n,isNaN(this.ns)&&(this.ns=n),this.f0=c/(this.ns*Math.pow(f,this.ns)),this.rh=this.a*this.f0*Math.pow(A,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function fv(e){var n=e.x,o=e.y;Math.abs(2*Math.abs(o)-Math.PI)<=ee&&(o=Bu(o)*(Wt-2*ee));var c=Math.abs(Math.abs(o)-Wt),f,g;if(c>ee)f=qs(this.e,o,Math.sin(o)),g=this.a*this.f0*Math.pow(f,this.ns);else{if(c=o*this.ns,c<=0)return null;g=0}var y=this.ns*se(n-this.long0,this.over);return e.x=this.k0*(g*Math.sin(y))+this.x0,e.y=this.k0*(this.rh-g*Math.cos(y))+this.y0,e}function dv(e){var n,o,c,f,g,y=(e.x-this.x0)/this.k0,v=this.rh-(e.y-this.y0)/this.k0;this.ns>0?(n=Math.sqrt(y*y+v*v),o=1):(n=-Math.sqrt(y*y+v*v),o=-1);var E=0;if(n!==0&&(E=Math.atan2(o*y,o*v)),n!==0||this.ns>0){if(o=1/this.ns,c=Math.pow(n/(this.a*this.f0),o),f=Cu(this.e,c),f===-9999)return null}else f=-Wt;return g=se(E/this.ns+this.long0,this.over),e.x=g,e.y=f,e}var pv=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const gv={init:cv,forward:fv,inverse:dv,names:pv};function mv(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function _v(e){var n,o,c,f,g,y,v,E=e.x,A=e.y,D=se(E-this.long0,this.over);return n=Math.pow((1+this.e*Math.sin(A))/(1-this.e*Math.sin(A)),this.alfa*this.e/2),o=2*(Math.atan(this.k*Math.pow(Math.tan(A/2+this.s45),this.alfa)/n)-this.s45),c=-D*this.alfa,f=Math.asin(Math.cos(this.ad)*Math.sin(o)+Math.sin(this.ad)*Math.cos(o)*Math.cos(c)),g=Math.asin(Math.cos(o)*Math.sin(c)/Math.cos(f)),y=this.n*g,v=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(f/2+this.s45),this.n),e.y=v*Math.cos(y)/1,e.x=v*Math.sin(y)/1,this.czech||(e.y*=-1,e.x*=-1),e}function yv(e){var n,o,c,f,g,y,v,E,A=e.x;e.x=e.y,e.y=A,this.czech||(e.y*=-1,e.x*=-1),y=Math.sqrt(e.x*e.x+e.y*e.y),g=Math.atan2(e.y,e.x),f=g/Math.sin(this.s0),c=2*(Math.atan(Math.pow(this.ro0/y,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),n=Math.asin(Math.cos(this.ad)*Math.sin(c)-Math.sin(this.ad)*Math.cos(c)*Math.cos(f)),o=Math.asin(Math.cos(c)*Math.sin(f)/Math.cos(n)),e.x=this.long0-o/this.alfa,v=n,E=0;var D=0;do e.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(n/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(v))/(1-this.e*Math.sin(v)),this.e/2))-this.s45),Math.abs(v-e.y)<1e-10&&(E=1),v=e.y,D+=1;while(E===0&&D<15);return D>=15?null:e}var vv=["Krovak","krovak"];const xv={init:mv,forward:_v,inverse:yv,names:vv};function er(e,n,o,c,f){return e*f-n*Math.sin(2*f)+o*Math.sin(4*f)-c*Math.sin(6*f)}function Tu(e){return 1-.25*e*(1+e/16*(3+1.25*e))}function Iu(e){return .375*e*(1+.25*e*(1+.46875*e))}function Ru(e){return .05859375*e*e*(1+.75*e)}function Ou(e){return e*e*e*(35/3072)}function vf(e,n,o){var c=n*o;return e/Math.sqrt(1-c*c)}function Ra(e){return Math.abs(e)<Wt?e:e-Bu(e)*Math.PI}function kh(e,n,o,c,f){var g,y;g=e/n;for(var v=0;v<15;v++)if(y=(e-(n*g-o*Math.sin(2*g)+c*Math.sin(4*g)-f*Math.sin(6*g)))/(n-2*o*Math.cos(2*g)+4*c*Math.cos(4*g)-6*f*Math.cos(6*g)),g+=y,Math.abs(y)<=1e-10)return g;return NaN}function wv(){this.sphere||(this.e0=Tu(this.es),this.e1=Iu(this.es),this.e2=Ru(this.es),this.e3=Ou(this.es),this.ml0=this.a*er(this.e0,this.e1,this.e2,this.e3,this.lat0))}function Mv(e){var n,o,c=e.x,f=e.y;if(c=se(c-this.long0,this.over),this.sphere)n=this.a*Math.asin(Math.cos(f)*Math.sin(c)),o=this.a*(Math.atan2(Math.tan(f),Math.cos(c))-this.lat0);else{var g=Math.sin(f),y=Math.cos(f),v=vf(this.a,this.e,g),E=Math.tan(f)*Math.tan(f),A=c*Math.cos(f),D=A*A,P=this.es*y*y/(1-this.es),B=this.a*er(this.e0,this.e1,this.e2,this.e3,f);n=v*A*(1-D*E*(1/6-(8-E+8*P)*D/120)),o=B-this.ml0+v*g/y*D*(.5+(5-E+6*P)*D/24)}return e.x=n+this.x0,e.y=o+this.y0,e}function Ev(e){e.x-=this.x0,e.y-=this.y0;var n=e.x/this.a,o=e.y/this.a,c,f;if(this.sphere){var g=o+this.lat0;c=Math.asin(Math.sin(g)*Math.cos(n)),f=Math.atan2(Math.tan(n),Math.cos(g))}else{var y=this.ml0/this.a+o,v=kh(y,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(v)-Wt)<=ee)return e.x=this.long0,e.y=Wt,o<0&&(e.y*=-1),e;var E=vf(this.a,this.e,Math.sin(v)),A=E*E*E/this.a/this.a*(1-this.es),D=Math.pow(Math.tan(v),2),P=n*this.a/E,B=P*P;c=v-E*Math.tan(v)/A*P*P*(.5-(1+3*D)*P*P/24),f=P*(1-B*(D/3+(1+3*D)*D*B/15))/Math.cos(v)}return e.x=se(f+this.long0,this.over),e.y=Ra(c),e}var Lv=["Cassini","Cassini_Soldner","cass"];const Cv={init:wv,forward:Mv,inverse:Ev,names:Lv};function ka(e,n){var o;return e>1e-7?(o=e*n,(1-e*e)*(n/(1-o*o)-.5/e*Math.log((1-o)/(1+o)))):2*n}var Jc=1,Xc=2,Yc=3,xh=4;function bv(){var e=Math.abs(this.lat0);if(Math.abs(e-Wt)<ee?this.mode=this.lat0<0?Jc:Xc:Math.abs(e)<ee?this.mode=Yc:this.mode=xh,this.es>0){var n;switch(this.qp=ka(this.e,1),this.mmf=.5/(1-this.es),this.apa=Ov(this.es),this.mode){case Xc:this.dd=1;break;case Jc:this.dd=1;break;case Yc:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case xh:this.rq=Math.sqrt(.5*this.qp),n=Math.sin(this.lat0),this.sinb1=ka(this.e,n)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*n*n)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===xh&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function Sv(e){var n,o,c,f,g,y,v,E,A,D,P=e.x,B=e.y;if(P=se(P-this.long0,this.over),this.sphere){if(g=Math.sin(B),D=Math.cos(B),c=Math.cos(P),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(o=this.mode===this.EQUIT?1+D*c:1+this.sinph0*g+this.cosph0*D*c,o<=ee)return null;o=Math.sqrt(2/o),n=o*D*Math.sin(P),o*=this.mode===this.EQUIT?g:this.cosph0*g-this.sinph0*D*c}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(c=-c),Math.abs(B+this.lat0)<ee)return null;o=hi-B*.5,o=2*(this.mode===this.S_POLE?Math.cos(o):Math.sin(o)),n=o*Math.sin(P),o*=c}}else{switch(v=0,E=0,A=0,c=Math.cos(P),f=Math.sin(P),g=Math.sin(B),y=ka(this.e,g),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(v=y/this.qp,E=Math.sqrt(1-v*v)),this.mode){case this.OBLIQ:A=1+this.sinb1*v+this.cosb1*E*c;break;case this.EQUIT:A=1+E*c;break;case this.N_POLE:A=Wt+B,y=this.qp-y;break;case this.S_POLE:A=B-Wt,y=this.qp+y;break}if(Math.abs(A)<ee)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:A=Math.sqrt(2/A),this.mode===this.OBLIQ?o=this.ymf*A*(this.cosb1*v-this.sinb1*E*c):o=(A=Math.sqrt(2/(1+E*c)))*v*this.ymf,n=this.xmf*A*E*f;break;case this.N_POLE:case this.S_POLE:y>=0?(n=(A=Math.sqrt(y))*f,o=c*(this.mode===this.S_POLE?A:-A)):n=o=0;break}}return e.x=this.a*n+this.x0,e.y=this.a*o+this.y0,e}function kv(e){e.x-=this.x0,e.y-=this.y0;var n=e.x/this.a,o=e.y/this.a,c,f,g,y,v,E,A;if(this.sphere){var D=0,P,B=0;if(P=Math.sqrt(n*n+o*o),f=P*.5,f>1)return null;switch(f=2*Math.asin(f),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(B=Math.sin(f),D=Math.cos(f)),this.mode){case this.EQUIT:f=Math.abs(P)<=ee?0:Math.asin(o*B/P),n*=B,o=D*P;break;case this.OBLIQ:f=Math.abs(P)<=ee?this.lat0:Math.asin(D*this.sinph0+o*B*this.cosph0/P),n*=B*this.cosph0,o=(D-Math.sin(f)*this.sinph0)*P;break;case this.N_POLE:o=-o,f=Wt-f;break;case this.S_POLE:f-=Wt;break}c=o===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(n,o)}else{if(A=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(n/=this.dd,o*=this.dd,E=Math.sqrt(n*n+o*o),E<ee)return e.x=this.long0,e.y=this.lat0,e;y=2*Math.asin(.5*E/this.rq),g=Math.cos(y),n*=y=Math.sin(y),this.mode===this.OBLIQ?(A=g*this.sinb1+o*y*this.cosb1/E,v=this.qp*A,o=E*this.cosb1*g-o*this.sinb1*y):(A=o*y/E,v=this.qp*A,o=E*g)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(o=-o),v=n*n+o*o,!v)return e.x=this.long0,e.y=this.lat0,e;A=1-v/this.qp,this.mode===this.S_POLE&&(A=-A)}c=Math.atan2(n,o),f=Dv(Math.asin(A),this.apa)}return e.x=se(this.long0+c,this.over),e.y=f,e}var Pv=.3333333333333333,Av=.17222222222222222,Bv=.10257936507936508,Tv=.06388888888888888,Iv=.0664021164021164,Rv=.016415012942191543;function Ov(e){var n,o=[];return o[0]=e*Pv,n=e*e,o[0]+=n*Av,o[1]=n*Tv,n*=e,o[0]+=n*Bv,o[1]+=n*Iv,o[2]=n*Rv,o}function Dv(e,n){var o=e+e;return e+n[0]*Math.sin(o)+n[1]*Math.sin(o+o)+n[2]*Math.sin(o+o+o)}var Nv=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const Fv={init:bv,forward:Sv,inverse:kv,names:Nv,S_POLE:Jc,N_POLE:Xc,EQUIT:Yc,OBLIQ:xh};function Ba(e){return Math.abs(e)>1&&(e=e>1?1:-1),Math.asin(e)}function Gv(){Math.abs(this.lat1+this.lat2)<ee||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=mo(this.e3,this.sin_po,this.cos_po),this.qs1=ka(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=mo(this.e3,this.sin_po,this.cos_po),this.qs2=ka(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=ka(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>ee?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function zv(e){var n=e.x,o=e.y;this.sin_phi=Math.sin(o),this.cos_phi=Math.cos(o);var c=ka(this.e3,this.sin_phi),f=this.a*Math.sqrt(this.c-this.ns0*c)/this.ns0,g=this.ns0*se(n-this.long0,this.over),y=f*Math.sin(g)+this.x0,v=this.rh-f*Math.cos(g)+this.y0;return e.x=y,e.y=v,e}function jv(e){var n,o,c,f,g,y;return e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns0>=0?(n=Math.sqrt(e.x*e.x+e.y*e.y),c=1):(n=-Math.sqrt(e.x*e.x+e.y*e.y),c=-1),f=0,n!==0&&(f=Math.atan2(c*e.x,c*e.y)),c=n*this.ns0/this.a,this.sphere?y=Math.asin((this.c-c*c)/(2*this.ns0)):(o=(this.c-c*c)/this.ns0,y=this.phi1z(this.e3,o)),g=se(f/this.ns0+this.long0,this.over),e.x=g,e.y=y,e}function Uv(e,n){var o,c,f,g,y,v=Ba(.5*n);if(e<ee)return v;for(var E=e*e,A=1;A<=25;A++)if(o=Math.sin(v),c=Math.cos(v),f=e*o,g=1-f*f,y=.5*g*g/c*(n/(1-E)-o/g+.5/e*Math.log((1-f)/(1+f))),v=v+y,Math.abs(y)<=1e-7)return v;return null}var Hv=["Albers_Conic_Equal_Area","Albers_Equal_Area","Albers","aea"];const Vv={init:Gv,forward:zv,inverse:jv,names:Hv,phi1z:Uv};function Wv(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function $v(e){var n,o,c,f,g,y,v,E,A=e.x,D=e.y;return c=se(A-this.long0,this.over),n=Math.sin(D),o=Math.cos(D),f=Math.cos(c),y=this.sin_p14*n+this.cos_p14*o*f,g=1,y>0||Math.abs(y)<=ee?(v=this.x0+this.a*g*o*Math.sin(c)/y,E=this.y0+this.a*g*(this.cos_p14*n-this.sin_p14*o*f)/y):(v=this.x0+this.infinity_dist*o*Math.sin(c),E=this.y0+this.infinity_dist*(this.cos_p14*n-this.sin_p14*o*f)),e.x=v,e.y=E,e}function Zv(e){var n,o,c,f,g,y;return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,(n=Math.sqrt(e.x*e.x+e.y*e.y))?(f=Math.atan2(n,this.rc),o=Math.sin(f),c=Math.cos(f),y=Ba(c*this.sin_p14+e.y*o*this.cos_p14/n),g=Math.atan2(e.x*o,n*this.cos_p14*c-e.y*this.sin_p14*o),g=se(this.long0+g,this.over)):(y=this.phic0,g=0),e.x=g,e.y=y,e}var qv=["gnom"];const Kv={init:Wv,forward:$v,inverse:Zv,names:qv};function Jv(e,n){var o=1-(1-e*e)/(2*e)*Math.log((1-e)/(1+e));if(Math.abs(Math.abs(n)-o)<1e-6)return n<0?-1*Wt:Wt;for(var c=Math.asin(.5*n),f,g,y,v,E=0;E<30;E++)if(g=Math.sin(c),y=Math.cos(c),v=e*g,f=Math.pow(1-v*v,2)/(2*y)*(n/(1-e*e)-g/(1-v*v)+.5/e*Math.log((1-v)/(1+v))),c+=f,Math.abs(f)<=1e-10)return c;return NaN}function Xv(){this.sphere||(this.k0=mo(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function Yv(e){var n=e.x,o=e.y,c,f,g=se(n-this.long0,this.over);if(this.sphere)c=this.x0+this.a*g*Math.cos(this.lat_ts),f=this.y0+this.a*Math.sin(o)/Math.cos(this.lat_ts);else{var y=ka(this.e,Math.sin(o));c=this.x0+this.a*this.k0*g,f=this.y0+this.a*y*.5/this.k0}return e.x=c,e.y=f,e}function Qv(e){e.x-=this.x0,e.y-=this.y0;var n,o;return this.sphere?(n=se(this.long0+e.x/this.a/Math.cos(this.lat_ts),this.over),o=Math.asin(e.y/this.a*Math.cos(this.lat_ts))):(o=Jv(this.e,2*e.y*this.k0/this.a),n=se(this.long0+e.x/(this.a*this.k0),this.over)),e.x=n,e.y=o,e}var t1=["cea"];const e1={init:Xv,forward:Yv,inverse:Qv,names:t1};function i1(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function n1(e){var n=e.x,o=e.y,c=se(n-this.long0,this.over),f=Ra(o-this.lat0);return e.x=this.x0+this.a*c*this.rc,e.y=this.y0+this.a*f,e}function r1(e){var n=e.x,o=e.y;return e.x=se(this.long0+(n-this.x0)/(this.a*this.rc),this.over),e.y=Ra(this.lat0+(o-this.y0)/this.a),e}var s1=["Equirectangular","Equidistant_Cylindrical","Equidistant_Cylindrical_Spherical","eqc"];const o1={init:i1,forward:n1,inverse:r1,names:s1};var C0=20;function a1(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Tu(this.es),this.e1=Iu(this.es),this.e2=Ru(this.es),this.e3=Ou(this.es),this.ml0=this.a*er(this.e0,this.e1,this.e2,this.e3,this.lat0)}function l1(e){var n=e.x,o=e.y,c,f,g,y=se(n-this.long0,this.over);if(g=y*Math.sin(o),this.sphere)Math.abs(o)<=ee?(c=this.a*y,f=-1*this.a*this.lat0):(c=this.a*Math.sin(g)/Math.tan(o),f=this.a*(Ra(o-this.lat0)+(1-Math.cos(g))/Math.tan(o)));else if(Math.abs(o)<=ee)c=this.a*y,f=-1*this.ml0;else{var v=vf(this.a,this.e,Math.sin(o))/Math.tan(o);c=v*Math.sin(g),f=this.a*er(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+v*(1-Math.cos(g))}return e.x=c+this.x0,e.y=f+this.y0,e}function u1(e){var n,o,c,f,g,y,v,E,A;if(c=e.x-this.x0,f=e.y-this.y0,this.sphere)if(Math.abs(f+this.a*this.lat0)<=ee)n=se(c/this.a+this.long0,this.over),o=0;else{y=this.lat0+f/this.a,v=c*c/this.a/this.a+y*y,E=y;var D;for(g=C0;g;--g)if(D=Math.tan(E),A=-1*(y*(E*D+1)-E-.5*(E*E+v)*D)/((E-y)/D-1),E+=A,Math.abs(A)<=ee){o=E;break}n=se(this.long0+Math.asin(c*Math.tan(E)/this.a)/Math.sin(o),this.over)}else if(Math.abs(f+this.ml0)<=ee)o=0,n=se(this.long0+c/this.a,this.over);else{y=(this.ml0+f)/this.a,v=c*c/this.a/this.a+y*y,E=y;var P,B,W,J,Z;for(g=C0;g;--g)if(Z=this.e*Math.sin(E),P=Math.sqrt(1-Z*Z)*Math.tan(E),B=this.a*er(this.e0,this.e1,this.e2,this.e3,E),W=this.e0-2*this.e1*Math.cos(2*E)+4*this.e2*Math.cos(4*E)-6*this.e3*Math.cos(6*E),J=B/this.a,A=(y*(P*J+1)-J-.5*P*(J*J+v))/(this.es*Math.sin(2*E)*(J*J+v-2*y*J)/(4*P)+(y-J)*(P*W-2/Math.sin(2*E))-W),E-=A,Math.abs(A)<=ee){o=E;break}P=Math.sqrt(1-this.es*Math.pow(Math.sin(o),2))*Math.tan(o),n=se(this.long0+Math.asin(c*P/this.a)/Math.sin(o),this.over)}return e.x=n,e.y=o,e}var h1=["Polyconic","American_Polyconic","poly"];const c1={init:a1,forward:l1,inverse:u1,names:h1};function f1(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function d1(e){var n,o=e.x,c=e.y,f=c-this.lat0,g=o-this.long0,y=f/yu*1e-5,v=g,E=1,A=0;for(n=1;n<=10;n++)E=E*y,A=A+this.A[n]*E;var D=A,P=v,B=1,W=0,J,Z,q=0,ct=0;for(n=1;n<=6;n++)J=B*D-W*P,Z=W*D+B*P,B=J,W=Z,q=q+this.B_re[n]*B-this.B_im[n]*W,ct=ct+this.B_im[n]*B+this.B_re[n]*W;return e.x=ct*this.a+this.x0,e.y=q*this.a+this.y0,e}function p1(e){var n,o=e.x,c=e.y,f=o-this.x0,g=c-this.y0,y=g/this.a,v=f/this.a,E=1,A=0,D,P,B=0,W=0;for(n=1;n<=6;n++)D=E*y-A*v,P=A*y+E*v,E=D,A=P,B=B+this.C_re[n]*E-this.C_im[n]*A,W=W+this.C_im[n]*E+this.C_re[n]*A;for(var J=0;J<this.iterations;J++){var Z=B,q=W,ct,ft,St=y,Tt=v;for(n=2;n<=6;n++)ct=Z*B-q*W,ft=q*B+Z*W,Z=ct,q=ft,St=St+(n-1)*(this.B_re[n]*Z-this.B_im[n]*q),Tt=Tt+(n-1)*(this.B_im[n]*Z+this.B_re[n]*q);Z=1,q=0;var Gt=this.B_re[1],zt=this.B_im[1];for(n=2;n<=6;n++)ct=Z*B-q*W,ft=q*B+Z*W,Z=ct,q=ft,Gt=Gt+n*(this.B_re[n]*Z-this.B_im[n]*q),zt=zt+n*(this.B_im[n]*Z+this.B_re[n]*q);var Dt=Gt*Gt+zt*zt;B=(St*Gt+Tt*zt)/Dt,W=(Tt*Gt-St*zt)/Dt}var ut=B,Bt=W,st=1,yt=0;for(n=1;n<=9;n++)st=st*ut,yt=yt+this.D[n]*st;var Ct=this.lat0+yt*yu*1e5,oe=this.long0+Bt;return e.x=oe,e.y=Ct,e}var g1=["New_Zealand_Map_Grid","nzmg"];const m1={init:f1,forward:d1,inverse:p1,names:g1};function _1(){}function y1(e){var n=e.x,o=e.y,c=se(n-this.long0,this.over),f=this.x0+this.a*c,g=this.y0+this.a*Math.log(Math.tan(Math.PI/4+o/2.5))*1.25;return e.x=f,e.y=g,e}function v1(e){e.x-=this.x0,e.y-=this.y0;var n=se(this.long0+e.x/this.a,this.over),o=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);return e.x=n,e.y=o,e}var x1=["Miller_Cylindrical","mill"];const w1={init:_1,forward:y1,inverse:v1,names:x1};var M1=20;function E1(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=df(this.es)}function L1(e){var n,o,c=e.x,f=e.y;if(c=se(c-this.long0,this.over),this.sphere){if(!this.m)f=this.n!==1?Math.asin(this.n*Math.sin(f)):f;else for(var g=this.n*Math.sin(f),y=M1;y;--y){var v=(this.m*f+Math.sin(f)-g)/(this.m+Math.cos(f));if(f-=v,Math.abs(v)<ee)break}n=this.a*this.C_x*c*(this.m+Math.cos(f)),o=this.a*this.C_y*f}else{var E=Math.sin(f),A=Math.cos(f);o=this.a*jl(f,E,A,this.en),n=this.a*c*A/Math.sqrt(1-this.es*E*E)}return e.x=n,e.y=o,e}function C1(e){var n,o,c,f;return e.x-=this.x0,c=e.x/this.a,e.y-=this.y0,n=e.y/this.a,this.sphere?(n/=this.C_y,c=c/(this.C_x*(this.m+Math.cos(n))),this.m?n=Ba((this.m*n+Math.sin(n))/this.n):this.n!==1&&(n=Ba(Math.sin(n)/this.n)),c=se(c+this.long0,this.over),n=Ra(n)):(n=pf(e.y/this.a,this.es,this.en),f=Math.abs(n),f<Wt?(f=Math.sin(n),o=this.long0+e.x*Math.sqrt(1-this.es*f*f)/(this.a*Math.cos(n)),c=se(o,this.over)):f-ee<Wt&&(c=this.long0)),e.x=c,e.y=n,e}var b1=["Sinusoidal","sinu"];const S1={init:E1,forward:L1,inverse:C1,names:b1};function k1(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0}function P1(e){for(var n=e.x,o=e.y,c=se(n-this.long0,this.over),f=o,g=Math.PI*Math.sin(o);;){var y=-(f+Math.sin(f)-g)/(1+Math.cos(f));if(f+=y,Math.abs(y)<ee)break}f/=2,Math.PI/2-Math.abs(o)<ee&&(c=0);var v=.900316316158*this.a*c*Math.cos(f)+this.x0,E=1.4142135623731*this.a*Math.sin(f)+this.y0;return e.x=v,e.y=E,e}function A1(e){var n,o;e.x-=this.x0,e.y-=this.y0,o=e.y/(1.4142135623731*this.a),Math.abs(o)>.999999999999&&(o=.999999999999),n=Math.asin(o);var c=se(this.long0+e.x/(.900316316158*this.a*Math.cos(n)),this.over);c<-Math.PI&&(c=-Math.PI),c>Math.PI&&(c=Math.PI),o=(2*n+Math.sin(2*n))/Math.PI,Math.abs(o)>1&&(o=1);var f=Math.asin(o);return e.x=c,e.y=f,e}var B1=["Mollweide","moll"];const T1={init:k1,forward:P1,inverse:A1,names:B1};function I1(){Math.abs(this.lat1+this.lat2)<ee||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Tu(this.es),this.e1=Iu(this.es),this.e2=Ru(this.es),this.e3=Ou(this.es),this.sin_phi=Math.sin(this.lat1),this.cos_phi=Math.cos(this.lat1),this.ms1=mo(this.e,this.sin_phi,this.cos_phi),this.ml1=er(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<ee?this.ns=this.sin_phi:(this.sin_phi=Math.sin(this.lat2),this.cos_phi=Math.cos(this.lat2),this.ms2=mo(this.e,this.sin_phi,this.cos_phi),this.ml2=er(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=er(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function R1(e){var n=e.x,o=e.y,c;if(this.sphere)c=this.a*(this.g-o);else{var f=er(this.e0,this.e1,this.e2,this.e3,o);c=this.a*(this.g-f)}var g=this.ns*se(n-this.long0,this.over),y=this.x0+c*Math.sin(g),v=this.y0+this.rh-c*Math.cos(g);return e.x=y,e.y=v,e}function O1(e){e.x-=this.x0,e.y=this.rh-e.y+this.y0;var n,o,c,f;this.ns>=0?(o=Math.sqrt(e.x*e.x+e.y*e.y),n=1):(o=-Math.sqrt(e.x*e.x+e.y*e.y),n=-1);var g=0;if(o!==0&&(g=Math.atan2(n*e.x,n*e.y)),this.sphere)return f=se(this.long0+g/this.ns,this.over),c=Ra(this.g-o/this.a),e.x=f,e.y=c,e;var y=this.g-o/this.a;return c=kh(y,this.e0,this.e1,this.e2,this.e3),f=se(this.long0+g/this.ns,this.over),e.x=f,e.y=c,e}var D1=["Equidistant_Conic","eqdc"];const N1={init:I1,forward:R1,inverse:O1,names:D1};function F1(){this.R=this.a}function G1(e){var n=e.x,o=e.y,c=se(n-this.long0,this.over),f,g;Math.abs(o)<=ee&&(f=this.x0+this.R*c,g=this.y0);var y=Ba(2*Math.abs(o/Math.PI));(Math.abs(c)<=ee||Math.abs(Math.abs(o)-Wt)<=ee)&&(f=this.x0,o>=0?g=this.y0+Math.PI*this.R*Math.tan(.5*y):g=this.y0+Math.PI*this.R*-Math.tan(.5*y));var v=.5*Math.abs(Math.PI/c-c/Math.PI),E=v*v,A=Math.sin(y),D=Math.cos(y),P=D/(A+D-1),B=P*P,W=P*(2/A-1),J=W*W,Z=Math.PI*this.R*(v*(P-J)+Math.sqrt(E*(P-J)*(P-J)-(J+E)*(B-J)))/(J+E);c<0&&(Z=-Z),f=this.x0+Z;var q=E+P;return Z=Math.PI*this.R*(W*q-v*Math.sqrt((J+E)*(E+1)-q*q))/(J+E),o>=0?g=this.y0+Z:g=this.y0-Z,e.x=f,e.y=g,e}function z1(e){var n,o,c,f,g,y,v,E,A,D,P,B,W;return e.x-=this.x0,e.y-=this.y0,P=Math.PI*this.R,c=e.x/P,f=e.y/P,g=c*c+f*f,y=-Math.abs(f)*(1+g),v=y-2*f*f+c*c,E=-2*y+1+2*f*f+g*g,W=f*f/E+(2*v*v*v/E/E/E-9*y*v/E/E)/27,A=(y-v*v/3/E)/E,D=2*Math.sqrt(-A/3),P=3*W/A/D,Math.abs(P)>1&&(P>=0?P=1:P=-1),B=Math.acos(P)/3,e.y>=0?o=(-D*Math.cos(B+Math.PI/3)-v/3/E)*Math.PI:o=-(-D*Math.cos(B+Math.PI/3)-v/3/E)*Math.PI,Math.abs(c)<ee?n=this.long0:n=se(this.long0+Math.PI*(g-1+Math.sqrt(1+2*(c*c-f*f)+g*g))/2/c,this.over),e.x=n,e.y=o,e}var j1=["Van_der_Grinten_I","VanDerGrinten","Van_der_Grinten","vandg"];const U1={init:F1,forward:G1,inverse:z1,names:j1};function H1(e,n,o,c,f,g){const y=c-n,v=Math.atan((1-g)*Math.tan(e)),E=Math.atan((1-g)*Math.tan(o)),A=Math.sin(v),D=Math.cos(v),P=Math.sin(E),B=Math.cos(E);let W=y,J,Z=100,q,ct,ft,St,Tt,Gt,zt,Dt,ut,Bt,st,yt,Ct,oe;do{if(q=Math.sin(W),ct=Math.cos(W),ft=Math.sqrt(B*q*(B*q)+(D*P-A*B*ct)*(D*P-A*B*ct)),ft===0)return{azi1:0,s12:0};St=A*P+D*B*ct,Tt=Math.atan2(ft,St),Gt=D*B*q/ft,zt=1-Gt*Gt,Dt=zt!==0?St-2*A*P/zt:0,ut=g/16*zt*(4+g*(4-3*zt)),J=W,W=y+(1-ut)*g*Gt*(Tt+ut*ft*(Dt+ut*St*(-1+2*Dt*Dt)))}while(Math.abs(W-J)>1e-12&&--Z>0);return Z===0?{azi1:NaN,s12:NaN}:(Bt=zt*(f*f-f*(1-g)*(f*(1-g)))/(f*(1-g)*(f*(1-g))),st=1+Bt/16384*(4096+Bt*(-768+Bt*(320-175*Bt))),yt=Bt/1024*(256+Bt*(-128+Bt*(74-47*Bt))),Ct=yt*ft*(Dt+yt/4*(St*(-1+2*Dt*Dt)-yt/6*Dt*(-3+4*ft*ft)*(-3+4*Dt*Dt))),oe=f*(1-g)*st*(Tt-Ct),{azi1:Math.atan2(B*q,D*P-A*B*ct),s12:oe})}function V1(e,n,o,c,f,g){const y=Math.atan((1-g)*Math.tan(e)),v=Math.sin(y),E=Math.cos(y),A=Math.sin(o),D=Math.cos(o),P=Math.atan2(v,E*D),B=E*A,W=1-B*B,J=W*(f*f-f*(1-g)*(f*(1-g)))/(f*(1-g)*(f*(1-g))),Z=1+J/16384*(4096+J*(-768+J*(320-175*J))),q=J/1024*(256+J*(-128+J*(74-47*J)));let ct=c/(f*(1-g)*Z),ft,St=100,Tt,Gt,zt,Dt;do Tt=Math.cos(2*P+ct),Gt=Math.sin(ct),zt=Math.cos(ct),Dt=q*Gt*(Tt+q/4*(zt*(-1+2*Tt*Tt)-q/6*Tt*(-3+4*Gt*Gt)*(-3+4*Tt*Tt))),ft=ct,ct=c/(f*(1-g)*Z)+Dt;while(Math.abs(ct-ft)>1e-12&&--St>0);if(St===0)return{lat2:NaN,lon2:NaN};const ut=v*Gt-E*zt*D,Bt=Math.atan2(v*zt+E*Gt*D,(1-g)*Math.sqrt(B*B+ut*ut)),st=Math.atan2(Gt*A,E*zt-v*Gt*D),yt=g/16*W*(4+g*(4-3*W)),Ct=st-(1-yt)*g*B*(ct+yt*Gt*(Tt+yt*zt*(-1+2*Tt*Tt))),oe=n+Ct;return{lat2:Bt,lon2:oe}}function W1(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0),this.f=this.es/(1+Math.sqrt(1-this.es))}function $1(e){var n=e.x,o=e.y,c=Math.sin(e.y),f=Math.cos(e.y),g=se(n-this.long0,this.over),y,v,E,A,D,P,B,W,J,Z,q;return this.sphere?Math.abs(this.sin_p12-1)<=ee?(e.x=this.x0+this.a*(Wt-o)*Math.sin(g),e.y=this.y0-this.a*(Wt-o)*Math.cos(g),e):Math.abs(this.sin_p12+1)<=ee?(e.x=this.x0+this.a*(Wt+o)*Math.sin(g),e.y=this.y0+this.a*(Wt+o)*Math.cos(g),e):(J=this.sin_p12*c+this.cos_p12*f*Math.cos(g),B=Math.acos(J),W=B?B/Math.sin(B):1,e.x=this.x0+this.a*W*f*Math.sin(g),e.y=this.y0+this.a*W*(this.cos_p12*c-this.sin_p12*f*Math.cos(g)),e):(y=Tu(this.es),v=Iu(this.es),E=Ru(this.es),A=Ou(this.es),Math.abs(this.sin_p12-1)<=ee?(D=this.a*er(y,v,E,A,Wt),P=this.a*er(y,v,E,A,o),e.x=this.x0+(D-P)*Math.sin(g),e.y=this.y0-(D-P)*Math.cos(g),e):Math.abs(this.sin_p12+1)<=ee?(D=this.a*er(y,v,E,A,Wt),P=this.a*er(y,v,E,A,o),e.x=this.x0+(D+P)*Math.sin(g),e.y=this.y0+(D+P)*Math.cos(g),e):Math.abs(n)<ee&&Math.abs(o-this.lat0)<ee?(e.x=e.y=0,e):(Z=H1(this.lat0,this.long0,o,n,this.a,this.f),q=Z.azi1,e.x=Z.s12*Math.sin(q),e.y=Z.s12*Math.cos(q),e))}function Z1(e){e.x-=this.x0,e.y-=this.y0;var n,o,c,f,g,y,v,E,A,D,P,B,W,J,Z,q;return this.sphere?(n=Math.sqrt(e.x*e.x+e.y*e.y),n>2*Wt*this.a?void 0:(o=n/this.a,c=Math.sin(o),f=Math.cos(o),g=this.long0,Math.abs(n)<=ee?y=this.lat0:(y=Ba(f*this.sin_p12+e.y*c*this.cos_p12/n),v=Math.abs(this.lat0)-Wt,Math.abs(v)<=ee?this.lat0>=0?g=se(this.long0+Math.atan2(e.x,-e.y),this.over):g=se(this.long0-Math.atan2(-e.x,e.y),this.over):g=se(this.long0+Math.atan2(e.x*c,n*this.cos_p12*f-e.y*this.sin_p12*c),this.over)),e.x=g,e.y=y,e)):(E=Tu(this.es),A=Iu(this.es),D=Ru(this.es),P=Ou(this.es),Math.abs(this.sin_p12-1)<=ee?(B=this.a*er(E,A,D,P,Wt),n=Math.sqrt(e.x*e.x+e.y*e.y),W=B-n,y=kh(W/this.a,E,A,D,P),g=se(this.long0+Math.atan2(e.x,-1*e.y),this.over),e.x=g,e.y=y,e):Math.abs(this.sin_p12+1)<=ee?(B=this.a*er(E,A,D,P,Wt),n=Math.sqrt(e.x*e.x+e.y*e.y),W=n-B,y=kh(W/this.a,E,A,D,P),g=se(this.long0+Math.atan2(e.x,e.y),this.over),e.x=g,e.y=y,e):(J=Math.atan2(e.x,e.y),Z=Math.sqrt(e.x*e.x+e.y*e.y),q=V1(this.lat0,this.long0,J,Z,this.a,this.f),e.x=q.lon2,e.y=q.lat2,e))}var q1=["Azimuthal_Equidistant","aeqd"];const K1={init:W1,forward:$1,inverse:Z1,names:q1};function J1(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function X1(e){var n,o,c,f,g,y,v,E,A=e.x,D=e.y;return c=se(A-this.long0,this.over),n=Math.sin(D),o=Math.cos(D),f=Math.cos(c),y=this.sin_p14*n+this.cos_p14*o*f,g=1,(y>0||Math.abs(y)<=ee)&&(v=this.a*g*o*Math.sin(c),E=this.y0+this.a*g*(this.cos_p14*n-this.sin_p14*o*f)),e.x=v,e.y=E,e}function Y1(e){var n,o,c,f,g,y,v;return e.x-=this.x0,e.y-=this.y0,n=Math.sqrt(e.x*e.x+e.y*e.y),o=Ba(n/this.a),c=Math.sin(o),f=Math.cos(o),y=this.long0,Math.abs(n)<=ee?(v=this.lat0,e.x=y,e.y=v,e):(v=Ba(f*this.sin_p14+e.y*c*this.cos_p14/n),g=Math.abs(this.lat0)-Wt,Math.abs(g)<=ee?(this.lat0>=0?y=se(this.long0+Math.atan2(e.x,-e.y),this.over):y=se(this.long0-Math.atan2(-e.x,e.y),this.over),e.x=y,e.y=v,e):(y=se(this.long0+Math.atan2(e.x*c,n*this.cos_p14*f-e.y*this.sin_p14*c),this.over),e.x=y,e.y=v,e))}var Q1=["ortho"];const t4={init:J1,forward:X1,inverse:Y1,names:Q1};var Ci={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},ci={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function e4(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=Wt-hi/2?this.face=Ci.TOP:this.lat0<=-(Wt-hi/2)?this.face=Ci.BOTTOM:Math.abs(this.long0)<=hi?this.face=Ci.FRONT:Math.abs(this.long0)<=Wt+hi?this.face=this.long0>0?Ci.RIGHT:Ci.LEFT:this.face=Ci.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function i4(e){var n={x:0,y:0},o,c,f,g,y,v,E={value:0};if(e.x-=this.long0,this.es!==0?o=Math.atan(this.one_minus_f_squared*Math.tan(e.y)):o=e.y,c=e.x,this.face===Ci.TOP)g=Wt-o,c>=hi&&c<=Wt+hi?(E.value=ci.AREA_0,f=c-Wt):c>Wt+hi||c<=-(Wt+hi)?(E.value=ci.AREA_1,f=c>0?c-Vi:c+Vi):c>-(Wt+hi)&&c<=-hi?(E.value=ci.AREA_2,f=c+Wt):(E.value=ci.AREA_3,f=c);else if(this.face===Ci.BOTTOM)g=Wt+o,c>=hi&&c<=Wt+hi?(E.value=ci.AREA_0,f=-c+Wt):c<hi&&c>=-hi?(E.value=ci.AREA_1,f=-c):c<-hi&&c>=-(Wt+hi)?(E.value=ci.AREA_2,f=-c-Wt):(E.value=ci.AREA_3,f=c>0?-c+Vi:-c-Vi);else{var A,D,P,B,W,J,Z;this.face===Ci.RIGHT?c=Fl(c,+Wt):this.face===Ci.BACK?c=Fl(c,+Vi):this.face===Ci.LEFT&&(c=Fl(c,-Wt)),B=Math.sin(o),W=Math.cos(o),J=Math.sin(c),Z=Math.cos(c),A=W*Z,D=W*J,P=B,this.face===Ci.FRONT?(g=Math.acos(A),f=gh(g,P,D,E)):this.face===Ci.RIGHT?(g=Math.acos(D),f=gh(g,P,-A,E)):this.face===Ci.BACK?(g=Math.acos(-A),f=gh(g,P,-D,E)):this.face===Ci.LEFT?(g=Math.acos(-D),f=gh(g,P,A,E)):(g=f=0,E.value=ci.AREA_0)}return v=Math.atan(12/Vi*(f+Math.acos(Math.sin(f)*Math.cos(hi))-Wt)),y=Math.sqrt((1-Math.cos(g))/(Math.cos(v)*Math.cos(v))/(1-Math.cos(Math.atan(1/Math.cos(f))))),E.value===ci.AREA_1?v+=Wt:E.value===ci.AREA_2?v+=Vi:E.value===ci.AREA_3&&(v+=1.5*Vi),n.x=y*Math.cos(v),n.y=y*Math.sin(v),n.x=n.x*this.a+this.x0,n.y=n.y*this.a+this.y0,e.x=n.x,e.y=n.y,e}function n4(e){var n={lam:0,phi:0},o,c,f,g,y,v,E,A,D,P={value:0};if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,c=Math.atan(Math.sqrt(e.x*e.x+e.y*e.y)),o=Math.atan2(e.y,e.x),e.x>=0&&e.x>=Math.abs(e.y)?P.value=ci.AREA_0:e.y>=0&&e.y>=Math.abs(e.x)?(P.value=ci.AREA_1,o-=Wt):e.x<0&&-e.x>=Math.abs(e.y)?(P.value=ci.AREA_2,o=o<0?o+Vi:o-Vi):(P.value=ci.AREA_3,o+=Wt),D=Vi/12*Math.tan(o),y=Math.sin(D)/(Math.cos(D)-1/Math.sqrt(2)),v=Math.atan(y),f=Math.cos(o),g=Math.tan(c),E=1-f*f*g*g*(1-Math.cos(Math.atan(1/Math.cos(v)))),E<-1?E=-1:E>1&&(E=1),this.face===Ci.TOP)A=Math.acos(E),n.phi=Wt-A,P.value===ci.AREA_0?n.lam=v+Wt:P.value===ci.AREA_1?n.lam=v<0?v+Vi:v-Vi:P.value===ci.AREA_2?n.lam=v-Wt:n.lam=v;else if(this.face===Ci.BOTTOM)A=Math.acos(E),n.phi=A-Wt,P.value===ci.AREA_0?n.lam=-v+Wt:P.value===ci.AREA_1?n.lam=-v:P.value===ci.AREA_2?n.lam=-v-Wt:n.lam=v<0?-v-Vi:-v+Vi;else{var B,W,J;B=E,D=B*B,D>=1?J=0:J=Math.sqrt(1-D)*Math.sin(v),D+=J*J,D>=1?W=0:W=Math.sqrt(1-D),P.value===ci.AREA_1?(D=W,W=-J,J=D):P.value===ci.AREA_2?(W=-W,J=-J):P.value===ci.AREA_3&&(D=W,W=J,J=-D),this.face===Ci.RIGHT?(D=B,B=-W,W=D):this.face===Ci.BACK?(B=-B,W=-W):this.face===Ci.LEFT&&(D=B,B=W,W=-D),n.phi=Math.acos(-J)-Wt,n.lam=Math.atan2(W,B),this.face===Ci.RIGHT?n.lam=Fl(n.lam,-Wt):this.face===Ci.BACK?n.lam=Fl(n.lam,-Vi):this.face===Ci.LEFT&&(n.lam=Fl(n.lam,+Wt))}if(this.es!==0){var Z,q,ct;Z=n.phi<0?1:0,q=Math.tan(n.phi),ct=this.b/Math.sqrt(q*q+this.one_minus_f_squared),n.phi=Math.atan(Math.sqrt(this.a*this.a-ct*ct)/(this.one_minus_f*ct)),Z&&(n.phi=-n.phi)}return n.lam+=this.long0,e.x=n.lam,e.y=n.phi,e}function gh(e,n,o,c){var f;return e<ee?(c.value=ci.AREA_0,f=0):(f=Math.atan2(n,o),Math.abs(f)<=hi?c.value=ci.AREA_0:f>hi&&f<=Wt+hi?(c.value=ci.AREA_1,f-=Wt):f>Wt+hi||f<=-(Wt+hi)?(c.value=ci.AREA_2,f=f>=0?f-Vi:f+Vi):(c.value=ci.AREA_3,f+=Wt)),f}function Fl(e,n){var o=e+n;return o<-Vi?o+=Eu:o>+Vi&&(o-=Eu),o}var r4=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const s4={init:e4,forward:i4,inverse:n4,names:r4};var Qc=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],_u=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Ap=.8487,Bp=1.3523,Tp=br/5,o4=1/Tp,Dl=18,Ph=function(e,n){return e[0]+n*(e[1]+n*(e[2]+n*e[3]))},a4=function(e,n){return e[1]+n*(2*e[2]+n*3*e[3])};function l4(e,n,o,c){for(var f=n;c;--c){var g=e(f);if(f-=g,Math.abs(g)<o)break}return f}function u4(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function h4(e){var n=se(e.x-this.long0,this.over),o=Math.abs(e.y),c=Math.floor(o*Tp);c<0?c=0:c>=Dl&&(c=Dl-1),o=br*(o-o4*c);var f={x:Ph(Qc[c],o)*n,y:Ph(_u[c],o)};return e.y<0&&(f.y=-f.y),f.x=f.x*this.a*Ap+this.x0,f.y=f.y*this.a*Bp+this.y0,f}function c4(e){var n={x:(e.x-this.x0)/(this.a*Ap),y:Math.abs(e.y-this.y0)/(this.a*Bp)};if(n.y>=1)n.x/=Qc[Dl][0],n.y=e.y<0?-Wt:Wt;else{var o=Math.floor(n.y*Dl);for(o<0?o=0:o>=Dl&&(o=Dl-1);;)if(_u[o][0]>n.y)--o;else if(_u[o+1][0]<=n.y)++o;else break;var c=_u[o],f=5*(n.y-c[0])/(_u[o+1][0]-c[0]);f=l4(function(g){return(Ph(c,g)-n.y)/a4(c,g)},f,ee,100),n.x/=Ph(Qc[o],f),n.y=(5*o+f)*Ti,e.y<0&&(n.y=-n.y)}return n.x=se(n.x+this.long0,this.over),n}var f4=["Robinson","robin"];const d4={init:u4,forward:h4,inverse:c4,names:f4};function p4(){this.name="geocent"}function g4(e){var n=vp(e,this.es,this.a);return n}function m4(e){var n=xp(e,this.es,this.a,this.b);return n}var _4=["Geocentric","geocentric","geocent","Geocent"];const y4={init:p4,forward:g4,inverse:m4,names:_4};var jn={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},cu={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function v4(){if(Object.keys(cu).forEach((function(o){if(typeof this[o]>"u")this[o]=cu[o].def;else{if(cu[o].num&&isNaN(this[o]))throw new Error("Invalid parameter value, must be numeric "+o+" = "+this[o]);cu[o].num&&(this[o]=parseFloat(this[o]))}cu[o].degrees&&(this[o]=this[o]*Ti)}).bind(this)),Math.abs(Math.abs(this.lat0)-Wt)<ee?this.mode=this.lat0<0?jn.S_POLE:jn.N_POLE:Math.abs(this.lat0)<ee?this.mode=jn.EQUIT:(this.mode=jn.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var e=this.tilt,n=this.azi;this.cg=Math.cos(n),this.sg=Math.sin(n),this.cw=Math.cos(e),this.sw=Math.sin(e)}function x4(e){e.x-=this.long0;var n=Math.sin(e.y),o=Math.cos(e.y),c=Math.cos(e.x),f,g;switch(this.mode){case jn.OBLIQ:g=this.sinph0*n+this.cosph0*o*c;break;case jn.EQUIT:g=o*c;break;case jn.S_POLE:g=-n;break;case jn.N_POLE:g=n;break}switch(g=this.pn1/(this.p-g),f=g*o*Math.sin(e.x),this.mode){case jn.OBLIQ:g*=this.cosph0*n-this.sinph0*o*c;break;case jn.EQUIT:g*=n;break;case jn.N_POLE:g*=-(o*c);break;case jn.S_POLE:g*=o*c;break}var y,v;return y=g*this.cg+f*this.sg,v=1/(y*this.sw*this.h1+this.cw),f=(f*this.cg-g*this.sg)*this.cw*v,g=y*v,e.x=f*this.a,e.y=g*this.a,e}function w4(e){e.x/=this.a,e.y/=this.a;var n={x:e.x,y:e.y},o,c,f;f=1/(this.pn1-e.y*this.sw),o=this.pn1*e.x*f,c=this.pn1*e.y*this.cw*f,e.x=o*this.cg+c*this.sg,e.y=c*this.cg-o*this.sg;var g=Cr(e.x,e.y);if(Math.abs(g)<ee)n.x=0,n.y=e.y;else{var y,v;switch(v=1-g*g*this.pfact,v=(this.p-Math.sqrt(v))/(this.pn1/g+g/this.pn1),y=Math.sqrt(1-v*v),this.mode){case jn.OBLIQ:n.y=Math.asin(y*this.sinph0+e.y*v*this.cosph0/g),e.y=(y-this.sinph0*Math.sin(n.y))*g,e.x*=v*this.cosph0;break;case jn.EQUIT:n.y=Math.asin(e.y*v/g),e.y=y*g,e.x*=v;break;case jn.N_POLE:n.y=Math.asin(y),e.y=-e.y;break;case jn.S_POLE:n.y=-Math.asin(y);break}n.x=Math.atan2(e.x,e.y)}return e.x=n.x+this.long0,e.y=n.y,e}var M4=["Tilted_Perspective","tpers"];const E4={init:v4,forward:x4,inverse:w4,names:M4};function L4(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var e=1-this.es,n=1/e;this.radius_p=Math.sqrt(e),this.radius_p2=e,this.radius_p_inv2=n,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function C4(e){var n=e.x,o=e.y,c,f,g,y;if(n=n-this.long0,this.shape==="ellipse"){o=Math.atan(this.radius_p2*Math.tan(o));var v=this.radius_p/Cr(this.radius_p*Math.cos(o),Math.sin(o));if(f=v*Math.cos(n)*Math.cos(o),g=v*Math.sin(n)*Math.cos(o),y=v*Math.sin(o),(this.radius_g-f)*f-g*g-y*y*this.radius_p_inv2<0)return e.x=Number.NaN,e.y=Number.NaN,e;c=this.radius_g-f,this.flip_axis?(e.x=this.radius_g_1*Math.atan(g/Cr(y,c)),e.y=this.radius_g_1*Math.atan(y/c)):(e.x=this.radius_g_1*Math.atan(g/c),e.y=this.radius_g_1*Math.atan(y/Cr(g,c)))}else this.shape==="sphere"&&(c=Math.cos(o),f=Math.cos(n)*c,g=Math.sin(n)*c,y=Math.sin(o),c=this.radius_g-f,this.flip_axis?(e.x=this.radius_g_1*Math.atan(g/Cr(y,c)),e.y=this.radius_g_1*Math.atan(y/c)):(e.x=this.radius_g_1*Math.atan(g/c),e.y=this.radius_g_1*Math.atan(y/Cr(g,c))));return e.x=e.x*this.a,e.y=e.y*this.a,e}function b4(e){var n=-1,o=0,c=0,f,g,y,v;if(e.x=e.x/this.a,e.y=e.y/this.a,this.shape==="ellipse"){this.flip_axis?(c=Math.tan(e.y/this.radius_g_1),o=Math.tan(e.x/this.radius_g_1)*Cr(1,c)):(o=Math.tan(e.x/this.radius_g_1),c=Math.tan(e.y/this.radius_g_1)*Cr(1,o));var E=c/this.radius_p;if(f=o*o+E*E+n*n,g=2*this.radius_g*n,y=g*g-4*f*this.C,y<0)return e.x=Number.NaN,e.y=Number.NaN,e;v=(-g-Math.sqrt(y))/(2*f),n=this.radius_g+v*n,o*=v,c*=v,e.x=Math.atan2(o,n),e.y=Math.atan(c*Math.cos(e.x)/n),e.y=Math.atan(this.radius_p_inv2*Math.tan(e.y))}else if(this.shape==="sphere"){if(this.flip_axis?(c=Math.tan(e.y/this.radius_g_1),o=Math.tan(e.x/this.radius_g_1)*Math.sqrt(1+c*c)):(o=Math.tan(e.x/this.radius_g_1),c=Math.tan(e.y/this.radius_g_1)*Math.sqrt(1+o*o)),f=o*o+c*c+n*n,g=2*this.radius_g*n,y=g*g-4*f*this.C,y<0)return e.x=Number.NaN,e.y=Number.NaN,e;v=(-g-Math.sqrt(y))/(2*f),n=this.radius_g+v*n,o*=v,c*=v,e.x=Math.atan2(o,n),e.y=Math.atan(c*Math.cos(e.x)/n)}return e.x=e.x+this.long0,e}var S4=["Geostationary Satellite View","Geostationary_Satellite","geos"];const k4={init:L4,forward:C4,inverse:b4,names:S4};var vu=1.340264,xu=-.081106,wu=893e-6,Mu=.003796,Ah=Math.sqrt(3)/2;function P4(){this.es=0,this.long0=this.long0!==void 0?this.long0:0,this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0}function A4(e){var n=se(e.x-this.long0,this.over),o=e.y,c=Math.asin(Ah*Math.sin(o)),f=c*c,g=f*f*f;return e.x=n*Math.cos(c)/(Ah*(vu+3*xu*f+g*(7*wu+9*Mu*f))),e.y=c*(vu+xu*f+g*(wu+Mu*f)),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function B4(e){e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a;var n=1e-9,o=12,c=e.y,f,g,y,v,E,A;for(A=0;A<o&&(f=c*c,g=f*f*f,y=c*(vu+xu*f+g*(wu+Mu*f))-e.y,v=vu+3*xu*f+g*(7*wu+9*Mu*f),c-=E=y/v,!(Math.abs(E)<n));++A);return f=c*c,g=f*f*f,e.x=Ah*e.x*(vu+3*xu*f+g*(7*wu+9*Mu*f))/Math.cos(c),e.y=Math.asin(Math.sin(c)/Ah),e.x=se(e.x+this.long0,this.over),e}var T4=["eqearth","Equal Earth","Equal_Earth"];const I4={init:P4,forward:A4,inverse:B4,names:T4};var bu=1e-10;function R4(){var e;if(this.phi1=this.lat1,Math.abs(this.phi1)<bu)throw new Error;this.es?(this.en=df(this.es),this.m1=jl(this.phi1,this.am1=Math.sin(this.phi1),e=Math.cos(this.phi1),this.en),this.am1=e/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=D4,this.forward=O4):(Math.abs(this.phi1)+bu>=Wt?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=F4,this.forward=N4)}function O4(e){var n=se(e.x-(this.long0||0),this.over),o=e.y,c,f,g;return c=this.am1+this.m1-jl(o,f=Math.sin(o),g=Math.cos(o),this.en),f=g*n/(c*Math.sqrt(1-this.es*f*f)),e.x=c*Math.sin(f),e.y=this.am1-c*Math.cos(f),e.x=this.a*e.x+(this.x0||0),e.y=this.a*e.y+(this.y0||0),e}function D4(e){e.x=(e.x-(this.x0||0))/this.a,e.y=(e.y-(this.y0||0))/this.a;var n,o,c,f;if(o=Cr(e.x,e.y=this.am1-e.y),f=pf(this.am1+this.m1-o,this.es,this.en),(n=Math.abs(f))<Wt)n=Math.sin(f),c=o*Math.atan2(e.x,e.y)*Math.sqrt(1-this.es*n*n)/Math.cos(f);else if(Math.abs(n-Wt)<=bu)c=0;else throw new Error;return e.x=se(c+(this.long0||0),this.over),e.y=Ra(f),e}function N4(e){var n=se(e.x-(this.long0||0),this.over),o=e.y,c,f;return f=this.cphi1+this.phi1-o,Math.abs(f)>bu?(e.x=f*Math.sin(c=n*Math.cos(o)/f),e.y=this.cphi1-f*Math.cos(c)):e.x=e.y=0,e.x=this.a*e.x+(this.x0||0),e.y=this.a*e.y+(this.y0||0),e}function F4(e){e.x=(e.x-(this.x0||0))/this.a,e.y=(e.y-(this.y0||0))/this.a;var n,o,c=Cr(e.x,e.y=this.cphi1-e.y);if(o=this.cphi1+this.phi1-c,Math.abs(o)>Wt)throw new Error;return Math.abs(Math.abs(o)-Wt)<=bu?n=0:n=c*Math.atan2(e.x,e.y)/Math.cos(o),e.x=se(n+(this.long0||0),this.over),e.y=Ra(o),e}var G4=["bonne","Bonne (Werner lat_1=90)"];const z4={init:R4,names:G4},b0={OBLIQUE:{forward:W4,inverse:Z4},TRANSVERSE:{forward:$4,inverse:q4}},Bh={ROTATE:{o_alpha:"oAlpha",o_lon_c:"oLongC",o_lat_c:"oLatC"},NEW_POLE:{o_lat_p:"oLatP",o_lon_p:"oLongP"},NEW_EQUATOR:{o_lon_1:"oLong1",o_lat_1:"oLat1",o_lon_2:"oLong2",o_lat_2:"oLat2"}};function j4(){if(this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.title=this.title||"General Oblique Transformation",this.isIdentity=gp.includes(this.o_proj),!this.o_proj)throw new Error("Missing parameter: o_proj");if(this.o_proj==="ob_tran")throw new Error("Invalid value for o_proj: "+this.o_proj);const e=this.projStr.replace("+proj=ob_tran","").replace("+o_proj=","+proj=").trim(),n=_s(e);if(!n)throw new Error("Invalid parameter: o_proj. Unknown projection "+this.o_proj);n.long0=0,this.obliqueProjection=n;let o;const c=Object.keys(Bh),f=v=>{if(typeof this[v]>"u")return;const E=parseFloat(this[v])*Ti;if(isNaN(E))throw new Error("Invalid value for "+v+": "+this[v]);return E};for(let v=0;v<c.length;v++){const E=c[v],A=Bh[E],D=Object.entries(A);if(D.some(([B])=>typeof this[B]<"u")){o=A;for(let B=0;B<D.length;B++){const[W,J]=D[B],Z=f(W);if(typeof Z>"u")throw new Error("Missing parameter: "+W+".");this[J]=Z}break}}if(!o)throw new Error("No valid parameters provided for ob_tran projection.");const{lamp:g,phip:y}=V4(this,o);this.lamp=g,Math.abs(y)>ee?(this.cphip=Math.cos(y),this.sphip=Math.sin(y),this.projectionType=b0.OBLIQUE):this.projectionType=b0.TRANSVERSE}function U4(e){return this.projectionType.forward(this,e)}function H4(e){return this.projectionType.inverse(this,e)}function V4(e,n){let o,c;if(n===Bh.ROTATE){let f=e.oLongC,g=e.oLatC,y=e.oAlpha;if(Math.abs(Math.abs(g)-Wt)<=ee)throw new Error("Invalid value for o_lat_c: "+e.o_lat_c+" should be < 90");c=f+Math.atan2(-1*Math.cos(y),-1*Math.sin(y)*Math.sin(g)),o=Math.asin(Math.cos(g)*Math.sin(y))}else if(n===Bh.NEW_POLE)c=e.oLongP,o=e.oLatP;else{let f=e.oLong1,g=e.oLat1,y=e.oLong2,v=e.oLat2,E=Math.abs(g);if(Math.abs(g)>Wt-ee)throw new Error("Invalid value for o_lat_1: "+e.o_lat_1+" should be < 90");if(Math.abs(v)>Wt-ee)throw new Error("Invalid value for o_lat_2: "+e.o_lat_2+" should be < 90");if(Math.abs(g-v)<ee)throw new Error("Invalid value for o_lat_1 and o_lat_2: o_lat_1 should be different from o_lat_2");if(E<ee)throw new Error("Invalid value for o_lat_1: o_lat_1 should be different from zero");c=Math.atan2(Math.cos(g)*Math.sin(v)*Math.cos(f)-Math.sin(g)*Math.cos(v)*Math.cos(y),Math.sin(g)*Math.cos(v)*Math.sin(y)-Math.cos(g)*Math.sin(v)*Math.sin(f)),o=Math.atan(-1*Math.cos(c-f)/Math.tan(g))}return{lamp:c,phip:o}}function W4(e,n){let{x:o,y:c}=n;o+=e.long0;const f=Math.cos(o),g=Math.sin(c),y=Math.cos(c);n.x=se(Math.atan2(y*Math.sin(o),e.sphip*y*f+e.cphip*g)+e.lamp),n.y=Math.asin(e.sphip*g-e.cphip*y*f);const v=e.obliqueProjection.forward(n);return e.isIdentity&&(v.x*=br,v.y*=br),v}function $4(e,n){let{x:o,y:c}=n;o+=e.long0;const f=Math.cos(c),g=Math.cos(o);n.x=se(Math.atan2(f*Math.sin(o),Math.sin(c))+e.lamp),n.y=Math.asin(-1*f*g);const y=e.obliqueProjection.forward(n);return e.isIdentity&&(y.x*=br,y.y*=br),y}function Z4(e,n){e.isIdentity&&(n.x*=Ti,n.y*=Ti);const o=e.obliqueProjection.inverse(n);let{x:c,y:f}=o;if(c<Number.MAX_VALUE){c-=e.lamp;const g=Math.cos(c),y=Math.sin(f),v=Math.cos(f);n.x=Math.atan2(v*Math.sin(c),e.sphip*v*g-e.cphip*y),n.y=Math.asin(e.sphip*y+e.cphip*v*g)}return n.x=se(n.x+e.long0),n}function q4(e,n){e.isIdentity&&(n.x*=Ti,n.y*=Ti);const o=e.obliqueProjection.inverse(n);let{x:c,y:f}=o;if(c<Number.MAX_VALUE){const g=Math.cos(f);c-=e.lamp,n.x=Math.atan2(g*Math.sin(c),-1*Math.sin(f)),n.y=Math.asin(g*Math.cos(c))}return n.x=se(n.x+e.long0),n}var K4=["General Oblique Transformation","General_Oblique_Transformation","ob_tran"];const J4={init:j4,forward:U4,inverse:H4,names:K4};function X4(e){e.Proj.projections.add(yh),e.Proj.projections.add(vh),e.Proj.projections.add(Gy),e.Proj.projections.add(qy),e.Proj.projections.add(Qy),e.Proj.projections.add(rv),e.Proj.projections.add(hv),e.Proj.projections.add(gv),e.Proj.projections.add(xv),e.Proj.projections.add(Cv),e.Proj.projections.add(Fv),e.Proj.projections.add(Vv),e.Proj.projections.add(Kv),e.Proj.projections.add(e1),e.Proj.projections.add(o1),e.Proj.projections.add(c1),e.Proj.projections.add(m1),e.Proj.projections.add(w1),e.Proj.projections.add(S1),e.Proj.projections.add(T1),e.Proj.projections.add(N1),e.Proj.projections.add(U1),e.Proj.projections.add(K1),e.Proj.projections.add(t4),e.Proj.projections.add(s4),e.Proj.projections.add(d4),e.Proj.projections.add(y4),e.Proj.projections.add(E4),e.Proj.projections.add(k4),e.Proj.projections.add(I4),e.Proj.projections.add(z4),e.Proj.projections.add(J4)}const zh=Object.assign(iy,{defaultDatum:"WGS84",Proj:_s,WGS84:new _s("WGS84"),Point:Gl,toPoint:wp,defs:Bn,nadgrid:F_,transform:Sh,mgrs:ny,version:"__VERSION__"});X4(zh);var Ip,S0=()=>new DecompressionStream("deflate-raw");try{S0(),Ip=async e=>{let n=S0(),o=n.writable.getWriter(),c=n.readable.getReader(),f,g=[],y=0,v=0,E;for(o.write(e),o.close();!(E=await c.read()).done;)f=E.value,g.push(f),y+=f.length;return!g[1]&&f||(f=new Uint8Array(y),g.map(A=>(f.set(A,v),v+=A.length))),f}}catch{}var Y4=new TextDecoder,zc=e=>{throw new Error("but-unzip~"+e)},k0=e=>Y4.decode(e);function*Q4(e,n=Ip){let o=e.length-20,c=Math.max(o-65516,2);for(;(o=e.lastIndexOf(80,o-1))!==-1&&!(e[o+1]===75&&e[o+2]===5&&e[o+3]===6)&&o>c;);o===-1&&zc(2);let f=(A,D)=>e.subarray(o+=A,o+=D),g=new DataView(e.buffer,e.byteOffset),y=A=>g.getUint16(A+o,!0),v=A=>g.getUint32(A+o,!0),E=y(10);for(E!==y(8)&&zc(3),o=v(16);E--;){let A=y(10),D=y(30),P=y(32),B=v(20),W=v(42),J=k0(f(46,y(28))),Z=k0(f(D,P)),q=o,ct;o=W,ct=f(30+y(26)+y(28),B),yield{filename:J,comment:Z,read:()=>A&8?n(ct):A?zc(1):ct},o=q}}const t3=/.+\.(shp|dbf|json|prj|cpg)$/i,e3=async e=>{const n={},o=[];for(const g of Q4(e))t3.test(g.filename)&&o.push(Promise.resolve(g.read()).then(y=>n[g.filename]=y));await Promise.all(o);const c={},f=new TextDecoder;for(const[g,y]of Object.entries(n))g.slice(-3).toLowerCase()==="shp"||g.slice(-3).toLowerCase()==="dbf"?c[g]=new DataView(y.buffer,y.byteOffset,y.byteLength):c[g]=f.decode(y);return c},i3=globalThis.URL,n3=(e,n)=>{if(!n)return e;const o=new i3(e);return o.pathname=`${o.pathname}.${n}`,o.href};async function Su(e,n){const o=n3(e,n),c=n==="prj"||n==="cpg";try{const f=await fetch(o);if(f.status>399)throw new Error(f.statusText);if(c)return f.text();const g=await f.arrayBuffer();return new DataView(g)}catch(f){if(c||n==="dbf")return!1;throw f}}function r3(e){let n=0,o=1;const c=e.length;let f,g;const y=[e[0][0],e[0][1],e[0][0],e[0][1]];for(;o<c;)f=g||e[0],g=e[o],n+=(g[0]-f[0])*(g[1]+f[1]),o++,g[0]<y[0]&&(y[0]=g[0]),g[1]<y[1]&&(y[1]=g[1]),g[0]>y[2]&&(y[2]=g[0]),g[1]>y[3]&&(y[3]=g[1]);return{ring:e,clockWise:n>0,bbox:y,children:[]}}function P0(e,n){return!(e.bbox[0]>n.bbox[0]||e.bbox[1]>n.bbox[1]||e.bbox[2]<n.bbox[2]||e.bbox[3]<n.bbox[3])}function Rp(e,n=!1){const o=[],c=[];for(const y of e){const v=r3(y);v.clockWise!==n?o.push(v):c.push(v)}const f=[];for(const y of c){let v;for(const E of o)P0(E,y)&&(v?P0(v,E)&&(v=E):v=E);v?v.children.push(y.ring):f.push(y)}if(n)return{outers:o,orphens:f};if(f.length&&!n){const y=Rp(e,!0);if(y.orphens.length===0){const v=[];for(const E of y.outers)v.push([E.ring.toReversed()].concat(E.children.map(A=>A.toReversed())));return v}}const g=[];for(const y of o)g.push([y.ring].concat(y.children));return g}Wi.prototype.parsePoint=function(e){return{type:"Point",coordinates:this.parseCoord(e,0)}};Wi.prototype.parseZPoint=function(e){const n=this.parsePoint(e);return n.coordinates.push(e.getFloat64(16,!0)),n};Wi.prototype.parsePointArray=function(e,n,o){const c=[];let f=0;for(;f<o;)c.push(this.parseCoord(e,n)),n+=16,f++;return c};Wi.prototype.parseZPointArray=function(e,n,o,c){let f=0;for(;f<o;)c[f].push(e.getFloat64(n,!0)),f++,n+=8;return c};Wi.prototype.parseArrayGroup=function(e,n,o,c,f){const g=[];let y=0,v,E=0,A;for(;y<c;)y++,o+=4,v=E,y===c?E=f:E=e.getInt32(o,!0),A=E-v,A&&(g.push(this.parsePointArray(e,n,A)),n+=A<<4);return g};Wi.prototype.parseZArrayGroup=function(e,n,o,c){let f=0;for(;f<o;)c[f]=this.parseZPointArray(e,n,c[f].length,c[f]),n+=c[f].length<<3,f++;return c};Wi.prototype.parseMultiPoint=function(e){const n={},o=e.getInt32(32,!0);if(!o)return null;const c=this.parseCoord(e,0),f=this.parseCoord(e,16);n.bbox=[c[0],c[1],f[0],f[1]];const g=36;return o===1?(n.type="Point",n.coordinates=this.parseCoord(e,g)):(n.type="MultiPoint",n.coordinates=this.parsePointArray(e,g,o)),n};Wi.prototype.parseZMultiPoint=function(e){const n=this.parseMultiPoint(e);if(!n)return null;let o;if(n.type==="Point")return n.coordinates.push(e.getFloat64(72,!0)),n;o=n.coordinates.length;const c=52+(o<<4);return n.coordinates=this.parseZPointArray(e,c,o,n.coordinates),n};Wi.prototype.parsePolyline=function(e){const n={},o=e.getInt32(32,!0);if(!o)return null;const c=this.parseCoord(e,0),f=this.parseCoord(e,16);n.bbox=[c[0],c[1],f[0],f[1]];const g=e.getInt32(36,!0);let y,v;return o===1?(n.type="LineString",y=44,n.coordinates=this.parsePointArray(e,y,g)):(n.type="MultiLineString",y=40+(o<<2),v=40,n.coordinates=this.parseArrayGroup(e,y,v,o,g)),n};Wi.prototype.parseZPolyline=function(e){const n=this.parsePolyline(e);if(!n)return null;const o=n.coordinates.length;let c;return n.type==="LineString"?(c=60+(o<<4),n.coordinates=this.parseZPointArray(e,c,o,n.coordinates),n):(c=56+(n.coordinates.reduce(function(g,y){return g+y.length},0)<<4)+(o<<2),n.coordinates=this.parseZArrayGroup(e,c,o,n.coordinates),n)};Wi.prototype.polyFuncs=function(e){return e&&(e.type==="LineString"?(e.type="Polygon",e.coordinates=[e.coordinates],e):(e.coordinates=Rp(e.coordinates),e.coordinates.length===1?(e.type="Polygon",e.coordinates=e.coordinates[0],e):(e.type="MultiPolygon",e)))};Wi.prototype.parsePolygon=function(e){return this.polyFuncs(this.parsePolyline(e))};Wi.prototype.parseZPolygon=function(e){return this.polyFuncs(this.parseZPolyline(e))};const A0={1:"parsePoint",3:"parsePolyline",5:"parsePolygon",8:"parseMultiPoint",11:"parseZPoint",13:"parseZPolyline",15:"parseZPolygon",18:"parseZMultiPoint"};function s3(e){return e?function(n,o){const c=[n.getFloat64(o,!0),n.getFloat64(o+8,!0)];return e.inverse(c)}:function(n,o){return[n.getFloat64(o,!0),n.getFloat64(o+8,!0)]}}function Wi(e,n){if(!(this instanceof Wi))return new Wi(e,n);this.buffer=e,this.headers=this.parseHeader(),this.shpFuncs(n),this.rows=this.getRows()}Wi.prototype.shpFuncs=function(e){let n=this.headers.shpCode;if(n>20&&(n-=20),!(n in A0))throw new Error(`I don't know shp type "${n}"`);this.parseFunc=this[A0[n]],this.parseCoord=s3(e)};Wi.prototype.getShpCode=function(){return this.parseHeader().shpCode};Wi.prototype.parseHeader=function(){const e=this.buffer;return{length:e.getInt32(24)<<1,version:e.getInt32(28,!0),shpCode:e.getInt32(32,!0),bbox:[e.getFloat64(36,!0),e.getFloat64(44,!0),e.getFloat64(52,!0),e.getFloat64(60,!0)]}};Wi.prototype.getRows=function(){let e=100;const n=this.buffer.byteLength-8,o=[];let c;for(;e<=n&&(c=this.getRow(e),!!c);)e+=8,e+=c.len,c.type?o.push(this.parseFunc(c.data)):o.push(null);return o};Wi.prototype.getRow=function(e){const n=this.buffer.getInt32(e),o=this.buffer.getInt32(e+4)<<1;if(o===0)return{id:n,len:o,type:0};if(!(e+o+8>this.buffer.byteLength))return{id:n,len:o,data:new DataView(this.buffer.buffer,this.buffer.byteOffset+e+12,o-4),type:this.buffer.getInt32(e+8,!0)}};function xf(e,n){return new Wi(e,n).rows}var o3=/^(?:ANSI\s)?(\d+)$/m;function Op(e,n){if(!e)return c;try{new TextDecoder(e.trim())}catch{var o=o3.exec(e);return o&&!n?Op("windows-"+o[1],!0):(e=void 0,c)}return c;function c(f){var g=new TextDecoder(e||void 0),y=g.decode(f,{stream:!0})+g.decode();return y.replace(/\0/g,"").trim()}}function a3(e){var n={};return n.lastUpdated=new Date(e.getUint8(1)+1900,e.getUint8(2),e.getUint8(3)),n.records=e.getUint32(4,!0),n.headerLen=e.getUint16(8,!0),n.recLen=e.getUint16(10,!0),n}function l3(e,n,o){for(var c=[],f=32;f<n&&(c.push({name:o(new Uint8Array(e.buffer.slice(e.byteOffset+f,e.byteOffset+f+11))),dataType:String.fromCharCode(e.getUint8(f+11)),len:e.getUint8(f+16),decimal:e.getUint8(f+17)}),e.getUint8(f+32)!==13);)f+=32;return c}function u3(e,n,o,c,f){const g=new Uint8Array(e.buffer.slice(e.byteOffset+n,e.byteOffset+n+o));var y=f(g);switch(c){case"N":case"F":case"O":return parseFloat(y,10);case"D":return new Date(y.slice(0,4),parseInt(y.slice(4,6),10)-1,y.slice(6,8));case"L":return y.toLowerCase()==="y"||y.toLowerCase()==="t";default:return y}}function h3(e,n,o,c){for(var f={},g=0,y=o.length,v,E;g<y;)E=o[g],v=u3(e,n,E.len,E.dataType,c),n+=E.len,typeof v<"u"&&(f[E.name]=v),g++;return f}function wf(e,n){for(var o=Op(n),c=a3(e),f=l3(e,c.headerLen-1,o),g=(f.length+1<<5)+2,y=c.recLen,v=c.records,E=[];v;)E.push(h3(e,g,f,o)),g+=y,v--;return E}const c3=globalThis.URL,f3=e=>{if(!e)throw new Error("forgot to pass buffer");if(zl(e))return new Uint8Array(e);if(zl(e.buffer))return e.BYTES_PER_ELEMENT===1?e:new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("invalid buffer like object")},d3=new TextDecoder,Dp=e=>{if(e){if(typeof e=="string")return e;if(zl(e)||ArrayBuffer.isView(e)||Mf(e))return d3.decode(e)}},Np=e=>{if(!e)throw new Error("forgot to pass buffer");if(Mf(e))return e;if(zl(e))return new DataView(e);if(zl(e.buffer))return new DataView(e.buffer,e.byteOffset,e.byteLength);throw new Error("invalid buffer like object")};function zl(e){return e instanceof globalThis.ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]"}function Mf(e){return e instanceof globalThis.DataView||Object.prototype.toString.call(e)==="[object DataView]"}const Ef=function([e,n]){const o={};o.type="FeatureCollection",o.features=[];let c=0;const f=e.length;for(n||(n=[]);c<f;)o.features.push({type:"Feature",geometry:e[c],properties:n[c]||{}}),c++;return o},Fp=async function(e,n){let o;e=f3(e);const c=await e3(e),f=[];n=n||[];for(o in c)o.indexOf("__MACOSX")===-1&&(o.slice(-4).toLowerCase()===".shp"?(f.push(o.slice(0,-4)),c[o.slice(0,-3)+o.slice(-3).toLowerCase()]=c[o]):o.slice(-4).toLowerCase()===".prj"?c[o.slice(0,-3)+o.slice(-3).toLowerCase()]=zh(c[o]):o.slice(-5).toLowerCase()===".json"||n.indexOf(o.split(".").pop())>-1?f.push(o.slice(0,-3)+o.slice(-3).toLowerCase()):(o.slice(-4).toLowerCase()===".dbf"||o.slice(-4).toLowerCase()===".cpg")&&(c[o.slice(0,-3)+o.slice(-3).toLowerCase()]=c[o]));if(!f.length)throw new Error("no layers founds");const g=f.map(function(y){let v,E;const A=y.lastIndexOf(".");return A>-1&&y.slice(A).indexOf("json")>-1?(v=JSON.parse(c[y]),v.fileName=y.slice(0,A)):n.indexOf(y.slice(A+1))>-1?(v=c[y],v.fileName=y):(c[y+".dbf"]&&(E=wf(c[y+".dbf"],c[y+".cpg"])),v=Ef([xf(c[y+".shp"],c[y+".prj"]),E]),v.fileName=y),v});return g.length===1?g[0]:g};async function p3(e,n){const o=await Su(e);return Fp(o,n)}const g3=async e=>{const n=await Promise.all([Su(e,"shp"),Su(e,"prj")]);let o=!1;try{n[1]&&(o=zh(n[1]))}catch{o=!1}return xf(n[0],o)},m3=async e=>{const[n,o]=await Promise.all([Su(e,"dbf"),Su(e,"cpg")]);if(n)return wf(n,o)},B0=(e,n)=>{var c;return new c3(e,(c=globalThis==null?void 0:globalThis.document)==null?void 0:c.location).pathname.slice(-4).toLowerCase()===n},_3=({shp:e,dbf:n,cpg:o,prj:c})=>{const f=[v3(e,c)];return n&&f.push(x3(n,o)),Ef(f)},y3=async function(e,n){if(typeof e!="string"){if(zl(e)||ArrayBuffer.isView(e)||Mf(e))return Fp(e);if(e.shp)return _3(e);throw new TypeError("must be a string, some sort of Buffer, or an object with at least a .shp property")}if(B0(e,".zip"))return p3(e,n);B0(e,".shp")&&(e=e.slice(0,-4));const o=await Promise.all([g3(e),m3(e)]);return Ef(o)},v3=function(e,n){if(e=Np(e),n=Dp(n),typeof n=="string")try{n=zh(n)}catch{n=!1}return xf(e,n)},x3=function(e,n){return e=Np(e),n=Dp(n),wf(e,n)};function Th(e){if(!e)throw new Error("Invalid GeoJSON: null or undefined");if(e.type==="FeatureCollection"){if(!Array.isArray(e.features))throw new Error("Invalid FeatureCollection: features must be an array");return e}if(e.type==="Feature")return{type:"FeatureCollection",features:[e]};if(e.type&&["Point","LineString","Polygon","MultiPoint","MultiLineString","MultiPolygon","GeometryCollection"].includes(e.type))return{type:"FeatureCollection",features:[{type:"Feature",geometry:e,properties:{}}]};throw new Error(`Unsupported GeoJSON type: ${e.type||"unknown"}`)}async function w3(e){const n=await e.text(),o=JSON.parse(n);return Th(o)}async function M3(e){const n=await e.arrayBuffer(),o=await y3(n);return Array.isArray(o)?o.map(Th):[Th(o)]}async function E3(e){const n=await e.text(),c=new DOMParser().parseFromString(n,"text/xml");if(c.querySelector("parsererror"))throw new Error("Invalid KML file: XML parsing failed. Please ensure the file is a valid KML document.");const g=c.querySelectorAll("Placemark"),y=[];if(g.forEach(v=>{const E=v.querySelector("name"),A=v.querySelector("coordinates");if(A){const P=A.textContent.trim().split(/\s+/).map(B=>{const W=B.split(",");if(W.length<2)throw new Error("Invalid KML coordinates: each coordinate must have at least longitude and latitude");const[J,Z]=[Number(W[0]),Number(W[1])];if(isNaN(J)||isNaN(Z))throw new Error("Invalid KML coordinates: longitude and latitude must be numbers");return[J,Z]});if(P.length>=3){const B=[...P,P[0]];y.push({type:"Feature",geometry:{type:"Polygon",coordinates:[B]},properties:{name:(E==null?void 0:E.textContent)||"Unnamed"}})}}}),y.length===0)throw new Error("No valid polygon features found in KML file. KML must contain Placemark elements with at least 3 coordinates to form a polygon.");return{type:"FeatureCollection",features:y}}async function L3(e){const o=e.name.toLowerCase().split(".").pop();try{if(o==="geojson"||o==="json")return[await w3(e)];if(o==="zip")return await M3(e);if(o==="kml")return[await E3(e)];throw new Error(`Unsupported file type: .${o}`)}catch(c){throw new Error(`Failed to parse ${e.name}: ${c.message}`)}}function C3(e){if(!e||!e.features||e.features.length===0)return null;let n=1/0,o=-1/0,c=1/0,f=-1/0;const g=(y,v=!1)=>{if(Array.isArray(y[0]))y.forEach(E=>g(E,v));else if(y.length>=2){const[E,A]=y;n=Math.min(n,A),o=Math.max(o,A),c=Math.min(c,E),f=Math.max(f,E)}};return e.features.forEach(y=>{if(y.geometry){const{type:v,coordinates:E}=y.geometry;v==="Point"||v==="LineString"||v==="MultiPoint"?g(E):v==="Polygon"||v==="MultiLineString"?E.forEach(A=>g(A)):v==="MultiPolygon"&&E.forEach(A=>{A.forEach(D=>g(D))})}}),n===1/0?null:[[n,c],[o,f]]}function Gp(e,n,o){o===void 0&&(o={});var c={type:"Feature"};return(o.id===0||o.id)&&(c.id=o.id),o.bbox&&(c.bbox=o.bbox),c.properties=n||{},c.geometry=e,c}function b3(e,n,o){o===void 0&&(o={});for(var c=0,f=e;c<f.length;c++){var g=f[c];if(g.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var y=0;y<g[g.length-1].length;y++)if(g[g.length-1][y]!==g[0][y])throw new Error("First and last Position are not equivalent.")}var v={type:"Polygon",coordinates:e};return Gp(v,n,o)}function S3(e,n,o){o===void 0&&(o={});var c={type:"MultiPolygon",coordinates:e};return Gp(c,n,o)}function k3(e,n){var o,c,f,g,y,v,E,A,D,P,B=0,W=e.type==="FeatureCollection",J=e.type==="Feature",Z=W?e.features.length:1;for(o=0;o<Z;o++){for(v=W?e.features[o].geometry:J?e.geometry:e,A=W?e.features[o].properties:J?e.properties:{},D=W?e.features[o].bbox:J?e.bbox:void 0,P=W?e.features[o].id:J?e.id:void 0,E=v?v.type==="GeometryCollection":!1,y=E?v.geometries.length:1,f=0;f<y;f++){if(g=E?v.geometries[f]:v,g===null){if(n(null,B,A,D,P)===!1)return!1;continue}switch(g.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(n(g,B,A,D,P)===!1)return!1;break}case"GeometryCollection":{for(c=0;c<g.geometries.length;c++)if(n(g.geometries[c],B,A,D,P)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}B++}}function P3(e,n,o){var c=o;return k3(e,function(f,g,y,v,E){g===0&&o===void 0?c=f:c=n(c,f,g,y,v,E)}),c}function T0(e){return e.type==="Feature"?e.geometry:e}const jo=11102230246251565e-32,zn=134217729,A3=(3+8*jo)*jo;function jc(e,n,o,c,f){let g,y,v,E,A=n[0],D=c[0],P=0,B=0;D>A==D>-A?(g=A,A=n[++P]):(g=D,D=c[++B]);let W=0;if(P<e&&B<o)for(D>A==D>-A?(y=A+g,v=g-(y-A),A=n[++P]):(y=D+g,v=g-(y-D),D=c[++B]),g=y,v!==0&&(f[W++]=v);P<e&&B<o;)D>A==D>-A?(y=g+A,E=y-g,v=g-(y-E)+(A-E),A=n[++P]):(y=g+D,E=y-g,v=g-(y-E)+(D-E),D=c[++B]),g=y,v!==0&&(f[W++]=v);for(;P<e;)y=g+A,E=y-g,v=g-(y-E)+(A-E),A=n[++P],g=y,v!==0&&(f[W++]=v);for(;B<o;)y=g+D,E=y-g,v=g-(y-E)+(D-E),D=c[++B],g=y,v!==0&&(f[W++]=v);return(g!==0||W===0)&&(f[W++]=g),W}function B3(e,n){let o=n[0];for(let c=1;c<e;c++)o+=n[c];return o}function Du(e){return new Float64Array(e)}const T3=(3+16*jo)*jo,I3=(2+12*jo)*jo,R3=(9+64*jo)*jo*jo,Al=Du(4),I0=Du(8),R0=Du(12),O0=Du(16),tr=Du(4);function O3(e,n,o,c,f,g,y){let v,E,A,D,P,B,W,J,Z,q,ct,ft,St,Tt,Gt,zt,Dt,ut;const Bt=e-f,st=o-f,yt=n-g,Ct=c-g;Tt=Bt*Ct,B=zn*Bt,W=B-(B-Bt),J=Bt-W,B=zn*Ct,Z=B-(B-Ct),q=Ct-Z,Gt=J*q-(Tt-W*Z-J*Z-W*q),zt=yt*st,B=zn*yt,W=B-(B-yt),J=yt-W,B=zn*st,Z=B-(B-st),q=st-Z,Dt=J*q-(zt-W*Z-J*Z-W*q),ct=Gt-Dt,P=Gt-ct,Al[0]=Gt-(ct+P)+(P-Dt),ft=Tt+ct,P=ft-Tt,St=Tt-(ft-P)+(ct-P),ct=St-zt,P=St-ct,Al[1]=St-(ct+P)+(P-zt),ut=ft+ct,P=ut-ft,Al[2]=ft-(ut-P)+(ct-P),Al[3]=ut;let oe=B3(4,Al),Le=I3*y;if(oe>=Le||-oe>=Le||(P=e-Bt,v=e-(Bt+P)+(P-f),P=o-st,A=o-(st+P)+(P-f),P=n-yt,E=n-(yt+P)+(P-g),P=c-Ct,D=c-(Ct+P)+(P-g),v===0&&E===0&&A===0&&D===0)||(Le=R3*y+A3*Math.abs(oe),oe+=Bt*D+Ct*v-(yt*A+st*E),oe>=Le||-oe>=Le))return oe;Tt=v*Ct,B=zn*v,W=B-(B-v),J=v-W,B=zn*Ct,Z=B-(B-Ct),q=Ct-Z,Gt=J*q-(Tt-W*Z-J*Z-W*q),zt=E*st,B=zn*E,W=B-(B-E),J=E-W,B=zn*st,Z=B-(B-st),q=st-Z,Dt=J*q-(zt-W*Z-J*Z-W*q),ct=Gt-Dt,P=Gt-ct,tr[0]=Gt-(ct+P)+(P-Dt),ft=Tt+ct,P=ft-Tt,St=Tt-(ft-P)+(ct-P),ct=St-zt,P=St-ct,tr[1]=St-(ct+P)+(P-zt),ut=ft+ct,P=ut-ft,tr[2]=ft-(ut-P)+(ct-P),tr[3]=ut;const _e=jc(4,Al,4,tr,I0);Tt=Bt*D,B=zn*Bt,W=B-(B-Bt),J=Bt-W,B=zn*D,Z=B-(B-D),q=D-Z,Gt=J*q-(Tt-W*Z-J*Z-W*q),zt=yt*A,B=zn*yt,W=B-(B-yt),J=yt-W,B=zn*A,Z=B-(B-A),q=A-Z,Dt=J*q-(zt-W*Z-J*Z-W*q),ct=Gt-Dt,P=Gt-ct,tr[0]=Gt-(ct+P)+(P-Dt),ft=Tt+ct,P=ft-Tt,St=Tt-(ft-P)+(ct-P),ct=St-zt,P=St-ct,tr[1]=St-(ct+P)+(P-zt),ut=ft+ct,P=ut-ft,tr[2]=ft-(ut-P)+(ct-P),tr[3]=ut;const de=jc(_e,I0,4,tr,R0);Tt=v*D,B=zn*v,W=B-(B-v),J=v-W,B=zn*D,Z=B-(B-D),q=D-Z,Gt=J*q-(Tt-W*Z-J*Z-W*q),zt=E*A,B=zn*E,W=B-(B-E),J=E-W,B=zn*A,Z=B-(B-A),q=A-Z,Dt=J*q-(zt-W*Z-J*Z-W*q),ct=Gt-Dt,P=Gt-ct,tr[0]=Gt-(ct+P)+(P-Dt),ft=Tt+ct,P=ft-Tt,St=Tt-(ft-P)+(ct-P),ct=St-zt,P=St-ct,tr[1]=St-(ct+P)+(P-zt),ut=ft+ct,P=ut-ft,tr[2]=ft-(ut-P)+(ct-P),tr[3]=ut;const ce=jc(de,R0,4,tr,O0);return O0[ce-1]}function D3(e,n,o,c,f,g){const y=(n-g)*(o-f),v=(e-f)*(c-g),E=y-v,A=Math.abs(y+v);return Math.abs(E)>=T3*A?E:-O3(e,n,o,c,f,g,A)}var D0=6378137;function N3(e){return P3(e,function(n,o){return n+F3(o)},0)}function F3(e){var n=0,o;switch(e.type){case"Polygon":return N0(e.coordinates);case"MultiPolygon":for(o=0;o<e.coordinates.length;o++)n+=N0(e.coordinates[o]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function N0(e){var n=0;if(e&&e.length>0){n+=Math.abs(F0(e[0]));for(var o=1;o<e.length;o++)n-=Math.abs(F0(e[o]))}return n}function F0(e){var n,o,c,f,g,y,v,E=0,A=e.length;if(A>2){for(v=0;v<A;v++)v===A-2?(f=A-2,g=A-1,y=0):v===A-1?(f=A-1,g=0,y=1):(f=v,g=v+1,y=v+2),n=e[f],o=e[g],c=e[y],E+=(Uc(c[0])-Uc(n[0]))*Math.sin(Uc(o[1]));E=E*D0*D0/2}return E}function Uc(e){return e*Math.PI/180}class Ta{constructor(n,o){this.next=null,this.key=n,this.data=o,this.left=null,this.right=null}}function G3(e,n){return e>n?1:e<n?-1:0}function Ca(e,n,o){const c=new Ta(null,null);let f=c,g=c;for(;;){const y=o(e,n.key);if(y<0){if(n.left===null)break;if(o(e,n.left.key)<0){const v=n.left;if(n.left=v.right,v.right=n,n=v,n.left===null)break}g.left=n,g=n,n=n.left}else if(y>0){if(n.right===null)break;if(o(e,n.right.key)>0){const v=n.right;if(n.right=v.left,v.left=n,n=v,n.right===null)break}f.right=n,f=n,n=n.right}else break}return f.right=n.left,g.left=n.right,n.left=c.right,n.right=c.left,n}function Hc(e,n,o,c){const f=new Ta(e,n);if(o===null)return f.left=f.right=null,f;o=Ca(e,o,c);const g=c(e,o.key);return g<0?(f.left=o.left,f.right=o,o.left=null):g>=0&&(f.right=o.right,f.left=o,o.right=null),f}function G0(e,n,o){let c=null,f=null;if(n){n=Ca(e,n,o);const g=o(n.key,e);g===0?(c=n.left,f=n.right):g<0?(f=n.right,n.right=null,c=n):(c=n.left,n.left=null,f=n)}return{left:c,right:f}}function z3(e,n,o){return n===null?e:(e===null||(n=Ca(e.key,n,o),n.left=e),n)}function tf(e,n,o,c,f){if(e){c(`${n}${o?" ":" "}${f(e)}
`);const g=n+(o?"    ":"   ");e.left&&tf(e.left,g,!1,c,f),e.right&&tf(e.right,g,!0,c,f)}}class Lf{constructor(n=G3){this._root=null,this._size=0,this._comparator=n}insert(n,o){return this._size++,this._root=Hc(n,o,this._root,this._comparator)}add(n,o){const c=new Ta(n,o);this._root===null&&(c.left=c.right=null,this._size++,this._root=c);const f=this._comparator,g=Ca(n,this._root,f),y=f(n,g.key);return y===0?this._root=g:(y<0?(c.left=g.left,c.right=g,g.left=null):y>0&&(c.right=g.right,c.left=g,g.right=null),this._size++,this._root=c),this._root}remove(n){this._root=this._remove(n,this._root,this._comparator)}_remove(n,o,c){let f;return o===null?null:(o=Ca(n,o,c),c(n,o.key)===0?(o.left===null?f=o.right:(f=Ca(n,o.left,c),f.right=o.right),this._size--,f):o)}pop(){let n=this._root;if(n){for(;n.left;)n=n.left;return this._root=Ca(n.key,this._root,this._comparator),this._root=this._remove(n.key,this._root,this._comparator),{key:n.key,data:n.data}}return null}findStatic(n){let o=this._root;const c=this._comparator;for(;o;){const f=c(n,o.key);if(f===0)return o;f<0?o=o.left:o=o.right}return null}find(n){return this._root&&(this._root=Ca(n,this._root,this._comparator),this._comparator(n,this._root.key)!==0)?null:this._root}contains(n){let o=this._root;const c=this._comparator;for(;o;){const f=c(n,o.key);if(f===0)return!0;f<0?o=o.left:o=o.right}return!1}forEach(n,o){let c=this._root;const f=[];let g=!1;for(;!g;)c!==null?(f.push(c),c=c.left):f.length!==0?(c=f.pop(),n.call(o,c),c=c.right):g=!0;return this}range(n,o,c,f){const g=[],y=this._comparator;let v=this._root,E;for(;g.length!==0||v;)if(v)g.push(v),v=v.left;else{if(v=g.pop(),E=y(v.key,o),E>0)break;if(y(v.key,n)>=0&&c.call(f,v))return this;v=v.right}return this}keys(){const n=[];return this.forEach(({key:o})=>{n.push(o)}),n}values(){const n=[];return this.forEach(({data:o})=>{n.push(o)}),n}min(){return this._root?this.minNode(this._root).key:null}max(){return this._root?this.maxNode(this._root).key:null}minNode(n=this._root){if(n)for(;n.left;)n=n.left;return n}maxNode(n=this._root){if(n)for(;n.right;)n=n.right;return n}at(n){let o=this._root,c=!1,f=0;const g=[];for(;!c;)if(o)g.push(o),o=o.left;else if(g.length>0){if(o=g.pop(),f===n)return o;f++,o=o.right}else c=!0;return null}next(n){let o=this._root,c=null;if(n.right){for(c=n.right;c.left;)c=c.left;return c}const f=this._comparator;for(;o;){const g=f(n.key,o.key);if(g===0)break;g<0?(c=o,o=o.left):o=o.right}return c}prev(n){let o=this._root,c=null;if(n.left!==null){for(c=n.left;c.right;)c=c.right;return c}const f=this._comparator;for(;o;){const g=f(n.key,o.key);if(g===0)break;g<0?o=o.left:(c=o,o=o.right)}return c}clear(){return this._root=null,this._size=0,this}toList(){return U3(this._root)}load(n,o=[],c=!1){let f=n.length;const g=this._comparator;if(c&&rf(n,o,0,f-1,g),this._root===null)this._root=ef(n,o,0,f),this._size=f;else{const y=H3(this.toList(),j3(n,o),g);f=this._size+f,this._root=nf({head:y},0,f)}return this}isEmpty(){return this._root===null}get size(){return this._size}get root(){return this._root}toString(n=o=>String(o.key)){const o=[];return tf(this._root,"",!0,c=>o.push(c),n),o.join("")}update(n,o,c){const f=this._comparator;let{left:g,right:y}=G0(n,this._root,f);f(n,o)<0?y=Hc(o,c,y,f):g=Hc(o,c,g,f),this._root=z3(g,y,f)}split(n){return G0(n,this._root,this._comparator)}*[Symbol.iterator](){let n=this._root;const o=[];let c=!1;for(;!c;)n!==null?(o.push(n),n=n.left):o.length!==0?(n=o.pop(),yield n,n=n.right):c=!0}}function ef(e,n,o,c){const f=c-o;if(f>0){const g=o+Math.floor(f/2),y=e[g],v=n[g],E=new Ta(y,v);return E.left=ef(e,n,o,g),E.right=ef(e,n,g+1,c),E}return null}function j3(e,n){const o=new Ta(null,null);let c=o;for(let f=0;f<e.length;f++)c=c.next=new Ta(e[f],n[f]);return c.next=null,o.next}function U3(e){let n=e;const o=[];let c=!1;const f=new Ta(null,null);let g=f;for(;!c;)n?(o.push(n),n=n.left):o.length>0?(n=g=g.next=o.pop(),n=n.right):c=!0;return g.next=null,f.next}function nf(e,n,o){const c=o-n;if(c>0){const f=n+Math.floor(c/2),g=nf(e,n,f),y=e.head;return y.left=g,e.head=e.head.next,y.right=nf(e,f+1,o),y}return null}function H3(e,n,o){const c=new Ta(null,null);let f=c,g=e,y=n;for(;g!==null&&y!==null;)o(g.key,y.key)<0?(f.next=g,g=g.next):(f.next=y,y=y.next),f=f.next;return g!==null?f.next=g:y!==null&&(f.next=y),c.next}function rf(e,n,o,c,f){if(o>=c)return;const g=e[o+c>>1];let y=o-1,v=c+1;for(;;){do y++;while(f(e[y],g)<0);do v--;while(f(e[v],g)>0);if(y>=v)break;let E=e[y];e[y]=e[v],e[v]=E,E=n[y],n[y]=n[v],n[v]=E}rf(e,n,o,v,f),rf(e,n,v+1,c,f)}var zp={};const fu=(e,n)=>e.ll.x<=n.x&&n.x<=e.ur.x&&e.ll.y<=n.y&&n.y<=e.ur.y,sf=(e,n)=>{if(n.ur.x<e.ll.x||e.ur.x<n.ll.x||n.ur.y<e.ll.y||e.ur.y<n.ll.y)return null;const o=e.ll.x<n.ll.x?n.ll.x:e.ll.x,c=e.ur.x<n.ur.x?e.ur.x:n.ur.x,f=e.ll.y<n.ll.y?n.ll.y:e.ll.y,g=e.ur.y<n.ur.y?e.ur.y:n.ur.y;return{ll:{x:o,y:f},ur:{x:c,y:g}}};let Sa=Number.EPSILON;Sa===void 0&&(Sa=Math.pow(2,-52));const V3=Sa*Sa,z0=(e,n)=>{if(-Sa<e&&e<Sa&&-Sa<n&&n<Sa)return 0;const o=e-n;return o*o<V3*e*n?0:e<n?-1:1};class W3{constructor(){this.reset()}reset(){this.xRounder=new j0,this.yRounder=new j0}round(n,o){return{x:this.xRounder.round(n),y:this.yRounder.round(o)}}}class j0{constructor(){this.tree=new Lf,this.round(0)}round(n){const o=this.tree.add(n),c=this.tree.prev(o);if(c!==null&&z0(o.key,c.key)===0)return this.tree.remove(n),c.key;const f=this.tree.next(o);return f!==null&&z0(o.key,f.key)===0?(this.tree.remove(n),f.key):n}}const ku=new W3,wh=(e,n)=>e.x*n.y-e.y*n.x,jp=(e,n)=>e.x*n.x+e.y*n.y,U0=(e,n,o)=>{const c=D3(e.x,e.y,n.x,n.y,o.x,o.y);return c>0?-1:c<0?1:0},Ih=e=>Math.sqrt(jp(e,e)),$3=(e,n,o)=>{const c={x:n.x-e.x,y:n.y-e.y},f={x:o.x-e.x,y:o.y-e.y};return wh(f,c)/Ih(f)/Ih(c)},Z3=(e,n,o)=>{const c={x:n.x-e.x,y:n.y-e.y},f={x:o.x-e.x,y:o.y-e.y};return jp(f,c)/Ih(f)/Ih(c)},H0=(e,n,o)=>n.y===0?null:{x:e.x+n.x/n.y*(o-e.y),y:o},V0=(e,n,o)=>n.x===0?null:{x:o,y:e.y+n.y/n.x*(o-e.x)},q3=(e,n,o,c)=>{if(n.x===0)return V0(o,c,e.x);if(c.x===0)return V0(e,n,o.x);if(n.y===0)return H0(o,c,e.y);if(c.y===0)return H0(e,n,o.y);const f=wh(n,c);if(f==0)return null;const g={x:o.x-e.x,y:o.y-e.y},y=wh(g,n)/f,v=wh(g,c)/f,E=e.x+v*n.x,A=o.x+y*c.x,D=e.y+v*n.y,P=o.y+y*c.y,B=(E+A)/2,W=(D+P)/2;return{x:B,y:W}};class gs{static compare(n,o){const c=gs.comparePoints(n.point,o.point);return c!==0?c:(n.point!==o.point&&n.link(o),n.isLeft!==o.isLeft?n.isLeft?1:-1:Pa.compare(n.segment,o.segment))}static comparePoints(n,o){return n.x<o.x?-1:n.x>o.x?1:n.y<o.y?-1:n.y>o.y?1:0}constructor(n,o){n.events===void 0?n.events=[this]:n.events.push(this),this.point=n,this.isLeft=o}link(n){if(n.point===this.point)throw new Error("Tried to link already linked events");const o=n.point.events;for(let c=0,f=o.length;c<f;c++){const g=o[c];this.point.events.push(g),g.point=this.point}this.checkForConsuming()}checkForConsuming(){const n=this.point.events.length;for(let o=0;o<n;o++){const c=this.point.events[o];if(c.segment.consumedBy===void 0)for(let f=o+1;f<n;f++){const g=this.point.events[f];g.consumedBy===void 0&&c.otherSE.point.events===g.otherSE.point.events&&c.segment.consume(g.segment)}}}getAvailableLinkedEvents(){const n=[];for(let o=0,c=this.point.events.length;o<c;o++){const f=this.point.events[o];f!==this&&!f.segment.ringOut&&f.segment.isInResult()&&n.push(f)}return n}getLeftmostComparator(n){const o=new Map,c=f=>{const g=f.otherSE;o.set(f,{sine:$3(this.point,n.point,g.point),cosine:Z3(this.point,n.point,g.point)})};return(f,g)=>{o.has(f)||c(f),o.has(g)||c(g);const{sine:y,cosine:v}=o.get(f),{sine:E,cosine:A}=o.get(g);return y>=0&&E>=0?v<A?1:v>A?-1:0:y<0&&E<0?v<A?-1:v>A?1:0:E<y?-1:E>y?1:0}}}let K3=0;class Pa{static compare(n,o){const c=n.leftSE.point.x,f=o.leftSE.point.x,g=n.rightSE.point.x,y=o.rightSE.point.x;if(y<c)return 1;if(g<f)return-1;const v=n.leftSE.point.y,E=o.leftSE.point.y,A=n.rightSE.point.y,D=o.rightSE.point.y;if(c<f){if(E<v&&E<A)return 1;if(E>v&&E>A)return-1;const P=n.comparePoint(o.leftSE.point);if(P<0)return 1;if(P>0)return-1;const B=o.comparePoint(n.rightSE.point);return B!==0?B:-1}if(c>f){if(v<E&&v<D)return-1;if(v>E&&v>D)return 1;const P=o.comparePoint(n.leftSE.point);if(P!==0)return P;const B=n.comparePoint(o.rightSE.point);return B<0?1:B>0?-1:1}if(v<E)return-1;if(v>E)return 1;if(g<y){const P=o.comparePoint(n.rightSE.point);if(P!==0)return P}if(g>y){const P=n.comparePoint(o.rightSE.point);if(P<0)return 1;if(P>0)return-1}if(g!==y){const P=A-v,B=g-c,W=D-E,J=y-f;if(P>B&&W<J)return 1;if(P<B&&W>J)return-1}return g>y?1:g<y||A<D?-1:A>D?1:n.id<o.id?-1:n.id>o.id?1:0}constructor(n,o,c,f){this.id=++K3,this.leftSE=n,n.segment=this,n.otherSE=o,this.rightSE=o,o.segment=this,o.otherSE=n,this.rings=c,this.windings=f}static fromRing(n,o,c){let f,g,y;const v=gs.comparePoints(n,o);if(v<0)f=n,g=o,y=1;else if(v>0)f=o,g=n,y=-1;else throw new Error(`Tried to create degenerate segment at [${n.x}, ${n.y}]`);const E=new gs(f,!0),A=new gs(g,!1);return new Pa(E,A,[c],[y])}replaceRightSE(n){this.rightSE=n,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const n=this.leftSE.point.y,o=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:n<o?n:o},ur:{x:this.rightSE.point.x,y:n>o?n:o}}}vector(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}isAnEndpoint(n){return n.x===this.leftSE.point.x&&n.y===this.leftSE.point.y||n.x===this.rightSE.point.x&&n.y===this.rightSE.point.y}comparePoint(n){if(this.isAnEndpoint(n))return 0;const o=this.leftSE.point,c=this.rightSE.point,f=this.vector();if(o.x===c.x)return n.x===o.x?0:n.x<o.x?1:-1;const g=(n.y-o.y)/f.y,y=o.x+g*f.x;if(n.x===y)return 0;const v=(n.x-o.x)/f.x,E=o.y+v*f.y;return n.y===E?0:n.y<E?-1:1}getIntersection(n){const o=this.bbox(),c=n.bbox(),f=sf(o,c);if(f===null)return null;const g=this.leftSE.point,y=this.rightSE.point,v=n.leftSE.point,E=n.rightSE.point,A=fu(o,v)&&this.comparePoint(v)===0,D=fu(c,g)&&n.comparePoint(g)===0,P=fu(o,E)&&this.comparePoint(E)===0,B=fu(c,y)&&n.comparePoint(y)===0;if(D&&A)return B&&!P?y:!B&&P?E:null;if(D)return P&&g.x===E.x&&g.y===E.y?null:g;if(A)return B&&y.x===v.x&&y.y===v.y?null:v;if(B&&P)return null;if(B)return y;if(P)return E;const W=q3(g,this.vector(),v,n.vector());return W===null||!fu(f,W)?null:ku.round(W.x,W.y)}split(n){const o=[],c=n.events!==void 0,f=new gs(n,!0),g=new gs(n,!1),y=this.rightSE;this.replaceRightSE(g),o.push(g),o.push(f);const v=new Pa(f,y,this.rings.slice(),this.windings.slice());return gs.comparePoints(v.leftSE.point,v.rightSE.point)>0&&v.swapEvents(),gs.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),c&&(f.checkForConsuming(),g.checkForConsuming()),o}swapEvents(){const n=this.rightSE;this.rightSE=this.leftSE,this.leftSE=n,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let o=0,c=this.windings.length;o<c;o++)this.windings[o]*=-1}consume(n){let o=this,c=n;for(;o.consumedBy;)o=o.consumedBy;for(;c.consumedBy;)c=c.consumedBy;const f=Pa.compare(o,c);if(f!==0){if(f>0){const g=o;o=c,c=g}if(o.prev===c){const g=o;o=c,c=g}for(let g=0,y=c.rings.length;g<y;g++){const v=c.rings[g],E=c.windings[g],A=o.rings.indexOf(v);A===-1?(o.rings.push(v),o.windings.push(E)):o.windings[A]+=E}c.rings=null,c.windings=null,c.consumedBy=o,c.leftSE.consumedBy=o.leftSE,c.rightSE.consumedBy=o.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const n=this.prev.consumedBy||this.prev;this._beforeState=n.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const n=this.beforeState();this._afterState={rings:n.rings.slice(0),windings:n.windings.slice(0),multiPolys:[]};const o=this._afterState.rings,c=this._afterState.windings,f=this._afterState.multiPolys;for(let v=0,E=this.rings.length;v<E;v++){const A=this.rings[v],D=this.windings[v],P=o.indexOf(A);P===-1?(o.push(A),c.push(D)):c[P]+=D}const g=[],y=[];for(let v=0,E=o.length;v<E;v++){if(c[v]===0)continue;const A=o[v],D=A.poly;if(y.indexOf(D)===-1)if(A.isExterior)g.push(D);else{y.indexOf(D)===-1&&y.push(D);const P=g.indexOf(A.poly);P!==-1&&g.splice(P,1)}}for(let v=0,E=g.length;v<E;v++){const A=g[v].multiPoly;f.indexOf(A)===-1&&f.push(A)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const n=this.beforeState().multiPolys,o=this.afterState().multiPolys;switch(Zs.type){case"union":{const c=n.length===0,f=o.length===0;this._isInResult=c!==f;break}case"intersection":{let c,f;n.length<o.length?(c=n.length,f=o.length):(c=o.length,f=n.length),this._isInResult=f===Zs.numMultiPolys&&c<f;break}case"xor":{const c=Math.abs(n.length-o.length);this._isInResult=c%2===1;break}case"difference":{const c=f=>f.length===1&&f[0].isSubject;this._isInResult=c(n)!==c(o);break}default:throw new Error(`Unrecognized operation type found ${Zs.type}`)}return this._isInResult}}class W0{constructor(n,o,c){if(!Array.isArray(n)||n.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=o,this.isExterior=c,this.segments=[],typeof n[0][0]!="number"||typeof n[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const f=ku.round(n[0][0],n[0][1]);this.bbox={ll:{x:f.x,y:f.y},ur:{x:f.x,y:f.y}};let g=f;for(let y=1,v=n.length;y<v;y++){if(typeof n[y][0]!="number"||typeof n[y][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let E=ku.round(n[y][0],n[y][1]);E.x===g.x&&E.y===g.y||(this.segments.push(Pa.fromRing(g,E,this)),E.x<this.bbox.ll.x&&(this.bbox.ll.x=E.x),E.y<this.bbox.ll.y&&(this.bbox.ll.y=E.y),E.x>this.bbox.ur.x&&(this.bbox.ur.x=E.x),E.y>this.bbox.ur.y&&(this.bbox.ur.y=E.y),g=E)}(f.x!==g.x||f.y!==g.y)&&this.segments.push(Pa.fromRing(g,f,this))}getSweepEvents(){const n=[];for(let o=0,c=this.segments.length;o<c;o++){const f=this.segments[o];n.push(f.leftSE),n.push(f.rightSE)}return n}}class J3{constructor(n,o){if(!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new W0(n[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let c=1,f=n.length;c<f;c++){const g=new W0(n[c],this,!1);g.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=g.bbox.ll.x),g.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=g.bbox.ll.y),g.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=g.bbox.ur.x),g.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=g.bbox.ur.y),this.interiorRings.push(g)}this.multiPoly=o}getSweepEvents(){const n=this.exteriorRing.getSweepEvents();for(let o=0,c=this.interiorRings.length;o<c;o++){const f=this.interiorRings[o].getSweepEvents();for(let g=0,y=f.length;g<y;g++)n.push(f[g])}return n}}class $0{constructor(n,o){if(!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof n[0][0][0]=="number"&&(n=[n])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(let c=0,f=n.length;c<f;c++){const g=new J3(n[c],this);g.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=g.bbox.ll.x),g.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=g.bbox.ll.y),g.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=g.bbox.ur.x),g.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=g.bbox.ur.y),this.polys.push(g)}this.isSubject=o}getSweepEvents(){const n=[];for(let o=0,c=this.polys.length;o<c;o++){const f=this.polys[o].getSweepEvents();for(let g=0,y=f.length;g<y;g++)n.push(f[g])}return n}}class Rh{static factory(n){const o=[];for(let c=0,f=n.length;c<f;c++){const g=n[c];if(!g.isInResult()||g.ringOut)continue;let y=null,v=g.leftSE,E=g.rightSE;const A=[v],D=v.point,P=[];for(;y=v,v=E,A.push(v),v.point!==D;)for(;;){const B=v.getAvailableLinkedEvents();if(B.length===0){const Z=A[0].point,q=A[A.length-1].point;throw new Error(`Unable to complete output ring starting at [${Z.x}, ${Z.y}]. Last matching segment found ends at [${q.x}, ${q.y}].`)}if(B.length===1){E=B[0].otherSE;break}let W=null;for(let Z=0,q=P.length;Z<q;Z++)if(P[Z].point===v.point){W=Z;break}if(W!==null){const Z=P.splice(W)[0],q=A.splice(Z.index);q.unshift(q[0].otherSE),o.push(new Rh(q.reverse()));continue}P.push({index:A.length,point:v.point});const J=v.getLeftmostComparator(y);E=B.sort(J)[0].otherSE;break}o.push(new Rh(A))}return o}constructor(n){this.events=n;for(let o=0,c=n.length;o<c;o++)n[o].segment.ringOut=this;this.poly=null}getGeom(){let n=this.events[0].point;const o=[n];for(let A=1,D=this.events.length-1;A<D;A++){const P=this.events[A].point,B=this.events[A+1].point;U0(P,n,B)!==0&&(o.push(P),n=P)}if(o.length===1)return null;const c=o[0],f=o[1];U0(c,n,f)===0&&o.shift(),o.push(o[0]);const g=this.isExteriorRing()?1:-1,y=this.isExteriorRing()?0:o.length-1,v=this.isExteriorRing()?o.length:-1,E=[];for(let A=y;A!=v;A+=g)E.push([o[A].x,o[A].y]);return E}isExteriorRing(){if(this._isExteriorRing===void 0){const n=this.enclosingRing();this._isExteriorRing=n?!n.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){let n=this.events[0];for(let f=1,g=this.events.length;f<g;f++){const y=this.events[f];gs.compare(n,y)>0&&(n=y)}let o=n.segment.prevInResult(),c=o?o.prevInResult():null;for(;;){if(!o)return null;if(!c)return o.ringOut;if(c.ringOut!==o.ringOut)return c.ringOut.enclosingRing()!==o.ringOut?o.ringOut:o.ringOut.enclosingRing();o=c.prevInResult(),c=o?o.prevInResult():null}}}class Z0{constructor(n){this.exteriorRing=n,n.poly=this,this.interiorRings=[]}addInterior(n){this.interiorRings.push(n),n.poly=this}getGeom(){const n=[this.exteriorRing.getGeom()];if(n[0]===null)return null;for(let o=0,c=this.interiorRings.length;o<c;o++){const f=this.interiorRings[o].getGeom();f!==null&&n.push(f)}return n}}class X3{constructor(n){this.rings=n,this.polys=this._composePolys(n)}getGeom(){const n=[];for(let o=0,c=this.polys.length;o<c;o++){const f=this.polys[o].getGeom();f!==null&&n.push(f)}return n}_composePolys(n){const o=[];for(let c=0,f=n.length;c<f;c++){const g=n[c];if(!g.poly)if(g.isExteriorRing())o.push(new Z0(g));else{const y=g.enclosingRing();y.poly||o.push(new Z0(y)),y.poly.addInterior(g)}}return o}}class Y3{constructor(n){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Pa.compare;this.queue=n,this.tree=new Lf(o),this.segments=[]}process(n){const o=n.segment,c=[];if(n.consumedBy)return n.isLeft?this.queue.remove(n.otherSE):this.tree.remove(o),c;const f=n.isLeft?this.tree.add(o):this.tree.find(o);if(!f)throw new Error(`Unable to find segment #${o.id} [${o.leftSE.point.x}, ${o.leftSE.point.y}] -> [${o.rightSE.point.x}, ${o.rightSE.point.y}] in SweepLine tree.`);let g=f,y=f,v,E;for(;v===void 0;)g=this.tree.prev(g),g===null?v=null:g.key.consumedBy===void 0&&(v=g.key);for(;E===void 0;)y=this.tree.next(y),y===null?E=null:y.key.consumedBy===void 0&&(E=y.key);if(n.isLeft){let A=null;if(v){const P=v.getIntersection(o);if(P!==null&&(o.isAnEndpoint(P)||(A=P),!v.isAnEndpoint(P))){const B=this._splitSafely(v,P);for(let W=0,J=B.length;W<J;W++)c.push(B[W])}}let D=null;if(E){const P=E.getIntersection(o);if(P!==null&&(o.isAnEndpoint(P)||(D=P),!E.isAnEndpoint(P))){const B=this._splitSafely(E,P);for(let W=0,J=B.length;W<J;W++)c.push(B[W])}}if(A!==null||D!==null){let P=null;A===null?P=D:D===null?P=A:P=gs.comparePoints(A,D)<=0?A:D,this.queue.remove(o.rightSE),c.push(o.rightSE);const B=o.split(P);for(let W=0,J=B.length;W<J;W++)c.push(B[W])}c.length>0?(this.tree.remove(o),c.push(n)):(this.segments.push(o),o.prev=v)}else{if(v&&E){const A=v.getIntersection(E);if(A!==null){if(!v.isAnEndpoint(A)){const D=this._splitSafely(v,A);for(let P=0,B=D.length;P<B;P++)c.push(D[P])}if(!E.isAnEndpoint(A)){const D=this._splitSafely(E,A);for(let P=0,B=D.length;P<B;P++)c.push(D[P])}}}this.tree.remove(o)}return c}_splitSafely(n,o){this.tree.remove(n);const c=n.rightSE;this.queue.remove(c);const f=n.split(o);return f.push(c),n.consumedBy===void 0&&this.tree.add(n),f}}const q0=typeof process<"u"&&zp.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Q3=typeof process<"u"&&zp.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6;class tx{run(n,o,c){Zs.type=n,ku.reset();const f=[new $0(o,!0)];for(let P=0,B=c.length;P<B;P++)f.push(new $0(c[P],!1));if(Zs.numMultiPolys=f.length,Zs.type==="difference"){const P=f[0];let B=1;for(;B<f.length;)sf(f[B].bbox,P.bbox)!==null?B++:f.splice(B,1)}if(Zs.type==="intersection")for(let P=0,B=f.length;P<B;P++){const W=f[P];for(let J=P+1,Z=f.length;J<Z;J++)if(sf(W.bbox,f[J].bbox)===null)return[]}const g=new Lf(gs.compare);for(let P=0,B=f.length;P<B;P++){const W=f[P].getSweepEvents();for(let J=0,Z=W.length;J<Z;J++)if(g.insert(W[J]),g.size>q0)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big).")}const y=new Y3(g);let v=g.size,E=g.pop();for(;E;){const P=E.key;if(g.size===v){const W=P.segment;throw new Error(`Unable to pop() ${P.isLeft?"left":"right"} SweepEvent [${P.point.x}, ${P.point.y}] from segment #${W.id} [${W.leftSE.point.x}, ${W.leftSE.point.y}] -> [${W.rightSE.point.x}, ${W.rightSE.point.y}] from queue.`)}if(g.size>q0)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big).");if(y.segments.length>Q3)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments).");const B=y.process(P);for(let W=0,J=B.length;W<J;W++){const Z=B[W];Z.consumedBy===void 0&&g.insert(Z)}v=g.size,E=g.pop()}ku.reset();const A=Rh.factory(y.segments);return new X3(A).getGeom()}}const Zs=new tx,ex=function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),c=1;c<n;c++)o[c-1]=arguments[c];return Zs.run("union",e,o)},ix=function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),c=1;c<n;c++)o[c-1]=arguments[c];return Zs.run("intersection",e,o)},nx=function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),c=1;c<n;c++)o[c-1]=arguments[c];return Zs.run("xor",e,o)},rx=function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),c=1;c<n;c++)o[c-1]=arguments[c];return Zs.run("difference",e,o)};var sx={union:ex,intersection:ix,xor:nx,difference:rx};function ox(e,n,o){o===void 0&&(o={});var c=T0(e),f=T0(n),g=sx.intersection(c.coordinates,f.coordinates);return g.length===0?null:g.length===1?b3(g[0],o.properties):S3(g,o.properties)}function ax(e){return Fh({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M332.8 320h38.4c6.4 0 12.8-6.4 12.8-12.8V172.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v134.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V76.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v230.4c0 6.4 6.4 12.8 12.8 12.8zm-288 0h38.4c6.4 0 12.8-6.4 12.8-12.8v-70.4c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v70.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V108.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v198.4c0 6.4 6.4 12.8 12.8 12.8zM496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"},child:[]}]})(e)}function lx(e){return Fh({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zM224 416H64v-96h160v96zm0-160H64v-96h160v96zm224 160H288v-96h160v96zm0-160H288v-96h160v96z"},child:[]}]})(e)}function ux(){var Jr,Br,En;const[e,n]=Mt.useState(null),[o,c]=Mt.useState(null),[f,g]=Mt.useState(null),[y,v]=Mt.useState([]),[E,A]=Mt.useState(null),[D,P]=Mt.useState(null),[B,W]=Mt.useState(!1),[J,Z]=Mt.useState({current:0,total:0}),[q,ct]=Mt.useState(null),ft=Mt.useRef(null),St=Mt.useRef(null),[Tt,Gt]=Mt.useState([]),zt=Mt.useRef([]),Dt=Mt.useRef(null),ut=Mt.useRef(null),Bt=Mt.useRef([]),[st,yt]=Mt.useState([]),[Ct,oe]=Mt.useState({source:null,key:null,geoJSON:null,name:null}),[Le,_e]=Mt.useState("table"),[de,ce]=Mt.useState(null),[At,Qt]=Mt.useState([]),[Rt,rt]=Mt.useState(null),[It,Ce]=Mt.useState([]),[pe,ge]=Mt.useState(!1),[ae,Fe]=Mt.useState(null),[Ve,$e]=Mt.useState(null),[Mi,en]=Mt.useState(null),[vs,nn]=Mt.useState(null),[Je,_o]=Mt.useState("hsl"),[We,jr]=Mt.useState("Douglas-fir"),[Ei,Ks]=Mt.useState("04"),[bi,ir]=Mt.useState("Dry"),[$i,yo]=Mt.useState("Low Stress"),[si,xs]=Mt.useState("50"),[Ii,ws]=Mt.useState("D"),[Ri,vo]=Mt.useState("l"),kr=["png","tif","geojson","pdf"],[Zi,Un]=Mt.useState({png:!0,tif:!1,geojson:!1,pdf:!1}),[Ur,Hr]=Mt.useState(""),[Oi,Vr]=Mt.useState(null),[xn,Ms]=Mt.useState(!1),qi=Mt.useRef(null),Es=Mt.useRef(null),[Se,rn]=Mt.useState([]),[Ho,Oa]=Mt.useState(null),[xo,Vo]=Mt.useState(!1),Pr=Mt.useRef(null),[Ls,Cs]=Mt.useState([]),[yi,bs]=Mt.useState(null);Mt.useEffect(()=>{try{const V=sessionStorage.getItem("vmrc_created_rasters"),dt=sessionStorage.getItem("vmrc_active_created_raster_id");let Pt=null;if(V&&(Pt=JSON.parse(V),Array.isArray(Pt)?(console.log(`[Session] Restored ${Pt.length} created raster(s) from sessionStorage`),rn(Pt)):(console.warn("[Session] Invalid saved rasters format, skipping restore"),Pt=null)),dt){const Kt=JSON.parse(dt);if(console.log(`[Session] Restored active raster ID: ${Kt}`),P(Kt),Pt){const jt=Pt.find(Ot=>Ot.id===Kt);jt&&(A(jt.activeRasterId),ce(jt.stats||null),Qt(jt.pixelValues||[]),rt(jt.histogram||null))}}}catch(V){console.error("[Session] Failed to load from sessionStorage:",V),sessionStorage.removeItem("vmrc_created_rasters"),sessionStorage.removeItem("vmrc_active_created_raster_id")}},[]),Mt.useEffect(()=>{try{sessionStorage.setItem("vmrc_created_rasters",JSON.stringify(Se)),console.log(`[Session] Saved ${Se.length} created raster(s) to sessionStorage`)}catch(V){console.error("[Session] Failed to save createdRasters to sessionStorage:",V);try{sessionStorage.removeItem("vmrc_created_rasters"),sessionStorage.setItem("vmrc_created_rasters",JSON.stringify(Se))}catch(dt){console.error("[Session] Failed to clear and retry:",dt)}}},[Se]),Mt.useEffect(()=>{try{sessionStorage.setItem("vmrc_active_created_raster_id",JSON.stringify(D))}catch(V){console.error("[Session] Failed to save activeCreatedRasterId to sessionStorage:",V)}},[D]),Mt.useEffect(()=>{Fe(null),$e(null),en(null),nn(null)},[Je,We]),Mt.useEffect(()=>{const V={userClip:!!q,userClipRef:!!ft.current,uploadedAois:(Tt==null?void 0:Tt.length)||0,aois:y.length,activeAoi:!!Ct.geoJSON,activeAoiKey:Ct.key,createdRasters:Se.length,overlayUrl:!!o};console.log("[FilterChange]  BEFORE cleanup:",V),console.trace("[CLEAR_OVERLAYS] Filter change useEffect - clearing legacy overlay/stats ONLY"),c(null),g(null),A(null),P(null),ce(null),Qt([]),rt(null),console.log("[FilterChange]  AFTER cleanup - State setters called for overlays/stats only, AOI state preserved in closure"),console.log("[FilterChange]  Closure state (may be stale):",{userClip:!!q,userClipRef:!!ft.current,uploadedAois:(Tt==null?void 0:Tt.length)||0,aois:y.length,activeAoi:!!Ct.geoJSON})},[Je,We,Ei,bi,$i,si,Ii,Ri]),Mt.useEffect(()=>{var Pt;const V=new Error().stack,dt=((Pt=V==null?void 0:V.split(`
`)[2])==null?void 0:Pt.trim())||"unknown";console.log("[AOIState]  AOI state changed:",{aois:y.length,aoisDetails:y.map(Kt=>({id:Kt.id,type:Kt.type})),uploadedAois:(Tt==null?void 0:Tt.length)||0,userClip:!!q,userClipRef:!!ft.current,activeAoi:!!Ct.geoJSON,activeAoiKey:Ct.key,caller:dt.substring(0,100)})},[y,Tt,q,Ct]),Mt.useEffect(()=>{var Kt,jt,Ot;const V=new Error().stack,dt=((Kt=V==null?void 0:V.split(`
`)[2])==null?void 0:Kt.trim())||"unknown";((jt=zt.current)==null?void 0:jt.length)>0&&Se.length===0&&console.error("[OverlayState]  WARNING: createdRasters was cleared!",{previousCount:((Ot=zt.current)==null?void 0:Ot.length)||0,currentCount:Se.length,caller:dt.substring(0,150),fullStack:V}),console.log("[OverlayState]  Overlay state changed:",{overlayUrl:!!o,overlayBounds:!!f,createdRasters:Se.length,activeRasterId:E,activeCreatedRasterId:D,caller:dt.substring(0,100)}),zt.current=Se},[o,f,Se,E,D]),Mt.useEffect(()=>{sm().then(V=>{const dt=(V==null?void 0:V.geojson)??V;n(dt)}).catch(V=>console.error("Failed to load global AOI:",V)),fetch(ys("/rasters/list")).then(V=>V.json()).then(V=>{console.log("Loaded rasters:",V);const dt=V.items??[];Ce(dt);const Kt=dt.filter(Ot=>Ot.dataset_type==="hsl").filter(Ot=>{const Yt=Ot.name.replace(/\.tif$/,"").toUpperCase();return/^HSL_\d+_(DRY|WET|NORMAL)$/.test(Yt)}),jt=Kt.length>0;ge(jt),console.log(`[INFO] WH HSL rasters detected: ${jt?"YES":"NO"} (found ${Kt.length} WH HSL files)`),jt&&console.log("[INFO] WH HSL raster examples:",Kt.slice(0,5).map(Ot=>Ot.name))}).catch(V=>{console.error("Failed to load raster list:",V)}),cm().then(V=>{console.log("Loaded datasets:",V),Cs(V.datasets||[])}).catch(V=>{console.error("Failed to load datasets:",V)})},[]);function wn(V){if(!V)return null;try{return Th(V)}catch(dt){return console.error("Failed to normalize GeoJSON:",dt),null}}function Wo(V="draw-start"){if(V==="export-ui"||V==="ui-render"){console.warn("[MapExplorer]  BLOCKED: handleStartNewAoi called with reason:",V,"- export UI must not clear overlays");return}console.log("[MapExplorer] Starting new AOI - clearing overlays ONLY (preserving all AOIs)"),console.log("[MapExplorer] Reason:",V),console.trace("[CLEAR_OVERLAYS] handleStartNewAoi - clearing createdRasters ONLY"),console.log("[CLEAR_OVERLAY]  setCreatedRasters([]) called from handleStartNewAoi"),rn([]),A(null),P(null),ce(null),Qt([]),rt(null);try{sessionStorage.removeItem("vmrc_created_rasters"),sessionStorage.removeItem("vmrc_active_created_raster_id"),console.log("[Session] Cleared sessionStorage for new AOI")}catch(dt){console.error("[Session] Failed to clear sessionStorage:",dt)}c(null),g(null),Fe(null),$e(null),en(null),nn(null)}function Di(){console.log("[MapExplorer] Clearing drawn AOI geometry (handled by BaseMap)")}const me=Mt.useCallback(V=>{var Jt,Ht,Zt;if(!V){console.log("[MapExplorer]  EXPLICIT CLEAR: userClip cleared (both state and ref)"),console.trace("[AOI_CLEAR] handleUserClipChange(null) - explicit user action"),ct(null),ft.current=null,St.current=null,Dt.current=null,ut.current=null,c(null),g(null),Qt([]),ce(null),rt(null),A(null),P(null),Fe(null),$e(null),en(null),nn(null),oe({source:null,key:null,geoJSON:null,name:null}),console.log("[MapExplorer] Cleared active AOI (clip cleared)");return}console.log("[MapExplorer]  AOI SET/UPDATE: handleUserClipChange with GeoJSON"),console.trace("[AOI_SET] handleUserClipChange(GeoJSON) - explicit user action");const dt=Zr(V,st);if(dt.overlaps){alert(dt.message||"This AOI overlaps with an existing selected AOI. Please choose a different area.");return}const Pt=wn(V);if(!Pt){console.error("[handleUserClipChange] Failed to normalize GeoJSON");return}const Kt={id:null,geojson:Pt,name:"Drawn AOI",type:"draw",overlayUrl:null,overlayBounds:null,stats:null,pixelValues:[],activeRasterId:null,visible:!0},jt=((Zt=(Ht=(Jt=Pt==null?void 0:Pt.features)==null?void 0:Jt[0])==null?void 0:Ht.properties)==null?void 0:Zt.__aoiId)||null;St.current=jt,console.log("[MapExplorer] Extracted aoiId from GeoJSON:",jt);const Ot=jt||`drawn-${Date.now()}`,Yt={...Kt,id:Ot};Dt.current=Pt,ut.current=Ot,console.log("[MapExplorer]  Updated persistent AOI refs:",{hasGeoJSON:!!Dt.current,aoiId:ut.current}),v(ye=>{const Be=[...ye.filter(Te=>Te.type!=="draw"),Yt];return Bt.current=Be,Be}),yt(ye=>[...ye.filter(Be=>Be.source!=="drawn"),{id:Ot,source:"drawn",geojson:Pt}]),ct(Pt),ft.current=Pt,console.log("[MapExplorer] userClip updated:",!!Pt,"with stable aoiId:",Ot),oe({source:"drawn",key:Ot,geoJSON:Pt,name:"Drawn AOI"}),console.log("[MapExplorer] Set active AOI to drawn AOI:",Ot)},[st]);function Ss(V){return{"04":"April","05":"May","06":"June","07":"July","08":"August","09":"September"}[V]||V}function ks(V){return{l:"Low",ml:"Medium-Low",m:"Medium",mh:"Medium-High",h:"High",vh:"Very High"}[V]||V}function Wr(V){return V.includes("Low Stress")?"l":V.includes("Medium-Low Stress")?"ml":V.includes("Medium Stress")&&!V.includes("High")?"m":V.includes("Medium-High Stress")?"mh":V.includes("High Stress")?"h":V.includes("Very High")?"vh":"l"}function $o(V,dt,Pt,Kt,jt,Ot,Yt,Jt){const Ht=[];if(V==="mortality"?Ht.push("Mortality"):V==="hsl"&&Ht.push("HSL"),Ht.push(dt),V==="mortality")Ht.push(Kt),Ht.push(Ss(Pt));else if(V==="hsl"){const Zt={D:"Dry",W:"Wet",N:"Normal"};Ht.push(Zt[Yt]||Yt)}if(V==="mortality"&&dt==="Douglas-fir"){const Zt=Wr(jt);Ht.push(ks(Zt))}else V==="hsl"&&dt==="Douglas-fir"&&Ht.push(ks(Jt));return(V==="mortality"&&dt==="Douglas-fir"||V==="hsl"&&dt==="Douglas-fir")&&Ot&&Ht.push(`Cover ${Ot}%`),Ht.join("  ")}function wo(V,dt,Pt,Kt,jt,Ot,Yt,Jt,Ht){const Zt=[];V==="mortality"?Zt.push("Mortality"):V==="hsl"?Zt.push("HSL"):Zt.push(V||"Unknown");const ye=dt==="Douglas-fir"?"DF":dt==="Western Hemlock"?"WH":dt.replace(/\s+/g,"_");if(Zt.push(ye),V==="mortality"){const Be=Kt?Kt[0].toUpperCase()||Kt:"";if(Zt.push(Be),Pt&&Zt.push(Pt),dt==="Douglas-fir"&&jt){let Te="";try{Te=Wr?Wr(jt):""}catch{Te=jt.replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_]/g,"")}Te||(Te=jt.replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_]/g,"")),Te&&Zt.push(Te)}}else if(V==="hsl"){const Be=Yt||"";Zt.push(Be),dt==="Douglas-fir"&&Jt&&Zt.push(Jt)}return Ot&&Zt.push(`Cover${Ot}`),Zt.filter(Be=>Be).join("_").replace(/[^a-zA-Z0-9_-]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"")}function nr(V,dt){let Pt="";return V==="Dry"?Pt="D":V==="Wet"?Pt="W":V==="Normal"?Pt="N":Pt=V[0],`M2.5_${Pt}${dt}`}function rr(V,dt,Pt,Kt,jt){if(!It.length)return console.warn("No rasters loaded"),null;const Ot=It.filter(Jt=>Jt.dataset_type==="mortality"||!Jt.dataset_type);let Yt="";if(V==="Western Hemlock"){if(!jt||jt.trim()==="")return alert("Please select a Cover % value for Western Hemlock mortality rasters."),null;Yt=nr(Pt,dt),console.log("WH Mortality pattern:",Yt),console.log("  Species: WH | Condition:",Pt,"| Month:",dt,"| Cover:",jt+"%");const Jt=`\\${jt}\\`,Ht=`/${jt}/`;console.log(`[DEBUG] Filtering WH rasters by cover folder: ${jt} (looking for ${Jt} or ${Ht} in path)`);const Zt=Ot.filter(Be=>{if(!Be.path)return console.warn(`[WARN] Raster ${Be.name} has no path property`),!1;const Te=Be.path.includes(Jt)||Be.path.includes(Ht);return Te&&console.log(`[DEBUG] Raster ${Be.name} matches cover folder: ${Be.path}`),Te});if(console.log(`[DEBUG] Found ${Zt.length} WH rasters in cover ${jt}% folder`),Zt.length===0)return console.error(` No WH rasters found in cover ${jt}% folder`),alert(`No raster found for Cover ${jt}%. Please check if this cover value exists in the dataset.`),null;const ye=Zt.find(Be=>Be.name.replace(/\.tif$/,"")===Yt);if(ye){const Be=ye.name.replace(/\.tif$/,"");return console.log(" Found exact match:",Be,"| Cover:",jt+"%","| ID:",ye.id),console.log("  Full path:",ye.path),!ye.path.includes(Jt)&&!ye.path.includes(Ht)?(console.error(` CRITICAL: Matched raster path does not contain cover ${jt}% folder:`,ye.path),alert(`Error: Matched raster does not match selected cover ${jt}%. This is a bug.`),null):{id:ye.id,name:Be,path:ye.path}}console.error(` No WH raster found matching pattern "${Yt}" in cover ${jt}% folder`),console.error(`   Searched ${Zt.length} rasters in cover ${jt}% folder`);const ie=Zt.slice(0,10).map(Be=>Be.name.replace(/\.tif$/,""));return console.error(`   Available files in cover ${jt}% folder (first 10):`,ie),alert(`No raster found matching pattern "${Yt}" for Cover ${jt}%. Available files: ${ie.slice(0,5).join(", ")}`),null}else{if(!jt||jt.trim()==="")return alert("Please select a Cover % value for Douglas-fir mortality rasters."),null;const Jt=Wr(Kt);let Ht="";Pt==="Dry"?Ht="D":Pt==="Wet"?Ht="W":Pt==="Normal"?Ht="N":Ht=Pt[0],Yt=`M2.5_DF_${Ht}${dt}_${Jt}`,console.log("DF Mortality pattern:",Yt),console.log("  Species: DF | Condition:",Ht,"| Month:",dt,"| Stress:",Jt,"| Cover:",jt+"%");const Zt=`\\${jt}\\`,ye=`/${jt}/`;console.log(`[DEBUG] Filtering rasters by cover folder: ${jt} (looking for ${Zt} or ${ye} in path)`);const ie=Ot.filter(Ue=>{if(!Ue.path)return console.warn(`[WARN] Raster ${Ue.name} has no path property`),!1;const oi=Ue.path.includes(Zt)||Ue.path.includes(ye);return oi&&console.log(`[DEBUG] Raster ${Ue.name} matches cover folder: ${Ue.path}`),oi});if(console.log(`[DEBUG] Found ${ie.length} rasters in cover ${jt}% folder`),ie.length===0)return console.error(` No rasters found in cover ${jt}% folder`),alert(`No raster found for Cover ${jt}%. Please check if this cover value exists in the dataset.`),null;const Be=ie.find(Ue=>Ue.name.replace(/\.tif$/,"")===Yt);if(Be){const Ue=Be.name.replace(/\.tif$/,"");return console.log(" Found exact match:",Ue,"| Cover:",jt+"%","| ID:",Be.id),console.log("  Full path:",Be.path),!Be.path.includes(Zt)&&!Be.path.includes(ye)?(console.error(` CRITICAL: Matched raster path does not contain cover ${jt}% folder:`,Be.path),alert(`Error: Matched raster does not match selected cover ${jt}%. This is a bug.`),null):{id:Be.id,name:Ue,path:Be.path}}console.error(` No raster found matching pattern "${Yt}" in cover ${jt}% folder`),console.error(`   Searched ${ie.length} rasters in cover ${jt}% folder`);const Te=ie.slice(0,10).map(Ue=>Ue.name.replace(/\.tif$/,""));return console.error(`   Available files in cover ${jt}% folder (first 10):`,Te),alert(`No raster found matching pattern "${Yt}" for Cover ${jt}%. Available files: ${Te.slice(0,5).join(", ")}`),null}}function $r(V,dt,Pt,Kt=null){if(!It.length)return null;const jt=Kt==="Western Hemlock"||We==="Western Hemlock";let Ot="";if(jt){if(!V||V.trim()==="")return alert("Please select a Cover % value for Western Hemlock HSL rasters."),null;let Zt="";dt==="D"||dt==="DRY"?Zt="DRY":dt==="W"||dt==="WET"?Zt="WET":dt==="N"||dt==="NORMAL"?Zt="NORMAL":Zt=dt.toUpperCase(),Ot=`HSL_${V}_${Zt}`,console.log("WH HSL pattern:",Ot),console.log("  Species: WH | Cover:",V,"| Condition:",Zt);const ye=`\\${V}\\`,ie=`/${V}/`;console.log(`[DEBUG] Filtering WH HSL rasters by cover folder: ${V} (looking for ${ye} or ${ie} in path)`);const Te=It.filter(Qe=>{const dn=Qe.name.replace(/\.tif$/,"").toUpperCase();return Qe.dataset_type==="hsl"||dn.includes("HSL")}).filter(Qe=>{if(!Qe.path)return console.warn(`[WARN] Raster ${Qe.name} has no path property`),!1;const dn=Qe.path.includes(ye)||Qe.path.includes(ie);return dn&&console.log(`[DEBUG] Raster ${Qe.name} matches cover folder: ${Qe.path}`),dn});if(console.log(`[DEBUG] Found ${Te.length} WH HSL rasters in cover ${V}% folder`),Te.length===0)return console.error(` No WH HSL rasters found in cover ${V}% folder`),alert(`No raster found for Cover ${V}%. Please check if this cover value exists in the dataset.`),null;const Ue=Te.find(Qe=>Qe.name.replace(/\.tif$/,"")===Ot);if(Ue){const Qe=Ue.name.replace(/\.tif$/,"");return console.log(" Found WH HSL raster:",Qe,"| Cover:",V+"%","| ID:",Ue.id,"Path:",Ue.path),!Ue.path.includes(ye)&&!Ue.path.includes(ie)?(console.error(` CRITICAL: Matched raster path does not contain cover ${V}% folder:`,Ue.path),alert(`Error: Matched raster does not match selected cover ${V}%. This is a bug.`),null):{id:Ue.id,name:Qe,path:Ue.path}}const oi=Te.find(Qe=>Qe.name.replace(/\.tif$/,"").toUpperCase()===Ot.toUpperCase());if(oi){const Qe=oi.name.replace(/\.tif$/,"");return console.log(" Found WH HSL raster (case-insensitive):",Qe,"| Cover:",V+"%","| ID:",oi.id,"Path:",oi.path),{id:oi.id,name:Qe,path:oi.path}}return console.warn(" No WH HSL raster found matching pattern:",Ot),console.warn("   Checked",Te.length,"WH HSL rasters in cover",V+"%"),null}else Ot=`HSL2.5_DF_${V}_${dt}_${Pt}`,console.log("DF HSL pattern:",Ot),console.log("  Species: DF | Cover:",V,"| Condition:",dt,"| Class:",Pt);const Yt=It.filter(Zt=>{const ye=Zt.name.replace(/\.tif$/,"").toUpperCase();return Zt.dataset_type==="hsl"||ye.includes("HSL")});console.log(`[DEBUG] Searching in ${Yt.length} HSL rasters for: ${Ot}`),Yt.length>0&&console.log("[DEBUG] Available HSL raster names (first 20):",Yt.slice(0,20).map(Zt=>Zt.name.replace(/\.tif$/,"")));const Jt=Yt.find(Zt=>Zt.name.replace(/\.tif$/,"")===Ot);if(Jt){const Zt=Jt.name.replace(/\.tif$/,"");return console.log(" Found HSL raster:",Zt,"ID:",Jt.id,"Path:",Jt.path),{id:Jt.id,name:Zt,path:Jt.path}}const Ht=Yt.find(Zt=>Zt.name.replace(/\.tif$/,"").toUpperCase()===Ot.toUpperCase());if(Ht){const Zt=Ht.name.replace(/\.tif$/,"");return console.log(" Found HSL raster (case-insensitive):",Zt,"ID:",Ht.id,"Path:",Ht.path),{id:Ht.id,name:Zt,path:Ht.path}}return console.warn(" No HSL raster found matching pattern:",Ot),console.warn("   Checked",Yt.length,"HSL rasters"),null}const Da=Mt.useCallback((V,dt)=>!V||!dt?!1:JSON.stringify(V)===JSON.stringify(dt),[]),Zo=Mt.useCallback(V=>{rn(dt=>[...dt.filter(Kt=>Kt.aoiId!==V.aoiId),V])},[]);async function qo(){var Xr;const V={userClip:!!q,userClipRef:!!ft.current,uploadedAois:(Tt==null?void 0:Tt.length)||0,aois:y.length,aoisDetails:y.map(we=>({id:we.id,type:we.type,hasGeojson:!!we.geojson})),activeAoi:!!Ct.geoJSON,activeAoiKey:Ct.key,createdRasters:Se.length,drawnAoiIdRef:St.current};console.log("[Generate]  START - Full state:",V);const dt=Dt.current,Pt=Bt.current,Kt=y.filter(we=>we.type!=="base"&&we.geojson),jt=Kt.length>0,Ot=dt||ft.current||q,Yt=!!Ot,Jt=((Tt==null?void 0:Tt.length)??0)>0;dt&&!q&&!ft.current&&(console.log("[Generate]  RESTORING: React state lost, restoring from persistent refs"),ct(dt),ft.current=dt,St.current=ut.current),Pt.length>0&&y.length===0&&(console.log("[Generate]  RESTORING: aois array lost, restoring from persistent refs"),v(Pt)),console.log("[Generate]  Detection check:",{aoisInState:jt,aoisInStateCount:Kt.length,hasDrawn:Yt,hasUploads:Jt,decision:jt||Yt||Jt?"HAS_AOI":"NO_AOI"});let Ht=Kt;const Zt=y.find(we=>we.type==="draw"),ye=Ht.some(we=>we.type==="draw");if(Yt&&Ot){if(Zt&&!ye)console.log("[Generate]  Adding drawn AOI from aois array to targets"),Ht.push(Zt);else if(!Zt&&!ye){const we=St.current||"drawn";console.log("[Generate]  Adding drawn AOI from ref/state to targets (not in aois array)"),Ht.push({id:we,type:"draw",name:"Drawn AOI",geojson:Ot})}}if(Ht.length===0){console.error("[Generate]  NO TARGETS - Decision breakdown:",{aoisInState:jt,aoisInStateCount:Kt.length,hasDrawn:Yt,hasUploads:Jt,aoisArray:y.map(we=>({id:we.id,type:we.type,hasGeojson:!!we.geojson})),userClip:!!q,userClipRef:!!ft.current}),alert("Draw or upload an AOI first.");return}if(console.log(`[Generate] Will generate for ${Ht.length} AOI(s):`,Ht.map(we=>({id:we.id,name:we.name,type:we.type}))),console.log(`[MapExplorer] Generating rasters for ${Ht.length} AOI(s)`),Je==="hsl"&&We==="Western Hemlock"&&!pe){alert("HSL is only available for Douglas-fir. Please select Douglas-fir or switch to Mortality map type."),Fe(null),$e(null),en(null),nn(null);return}let ie=null;if(Je==="mortality")ie=rr(We,Ei,bi,$i,si);else if(Je==="hsl"){const we=Ii;if(We==="Douglas-fir"){if(!si||si.trim()===""){alert("Please select a Cover % value for Douglas-fir HSL rasters."),Fe(null),$e(null),en(null),nn(null);return}ie=$r(si,we,Ri,We)}else if(We==="Western Hemlock"){if(!si||si.trim()===""){alert("Please select a Cover % value for Western Hemlock HSL rasters."),Fe(null),$e(null),en(null),nn(null);return}ie=$r(si,we,null,We)}}if(!ie||!ie.id){Fe(null),$e(null),en(null),nn(null),console.error(" No raster found matching filters"),console.error("   Map Type:",Je),console.error("   Species:",We),Je==="mortality"?(console.error("   Month:",Ei,"| Condition:",bi),We==="Douglas-fir"&&console.error("   Stress:",$i,"| Cover:",si)):Je==="hsl"&&console.error("   Condition:",Ii,"| Class:",Ri,"| Cover:",si),alert("No raster found matching filters. Check console for details.");return}const Be=ie.path||null,Te=ie.name.endsWith(".tif")?ie.name:`${ie.name}.tif`;en(Be),$e(Te),Fe(null),nn(null),console.log("[INFO] Selected Raster - Path:",Be,"| Filename:",Te);const Ue=ie.id;if(qi.current){const we=qi.current,be=we.getZoom(),fi=we.getCenter(),wi=750,Si=90,Pe=156543.03392*Math.cos(fi.lat*Math.PI/180)/Math.pow(2,be);if(wi/Pe>Si){const ei=156543.03392*Math.cos(fi.lat*Math.PI/180),sn=Math.floor(Math.log2(Si*ei/wi));alert("You're zoomed in too far. Each raster pixel is huge at this zoom, so the overlay won't look true-to-size. We'll zoom out to the closest valid level so pixels cover the triangle correctly."),we.setZoom(sn),await new Promise(Ln=>setTimeout(Ln,300))}}W(!0),Z({current:0,total:Ht.length});const oi=[],Qe=[],dn={mapType:Je,species:We,month:Ei,condition:bi,dfStress:$i,coverPercent:si,hslCondition:Ii,hslClass:Ri};try{for(let we=0;we<Ht.length;we++){const be=Ht[we];Z({current:we+1,total:Ht.length});try{const fi=be.type==="draw"&&St.current||be.id,wi=Se.find(Rr=>Rr.aoiId===fi);if(wi&&wi.filtersUsed&&Da(wi.filtersUsed,dn)){console.log(`[MapExplorer]  Skipping AOI ${be.name||be.id}: Already generated with same filters`);continue}const Si=be.geojson||(be.type==="draw"&&(ft.current||q)?ft.current||q:null);if(!Si){console.warn(`[MapExplorer] Skipping AOI ${be.id}: No geometry available`),Qe.push({aoi:be,error:"No geometry available"});continue}const Pe=wn(Si);if(!Pe){console.warn(`[MapExplorer] Skipping AOI ${be.id}: Invalid geometry`),Qe.push({aoi:be,error:"Invalid geometry"});continue}console.log(`[MapExplorer] Generating raster ${we+1}/${Ht.length} for AOI: ${be.name||be.id}`);const ti=await om({rasterLayerId:Ue,userClipGeoJSON:Pe,zoom:qi.current?qi.current.getZoom():null});console.log("[MapExplorer] GENERATE RESPONSE for AOI:",be.name||be.id,ti);const ei=ti.overlay_url??ti.overlayUrl??null,sn=ti.bounds??ti.overlayBounds??null;let Ln=ti.stats??null;const Xs=ti.pixel_values??ti.pixelValues??ti.pixels??ti.values??[];let Hn=ti.histogram??null;Ln?console.log("[MapExplorer]  Stats received:",Ln):(console.error("[MapExplorer]  WARNING: No stats in generate response for AOI:",be.name||be.id),console.error("[MapExplorer] Response keys:",Object.keys(ti)));const Tn=$o(Je,We,Ei,bi,$i,si,Ii,Ri),Yr=be.name||(be.type==="upload"?"Uploaded AOI":"Drawn AOI"),Tr=new Date().toISOString(),mi=new Date(Tr).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),Cn=new Date(Tr).toLocaleDateString([],{month:"short",day:"numeric"}),Ir=`${Tn}  ${Yr}  ${Cn} ${mi}`,Bs={colors:["#006400","#228B22","#9ACD32","#FFD700","#FFA500","#FF8C00","#FF6B00","#FF4500","#DC143C","#B22222"],labels:["010","1020","2030","3040","4050","5060","6070","7080","8090","90100"]};let Eo=sn;sn&&typeof sn=="object"&&!Array.isArray(sn)&&sn.south!==void 0&&(Eo=[[sn.south,sn.west],[sn.north,sn.east]]);const Lo=be.type==="draw"&&St.current||be.id;console.log("[PAIR] register overlay for aoiId:",Lo,"aoiType:",be.type);const Qr={id:`raster-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:Ir,createdAt:Tr,overlayUrl:ei,overlayBounds:Eo,bounds:Eo,stats:Ln,pixelValues:Array.isArray(Xs)?Xs:[],histogram:Hn,activeRasterId:Ue,ramp:Bs,aoiId:Lo,aoiName:Yr,aoiType:be.type||"draw",aoiGeojson:be.geojson,filtersUsed:{mapType:Je,species:We,month:Ei,condition:bi,dfStress:$i,coverPercent:si,hslCondition:Ii,hslClass:Ri},meta:{mapType:Je,species:We,month:Ei,condition:bi,dfStress:$i,coverPercent:si,hslCondition:Ii,hslClass:Ri}};Zo(Qr),oi.push(Qr),console.log(`[MapExplorer]  Successfully generated raster for AOI: ${Yr}`)}catch(fi){console.error(`[MapExplorer]  Failed to generate raster for AOI ${be.name||be.id}:`,fi);let wi=fi.message||"Unknown error";if(fi.status===422||fi.detail){const Si=fi.detail||fi.message||"";Si.includes("AOI contains no raster data")||Si.includes("no raster data for this layer")||Si.includes("AOI outside raster extent")||Si.includes("AOI too small")||Si.includes("no intersect")?(alert("AOI doesn't overlap this raster. Try a different area."),wi="AOI doesn't overlap this raster"):wi=Si}Qe.push({aoi:be,error:wi})}}}finally{W(!1),Z({current:0,total:0})}if(console.log("[Generate] AFTER - AOI state preserved:",{userClip:!!q,lastDrawnAoiRef:!!((Xr=Es.current)!=null&&Xr.current),uploadedAoisLen:Tt==null?void 0:Tt.length,aoisLen:y.length,hasDrawn:y.some(we=>we.type==="draw"),hasUploads:y.some(we=>we.type==="upload")}),oi.length>0){const we=oi[oi.length-1];if(A(Ue),P(we.id),ce(we.stats||null),Qt(we.pixelValues||[]),rt(we.histogram||null),console.log("[MapExplorer] Set active raster:",we.id,"with stats:",we.stats?"":""),!Ur||Ur.trim()===""){const be=Ht[0];be!=null&&be.type;const fi=wo(Je,We,Ei,bi,$i,si,Ii,Ri);Hr(fi),console.log(`[MapExplorer] Auto-generated export filename: ${fi}`)}}if(oi.length===Ht.length)Ht.length===1?alert(`Successfully generated raster for ${Ht[0].name||"AOI"}.`):alert(`Successfully generated ${oi.length} raster(s) for ${Ht.length} AOI(s).`);else if(oi.length>0){const we=Qe.map(be=>be.aoi.name||be.aoi.id).join(", ");alert(`${oi.length}/${Ht.length} AOI(s) generated successfully.

Failed: ${we}
`+Qe.map(be=>`- ${be.aoi.name||be.aoi.id}: ${be.error}`).join(`
`))}else alert(`Failed to generate rasters for all ${Ht.length} AOI(s).

`+Qe.map(we=>`- ${we.aoi.name||we.aoi.id}: ${we.error}`).join(`
`))}async function Ko(){var Yt;const V={userClip:!!q,userClipRef:!!ft.current,uploadedAois:(Tt==null?void 0:Tt.length)||0,aois:y.length,activeAoi:!!Ct.geoJSON,activeAoiKey:Ct.key,createdRasters:Se.length,overlayUrl:!!o,activeRasterId:E};if(console.log("[Export]  START - Full state BEFORE:",V),console.log("[Export]  Checking if export request will fire..."),Se.length===0){console.warn("[Export]  BLOCKED - No created rasters"),alert("Generate a map first before exporting.");return}console.log("[Export]  Proceeding - No cleanup functions called");let dt=Ct.geoJSON;if(Ct.name,!dt){const Jt=Se[Se.length-1];if(Jt!=null&&Jt.aoiGeojson)dt=Jt.aoiGeojson,Jt.aoiName,console.log("[Export] Using AOI from most recent raster");else{const Ht=y.find(ie=>ie.type==="draw"),Zt=y.find(ie=>ie.type==="upload"),ye=Ht||Zt;if(ye!=null&&ye.geojson)dt=ye.geojson,ye.name,console.log("[Export] Using AOI from aois array");else if(ft.current||q)dt=ft.current||q,console.log("[Export] Using AOI from userClipRef/userClip");else{alert("Draw or upload an AOI before exporting.");return}}}if(Je==="hsl"&&We==="Western Hemlock"&&!pe){alert("High Stress Level (HSL) is only available for Douglas-fir.");return}let Pt=Object.entries(Zi).filter(([Jt,Ht])=>kr.includes(Jt)&&Ht).map(([Jt,Ht])=>Jt);if(Pt.length===0){alert("Please select at least one export format.");return}let Kt=null;if(Je==="mortality")Kt=rr(We,Ei,bi,$i,si);else if(Je==="hsl"){const Jt=Ii;if(We==="Douglas-fir")Kt=$r(si,Jt,Ri,We);else{if(!si||si.trim()===""){alert("Please select a Cover % value for Western Hemlock HSL rasters.");return}Kt=$r(si,Jt,null,We)}}if(!Kt||!Kt.id){alert("No raster found matching filters.");return}const jt=Kt.id,Ot={mapType:Je,species:We,coverPercent:Je==="mortality"&&(We==="Douglas-fir"||We==="Western Hemlock")||Je==="hsl"&&(We==="Douglas-fir"||We==="Western Hemlock")?si:null,condition:Je==="mortality"?bi:Je==="hsl"?Ii:null,month:Je==="mortality"?Ei:null,stressLevel:Je==="mortality"&&We==="Douglas-fir"?$i:null,hslClass:Je==="hsl"&&We==="Douglas-fir"?Ri:null,selectedRasterName:Ve||Kt.name,selectedRasterPath:Mi||Kt.path};Ms(!0),Vr(null);try{let Jt=null,Ht=null,Zt=null,ye=null;if(Pt.includes("pdf")&&Se.length>0)if(Se.length===1){const Te=Se[0];Jt=Te.overlayUrl,Ht=Te.aoiName||Te.name||"Drawn AOI",ye=Te.aoiGeojson||wn(dt),Te.stats&&(Ot.stats=Te.stats),Te.overlayBounds&&(Ot.bounds=Te.overlayBounds)}else Zt=Se.map(Te=>({overlay_url:Te.overlayUrl,aoi_name:Te.aoiName||Te.name||"Drawn AOI",stats:Te.stats||{},bounds:Te.overlayBounds||{},user_clip_geojson:Te.aoiGeojson||wn(dt)})),ye=((Yt=Se[0])==null?void 0:Yt.aoiGeojson)||wn(dt);else if(ye=wn(dt),!ye){console.error("[Export] Invalid clip geometry:",dt),alert("Invalid clip geometry. Please draw or upload a valid AOI."),Ms(!1);return}console.log("[Export]  Calling exportRaster API with:",{rasterLayerId:jt,hasClipGeoJSON:!!ye,formats:Pt,hasOverlayUrl:!!Jt,hasOverlayUrls:!!Zt}),console.log("[Export]  State check before API call:",{createdRasters:Se.length,aois:y.length,overlayUrl:!!Jt,userClip:!!q});const ie=await am({rasterLayerId:jt,userClipGeoJSON:ye,formats:Pt,filename:Ur.trim()||null,context:Ot,overlayUrl:Jt,aoiName:Ht,overlayUrls:Zt}),Be=ie.files||{};if(Vr(Be),console.log("[Export]  SUCCESS - Export results:",{status:ie.status,files:Object.keys(Be),errors:ie.errors||{}}),console.log("[Export]  State AFTER export (closure, may be stale):",{userClip:!!q,userClipRef:!!ft.current,uploadedAois:(Tt==null?void 0:Tt.length)||0,aois:y.length,createdRasters:Se.length,overlayUrl:!!Jt}),ie.errors&&Object.keys(ie.errors).length>0){console.warn("[Export]  Some exports had errors:",ie.errors);const Te=Object.entries(ie.errors).map(([Ue,oi])=>`${Ue.toUpperCase()}: ${oi}`).join(`
`);alert(`Some exports failed:

${Te}`)}}catch(Jt){console.error("[Export]  FAILED:",Jt),alert((Jt==null?void 0:Jt.message)||"Export failed. Check console for details."),Vr(null)}finally{Ms(!1),console.log("[Export]  FINALLY - Export complete, setIsExporting(false) called"),console.log("[Export]  Final state check (closure):",{userClip:!!q,aois:y.length,createdRasters:Se.length,overlayUrl:!!o})}}function Zr(V,dt){if(!V||!dt||dt.length===0)return{overlaps:!1,message:null};try{let Pt=null;if(V.type==="FeatureCollection"){if(V.features.length===0)return{overlaps:!1,message:null};Pt=V.features[0]}else if(V.type==="Feature")Pt=V;else if(V.type==="Polygon"||V.type==="MultiPolygon")Pt={type:"Feature",geometry:V,properties:{}};else return{overlaps:!1,message:null};for(const Kt of dt)try{let jt=null;if(Kt.geojson.type==="FeatureCollection"){if(Kt.geojson.features.length===0)continue;jt=Kt.geojson.features[0]}else if(Kt.geojson.type==="Feature")jt=Kt.geojson;else if(Kt.geojson.type==="Polygon"||Kt.geojson.type==="MultiPolygon")jt={type:"Feature",geometry:Kt.geojson,properties:{}};else continue;const Ot=ox(Pt,jt);if(Ot&&N3(Ot)>0)return{overlaps:!0,message:"This AOI overlaps with an existing selected AOI. Please choose a different area."}}catch(jt){console.log(`[Overlap check] No intersection with AOI ${Kt.id}:`,jt.message);continue}return{overlaps:!1,message:null}}catch(Pt){return console.error("[Overlap check] Error checking overlap:",Pt),{overlaps:!1,message:null}}}function Mo(V){if(!V||typeof V!="object")return{valid:!1,error:"Invalid GeoJSON: must be an object"};const dt=["FeatureCollection","Feature","Polygon","MultiPolygon"];if(!V.type||!dt.includes(V.type))return{valid:!1,error:`Invalid GeoJSON type: "${V.type}". Supported types: ${dt.join(", ")}`};if(V.type==="FeatureCollection"){if(!Array.isArray(V.features))return{valid:!1,error:"Invalid FeatureCollection: features must be an array"};if(V.features.length===0)return{valid:!1,error:"Invalid FeatureCollection: must contain at least one feature"};for(const Pt of V.features){if(Pt.type!=="Feature")return{valid:!1,error:"Invalid FeatureCollection: all items must be Features"};if(!Pt.geometry||!Pt.geometry.type)return{valid:!1,error:"Invalid Feature: geometry is required"};const Kt=Pt.geometry.type;if(Kt!=="Polygon"&&Kt!=="MultiPolygon")return{valid:!1,error:`Invalid geometry type: "${Kt}". Only Polygon and MultiPolygon are supported for AOI.`}}}if(V.type==="Feature"){if(!V.geometry||!V.geometry.type)return{valid:!1,error:"Invalid Feature: geometry is required"};const Pt=V.geometry.type;if(Pt!=="Polygon"&&Pt!=="MultiPolygon")return{valid:!1,error:`Invalid geometry type: "${Pt}". Only Polygon and MultiPolygon are supported for AOI.`}}return(V.type==="Polygon"||V.type==="MultiPolygon")&&(!V.coordinates||!Array.isArray(V.coordinates))?{valid:!1,error:`Invalid ${V.type}: coordinates must be an array`}:{valid:!0}}async function Js(V){const Pt=V.name.toLowerCase().split(".").pop();if(!["geojson","json","kml","zip"].includes(Pt))return{success:!1,added:0,skipped:0,errors:[`Invalid file type: .${Pt}. Please upload a GeoJSON (.geojson/.json), KML (.kml), or Shapefile (.zip) file.`]};try{const jt=await L3(V);if(jt.length===0)return{success:!1,added:0,skipped:0,errors:[`No valid features found in ${V.name}.`]};const Ot=[],Yt=[];for(const Ht of jt){const Zt=Mo(Ht);if(!Zt.valid){let ye=Pt==="zip"?"Shapefile":Pt==="kml"?"KML":"GeoJSON";Yt.push(`${V.name}: ${Zt.error}`);continue}Ot.push(Ht)}if(Ot.length===0)return{success:!1,added:0,skipped:0,errors:Yt};const Jt=[];for(const Ht of Ot){const Zt=Zr(Ht,st);if(Zt.overlaps){Yt.push(`${V.name}: ${Zt.message||"Overlaps with existing AOI. Choose something else."}`);continue}const ye=`upload-${V.name}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,ie=wn(Ht);Jt.push({id:ye,geojson:ie,name:V.name+(Ot.length>1?` (Layer ${Ot.indexOf(Ht)+1})`:""),type:"upload",overlayUrl:null,overlayBounds:null,stats:null,pixelValues:[],activeRasterId:null,visible:!0,_fileName:V.name})}if(Jt.length===0)return{success:!1,added:0,skipped:Ot.length,errors:Yt};if(Gt(Ht=>[...Ht,...Jt]),yt(Ht=>[...Ht,...Jt.map(Zt=>({id:Zt.id,source:"uploaded",geojson:Zt.geojson}))]),v(Ht=>[...Ht,...Jt]),Jt.length>0){ct(Jt[0].geojson);const Ht=Jt[0];oe({source:"uploaded",key:Ht.id,geoJSON:Ht.geojson,name:Ht.name||Ht._fileName||"Uploaded AOI"}),console.log("[MapExplorer] Set active AOI to uploaded AOI:",Ht.id)}return{success:!0,added:Jt.length,skipped:Ot.length-Jt.length,errors:Yt,newAois:Jt}}catch(jt){console.error(`AOI upload error for ${V.name}:`,jt);let Ot=jt.message||"Unknown error";return Pt==="zip"&&(Ot.toLowerCase().includes("shp")||Ot.toLowerCase().includes("shx")||Ot.toLowerCase().includes("dbf")?Ot=`Invalid shapefile: ${Ot}

A valid shapefile ZIP must contain .shp, .shx, and .dbf files.`:Ot.includes("shapefile")||(Ot=`Invalid shapefile: ${Ot}

Please ensure the ZIP file contains a valid shapefile with .shp, .shx, and .dbf files.`)),{success:!1,added:0,skipped:0,errors:[`${V.name}: ${Ot}`]}}}async function gi(V){const dt=Array.from(V.target.files||[]);if(dt.length===0)return;const Pt=[];for(const Yt of dt){const Jt=await Js(Yt);Pt.push({file:Yt.name,...Jt})}const Kt=Pt.reduce((Yt,Jt)=>Yt+Jt.added,0),jt=Pt.reduce((Yt,Jt)=>Yt+Jt.skipped,0),Ot=Pt.flatMap(Yt=>Yt.errors);if(Kt>0){let Yt=`Successfully uploaded ${Kt} AOI(s)`;jt>0&&(Yt+=` (${jt} skipped due to overlaps or validation errors)`),Ot.length>0&&Ot.length<=3?Yt+=`

Errors:
${Ot.join(`
`)}`:Ot.length>3&&(Yt+=`

${Ot.length} error(s) occurred. Check console for details.`,console.warn("Upload errors:",Ot)),alert(Yt)}else{const Yt=Ot.length>0?`Failed to upload AOIs:

${Ot.slice(0,5).join(`
`)}${Ot.length>5?`
... and ${Ot.length-5} more`:""}`:"No valid AOIs found in uploaded files.";alert(Yt)}if(Kt>0&&qi.current){const Yt=[];for(const Jt of Pt)Jt.newAois&&Jt.newAois.length>0&&Yt.push(...Jt.newAois);if(Yt.length>0){const Jt=Yt.map(Ht=>C3(Ht.geojson)).filter(Ht=>Ht!==null);if(Jt.length>0){let Ht=1/0,Zt=-1/0,ye=1/0,ie=-1/0;Jt.forEach(([[Be,Te],[Ue,oi]])=>{Ht=Math.min(Ht,Be),Zt=Math.max(Zt,Ue),ye=Math.min(ye,Te),ie=Math.max(ie,oi)}),Ht!==1/0&&qi.current.fitBounds([[Ht,ye],[Zt,ie]],{padding:[50,50],maxZoom:12})}}}Pr.current&&(Pr.current.value="")}function Na(){console.log("[MapExplorer]  EXPLICIT CLEAR ALL: handleClearUploadedAois"),console.trace("[AOI_CLEAR] handleClearUploadedAois - explicit user action"),v([]),Gt([]),yt([]),ct(null),Dt.current=null,ut.current=null,Bt.current=[],ft.current=null,St.current=null,Wo("clear-all"),Pr.current&&(Pr.current.value="")}const qr=Mt.useCallback(V=>{console.log(`[MapExplorer] onRemoveRasterByAoiId: Removing rasters with aoiId=${V} from createdRasters state`),rn(dt=>{const Pt=dt.filter(Kt=>Kt.aoiId!==V);return console.log(`[MapExplorer] onRemoveRasterByAoiId: State updated - ${dt.length} -> ${Pt.length} rasters`),Pt})},[]),Jo=Mt.useCallback(V=>{console.log("[MapExplorer] handleAoiErased called with aoiId:",V),rn(Pt=>{const Kt=Pt.filter(jt=>jt.aoiId!==V);return console.log(`[MapExplorer] Removed ${Pt.length-Kt.length} raster(s) for erased AOI ${V}`),Kt}),(St.current===V||ut.current===V)&&(console.log("[MapExplorer]  EXPLICIT ERASE: Clearing drawn AOI refs for erased AOI"),console.trace("[AOI_CLEAR] handleAoiErased - explicit user action"),St.current=null,ft.current=null,ct(null),Dt.current=null,ut.current=null,v(Pt=>{const Kt=Pt.filter(jt=>jt.id!==V);return Bt.current=Kt,console.log(`[MapExplorer] Removed drawn AOI ${V} from aois array: ${Pt.length} -> ${Kt.length}`),Kt}),yt(Pt=>Pt.filter(Kt=>Kt.id!==V))),qr&&qr(V)},[qr]);function Ps(V){console.log("[MapExplorer] handleRemoveAoi called with aoiId:",V),v(dt=>{const Pt=dt.find(Ot=>Ot.id===V),Kt=(Pt==null?void 0:Pt.type)==="draw"||St.current===V;(Pt||Kt)&&(Kt&&(console.log("[MapExplorer] Removing drawn AOI - clearing refs"),St.current=null,ft.current=null,ct(null)),(Pt==null?void 0:Pt.type)==="upload"&&Gt(Ot=>Ot.filter(Yt=>Yt.id!==V)),yt(Ot=>Ot.filter(Yt=>Yt.id!==V)),Pt&&q&&JSON.stringify(Pt.geojson)===JSON.stringify(q)&&(ce(null),Qt([]),rt(null),A(null),P(null)));const jt=dt.filter(Ot=>Ot.id!==V);return console.log(`[MapExplorer] Removed AOI ${V} from aois array: ${dt.length} -> ${jt.length}`),jt})}function Kr(V){const dt=Se.find(Pt=>Pt.id===V);dt&&(P(V),A(dt.activeRasterId),ce(dt.stats),Qt(dt.pixelValues||[]),rt(dt.histogram))}async function Ar(V){const dt=Se.find(jt=>jt.id===V);if(!dt)return;const Pt=V===D,Kt=dt.aoiId;if(dt.overlayUrl)try{await Yd(dt.overlayUrl),console.log(`[MapExplorer] Deleted overlay file: ${dt.overlayUrl}`)}catch(jt){console.warn(`[MapExplorer] Failed to delete overlay file: ${jt.message}`)}if(console.log(`[MapExplorer] handleRemoveRaster: Removing raster ${V} from createdRasters state`),rn(jt=>{const Ot=jt.filter(Yt=>Yt.id!==V);return console.log(`[MapExplorer] handleRemoveRaster: State updated - ${jt.length} -> ${Ot.length} rasters`),Ot}),Kt&&(Tt.find(Ot=>Ot.id===Kt)?(Gt(Ot=>Ot.filter(Yt=>Yt.id!==Kt)),v(Ot=>Ot.filter(Yt=>Yt.id!==Kt)),yt(Ot=>Ot.filter(Yt=>Yt.id!==Kt)),console.log(`[MapExplorer] Removed uploaded AOI ${Kt} linked to raster ${V}`)):(y.find(Yt=>Yt.id===Kt&&Yt.type==="draw")&&(ct(null),console.log(`[MapExplorer] Removed drawn AOI ${Kt} linked to raster ${V}`)),v(Yt=>Yt.filter(Jt=>Jt.id!==Kt)),yt(Yt=>Yt.filter(Jt=>Jt.id!==Kt)))),Pt){const jt=Se.filter(Ot=>Ot.id!==V);if(jt.length>0){const Ot=jt[0];Kr(Ot.id)}else P(null),A(null),ce(null),Qt([]),rt(null)}}async function As(){const V=Se.filter(dt=>dt.overlayUrl).map(dt=>Yd(dt.overlayUrl).catch(Pt=>{console.warn(`[MapExplorer] Failed to delete overlay ${dt.overlayUrl}: ${Pt.message}`)}));await Promise.all(V),console.log("[CLEAR_OVERLAY] setCreatedRasters([]) called from handleClearAllRasters"),rn([]),console.log("[CLEAR_OVERLAY] setActiveCreatedRasterId(null) called from handleClearAllRasters"),P(null),console.log("[CLEAR_OVERLAY] setActiveRasterId(null) called from handleClearAllRasters"),A(null),ce(null),Qt([]),rt(null),oe({source:null,key:null,geoJSON:null,name:null}),console.log("[MapExplorer] Cleared active AOI (Clear All)");try{sessionStorage.removeItem("vmrc_created_rasters"),sessionStorage.removeItem("vmrc_active_created_raster_id"),console.log("[Session] Cleared sessionStorage (Clear All)")}catch(dt){console.error("[Session] Failed to clear sessionStorage:",dt)}qi.current&&(qi.current._clearPmTempLayers||qi.current._clearGeomanTempLayers)&&(qi.current._clearPmTempLayers||qi.current._clearGeomanTempLayers)(),console.log("[MapExplorer] Cleared all rasters")}function Mn(V){if(!V.preview_url||!V.preview_bounds){alert("Preview not available for this dataset. The GeoPDF may not have georeferencing information.");return}yi&&yi.id===V.id?bs(null):bs({id:V.id,preview_url:V.preview_url,preview_bounds:V.preview_bounds})}async function sr(V){if(confirm("Are you sure you want to delete this dataset? This action cannot be undone."))try{await hm(V),Cs(dt=>dt.filter(Pt=>Pt.id!==V)),yi&&yi.id===V&&bs(null),alert("Dataset deleted successfully")}catch(dt){console.error("Failed to delete dataset:",dt),alert((dt==null?void 0:dt.message)||"Failed to delete dataset. Check console for details.")}}const Ne=[{id:"table",icon:R.jsx(lx,{size:18}),label:"Statistics"},{id:"histogram",icon:R.jsx(ax,{size:20}),label:"Histogram"}],ii=Je==="hsl"&&We==="Western Hemlock"&&!pe;return R.jsxs("div",{className:"layout-3col",children:[R.jsxs("aside",{className:"panel-left card",children:[R.jsx("h2",{className:"panel-title",children:"Filters"}),R.jsxs("div",{className:"filter-block",children:[R.jsx("label",{children:"Map Type"}),R.jsxs("select",{value:Je,onChange:V=>_o(V.target.value),className:"input",children:[R.jsx("option",{value:"mortality",children:"Mortality (Monthly)"}),R.jsx("option",{value:"hsl",children:"High Stress Level (HSL)"})]})]}),R.jsxs("div",{className:"filter-block",children:[R.jsx("label",{children:"Species"}),R.jsxs("select",{value:We,onChange:V=>jr(V.target.value),className:"input",children:[R.jsx("option",{value:"Douglas-fir",children:"Douglas-fir"}),R.jsx("option",{value:"Western Hemlock",children:"Western Hemlock"})]})]}),ii&&R.jsx("div",{className:"filter-block",style:{backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:0,padding:"10px",marginBottom:"12px",fontSize:"12px",color:"#991b1b"},children:" HSL is only available for Douglas-fir. Please select Douglas-fir or switch to Mortality map type."}),Je==="hsl"&&We==="Douglas-fir"&&R.jsxs(R.Fragment,{children:[R.jsxs("div",{className:"filter-block",children:[R.jsx("label",{children:"HSL Condition"}),R.jsxs("select",{value:Ii,onChange:V=>ws(V.target.value),className:"input",children:[R.jsx("option",{value:"D",children:"D (Dry)"}),R.jsx("option",{value:"W",children:"W (Wet)"}),R.jsx("option",{value:"N",children:"N (Normal)"})]})]}),R.jsxs("div",{className:"filter-block",children:[R.jsx("label",{children:"HSL Class"}),R.jsxs("select",{value:Ri,onChange:V=>vo(V.target.value),className:"input",children:[R.jsx("option",{value:"l",children:"l (Low)"}),R.jsx("option",{value:"ml",children:"ml (Medium-Low)"}),R.jsx("option",{value:"m",children:"m (Medium)"}),R.jsx("option",{value:"mh",children:"mh (Medium-High)"}),R.jsx("option",{value:"h",children:"h (High)"}),R.jsx("option",{value:"vh",children:"vh (Very High)"})]})]}),R.jsxs("div",{className:"filter-block",children:[R.jsx("label",{children:"Cover %"}),R.jsxs("select",{value:si,onChange:V=>xs(V.target.value),className:"input",children:[R.jsx("option",{value:"0",children:"0%"}),R.jsx("option",{value:"25",children:"25%"}),R.jsx("option",{value:"50",children:"50%"}),R.jsx("option",{value:"75",children:"75%"}),R.jsx("option",{value:"100",children:"100%"})]})]})]}),Je==="hsl"&&We==="Western Hemlock"&&pe&&R.jsxs(R.Fragment,{children:[R.jsxs("div",{className:"filter-block",children:[R.jsx("label",{children:"HSL Condition"}),R.jsxs("select",{value:Ii,onChange:V=>ws(V.target.value),className:"input",children:[R.jsx("option",{value:"D",children:"D (Dry)"}),R.jsx("option",{value:"W",children:"W (Wet)"}),R.jsx("option",{value:"N",children:"N (Normal)"})]})]}),R.jsxs("div",{className:"filter-block",children:[R.jsx("label",{children:"Cover %"}),R.jsxs("select",{value:si,onChange:V=>xs(V.target.value),className:"input",children:[R.jsx("option",{value:"0",children:"0%"}),R.jsx("option",{value:"25",children:"25%"}),R.jsx("option",{value:"50",children:"50%"}),R.jsx("option",{value:"75",children:"75%"}),R.jsx("option",{value:"100",children:"100%"})]})]})]}),Je==="mortality"&&R.jsxs(R.Fragment,{children:[R.jsxs("div",{className:"filter-block",children:[R.jsx("label",{children:"Month"}),R.jsxs("select",{value:Ei,onChange:V=>Ks(V.target.value),className:"input",children:[R.jsx("option",{value:"04",children:"April"}),R.jsx("option",{value:"05",children:"May"}),R.jsx("option",{value:"06",children:"June"}),R.jsx("option",{value:"07",children:"July"}),R.jsx("option",{value:"08",children:"August"}),R.jsx("option",{value:"09",children:"September"})]})]}),R.jsxs("div",{className:"filter-block",children:[R.jsx("label",{children:"Condition"}),R.jsxs("select",{value:bi,onChange:V=>ir(V.target.value),className:"input",children:[R.jsx("option",{value:"Dry",children:"Dry"}),R.jsx("option",{value:"Wet",children:"Wet"}),R.jsx("option",{value:"Normal",children:"Normal"})]})]}),We==="Douglas-fir"&&R.jsxs(R.Fragment,{children:[R.jsxs("div",{className:"filter-block",children:[R.jsx("label",{children:"Cover %"}),R.jsxs("select",{value:si,onChange:V=>xs(V.target.value),className:"input",children:[R.jsx("option",{value:"0",children:"0%"}),R.jsx("option",{value:"25",children:"25%"}),R.jsx("option",{value:"50",children:"50%"}),R.jsx("option",{value:"75",children:"75%"}),R.jsx("option",{value:"100",children:"100%"})]})]}),R.jsxs("div",{className:"filter-block",children:[R.jsx("label",{children:"Stress Level"}),R.jsxs("select",{value:$i,onChange:V=>yo(V.target.value),className:"input",children:[R.jsx("option",{value:"Low Stress",children:"Low Stress"}),R.jsx("option",{value:"Medium-Low Stress",children:"Medium-Low Stress"}),R.jsx("option",{value:"Medium Stress",children:"Medium Stress"}),R.jsx("option",{value:"Medium-High Stress",children:"Medium-High Stress"}),R.jsx("option",{value:"High Stress",children:"High Stress"})]})]})]}),We==="Western Hemlock"&&R.jsxs("div",{className:"filter-block",children:[R.jsx("label",{children:"Cover %"}),R.jsxs("select",{value:si,onChange:V=>xs(V.target.value),className:"input",children:[R.jsx("option",{value:"0",children:"0%"}),R.jsx("option",{value:"25",children:"25%"}),R.jsx("option",{value:"50",children:"50%"}),R.jsx("option",{value:"75",children:"75%"}),R.jsx("option",{value:"100",children:"100%"})]})]})]}),Mi&&R.jsx("div",{className:"filter-block",style:{backgroundColor:"#ffffff",border:"1px solid #e2e8f0",borderRadius:0,padding:"10px 12px",marginBottom:"12px"},children:R.jsxs("div",{style:{fontSize:"12px",color:"#1e293b",lineHeight:"1.5",fontFamily:"monospace",wordBreak:"break-all",whiteSpace:"pre-wrap"},children:[R.jsx("div",{style:{fontWeight:600,marginBottom:"4px",fontSize:"11px",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Raster:"}),Mi]})}),R.jsx("div",{className:"filter-block",children:(()=>{const V=!!((y==null?void 0:y.length)>0&&y.some(Pt=>Pt.type!=="base"&&Pt.geojson)||(Tt==null?void 0:Tt.length)>0||Ct!=null&&Ct.key),dt=ii||!V||B;return R.jsx("button",{className:"btn-primary full-width",onClick:qo,disabled:dt,style:{opacity:dt?.5:1},children:B?`Generating ${J.current}/${J.total}...`:"Generate Map"})})()}),R.jsxs("div",{className:"filter-section",children:[R.jsx("h3",{className:"section-title",children:"Upload AOI"}),R.jsx("p",{className:"section-help",children:"Upload GeoJSON (.geojson/.json), KML (.kml), or Shapefile (.zip). Uploaded AOIs are displayed but not editable."}),R.jsxs("div",{className:"file-input-wrapper",children:[R.jsx("input",{ref:Pr,type:"file",multiple:!0,accept:".geojson,.json,.kml,.zip,application/geo+json,application/json,application/vnd.google-earth.kml+xml,application/zip",onChange:gi,style:{display:"none"},id:"aoi-file-input"}),R.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>{var V;return(V=Pr.current)==null?void 0:V.click()},children:"Upload"}),R.jsx("span",{className:"file-hint",children:".geojson / .kml / .zip"})]}),Tt.length>0&&R.jsxs("div",{style:{marginTop:"12px"},children:[R.jsxs("div",{style:{fontSize:"12px",color:"#64748b",marginBottom:"6px"},children:["Uploaded (",Tt.length,"):"]}),Tt.map(V=>R.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"4px 8px",marginBottom:"4px",background:"#f1f5f9",fontSize:"11px"},children:[R.jsx("span",{style:{color:"#475569"},children:V.name||V._fileName||`AOI ${V.id}`}),R.jsx("button",{type:"button",onClick:()=>Ps(V.id),style:{background:"none",border:"none",color:"#ef4444",cursor:"pointer",fontSize:"12px",padding:"2px 6px"},title:"Remove this AOI",children:""})]},V.id)),R.jsx("button",{type:"button",onClick:Na,className:"btn-secondary",style:{marginTop:"8px",width:"100%",fontSize:"11px"},children:"Clear All"})]})]}),Ls.length>0&&R.jsxs("div",{className:"filter-section",children:[R.jsxs("h3",{className:"section-title",children:["Datasets (",Ls.length,")"]}),R.jsx("div",{style:{maxHeight:"300px",overflowY:"auto"},children:Ls.map(V=>R.jsxs("div",{style:{padding:"8px",marginBottom:"8px",background:"#f9fafb",border:"1px solid #e5e7eb",borderRadius:0,fontSize:"12px"},children:[R.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[V.preview_url&&R.jsx("img",{src:ys(V.preview_url),alt:"Preview",style:{width:"40px",height:"40px",objectFit:"cover",border:"1px solid #d1d5db"},onError:dt=>{dt.target.style.display="none"}}),R.jsxs("div",{style:{flex:1},children:[R.jsx("div",{style:{fontWeight:600,color:"#111827",marginBottom:"2px"},children:V.name}),R.jsxs("div",{style:{color:"#6b7280",fontSize:"11px"},children:[V.type_label||V.type,V.size_bytes&&`  ${(V.size_bytes/1024/1024).toFixed(1)} MB`,V.created_at&&`  ${new Date(V.created_at).toLocaleDateString()}`]})]})]}),R.jsxs("div",{style:{display:"flex",gap:"6px",marginTop:"6px",flexWrap:"wrap"},children:[R.jsx("button",{type:"button",onClick:()=>fm(V.id),style:{padding:"4px 8px",fontSize:"11px",background:"#2563eb",color:"white",border:"none",borderRadius:0,cursor:"pointer"},children:"Download"}),R.jsx("button",{type:"button",onClick:()=>Mn(V),disabled:!V.preview_url||!V.preview_bounds,title:!V.preview_url||!V.preview_bounds?"Preview not available":(yi==null?void 0:yi.id)===V.id?"Hide preview":"Show preview on map",style:{padding:"4px 8px",fontSize:"11px",background:(yi==null?void 0:yi.id)===V.id?"#10b981":"#6b7280",color:"white",border:"none",borderRadius:0,cursor:!V.preview_url||!V.preview_bounds?"not-allowed":"pointer",opacity:!V.preview_url||!V.preview_bounds?.5:1},children:(yi==null?void 0:yi.id)===V.id?"Hide":"Preview"}),R.jsx("button",{type:"button",onClick:()=>sr(V.id),style:{padding:"4px 8px",fontSize:"11px",background:"#ef4444",color:"white",border:"none",borderRadius:0,cursor:"pointer"},children:"Remove"})]})]},V.id))})]})]}),R.jsx("section",{className:"panel-map card",children:R.jsx(km,{globalAoi:e,uploadedAois:Tt,aois:y,userClip:q,overlayUrl:o||null,overlayBounds:f||null,createdRasters:Se,onUserClipChange:me,onRemoveAoi:Ps,onRemoveRaster:Ar,onRemoveRasterByAoiId:qr,onDrawStart:Wo,onClearDrawnAoi:Di,activeRasterId:E,activeCreatedRasterId:D,datasetPreview:yi,onMapReady:V=>{qi.current=V},onAoiErased:Jo},"base-map-persistent")}),R.jsxs(Fm,{width:550,children:[R.jsx("div",{className:"tab-bar",children:Ne.map(V=>R.jsx("button",{className:`tab-button ${Le===V.id?"active":""}`,onClick:()=>_e(V.id),title:V.label,children:V.icon},V.id))}),R.jsxs("div",{className:"tab-content",children:[(E||yi)&&R.jsx("div",{style:{marginBottom:"16px"},children:R.jsx(Zm,{metadata:Ho,isLoading:xo})}),Le==="table"&&R.jsxs(R.Fragment,{children:[Se.length>0&&R.jsxs("div",{style:{marginBottom:"16px"},children:[R.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"13px",fontWeight:500,color:"#374151"},children:"Statistics for:"}),R.jsx("select",{value:D||"",onChange:V=>{const dt=V.target.value;dt&&Kr(dt)},style:{width:"100%",padding:"8px 12px",fontSize:"13px",border:"1px solid #d1d5db",borderRadius:"4px",backgroundColor:"#ffffff",color:"#111827"},children:Se.map(V=>R.jsx("option",{value:V.id,children:V.aoiName||V.name||`Raster ${V.id}`},V.id))})]}),Se.length===0?R.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#6b7280",fontSize:"13px"},children:"Generate a map to see statistics."}):R.jsxs(R.Fragment,{children:[D&&!de&&R.jsx("div",{style:{padding:"12px",marginBottom:"16px",backgroundColor:"#fef3c7",border:"1px solid #fbbf24",borderRadius:"4px",fontSize:"13px",color:"#92400e"},children:" Statistics not available for this raster. The backend may not have returned stats in the generate response. Check the console for details."}),R.jsx(jm,{stats:de,values:At,rasterName:Ve||(D?(Jr=Se.find(V=>V.id===D))==null?void 0:Jr.name:null),rasterPath:Mi})]})]}),Le==="histogram"&&R.jsxs(R.Fragment,{children:[Se.length>0&&R.jsxs("div",{style:{marginBottom:"16px"},children:[R.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"13px",fontWeight:500,color:"#374151"},children:"Histogram for AOI:"}),R.jsx("select",{value:D||"",onChange:V=>{const dt=V.target.value;dt&&Kr(dt)},style:{width:"100%",padding:"8px 12px",fontSize:"13px",border:"1px solid #d1d5db",borderRadius:"4px",backgroundColor:"#ffffff",color:"#111827"},children:Se.map(V=>R.jsx("option",{value:V.id,children:V.aoiName||V.name||`AOI ${V.aoiId}`},V.id))})]}),Se.length===0?R.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#6b7280",fontSize:"13px"},children:"Generate a map to see histogram."}):D&&Se.find(V=>V.id===D)?R.jsx(zm,{values:At,stats:de,histogram:Rt}):R.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#6b7280",fontSize:"13px"},children:"Select a raster from the list below to view its histogram."}),R.jsx($m,{rasters:Se,activeRasterId:D,onShowRaster:Kr,onRemoveRaster:Ar,onClearAll:Se.length>0?As:null})]}),R.jsxs("div",{style:{marginTop:"24px",padding:"16px",background:"#ffffff",border:"1px solid #e2e8f0",borderRadius:"4px",boxSizing:"border-box"},children:[R.jsx("h3",{className:"section-title",style:{margin:"0 0 12px 0"},children:"Export Results"}),Se.length===0?R.jsx("div",{style:{padding:"12px",textAlign:"center",color:"#6b7280",fontSize:"13px"},children:"Generate a raster first."}):R.jsxs(R.Fragment,{children:[R.jsxs("div",{style:{marginBottom:"16px"},children:[R.jsx("label",{className:"sidebar-label",style:{display:"block",marginBottom:"6px"},children:"Selected raster:"}),R.jsx("div",{style:{padding:"8px 12px",background:"#f9fafb",border:"1px solid #e5e7eb",borderRadius:"4px",fontSize:"13px",color:"#374151"},children:D?((Br=Se.find(V=>V.id===D))==null?void 0:Br.name)||"Unknown":((En=Se[0])==null?void 0:En.name)||"None selected"})]}),R.jsxs("div",{className:"sidebar-field",style:{marginBottom:"14px"},children:[R.jsx("label",{className:"sidebar-label",children:"Filename (optional)"}),R.jsx("input",{type:"text",className:"input",placeholder:"e.g., dry_df_04",value:Ur,onChange:V=>Hr(V.target.value),style:{width:"100%",boxSizing:"border-box"}}),R.jsx("p",{className:"sidebar-help",children:"Base name only (extensions added automatically)."})]}),R.jsxs("div",{style:{marginBottom:"16px"},children:[R.jsxs("label",{className:"checkbox-row",children:[R.jsx("input",{type:"checkbox",checked:Zi.png,onChange:V=>Un({...Zi,png:V.target.checked})}),R.jsx("span",{children:"PNG"})]}),R.jsxs("label",{className:"checkbox-row",children:[R.jsx("input",{type:"checkbox",checked:Zi.tif,onChange:V=>Un({...Zi,tif:V.target.checked})}),R.jsx("span",{children:"GeoTIFF (.tif)"})]}),R.jsxs("label",{className:"checkbox-row",children:[R.jsx("input",{type:"checkbox",checked:Zi.geojson,onChange:V=>Un({...Zi,geojson:V.target.checked})}),R.jsx("span",{children:"GeoJSON (AOI)"})]}),R.jsxs("label",{className:"checkbox-row",children:[R.jsx("input",{type:"checkbox",checked:Zi.pdf,onChange:V=>Un({...Zi,pdf:V.target.checked})}),R.jsx("span",{children:"PDF (report)"})]})]}),R.jsx("button",{className:"btn-primary full-width",disabled:Se.length===0||ii||xn,onClick:Ko,style:{display:"block",width:"100%",boxSizing:"border-box",opacity:Se.length>0&&!ii&&!xn?1:.5,marginTop:"8px"},children:xn?"Exporting...":"Export"}),Oi&&Object.keys(Oi).length>0&&R.jsxs("div",{style:{marginTop:"16px",padding:"12px",background:"#f9fafb",border:"1px solid #e5e7eb",borderRadius:"4px",boxSizing:"border-box",width:"100%"},children:[R.jsx("h4",{style:{color:"#374151",fontSize:12,fontWeight:700,marginBottom:"10px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Export Results"}),R.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[Oi.png&&R.jsx("a",{href:`${fh}${Oi.png}`,target:"_blank",rel:"noopener noreferrer",style:{fontSize:12,color:"#2563eb",textDecoration:"underline"},children:"Download PNG"}),Oi.tif&&R.jsx("a",{href:`${fh}${Oi.tif}`,target:"_blank",rel:"noopener noreferrer",style:{fontSize:12,color:"#2563eb",textDecoration:"underline"},download:!0,children:"Download GeoTIFF (ZIP with metadata)"}),Oi.geojson&&R.jsx("a",{href:`${fh}${Oi.geojson}`,target:"_blank",rel:"noopener noreferrer",style:{fontSize:12,color:"#2563eb",textDecoration:"underline"},children:"Download GeoJSON"}),Oi.pdf&&R.jsx("a",{href:`${fh}${Oi.pdf}`,target:"_blank",rel:"noopener noreferrer",style:{fontSize:12,color:"#2563eb",textDecoration:"underline",fontWeight:600},children:"Download PDF Report"})]})]})]})]})]})]})]})}function hx(){return R.jsxs("div",{className:"app-shell",children:[R.jsxs("header",{className:"app-header",children:[R.jsx("div",{className:"app-header-side app-header-left",children:R.jsx("img",{src:"/oregon.jpg",alt:"Left logo",className:"header-logo-img"})}),R.jsx("div",{className:"app-header-center",children:R.jsx("h1",{className:"app-title",children:"VMRC Mortality Calculation"})}),R.jsx("div",{className:"app-header-side app-header-right",children:R.jsx("img",{src:"/vmrc.png",alt:"Right logo",className:"header-logo-img"})})]}),R.jsx("main",{className:"app-main",children:R.jsx(ux,{})})]})}const cx="https://earrings-shown-elements-button.trycloudflare.com";console.log("[main] API Base URL:",cx);console.log("[main] Environment mode:","production");Bg.createRoot(document.getElementById("root")).render(R.jsx(ms.StrictMode,{children:R.jsx(hx,{})}));
