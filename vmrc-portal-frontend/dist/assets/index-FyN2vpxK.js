var vg=Object.defineProperty;var xg=(e,i,o)=>i in e?vg(e,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[i]=o;var be=(e,i,o)=>xg(e,typeof i!="symbol"?i+"":i,o);(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))c(f);new MutationObserver(f=>{for(const g of f)if(g.type==="childList")for(const y of g.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&c(y)}).observe(document,{childList:!0,subtree:!0});function o(f){const g={};return f.integrity&&(g.integrity=f.integrity),f.referrerPolicy&&(g.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?g.credentials="include":f.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function c(f){if(f.ep)return;f.ep=!0;const g=o(f);fetch(f.href,g)}})();var ch=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Dh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var kc={exports:{}},hu={},Pc={exports:{}},Xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zd;function wg(){if(zd)return Xe;zd=1;var e=Symbol.for("react.element"),i=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),y=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),A=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),P=Symbol.iterator;function B(K){return K===null||typeof K!="object"?null:(K=P&&K[P]||K["@@iterator"],typeof K=="function"?K:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,Z={};function Y(K,_t,Dt){this.props=K,this.context=_t,this.refs=Z,this.updater=Dt||V}Y.prototype.isReactComponent={},Y.prototype.setState=function(K,_t){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,_t,"setState")},Y.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function ht(){}ht.prototype=Y.prototype;function lt(K,_t,Dt){this.props=K,this.context=_t,this.refs=Z,this.updater=Dt||V}var Pt=lt.prototype=new ht;Pt.constructor=lt,q(Pt,Y.prototype),Pt.isPureReactComponent=!0;var Ut=Array.isArray,Ot=Object.prototype.hasOwnProperty,Gt={current:null},$t={key:!0,ref:!0,__self:!0,__source:!0};function Vt(K,_t,Dt){var Ht,se={},Jt=null,$e=null;if(_t!=null)for(Ht in _t.ref!==void 0&&($e=_t.ref),_t.key!==void 0&&(Jt=""+_t.key),_t)Ot.call(_t,Ht)&&!$t.hasOwnProperty(Ht)&&(se[Ht]=_t[Ht]);var Re=arguments.length-2;if(Re===1)se.children=Dt;else if(1<Re){for(var Ye=Array(Re),cn=0;cn<Re;cn++)Ye[cn]=arguments[cn+2];se.children=Ye}if(K&&K.defaultProps)for(Ht in Re=K.defaultProps,Re)se[Ht]===void 0&&(se[Ht]=Re[Ht]);return{$$typeof:e,type:K,key:Jt,ref:$e,props:se,_owner:Gt.current}}function Qt(K,_t){return{$$typeof:e,type:K.type,key:_t,ref:K.ref,props:K.props,_owner:K._owner}}function zt(K){return typeof K=="object"&&K!==null&&K.$$typeof===e}function te(K){var _t={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(Dt){return _t[Dt]})}var ee=/\/+/g;function Fe(K,_t){return typeof K=="object"&&K!==null&&K.key!=null?te(""+K.key):_t.toString(36)}function Ie(K,_t,Dt,Ht,se){var Jt=typeof K;(Jt==="undefined"||Jt==="boolean")&&(K=null);var $e=!1;if(K===null)$e=!0;else switch(Jt){case"string":case"number":$e=!0;break;case"object":switch(K.$$typeof){case e:case i:$e=!0}}if($e)return $e=K,se=se($e),K=Ht===""?"."+Fe($e,0):Ht,Ut(se)?(Dt="",K!=null&&(Dt=K.replace(ee,"$&/")+"/"),Ie(se,_t,Dt,"",function(cn){return cn})):se!=null&&(zt(se)&&(se=Qt(se,Dt+(!se.key||$e&&$e.key===se.key?"":(""+se.key).replace(ee,"$&/")+"/")+K)),_t.push(se)),1;if($e=0,Ht=Ht===""?".":Ht+":",Ut(K))for(var Re=0;Re<K.length;Re++){Jt=K[Re];var Ye=Ht+Fe(Jt,Re);$e+=Ie(Jt,_t,Dt,Ye,se)}else if(Ye=B(K),typeof Ye=="function")for(K=Ye.call(K),Re=0;!(Jt=K.next()).done;)Jt=Jt.value,Ye=Ht+Fe(Jt,Re++),$e+=Ie(Jt,_t,Dt,Ye,se);else if(Jt==="object")throw _t=String(K),Error("Objects are not valid as a React child (found: "+(_t==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":_t)+"). If you meant to render a collection of children, use an array instead.");return $e}function Mt(K,_t,Dt){if(K==null)return K;var Ht=[],se=0;return Ie(K,Ht,"","",function(Jt){return _t.call(Dt,Jt,se++)}),Ht}function At(K){if(K._status===-1){var _t=K._result;_t=_t(),_t.then(function(Dt){(K._status===0||K._status===-1)&&(K._status=1,K._result=Dt)},function(Dt){(K._status===0||K._status===-1)&&(K._status=2,K._result=Dt)}),K._status===-1&&(K._status=0,K._result=_t)}if(K._status===1)return K._result.default;throw K._result}var mt={current:null},ft={transition:null},Rt={ReactCurrentDispatcher:mt,ReactCurrentBatchConfig:ft,ReactCurrentOwner:Gt};function ct(){throw Error("act(...) is not supported in production builds of React.")}return Xe.Children={map:Mt,forEach:function(K,_t,Dt){Mt(K,function(){_t.apply(this,arguments)},Dt)},count:function(K){var _t=0;return Mt(K,function(){_t++}),_t},toArray:function(K){return Mt(K,function(_t){return _t})||[]},only:function(K){if(!zt(K))throw Error("React.Children.only expected to receive a single React element child.");return K}},Xe.Component=Y,Xe.Fragment=o,Xe.Profiler=f,Xe.PureComponent=lt,Xe.StrictMode=c,Xe.Suspense=E,Xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Rt,Xe.act=ct,Xe.cloneElement=function(K,_t,Dt){if(K==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+K+".");var Ht=q({},K.props),se=K.key,Jt=K.ref,$e=K._owner;if(_t!=null){if(_t.ref!==void 0&&(Jt=_t.ref,$e=Gt.current),_t.key!==void 0&&(se=""+_t.key),K.type&&K.type.defaultProps)var Re=K.type.defaultProps;for(Ye in _t)Ot.call(_t,Ye)&&!$t.hasOwnProperty(Ye)&&(Ht[Ye]=_t[Ye]===void 0&&Re!==void 0?Re[Ye]:_t[Ye])}var Ye=arguments.length-2;if(Ye===1)Ht.children=Dt;else if(1<Ye){Re=Array(Ye);for(var cn=0;cn<Ye;cn++)Re[cn]=arguments[cn+2];Ht.children=Re}return{$$typeof:e,type:K.type,key:se,ref:Jt,props:Ht,_owner:$e}},Xe.createContext=function(K){return K={$$typeof:y,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},K.Provider={$$typeof:g,_context:K},K.Consumer=K},Xe.createElement=Vt,Xe.createFactory=function(K){var _t=Vt.bind(null,K);return _t.type=K,_t},Xe.createRef=function(){return{current:null}},Xe.forwardRef=function(K){return{$$typeof:v,render:K}},Xe.isValidElement=zt,Xe.lazy=function(K){return{$$typeof:G,_payload:{_status:-1,_result:K},_init:At}},Xe.memo=function(K,_t){return{$$typeof:A,type:K,compare:_t===void 0?null:_t}},Xe.startTransition=function(K){var _t=ft.transition;ft.transition={};try{K()}finally{ft.transition=_t}},Xe.unstable_act=ct,Xe.useCallback=function(K,_t){return mt.current.useCallback(K,_t)},Xe.useContext=function(K){return mt.current.useContext(K)},Xe.useDebugValue=function(){},Xe.useDeferredValue=function(K){return mt.current.useDeferredValue(K)},Xe.useEffect=function(K,_t){return mt.current.useEffect(K,_t)},Xe.useId=function(){return mt.current.useId()},Xe.useImperativeHandle=function(K,_t,Dt){return mt.current.useImperativeHandle(K,_t,Dt)},Xe.useInsertionEffect=function(K,_t){return mt.current.useInsertionEffect(K,_t)},Xe.useLayoutEffect=function(K,_t){return mt.current.useLayoutEffect(K,_t)},Xe.useMemo=function(K,_t){return mt.current.useMemo(K,_t)},Xe.useReducer=function(K,_t,Dt){return mt.current.useReducer(K,_t,Dt)},Xe.useRef=function(K){return mt.current.useRef(K)},Xe.useState=function(K){return mt.current.useState(K)},Xe.useSyncExternalStore=function(K,_t,Dt){return mt.current.useSyncExternalStore(K,_t,Dt)},Xe.useTransition=function(){return mt.current.useTransition()},Xe.version="18.3.1",Xe}var jd;function af(){return jd||(jd=1,Pc.exports=wg()),Pc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ud;function Mg(){if(Ud)return hu;Ud=1;var e=af(),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),c=Object.prototype.hasOwnProperty,f=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,g={key:!0,ref:!0,__self:!0,__source:!0};function y(v,E,A){var G,P={},B=null,V=null;A!==void 0&&(B=""+A),E.key!==void 0&&(B=""+E.key),E.ref!==void 0&&(V=E.ref);for(G in E)c.call(E,G)&&!g.hasOwnProperty(G)&&(P[G]=E[G]);if(v&&v.defaultProps)for(G in E=v.defaultProps,E)P[G]===void 0&&(P[G]=E[G]);return{$$typeof:i,type:v,key:B,ref:V,props:P,_owner:f.current}}return hu.Fragment=o,hu.jsx=y,hu.jsxs=y,hu}var Hd;function Eg(){return Hd||(Hd=1,kc.exports=Mg()),kc.exports}var I=Eg(),vt=af();const us=Dh(vt);var fh={},Ac={exports:{}},Mr={},Bc={exports:{}},Tc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $d;function Lg(){return $d||($d=1,(function(e){function i(ft,Rt){var ct=ft.length;ft.push(Rt);t:for(;0<ct;){var K=ct-1>>>1,_t=ft[K];if(0<f(_t,Rt))ft[K]=Rt,ft[ct]=_t,ct=K;else break t}}function o(ft){return ft.length===0?null:ft[0]}function c(ft){if(ft.length===0)return null;var Rt=ft[0],ct=ft.pop();if(ct!==Rt){ft[0]=ct;t:for(var K=0,_t=ft.length,Dt=_t>>>1;K<Dt;){var Ht=2*(K+1)-1,se=ft[Ht],Jt=Ht+1,$e=ft[Jt];if(0>f(se,ct))Jt<_t&&0>f($e,se)?(ft[K]=$e,ft[Jt]=ct,K=Jt):(ft[K]=se,ft[Ht]=ct,K=Ht);else if(Jt<_t&&0>f($e,ct))ft[K]=$e,ft[Jt]=ct,K=Jt;else break t}}return Rt}function f(ft,Rt){var ct=ft.sortIndex-Rt.sortIndex;return ct!==0?ct:ft.id-Rt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var g=performance;e.unstable_now=function(){return g.now()}}else{var y=Date,v=y.now();e.unstable_now=function(){return y.now()-v}}var E=[],A=[],G=1,P=null,B=3,V=!1,q=!1,Z=!1,Y=typeof setTimeout=="function"?setTimeout:null,ht=typeof clearTimeout=="function"?clearTimeout:null,lt=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Pt(ft){for(var Rt=o(A);Rt!==null;){if(Rt.callback===null)c(A);else if(Rt.startTime<=ft)c(A),Rt.sortIndex=Rt.expirationTime,i(E,Rt);else break;Rt=o(A)}}function Ut(ft){if(Z=!1,Pt(ft),!q)if(o(E)!==null)q=!0,At(Ot);else{var Rt=o(A);Rt!==null&&mt(Ut,Rt.startTime-ft)}}function Ot(ft,Rt){q=!1,Z&&(Z=!1,ht(Vt),Vt=-1),V=!0;var ct=B;try{for(Pt(Rt),P=o(E);P!==null&&(!(P.expirationTime>Rt)||ft&&!te());){var K=P.callback;if(typeof K=="function"){P.callback=null,B=P.priorityLevel;var _t=K(P.expirationTime<=Rt);Rt=e.unstable_now(),typeof _t=="function"?P.callback=_t:P===o(E)&&c(E),Pt(Rt)}else c(E);P=o(E)}if(P!==null)var Dt=!0;else{var Ht=o(A);Ht!==null&&mt(Ut,Ht.startTime-Rt),Dt=!1}return Dt}finally{P=null,B=ct,V=!1}}var Gt=!1,$t=null,Vt=-1,Qt=5,zt=-1;function te(){return!(e.unstable_now()-zt<Qt)}function ee(){if($t!==null){var ft=e.unstable_now();zt=ft;var Rt=!0;try{Rt=$t(!0,ft)}finally{Rt?Fe():(Gt=!1,$t=null)}}else Gt=!1}var Fe;if(typeof lt=="function")Fe=function(){lt(ee)};else if(typeof MessageChannel<"u"){var Ie=new MessageChannel,Mt=Ie.port2;Ie.port1.onmessage=ee,Fe=function(){Mt.postMessage(null)}}else Fe=function(){Y(ee,0)};function At(ft){$t=ft,Gt||(Gt=!0,Fe())}function mt(ft,Rt){Vt=Y(function(){ft(e.unstable_now())},Rt)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ft){ft.callback=null},e.unstable_continueExecution=function(){q||V||(q=!0,At(Ot))},e.unstable_forceFrameRate=function(ft){0>ft||125<ft?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Qt=0<ft?Math.floor(1e3/ft):5},e.unstable_getCurrentPriorityLevel=function(){return B},e.unstable_getFirstCallbackNode=function(){return o(E)},e.unstable_next=function(ft){switch(B){case 1:case 2:case 3:var Rt=3;break;default:Rt=B}var ct=B;B=Rt;try{return ft()}finally{B=ct}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ft,Rt){switch(ft){case 1:case 2:case 3:case 4:case 5:break;default:ft=3}var ct=B;B=ft;try{return Rt()}finally{B=ct}},e.unstable_scheduleCallback=function(ft,Rt,ct){var K=e.unstable_now();switch(typeof ct=="object"&&ct!==null?(ct=ct.delay,ct=typeof ct=="number"&&0<ct?K+ct:K):ct=K,ft){case 1:var _t=-1;break;case 2:_t=250;break;case 5:_t=1073741823;break;case 4:_t=1e4;break;default:_t=5e3}return _t=ct+_t,ft={id:G++,callback:Rt,priorityLevel:ft,startTime:ct,expirationTime:_t,sortIndex:-1},ct>K?(ft.sortIndex=ct,i(A,ft),o(E)===null&&ft===o(A)&&(Z?(ht(Vt),Vt=-1):Z=!0,mt(Ut,ct-K))):(ft.sortIndex=_t,i(E,ft),q||V||(q=!0,At(Ot))),ft},e.unstable_shouldYield=te,e.unstable_wrapCallback=function(ft){var Rt=B;return function(){var ct=B;B=Rt;try{return ft.apply(this,arguments)}finally{B=ct}}}})(Tc)),Tc}var Vd;function Cg(){return Vd||(Vd=1,Bc.exports=Lg()),Bc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wd;function bg(){if(Wd)return Mr;Wd=1;var e=af(),i=Cg();function o(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,u=1;u<arguments.length;u++)r+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var c=new Set,f={};function g(t,r){y(t,r),y(t+"Capture",r)}function y(t,r){for(f[t]=r,t=0;t<r.length;t++)c.add(r[t])}var v=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),E=Object.prototype.hasOwnProperty,A=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,G={},P={};function B(t){return E.call(P,t)?!0:E.call(G,t)?!1:A.test(t)?P[t]=!0:(G[t]=!0,!1)}function V(t,r,u,m){if(u!==null&&u.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return m?!1:u!==null?!u.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function q(t,r,u,m){if(r===null||typeof r>"u"||V(t,r,u,m))return!0;if(m)return!1;if(u!==null)switch(u.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function Z(t,r,u,m,M,C,D){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=m,this.attributeNamespace=M,this.mustUseProperty=u,this.propertyName=t,this.type=r,this.sanitizeURL=C,this.removeEmptyString=D}var Y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Y[t]=new Z(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var r=t[0];Y[r]=new Z(r,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){Y[t]=new Z(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Y[t]=new Z(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Y[t]=new Z(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){Y[t]=new Z(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){Y[t]=new Z(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){Y[t]=new Z(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){Y[t]=new Z(t,5,!1,t.toLowerCase(),null,!1,!1)});var ht=/[\-:]([a-z])/g;function lt(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var r=t.replace(ht,lt);Y[r]=new Z(r,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var r=t.replace(ht,lt);Y[r]=new Z(r,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var r=t.replace(ht,lt);Y[r]=new Z(r,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){Y[t]=new Z(t,1,!1,t.toLowerCase(),null,!1,!1)}),Y.xlinkHref=new Z("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){Y[t]=new Z(t,1,!1,t.toLowerCase(),null,!0,!0)});function Pt(t,r,u,m){var M=Y.hasOwnProperty(r)?Y[r]:null;(M!==null?M.type!==0:m||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(q(r,u,M,m)&&(u=null),m||M===null?B(r)&&(u===null?t.removeAttribute(r):t.setAttribute(r,""+u)):M.mustUseProperty?t[M.propertyName]=u===null?M.type===3?!1:"":u:(r=M.attributeName,m=M.attributeNamespace,u===null?t.removeAttribute(r):(M=M.type,u=M===3||M===4&&u===!0?"":""+u,m?t.setAttributeNS(m,r,u):t.setAttribute(r,u))))}var Ut=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ot=Symbol.for("react.element"),Gt=Symbol.for("react.portal"),$t=Symbol.for("react.fragment"),Vt=Symbol.for("react.strict_mode"),Qt=Symbol.for("react.profiler"),zt=Symbol.for("react.provider"),te=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),Fe=Symbol.for("react.suspense"),Ie=Symbol.for("react.suspense_list"),Mt=Symbol.for("react.memo"),At=Symbol.for("react.lazy"),mt=Symbol.for("react.offscreen"),ft=Symbol.iterator;function Rt(t){return t===null||typeof t!="object"?null:(t=ft&&t[ft]||t["@@iterator"],typeof t=="function"?t:null)}var ct=Object.assign,K;function _t(t){if(K===void 0)try{throw Error()}catch(u){var r=u.stack.trim().match(/\n( *(at )?)/);K=r&&r[1]||""}return`
`+K+t}var Dt=!1;function Ht(t,r){if(!t||Dt)return"";Dt=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(kt){var m=kt}Reflect.construct(t,[],r)}else{try{r.call()}catch(kt){m=kt}t.call(r.prototype)}else{try{throw Error()}catch(kt){m=kt}t()}}catch(kt){if(kt&&m&&typeof kt.stack=="string"){for(var M=kt.stack.split(`
`),C=m.stack.split(`
`),D=M.length-1,Q=C.length-1;1<=D&&0<=Q&&M[D]!==C[Q];)Q--;for(;1<=D&&0<=Q;D--,Q--)if(M[D]!==C[Q]){if(D!==1||Q!==1)do if(D--,Q--,0>Q||M[D]!==C[Q]){var rt=`
`+M[D].replace(" at new "," at ");return t.displayName&&rt.includes("<anonymous>")&&(rt=rt.replace("<anonymous>",t.displayName)),rt}while(1<=D&&0<=Q);break}}}finally{Dt=!1,Error.prepareStackTrace=u}return(t=t?t.displayName||t.name:"")?_t(t):""}function se(t){switch(t.tag){case 5:return _t(t.type);case 16:return _t("Lazy");case 13:return _t("Suspense");case 19:return _t("SuspenseList");case 0:case 2:case 15:return t=Ht(t.type,!1),t;case 11:return t=Ht(t.type.render,!1),t;case 1:return t=Ht(t.type,!0),t;default:return""}}function Jt(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case $t:return"Fragment";case Gt:return"Portal";case Qt:return"Profiler";case Vt:return"StrictMode";case Fe:return"Suspense";case Ie:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case te:return(t.displayName||"Context")+".Consumer";case zt:return(t._context.displayName||"Context")+".Provider";case ee:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Mt:return r=t.displayName||null,r!==null?r:Jt(t.type)||"Memo";case At:r=t._payload,t=t._init;try{return Jt(t(r))}catch{}}return null}function $e(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Jt(r);case 8:return r===Vt?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Re(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ye(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function cn(t){var r=Ye(t)?"checked":"value",u=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),m=""+t[r];if(!t.hasOwnProperty(r)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var M=u.get,C=u.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return M.call(this)},set:function(D){m=""+D,C.call(this,D)}}),Object.defineProperty(t,r,{enumerable:u.enumerable}),{getValue:function(){return m},setValue:function(D){m=""+D},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Bi(t){t._valueTracker||(t._valueTracker=cn(t))}function jr(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var u=r.getValue(),m="";return t&&(m=Ye(t)?t.checked?"true":"false":t.value),t=m,t!==u?(r.setValue(t),!0):!1}function er(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function js(t,r){var u=r.checked;return ct({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??t._wrapperState.initialChecked})}function Ho(t,r){var u=r.defaultValue==null?"":r.defaultValue,m=r.checked!=null?r.checked:r.defaultChecked;u=Re(r.value!=null?r.value:u),t._wrapperState={initialChecked:m,initialValue:u,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function Ti(t,r){r=r.checked,r!=null&&Pt(t,"checked",r,!1)}function Ur(t,r){Ti(t,r);var u=Re(r.value),m=r.type;if(u!=null)m==="number"?(u===0&&t.value===""||t.value!=u)&&(t.value=""+u):t.value!==""+u&&(t.value=""+u);else if(m==="submit"||m==="reset"){t.removeAttribute("value");return}r.hasOwnProperty("value")?Hr(t,r.type,u):r.hasOwnProperty("defaultValue")&&Hr(t,r.type,Re(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(t.defaultChecked=!!r.defaultChecked)}function Vn(t,r,u){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var m=r.type;if(!(m!=="submit"&&m!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+t._wrapperState.initialValue,u||r===t.value||(t.value=r),t.defaultValue=r}u=t.name,u!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,u!==""&&(t.name=u)}function Hr(t,r,u){(r!=="number"||er(t.ownerDocument)!==t)&&(u==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+u&&(t.defaultValue=""+u))}var Xn=Array.isArray;function Sr(t,r,u,m){if(t=t.options,r){r={};for(var M=0;M<u.length;M++)r["$"+u[M]]=!0;for(u=0;u<t.length;u++)M=r.hasOwnProperty("$"+t[u].value),t[u].selected!==M&&(t[u].selected=M),M&&m&&(t[u].defaultSelected=!0)}else{for(u=""+Re(u),r=null,M=0;M<t.length;M++){if(t[M].value===u){t[M].selected=!0,m&&(t[M].defaultSelected=!0);return}r!==null||t[M].disabled||(r=t[M])}r!==null&&(r.selected=!0)}}function vi(t,r){if(r.dangerouslySetInnerHTML!=null)throw Error(o(91));return ct({},r,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function gn(t,r){var u=r.value;if(u==null){if(u=r.children,r=r.defaultValue,u!=null){if(r!=null)throw Error(o(92));if(Xn(u)){if(1<u.length)throw Error(o(93));u=u[0]}r=u}r==null&&(r=""),u=r}t._wrapperState={initialValue:Re(u)}}function $o(t,r){var u=Re(r.value),m=Re(r.defaultValue);u!=null&&(u=""+u,u!==t.value&&(t.value=u),r.defaultValue==null&&t.defaultValue!==u&&(t.defaultValue=u)),m!=null&&(t.defaultValue=""+m)}function ln(t){var r=t.textContent;r===t._wrapperState.initialValue&&r!==""&&r!==null&&(t.value=r)}function Us(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Yn(t,r){return t==null||t==="http://www.w3.org/1999/xhtml"?Us(r):t==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var cs,hi=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,u,m,M){MSApp.execUnsafeLocalFunction(function(){return t(r,u,m,M)})}:t})(function(t,r){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=r;else{for(cs=cs||document.createElement("div"),cs.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=cs.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;r.firstChild;)t.appendChild(r.firstChild)}});function kr(t,r){if(r){var u=t.firstChild;if(u&&u===t.lastChild&&u.nodeType===3){u.nodeValue=r;return}}t.textContent=r}var Qn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$r=["Webkit","ms","Moz","O"];Object.keys(Qn).forEach(function(t){$r.forEach(function(r){r=r+t.charAt(0).toUpperCase()+t.substring(1),Qn[r]=Qn[t]})});function fn(t,r,u){return r==null||typeof r=="boolean"||r===""?"":u||typeof r!="number"||r===0||Qn.hasOwnProperty(t)&&Qn[t]?(""+r).trim():r+"px"}function nr(t,r){t=t.style;for(var u in r)if(r.hasOwnProperty(u)){var m=u.indexOf("--")===0,M=fn(u,r[u],m);u==="float"&&(u="cssFloat"),m?t.setProperty(u,M):t[u]=M}}var Sn=ct({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fs(t,r){if(r){if(Sn[t]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(o(137,t));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(o(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(o(61))}if(r.style!=null&&typeof r.style!="object")throw Error(o(62))}}function kn(t,r){if(t.indexOf("-")===-1)return typeof r.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _o=null;function ci(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ds=null,ke=null,ti=null;function Vo(t){if(t=_r(t)){if(typeof ds!="function")throw Error(o(280));var r=t.stateNode;r&&(r=pa(r),ds(t.stateNode,t.type,r))}}function Da(t){ke?ti?ti.push(t):ti=[t]:ke=t}function yo(){if(ke){var t=ke,r=ti;if(ti=ke=null,Vo(t),r)for(t=0;t<r.length;t++)Vo(r[t])}}function Wo(t,r){return t(r)}function Pr(){}var ps=!1;function gs(t,r,u){if(ps)return t(r,u);ps=!0;try{return Wo(t,r,u)}finally{ps=!1,(ke!==null||ti!==null)&&(Pr(),yo())}}function vn(t,r){var u=t.stateNode;if(u===null)return null;var m=pa(u);if(m===null)return null;u=m[r];t:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(t=t.type,m=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!m;break t;default:t=!1}if(t)return null;if(u&&typeof u!="function")throw Error(o(231,r,typeof u));return u}var ms=!1;if(v)try{var Ar={};Object.defineProperty(Ar,"passive",{get:function(){ms=!0}}),window.addEventListener("test",Ar,Ar),window.removeEventListener("test",Ar,Ar)}catch{ms=!1}function Zo(t,r,u,m,M,C,D,Q,rt){var kt=Array.prototype.slice.call(arguments,3);try{r.apply(u,kt)}catch(Xt){this.onError(Xt)}}var In=!1,ye=null,_s=!1,ys=null,Hs={onError:function(t){In=!0,ye=t}};function qo(t,r,u,m,M,C,D,Q,rt){In=!1,ye=null,Zo.apply(Hs,arguments)}function vo(t,r,u,m,M,C,D,Q,rt){if(qo.apply(this,arguments),In){if(In){var kt=ye;In=!1,ye=null}else throw Error(o(198));_s||(_s=!0,ys=kt)}}function ir(t){var r=t,u=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(u=r.return),t=r.return;while(t)}return r.tag===3?u:null}function Br(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function $s(t){if(ir(t)!==t)throw Error(o(188))}function Na(t){var r=t.alternate;if(!r){if(r=ir(t),r===null)throw Error(o(188));return r!==t?null:t}for(var u=t,m=r;;){var M=u.return;if(M===null)break;var C=M.alternate;if(C===null){if(m=M.return,m!==null){u=m;continue}break}if(M.child===C.child){for(C=M.child;C;){if(C===u)return $s(M),t;if(C===m)return $s(M),r;C=C.sibling}throw Error(o(188))}if(u.return!==m.return)u=M,m=C;else{for(var D=!1,Q=M.child;Q;){if(Q===u){D=!0,u=M,m=C;break}if(Q===m){D=!0,m=M,u=C;break}Q=Q.sibling}if(!D){for(Q=C.child;Q;){if(Q===u){D=!0,u=C,m=M;break}if(Q===m){D=!0,m=C,u=M;break}Q=Q.sibling}if(!D)throw Error(o(189))}}if(u.alternate!==m)throw Error(o(190))}if(u.tag!==3)throw Error(o(188));return u.stateNode.current===u?t:r}function Ko(t){return t=Na(t),t!==null?Jo(t):null}function Jo(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=Jo(t);if(r!==null)return r;t=t.sibling}return null}var Vs=i.unstable_scheduleCallback,vs=i.unstable_cancelCallback,xo=i.unstable_shouldYield,Ws=i.unstable_requestPaint,mn=i.unstable_now,Zs=i.unstable_getCurrentPriorityLevel,wo=i.unstable_ImmediatePriority,qs=i.unstable_UserBlockingPriority,Tr=i.unstable_NormalPriority,Ks=i.unstable_LowPriority,Vr=i.unstable_IdlePriority,xs=null,xi=null;function rr(t){if(xi&&typeof xi.onCommitFiberRoot=="function")try{xi.onCommitFiberRoot(xs,t,void 0,(t.current.flags&128)===128)}catch{}}var De=Math.clz32?Math.clz32:z,tn=Math.log,Wr=Math.LN2;function z(t){return t>>>=0,t===0?32:31-(tn(t)/Wr|0)|0}var bt=64,Bt=4194304;function It(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Tt(t,r){var u=t.pendingLanes;if(u===0)return 0;var m=0,M=t.suspendedLanes,C=t.pingedLanes,D=u&268435455;if(D!==0){var Q=D&~M;Q!==0?m=It(Q):(C&=D,C!==0&&(m=It(C)))}else D=u&~M,D!==0?m=It(D):C!==0&&(m=It(C));if(m===0)return 0;if(r!==0&&r!==m&&(r&M)===0&&(M=m&-m,C=r&-r,M>=C||M===16&&(C&4194240)!==0))return r;if((m&4)!==0&&(m|=u&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=m;0<r;)u=31-De(r),M=1<<u,m|=t[u],r&=~M;return m}function Zt(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qt(t,r){for(var u=t.suspendedLanes,m=t.pingedLanes,M=t.expirationTimes,C=t.pendingLanes;0<C;){var D=31-De(C),Q=1<<D,rt=M[D];rt===-1?((Q&u)===0||(Q&m)!==0)&&(M[D]=Zt(Q,r)):rt<=r&&(t.expiredLanes|=Q),C&=~Q}}function he(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ue(){var t=bt;return bt<<=1,(bt&4194240)===0&&(bt=64),t}function ge(t){for(var r=[],u=0;31>u;u++)r.push(t);return r}function ce(t,r,u){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-De(r),t[r]=u}function fe(t,r){var u=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var m=t.eventTimes;for(t=t.expirationTimes;0<u;){var M=31-De(u),C=1<<M;r[M]=0,m[M]=-1,t[M]=-1,u&=~C}}function we(t,r){var u=t.entangledLanes|=r;for(t=t.entanglements;u;){var m=31-De(u),M=1<<m;M&r|t[m]&r&&(t[m]|=r),u&=~M}}var ve=0;function je(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var We,Ve,wi,ws,Ce,Ne=!1,On=[],Mn=null,En=null,ei=null,Ln=new Map,Pe=new Map,on=[],Qe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Js(t,r){switch(t){case"focusin":case"focusout":Mn=null;break;case"dragenter":case"dragleave":En=null;break;case"mouseover":case"mouseout":ei=null;break;case"pointerover":case"pointerout":Ln.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pe.delete(r.pointerId)}}function Rr(t,r,u,m,M,C){return t===null||t.nativeEvent!==C?(t={blockedOn:r,domEventName:u,eventSystemFlags:m,nativeEvent:C,targetContainers:[M]},r!==null&&(r=_r(r),r!==null&&Ve(r)),t):(t.eventSystemFlags|=m,r=t.targetContainers,M!==null&&r.indexOf(M)===-1&&r.push(M),t)}function Mo(t,r,u,m,M){switch(r){case"focusin":return Mn=Rr(Mn,t,r,u,m,M),!0;case"dragenter":return En=Rr(En,t,r,u,m,M),!0;case"mouseover":return ei=Rr(ei,t,r,u,m,M),!0;case"pointerover":var C=M.pointerId;return Ln.set(C,Rr(Ln.get(C)||null,t,r,u,m,M)),!0;case"gotpointercapture":return C=M.pointerId,Pe.set(C,Rr(Pe.get(C)||null,t,r,u,m,M)),!0}return!1}function Mi(t){var r=As(t.target);if(r!==null){var u=ir(r);if(u!==null){if(r=u.tag,r===13){if(r=Br(u),r!==null){t.blockedOn=r,Ce(t.priority,function(){wi(u)});return}}else if(r===3&&u.stateNode.current.memoizedState.isDehydrated){t.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}t.blockedOn=null}function fi(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var u=Qo(t.domEventName,t.eventSystemFlags,r[0],t.nativeEvent);if(u===null){u=t.nativeEvent;var m=new u.constructor(u.type,u);_o=m,u.target.dispatchEvent(m),_o=null}else return r=_r(u),r!==null&&Ve(r),t.blockedOn=u,!1;r.shift()}return!0}function Xs(t,r,u){fi(t)&&u.delete(r)}function Ms(){Ne=!1,Mn!==null&&fi(Mn)&&(Mn=null),En!==null&&fi(En)&&(En=null),ei!==null&&fi(ei)&&(ei=null),Ln.forEach(Xs),Pe.forEach(Xs)}function _n(t,r){t.blockedOn===r&&(t.blockedOn=null,Ne||(Ne=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ms)))}function Ei(t){function r(M){return _n(M,t)}if(0<On.length){_n(On[0],t);for(var u=1;u<On.length;u++){var m=On[u];m.blockedOn===t&&(m.blockedOn=null)}}for(Mn!==null&&_n(Mn,t),En!==null&&_n(En,t),ei!==null&&_n(ei,t),Ln.forEach(r),Pe.forEach(r),u=0;u<on.length;u++)m=on[u],m.blockedOn===t&&(m.blockedOn=null);for(;0<on.length&&(u=on[0],u.blockedOn===null);)Mi(u),u.blockedOn===null&&on.shift()}var Ui=Ut.ReactCurrentBatchConfig,Ir=!0;function Xo(t,r,u,m){var M=ve,C=Ui.transition;Ui.transition=null;try{ve=1,Eo(t,r,u,m)}finally{ve=M,Ui.transition=C}}function Yo(t,r,u,m){var M=ve,C=Ui.transition;Ui.transition=null;try{ve=4,Eo(t,r,u,m)}finally{ve=M,Ui.transition=C}}function Eo(t,r,u,m){if(Ir){var M=Qo(t,r,u,m);if(M===null)n(t,r,m,Es,u),Js(t,m);else if(Mo(M,t,r,u,m))m.stopPropagation();else if(Js(t,m),r&4&&-1<Qe.indexOf(t)){for(;M!==null;){var C=_r(M);if(C!==null&&We(C),C=Qo(t,r,u,m),C===null&&n(t,r,m,Es,u),C===M)break;M=C}M!==null&&m.stopPropagation()}else n(t,r,m,null,u)}}var Es=null;function Qo(t,r,u,m){if(Es=null,t=ci(m),t=As(t),t!==null)if(r=ir(t),r===null)t=null;else if(u=r.tag,u===13){if(t=Br(r),t!==null)return t;t=null}else if(u===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null);return Es=t,null}function qe(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zs()){case wo:return 1;case qs:return 4;case Tr:case Ks:return 16;case Vr:return 536870912;default:return 16}default:return 16}}var Or=null,Oe=null,sr=null;function Ys(){if(sr)return sr;var t,r=Oe,u=r.length,m,M="value"in Or?Or.value:Or.textContent,C=M.length;for(t=0;t<u&&r[t]===M[t];t++);var D=u-t;for(m=1;m<=D&&r[u-m]===M[C-m];m++);return sr=M.slice(t,1<m?1-m:void 0)}function ta(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Ls(){return!0}function ll(){return!1}function Wn(t){function r(u,m,M,C,D){this._reactName=u,this._targetInst=M,this.type=m,this.nativeEvent=C,this.target=D,this.currentTarget=null;for(var Q in t)t.hasOwnProperty(Q)&&(u=t[Q],this[Q]=u?u(C):C[Q]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?Ls:ll,this.isPropagationStopped=ll,this}return ct(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Ls)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Ls)},persist:function(){},isPersistent:Ls}),r}var Dr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fa=Wn(Dr),di=ct({},Dr,{view:0,detail:0}),ul=Wn(di),Dn,Ga,Qs,Hi=ct({},di,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bs,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Qs&&(Qs&&t.type==="mousemove"?(Dn=t.screenX-Qs.screenX,Ga=t.screenY-Qs.screenY):Ga=Dn=0,Qs=t),Dn)},movementY:function(t){return"movementY"in t?t.movementY:Ga}}),za=Wn(Hi),hl=ct({},Hi,{dataTransfer:0}),ja=Wn(hl),Ul=ct({},di,{relatedTarget:0}),ea=Wn(Ul),Ua=ct({},Dr,{animationName:0,elapsedTime:0,pseudoElement:0}),Hl=Wn(Ua),Nn=ct({},Dr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Zn=Wn(Nn),cl=ct({},Dr,{data:0}),Zr=Wn(cl),Cs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $l(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=pi[t])?!!r[t]:!1}function bs(){return $l}var gi=ct({},di,{key:function(t){if(t.key){var r=Cs[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=ta(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?qr[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bs,charCode:function(t){return t.type==="keypress"?ta(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ta(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ri=Wn(gi),Ha=ct({},Hi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lo=Wn(Ha),$a=ct({},di,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bs}),Ii=Wn($a),or=ct({},Dr,{propertyName:0,elapsedTime:0,pseudoElement:0}),na=Wn(or),Va=ct({},Hi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Wa=Wn(Va),ni=[9,13,27,32],Kr=v&&"CompositionEvent"in window,Co=null;v&&"documentMode"in document&&(Co=document.documentMode);var $i=v&&"TextEvent"in window&&!Co,fl=v&&(!Kr||Co&&8<Co&&11>=Co),Ss=" ",dl=!1;function to(t,r){switch(t){case"keyup":return ni.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bo(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Nr=!1;function Vl(t,r){switch(t){case"compositionend":return bo(r);case"keypress":return r.which!==32?null:(dl=!0,Ss);case"textInput":return t=r.data,t===Ss&&dl?null:t;default:return null}}function Fr(t,r){if(Nr)return t==="compositionend"||!Kr&&to(t,r)?(t=Ys(),sr=Oe=Or=null,Nr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return fl&&r.locale!=="ko"?null:r.data;default:return null}}var ar={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Za(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!ar[t.type]:r==="textarea"}function ia(t,r,u,m){Da(m),r=p(r,"onChange"),0<r.length&&(u=new Fa("onChange","change",null,u,m),t.push({event:u,listeners:r}))}var Vi=null,Li=null;function Wl(t){fr(t,0)}function Wi(t){var r=ts(t);if(jr(r))return t}function So(t,r){if(t==="change")return r}var lr=!1;if(v){var eo;if(v){var ra="oninput"in document;if(!ra){var ko=document.createElement("div");ko.setAttribute("oninput","return;"),ra=typeof ko.oninput=="function"}eo=ra}else eo=!1;lr=eo&&(!document.documentMode||9<document.documentMode)}function Po(){Vi&&(Vi.detachEvent("onpropertychange",Ao),Li=Vi=null)}function Ao(t){if(t.propertyName==="value"&&Wi(Li)){var r=[];ia(r,Li,t,ci(t)),gs(Wl,r)}}function sa(t,r,u){t==="focusin"?(Po(),Vi=r,Li=u,Vi.attachEvent("onpropertychange",Ao)):t==="focusout"&&Po()}function no(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Wi(Li)}function oa(t,r){if(t==="click")return Wi(r)}function aa(t,r){if(t==="input"||t==="change")return Wi(r)}function la(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Oi=typeof Object.is=="function"?Object.is:la;function ur(t,r){if(Oi(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var u=Object.keys(t),m=Object.keys(r);if(u.length!==m.length)return!1;for(m=0;m<u.length;m++){var M=u[m];if(!E.call(r,M)||!Oi(t[M],r[M]))return!1}return!0}function pl(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function io(t,r){var u=pl(t);t=0;for(var m;u;){if(u.nodeType===3){if(m=t+u.textContent.length,t<=r&&m>=r)return{node:u,offset:r-t};t=m}t:{for(;u;){if(u.nextSibling){u=u.nextSibling;break t}u=u.parentNode}u=void 0}u=pl(u)}}function qa(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?qa(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Ka(){for(var t=window,r=er();r instanceof t.HTMLIFrameElement;){try{var u=typeof r.contentWindow.location.href=="string"}catch{u=!1}if(u)t=r.contentWindow;else break;r=er(t.document)}return r}function Ja(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}function hr(t){var r=Ka(),u=t.focusedElem,m=t.selectionRange;if(r!==u&&u&&u.ownerDocument&&qa(u.ownerDocument.documentElement,u)){if(m!==null&&Ja(u)){if(r=m.start,t=m.end,t===void 0&&(t=r),"selectionStart"in u)u.selectionStart=r,u.selectionEnd=Math.min(t,u.value.length);else if(t=(r=u.ownerDocument||document)&&r.defaultView||window,t.getSelection){t=t.getSelection();var M=u.textContent.length,C=Math.min(m.start,M);m=m.end===void 0?C:Math.min(m.end,M),!t.extend&&C>m&&(M=m,m=C,C=M),M=io(u,C);var D=io(u,m);M&&D&&(t.rangeCount!==1||t.anchorNode!==M.node||t.anchorOffset!==M.offset||t.focusNode!==D.node||t.focusOffset!==D.offset)&&(r=r.createRange(),r.setStart(M.node,M.offset),t.removeAllRanges(),C>m?(t.addRange(r),t.extend(D.node,D.offset)):(r.setEnd(D.node,D.offset),t.addRange(r)))}}for(r=[],t=u;t=t.parentNode;)t.nodeType===1&&r.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<r.length;u++)t=r[u],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Jr=v&&"documentMode"in document&&11>=document.documentMode,ro=null,so=null,Bo=null,ua=!1;function gl(t,r,u){var m=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;ua||ro==null||ro!==er(m)||(m=ro,"selectionStart"in m&&Ja(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Bo&&ur(Bo,m)||(Bo=m,m=p(so,"onSelect"),0<m.length&&(r=new Fa("onSelect","select",null,r,u),t.push({event:r,listeners:m}),r.target=ro)))}function Xr(t,r){var u={};return u[t.toLowerCase()]=r.toLowerCase(),u["Webkit"+t]="webkit"+r,u["Moz"+t]="moz"+r,u}var oo={animationend:Xr("Animation","AnimationEnd"),animationiteration:Xr("Animation","AnimationIteration"),animationstart:Xr("Animation","AnimationStart"),transitionend:Xr("Transition","TransitionEnd")},Yr={},ha={};v&&(ha=document.createElement("div").style,"AnimationEvent"in window||(delete oo.animationend.animation,delete oo.animationiteration.animation,delete oo.animationstart.animation),"TransitionEvent"in window||delete oo.transitionend.transition);function ks(t){if(Yr[t])return Yr[t];if(!oo[t])return t;var r=oo[t],u;for(u in r)if(r.hasOwnProperty(u)&&u in ha)return Yr[t]=r[u];return t}var ml=ks("animationend"),cr=ks("animationiteration"),ca=ks("animationstart"),To=ks("transitionend"),ao=new Map,_l="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ci(t,r){ao.set(t,r),g(r,[t])}for(var Pn=0;Pn<_l.length;Pn++){var Fn=_l[Pn],Xa=Fn.toLowerCase(),Zi=Fn[0].toUpperCase()+Fn.slice(1);Ci(Xa,"on"+Zi)}Ci(ml,"onAnimationEnd"),Ci(cr,"onAnimationIteration"),Ci(ca,"onAnimationStart"),Ci("dblclick","onDoubleClick"),Ci("focusin","onFocus"),Ci("focusout","onBlur"),Ci(To,"onTransitionEnd"),y("onMouseEnter",["mouseout","mouseover"]),y("onMouseLeave",["mouseout","mouseover"]),y("onPointerEnter",["pointerout","pointerover"]),y("onPointerLeave",["pointerout","pointerover"]),g("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),g("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),g("onBeforeInput",["compositionend","keypress","textInput","paste"]),g("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),g("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),g("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ae="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fa=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ae));function Ro(t,r,u){var m=t.type||"unknown-event";t.currentTarget=u,vo(m,r,void 0,t),t.currentTarget=null}function fr(t,r){r=(r&4)!==0;for(var u=0;u<t.length;u++){var m=t[u],M=m.event;m=m.listeners;t:{var C=void 0;if(r)for(var D=m.length-1;0<=D;D--){var Q=m[D],rt=Q.instance,kt=Q.currentTarget;if(Q=Q.listener,rt!==C&&M.isPropagationStopped())break t;Ro(M,Q,kt),C=rt}else for(D=0;D<m.length;D++){if(Q=m[D],rt=Q.instance,kt=Q.currentTarget,Q=Q.listener,rt!==C&&M.isPropagationStopped())break t;Ro(M,Q,kt),C=rt}}}if(_s)throw t=ys,_s=!1,ys=null,t}function Ge(t,r){var u=r[Ps];u===void 0&&(u=r[Ps]=new Set);var m=t+"__bubble";u.has(m)||(Qr(r,t,2,!1),u.add(m))}function da(t,r,u){var m=0;r&&(m|=4),Qr(u,t,m,r)}var qn="_reactListening"+Math.random().toString(36).slice(2);function Gn(t){if(!t[qn]){t[qn]=!0,c.forEach(function(u){u!=="selectionchange"&&(fa.has(u)||da(u,!1,t),da(u,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[qn]||(r[qn]=!0,da("selectionchange",!1,r))}}function Qr(t,r,u,m){switch(qe(r)){case 1:var M=Xo;break;case 4:M=Yo;break;default:M=Eo}u=M.bind(null,r,u,t),M=void 0,!ms||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(M=!0),m?M!==void 0?t.addEventListener(r,u,{capture:!0,passive:M}):t.addEventListener(r,u,!0):M!==void 0?t.addEventListener(r,u,{passive:M}):t.addEventListener(r,u,!1)}function n(t,r,u,m,M){var C=m;if((r&1)===0&&(r&2)===0&&m!==null)t:for(;;){if(m===null)return;var D=m.tag;if(D===3||D===4){var Q=m.stateNode.containerInfo;if(Q===M||Q.nodeType===8&&Q.parentNode===M)break;if(D===4)for(D=m.return;D!==null;){var rt=D.tag;if((rt===3||rt===4)&&(rt=D.stateNode.containerInfo,rt===M||rt.nodeType===8&&rt.parentNode===M))return;D=D.return}for(;Q!==null;){if(D=As(Q),D===null)return;if(rt=D.tag,rt===5||rt===6){m=C=D;continue t}Q=Q.parentNode}}m=m.return}gs(function(){var kt=C,Xt=ci(u),Yt=[];t:{var Wt=ao.get(t);if(Wt!==void 0){var pe=Fa,xe=t;switch(t){case"keypress":if(ta(u)===0)break t;case"keydown":case"keyup":pe=Ri;break;case"focusin":xe="focus",pe=ea;break;case"focusout":xe="blur",pe=ea;break;case"beforeblur":case"afterblur":pe=ea;break;case"click":if(u.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pe=za;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pe=ja;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pe=Ii;break;case ml:case cr:case ca:pe=Hl;break;case To:pe=na;break;case"scroll":pe=ul;break;case"wheel":pe=Wa;break;case"copy":case"cut":case"paste":pe=Zn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pe=Lo}var Me=(r&4)!==0,Un=!Me&&t==="scroll",xt=Me?Wt!==null?Wt+"Capture":null:Wt;Me=[];for(var at=kt,Ct;at!==null;){Ct=at;var ne=Ct.stateNode;if(Ct.tag===5&&ne!==null&&(Ct=ne,xt!==null&&(ne=vn(at,xt),ne!=null&&Me.push(l(at,ne,Ct)))),Un)break;at=at.return}0<Me.length&&(Wt=new pe(Wt,xe,null,u,Xt),Yt.push({event:Wt,listeners:Me}))}}if((r&7)===0){t:{if(Wt=t==="mouseover"||t==="pointerover",pe=t==="mouseout"||t==="pointerout",Wt&&u!==_o&&(xe=u.relatedTarget||u.fromElement)&&(As(xe)||xe[en]))break t;if((pe||Wt)&&(Wt=Xt.window===Xt?Xt:(Wt=Xt.ownerDocument)?Wt.defaultView||Wt.parentWindow:window,pe?(xe=u.relatedTarget||u.toElement,pe=kt,xe=xe?As(xe):null,xe!==null&&(Un=ir(xe),xe!==Un||xe.tag!==5&&xe.tag!==6)&&(xe=null)):(pe=null,xe=kt),pe!==xe)){if(Me=za,ne="onMouseLeave",xt="onMouseEnter",at="mouse",(t==="pointerout"||t==="pointerover")&&(Me=Lo,ne="onPointerLeave",xt="onPointerEnter",at="pointer"),Un=pe==null?Wt:ts(pe),Ct=xe==null?Wt:ts(xe),Wt=new Me(ne,at+"leave",pe,u,Xt),Wt.target=Un,Wt.relatedTarget=Ct,ne=null,As(Xt)===kt&&(Me=new Me(xt,at+"enter",xe,u,Xt),Me.target=Ct,Me.relatedTarget=Un,ne=Me),Un=ne,pe&&xe)e:{for(Me=pe,xt=xe,at=0,Ct=Me;Ct;Ct=x(Ct))at++;for(Ct=0,ne=xt;ne;ne=x(ne))Ct++;for(;0<at-Ct;)Me=x(Me),at--;for(;0<Ct-at;)xt=x(xt),Ct--;for(;at--;){if(Me===xt||xt!==null&&Me===xt.alternate)break e;Me=x(Me),xt=x(xt)}Me=null}else Me=null;pe!==null&&k(Yt,Wt,pe,Me,!1),xe!==null&&Un!==null&&k(Yt,Un,xe,Me,!0)}}t:{if(Wt=kt?ts(kt):window,pe=Wt.nodeName&&Wt.nodeName.toLowerCase(),pe==="select"||pe==="input"&&Wt.type==="file")var Le=So;else if(Za(Wt))if(lr)Le=aa;else{Le=no;var Be=sa}else(pe=Wt.nodeName)&&pe.toLowerCase()==="input"&&(Wt.type==="checkbox"||Wt.type==="radio")&&(Le=oa);if(Le&&(Le=Le(t,kt))){ia(Yt,Le,u,Xt);break t}Be&&Be(t,Wt,kt),t==="focusout"&&(Be=Wt._wrapperState)&&Be.controlled&&Wt.type==="number"&&Hr(Wt,"number",Wt.value)}switch(Be=kt?ts(kt):window,t){case"focusin":(Za(Be)||Be.contentEditable==="true")&&(ro=Be,so=kt,Bo=null);break;case"focusout":Bo=so=ro=null;break;case"mousedown":ua=!0;break;case"contextmenu":case"mouseup":case"dragend":ua=!1,gl(Yt,u,Xt);break;case"selectionchange":if(Jr)break;case"keydown":case"keyup":gl(Yt,u,Xt)}var Te;if(Kr)t:{switch(t){case"compositionstart":var ze="onCompositionStart";break t;case"compositionend":ze="onCompositionEnd";break t;case"compositionupdate":ze="onCompositionUpdate";break t}ze=void 0}else Nr?to(t,u)&&(ze="onCompositionEnd"):t==="keydown"&&u.keyCode===229&&(ze="onCompositionStart");ze&&(fl&&u.locale!=="ko"&&(Nr||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&Nr&&(Te=Ys()):(Or=Xt,Oe="value"in Or?Or.value:Or.textContent,Nr=!0)),Be=p(kt,ze),0<Be.length&&(ze=new Zr(ze,t,null,u,Xt),Yt.push({event:ze,listeners:Be}),Te?ze.data=Te:(Te=bo(u),Te!==null&&(ze.data=Te)))),(Te=$i?Vl(t,u):Fr(t,u))&&(kt=p(kt,"onBeforeInput"),0<kt.length&&(Xt=new Zr("onBeforeInput","beforeinput",null,u,Xt),Yt.push({event:Xt,listeners:kt}),Xt.data=Te))}fr(Yt,r)})}function l(t,r,u){return{instance:t,listener:r,currentTarget:u}}function p(t,r){for(var u=r+"Capture",m=[];t!==null;){var M=t,C=M.stateNode;M.tag===5&&C!==null&&(M=C,C=vn(t,u),C!=null&&m.unshift(l(t,C,M)),C=vn(t,r),C!=null&&m.push(l(t,C,M))),t=t.return}return m}function x(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function k(t,r,u,m,M){for(var C=r._reactName,D=[];u!==null&&u!==m;){var Q=u,rt=Q.alternate,kt=Q.stateNode;if(rt!==null&&rt===m)break;Q.tag===5&&kt!==null&&(Q=kt,M?(rt=vn(u,C),rt!=null&&D.unshift(l(u,rt,Q))):M||(rt=vn(u,C),rt!=null&&D.push(l(u,rt,Q)))),u=u.return}D.length!==0&&t.push({event:r,listeners:D})}var N=/\r\n?/g,tt=/\u0000|\uFFFD/g;function pt(t){return(typeof t=="string"?t:""+t).replace(N,`
`).replace(tt,"")}function St(t,r,u){if(r=pt(r),pt(t)!==r&&u)throw Error(o(425))}function Ft(){}var ae=null,Se=null;function He(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var zn=typeof setTimeout=="function"?setTimeout:void 0,An=typeof clearTimeout=="function"?clearTimeout:void 0,ii=typeof Promise=="function"?Promise:void 0,xn=typeof queueMicrotask=="function"?queueMicrotask:typeof ii<"u"?function(t){return ii.resolve(null).then(t).catch(dr)}:zn;function dr(t){setTimeout(function(){throw t})}function Io(t,r){var u=r,m=0;do{var M=u.nextSibling;if(t.removeChild(u),M&&M.nodeType===8)if(u=M.data,u==="/$"){if(m===0){t.removeChild(M),Ei(r);return}m--}else u!=="$"&&u!=="$?"&&u!=="$!"||m++;u=M}while(u);Ei(r)}function qi(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return t}function Ya(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var u=t.data;if(u==="$"||u==="$!"||u==="$?"){if(r===0)return t;r--}else u==="/$"&&r++}t=t.previousSibling}return null}var pr=Math.random().toString(36).slice(2),gr="__reactFiber$"+pr,lo="__reactProps$"+pr,en="__reactContainer$"+pr,Ps="__reactEvents$"+pr,Zl="__reactListeners$"+pr,mr="__reactHandles$"+pr;function As(t){var r=t[gr];if(r)return r;for(var u=t.parentNode;u;){if(r=u[en]||u[gr]){if(u=r.alternate,r.child!==null||u!==null&&u.child!==null)for(t=Ya(t);t!==null;){if(u=t[gr])return u;t=Ya(t)}return r}t=u,u=t.parentNode}return null}function _r(t){return t=t[gr]||t[en],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ts(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(o(33))}function pa(t){return t[lo]||null}var yl=[],ga=-1;function Bs(t){return{current:t}}function yn(t){0>ga||(t.current=yl[ga],yl[ga]=null,ga--)}function dn(t,r){ga++,yl[ga]=t.current,t.current=r}var uo={},Bn=Bs(uo),ri=Bs(!1),Oo=uo;function ma(t,r){var u=t.type.contextTypes;if(!u)return uo;var m=t.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===r)return m.__reactInternalMemoizedMaskedChildContext;var M={},C;for(C in u)M[C]=r[C];return m&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=M),M}function si(t){return t=t.childContextTypes,t!=null}function Do(){yn(ri),yn(Bn)}function ql(t,r,u){if(Bn.current!==uo)throw Error(o(168));dn(Bn,r),dn(ri,u)}function Fu(t,r,u){var m=t.stateNode;if(r=r.childContextTypes,typeof m.getChildContext!="function")return u;m=m.getChildContext();for(var M in m)if(!(M in r))throw Error(o(108,$e(t)||"Unknown",M));return ct({},u,m)}function vl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||uo,Oo=Bn.current,dn(Bn,t),dn(ri,ri.current),!0}function Kl(t,r,u){var m=t.stateNode;if(!m)throw Error(o(169));u?(t=Fu(t,r,Oo),m.__reactInternalMemoizedMergedChildContext=t,yn(ri),yn(Bn),dn(Bn,t)):yn(ri),dn(ri,u)}var es=null,xl=!1,Jl=!1;function Xl(t){es===null?es=[t]:es.push(t)}function Uh(t){xl=!0,Xl(t)}function ho(){if(!Jl&&es!==null){Jl=!0;var t=0,r=ve;try{var u=es;for(ve=1;t<u.length;t++){var m=u[t];do m=m(!0);while(m!==null)}es=null,xl=!1}catch(M){throw es!==null&&(es=es.slice(t+1)),Vs(wo,ho),M}finally{ve=r,Jl=!1}}return null}var _a=[],ya=0,wl=null,Ml=0,Ki=[],oi=0,ns=null,Ts=1,Rs="";function No(t,r){_a[ya++]=Ml,_a[ya++]=wl,wl=t,Ml=r}function jn(t,r,u){Ki[oi++]=Ts,Ki[oi++]=Rs,Ki[oi++]=ns,ns=t;var m=Ts;t=Rs;var M=32-De(m)-1;m&=~(1<<M),u+=1;var C=32-De(r)+M;if(30<C){var D=M-M%5;C=(m&(1<<D)-1).toString(32),m>>=D,M-=D,Ts=1<<32-De(r)+M|u<<M|m,Rs=C+t}else Ts=1<<C|u<<M|m,Rs=t}function is(t){t.return!==null&&(No(t,1),jn(t,1,0))}function Yl(t){for(;t===wl;)wl=_a[--ya],_a[ya]=null,Ml=_a[--ya],_a[ya]=null;for(;t===ns;)ns=Ki[--oi],Ki[oi]=null,Rs=Ki[--oi],Ki[oi]=null,Ts=Ki[--oi],Ki[oi]=null}var Ji=null,bi=null,wn=!1,Gr=null;function Gu(t,r){var u=os(5,null,null,0);u.elementType="DELETED",u.stateNode=r,u.return=t,r=t.deletions,r===null?(t.deletions=[u],t.flags|=16):r.push(u)}function Ql(t,r){switch(t.tag){case 5:var u=t.type;return r=r.nodeType!==1||u.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(t.stateNode=r,Ji=t,bi=qi(r.firstChild),!0):!1;case 6:return r=t.pendingProps===""||r.nodeType!==3?null:r,r!==null?(t.stateNode=r,Ji=t,bi=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(u=ns!==null?{id:Ts,overflow:Rs}:null,t.memoizedState={dehydrated:r,treeContext:u,retryLane:1073741824},u=os(18,null,null,0),u.stateNode=r,u.return=t,t.child=u,Ji=t,bi=null,!0):!1;default:return!1}}function El(t){return(t.mode&1)!==0&&(t.flags&128)===0}function s(t){if(wn){var r=bi;if(r){var u=r;if(!Ql(t,r)){if(El(t))throw Error(o(418));r=qi(u.nextSibling);var m=Ji;r&&Ql(t,r)?Gu(m,u):(t.flags=t.flags&-4097|2,wn=!1,Ji=t)}}else{if(El(t))throw Error(o(418));t.flags=t.flags&-4097|2,wn=!1,Ji=t}}}function a(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ji=t}function h(t){if(t!==Ji)return!1;if(!wn)return a(t),wn=!0,!1;var r;if((r=t.tag!==3)&&!(r=t.tag!==5)&&(r=t.type,r=r!=="head"&&r!=="body"&&!He(t.type,t.memoizedProps)),r&&(r=bi)){if(El(t))throw d(),Error(o(418));for(;r;)Gu(t,r),r=qi(r.nextSibling)}if(a(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));t:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8){var u=t.data;if(u==="/$"){if(r===0){bi=qi(t.nextSibling);break t}r--}else u!=="$"&&u!=="$!"&&u!=="$?"||r++}t=t.nextSibling}bi=null}}else bi=Ji?qi(t.stateNode.nextSibling):null;return!0}function d(){for(var t=bi;t;)t=qi(t.nextSibling)}function _(){bi=Ji=null,wn=!1}function w(t){Gr===null?Gr=[t]:Gr.push(t)}var b=Ut.ReactCurrentBatchConfig;function S(t,r,u){if(t=u.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(o(309));var m=u.stateNode}if(!m)throw Error(o(147,t));var M=m,C=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===C?r.ref:(r=function(D){var Q=M.refs;D===null?delete Q[C]:Q[C]=D},r._stringRef=C,r)}if(typeof t!="string")throw Error(o(284));if(!u._owner)throw Error(o(290,t))}return t}function T(t,r){throw t=Object.prototype.toString.call(r),Error(o(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function O(t){var r=t._init;return r(t._payload)}function X(t){function r(xt,at){if(t){var Ct=xt.deletions;Ct===null?(xt.deletions=[at],xt.flags|=16):Ct.push(at)}}function u(xt,at){if(!t)return null;for(;at!==null;)r(xt,at),at=at.sibling;return null}function m(xt,at){for(xt=new Map;at!==null;)at.key!==null?xt.set(at.key,at):xt.set(at.index,at),at=at.sibling;return xt}function M(xt,at){return xt=Ca(xt,at),xt.index=0,xt.sibling=null,xt}function C(xt,at,Ct){return xt.index=Ct,t?(Ct=xt.alternate,Ct!==null?(Ct=Ct.index,Ct<at?(xt.flags|=2,at):Ct):(xt.flags|=2,at)):(xt.flags|=1048576,at)}function D(xt){return t&&xt.alternate===null&&(xt.flags|=2),xt}function Q(xt,at,Ct,ne){return at===null||at.tag!==6?(at=Mc(Ct,xt.mode,ne),at.return=xt,at):(at=M(at,Ct),at.return=xt,at)}function rt(xt,at,Ct,ne){var Le=Ct.type;return Le===$t?Xt(xt,at,Ct.props.children,ne,Ct.key):at!==null&&(at.elementType===Le||typeof Le=="object"&&Le!==null&&Le.$$typeof===At&&O(Le)===at.type)?(ne=M(at,Ct.props),ne.ref=S(xt,at,Ct),ne.return=xt,ne):(ne=ih(Ct.type,Ct.key,Ct.props,null,xt.mode,ne),ne.ref=S(xt,at,Ct),ne.return=xt,ne)}function kt(xt,at,Ct,ne){return at===null||at.tag!==4||at.stateNode.containerInfo!==Ct.containerInfo||at.stateNode.implementation!==Ct.implementation?(at=Ec(Ct,xt.mode,ne),at.return=xt,at):(at=M(at,Ct.children||[]),at.return=xt,at)}function Xt(xt,at,Ct,ne,Le){return at===null||at.tag!==7?(at=rl(Ct,xt.mode,ne,Le),at.return=xt,at):(at=M(at,Ct),at.return=xt,at)}function Yt(xt,at,Ct){if(typeof at=="string"&&at!==""||typeof at=="number")return at=Mc(""+at,xt.mode,Ct),at.return=xt,at;if(typeof at=="object"&&at!==null){switch(at.$$typeof){case Ot:return Ct=ih(at.type,at.key,at.props,null,xt.mode,Ct),Ct.ref=S(xt,null,at),Ct.return=xt,Ct;case Gt:return at=Ec(at,xt.mode,Ct),at.return=xt,at;case At:var ne=at._init;return Yt(xt,ne(at._payload),Ct)}if(Xn(at)||Rt(at))return at=rl(at,xt.mode,Ct,null),at.return=xt,at;T(xt,at)}return null}function Wt(xt,at,Ct,ne){var Le=at!==null?at.key:null;if(typeof Ct=="string"&&Ct!==""||typeof Ct=="number")return Le!==null?null:Q(xt,at,""+Ct,ne);if(typeof Ct=="object"&&Ct!==null){switch(Ct.$$typeof){case Ot:return Ct.key===Le?rt(xt,at,Ct,ne):null;case Gt:return Ct.key===Le?kt(xt,at,Ct,ne):null;case At:return Le=Ct._init,Wt(xt,at,Le(Ct._payload),ne)}if(Xn(Ct)||Rt(Ct))return Le!==null?null:Xt(xt,at,Ct,ne,null);T(xt,Ct)}return null}function pe(xt,at,Ct,ne,Le){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return xt=xt.get(Ct)||null,Q(at,xt,""+ne,Le);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case Ot:return xt=xt.get(ne.key===null?Ct:ne.key)||null,rt(at,xt,ne,Le);case Gt:return xt=xt.get(ne.key===null?Ct:ne.key)||null,kt(at,xt,ne,Le);case At:var Be=ne._init;return pe(xt,at,Ct,Be(ne._payload),Le)}if(Xn(ne)||Rt(ne))return xt=xt.get(Ct)||null,Xt(at,xt,ne,Le,null);T(at,ne)}return null}function xe(xt,at,Ct,ne){for(var Le=null,Be=null,Te=at,ze=at=0,yi=null;Te!==null&&ze<Ct.length;ze++){Te.index>ze?(yi=Te,Te=null):yi=Te.sibling;var sn=Wt(xt,Te,Ct[ze],ne);if(sn===null){Te===null&&(Te=yi);break}t&&Te&&sn.alternate===null&&r(xt,Te),at=C(sn,at,ze),Be===null?Le=sn:Be.sibling=sn,Be=sn,Te=yi}if(ze===Ct.length)return u(xt,Te),wn&&No(xt,ze),Le;if(Te===null){for(;ze<Ct.length;ze++)Te=Yt(xt,Ct[ze],ne),Te!==null&&(at=C(Te,at,ze),Be===null?Le=Te:Be.sibling=Te,Be=Te);return wn&&No(xt,ze),Le}for(Te=m(xt,Te);ze<Ct.length;ze++)yi=pe(Te,xt,ze,Ct[ze],ne),yi!==null&&(t&&yi.alternate!==null&&Te.delete(yi.key===null?ze:yi.key),at=C(yi,at,ze),Be===null?Le=yi:Be.sibling=yi,Be=yi);return t&&Te.forEach(function(ba){return r(xt,ba)}),wn&&No(xt,ze),Le}function Me(xt,at,Ct,ne){var Le=Rt(Ct);if(typeof Le!="function")throw Error(o(150));if(Ct=Le.call(Ct),Ct==null)throw Error(o(151));for(var Be=Le=null,Te=at,ze=at=0,yi=null,sn=Ct.next();Te!==null&&!sn.done;ze++,sn=Ct.next()){Te.index>ze?(yi=Te,Te=null):yi=Te.sibling;var ba=Wt(xt,Te,sn.value,ne);if(ba===null){Te===null&&(Te=yi);break}t&&Te&&ba.alternate===null&&r(xt,Te),at=C(ba,at,ze),Be===null?Le=ba:Be.sibling=ba,Be=ba,Te=yi}if(sn.done)return u(xt,Te),wn&&No(xt,ze),Le;if(Te===null){for(;!sn.done;ze++,sn=Ct.next())sn=Yt(xt,sn.value,ne),sn!==null&&(at=C(sn,at,ze),Be===null?Le=sn:Be.sibling=sn,Be=sn);return wn&&No(xt,ze),Le}for(Te=m(xt,Te);!sn.done;ze++,sn=Ct.next())sn=pe(Te,xt,ze,sn.value,ne),sn!==null&&(t&&sn.alternate!==null&&Te.delete(sn.key===null?ze:sn.key),at=C(sn,at,ze),Be===null?Le=sn:Be.sibling=sn,Be=sn);return t&&Te.forEach(function(yg){return r(xt,yg)}),wn&&No(xt,ze),Le}function Un(xt,at,Ct,ne){if(typeof Ct=="object"&&Ct!==null&&Ct.type===$t&&Ct.key===null&&(Ct=Ct.props.children),typeof Ct=="object"&&Ct!==null){switch(Ct.$$typeof){case Ot:t:{for(var Le=Ct.key,Be=at;Be!==null;){if(Be.key===Le){if(Le=Ct.type,Le===$t){if(Be.tag===7){u(xt,Be.sibling),at=M(Be,Ct.props.children),at.return=xt,xt=at;break t}}else if(Be.elementType===Le||typeof Le=="object"&&Le!==null&&Le.$$typeof===At&&O(Le)===Be.type){u(xt,Be.sibling),at=M(Be,Ct.props),at.ref=S(xt,Be,Ct),at.return=xt,xt=at;break t}u(xt,Be);break}else r(xt,Be);Be=Be.sibling}Ct.type===$t?(at=rl(Ct.props.children,xt.mode,ne,Ct.key),at.return=xt,xt=at):(ne=ih(Ct.type,Ct.key,Ct.props,null,xt.mode,ne),ne.ref=S(xt,at,Ct),ne.return=xt,xt=ne)}return D(xt);case Gt:t:{for(Be=Ct.key;at!==null;){if(at.key===Be)if(at.tag===4&&at.stateNode.containerInfo===Ct.containerInfo&&at.stateNode.implementation===Ct.implementation){u(xt,at.sibling),at=M(at,Ct.children||[]),at.return=xt,xt=at;break t}else{u(xt,at);break}else r(xt,at);at=at.sibling}at=Ec(Ct,xt.mode,ne),at.return=xt,xt=at}return D(xt);case At:return Be=Ct._init,Un(xt,at,Be(Ct._payload),ne)}if(Xn(Ct))return xe(xt,at,Ct,ne);if(Rt(Ct))return Me(xt,at,Ct,ne);T(xt,Ct)}return typeof Ct=="string"&&Ct!==""||typeof Ct=="number"?(Ct=""+Ct,at!==null&&at.tag===6?(u(xt,at.sibling),at=M(at,Ct),at.return=xt,xt=at):(u(xt,at),at=Mc(Ct,xt.mode,ne),at.return=xt,xt=at),D(xt)):u(xt,at)}return Un}var W=X(!0),yt=X(!1),Lt=Bs(null),jt=null,ie=null,de=null;function Ke(){de=ie=jt=null}function J(t){var r=Lt.current;yn(Lt),t._currentValue=r}function et(t,r,u){for(;t!==null;){var m=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,m!==null&&(m.childLanes|=r)):m!==null&&(m.childLanes&r)!==r&&(m.childLanes|=r),t===u)break;t=t.return}}function ot(t,r){jt=t,de=ie=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&r)!==0&&(vr=!0),t.firstContext=null)}function wt(t){var r=t._currentValue;if(de!==t)if(t={context:t,memoizedValue:r,next:null},ie===null){if(jt===null)throw Error(o(308));ie=t,jt.dependencies={lanes:0,firstContext:t}}else ie=ie.next=t;return r}var ut=null;function Et(t){ut===null?ut=[t]:ut.push(t)}function R(t,r,u,m){var M=r.interleaved;return M===null?(u.next=u,Et(r)):(u.next=M.next,M.next=u),r.interleaved=u,F(t,m)}function F(t,r){t.lanes|=r;var u=t.alternate;for(u!==null&&(u.lanes|=r),u=t,t=t.return;t!==null;)t.childLanes|=r,u=t.alternate,u!==null&&(u.childLanes|=r),u=t,t=t.return;return u.tag===3?u.stateNode:null}var U=!1;function j(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function H(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function nt(t,r,u){var m=t.updateQueue;if(m===null)return null;if(m=m.shared,(nn&2)!==0){var M=m.pending;return M===null?r.next=r:(r.next=M.next,M.next=r),m.pending=r,F(t,u)}return M=m.interleaved,M===null?(r.next=r,Et(m)):(r.next=M.next,M.next=r),m.interleaved=r,F(t,u)}function it(t,r,u){if(r=r.updateQueue,r!==null&&(r=r.shared,(u&4194240)!==0)){var m=r.lanes;m&=t.pendingLanes,u|=m,r.lanes=u,we(t,u)}}function st(t,r){var u=t.updateQueue,m=t.alternate;if(m!==null&&(m=m.updateQueue,u===m)){var M=null,C=null;if(u=u.firstBaseUpdate,u!==null){do{var D={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};C===null?M=C=D:C=C.next=D,u=u.next}while(u!==null);C===null?M=C=r:C=C.next=r}else M=C=r;u={baseState:m.baseState,firstBaseUpdate:M,lastBaseUpdate:C,shared:m.shared,effects:m.effects},t.updateQueue=u;return}t=u.lastBaseUpdate,t===null?u.firstBaseUpdate=r:t.next=r,u.lastBaseUpdate=r}function dt(t,r,u,m){var M=t.updateQueue;U=!1;var C=M.firstBaseUpdate,D=M.lastBaseUpdate,Q=M.shared.pending;if(Q!==null){M.shared.pending=null;var rt=Q,kt=rt.next;rt.next=null,D===null?C=kt:D.next=kt,D=rt;var Xt=t.alternate;Xt!==null&&(Xt=Xt.updateQueue,Q=Xt.lastBaseUpdate,Q!==D&&(Q===null?Xt.firstBaseUpdate=kt:Q.next=kt,Xt.lastBaseUpdate=rt))}if(C!==null){var Yt=M.baseState;D=0,Xt=kt=rt=null,Q=C;do{var Wt=Q.lane,pe=Q.eventTime;if((m&Wt)===Wt){Xt!==null&&(Xt=Xt.next={eventTime:pe,lane:0,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null});t:{var xe=t,Me=Q;switch(Wt=r,pe=u,Me.tag){case 1:if(xe=Me.payload,typeof xe=="function"){Yt=xe.call(pe,Yt,Wt);break t}Yt=xe;break t;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=Me.payload,Wt=typeof xe=="function"?xe.call(pe,Yt,Wt):xe,Wt==null)break t;Yt=ct({},Yt,Wt);break t;case 2:U=!0}}Q.callback!==null&&Q.lane!==0&&(t.flags|=64,Wt=M.effects,Wt===null?M.effects=[Q]:Wt.push(Q))}else pe={eventTime:pe,lane:Wt,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null},Xt===null?(kt=Xt=pe,rt=Yt):Xt=Xt.next=pe,D|=Wt;if(Q=Q.next,Q===null){if(Q=M.shared.pending,Q===null)break;Wt=Q,Q=Wt.next,Wt.next=null,M.lastBaseUpdate=Wt,M.shared.pending=null}}while(!0);if(Xt===null&&(rt=Yt),M.baseState=rt,M.firstBaseUpdate=kt,M.lastBaseUpdate=Xt,r=M.shared.interleaved,r!==null){M=r;do D|=M.lane,M=M.next;while(M!==r)}else C===null&&(M.shared.lanes=0);tl|=D,t.lanes=D,t.memoizedState=Yt}}function gt(t,r,u){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var m=t[r],M=m.callback;if(M!==null){if(m.callback=null,m=u,typeof M!="function")throw Error(o(191,M));M.call(m)}}}var Nt={},oe=Bs(Nt),me=Bs(Nt),Ee=Bs(Nt);function Je(t){if(t===Nt)throw Error(o(174));return t}function rn(t,r){switch(dn(Ee,r),dn(me,t),dn(oe,Nt),t=r.nodeType,t){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:Yn(null,"");break;default:t=t===8?r.parentNode:r,r=t.namespaceURI||null,t=t.tagName,r=Yn(r,t)}yn(oe),dn(oe,r)}function Ze(){yn(oe),yn(me),yn(Ee)}function an(t){Je(Ee.current);var r=Je(oe.current),u=Yn(r,t.type);r!==u&&(dn(me,t),dn(oe,u))}function Kn(t){me.current===t&&(yn(oe),yn(me))}var pn=Bs(0);function va(t){for(var r=t;r!==null;){if(r.tag===13){var u=r.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Qa=[];function yr(){for(var t=0;t<Qa.length;t++)Qa[t]._workInProgressVersionPrimary=null;Qa.length=0}var co=Ut.ReactCurrentDispatcher,Di=Ut.ReactCurrentBatchConfig,Cn=0,Ue=null,ai=null,mi=null,zu=!1,tu=!1,eu=0,z0=0;function Ni(){throw Error(o(321))}function Hh(t,r){if(r===null)return!1;for(var u=0;u<r.length&&u<t.length;u++)if(!Oi(t[u],r[u]))return!1;return!0}function $h(t,r,u,m,M,C){if(Cn=C,Ue=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,co.current=t===null||t.memoizedState===null?$0:V0,t=u(m,M),tu){C=0;do{if(tu=!1,eu=0,25<=C)throw Error(o(301));C+=1,mi=ai=null,r.updateQueue=null,co.current=W0,t=u(m,M)}while(tu)}if(co.current=Hu,r=ai!==null&&ai.next!==null,Cn=0,mi=ai=Ue=null,zu=!1,r)throw Error(o(300));return t}function Vh(){var t=eu!==0;return eu=0,t}function fo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mi===null?Ue.memoizedState=mi=t:mi=mi.next=t,mi}function rs(){if(ai===null){var t=Ue.alternate;t=t!==null?t.memoizedState:null}else t=ai.next;var r=mi===null?Ue.memoizedState:mi.next;if(r!==null)mi=r,ai=t;else{if(t===null)throw Error(o(310));ai=t,t={memoizedState:ai.memoizedState,baseState:ai.baseState,baseQueue:ai.baseQueue,queue:ai.queue,next:null},mi===null?Ue.memoizedState=mi=t:mi=mi.next=t}return mi}function nu(t,r){return typeof r=="function"?r(t):r}function Wh(t){var r=rs(),u=r.queue;if(u===null)throw Error(o(311));u.lastRenderedReducer=t;var m=ai,M=m.baseQueue,C=u.pending;if(C!==null){if(M!==null){var D=M.next;M.next=C.next,C.next=D}m.baseQueue=M=C,u.pending=null}if(M!==null){C=M.next,m=m.baseState;var Q=D=null,rt=null,kt=C;do{var Xt=kt.lane;if((Cn&Xt)===Xt)rt!==null&&(rt=rt.next={lane:0,action:kt.action,hasEagerState:kt.hasEagerState,eagerState:kt.eagerState,next:null}),m=kt.hasEagerState?kt.eagerState:t(m,kt.action);else{var Yt={lane:Xt,action:kt.action,hasEagerState:kt.hasEagerState,eagerState:kt.eagerState,next:null};rt===null?(Q=rt=Yt,D=m):rt=rt.next=Yt,Ue.lanes|=Xt,tl|=Xt}kt=kt.next}while(kt!==null&&kt!==C);rt===null?D=m:rt.next=Q,Oi(m,r.memoizedState)||(vr=!0),r.memoizedState=m,r.baseState=D,r.baseQueue=rt,u.lastRenderedState=m}if(t=u.interleaved,t!==null){M=t;do C=M.lane,Ue.lanes|=C,tl|=C,M=M.next;while(M!==t)}else M===null&&(u.lanes=0);return[r.memoizedState,u.dispatch]}function Zh(t){var r=rs(),u=r.queue;if(u===null)throw Error(o(311));u.lastRenderedReducer=t;var m=u.dispatch,M=u.pending,C=r.memoizedState;if(M!==null){u.pending=null;var D=M=M.next;do C=t(C,D.action),D=D.next;while(D!==M);Oi(C,r.memoizedState)||(vr=!0),r.memoizedState=C,r.baseQueue===null&&(r.baseState=C),u.lastRenderedState=C}return[C,m]}function Cf(){}function bf(t,r){var u=Ue,m=rs(),M=r(),C=!Oi(m.memoizedState,M);if(C&&(m.memoizedState=M,vr=!0),m=m.queue,qh(Pf.bind(null,u,m,t),[t]),m.getSnapshot!==r||C||mi!==null&&mi.memoizedState.tag&1){if(u.flags|=2048,iu(9,kf.bind(null,u,m,M,r),void 0,null),_i===null)throw Error(o(349));(Cn&30)!==0||Sf(u,r,M)}return M}function Sf(t,r,u){t.flags|=16384,t={getSnapshot:r,value:u},r=Ue.updateQueue,r===null?(r={lastEffect:null,stores:null},Ue.updateQueue=r,r.stores=[t]):(u=r.stores,u===null?r.stores=[t]:u.push(t))}function kf(t,r,u,m){r.value=u,r.getSnapshot=m,Af(r)&&Bf(t)}function Pf(t,r,u){return u(function(){Af(r)&&Bf(t)})}function Af(t){var r=t.getSnapshot;t=t.value;try{var u=r();return!Oi(t,u)}catch{return!0}}function Bf(t){var r=F(t,1);r!==null&&Ns(r,t,1,-1)}function Tf(t){var r=fo();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:nu,lastRenderedState:t},r.queue=t,t=t.dispatch=H0.bind(null,Ue,t),[r.memoizedState,t]}function iu(t,r,u,m){return t={tag:t,create:r,destroy:u,deps:m,next:null},r=Ue.updateQueue,r===null?(r={lastEffect:null,stores:null},Ue.updateQueue=r,r.lastEffect=t.next=t):(u=r.lastEffect,u===null?r.lastEffect=t.next=t:(m=u.next,u.next=t,t.next=m,r.lastEffect=t)),t}function Rf(){return rs().memoizedState}function ju(t,r,u,m){var M=fo();Ue.flags|=t,M.memoizedState=iu(1|r,u,void 0,m===void 0?null:m)}function Uu(t,r,u,m){var M=rs();m=m===void 0?null:m;var C=void 0;if(ai!==null){var D=ai.memoizedState;if(C=D.destroy,m!==null&&Hh(m,D.deps)){M.memoizedState=iu(r,u,C,m);return}}Ue.flags|=t,M.memoizedState=iu(1|r,u,C,m)}function If(t,r){return ju(8390656,8,t,r)}function qh(t,r){return Uu(2048,8,t,r)}function Of(t,r){return Uu(4,2,t,r)}function Df(t,r){return Uu(4,4,t,r)}function Nf(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Ff(t,r,u){return u=u!=null?u.concat([t]):null,Uu(4,4,Nf.bind(null,r,t),u)}function Kh(){}function Gf(t,r){var u=rs();r=r===void 0?null:r;var m=u.memoizedState;return m!==null&&r!==null&&Hh(r,m[1])?m[0]:(u.memoizedState=[t,r],t)}function zf(t,r){var u=rs();r=r===void 0?null:r;var m=u.memoizedState;return m!==null&&r!==null&&Hh(r,m[1])?m[0]:(t=t(),u.memoizedState=[t,r],t)}function jf(t,r,u){return(Cn&21)===0?(t.baseState&&(t.baseState=!1,vr=!0),t.memoizedState=u):(Oi(u,r)||(u=ue(),Ue.lanes|=u,tl|=u,t.baseState=!0),r)}function j0(t,r){var u=ve;ve=u!==0&&4>u?u:4,t(!0);var m=Di.transition;Di.transition={};try{t(!1),r()}finally{ve=u,Di.transition=m}}function Uf(){return rs().memoizedState}function U0(t,r,u){var m=Ea(t);if(u={lane:m,action:u,hasEagerState:!1,eagerState:null,next:null},Hf(t))$f(r,u);else if(u=R(t,r,u,m),u!==null){var M=Yi();Ns(u,t,m,M),Vf(u,r,m)}}function H0(t,r,u){var m=Ea(t),M={lane:m,action:u,hasEagerState:!1,eagerState:null,next:null};if(Hf(t))$f(r,M);else{var C=t.alternate;if(t.lanes===0&&(C===null||C.lanes===0)&&(C=r.lastRenderedReducer,C!==null))try{var D=r.lastRenderedState,Q=C(D,u);if(M.hasEagerState=!0,M.eagerState=Q,Oi(Q,D)){var rt=r.interleaved;rt===null?(M.next=M,Et(r)):(M.next=rt.next,rt.next=M),r.interleaved=M;return}}catch{}finally{}u=R(t,r,M,m),u!==null&&(M=Yi(),Ns(u,t,m,M),Vf(u,r,m))}}function Hf(t){var r=t.alternate;return t===Ue||r!==null&&r===Ue}function $f(t,r){tu=zu=!0;var u=t.pending;u===null?r.next=r:(r.next=u.next,u.next=r),t.pending=r}function Vf(t,r,u){if((u&4194240)!==0){var m=r.lanes;m&=t.pendingLanes,u|=m,r.lanes=u,we(t,u)}}var Hu={readContext:wt,useCallback:Ni,useContext:Ni,useEffect:Ni,useImperativeHandle:Ni,useInsertionEffect:Ni,useLayoutEffect:Ni,useMemo:Ni,useReducer:Ni,useRef:Ni,useState:Ni,useDebugValue:Ni,useDeferredValue:Ni,useTransition:Ni,useMutableSource:Ni,useSyncExternalStore:Ni,useId:Ni,unstable_isNewReconciler:!1},$0={readContext:wt,useCallback:function(t,r){return fo().memoizedState=[t,r===void 0?null:r],t},useContext:wt,useEffect:If,useImperativeHandle:function(t,r,u){return u=u!=null?u.concat([t]):null,ju(4194308,4,Nf.bind(null,r,t),u)},useLayoutEffect:function(t,r){return ju(4194308,4,t,r)},useInsertionEffect:function(t,r){return ju(4,2,t,r)},useMemo:function(t,r){var u=fo();return r=r===void 0?null:r,t=t(),u.memoizedState=[t,r],t},useReducer:function(t,r,u){var m=fo();return r=u!==void 0?u(r):r,m.memoizedState=m.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},m.queue=t,t=t.dispatch=U0.bind(null,Ue,t),[m.memoizedState,t]},useRef:function(t){var r=fo();return t={current:t},r.memoizedState=t},useState:Tf,useDebugValue:Kh,useDeferredValue:function(t){return fo().memoizedState=t},useTransition:function(){var t=Tf(!1),r=t[0];return t=j0.bind(null,t[1]),fo().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,u){var m=Ue,M=fo();if(wn){if(u===void 0)throw Error(o(407));u=u()}else{if(u=r(),_i===null)throw Error(o(349));(Cn&30)!==0||Sf(m,r,u)}M.memoizedState=u;var C={value:u,getSnapshot:r};return M.queue=C,If(Pf.bind(null,m,C,t),[t]),m.flags|=2048,iu(9,kf.bind(null,m,C,u,r),void 0,null),u},useId:function(){var t=fo(),r=_i.identifierPrefix;if(wn){var u=Rs,m=Ts;u=(m&~(1<<32-De(m)-1)).toString(32)+u,r=":"+r+"R"+u,u=eu++,0<u&&(r+="H"+u.toString(32)),r+=":"}else u=z0++,r=":"+r+"r"+u.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},V0={readContext:wt,useCallback:Gf,useContext:wt,useEffect:qh,useImperativeHandle:Ff,useInsertionEffect:Of,useLayoutEffect:Df,useMemo:zf,useReducer:Wh,useRef:Rf,useState:function(){return Wh(nu)},useDebugValue:Kh,useDeferredValue:function(t){var r=rs();return jf(r,ai.memoizedState,t)},useTransition:function(){var t=Wh(nu)[0],r=rs().memoizedState;return[t,r]},useMutableSource:Cf,useSyncExternalStore:bf,useId:Uf,unstable_isNewReconciler:!1},W0={readContext:wt,useCallback:Gf,useContext:wt,useEffect:qh,useImperativeHandle:Ff,useInsertionEffect:Of,useLayoutEffect:Df,useMemo:zf,useReducer:Zh,useRef:Rf,useState:function(){return Zh(nu)},useDebugValue:Kh,useDeferredValue:function(t){var r=rs();return ai===null?r.memoizedState=t:jf(r,ai.memoizedState,t)},useTransition:function(){var t=Zh(nu)[0],r=rs().memoizedState;return[t,r]},useMutableSource:Cf,useSyncExternalStore:bf,useId:Uf,unstable_isNewReconciler:!1};function Is(t,r){if(t&&t.defaultProps){r=ct({},r),t=t.defaultProps;for(var u in t)r[u]===void 0&&(r[u]=t[u]);return r}return r}function Jh(t,r,u,m){r=t.memoizedState,u=u(m,r),u=u==null?r:ct({},r,u),t.memoizedState=u,t.lanes===0&&(t.updateQueue.baseState=u)}var $u={isMounted:function(t){return(t=t._reactInternals)?ir(t)===t:!1},enqueueSetState:function(t,r,u){t=t._reactInternals;var m=Yi(),M=Ea(t),C=H(m,M);C.payload=r,u!=null&&(C.callback=u),r=nt(t,C,M),r!==null&&(Ns(r,t,M,m),it(r,t,M))},enqueueReplaceState:function(t,r,u){t=t._reactInternals;var m=Yi(),M=Ea(t),C=H(m,M);C.tag=1,C.payload=r,u!=null&&(C.callback=u),r=nt(t,C,M),r!==null&&(Ns(r,t,M,m),it(r,t,M))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var u=Yi(),m=Ea(t),M=H(u,m);M.tag=2,r!=null&&(M.callback=r),r=nt(t,M,m),r!==null&&(Ns(r,t,m,u),it(r,t,m))}};function Wf(t,r,u,m,M,C,D){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(m,C,D):r.prototype&&r.prototype.isPureReactComponent?!ur(u,m)||!ur(M,C):!0}function Zf(t,r,u){var m=!1,M=uo,C=r.contextType;return typeof C=="object"&&C!==null?C=wt(C):(M=si(r)?Oo:Bn.current,m=r.contextTypes,C=(m=m!=null)?ma(t,M):uo),r=new r(u,C),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=$u,t.stateNode=r,r._reactInternals=t,m&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=M,t.__reactInternalMemoizedMaskedChildContext=C),r}function qf(t,r,u,m){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(u,m),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(u,m),r.state!==t&&$u.enqueueReplaceState(r,r.state,null)}function Xh(t,r,u,m){var M=t.stateNode;M.props=u,M.state=t.memoizedState,M.refs={},j(t);var C=r.contextType;typeof C=="object"&&C!==null?M.context=wt(C):(C=si(r)?Oo:Bn.current,M.context=ma(t,C)),M.state=t.memoizedState,C=r.getDerivedStateFromProps,typeof C=="function"&&(Jh(t,r,C,u),M.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof M.getSnapshotBeforeUpdate=="function"||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(r=M.state,typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount(),r!==M.state&&$u.enqueueReplaceState(M,M.state,null),dt(t,u,M,m),M.state=t.memoizedState),typeof M.componentDidMount=="function"&&(t.flags|=4194308)}function Ll(t,r){try{var u="",m=r;do u+=se(m),m=m.return;while(m);var M=u}catch(C){M=`
Error generating stack: `+C.message+`
`+C.stack}return{value:t,source:r,stack:M,digest:null}}function Yh(t,r,u){return{value:t,source:null,stack:u??null,digest:r??null}}function Qh(t,r){try{console.error(r.value)}catch(u){setTimeout(function(){throw u})}}var Z0=typeof WeakMap=="function"?WeakMap:Map;function Kf(t,r,u){u=H(-1,u),u.tag=3,u.payload={element:null};var m=r.value;return u.callback=function(){Xu||(Xu=!0,pc=m),Qh(t,r)},u}function Jf(t,r,u){u=H(-1,u),u.tag=3;var m=t.type.getDerivedStateFromError;if(typeof m=="function"){var M=r.value;u.payload=function(){return m(M)},u.callback=function(){Qh(t,r)}}var C=t.stateNode;return C!==null&&typeof C.componentDidCatch=="function"&&(u.callback=function(){Qh(t,r),typeof m!="function"&&(wa===null?wa=new Set([this]):wa.add(this));var D=r.stack;this.componentDidCatch(r.value,{componentStack:D!==null?D:""})}),u}function Xf(t,r,u){var m=t.pingCache;if(m===null){m=t.pingCache=new Z0;var M=new Set;m.set(r,M)}else M=m.get(r),M===void 0&&(M=new Set,m.set(r,M));M.has(u)||(M.add(u),t=ag.bind(null,t,r,u),r.then(t,t))}function Yf(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function Qf(t,r,u,m,M){return(t.mode&1)===0?(t===r?t.flags|=65536:(t.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(r=H(-1,1),r.tag=2,nt(u,r,1))),u.lanes|=1),t):(t.flags|=65536,t.lanes=M,t)}var q0=Ut.ReactCurrentOwner,vr=!1;function Xi(t,r,u,m){r.child=t===null?yt(r,null,u,m):W(r,t.child,u,m)}function td(t,r,u,m,M){u=u.render;var C=r.ref;return ot(r,M),m=$h(t,r,u,m,C,M),u=Vh(),t!==null&&!vr?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~M,Fo(t,r,M)):(wn&&u&&is(r),r.flags|=1,Xi(t,r,m,M),r.child)}function ed(t,r,u,m,M){if(t===null){var C=u.type;return typeof C=="function"&&!wc(C)&&C.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(r.tag=15,r.type=C,nd(t,r,C,m,M)):(t=ih(u.type,null,m,r,r.mode,M),t.ref=r.ref,t.return=r,r.child=t)}if(C=t.child,(t.lanes&M)===0){var D=C.memoizedProps;if(u=u.compare,u=u!==null?u:ur,u(D,m)&&t.ref===r.ref)return Fo(t,r,M)}return r.flags|=1,t=Ca(C,m),t.ref=r.ref,t.return=r,r.child=t}function nd(t,r,u,m,M){if(t!==null){var C=t.memoizedProps;if(ur(C,m)&&t.ref===r.ref)if(vr=!1,r.pendingProps=m=C,(t.lanes&M)!==0)(t.flags&131072)!==0&&(vr=!0);else return r.lanes=t.lanes,Fo(t,r,M)}return tc(t,r,u,m,M)}function id(t,r,u){var m=r.pendingProps,M=m.children,C=t!==null?t.memoizedState:null;if(m.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},dn(bl,zr),zr|=u;else{if((u&1073741824)===0)return t=C!==null?C.baseLanes|u:u,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,dn(bl,zr),zr|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=C!==null?C.baseLanes:u,dn(bl,zr),zr|=m}else C!==null?(m=C.baseLanes|u,r.memoizedState=null):m=u,dn(bl,zr),zr|=m;return Xi(t,r,M,u),r.child}function rd(t,r){var u=r.ref;(t===null&&u!==null||t!==null&&t.ref!==u)&&(r.flags|=512,r.flags|=2097152)}function tc(t,r,u,m,M){var C=si(u)?Oo:Bn.current;return C=ma(r,C),ot(r,M),u=$h(t,r,u,m,C,M),m=Vh(),t!==null&&!vr?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~M,Fo(t,r,M)):(wn&&m&&is(r),r.flags|=1,Xi(t,r,u,M),r.child)}function sd(t,r,u,m,M){if(si(u)){var C=!0;vl(r)}else C=!1;if(ot(r,M),r.stateNode===null)Wu(t,r),Zf(r,u,m),Xh(r,u,m,M),m=!0;else if(t===null){var D=r.stateNode,Q=r.memoizedProps;D.props=Q;var rt=D.context,kt=u.contextType;typeof kt=="object"&&kt!==null?kt=wt(kt):(kt=si(u)?Oo:Bn.current,kt=ma(r,kt));var Xt=u.getDerivedStateFromProps,Yt=typeof Xt=="function"||typeof D.getSnapshotBeforeUpdate=="function";Yt||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(Q!==m||rt!==kt)&&qf(r,D,m,kt),U=!1;var Wt=r.memoizedState;D.state=Wt,dt(r,m,D,M),rt=r.memoizedState,Q!==m||Wt!==rt||ri.current||U?(typeof Xt=="function"&&(Jh(r,u,Xt,m),rt=r.memoizedState),(Q=U||Wf(r,u,Q,m,Wt,rt,kt))?(Yt||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(r.flags|=4194308)):(typeof D.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=m,r.memoizedState=rt),D.props=m,D.state=rt,D.context=kt,m=Q):(typeof D.componentDidMount=="function"&&(r.flags|=4194308),m=!1)}else{D=r.stateNode,$(t,r),Q=r.memoizedProps,kt=r.type===r.elementType?Q:Is(r.type,Q),D.props=kt,Yt=r.pendingProps,Wt=D.context,rt=u.contextType,typeof rt=="object"&&rt!==null?rt=wt(rt):(rt=si(u)?Oo:Bn.current,rt=ma(r,rt));var pe=u.getDerivedStateFromProps;(Xt=typeof pe=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(Q!==Yt||Wt!==rt)&&qf(r,D,m,rt),U=!1,Wt=r.memoizedState,D.state=Wt,dt(r,m,D,M);var xe=r.memoizedState;Q!==Yt||Wt!==xe||ri.current||U?(typeof pe=="function"&&(Jh(r,u,pe,m),xe=r.memoizedState),(kt=U||Wf(r,u,kt,m,Wt,xe,rt)||!1)?(Xt||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(m,xe,rt),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(m,xe,rt)),typeof D.componentDidUpdate=="function"&&(r.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof D.componentDidUpdate!="function"||Q===t.memoizedProps&&Wt===t.memoizedState||(r.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||Q===t.memoizedProps&&Wt===t.memoizedState||(r.flags|=1024),r.memoizedProps=m,r.memoizedState=xe),D.props=m,D.state=xe,D.context=rt,m=kt):(typeof D.componentDidUpdate!="function"||Q===t.memoizedProps&&Wt===t.memoizedState||(r.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||Q===t.memoizedProps&&Wt===t.memoizedState||(r.flags|=1024),m=!1)}return ec(t,r,u,m,C,M)}function ec(t,r,u,m,M,C){rd(t,r);var D=(r.flags&128)!==0;if(!m&&!D)return M&&Kl(r,u,!1),Fo(t,r,C);m=r.stateNode,q0.current=r;var Q=D&&typeof u.getDerivedStateFromError!="function"?null:m.render();return r.flags|=1,t!==null&&D?(r.child=W(r,t.child,null,C),r.child=W(r,null,Q,C)):Xi(t,r,Q,C),r.memoizedState=m.state,M&&Kl(r,u,!0),r.child}function od(t){var r=t.stateNode;r.pendingContext?ql(t,r.pendingContext,r.pendingContext!==r.context):r.context&&ql(t,r.context,!1),rn(t,r.containerInfo)}function ad(t,r,u,m,M){return _(),w(M),r.flags|=256,Xi(t,r,u,m),r.child}var nc={dehydrated:null,treeContext:null,retryLane:0};function ic(t){return{baseLanes:t,cachePool:null,transitions:null}}function ld(t,r,u){var m=r.pendingProps,M=pn.current,C=!1,D=(r.flags&128)!==0,Q;if((Q=D)||(Q=t!==null&&t.memoizedState===null?!1:(M&2)!==0),Q?(C=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(M|=1),dn(pn,M&1),t===null)return s(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((r.mode&1)===0?r.lanes=1:t.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(D=m.children,t=m.fallback,C?(m=r.mode,C=r.child,D={mode:"hidden",children:D},(m&1)===0&&C!==null?(C.childLanes=0,C.pendingProps=D):C=rh(D,m,0,null),t=rl(t,m,u,null),C.return=r,t.return=r,C.sibling=t,r.child=C,r.child.memoizedState=ic(u),r.memoizedState=nc,t):rc(r,D));if(M=t.memoizedState,M!==null&&(Q=M.dehydrated,Q!==null))return K0(t,r,D,m,Q,M,u);if(C){C=m.fallback,D=r.mode,M=t.child,Q=M.sibling;var rt={mode:"hidden",children:m.children};return(D&1)===0&&r.child!==M?(m=r.child,m.childLanes=0,m.pendingProps=rt,r.deletions=null):(m=Ca(M,rt),m.subtreeFlags=M.subtreeFlags&14680064),Q!==null?C=Ca(Q,C):(C=rl(C,D,u,null),C.flags|=2),C.return=r,m.return=r,m.sibling=C,r.child=m,m=C,C=r.child,D=t.child.memoizedState,D=D===null?ic(u):{baseLanes:D.baseLanes|u,cachePool:null,transitions:D.transitions},C.memoizedState=D,C.childLanes=t.childLanes&~u,r.memoizedState=nc,m}return C=t.child,t=C.sibling,m=Ca(C,{mode:"visible",children:m.children}),(r.mode&1)===0&&(m.lanes=u),m.return=r,m.sibling=null,t!==null&&(u=r.deletions,u===null?(r.deletions=[t],r.flags|=16):u.push(t)),r.child=m,r.memoizedState=null,m}function rc(t,r){return r=rh({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function Vu(t,r,u,m){return m!==null&&w(m),W(r,t.child,null,u),t=rc(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function K0(t,r,u,m,M,C,D){if(u)return r.flags&256?(r.flags&=-257,m=Yh(Error(o(422))),Vu(t,r,D,m)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(C=m.fallback,M=r.mode,m=rh({mode:"visible",children:m.children},M,0,null),C=rl(C,M,D,null),C.flags|=2,m.return=r,C.return=r,m.sibling=C,r.child=m,(r.mode&1)!==0&&W(r,t.child,null,D),r.child.memoizedState=ic(D),r.memoizedState=nc,C);if((r.mode&1)===0)return Vu(t,r,D,null);if(M.data==="$!"){if(m=M.nextSibling&&M.nextSibling.dataset,m)var Q=m.dgst;return m=Q,C=Error(o(419)),m=Yh(C,m,void 0),Vu(t,r,D,m)}if(Q=(D&t.childLanes)!==0,vr||Q){if(m=_i,m!==null){switch(D&-D){case 4:M=2;break;case 16:M=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:M=32;break;case 536870912:M=268435456;break;default:M=0}M=(M&(m.suspendedLanes|D))!==0?0:M,M!==0&&M!==C.retryLane&&(C.retryLane=M,F(t,M),Ns(m,t,M,-1))}return xc(),m=Yh(Error(o(421))),Vu(t,r,D,m)}return M.data==="$?"?(r.flags|=128,r.child=t.child,r=lg.bind(null,t),M._reactRetry=r,null):(t=C.treeContext,bi=qi(M.nextSibling),Ji=r,wn=!0,Gr=null,t!==null&&(Ki[oi++]=Ts,Ki[oi++]=Rs,Ki[oi++]=ns,Ts=t.id,Rs=t.overflow,ns=r),r=rc(r,m.children),r.flags|=4096,r)}function ud(t,r,u){t.lanes|=r;var m=t.alternate;m!==null&&(m.lanes|=r),et(t.return,r,u)}function sc(t,r,u,m,M){var C=t.memoizedState;C===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:m,tail:u,tailMode:M}:(C.isBackwards=r,C.rendering=null,C.renderingStartTime=0,C.last=m,C.tail=u,C.tailMode=M)}function hd(t,r,u){var m=r.pendingProps,M=m.revealOrder,C=m.tail;if(Xi(t,r,m.children,u),m=pn.current,(m&2)!==0)m=m&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)t:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ud(t,u,r);else if(t.tag===19)ud(t,u,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break t;for(;t.sibling===null;){if(t.return===null||t.return===r)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}m&=1}if(dn(pn,m),(r.mode&1)===0)r.memoizedState=null;else switch(M){case"forwards":for(u=r.child,M=null;u!==null;)t=u.alternate,t!==null&&va(t)===null&&(M=u),u=u.sibling;u=M,u===null?(M=r.child,r.child=null):(M=u.sibling,u.sibling=null),sc(r,!1,M,u,C);break;case"backwards":for(u=null,M=r.child,r.child=null;M!==null;){if(t=M.alternate,t!==null&&va(t)===null){r.child=M;break}t=M.sibling,M.sibling=u,u=M,M=t}sc(r,!0,u,null,C);break;case"together":sc(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Wu(t,r){(r.mode&1)===0&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function Fo(t,r,u){if(t!==null&&(r.dependencies=t.dependencies),tl|=r.lanes,(u&r.childLanes)===0)return null;if(t!==null&&r.child!==t.child)throw Error(o(153));if(r.child!==null){for(t=r.child,u=Ca(t,t.pendingProps),r.child=u,u.return=r;t.sibling!==null;)t=t.sibling,u=u.sibling=Ca(t,t.pendingProps),u.return=r;u.sibling=null}return r.child}function J0(t,r,u){switch(r.tag){case 3:od(r),_();break;case 5:an(r);break;case 1:si(r.type)&&vl(r);break;case 4:rn(r,r.stateNode.containerInfo);break;case 10:var m=r.type._context,M=r.memoizedProps.value;dn(Lt,m._currentValue),m._currentValue=M;break;case 13:if(m=r.memoizedState,m!==null)return m.dehydrated!==null?(dn(pn,pn.current&1),r.flags|=128,null):(u&r.child.childLanes)!==0?ld(t,r,u):(dn(pn,pn.current&1),t=Fo(t,r,u),t!==null?t.sibling:null);dn(pn,pn.current&1);break;case 19:if(m=(u&r.childLanes)!==0,(t.flags&128)!==0){if(m)return hd(t,r,u);r.flags|=128}if(M=r.memoizedState,M!==null&&(M.rendering=null,M.tail=null,M.lastEffect=null),dn(pn,pn.current),m)break;return null;case 22:case 23:return r.lanes=0,id(t,r,u)}return Fo(t,r,u)}var cd,oc,fd,dd;cd=function(t,r){for(var u=r.child;u!==null;){if(u.tag===5||u.tag===6)t.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===r)break;for(;u.sibling===null;){if(u.return===null||u.return===r)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},oc=function(){},fd=function(t,r,u,m){var M=t.memoizedProps;if(M!==m){t=r.stateNode,Je(oe.current);var C=null;switch(u){case"input":M=js(t,M),m=js(t,m),C=[];break;case"select":M=ct({},M,{value:void 0}),m=ct({},m,{value:void 0}),C=[];break;case"textarea":M=vi(t,M),m=vi(t,m),C=[];break;default:typeof M.onClick!="function"&&typeof m.onClick=="function"&&(t.onclick=Ft)}fs(u,m);var D;u=null;for(kt in M)if(!m.hasOwnProperty(kt)&&M.hasOwnProperty(kt)&&M[kt]!=null)if(kt==="style"){var Q=M[kt];for(D in Q)Q.hasOwnProperty(D)&&(u||(u={}),u[D]="")}else kt!=="dangerouslySetInnerHTML"&&kt!=="children"&&kt!=="suppressContentEditableWarning"&&kt!=="suppressHydrationWarning"&&kt!=="autoFocus"&&(f.hasOwnProperty(kt)?C||(C=[]):(C=C||[]).push(kt,null));for(kt in m){var rt=m[kt];if(Q=M!=null?M[kt]:void 0,m.hasOwnProperty(kt)&&rt!==Q&&(rt!=null||Q!=null))if(kt==="style")if(Q){for(D in Q)!Q.hasOwnProperty(D)||rt&&rt.hasOwnProperty(D)||(u||(u={}),u[D]="");for(D in rt)rt.hasOwnProperty(D)&&Q[D]!==rt[D]&&(u||(u={}),u[D]=rt[D])}else u||(C||(C=[]),C.push(kt,u)),u=rt;else kt==="dangerouslySetInnerHTML"?(rt=rt?rt.__html:void 0,Q=Q?Q.__html:void 0,rt!=null&&Q!==rt&&(C=C||[]).push(kt,rt)):kt==="children"?typeof rt!="string"&&typeof rt!="number"||(C=C||[]).push(kt,""+rt):kt!=="suppressContentEditableWarning"&&kt!=="suppressHydrationWarning"&&(f.hasOwnProperty(kt)?(rt!=null&&kt==="onScroll"&&Ge("scroll",t),C||Q===rt||(C=[])):(C=C||[]).push(kt,rt))}u&&(C=C||[]).push("style",u);var kt=C;(r.updateQueue=kt)&&(r.flags|=4)}},dd=function(t,r,u,m){u!==m&&(r.flags|=4)};function ru(t,r){if(!wn)switch(t.tailMode){case"hidden":r=t.tail;for(var u=null;r!==null;)r.alternate!==null&&(u=r),r=r.sibling;u===null?t.tail=null:u.sibling=null;break;case"collapsed":u=t.tail;for(var m=null;u!==null;)u.alternate!==null&&(m=u),u=u.sibling;m===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:m.sibling=null}}function Fi(t){var r=t.alternate!==null&&t.alternate.child===t.child,u=0,m=0;if(r)for(var M=t.child;M!==null;)u|=M.lanes|M.childLanes,m|=M.subtreeFlags&14680064,m|=M.flags&14680064,M.return=t,M=M.sibling;else for(M=t.child;M!==null;)u|=M.lanes|M.childLanes,m|=M.subtreeFlags,m|=M.flags,M.return=t,M=M.sibling;return t.subtreeFlags|=m,t.childLanes=u,r}function X0(t,r,u){var m=r.pendingProps;switch(Yl(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fi(r),null;case 1:return si(r.type)&&Do(),Fi(r),null;case 3:return m=r.stateNode,Ze(),yn(ri),yn(Bn),yr(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(t===null||t.child===null)&&(h(r)?r.flags|=4:t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Gr!==null&&(_c(Gr),Gr=null))),oc(t,r),Fi(r),null;case 5:Kn(r);var M=Je(Ee.current);if(u=r.type,t!==null&&r.stateNode!=null)fd(t,r,u,m,M),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!m){if(r.stateNode===null)throw Error(o(166));return Fi(r),null}if(t=Je(oe.current),h(r)){m=r.stateNode,u=r.type;var C=r.memoizedProps;switch(m[gr]=r,m[lo]=C,t=(r.mode&1)!==0,u){case"dialog":Ge("cancel",m),Ge("close",m);break;case"iframe":case"object":case"embed":Ge("load",m);break;case"video":case"audio":for(M=0;M<Ae.length;M++)Ge(Ae[M],m);break;case"source":Ge("error",m);break;case"img":case"image":case"link":Ge("error",m),Ge("load",m);break;case"details":Ge("toggle",m);break;case"input":Ho(m,C),Ge("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!C.multiple},Ge("invalid",m);break;case"textarea":gn(m,C),Ge("invalid",m)}fs(u,C),M=null;for(var D in C)if(C.hasOwnProperty(D)){var Q=C[D];D==="children"?typeof Q=="string"?m.textContent!==Q&&(C.suppressHydrationWarning!==!0&&St(m.textContent,Q,t),M=["children",Q]):typeof Q=="number"&&m.textContent!==""+Q&&(C.suppressHydrationWarning!==!0&&St(m.textContent,Q,t),M=["children",""+Q]):f.hasOwnProperty(D)&&Q!=null&&D==="onScroll"&&Ge("scroll",m)}switch(u){case"input":Bi(m),Vn(m,C,!0);break;case"textarea":Bi(m),ln(m);break;case"select":case"option":break;default:typeof C.onClick=="function"&&(m.onclick=Ft)}m=M,r.updateQueue=m,m!==null&&(r.flags|=4)}else{D=M.nodeType===9?M:M.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Us(u)),t==="http://www.w3.org/1999/xhtml"?u==="script"?(t=D.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof m.is=="string"?t=D.createElement(u,{is:m.is}):(t=D.createElement(u),u==="select"&&(D=t,m.multiple?D.multiple=!0:m.size&&(D.size=m.size))):t=D.createElementNS(t,u),t[gr]=r,t[lo]=m,cd(t,r,!1,!1),r.stateNode=t;t:{switch(D=kn(u,m),u){case"dialog":Ge("cancel",t),Ge("close",t),M=m;break;case"iframe":case"object":case"embed":Ge("load",t),M=m;break;case"video":case"audio":for(M=0;M<Ae.length;M++)Ge(Ae[M],t);M=m;break;case"source":Ge("error",t),M=m;break;case"img":case"image":case"link":Ge("error",t),Ge("load",t),M=m;break;case"details":Ge("toggle",t),M=m;break;case"input":Ho(t,m),M=js(t,m),Ge("invalid",t);break;case"option":M=m;break;case"select":t._wrapperState={wasMultiple:!!m.multiple},M=ct({},m,{value:void 0}),Ge("invalid",t);break;case"textarea":gn(t,m),M=vi(t,m),Ge("invalid",t);break;default:M=m}fs(u,M),Q=M;for(C in Q)if(Q.hasOwnProperty(C)){var rt=Q[C];C==="style"?nr(t,rt):C==="dangerouslySetInnerHTML"?(rt=rt?rt.__html:void 0,rt!=null&&hi(t,rt)):C==="children"?typeof rt=="string"?(u!=="textarea"||rt!=="")&&kr(t,rt):typeof rt=="number"&&kr(t,""+rt):C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&C!=="autoFocus"&&(f.hasOwnProperty(C)?rt!=null&&C==="onScroll"&&Ge("scroll",t):rt!=null&&Pt(t,C,rt,D))}switch(u){case"input":Bi(t),Vn(t,m,!1);break;case"textarea":Bi(t),ln(t);break;case"option":m.value!=null&&t.setAttribute("value",""+Re(m.value));break;case"select":t.multiple=!!m.multiple,C=m.value,C!=null?Sr(t,!!m.multiple,C,!1):m.defaultValue!=null&&Sr(t,!!m.multiple,m.defaultValue,!0);break;default:typeof M.onClick=="function"&&(t.onclick=Ft)}switch(u){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break t;case"img":m=!0;break t;default:m=!1}}m&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Fi(r),null;case 6:if(t&&r.stateNode!=null)dd(t,r,t.memoizedProps,m);else{if(typeof m!="string"&&r.stateNode===null)throw Error(o(166));if(u=Je(Ee.current),Je(oe.current),h(r)){if(m=r.stateNode,u=r.memoizedProps,m[gr]=r,(C=m.nodeValue!==u)&&(t=Ji,t!==null))switch(t.tag){case 3:St(m.nodeValue,u,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&St(m.nodeValue,u,(t.mode&1)!==0)}C&&(r.flags|=4)}else m=(u.nodeType===9?u:u.ownerDocument).createTextNode(m),m[gr]=r,r.stateNode=m}return Fi(r),null;case 13:if(yn(pn),m=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(wn&&bi!==null&&(r.mode&1)!==0&&(r.flags&128)===0)d(),_(),r.flags|=98560,C=!1;else if(C=h(r),m!==null&&m.dehydrated!==null){if(t===null){if(!C)throw Error(o(318));if(C=r.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(o(317));C[gr]=r}else _(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Fi(r),C=!1}else Gr!==null&&(_c(Gr),Gr=null),C=!0;if(!C)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=u,r):(m=m!==null,m!==(t!==null&&t.memoizedState!==null)&&m&&(r.child.flags|=8192,(r.mode&1)!==0&&(t===null||(pn.current&1)!==0?li===0&&(li=3):xc())),r.updateQueue!==null&&(r.flags|=4),Fi(r),null);case 4:return Ze(),oc(t,r),t===null&&Gn(r.stateNode.containerInfo),Fi(r),null;case 10:return J(r.type._context),Fi(r),null;case 17:return si(r.type)&&Do(),Fi(r),null;case 19:if(yn(pn),C=r.memoizedState,C===null)return Fi(r),null;if(m=(r.flags&128)!==0,D=C.rendering,D===null)if(m)ru(C,!1);else{if(li!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(D=va(t),D!==null){for(r.flags|=128,ru(C,!1),m=D.updateQueue,m!==null&&(r.updateQueue=m,r.flags|=4),r.subtreeFlags=0,m=u,u=r.child;u!==null;)C=u,t=m,C.flags&=14680066,D=C.alternate,D===null?(C.childLanes=0,C.lanes=t,C.child=null,C.subtreeFlags=0,C.memoizedProps=null,C.memoizedState=null,C.updateQueue=null,C.dependencies=null,C.stateNode=null):(C.childLanes=D.childLanes,C.lanes=D.lanes,C.child=D.child,C.subtreeFlags=0,C.deletions=null,C.memoizedProps=D.memoizedProps,C.memoizedState=D.memoizedState,C.updateQueue=D.updateQueue,C.type=D.type,t=D.dependencies,C.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),u=u.sibling;return dn(pn,pn.current&1|2),r.child}t=t.sibling}C.tail!==null&&mn()>Sl&&(r.flags|=128,m=!0,ru(C,!1),r.lanes=4194304)}else{if(!m)if(t=va(D),t!==null){if(r.flags|=128,m=!0,u=t.updateQueue,u!==null&&(r.updateQueue=u,r.flags|=4),ru(C,!0),C.tail===null&&C.tailMode==="hidden"&&!D.alternate&&!wn)return Fi(r),null}else 2*mn()-C.renderingStartTime>Sl&&u!==1073741824&&(r.flags|=128,m=!0,ru(C,!1),r.lanes=4194304);C.isBackwards?(D.sibling=r.child,r.child=D):(u=C.last,u!==null?u.sibling=D:r.child=D,C.last=D)}return C.tail!==null?(r=C.tail,C.rendering=r,C.tail=r.sibling,C.renderingStartTime=mn(),r.sibling=null,u=pn.current,dn(pn,m?u&1|2:u&1),r):(Fi(r),null);case 22:case 23:return vc(),m=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==m&&(r.flags|=8192),m&&(r.mode&1)!==0?(zr&1073741824)!==0&&(Fi(r),r.subtreeFlags&6&&(r.flags|=8192)):Fi(r),null;case 24:return null;case 25:return null}throw Error(o(156,r.tag))}function Y0(t,r){switch(Yl(r),r.tag){case 1:return si(r.type)&&Do(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Ze(),yn(ri),yn(Bn),yr(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 5:return Kn(r),null;case 13:if(yn(pn),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(o(340));_()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return yn(pn),null;case 4:return Ze(),null;case 10:return J(r.type._context),null;case 22:case 23:return vc(),null;case 24:return null;default:return null}}var Zu=!1,Gi=!1,Q0=typeof WeakSet=="function"?WeakSet:Set,_e=null;function Cl(t,r){var u=t.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(m){Tn(t,r,m)}else u.current=null}function ac(t,r,u){try{u()}catch(m){Tn(t,r,m)}}var pd=!1;function tg(t,r){if(ae=Ir,t=Ka(),Ja(t)){if("selectionStart"in t)var u={start:t.selectionStart,end:t.selectionEnd};else t:{u=(u=t.ownerDocument)&&u.defaultView||window;var m=u.getSelection&&u.getSelection();if(m&&m.rangeCount!==0){u=m.anchorNode;var M=m.anchorOffset,C=m.focusNode;m=m.focusOffset;try{u.nodeType,C.nodeType}catch{u=null;break t}var D=0,Q=-1,rt=-1,kt=0,Xt=0,Yt=t,Wt=null;e:for(;;){for(var pe;Yt!==u||M!==0&&Yt.nodeType!==3||(Q=D+M),Yt!==C||m!==0&&Yt.nodeType!==3||(rt=D+m),Yt.nodeType===3&&(D+=Yt.nodeValue.length),(pe=Yt.firstChild)!==null;)Wt=Yt,Yt=pe;for(;;){if(Yt===t)break e;if(Wt===u&&++kt===M&&(Q=D),Wt===C&&++Xt===m&&(rt=D),(pe=Yt.nextSibling)!==null)break;Yt=Wt,Wt=Yt.parentNode}Yt=pe}u=Q===-1||rt===-1?null:{start:Q,end:rt}}else u=null}u=u||{start:0,end:0}}else u=null;for(Se={focusedElem:t,selectionRange:u},Ir=!1,_e=r;_e!==null;)if(r=_e,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,_e=t;else for(;_e!==null;){r=_e;try{var xe=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(xe!==null){var Me=xe.memoizedProps,Un=xe.memoizedState,xt=r.stateNode,at=xt.getSnapshotBeforeUpdate(r.elementType===r.type?Me:Is(r.type,Me),Un);xt.__reactInternalSnapshotBeforeUpdate=at}break;case 3:var Ct=r.stateNode.containerInfo;Ct.nodeType===1?Ct.textContent="":Ct.nodeType===9&&Ct.documentElement&&Ct.removeChild(Ct.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(ne){Tn(r,r.return,ne)}if(t=r.sibling,t!==null){t.return=r.return,_e=t;break}_e=r.return}return xe=pd,pd=!1,xe}function su(t,r,u){var m=r.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var M=m=m.next;do{if((M.tag&t)===t){var C=M.destroy;M.destroy=void 0,C!==void 0&&ac(r,u,C)}M=M.next}while(M!==m)}}function qu(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var u=r=r.next;do{if((u.tag&t)===t){var m=u.create;u.destroy=m()}u=u.next}while(u!==r)}}function lc(t){var r=t.ref;if(r!==null){var u=t.stateNode;switch(t.tag){case 5:t=u;break;default:t=u}typeof r=="function"?r(t):r.current=t}}function gd(t){var r=t.alternate;r!==null&&(t.alternate=null,gd(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&(delete r[gr],delete r[lo],delete r[Ps],delete r[Zl],delete r[mr])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function md(t){return t.tag===5||t.tag===3||t.tag===4}function _d(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||md(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function uc(t,r,u){var m=t.tag;if(m===5||m===6)t=t.stateNode,r?u.nodeType===8?u.parentNode.insertBefore(t,r):u.insertBefore(t,r):(u.nodeType===8?(r=u.parentNode,r.insertBefore(t,u)):(r=u,r.appendChild(t)),u=u._reactRootContainer,u!=null||r.onclick!==null||(r.onclick=Ft));else if(m!==4&&(t=t.child,t!==null))for(uc(t,r,u),t=t.sibling;t!==null;)uc(t,r,u),t=t.sibling}function hc(t,r,u){var m=t.tag;if(m===5||m===6)t=t.stateNode,r?u.insertBefore(t,r):u.appendChild(t);else if(m!==4&&(t=t.child,t!==null))for(hc(t,r,u),t=t.sibling;t!==null;)hc(t,r,u),t=t.sibling}var Si=null,Os=!1;function xa(t,r,u){for(u=u.child;u!==null;)yd(t,r,u),u=u.sibling}function yd(t,r,u){if(xi&&typeof xi.onCommitFiberUnmount=="function")try{xi.onCommitFiberUnmount(xs,u)}catch{}switch(u.tag){case 5:Gi||Cl(u,r);case 6:var m=Si,M=Os;Si=null,xa(t,r,u),Si=m,Os=M,Si!==null&&(Os?(t=Si,u=u.stateNode,t.nodeType===8?t.parentNode.removeChild(u):t.removeChild(u)):Si.removeChild(u.stateNode));break;case 18:Si!==null&&(Os?(t=Si,u=u.stateNode,t.nodeType===8?Io(t.parentNode,u):t.nodeType===1&&Io(t,u),Ei(t)):Io(Si,u.stateNode));break;case 4:m=Si,M=Os,Si=u.stateNode.containerInfo,Os=!0,xa(t,r,u),Si=m,Os=M;break;case 0:case 11:case 14:case 15:if(!Gi&&(m=u.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){M=m=m.next;do{var C=M,D=C.destroy;C=C.tag,D!==void 0&&((C&2)!==0||(C&4)!==0)&&ac(u,r,D),M=M.next}while(M!==m)}xa(t,r,u);break;case 1:if(!Gi&&(Cl(u,r),m=u.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=u.memoizedProps,m.state=u.memoizedState,m.componentWillUnmount()}catch(Q){Tn(u,r,Q)}xa(t,r,u);break;case 21:xa(t,r,u);break;case 22:u.mode&1?(Gi=(m=Gi)||u.memoizedState!==null,xa(t,r,u),Gi=m):xa(t,r,u);break;default:xa(t,r,u)}}function vd(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var u=t.stateNode;u===null&&(u=t.stateNode=new Q0),r.forEach(function(m){var M=ug.bind(null,t,m);u.has(m)||(u.add(m),m.then(M,M))})}}function Ds(t,r){var u=r.deletions;if(u!==null)for(var m=0;m<u.length;m++){var M=u[m];try{var C=t,D=r,Q=D;t:for(;Q!==null;){switch(Q.tag){case 5:Si=Q.stateNode,Os=!1;break t;case 3:Si=Q.stateNode.containerInfo,Os=!0;break t;case 4:Si=Q.stateNode.containerInfo,Os=!0;break t}Q=Q.return}if(Si===null)throw Error(o(160));yd(C,D,M),Si=null,Os=!1;var rt=M.alternate;rt!==null&&(rt.return=null),M.return=null}catch(kt){Tn(M,r,kt)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)xd(r,t),r=r.sibling}function xd(t,r){var u=t.alternate,m=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ds(r,t),po(t),m&4){try{su(3,t,t.return),qu(3,t)}catch(Me){Tn(t,t.return,Me)}try{su(5,t,t.return)}catch(Me){Tn(t,t.return,Me)}}break;case 1:Ds(r,t),po(t),m&512&&u!==null&&Cl(u,u.return);break;case 5:if(Ds(r,t),po(t),m&512&&u!==null&&Cl(u,u.return),t.flags&32){var M=t.stateNode;try{kr(M,"")}catch(Me){Tn(t,t.return,Me)}}if(m&4&&(M=t.stateNode,M!=null)){var C=t.memoizedProps,D=u!==null?u.memoizedProps:C,Q=t.type,rt=t.updateQueue;if(t.updateQueue=null,rt!==null)try{Q==="input"&&C.type==="radio"&&C.name!=null&&Ti(M,C),kn(Q,D);var kt=kn(Q,C);for(D=0;D<rt.length;D+=2){var Xt=rt[D],Yt=rt[D+1];Xt==="style"?nr(M,Yt):Xt==="dangerouslySetInnerHTML"?hi(M,Yt):Xt==="children"?kr(M,Yt):Pt(M,Xt,Yt,kt)}switch(Q){case"input":Ur(M,C);break;case"textarea":$o(M,C);break;case"select":var Wt=M._wrapperState.wasMultiple;M._wrapperState.wasMultiple=!!C.multiple;var pe=C.value;pe!=null?Sr(M,!!C.multiple,pe,!1):Wt!==!!C.multiple&&(C.defaultValue!=null?Sr(M,!!C.multiple,C.defaultValue,!0):Sr(M,!!C.multiple,C.multiple?[]:"",!1))}M[lo]=C}catch(Me){Tn(t,t.return,Me)}}break;case 6:if(Ds(r,t),po(t),m&4){if(t.stateNode===null)throw Error(o(162));M=t.stateNode,C=t.memoizedProps;try{M.nodeValue=C}catch(Me){Tn(t,t.return,Me)}}break;case 3:if(Ds(r,t),po(t),m&4&&u!==null&&u.memoizedState.isDehydrated)try{Ei(r.containerInfo)}catch(Me){Tn(t,t.return,Me)}break;case 4:Ds(r,t),po(t);break;case 13:Ds(r,t),po(t),M=t.child,M.flags&8192&&(C=M.memoizedState!==null,M.stateNode.isHidden=C,!C||M.alternate!==null&&M.alternate.memoizedState!==null||(dc=mn())),m&4&&vd(t);break;case 22:if(Xt=u!==null&&u.memoizedState!==null,t.mode&1?(Gi=(kt=Gi)||Xt,Ds(r,t),Gi=kt):Ds(r,t),po(t),m&8192){if(kt=t.memoizedState!==null,(t.stateNode.isHidden=kt)&&!Xt&&(t.mode&1)!==0)for(_e=t,Xt=t.child;Xt!==null;){for(Yt=_e=Xt;_e!==null;){switch(Wt=_e,pe=Wt.child,Wt.tag){case 0:case 11:case 14:case 15:su(4,Wt,Wt.return);break;case 1:Cl(Wt,Wt.return);var xe=Wt.stateNode;if(typeof xe.componentWillUnmount=="function"){m=Wt,u=Wt.return;try{r=m,xe.props=r.memoizedProps,xe.state=r.memoizedState,xe.componentWillUnmount()}catch(Me){Tn(m,u,Me)}}break;case 5:Cl(Wt,Wt.return);break;case 22:if(Wt.memoizedState!==null){Ed(Yt);continue}}pe!==null?(pe.return=Wt,_e=pe):Ed(Yt)}Xt=Xt.sibling}t:for(Xt=null,Yt=t;;){if(Yt.tag===5){if(Xt===null){Xt=Yt;try{M=Yt.stateNode,kt?(C=M.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none"):(Q=Yt.stateNode,rt=Yt.memoizedProps.style,D=rt!=null&&rt.hasOwnProperty("display")?rt.display:null,Q.style.display=fn("display",D))}catch(Me){Tn(t,t.return,Me)}}}else if(Yt.tag===6){if(Xt===null)try{Yt.stateNode.nodeValue=kt?"":Yt.memoizedProps}catch(Me){Tn(t,t.return,Me)}}else if((Yt.tag!==22&&Yt.tag!==23||Yt.memoizedState===null||Yt===t)&&Yt.child!==null){Yt.child.return=Yt,Yt=Yt.child;continue}if(Yt===t)break t;for(;Yt.sibling===null;){if(Yt.return===null||Yt.return===t)break t;Xt===Yt&&(Xt=null),Yt=Yt.return}Xt===Yt&&(Xt=null),Yt.sibling.return=Yt.return,Yt=Yt.sibling}}break;case 19:Ds(r,t),po(t),m&4&&vd(t);break;case 21:break;default:Ds(r,t),po(t)}}function po(t){var r=t.flags;if(r&2){try{t:{for(var u=t.return;u!==null;){if(md(u)){var m=u;break t}u=u.return}throw Error(o(160))}switch(m.tag){case 5:var M=m.stateNode;m.flags&32&&(kr(M,""),m.flags&=-33);var C=_d(t);hc(t,C,M);break;case 3:case 4:var D=m.stateNode.containerInfo,Q=_d(t);uc(t,Q,D);break;default:throw Error(o(161))}}catch(rt){Tn(t,t.return,rt)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function eg(t,r,u){_e=t,wd(t)}function wd(t,r,u){for(var m=(t.mode&1)!==0;_e!==null;){var M=_e,C=M.child;if(M.tag===22&&m){var D=M.memoizedState!==null||Zu;if(!D){var Q=M.alternate,rt=Q!==null&&Q.memoizedState!==null||Gi;Q=Zu;var kt=Gi;if(Zu=D,(Gi=rt)&&!kt)for(_e=M;_e!==null;)D=_e,rt=D.child,D.tag===22&&D.memoizedState!==null?Ld(M):rt!==null?(rt.return=D,_e=rt):Ld(M);for(;C!==null;)_e=C,wd(C),C=C.sibling;_e=M,Zu=Q,Gi=kt}Md(t)}else(M.subtreeFlags&8772)!==0&&C!==null?(C.return=M,_e=C):Md(t)}}function Md(t){for(;_e!==null;){var r=_e;if((r.flags&8772)!==0){var u=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:Gi||qu(5,r);break;case 1:var m=r.stateNode;if(r.flags&4&&!Gi)if(u===null)m.componentDidMount();else{var M=r.elementType===r.type?u.memoizedProps:Is(r.type,u.memoizedProps);m.componentDidUpdate(M,u.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var C=r.updateQueue;C!==null&&gt(r,C,m);break;case 3:var D=r.updateQueue;if(D!==null){if(u=null,r.child!==null)switch(r.child.tag){case 5:u=r.child.stateNode;break;case 1:u=r.child.stateNode}gt(r,D,u)}break;case 5:var Q=r.stateNode;if(u===null&&r.flags&4){u=Q;var rt=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":rt.autoFocus&&u.focus();break;case"img":rt.src&&(u.src=rt.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var kt=r.alternate;if(kt!==null){var Xt=kt.memoizedState;if(Xt!==null){var Yt=Xt.dehydrated;Yt!==null&&Ei(Yt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(o(163))}Gi||r.flags&512&&lc(r)}catch(Wt){Tn(r,r.return,Wt)}}if(r===t){_e=null;break}if(u=r.sibling,u!==null){u.return=r.return,_e=u;break}_e=r.return}}function Ed(t){for(;_e!==null;){var r=_e;if(r===t){_e=null;break}var u=r.sibling;if(u!==null){u.return=r.return,_e=u;break}_e=r.return}}function Ld(t){for(;_e!==null;){var r=_e;try{switch(r.tag){case 0:case 11:case 15:var u=r.return;try{qu(4,r)}catch(rt){Tn(r,u,rt)}break;case 1:var m=r.stateNode;if(typeof m.componentDidMount=="function"){var M=r.return;try{m.componentDidMount()}catch(rt){Tn(r,M,rt)}}var C=r.return;try{lc(r)}catch(rt){Tn(r,C,rt)}break;case 5:var D=r.return;try{lc(r)}catch(rt){Tn(r,D,rt)}}}catch(rt){Tn(r,r.return,rt)}if(r===t){_e=null;break}var Q=r.sibling;if(Q!==null){Q.return=r.return,_e=Q;break}_e=r.return}}var ng=Math.ceil,Ku=Ut.ReactCurrentDispatcher,cc=Ut.ReactCurrentOwner,ss=Ut.ReactCurrentBatchConfig,nn=0,_i=null,Jn=null,ki=0,zr=0,bl=Bs(0),li=0,ou=null,tl=0,Ju=0,fc=0,au=null,xr=null,dc=0,Sl=1/0,Go=null,Xu=!1,pc=null,wa=null,Yu=!1,Ma=null,Qu=0,lu=0,gc=null,th=-1,eh=0;function Yi(){return(nn&6)!==0?mn():th!==-1?th:th=mn()}function Ea(t){return(t.mode&1)===0?1:(nn&2)!==0&&ki!==0?ki&-ki:b.transition!==null?(eh===0&&(eh=ue()),eh):(t=ve,t!==0||(t=window.event,t=t===void 0?16:qe(t.type)),t)}function Ns(t,r,u,m){if(50<lu)throw lu=0,gc=null,Error(o(185));ce(t,u,m),((nn&2)===0||t!==_i)&&(t===_i&&((nn&2)===0&&(Ju|=u),li===4&&La(t,ki)),wr(t,m),u===1&&nn===0&&(r.mode&1)===0&&(Sl=mn()+500,xl&&ho()))}function wr(t,r){var u=t.callbackNode;qt(t,r);var m=Tt(t,t===_i?ki:0);if(m===0)u!==null&&vs(u),t.callbackNode=null,t.callbackPriority=0;else if(r=m&-m,t.callbackPriority!==r){if(u!=null&&vs(u),r===1)t.tag===0?Uh(bd.bind(null,t)):Xl(bd.bind(null,t)),xn(function(){(nn&6)===0&&ho()}),u=null;else{switch(je(m)){case 1:u=wo;break;case 4:u=qs;break;case 16:u=Tr;break;case 536870912:u=Vr;break;default:u=Tr}u=Id(u,Cd.bind(null,t))}t.callbackPriority=r,t.callbackNode=u}}function Cd(t,r){if(th=-1,eh=0,(nn&6)!==0)throw Error(o(327));var u=t.callbackNode;if(kl()&&t.callbackNode!==u)return null;var m=Tt(t,t===_i?ki:0);if(m===0)return null;if((m&30)!==0||(m&t.expiredLanes)!==0||r)r=nh(t,m);else{r=m;var M=nn;nn|=2;var C=kd();(_i!==t||ki!==r)&&(Go=null,Sl=mn()+500,nl(t,r));do try{sg();break}catch(Q){Sd(t,Q)}while(!0);Ke(),Ku.current=C,nn=M,Jn!==null?r=0:(_i=null,ki=0,r=li)}if(r!==0){if(r===2&&(M=he(t),M!==0&&(m=M,r=mc(t,M))),r===1)throw u=ou,nl(t,0),La(t,m),wr(t,mn()),u;if(r===6)La(t,m);else{if(M=t.current.alternate,(m&30)===0&&!ig(M)&&(r=nh(t,m),r===2&&(C=he(t),C!==0&&(m=C,r=mc(t,C))),r===1))throw u=ou,nl(t,0),La(t,m),wr(t,mn()),u;switch(t.finishedWork=M,t.finishedLanes=m,r){case 0:case 1:throw Error(o(345));case 2:il(t,xr,Go);break;case 3:if(La(t,m),(m&130023424)===m&&(r=dc+500-mn(),10<r)){if(Tt(t,0)!==0)break;if(M=t.suspendedLanes,(M&m)!==m){Yi(),t.pingedLanes|=t.suspendedLanes&M;break}t.timeoutHandle=zn(il.bind(null,t,xr,Go),r);break}il(t,xr,Go);break;case 4:if(La(t,m),(m&4194240)===m)break;for(r=t.eventTimes,M=-1;0<m;){var D=31-De(m);C=1<<D,D=r[D],D>M&&(M=D),m&=~C}if(m=M,m=mn()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*ng(m/1960))-m,10<m){t.timeoutHandle=zn(il.bind(null,t,xr,Go),m);break}il(t,xr,Go);break;case 5:il(t,xr,Go);break;default:throw Error(o(329))}}}return wr(t,mn()),t.callbackNode===u?Cd.bind(null,t):null}function mc(t,r){var u=au;return t.current.memoizedState.isDehydrated&&(nl(t,r).flags|=256),t=nh(t,r),t!==2&&(r=xr,xr=u,r!==null&&_c(r)),t}function _c(t){xr===null?xr=t:xr.push.apply(xr,t)}function ig(t){for(var r=t;;){if(r.flags&16384){var u=r.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var m=0;m<u.length;m++){var M=u[m],C=M.getSnapshot;M=M.value;try{if(!Oi(C(),M))return!1}catch{return!1}}}if(u=r.child,r.subtreeFlags&16384&&u!==null)u.return=r,r=u;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function La(t,r){for(r&=~fc,r&=~Ju,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var u=31-De(r),m=1<<u;t[u]=-1,r&=~m}}function bd(t){if((nn&6)!==0)throw Error(o(327));kl();var r=Tt(t,0);if((r&1)===0)return wr(t,mn()),null;var u=nh(t,r);if(t.tag!==0&&u===2){var m=he(t);m!==0&&(r=m,u=mc(t,m))}if(u===1)throw u=ou,nl(t,0),La(t,r),wr(t,mn()),u;if(u===6)throw Error(o(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,il(t,xr,Go),wr(t,mn()),null}function yc(t,r){var u=nn;nn|=1;try{return t(r)}finally{nn=u,nn===0&&(Sl=mn()+500,xl&&ho())}}function el(t){Ma!==null&&Ma.tag===0&&(nn&6)===0&&kl();var r=nn;nn|=1;var u=ss.transition,m=ve;try{if(ss.transition=null,ve=1,t)return t()}finally{ve=m,ss.transition=u,nn=r,(nn&6)===0&&ho()}}function vc(){zr=bl.current,yn(bl)}function nl(t,r){t.finishedWork=null,t.finishedLanes=0;var u=t.timeoutHandle;if(u!==-1&&(t.timeoutHandle=-1,An(u)),Jn!==null)for(u=Jn.return;u!==null;){var m=u;switch(Yl(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&Do();break;case 3:Ze(),yn(ri),yn(Bn),yr();break;case 5:Kn(m);break;case 4:Ze();break;case 13:yn(pn);break;case 19:yn(pn);break;case 10:J(m.type._context);break;case 22:case 23:vc()}u=u.return}if(_i=t,Jn=t=Ca(t.current,null),ki=zr=r,li=0,ou=null,fc=Ju=tl=0,xr=au=null,ut!==null){for(r=0;r<ut.length;r++)if(u=ut[r],m=u.interleaved,m!==null){u.interleaved=null;var M=m.next,C=u.pending;if(C!==null){var D=C.next;C.next=M,m.next=D}u.pending=m}ut=null}return t}function Sd(t,r){do{var u=Jn;try{if(Ke(),co.current=Hu,zu){for(var m=Ue.memoizedState;m!==null;){var M=m.queue;M!==null&&(M.pending=null),m=m.next}zu=!1}if(Cn=0,mi=ai=Ue=null,tu=!1,eu=0,cc.current=null,u===null||u.return===null){li=1,ou=r,Jn=null;break}t:{var C=t,D=u.return,Q=u,rt=r;if(r=ki,Q.flags|=32768,rt!==null&&typeof rt=="object"&&typeof rt.then=="function"){var kt=rt,Xt=Q,Yt=Xt.tag;if((Xt.mode&1)===0&&(Yt===0||Yt===11||Yt===15)){var Wt=Xt.alternate;Wt?(Xt.updateQueue=Wt.updateQueue,Xt.memoizedState=Wt.memoizedState,Xt.lanes=Wt.lanes):(Xt.updateQueue=null,Xt.memoizedState=null)}var pe=Yf(D);if(pe!==null){pe.flags&=-257,Qf(pe,D,Q,C,r),pe.mode&1&&Xf(C,kt,r),r=pe,rt=kt;var xe=r.updateQueue;if(xe===null){var Me=new Set;Me.add(rt),r.updateQueue=Me}else xe.add(rt);break t}else{if((r&1)===0){Xf(C,kt,r),xc();break t}rt=Error(o(426))}}else if(wn&&Q.mode&1){var Un=Yf(D);if(Un!==null){(Un.flags&65536)===0&&(Un.flags|=256),Qf(Un,D,Q,C,r),w(Ll(rt,Q));break t}}C=rt=Ll(rt,Q),li!==4&&(li=2),au===null?au=[C]:au.push(C),C=D;do{switch(C.tag){case 3:C.flags|=65536,r&=-r,C.lanes|=r;var xt=Kf(C,rt,r);st(C,xt);break t;case 1:Q=rt;var at=C.type,Ct=C.stateNode;if((C.flags&128)===0&&(typeof at.getDerivedStateFromError=="function"||Ct!==null&&typeof Ct.componentDidCatch=="function"&&(wa===null||!wa.has(Ct)))){C.flags|=65536,r&=-r,C.lanes|=r;var ne=Jf(C,Q,r);st(C,ne);break t}}C=C.return}while(C!==null)}Ad(u)}catch(Le){r=Le,Jn===u&&u!==null&&(Jn=u=u.return);continue}break}while(!0)}function kd(){var t=Ku.current;return Ku.current=Hu,t===null?Hu:t}function xc(){(li===0||li===3||li===2)&&(li=4),_i===null||(tl&268435455)===0&&(Ju&268435455)===0||La(_i,ki)}function nh(t,r){var u=nn;nn|=2;var m=kd();(_i!==t||ki!==r)&&(Go=null,nl(t,r));do try{rg();break}catch(M){Sd(t,M)}while(!0);if(Ke(),nn=u,Ku.current=m,Jn!==null)throw Error(o(261));return _i=null,ki=0,li}function rg(){for(;Jn!==null;)Pd(Jn)}function sg(){for(;Jn!==null&&!xo();)Pd(Jn)}function Pd(t){var r=Rd(t.alternate,t,zr);t.memoizedProps=t.pendingProps,r===null?Ad(t):Jn=r,cc.current=null}function Ad(t){var r=t;do{var u=r.alternate;if(t=r.return,(r.flags&32768)===0){if(u=X0(u,r,zr),u!==null){Jn=u;return}}else{if(u=Y0(u,r),u!==null){u.flags&=32767,Jn=u;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{li=6,Jn=null;return}}if(r=r.sibling,r!==null){Jn=r;return}Jn=r=t}while(r!==null);li===0&&(li=5)}function il(t,r,u){var m=ve,M=ss.transition;try{ss.transition=null,ve=1,og(t,r,u,m)}finally{ss.transition=M,ve=m}return null}function og(t,r,u,m){do kl();while(Ma!==null);if((nn&6)!==0)throw Error(o(327));u=t.finishedWork;var M=t.finishedLanes;if(u===null)return null;if(t.finishedWork=null,t.finishedLanes=0,u===t.current)throw Error(o(177));t.callbackNode=null,t.callbackPriority=0;var C=u.lanes|u.childLanes;if(fe(t,C),t===_i&&(Jn=_i=null,ki=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Yu||(Yu=!0,Id(Tr,function(){return kl(),null})),C=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||C){C=ss.transition,ss.transition=null;var D=ve;ve=1;var Q=nn;nn|=4,cc.current=null,tg(t,u),xd(u,t),hr(Se),Ir=!!ae,Se=ae=null,t.current=u,eg(u),Ws(),nn=Q,ve=D,ss.transition=C}else t.current=u;if(Yu&&(Yu=!1,Ma=t,Qu=M),C=t.pendingLanes,C===0&&(wa=null),rr(u.stateNode),wr(t,mn()),r!==null)for(m=t.onRecoverableError,u=0;u<r.length;u++)M=r[u],m(M.value,{componentStack:M.stack,digest:M.digest});if(Xu)throw Xu=!1,t=pc,pc=null,t;return(Qu&1)!==0&&t.tag!==0&&kl(),C=t.pendingLanes,(C&1)!==0?t===gc?lu++:(lu=0,gc=t):lu=0,ho(),null}function kl(){if(Ma!==null){var t=je(Qu),r=ss.transition,u=ve;try{if(ss.transition=null,ve=16>t?16:t,Ma===null)var m=!1;else{if(t=Ma,Ma=null,Qu=0,(nn&6)!==0)throw Error(o(331));var M=nn;for(nn|=4,_e=t.current;_e!==null;){var C=_e,D=C.child;if((_e.flags&16)!==0){var Q=C.deletions;if(Q!==null){for(var rt=0;rt<Q.length;rt++){var kt=Q[rt];for(_e=kt;_e!==null;){var Xt=_e;switch(Xt.tag){case 0:case 11:case 15:su(8,Xt,C)}var Yt=Xt.child;if(Yt!==null)Yt.return=Xt,_e=Yt;else for(;_e!==null;){Xt=_e;var Wt=Xt.sibling,pe=Xt.return;if(gd(Xt),Xt===kt){_e=null;break}if(Wt!==null){Wt.return=pe,_e=Wt;break}_e=pe}}}var xe=C.alternate;if(xe!==null){var Me=xe.child;if(Me!==null){xe.child=null;do{var Un=Me.sibling;Me.sibling=null,Me=Un}while(Me!==null)}}_e=C}}if((C.subtreeFlags&2064)!==0&&D!==null)D.return=C,_e=D;else t:for(;_e!==null;){if(C=_e,(C.flags&2048)!==0)switch(C.tag){case 0:case 11:case 15:su(9,C,C.return)}var xt=C.sibling;if(xt!==null){xt.return=C.return,_e=xt;break t}_e=C.return}}var at=t.current;for(_e=at;_e!==null;){D=_e;var Ct=D.child;if((D.subtreeFlags&2064)!==0&&Ct!==null)Ct.return=D,_e=Ct;else t:for(D=at;_e!==null;){if(Q=_e,(Q.flags&2048)!==0)try{switch(Q.tag){case 0:case 11:case 15:qu(9,Q)}}catch(Le){Tn(Q,Q.return,Le)}if(Q===D){_e=null;break t}var ne=Q.sibling;if(ne!==null){ne.return=Q.return,_e=ne;break t}_e=Q.return}}if(nn=M,ho(),xi&&typeof xi.onPostCommitFiberRoot=="function")try{xi.onPostCommitFiberRoot(xs,t)}catch{}m=!0}return m}finally{ve=u,ss.transition=r}}return!1}function Bd(t,r,u){r=Ll(u,r),r=Kf(t,r,1),t=nt(t,r,1),r=Yi(),t!==null&&(ce(t,1,r),wr(t,r))}function Tn(t,r,u){if(t.tag===3)Bd(t,t,u);else for(;r!==null;){if(r.tag===3){Bd(r,t,u);break}else if(r.tag===1){var m=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(wa===null||!wa.has(m))){t=Ll(u,t),t=Jf(r,t,1),r=nt(r,t,1),t=Yi(),r!==null&&(ce(r,1,t),wr(r,t));break}}r=r.return}}function ag(t,r,u){var m=t.pingCache;m!==null&&m.delete(r),r=Yi(),t.pingedLanes|=t.suspendedLanes&u,_i===t&&(ki&u)===u&&(li===4||li===3&&(ki&130023424)===ki&&500>mn()-dc?nl(t,0):fc|=u),wr(t,r)}function Td(t,r){r===0&&((t.mode&1)===0?r=1:(r=Bt,Bt<<=1,(Bt&130023424)===0&&(Bt=4194304)));var u=Yi();t=F(t,r),t!==null&&(ce(t,r,u),wr(t,u))}function lg(t){var r=t.memoizedState,u=0;r!==null&&(u=r.retryLane),Td(t,u)}function ug(t,r){var u=0;switch(t.tag){case 13:var m=t.stateNode,M=t.memoizedState;M!==null&&(u=M.retryLane);break;case 19:m=t.stateNode;break;default:throw Error(o(314))}m!==null&&m.delete(r),Td(t,u)}var Rd;Rd=function(t,r,u){if(t!==null)if(t.memoizedProps!==r.pendingProps||ri.current)vr=!0;else{if((t.lanes&u)===0&&(r.flags&128)===0)return vr=!1,J0(t,r,u);vr=(t.flags&131072)!==0}else vr=!1,wn&&(r.flags&1048576)!==0&&jn(r,Ml,r.index);switch(r.lanes=0,r.tag){case 2:var m=r.type;Wu(t,r),t=r.pendingProps;var M=ma(r,Bn.current);ot(r,u),M=$h(null,r,m,t,M,u);var C=Vh();return r.flags|=1,typeof M=="object"&&M!==null&&typeof M.render=="function"&&M.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,si(m)?(C=!0,vl(r)):C=!1,r.memoizedState=M.state!==null&&M.state!==void 0?M.state:null,j(r),M.updater=$u,r.stateNode=M,M._reactInternals=r,Xh(r,m,t,u),r=ec(null,r,m,!0,C,u)):(r.tag=0,wn&&C&&is(r),Xi(null,r,M,u),r=r.child),r;case 16:m=r.elementType;t:{switch(Wu(t,r),t=r.pendingProps,M=m._init,m=M(m._payload),r.type=m,M=r.tag=cg(m),t=Is(m,t),M){case 0:r=tc(null,r,m,t,u);break t;case 1:r=sd(null,r,m,t,u);break t;case 11:r=td(null,r,m,t,u);break t;case 14:r=ed(null,r,m,Is(m.type,t),u);break t}throw Error(o(306,m,""))}return r;case 0:return m=r.type,M=r.pendingProps,M=r.elementType===m?M:Is(m,M),tc(t,r,m,M,u);case 1:return m=r.type,M=r.pendingProps,M=r.elementType===m?M:Is(m,M),sd(t,r,m,M,u);case 3:t:{if(od(r),t===null)throw Error(o(387));m=r.pendingProps,C=r.memoizedState,M=C.element,$(t,r),dt(r,m,null,u);var D=r.memoizedState;if(m=D.element,C.isDehydrated)if(C={element:m,isDehydrated:!1,cache:D.cache,pendingSuspenseBoundaries:D.pendingSuspenseBoundaries,transitions:D.transitions},r.updateQueue.baseState=C,r.memoizedState=C,r.flags&256){M=Ll(Error(o(423)),r),r=ad(t,r,m,u,M);break t}else if(m!==M){M=Ll(Error(o(424)),r),r=ad(t,r,m,u,M);break t}else for(bi=qi(r.stateNode.containerInfo.firstChild),Ji=r,wn=!0,Gr=null,u=yt(r,null,m,u),r.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(_(),m===M){r=Fo(t,r,u);break t}Xi(t,r,m,u)}r=r.child}return r;case 5:return an(r),t===null&&s(r),m=r.type,M=r.pendingProps,C=t!==null?t.memoizedProps:null,D=M.children,He(m,M)?D=null:C!==null&&He(m,C)&&(r.flags|=32),rd(t,r),Xi(t,r,D,u),r.child;case 6:return t===null&&s(r),null;case 13:return ld(t,r,u);case 4:return rn(r,r.stateNode.containerInfo),m=r.pendingProps,t===null?r.child=W(r,null,m,u):Xi(t,r,m,u),r.child;case 11:return m=r.type,M=r.pendingProps,M=r.elementType===m?M:Is(m,M),td(t,r,m,M,u);case 7:return Xi(t,r,r.pendingProps,u),r.child;case 8:return Xi(t,r,r.pendingProps.children,u),r.child;case 12:return Xi(t,r,r.pendingProps.children,u),r.child;case 10:t:{if(m=r.type._context,M=r.pendingProps,C=r.memoizedProps,D=M.value,dn(Lt,m._currentValue),m._currentValue=D,C!==null)if(Oi(C.value,D)){if(C.children===M.children&&!ri.current){r=Fo(t,r,u);break t}}else for(C=r.child,C!==null&&(C.return=r);C!==null;){var Q=C.dependencies;if(Q!==null){D=C.child;for(var rt=Q.firstContext;rt!==null;){if(rt.context===m){if(C.tag===1){rt=H(-1,u&-u),rt.tag=2;var kt=C.updateQueue;if(kt!==null){kt=kt.shared;var Xt=kt.pending;Xt===null?rt.next=rt:(rt.next=Xt.next,Xt.next=rt),kt.pending=rt}}C.lanes|=u,rt=C.alternate,rt!==null&&(rt.lanes|=u),et(C.return,u,r),Q.lanes|=u;break}rt=rt.next}}else if(C.tag===10)D=C.type===r.type?null:C.child;else if(C.tag===18){if(D=C.return,D===null)throw Error(o(341));D.lanes|=u,Q=D.alternate,Q!==null&&(Q.lanes|=u),et(D,u,r),D=C.sibling}else D=C.child;if(D!==null)D.return=C;else for(D=C;D!==null;){if(D===r){D=null;break}if(C=D.sibling,C!==null){C.return=D.return,D=C;break}D=D.return}C=D}Xi(t,r,M.children,u),r=r.child}return r;case 9:return M=r.type,m=r.pendingProps.children,ot(r,u),M=wt(M),m=m(M),r.flags|=1,Xi(t,r,m,u),r.child;case 14:return m=r.type,M=Is(m,r.pendingProps),M=Is(m.type,M),ed(t,r,m,M,u);case 15:return nd(t,r,r.type,r.pendingProps,u);case 17:return m=r.type,M=r.pendingProps,M=r.elementType===m?M:Is(m,M),Wu(t,r),r.tag=1,si(m)?(t=!0,vl(r)):t=!1,ot(r,u),Zf(r,m,M),Xh(r,m,M,u),ec(null,r,m,!0,t,u);case 19:return hd(t,r,u);case 22:return id(t,r,u)}throw Error(o(156,r.tag))};function Id(t,r){return Vs(t,r)}function hg(t,r,u,m){this.tag=t,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function os(t,r,u,m){return new hg(t,r,u,m)}function wc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function cg(t){if(typeof t=="function")return wc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ee)return 11;if(t===Mt)return 14}return 2}function Ca(t,r){var u=t.alternate;return u===null?(u=os(t.tag,r,t.key,t.mode),u.elementType=t.elementType,u.type=t.type,u.stateNode=t.stateNode,u.alternate=t,t.alternate=u):(u.pendingProps=r,u.type=t.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=t.flags&14680064,u.childLanes=t.childLanes,u.lanes=t.lanes,u.child=t.child,u.memoizedProps=t.memoizedProps,u.memoizedState=t.memoizedState,u.updateQueue=t.updateQueue,r=t.dependencies,u.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},u.sibling=t.sibling,u.index=t.index,u.ref=t.ref,u}function ih(t,r,u,m,M,C){var D=2;if(m=t,typeof t=="function")wc(t)&&(D=1);else if(typeof t=="string")D=5;else t:switch(t){case $t:return rl(u.children,M,C,r);case Vt:D=8,M|=8;break;case Qt:return t=os(12,u,r,M|2),t.elementType=Qt,t.lanes=C,t;case Fe:return t=os(13,u,r,M),t.elementType=Fe,t.lanes=C,t;case Ie:return t=os(19,u,r,M),t.elementType=Ie,t.lanes=C,t;case mt:return rh(u,M,C,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case zt:D=10;break t;case te:D=9;break t;case ee:D=11;break t;case Mt:D=14;break t;case At:D=16,m=null;break t}throw Error(o(130,t==null?t:typeof t,""))}return r=os(D,u,r,M),r.elementType=t,r.type=m,r.lanes=C,r}function rl(t,r,u,m){return t=os(7,t,m,r),t.lanes=u,t}function rh(t,r,u,m){return t=os(22,t,m,r),t.elementType=mt,t.lanes=u,t.stateNode={isHidden:!1},t}function Mc(t,r,u){return t=os(6,t,null,r),t.lanes=u,t}function Ec(t,r,u){return r=os(4,t.children!==null?t.children:[],t.key,r),r.lanes=u,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function fg(t,r,u,m,M){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ge(0),this.expirationTimes=ge(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ge(0),this.identifierPrefix=m,this.onRecoverableError=M,this.mutableSourceEagerHydrationData=null}function Lc(t,r,u,m,M,C,D,Q,rt){return t=new fg(t,r,u,Q,rt),r===1?(r=1,C===!0&&(r|=8)):r=0,C=os(3,null,null,r),t.current=C,C.stateNode=t,C.memoizedState={element:m,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},j(C),t}function dg(t,r,u){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Gt,key:m==null?null:""+m,children:t,containerInfo:r,implementation:u}}function Od(t){if(!t)return uo;t=t._reactInternals;t:{if(ir(t)!==t||t.tag!==1)throw Error(o(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break t;case 1:if(si(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break t}}r=r.return}while(r!==null);throw Error(o(171))}if(t.tag===1){var u=t.type;if(si(u))return Fu(t,u,r)}return r}function Dd(t,r,u,m,M,C,D,Q,rt){return t=Lc(u,m,!0,t,M,C,D,Q,rt),t.context=Od(null),u=t.current,m=Yi(),M=Ea(u),C=H(m,M),C.callback=r??null,nt(u,C,M),t.current.lanes=M,ce(t,M,m),wr(t,m),t}function sh(t,r,u,m){var M=r.current,C=Yi(),D=Ea(M);return u=Od(u),r.context===null?r.context=u:r.pendingContext=u,r=H(C,D),r.payload={element:t},m=m===void 0?null:m,m!==null&&(r.callback=m),t=nt(M,r,D),t!==null&&(Ns(t,M,D,C),it(t,M,D)),D}function oh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Nd(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var u=t.retryLane;t.retryLane=u!==0&&u<r?u:r}}function Cc(t,r){Nd(t,r),(t=t.alternate)&&Nd(t,r)}function pg(){return null}var Fd=typeof reportError=="function"?reportError:function(t){console.error(t)};function bc(t){this._internalRoot=t}ah.prototype.render=bc.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(o(409));sh(t,r,null,null)},ah.prototype.unmount=bc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;el(function(){sh(null,t,null,null)}),r[en]=null}};function ah(t){this._internalRoot=t}ah.prototype.unstable_scheduleHydration=function(t){if(t){var r=ws();t={blockedOn:null,target:t,priority:r};for(var u=0;u<on.length&&r!==0&&r<on[u].priority;u++);on.splice(u,0,t),u===0&&Mi(t)}};function Sc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function lh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Gd(){}function gg(t,r,u,m,M){if(M){if(typeof m=="function"){var C=m;m=function(){var kt=oh(D);C.call(kt)}}var D=Dd(r,m,t,0,null,!1,!1,"",Gd);return t._reactRootContainer=D,t[en]=D.current,Gn(t.nodeType===8?t.parentNode:t),el(),D}for(;M=t.lastChild;)t.removeChild(M);if(typeof m=="function"){var Q=m;m=function(){var kt=oh(rt);Q.call(kt)}}var rt=Lc(t,0,!1,null,null,!1,!1,"",Gd);return t._reactRootContainer=rt,t[en]=rt.current,Gn(t.nodeType===8?t.parentNode:t),el(function(){sh(r,rt,u,m)}),rt}function uh(t,r,u,m,M){var C=u._reactRootContainer;if(C){var D=C;if(typeof M=="function"){var Q=M;M=function(){var rt=oh(D);Q.call(rt)}}sh(r,D,t,M)}else D=gg(u,r,t,M,m);return oh(D)}We=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var u=It(r.pendingLanes);u!==0&&(we(r,u|1),wr(r,mn()),(nn&6)===0&&(Sl=mn()+500,ho()))}break;case 13:el(function(){var m=F(t,1);if(m!==null){var M=Yi();Ns(m,t,1,M)}}),Cc(t,1)}},Ve=function(t){if(t.tag===13){var r=F(t,134217728);if(r!==null){var u=Yi();Ns(r,t,134217728,u)}Cc(t,134217728)}},wi=function(t){if(t.tag===13){var r=Ea(t),u=F(t,r);if(u!==null){var m=Yi();Ns(u,t,r,m)}Cc(t,r)}},ws=function(){return ve},Ce=function(t,r){var u=ve;try{return ve=t,r()}finally{ve=u}},ds=function(t,r,u){switch(r){case"input":if(Ur(t,u),r=u.name,u.type==="radio"&&r!=null){for(u=t;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<u.length;r++){var m=u[r];if(m!==t&&m.form===t.form){var M=pa(m);if(!M)throw Error(o(90));jr(m),Ur(m,M)}}}break;case"textarea":$o(t,u);break;case"select":r=u.value,r!=null&&Sr(t,!!u.multiple,r,!1)}},Wo=yc,Pr=el;var mg={usingClientEntryPoint:!1,Events:[_r,ts,pa,Da,yo,yc]},uu={findFiberByHostInstance:As,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_g={bundleType:uu.bundleType,version:uu.version,rendererPackageName:uu.rendererPackageName,rendererConfig:uu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ut.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ko(t),t===null?null:t.stateNode},findFiberByHostInstance:uu.findFiberByHostInstance||pg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hh.isDisabled&&hh.supportsFiber)try{xs=hh.inject(_g),xi=hh}catch{}}return Mr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mg,Mr.createPortal=function(t,r){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sc(r))throw Error(o(200));return dg(t,r,null,u)},Mr.createRoot=function(t,r){if(!Sc(t))throw Error(o(299));var u=!1,m="",M=Fd;return r!=null&&(r.unstable_strictMode===!0&&(u=!0),r.identifierPrefix!==void 0&&(m=r.identifierPrefix),r.onRecoverableError!==void 0&&(M=r.onRecoverableError)),r=Lc(t,1,!1,null,null,u,!1,m,M),t[en]=r.current,Gn(t.nodeType===8?t.parentNode:t),new bc(r)},Mr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(o(188)):(t=Object.keys(t).join(","),Error(o(268,t)));return t=Ko(r),t=t===null?null:t.stateNode,t},Mr.flushSync=function(t){return el(t)},Mr.hydrate=function(t,r,u){if(!lh(r))throw Error(o(200));return uh(null,t,r,!0,u)},Mr.hydrateRoot=function(t,r,u){if(!Sc(t))throw Error(o(405));var m=u!=null&&u.hydratedSources||null,M=!1,C="",D=Fd;if(u!=null&&(u.unstable_strictMode===!0&&(M=!0),u.identifierPrefix!==void 0&&(C=u.identifierPrefix),u.onRecoverableError!==void 0&&(D=u.onRecoverableError)),r=Dd(r,null,t,1,u??null,M,!1,C,D),t[en]=r.current,Gn(t),m)for(t=0;t<m.length;t++)u=m[t],M=u._getVersion,M=M(u._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[u,M]:r.mutableSourceEagerHydrationData.push(u,M);return new ah(r)},Mr.render=function(t,r,u){if(!lh(r))throw Error(o(200));return uh(null,t,r,!1,u)},Mr.unmountComponentAtNode=function(t){if(!lh(t))throw Error(o(40));return t._reactRootContainer?(el(function(){uh(null,null,t,!1,function(){t._reactRootContainer=null,t[en]=null})}),!0):!1},Mr.unstable_batchedUpdates=yc,Mr.unstable_renderSubtreeIntoContainer=function(t,r,u,m){if(!lh(u))throw Error(o(200));if(t==null||t._reactInternals===void 0)throw Error(o(38));return uh(t,r,u,!1,m)},Mr.version="18.3.1-next-f1338f8080-20240426",Mr}var Zd;function Kp(){if(Zd)return Ac.exports;Zd=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(i){console.error(i)}}return e(),Ac.exports=bg(),Ac.exports}var qd;function Sg(){if(qd)return fh;qd=1;var e=Kp();return fh.createRoot=e.createRoot,fh.hydrateRoot=e.hydrateRoot,fh}var kg=Sg();const Pg=Dh(kg);var du={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var Ag=du.exports,Kd;function Bg(){return Kd||(Kd=1,(function(e,i){(function(o,c){c(i)})(Ag,(function(o){var c="1.9.4";function f(n){var l,p,x,k;for(p=1,x=arguments.length;p<x;p++){k=arguments[p];for(l in k)n[l]=k[l]}return n}var g=Object.create||(function(){function n(){}return function(l){return n.prototype=l,new n}})();function y(n,l){var p=Array.prototype.slice;if(n.bind)return n.bind.apply(n,p.call(arguments,1));var x=p.call(arguments,2);return function(){return n.apply(l,x.length?x.concat(p.call(arguments)):arguments)}}var v=0;function E(n){return"_leaflet_id"in n||(n._leaflet_id=++v),n._leaflet_id}function A(n,l,p){var x,k,N,tt;return tt=function(){x=!1,k&&(N.apply(p,k),k=!1)},N=function(){x?k=arguments:(n.apply(p,arguments),setTimeout(tt,l),x=!0)},N}function G(n,l,p){var x=l[1],k=l[0],N=x-k;return n===x&&p?n:((n-k)%N+N)%N+k}function P(){return!1}function B(n,l){if(l===!1)return n;var p=Math.pow(10,l===void 0?6:l);return Math.round(n*p)/p}function V(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}function q(n){return V(n).split(/\s+/)}function Z(n,l){Object.prototype.hasOwnProperty.call(n,"options")||(n.options=n.options?g(n.options):{});for(var p in l)n.options[p]=l[p];return n.options}function Y(n,l,p){var x=[];for(var k in n)x.push(encodeURIComponent(p?k.toUpperCase():k)+"="+encodeURIComponent(n[k]));return(!l||l.indexOf("?")===-1?"?":"&")+x.join("&")}var ht=/\{ *([\w_ -]+) *\}/g;function lt(n,l){return n.replace(ht,function(p,x){var k=l[x];if(k===void 0)throw new Error("No value provided for variable "+p);return typeof k=="function"&&(k=k(l)),k})}var Pt=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"};function Ut(n,l){for(var p=0;p<n.length;p++)if(n[p]===l)return p;return-1}var Ot="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Gt(n){return window["webkit"+n]||window["moz"+n]||window["ms"+n]}var $t=0;function Vt(n){var l=+new Date,p=Math.max(0,16-(l-$t));return $t=l+p,window.setTimeout(n,p)}var Qt=window.requestAnimationFrame||Gt("RequestAnimationFrame")||Vt,zt=window.cancelAnimationFrame||Gt("CancelAnimationFrame")||Gt("CancelRequestAnimationFrame")||function(n){window.clearTimeout(n)};function te(n,l,p){if(p&&Qt===Vt)n.call(l);else return Qt.call(window,y(n,l))}function ee(n){n&&zt.call(window,n)}var Fe={__proto__:null,extend:f,create:g,bind:y,get lastId(){return v},stamp:E,throttle:A,wrapNum:G,falseFn:P,formatNum:B,trim:V,splitWords:q,setOptions:Z,getParamString:Y,template:lt,isArray:Pt,indexOf:Ut,emptyImageUrl:Ot,requestFn:Qt,cancelFn:zt,requestAnimFrame:te,cancelAnimFrame:ee};function Ie(){}Ie.extend=function(n){var l=function(){Z(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},p=l.__super__=this.prototype,x=g(p);x.constructor=l,l.prototype=x;for(var k in this)Object.prototype.hasOwnProperty.call(this,k)&&k!=="prototype"&&k!=="__super__"&&(l[k]=this[k]);return n.statics&&f(l,n.statics),n.includes&&(Mt(n.includes),f.apply(null,[x].concat(n.includes))),f(x,n),delete x.statics,delete x.includes,x.options&&(x.options=p.options?g(p.options):{},f(x.options,n.options)),x._initHooks=[],x.callInitHooks=function(){if(!this._initHooksCalled){p.callInitHooks&&p.callInitHooks.call(this),this._initHooksCalled=!0;for(var N=0,tt=x._initHooks.length;N<tt;N++)x._initHooks[N].call(this)}},l},Ie.include=function(n){var l=this.prototype.options;return f(this.prototype,n),n.options&&(this.prototype.options=l,this.mergeOptions(n.options)),this},Ie.mergeOptions=function(n){return f(this.prototype.options,n),this},Ie.addInitHook=function(n){var l=Array.prototype.slice.call(arguments,1),p=typeof n=="function"?n:function(){this[n].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(p),this};function Mt(n){if(!(typeof L>"u"||!L||!L.Mixin)){n=Pt(n)?n:[n];for(var l=0;l<n.length;l++)n[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var At={on:function(n,l,p){if(typeof n=="object")for(var x in n)this._on(x,n[x],l);else{n=q(n);for(var k=0,N=n.length;k<N;k++)this._on(n[k],l,p)}return this},off:function(n,l,p){if(!arguments.length)delete this._events;else if(typeof n=="object")for(var x in n)this._off(x,n[x],l);else{n=q(n);for(var k=arguments.length===1,N=0,tt=n.length;N<tt;N++)k?this._off(n[N]):this._off(n[N],l,p)}return this},_on:function(n,l,p,x){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(n,l,p)===!1){p===this&&(p=void 0);var k={fn:l,ctx:p};x&&(k.once=!0),this._events=this._events||{},this._events[n]=this._events[n]||[],this._events[n].push(k)}},_off:function(n,l,p){var x,k,N;if(this._events&&(x=this._events[n],!!x)){if(arguments.length===1){if(this._firingCount)for(k=0,N=x.length;k<N;k++)x[k].fn=P;delete this._events[n];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var tt=this._listens(n,l,p);if(tt!==!1){var pt=x[tt];this._firingCount&&(pt.fn=P,this._events[n]=x=x.slice()),x.splice(tt,1)}}},fire:function(n,l,p){if(!this.listens(n,p))return this;var x=f({},l,{type:n,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var k=this._events[n];if(k){this._firingCount=this._firingCount+1||1;for(var N=0,tt=k.length;N<tt;N++){var pt=k[N],St=pt.fn;pt.once&&this.off(n,St,pt.ctx),St.call(pt.ctx||this,x)}this._firingCount--}}return p&&this._propagateEvent(x),this},listens:function(n,l,p,x){typeof n!="string"&&console.warn('"string" type argument expected');var k=l;typeof l!="function"&&(x=!!l,k=void 0,p=void 0);var N=this._events&&this._events[n];if(N&&N.length&&this._listens(n,k,p)!==!1)return!0;if(x){for(var tt in this._eventParents)if(this._eventParents[tt].listens(n,l,p,x))return!0}return!1},_listens:function(n,l,p){if(!this._events)return!1;var x=this._events[n]||[];if(!l)return!!x.length;p===this&&(p=void 0);for(var k=0,N=x.length;k<N;k++)if(x[k].fn===l&&x[k].ctx===p)return k;return!1},once:function(n,l,p){if(typeof n=="object")for(var x in n)this._on(x,n[x],l,!0);else{n=q(n);for(var k=0,N=n.length;k<N;k++)this._on(n[k],l,p,!0)}return this},addEventParent:function(n){return this._eventParents=this._eventParents||{},this._eventParents[E(n)]=n,this},removeEventParent:function(n){return this._eventParents&&delete this._eventParents[E(n)],this},_propagateEvent:function(n){for(var l in this._eventParents)this._eventParents[l].fire(n.type,f({layer:n.target,propagatedFrom:n.target},n),!0)}};At.addEventListener=At.on,At.removeEventListener=At.clearAllEventListeners=At.off,At.addOneTimeEventListener=At.once,At.fireEvent=At.fire,At.hasEventListeners=At.listens;var mt=Ie.extend(At);function ft(n,l,p){this.x=p?Math.round(n):n,this.y=p?Math.round(l):l}var Rt=Math.trunc||function(n){return n>0?Math.floor(n):Math.ceil(n)};ft.prototype={clone:function(){return new ft(this.x,this.y)},add:function(n){return this.clone()._add(ct(n))},_add:function(n){return this.x+=n.x,this.y+=n.y,this},subtract:function(n){return this.clone()._subtract(ct(n))},_subtract:function(n){return this.x-=n.x,this.y-=n.y,this},divideBy:function(n){return this.clone()._divideBy(n)},_divideBy:function(n){return this.x/=n,this.y/=n,this},multiplyBy:function(n){return this.clone()._multiplyBy(n)},_multiplyBy:function(n){return this.x*=n,this.y*=n,this},scaleBy:function(n){return new ft(this.x*n.x,this.y*n.y)},unscaleBy:function(n){return new ft(this.x/n.x,this.y/n.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Rt(this.x),this.y=Rt(this.y),this},distanceTo:function(n){n=ct(n);var l=n.x-this.x,p=n.y-this.y;return Math.sqrt(l*l+p*p)},equals:function(n){return n=ct(n),n.x===this.x&&n.y===this.y},contains:function(n){return n=ct(n),Math.abs(n.x)<=Math.abs(this.x)&&Math.abs(n.y)<=Math.abs(this.y)},toString:function(){return"Point("+B(this.x)+", "+B(this.y)+")"}};function ct(n,l,p){return n instanceof ft?n:Pt(n)?new ft(n[0],n[1]):n==null?n:typeof n=="object"&&"x"in n&&"y"in n?new ft(n.x,n.y):new ft(n,l,p)}function K(n,l){if(n)for(var p=l?[n,l]:n,x=0,k=p.length;x<k;x++)this.extend(p[x])}K.prototype={extend:function(n){var l,p;if(!n)return this;if(n instanceof ft||typeof n[0]=="number"||"x"in n)l=p=ct(n);else if(n=_t(n),l=n.min,p=n.max,!l||!p)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=p.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(p.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(p.y,this.max.y)),this},getCenter:function(n){return ct((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,n)},getBottomLeft:function(){return ct(this.min.x,this.max.y)},getTopRight:function(){return ct(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(n){var l,p;return typeof n[0]=="number"||n instanceof ft?n=ct(n):n=_t(n),n instanceof K?(l=n.min,p=n.max):l=p=n,l.x>=this.min.x&&p.x<=this.max.x&&l.y>=this.min.y&&p.y<=this.max.y},intersects:function(n){n=_t(n);var l=this.min,p=this.max,x=n.min,k=n.max,N=k.x>=l.x&&x.x<=p.x,tt=k.y>=l.y&&x.y<=p.y;return N&&tt},overlaps:function(n){n=_t(n);var l=this.min,p=this.max,x=n.min,k=n.max,N=k.x>l.x&&x.x<p.x,tt=k.y>l.y&&x.y<p.y;return N&&tt},isValid:function(){return!!(this.min&&this.max)},pad:function(n){var l=this.min,p=this.max,x=Math.abs(l.x-p.x)*n,k=Math.abs(l.y-p.y)*n;return _t(ct(l.x-x,l.y-k),ct(p.x+x,p.y+k))},equals:function(n){return n?(n=_t(n),this.min.equals(n.getTopLeft())&&this.max.equals(n.getBottomRight())):!1}};function _t(n,l){return!n||n instanceof K?n:new K(n,l)}function Dt(n,l){if(n)for(var p=l?[n,l]:n,x=0,k=p.length;x<k;x++)this.extend(p[x])}Dt.prototype={extend:function(n){var l=this._southWest,p=this._northEast,x,k;if(n instanceof se)x=n,k=n;else if(n instanceof Dt){if(x=n._southWest,k=n._northEast,!x||!k)return this}else return n?this.extend(Jt(n)||Ht(n)):this;return!l&&!p?(this._southWest=new se(x.lat,x.lng),this._northEast=new se(k.lat,k.lng)):(l.lat=Math.min(x.lat,l.lat),l.lng=Math.min(x.lng,l.lng),p.lat=Math.max(k.lat,p.lat),p.lng=Math.max(k.lng,p.lng)),this},pad:function(n){var l=this._southWest,p=this._northEast,x=Math.abs(l.lat-p.lat)*n,k=Math.abs(l.lng-p.lng)*n;return new Dt(new se(l.lat-x,l.lng-k),new se(p.lat+x,p.lng+k))},getCenter:function(){return new se((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new se(this.getNorth(),this.getWest())},getSouthEast:function(){return new se(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(n){typeof n[0]=="number"||n instanceof se||"lat"in n?n=Jt(n):n=Ht(n);var l=this._southWest,p=this._northEast,x,k;return n instanceof Dt?(x=n.getSouthWest(),k=n.getNorthEast()):x=k=n,x.lat>=l.lat&&k.lat<=p.lat&&x.lng>=l.lng&&k.lng<=p.lng},intersects:function(n){n=Ht(n);var l=this._southWest,p=this._northEast,x=n.getSouthWest(),k=n.getNorthEast(),N=k.lat>=l.lat&&x.lat<=p.lat,tt=k.lng>=l.lng&&x.lng<=p.lng;return N&&tt},overlaps:function(n){n=Ht(n);var l=this._southWest,p=this._northEast,x=n.getSouthWest(),k=n.getNorthEast(),N=k.lat>l.lat&&x.lat<p.lat,tt=k.lng>l.lng&&x.lng<p.lng;return N&&tt},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(n,l){return n?(n=Ht(n),this._southWest.equals(n.getSouthWest(),l)&&this._northEast.equals(n.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Ht(n,l){return n instanceof Dt?n:new Dt(n,l)}function se(n,l,p){if(isNaN(n)||isNaN(l))throw new Error("Invalid LatLng object: ("+n+", "+l+")");this.lat=+n,this.lng=+l,p!==void 0&&(this.alt=+p)}se.prototype={equals:function(n,l){if(!n)return!1;n=Jt(n);var p=Math.max(Math.abs(this.lat-n.lat),Math.abs(this.lng-n.lng));return p<=(l===void 0?1e-9:l)},toString:function(n){return"LatLng("+B(this.lat,n)+", "+B(this.lng,n)+")"},distanceTo:function(n){return Re.distance(this,Jt(n))},wrap:function(){return Re.wrapLatLng(this)},toBounds:function(n){var l=180*n/40075017,p=l/Math.cos(Math.PI/180*this.lat);return Ht([this.lat-l,this.lng-p],[this.lat+l,this.lng+p])},clone:function(){return new se(this.lat,this.lng,this.alt)}};function Jt(n,l,p){return n instanceof se?n:Pt(n)&&typeof n[0]!="object"?n.length===3?new se(n[0],n[1],n[2]):n.length===2?new se(n[0],n[1]):null:n==null?n:typeof n=="object"&&"lat"in n?new se(n.lat,"lng"in n?n.lng:n.lon,n.alt):l===void 0?null:new se(n,l,p)}var $e={latLngToPoint:function(n,l){var p=this.projection.project(n),x=this.scale(l);return this.transformation._transform(p,x)},pointToLatLng:function(n,l){var p=this.scale(l),x=this.transformation.untransform(n,p);return this.projection.unproject(x)},project:function(n){return this.projection.project(n)},unproject:function(n){return this.projection.unproject(n)},scale:function(n){return 256*Math.pow(2,n)},zoom:function(n){return Math.log(n/256)/Math.LN2},getProjectedBounds:function(n){if(this.infinite)return null;var l=this.projection.bounds,p=this.scale(n),x=this.transformation.transform(l.min,p),k=this.transformation.transform(l.max,p);return new K(x,k)},infinite:!1,wrapLatLng:function(n){var l=this.wrapLng?G(n.lng,this.wrapLng,!0):n.lng,p=this.wrapLat?G(n.lat,this.wrapLat,!0):n.lat,x=n.alt;return new se(p,l,x)},wrapLatLngBounds:function(n){var l=n.getCenter(),p=this.wrapLatLng(l),x=l.lat-p.lat,k=l.lng-p.lng;if(x===0&&k===0)return n;var N=n.getSouthWest(),tt=n.getNorthEast(),pt=new se(N.lat-x,N.lng-k),St=new se(tt.lat-x,tt.lng-k);return new Dt(pt,St)}},Re=f({},$e,{wrapLng:[-180,180],R:6371e3,distance:function(n,l){var p=Math.PI/180,x=n.lat*p,k=l.lat*p,N=Math.sin((l.lat-n.lat)*p/2),tt=Math.sin((l.lng-n.lng)*p/2),pt=N*N+Math.cos(x)*Math.cos(k)*tt*tt,St=2*Math.atan2(Math.sqrt(pt),Math.sqrt(1-pt));return this.R*St}}),Ye=6378137,cn={R:Ye,MAX_LATITUDE:85.0511287798,project:function(n){var l=Math.PI/180,p=this.MAX_LATITUDE,x=Math.max(Math.min(p,n.lat),-p),k=Math.sin(x*l);return new ft(this.R*n.lng*l,this.R*Math.log((1+k)/(1-k))/2)},unproject:function(n){var l=180/Math.PI;return new se((2*Math.atan(Math.exp(n.y/this.R))-Math.PI/2)*l,n.x*l/this.R)},bounds:(function(){var n=Ye*Math.PI;return new K([-n,-n],[n,n])})()};function Bi(n,l,p,x){if(Pt(n)){this._a=n[0],this._b=n[1],this._c=n[2],this._d=n[3];return}this._a=n,this._b=l,this._c=p,this._d=x}Bi.prototype={transform:function(n,l){return this._transform(n.clone(),l)},_transform:function(n,l){return l=l||1,n.x=l*(this._a*n.x+this._b),n.y=l*(this._c*n.y+this._d),n},untransform:function(n,l){return l=l||1,new ft((n.x/l-this._b)/this._a,(n.y/l-this._d)/this._c)}};function jr(n,l,p,x){return new Bi(n,l,p,x)}var er=f({},Re,{code:"EPSG:3857",projection:cn,transformation:(function(){var n=.5/(Math.PI*cn.R);return jr(n,.5,-n,.5)})()}),js=f({},er,{code:"EPSG:900913"});function Ho(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function Ti(n,l){var p="",x,k,N,tt,pt,St;for(x=0,N=n.length;x<N;x++){for(pt=n[x],k=0,tt=pt.length;k<tt;k++)St=pt[k],p+=(k?"L":"M")+St.x+" "+St.y;p+=l?ye.svg?"z":"x":""}return p||"M0 0"}var Ur=document.documentElement.style,Vn="ActiveXObject"in window,Hr=Vn&&!document.addEventListener,Xn="msLaunchUri"in navigator&&!("documentMode"in document),Sr=In("webkit"),vi=In("android"),gn=In("android 2")||In("android 3"),$o=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ln=vi&&In("Google")&&$o<537&&!("AudioNode"in window),Us=!!window.opera,Yn=!Xn&&In("chrome"),cs=In("gecko")&&!Sr&&!Us&&!Vn,hi=!Yn&&In("safari"),kr=In("phantom"),Qn="OTransition"in Ur,$r=navigator.platform.indexOf("Win")===0,fn=Vn&&"transition"in Ur,nr="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!gn,Sn="MozPerspective"in Ur,fs=!window.L_DISABLE_3D&&(fn||nr||Sn)&&!Qn&&!kr,kn=typeof orientation<"u"||In("mobile"),_o=kn&&Sr,ci=kn&&nr,ds=!window.PointerEvent&&window.MSPointerEvent,ke=!!(window.PointerEvent||ds),ti="ontouchstart"in window||!!window.TouchEvent,Vo=!window.L_NO_TOUCH&&(ti||ke),Da=kn&&Us,yo=kn&&cs,Wo=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Pr=(function(){var n=!1;try{var l=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("testPassiveEventSupport",P,l),window.removeEventListener("testPassiveEventSupport",P,l)}catch{}return n})(),ps=(function(){return!!document.createElement("canvas").getContext})(),gs=!!(document.createElementNS&&Ho("svg").createSVGRect),vn=!!gs&&(function(){var n=document.createElement("div");return n.innerHTML="<svg/>",(n.firstChild&&n.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),ms=!gs&&(function(){try{var n=document.createElement("div");n.innerHTML='<v:shape adj="1"/>';var l=n.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}})(),Ar=navigator.platform.indexOf("Mac")===0,Zo=navigator.platform.indexOf("Linux")===0;function In(n){return navigator.userAgent.toLowerCase().indexOf(n)>=0}var ye={ie:Vn,ielt9:Hr,edge:Xn,webkit:Sr,android:vi,android23:gn,androidStock:ln,opera:Us,chrome:Yn,gecko:cs,safari:hi,phantom:kr,opera12:Qn,win:$r,ie3d:fn,webkit3d:nr,gecko3d:Sn,any3d:fs,mobile:kn,mobileWebkit:_o,mobileWebkit3d:ci,msPointer:ds,pointer:ke,touch:Vo,touchNative:ti,mobileOpera:Da,mobileGecko:yo,retina:Wo,passiveEvents:Pr,canvas:ps,svg:gs,vml:ms,inlineSvg:vn,mac:Ar,linux:Zo},_s=ye.msPointer?"MSPointerDown":"pointerdown",ys=ye.msPointer?"MSPointerMove":"pointermove",Hs=ye.msPointer?"MSPointerUp":"pointerup",qo=ye.msPointer?"MSPointerCancel":"pointercancel",vo={touchstart:_s,touchmove:ys,touchend:Hs,touchcancel:qo},ir={touchstart:mn,touchmove:Ws,touchend:Ws,touchcancel:Ws},Br={},$s=!1;function Na(n,l,p){return l==="touchstart"&&xo(),ir[l]?(p=ir[l].bind(this,p),n.addEventListener(vo[l],p,!1),p):(console.warn("wrong event specified:",l),P)}function Ko(n,l,p){if(!vo[l]){console.warn("wrong event specified:",l);return}n.removeEventListener(vo[l],p,!1)}function Jo(n){Br[n.pointerId]=n}function Vs(n){Br[n.pointerId]&&(Br[n.pointerId]=n)}function vs(n){delete Br[n.pointerId]}function xo(){$s||(document.addEventListener(_s,Jo,!0),document.addEventListener(ys,Vs,!0),document.addEventListener(Hs,vs,!0),document.addEventListener(qo,vs,!0),$s=!0)}function Ws(n,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var p in Br)l.touches.push(Br[p]);l.changedTouches=[l],n(l)}}function mn(n,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&_n(l),Ws(n,l)}function Zs(n){var l={},p,x;for(x in n)p=n[x],l[x]=p&&p.bind?p.bind(n):p;return n=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var wo=200;function qs(n,l){n.addEventListener("dblclick",l);var p=0,x;function k(N){if(N.detail!==1){x=N.detail;return}if(!(N.pointerType==="mouse"||N.sourceCapabilities&&!N.sourceCapabilities.firesTouchEvents)){var tt=Ui(N);if(!(tt.some(function(St){return St instanceof HTMLLabelElement&&St.attributes.for})&&!tt.some(function(St){return St instanceof HTMLInputElement||St instanceof HTMLSelectElement}))){var pt=Date.now();pt-p<=wo?(x++,x===2&&l(Zs(N))):x=1,p=pt}}}return n.addEventListener("click",k),{dblclick:l,simDblclick:k}}function Tr(n,l){n.removeEventListener("dblclick",l.dblclick),n.removeEventListener("click",l.simDblclick)}var Ks=ge(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Vr=ge(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),xs=Vr==="webkitTransition"||Vr==="OTransition"?Vr+"End":"transitionend";function xi(n){return typeof n=="string"?document.getElementById(n):n}function rr(n,l){var p=n.style[l]||n.currentStyle&&n.currentStyle[l];if((!p||p==="auto")&&document.defaultView){var x=document.defaultView.getComputedStyle(n,null);p=x?x[l]:null}return p==="auto"?null:p}function De(n,l,p){var x=document.createElement(n);return x.className=l||"",p&&p.appendChild(x),x}function tn(n){var l=n.parentNode;l&&l.removeChild(n)}function Wr(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function z(n){var l=n.parentNode;l&&l.lastChild!==n&&l.appendChild(n)}function bt(n){var l=n.parentNode;l&&l.firstChild!==n&&l.insertBefore(n,l.firstChild)}function Bt(n,l){if(n.classList!==void 0)return n.classList.contains(l);var p=qt(n);return p.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(p)}function It(n,l){if(n.classList!==void 0)for(var p=q(l),x=0,k=p.length;x<k;x++)n.classList.add(p[x]);else if(!Bt(n,l)){var N=qt(n);Zt(n,(N?N+" ":"")+l)}}function Tt(n,l){n.classList!==void 0?n.classList.remove(l):Zt(n,V((" "+qt(n)+" ").replace(" "+l+" "," ")))}function Zt(n,l){n.className.baseVal===void 0?n.className=l:n.className.baseVal=l}function qt(n){return n.correspondingElement&&(n=n.correspondingElement),n.className.baseVal===void 0?n.className:n.className.baseVal}function he(n,l){"opacity"in n.style?n.style.opacity=l:"filter"in n.style&&ue(n,l)}function ue(n,l){var p=!1,x="DXImageTransform.Microsoft.Alpha";try{p=n.filters.item(x)}catch{if(l===1)return}l=Math.round(l*100),p?(p.Enabled=l!==100,p.Opacity=l):n.style.filter+=" progid:"+x+"(opacity="+l+")"}function ge(n){for(var l=document.documentElement.style,p=0;p<n.length;p++)if(n[p]in l)return n[p];return!1}function ce(n,l,p){var x=l||new ft(0,0);n.style[Ks]=(ye.ie3d?"translate("+x.x+"px,"+x.y+"px)":"translate3d("+x.x+"px,"+x.y+"px,0)")+(p?" scale("+p+")":"")}function fe(n,l){n._leaflet_pos=l,ye.any3d?ce(n,l):(n.style.left=l.x+"px",n.style.top=l.y+"px")}function we(n){return n._leaflet_pos||new ft(0,0)}var ve,je,We;if("onselectstart"in document)ve=function(){Pe(window,"selectstart",_n)},je=function(){Qe(window,"selectstart",_n)};else{var Ve=ge(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ve=function(){if(Ve){var n=document.documentElement.style;We=n[Ve],n[Ve]="none"}},je=function(){Ve&&(document.documentElement.style[Ve]=We,We=void 0)}}function wi(){Pe(window,"dragstart",_n)}function ws(){Qe(window,"dragstart",_n)}var Ce,Ne;function On(n){for(;n.tabIndex===-1;)n=n.parentNode;n.style&&(Mn(),Ce=n,Ne=n.style.outlineStyle,n.style.outlineStyle="none",Pe(window,"keydown",Mn))}function Mn(){Ce&&(Ce.style.outlineStyle=Ne,Ce=void 0,Ne=void 0,Qe(window,"keydown",Mn))}function En(n){do n=n.parentNode;while((!n.offsetWidth||!n.offsetHeight)&&n!==document.body);return n}function ei(n){var l=n.getBoundingClientRect();return{x:l.width/n.offsetWidth||1,y:l.height/n.offsetHeight||1,boundingClientRect:l}}var Ln={__proto__:null,TRANSFORM:Ks,TRANSITION:Vr,TRANSITION_END:xs,get:xi,getStyle:rr,create:De,remove:tn,empty:Wr,toFront:z,toBack:bt,hasClass:Bt,addClass:It,removeClass:Tt,setClass:Zt,getClass:qt,setOpacity:he,testProp:ge,setTransform:ce,setPosition:fe,getPosition:we,get disableTextSelection(){return ve},get enableTextSelection(){return je},disableImageDrag:wi,enableImageDrag:ws,preventOutline:On,restoreOutline:Mn,getSizedParentNode:En,getScale:ei};function Pe(n,l,p,x){if(l&&typeof l=="object")for(var k in l)Mo(n,k,l[k],p);else{l=q(l);for(var N=0,tt=l.length;N<tt;N++)Mo(n,l[N],p,x)}return this}var on="_leaflet_events";function Qe(n,l,p,x){if(arguments.length===1)Js(n),delete n[on];else if(l&&typeof l=="object")for(var k in l)Mi(n,k,l[k],p);else if(l=q(l),arguments.length===2)Js(n,function(pt){return Ut(l,pt)!==-1});else for(var N=0,tt=l.length;N<tt;N++)Mi(n,l[N],p,x);return this}function Js(n,l){for(var p in n[on]){var x=p.split(/\d/)[0];(!l||l(x))&&Mi(n,x,null,null,p)}}var Rr={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Mo(n,l,p,x){var k=l+E(p)+(x?"_"+E(x):"");if(n[on]&&n[on][k])return this;var N=function(pt){return p.call(x||n,pt||window.event)},tt=N;!ye.touchNative&&ye.pointer&&l.indexOf("touch")===0?N=Na(n,l,N):ye.touch&&l==="dblclick"?N=qs(n,N):"addEventListener"in n?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?n.addEventListener(Rr[l]||l,N,ye.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(N=function(pt){pt=pt||window.event,Eo(n,pt)&&tt(pt)},n.addEventListener(Rr[l],N,!1)):n.addEventListener(l,tt,!1):n.attachEvent("on"+l,N),n[on]=n[on]||{},n[on][k]=N}function Mi(n,l,p,x,k){k=k||l+E(p)+(x?"_"+E(x):"");var N=n[on]&&n[on][k];if(!N)return this;!ye.touchNative&&ye.pointer&&l.indexOf("touch")===0?Ko(n,l,N):ye.touch&&l==="dblclick"?Tr(n,N):"removeEventListener"in n?n.removeEventListener(Rr[l]||l,N,!1):n.detachEvent("on"+l,N),n[on][k]=null}function fi(n){return n.stopPropagation?n.stopPropagation():n.originalEvent?n.originalEvent._stopped=!0:n.cancelBubble=!0,this}function Xs(n){return Mo(n,"wheel",fi),this}function Ms(n){return Pe(n,"mousedown touchstart dblclick contextmenu",fi),n._leaflet_disable_click=!0,this}function _n(n){return n.preventDefault?n.preventDefault():n.returnValue=!1,this}function Ei(n){return _n(n),fi(n),this}function Ui(n){if(n.composedPath)return n.composedPath();for(var l=[],p=n.target;p;)l.push(p),p=p.parentNode;return l}function Ir(n,l){if(!l)return new ft(n.clientX,n.clientY);var p=ei(l),x=p.boundingClientRect;return new ft((n.clientX-x.left)/p.x-l.clientLeft,(n.clientY-x.top)/p.y-l.clientTop)}var Xo=ye.linux&&ye.chrome?window.devicePixelRatio:ye.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Yo(n){return ye.edge?n.wheelDeltaY/2:n.deltaY&&n.deltaMode===0?-n.deltaY/Xo:n.deltaY&&n.deltaMode===1?-n.deltaY*20:n.deltaY&&n.deltaMode===2?-n.deltaY*60:n.deltaX||n.deltaZ?0:n.wheelDelta?(n.wheelDeltaY||n.wheelDelta)/2:n.detail&&Math.abs(n.detail)<32765?-n.detail*20:n.detail?n.detail/-32765*60:0}function Eo(n,l){var p=l.relatedTarget;if(!p)return!0;try{for(;p&&p!==n;)p=p.parentNode}catch{return!1}return p!==n}var Es={__proto__:null,on:Pe,off:Qe,stopPropagation:fi,disableScrollPropagation:Xs,disableClickPropagation:Ms,preventDefault:_n,stop:Ei,getPropagationPath:Ui,getMousePosition:Ir,getWheelDelta:Yo,isExternalTarget:Eo,addListener:Pe,removeListener:Qe},Qo=mt.extend({run:function(n,l,p,x){this.stop(),this._el=n,this._inProgress=!0,this._duration=p||.25,this._easeOutPower=1/Math.max(x||.5,.2),this._startPos=we(n),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=te(this._animate,this),this._step()},_step:function(n){var l=+new Date-this._startTime,p=this._duration*1e3;l<p?this._runFrame(this._easeOut(l/p),n):(this._runFrame(1),this._complete())},_runFrame:function(n,l){var p=this._startPos.add(this._offset.multiplyBy(n));l&&p._round(),fe(this._el,p),this.fire("step")},_complete:function(){ee(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(n){return 1-Math.pow(1-n,this._easeOutPower)}}),qe=mt.extend({options:{crs:er,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(n,l){l=Z(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(n),this._initLayout(),this._onResize=y(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(Jt(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Vr&&ye.any3d&&!ye.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Pe(this._proxy,xs,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(n,l,p){if(l=l===void 0?this._zoom:this._limitZoom(l),n=this._limitCenter(Jt(n),l,this.options.maxBounds),p=p||{},this._stop(),this._loaded&&!p.reset&&p!==!0){p.animate!==void 0&&(p.zoom=f({animate:p.animate},p.zoom),p.pan=f({animate:p.animate,duration:p.duration},p.pan));var x=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(n,l,p.zoom):this._tryAnimatedPan(n,p.pan);if(x)return clearTimeout(this._sizeTimer),this}return this._resetView(n,l,p.pan&&p.pan.noMoveStart),this},setZoom:function(n,l){return this._loaded?this.setView(this.getCenter(),n,{zoom:l}):(this._zoom=n,this)},zoomIn:function(n,l){return n=n||(ye.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+n,l)},zoomOut:function(n,l){return n=n||(ye.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-n,l)},setZoomAround:function(n,l,p){var x=this.getZoomScale(l),k=this.getSize().divideBy(2),N=n instanceof ft?n:this.latLngToContainerPoint(n),tt=N.subtract(k).multiplyBy(1-1/x),pt=this.containerPointToLatLng(k.add(tt));return this.setView(pt,l,{zoom:p})},_getBoundsCenterZoom:function(n,l){l=l||{},n=n.getBounds?n.getBounds():Ht(n);var p=ct(l.paddingTopLeft||l.padding||[0,0]),x=ct(l.paddingBottomRight||l.padding||[0,0]),k=this.getBoundsZoom(n,!1,p.add(x));if(k=typeof l.maxZoom=="number"?Math.min(l.maxZoom,k):k,k===1/0)return{center:n.getCenter(),zoom:k};var N=x.subtract(p).divideBy(2),tt=this.project(n.getSouthWest(),k),pt=this.project(n.getNorthEast(),k),St=this.unproject(tt.add(pt).divideBy(2).add(N),k);return{center:St,zoom:k}},fitBounds:function(n,l){if(n=Ht(n),!n.isValid())throw new Error("Bounds are not valid.");var p=this._getBoundsCenterZoom(n,l);return this.setView(p.center,p.zoom,l)},fitWorld:function(n){return this.fitBounds([[-90,-180],[90,180]],n)},panTo:function(n,l){return this.setView(n,this._zoom,{pan:l})},panBy:function(n,l){if(n=ct(n).round(),l=l||{},!n.x&&!n.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(n))return this._resetView(this.unproject(this.project(this.getCenter()).add(n)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Qo,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){It(this._mapPane,"leaflet-pan-anim");var p=this._getMapPanePos().subtract(n).round();this._panAnim.run(this._mapPane,p,l.duration||.25,l.easeLinearity)}else this._rawPanBy(n),this.fire("move").fire("moveend");return this},flyTo:function(n,l,p){if(p=p||{},p.animate===!1||!ye.any3d)return this.setView(n,l,p);this._stop();var x=this.project(this.getCenter()),k=this.project(n),N=this.getSize(),tt=this._zoom;n=Jt(n),l=l===void 0?tt:l;var pt=Math.max(N.x,N.y),St=pt*this.getZoomScale(tt,l),Ft=k.distanceTo(x)||1,ae=1.42,Se=ae*ae;function He(en){var Ps=en?-1:1,Zl=en?St:pt,mr=St*St-pt*pt+Ps*Se*Se*Ft*Ft,As=2*Zl*Se*Ft,_r=mr/As,ts=Math.sqrt(_r*_r+1)-_r,pa=ts<1e-9?-18:Math.log(ts);return pa}function zn(en){return(Math.exp(en)-Math.exp(-en))/2}function An(en){return(Math.exp(en)+Math.exp(-en))/2}function ii(en){return zn(en)/An(en)}var xn=He(0);function dr(en){return pt*(An(xn)/An(xn+ae*en))}function Io(en){return pt*(An(xn)*ii(xn+ae*en)-zn(xn))/Se}function qi(en){return 1-Math.pow(1-en,1.5)}var Ya=Date.now(),pr=(He(1)-xn)/ae,gr=p.duration?1e3*p.duration:1e3*pr*.8;function lo(){var en=(Date.now()-Ya)/gr,Ps=qi(en)*pr;en<=1?(this._flyToFrame=te(lo,this),this._move(this.unproject(x.add(k.subtract(x).multiplyBy(Io(Ps)/Ft)),tt),this.getScaleZoom(pt/dr(Ps),tt),{flyTo:!0})):this._move(n,l)._moveEnd(!0)}return this._moveStart(!0,p.noMoveStart),lo.call(this),this},flyToBounds:function(n,l){var p=this._getBoundsCenterZoom(n,l);return this.flyTo(p.center,p.zoom,l)},setMaxBounds:function(n){return n=Ht(n),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),n.isValid()?(this.options.maxBounds=n,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(n){var l=this.options.minZoom;return this.options.minZoom=n,this._loaded&&l!==n&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(n):this},setMaxZoom:function(n){var l=this.options.maxZoom;return this.options.maxZoom=n,this._loaded&&l!==n&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(n):this},panInsideBounds:function(n,l){this._enforcingBounds=!0;var p=this.getCenter(),x=this._limitCenter(p,this._zoom,Ht(n));return p.equals(x)||this.panTo(x,l),this._enforcingBounds=!1,this},panInside:function(n,l){l=l||{};var p=ct(l.paddingTopLeft||l.padding||[0,0]),x=ct(l.paddingBottomRight||l.padding||[0,0]),k=this.project(this.getCenter()),N=this.project(n),tt=this.getPixelBounds(),pt=_t([tt.min.add(p),tt.max.subtract(x)]),St=pt.getSize();if(!pt.contains(N)){this._enforcingBounds=!0;var Ft=N.subtract(pt.getCenter()),ae=pt.extend(N).getSize().subtract(St);k.x+=Ft.x<0?-ae.x:ae.x,k.y+=Ft.y<0?-ae.y:ae.y,this.panTo(this.unproject(k),l),this._enforcingBounds=!1}return this},invalidateSize:function(n){if(!this._loaded)return this;n=f({animate:!1,pan:!0},n===!0?{animate:!0}:n);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var p=this.getSize(),x=l.divideBy(2).round(),k=p.divideBy(2).round(),N=x.subtract(k);return!N.x&&!N.y?this:(n.animate&&n.pan?this.panBy(N):(n.pan&&this._rawPanBy(N),this.fire("move"),n.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(y(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:p}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(n){if(n=this._locateOptions=f({timeout:1e4,watch:!1},n),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=y(this._handleGeolocationResponse,this),p=y(this._handleGeolocationError,this);return n.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,p,n):navigator.geolocation.getCurrentPosition(l,p,n),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(n){if(this._container._leaflet_id){var l=n.code,p=n.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+p+"."})}},_handleGeolocationResponse:function(n){if(this._container._leaflet_id){var l=n.coords.latitude,p=n.coords.longitude,x=new se(l,p),k=x.toBounds(n.coords.accuracy*2),N=this._locateOptions;if(N.setView){var tt=this.getBoundsZoom(k);this.setView(x,N.maxZoom?Math.min(tt,N.maxZoom):tt)}var pt={latlng:x,bounds:k,timestamp:n.timestamp};for(var St in n.coords)typeof n.coords[St]=="number"&&(pt[St]=n.coords[St]);this.fire("locationfound",pt)}},addHandler:function(n,l){if(!l)return this;var p=this[n]=new l(this);return this._handlers.push(p),this.options[n]&&p.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),tn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(ee(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var n;for(n in this._layers)this._layers[n].remove();for(n in this._panes)tn(this._panes[n]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(n,l){var p="leaflet-pane"+(n?" leaflet-"+n.replace("Pane","")+"-pane":""),x=De("div",p,l||this._mapPane);return n&&(this._panes[n]=x),x},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var n=this.getPixelBounds(),l=this.unproject(n.getBottomLeft()),p=this.unproject(n.getTopRight());return new Dt(l,p)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(n,l,p){n=Ht(n),p=ct(p||[0,0]);var x=this.getZoom()||0,k=this.getMinZoom(),N=this.getMaxZoom(),tt=n.getNorthWest(),pt=n.getSouthEast(),St=this.getSize().subtract(p),Ft=_t(this.project(pt,x),this.project(tt,x)).getSize(),ae=ye.any3d?this.options.zoomSnap:1,Se=St.x/Ft.x,He=St.y/Ft.y,zn=l?Math.max(Se,He):Math.min(Se,He);return x=this.getScaleZoom(zn,x),ae&&(x=Math.round(x/(ae/100))*(ae/100),x=l?Math.ceil(x/ae)*ae:Math.floor(x/ae)*ae),Math.max(k,Math.min(N,x))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ft(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(n,l){var p=this._getTopLeftPoint(n,l);return new K(p,p.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(n){return this.options.crs.getProjectedBounds(n===void 0?this.getZoom():n)},getPane:function(n){return typeof n=="string"?this._panes[n]:n},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(n,l){var p=this.options.crs;return l=l===void 0?this._zoom:l,p.scale(n)/p.scale(l)},getScaleZoom:function(n,l){var p=this.options.crs;l=l===void 0?this._zoom:l;var x=p.zoom(n*p.scale(l));return isNaN(x)?1/0:x},project:function(n,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(Jt(n),l)},unproject:function(n,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(ct(n),l)},layerPointToLatLng:function(n){var l=ct(n).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(n){var l=this.project(Jt(n))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(n){return this.options.crs.wrapLatLng(Jt(n))},wrapLatLngBounds:function(n){return this.options.crs.wrapLatLngBounds(Ht(n))},distance:function(n,l){return this.options.crs.distance(Jt(n),Jt(l))},containerPointToLayerPoint:function(n){return ct(n).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(n){return ct(n).add(this._getMapPanePos())},containerPointToLatLng:function(n){var l=this.containerPointToLayerPoint(ct(n));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(n){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Jt(n)))},mouseEventToContainerPoint:function(n){return Ir(n,this._container)},mouseEventToLayerPoint:function(n){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(n))},mouseEventToLatLng:function(n){return this.layerPointToLatLng(this.mouseEventToLayerPoint(n))},_initContainer:function(n){var l=this._container=xi(n);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Pe(l,"scroll",this._onScroll,this),this._containerId=E(l)},_initLayout:function(){var n=this._container;this._fadeAnimated=this.options.fadeAnimation&&ye.any3d,It(n,"leaflet-container"+(ye.touch?" leaflet-touch":"")+(ye.retina?" leaflet-retina":"")+(ye.ielt9?" leaflet-oldie":"")+(ye.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=rr(n,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(n.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var n=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),fe(this._mapPane,new ft(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(It(n.markerPane,"leaflet-zoom-hide"),It(n.shadowPane,"leaflet-zoom-hide"))},_resetView:function(n,l,p){fe(this._mapPane,new ft(0,0));var x=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var k=this._zoom!==l;this._moveStart(k,p)._move(n,l)._moveEnd(k),this.fire("viewreset"),x&&this.fire("load")},_moveStart:function(n,l){return n&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(n,l,p,x){l===void 0&&(l=this._zoom);var k=this._zoom!==l;return this._zoom=l,this._lastCenter=n,this._pixelOrigin=this._getNewPixelOrigin(n),x?p&&p.pinch&&this.fire("zoom",p):((k||p&&p.pinch)&&this.fire("zoom",p),this.fire("move",p)),this},_moveEnd:function(n){return n&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return ee(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(n){fe(this._mapPane,this._getMapPanePos().subtract(n))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(n){this._targets={},this._targets[E(this._container)]=this;var l=n?Qe:Pe;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),ye.any3d&&this.options.transform3DLimit&&(n?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){ee(this._resizeRequest),this._resizeRequest=te(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var n=this._getMapPanePos();Math.max(Math.abs(n.x),Math.abs(n.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(n,l){for(var p=[],x,k=l==="mouseout"||l==="mouseover",N=n.target||n.srcElement,tt=!1;N;){if(x=this._targets[E(N)],x&&(l==="click"||l==="preclick")&&this._draggableMoved(x)){tt=!0;break}if(x&&x.listens(l,!0)&&(k&&!Eo(N,n)||(p.push(x),k))||N===this._container)break;N=N.parentNode}return!p.length&&!tt&&!k&&this.listens(l,!0)&&(p=[this]),p},_isClickDisabled:function(n){for(;n&&n!==this._container;){if(n._leaflet_disable_click)return!0;n=n.parentNode}},_handleDOMEvent:function(n){var l=n.target||n.srcElement;if(!(!this._loaded||l._leaflet_disable_events||n.type==="click"&&this._isClickDisabled(l))){var p=n.type;p==="mousedown"&&On(l),this._fireDOMEvent(n,p)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(n,l,p){if(n.type==="click"){var x=f({},n);x.type="preclick",this._fireDOMEvent(x,x.type,p)}var k=this._findEventTargets(n,l);if(p){for(var N=[],tt=0;tt<p.length;tt++)p[tt].listens(l,!0)&&N.push(p[tt]);k=N.concat(k)}if(k.length){l==="contextmenu"&&_n(n);var pt=k[0],St={originalEvent:n};if(n.type!=="keypress"&&n.type!=="keydown"&&n.type!=="keyup"){var Ft=pt.getLatLng&&(!pt._radius||pt._radius<=10);St.containerPoint=Ft?this.latLngToContainerPoint(pt.getLatLng()):this.mouseEventToContainerPoint(n),St.layerPoint=this.containerPointToLayerPoint(St.containerPoint),St.latlng=Ft?pt.getLatLng():this.layerPointToLatLng(St.layerPoint)}for(tt=0;tt<k.length;tt++)if(k[tt].fire(l,St,!0),St.originalEvent._stopped||k[tt].options.bubblingMouseEvents===!1&&Ut(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(n){return n=n.dragging&&n.dragging.enabled()?n:this,n.dragging&&n.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var n=0,l=this._handlers.length;n<l;n++)this._handlers[n].disable()},whenReady:function(n,l){return this._loaded?n.call(l||this,{target:this}):this.on("load",n,l),this},_getMapPanePos:function(){return we(this._mapPane)||new ft(0,0)},_moved:function(){var n=this._getMapPanePos();return n&&!n.equals([0,0])},_getTopLeftPoint:function(n,l){var p=n&&l!==void 0?this._getNewPixelOrigin(n,l):this.getPixelOrigin();return p.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(n,l){var p=this.getSize()._divideBy(2);return this.project(n,l)._subtract(p)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(n,l,p){var x=this._getNewPixelOrigin(p,l);return this.project(n,l)._subtract(x)},_latLngBoundsToNewLayerBounds:function(n,l,p){var x=this._getNewPixelOrigin(p,l);return _t([this.project(n.getSouthWest(),l)._subtract(x),this.project(n.getNorthWest(),l)._subtract(x),this.project(n.getSouthEast(),l)._subtract(x),this.project(n.getNorthEast(),l)._subtract(x)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(n){return this.latLngToLayerPoint(n).subtract(this._getCenterLayerPoint())},_limitCenter:function(n,l,p){if(!p)return n;var x=this.project(n,l),k=this.getSize().divideBy(2),N=new K(x.subtract(k),x.add(k)),tt=this._getBoundsOffset(N,p,l);return Math.abs(tt.x)<=1&&Math.abs(tt.y)<=1?n:this.unproject(x.add(tt),l)},_limitOffset:function(n,l){if(!l)return n;var p=this.getPixelBounds(),x=new K(p.min.add(n),p.max.add(n));return n.add(this._getBoundsOffset(x,l))},_getBoundsOffset:function(n,l,p){var x=_t(this.project(l.getNorthEast(),p),this.project(l.getSouthWest(),p)),k=x.min.subtract(n.min),N=x.max.subtract(n.max),tt=this._rebound(k.x,-N.x),pt=this._rebound(k.y,-N.y);return new ft(tt,pt)},_rebound:function(n,l){return n+l>0?Math.round(n-l)/2:Math.max(0,Math.ceil(n))-Math.max(0,Math.floor(l))},_limitZoom:function(n){var l=this.getMinZoom(),p=this.getMaxZoom(),x=ye.any3d?this.options.zoomSnap:1;return x&&(n=Math.round(n/x)*x),Math.max(l,Math.min(p,n))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Tt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(n,l){var p=this._getCenterOffset(n)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(p)?!1:(this.panBy(p,l),!0)},_createAnimProxy:function(){var n=this._proxy=De("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(n),this.on("zoomanim",function(l){var p=Ks,x=this._proxy.style[p];ce(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),x===this._proxy.style[p]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){tn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var n=this.getCenter(),l=this.getZoom();ce(this._proxy,this.project(n,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(n){this._animatingZoom&&n.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(n,l,p){if(this._animatingZoom)return!0;if(p=p||{},!this._zoomAnimated||p.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var x=this.getZoomScale(l),k=this._getCenterOffset(n)._divideBy(1-1/x);return p.animate!==!0&&!this.getSize().contains(k)?!1:(te(function(){this._moveStart(!0,p.noMoveStart||!1)._animateZoom(n,l,!0)},this),!0)},_animateZoom:function(n,l,p,x){this._mapPane&&(p&&(this._animatingZoom=!0,this._animateToCenter=n,this._animateToZoom=l,It(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:n,zoom:l,noUpdate:x}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(y(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Tt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Or(n,l){return new qe(n,l)}var Oe=Ie.extend({options:{position:"topright"},initialize:function(n){Z(this,n)},getPosition:function(){return this.options.position},setPosition:function(n){var l=this._map;return l&&l.removeControl(this),this.options.position=n,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(n){this.remove(),this._map=n;var l=this._container=this.onAdd(n),p=this.getPosition(),x=n._controlCorners[p];return It(l,"leaflet-control"),p.indexOf("bottom")!==-1?x.insertBefore(l,x.firstChild):x.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(tn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(n){this._map&&n&&n.screenX>0&&n.screenY>0&&this._map.getContainer().focus()}}),sr=function(n){return new Oe(n)};qe.include({addControl:function(n){return n.addTo(this),this},removeControl:function(n){return n.remove(),this},_initControlPos:function(){var n=this._controlCorners={},l="leaflet-",p=this._controlContainer=De("div",l+"control-container",this._container);function x(k,N){var tt=l+k+" "+l+N;n[k+N]=De("div",tt,p)}x("top","left"),x("top","right"),x("bottom","left"),x("bottom","right")},_clearControlPos:function(){for(var n in this._controlCorners)tn(this._controlCorners[n]);tn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ys=Oe.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(n,l,p,x){return p<x?-1:x<p?1:0}},initialize:function(n,l,p){Z(this,p),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var x in n)this._addLayer(n[x],x);for(x in l)this._addLayer(l[x],x,!0)},onAdd:function(n){this._initLayout(),this._update(),this._map=n,n.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(n){return Oe.prototype.addTo.call(this,n),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var n=0;n<this._layers.length;n++)this._layers[n].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(n,l){return this._addLayer(n,l),this._map?this._update():this},addOverlay:function(n,l){return this._addLayer(n,l,!0),this._map?this._update():this},removeLayer:function(n){n.off("add remove",this._onLayerChange,this);var l=this._getLayer(E(n));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){It(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var n=this._map.getSize().y-(this._container.offsetTop+50);return n<this._section.clientHeight?(It(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=n+"px"):Tt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Tt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var n="leaflet-control-layers",l=this._container=De("div",n),p=this.options.collapsed;l.setAttribute("aria-haspopup",!0),Ms(l),Xs(l);var x=this._section=De("section",n+"-list");p&&(this._map.on("click",this.collapse,this),Pe(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var k=this._layersLink=De("a",n+"-toggle",l);k.href="#",k.title="Layers",k.setAttribute("role","button"),Pe(k,{keydown:function(N){N.keyCode===13&&this._expandSafely()},click:function(N){_n(N),this._expandSafely()}},this),p||this.expand(),this._baseLayersList=De("div",n+"-base",x),this._separator=De("div",n+"-separator",x),this._overlaysList=De("div",n+"-overlays",x),l.appendChild(x)},_getLayer:function(n){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&E(this._layers[l].layer)===n)return this._layers[l]},_addLayer:function(n,l,p){this._map&&n.on("add remove",this._onLayerChange,this),this._layers.push({layer:n,name:l,overlay:p}),this.options.sortLayers&&this._layers.sort(y(function(x,k){return this.options.sortFunction(x.layer,k.layer,x.name,k.name)},this)),this.options.autoZIndex&&n.setZIndex&&(this._lastZIndex++,n.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Wr(this._baseLayersList),Wr(this._overlaysList),this._layerControlInputs=[];var n,l,p,x,k=0;for(p=0;p<this._layers.length;p++)x=this._layers[p],this._addItem(x),l=l||x.overlay,n=n||!x.overlay,k+=x.overlay?0:1;return this.options.hideSingleBase&&(n=n&&k>1,this._baseLayersList.style.display=n?"":"none"),this._separator.style.display=l&&n?"":"none",this},_onLayerChange:function(n){this._handlingClick||this._update();var l=this._getLayer(E(n.target)),p=l.overlay?n.type==="add"?"overlayadd":"overlayremove":n.type==="add"?"baselayerchange":null;p&&this._map.fire(p,l)},_createRadioElement:function(n,l){var p='<input type="radio" class="leaflet-control-layers-selector" name="'+n+'"'+(l?' checked="checked"':"")+"/>",x=document.createElement("div");return x.innerHTML=p,x.firstChild},_addItem:function(n){var l=document.createElement("label"),p=this._map.hasLayer(n.layer),x;n.overlay?(x=document.createElement("input"),x.type="checkbox",x.className="leaflet-control-layers-selector",x.defaultChecked=p):x=this._createRadioElement("leaflet-base-layers_"+E(this),p),this._layerControlInputs.push(x),x.layerId=E(n.layer),Pe(x,"click",this._onInputClick,this);var k=document.createElement("span");k.innerHTML=" "+n.name;var N=document.createElement("span");l.appendChild(N),N.appendChild(x),N.appendChild(k);var tt=n.overlay?this._overlaysList:this._baseLayersList;return tt.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var n=this._layerControlInputs,l,p,x=[],k=[];this._handlingClick=!0;for(var N=n.length-1;N>=0;N--)l=n[N],p=this._getLayer(l.layerId).layer,l.checked?x.push(p):l.checked||k.push(p);for(N=0;N<k.length;N++)this._map.hasLayer(k[N])&&this._map.removeLayer(k[N]);for(N=0;N<x.length;N++)this._map.hasLayer(x[N])||this._map.addLayer(x[N]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var n=this._layerControlInputs,l,p,x=this._map.getZoom(),k=n.length-1;k>=0;k--)l=n[k],p=this._getLayer(l.layerId).layer,l.disabled=p.options.minZoom!==void 0&&x<p.options.minZoom||p.options.maxZoom!==void 0&&x>p.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var n=this._section;this._preventClick=!0,Pe(n,"click",_n),this.expand();var l=this;setTimeout(function(){Qe(n,"click",_n),l._preventClick=!1})}}),ta=function(n,l,p){return new Ys(n,l,p)},Ls=Oe.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(n){var l="leaflet-control-zoom",p=De("div",l+" leaflet-bar"),x=this.options;return this._zoomInButton=this._createButton(x.zoomInText,x.zoomInTitle,l+"-in",p,this._zoomIn),this._zoomOutButton=this._createButton(x.zoomOutText,x.zoomOutTitle,l+"-out",p,this._zoomOut),this._updateDisabled(),n.on("zoomend zoomlevelschange",this._updateDisabled,this),p},onRemove:function(n){n.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(n){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(n.shiftKey?3:1))},_zoomOut:function(n){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(n.shiftKey?3:1))},_createButton:function(n,l,p,x,k){var N=De("a",p,x);return N.innerHTML=n,N.href="#",N.title=l,N.setAttribute("role","button"),N.setAttribute("aria-label",l),Ms(N),Pe(N,"click",Ei),Pe(N,"click",k,this),Pe(N,"click",this._refocusOnMap,this),N},_updateDisabled:function(){var n=this._map,l="leaflet-disabled";Tt(this._zoomInButton,l),Tt(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||n._zoom===n.getMinZoom())&&(It(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||n._zoom===n.getMaxZoom())&&(It(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});qe.mergeOptions({zoomControl:!0}),qe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ls,this.addControl(this.zoomControl))});var ll=function(n){return new Ls(n)},Wn=Oe.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(n){var l="leaflet-control-scale",p=De("div",l),x=this.options;return this._addScales(x,l+"-line",p),n.on(x.updateWhenIdle?"moveend":"move",this._update,this),n.whenReady(this._update,this),p},onRemove:function(n){n.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(n,l,p){n.metric&&(this._mScale=De("div",l,p)),n.imperial&&(this._iScale=De("div",l,p))},_update:function(){var n=this._map,l=n.getSize().y/2,p=n.distance(n.containerPointToLatLng([0,l]),n.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(p)},_updateScales:function(n){this.options.metric&&n&&this._updateMetric(n),this.options.imperial&&n&&this._updateImperial(n)},_updateMetric:function(n){var l=this._getRoundNum(n),p=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,p,l/n)},_updateImperial:function(n){var l=n*3.2808399,p,x,k;l>5280?(p=l/5280,x=this._getRoundNum(p),this._updateScale(this._iScale,x+" mi",x/p)):(k=this._getRoundNum(l),this._updateScale(this._iScale,k+" ft",k/l))},_updateScale:function(n,l,p){n.style.width=Math.round(this.options.maxWidth*p)+"px",n.innerHTML=l},_getRoundNum:function(n){var l=Math.pow(10,(Math.floor(n)+"").length-1),p=n/l;return p=p>=10?10:p>=5?5:p>=3?3:p>=2?2:1,l*p}}),Dr=function(n){return new Wn(n)},Fa='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',di=Oe.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ye.inlineSvg?Fa+" ":"")+"Leaflet</a>"},initialize:function(n){Z(this,n),this._attributions={}},onAdd:function(n){n.attributionControl=this,this._container=De("div","leaflet-control-attribution"),Ms(this._container);for(var l in n._layers)n._layers[l].getAttribution&&this.addAttribution(n._layers[l].getAttribution());return this._update(),n.on("layeradd",this._addAttribution,this),this._container},onRemove:function(n){n.off("layeradd",this._addAttribution,this)},_addAttribution:function(n){n.layer.getAttribution&&(this.addAttribution(n.layer.getAttribution()),n.layer.once("remove",function(){this.removeAttribution(n.layer.getAttribution())},this))},setPrefix:function(n){return this.options.prefix=n,this._update(),this},addAttribution:function(n){return n?(this._attributions[n]||(this._attributions[n]=0),this._attributions[n]++,this._update(),this):this},removeAttribution:function(n){return n?(this._attributions[n]&&(this._attributions[n]--,this._update()),this):this},_update:function(){if(this._map){var n=[];for(var l in this._attributions)this._attributions[l]&&n.push(l);var p=[];this.options.prefix&&p.push(this.options.prefix),n.length&&p.push(n.join(", ")),this._container.innerHTML=p.join(' <span aria-hidden="true">|</span> ')}}});qe.mergeOptions({attributionControl:!0}),qe.addInitHook(function(){this.options.attributionControl&&new di().addTo(this)});var ul=function(n){return new di(n)};Oe.Layers=Ys,Oe.Zoom=Ls,Oe.Scale=Wn,Oe.Attribution=di,sr.layers=ta,sr.zoom=ll,sr.scale=Dr,sr.attribution=ul;var Dn=Ie.extend({initialize:function(n){this._map=n},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Dn.addTo=function(n,l){return n.addHandler(l,this),this};var Ga={Events:At},Qs=ye.touch?"touchstart mousedown":"mousedown",Hi=mt.extend({options:{clickTolerance:3},initialize:function(n,l,p,x){Z(this,x),this._element=n,this._dragStartTarget=l||n,this._preventOutline=p},enable:function(){this._enabled||(Pe(this._dragStartTarget,Qs,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Hi._dragging===this&&this.finishDrag(!0),Qe(this._dragStartTarget,Qs,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(n){if(this._enabled&&(this._moved=!1,!Bt(this._element,"leaflet-zoom-anim"))){if(n.touches&&n.touches.length!==1){Hi._dragging===this&&this.finishDrag();return}if(!(Hi._dragging||n.shiftKey||n.which!==1&&n.button!==1&&!n.touches)&&(Hi._dragging=this,this._preventOutline&&On(this._element),wi(),ve(),!this._moving)){this.fire("down");var l=n.touches?n.touches[0]:n,p=En(this._element);this._startPoint=new ft(l.clientX,l.clientY),this._startPos=we(this._element),this._parentScale=ei(p);var x=n.type==="mousedown";Pe(document,x?"mousemove":"touchmove",this._onMove,this),Pe(document,x?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(n){if(this._enabled){if(n.touches&&n.touches.length>1){this._moved=!0;return}var l=n.touches&&n.touches.length===1?n.touches[0]:n,p=new ft(l.clientX,l.clientY)._subtract(this._startPoint);!p.x&&!p.y||Math.abs(p.x)+Math.abs(p.y)<this.options.clickTolerance||(p.x/=this._parentScale.x,p.y/=this._parentScale.y,_n(n),this._moved||(this.fire("dragstart"),this._moved=!0,It(document.body,"leaflet-dragging"),this._lastTarget=n.target||n.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),It(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(p),this._moving=!0,this._lastEvent=n,this._updatePosition())}},_updatePosition:function(){var n={originalEvent:this._lastEvent};this.fire("predrag",n),fe(this._element,this._newPos),this.fire("drag",n)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(n){Tt(document.body,"leaflet-dragging"),this._lastTarget&&(Tt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Qe(document,"mousemove touchmove",this._onMove,this),Qe(document,"mouseup touchend touchcancel",this._onUp,this),ws(),je();var l=this._moved&&this._moving;this._moving=!1,Hi._dragging=!1,l&&this.fire("dragend",{noInertia:n,distance:this._newPos.distanceTo(this._startPos)})}});function za(n,l,p){var x,k=[1,4,2,8],N,tt,pt,St,Ft,ae,Se,He;for(N=0,ae=n.length;N<ae;N++)n[N]._code=pi(n[N],l);for(pt=0;pt<4;pt++){for(Se=k[pt],x=[],N=0,ae=n.length,tt=ae-1;N<ae;tt=N++)St=n[N],Ft=n[tt],St._code&Se?Ft._code&Se||(He=qr(Ft,St,Se,l,p),He._code=pi(He,l),x.push(He)):(Ft._code&Se&&(He=qr(Ft,St,Se,l,p),He._code=pi(He,l),x.push(He)),x.push(St));n=x}return n}function hl(n,l){var p,x,k,N,tt,pt,St,Ft,ae;if(!n||n.length===0)throw new Error("latlngs not passed");gi(n)||(console.warn("latlngs are not flat! Only the first ring will be used"),n=n[0]);var Se=Jt([0,0]),He=Ht(n),zn=He.getNorthWest().distanceTo(He.getSouthWest())*He.getNorthEast().distanceTo(He.getNorthWest());zn<1700&&(Se=ja(n));var An=n.length,ii=[];for(p=0;p<An;p++){var xn=Jt(n[p]);ii.push(l.project(Jt([xn.lat-Se.lat,xn.lng-Se.lng])))}for(pt=St=Ft=0,p=0,x=An-1;p<An;x=p++)k=ii[p],N=ii[x],tt=k.y*N.x-N.y*k.x,St+=(k.x+N.x)*tt,Ft+=(k.y+N.y)*tt,pt+=tt*3;pt===0?ae=ii[0]:ae=[St/pt,Ft/pt];var dr=l.unproject(ct(ae));return Jt([dr.lat+Se.lat,dr.lng+Se.lng])}function ja(n){for(var l=0,p=0,x=0,k=0;k<n.length;k++){var N=Jt(n[k]);l+=N.lat,p+=N.lng,x++}return Jt([l/x,p/x])}var Ul={__proto__:null,clipPolygon:za,polygonCenter:hl,centroid:ja};function ea(n,l){if(!l||!n.length)return n.slice();var p=l*l;return n=cl(n,p),n=Nn(n,p),n}function Ua(n,l,p){return Math.sqrt(bs(n,l,p,!0))}function Hl(n,l,p){return bs(n,l,p)}function Nn(n,l){var p=n.length,x=typeof Uint8Array<"u"?Uint8Array:Array,k=new x(p);k[0]=k[p-1]=1,Zn(n,k,l,0,p-1);var N,tt=[];for(N=0;N<p;N++)k[N]&&tt.push(n[N]);return tt}function Zn(n,l,p,x,k){var N=0,tt,pt,St;for(pt=x+1;pt<=k-1;pt++)St=bs(n[pt],n[x],n[k],!0),St>N&&(tt=pt,N=St);N>p&&(l[tt]=1,Zn(n,l,p,x,tt),Zn(n,l,p,tt,k))}function cl(n,l){for(var p=[n[0]],x=1,k=0,N=n.length;x<N;x++)$l(n[x],n[k])>l&&(p.push(n[x]),k=x);return k<N-1&&p.push(n[N-1]),p}var Zr;function Cs(n,l,p,x,k){var N=x?Zr:pi(n,p),tt=pi(l,p),pt,St,Ft;for(Zr=tt;;){if(!(N|tt))return[n,l];if(N&tt)return!1;pt=N||tt,St=qr(n,l,pt,p,k),Ft=pi(St,p),pt===N?(n=St,N=Ft):(l=St,tt=Ft)}}function qr(n,l,p,x,k){var N=l.x-n.x,tt=l.y-n.y,pt=x.min,St=x.max,Ft,ae;return p&8?(Ft=n.x+N*(St.y-n.y)/tt,ae=St.y):p&4?(Ft=n.x+N*(pt.y-n.y)/tt,ae=pt.y):p&2?(Ft=St.x,ae=n.y+tt*(St.x-n.x)/N):p&1&&(Ft=pt.x,ae=n.y+tt*(pt.x-n.x)/N),new ft(Ft,ae,k)}function pi(n,l){var p=0;return n.x<l.min.x?p|=1:n.x>l.max.x&&(p|=2),n.y<l.min.y?p|=4:n.y>l.max.y&&(p|=8),p}function $l(n,l){var p=l.x-n.x,x=l.y-n.y;return p*p+x*x}function bs(n,l,p,x){var k=l.x,N=l.y,tt=p.x-k,pt=p.y-N,St=tt*tt+pt*pt,Ft;return St>0&&(Ft=((n.x-k)*tt+(n.y-N)*pt)/St,Ft>1?(k=p.x,N=p.y):Ft>0&&(k+=tt*Ft,N+=pt*Ft)),tt=n.x-k,pt=n.y-N,x?tt*tt+pt*pt:new ft(k,N)}function gi(n){return!Pt(n[0])||typeof n[0][0]!="object"&&typeof n[0][0]<"u"}function Ri(n){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),gi(n)}function Ha(n,l){var p,x,k,N,tt,pt,St,Ft;if(!n||n.length===0)throw new Error("latlngs not passed");gi(n)||(console.warn("latlngs are not flat! Only the first ring will be used"),n=n[0]);var ae=Jt([0,0]),Se=Ht(n),He=Se.getNorthWest().distanceTo(Se.getSouthWest())*Se.getNorthEast().distanceTo(Se.getNorthWest());He<1700&&(ae=ja(n));var zn=n.length,An=[];for(p=0;p<zn;p++){var ii=Jt(n[p]);An.push(l.project(Jt([ii.lat-ae.lat,ii.lng-ae.lng])))}for(p=0,x=0;p<zn-1;p++)x+=An[p].distanceTo(An[p+1])/2;if(x===0)Ft=An[0];else for(p=0,N=0;p<zn-1;p++)if(tt=An[p],pt=An[p+1],k=tt.distanceTo(pt),N+=k,N>x){St=(N-x)/k,Ft=[pt.x-St*(pt.x-tt.x),pt.y-St*(pt.y-tt.y)];break}var xn=l.unproject(ct(Ft));return Jt([xn.lat+ae.lat,xn.lng+ae.lng])}var Lo={__proto__:null,simplify:ea,pointToSegmentDistance:Ua,closestPointOnSegment:Hl,clipSegment:Cs,_getEdgeIntersection:qr,_getBitCode:pi,_sqClosestPointOnSegment:bs,isFlat:gi,_flat:Ri,polylineCenter:Ha},$a={project:function(n){return new ft(n.lng,n.lat)},unproject:function(n){return new se(n.y,n.x)},bounds:new K([-180,-90],[180,90])},Ii={R:6378137,R_MINOR:6356752314245179e-9,bounds:new K([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(n){var l=Math.PI/180,p=this.R,x=n.lat*l,k=this.R_MINOR/p,N=Math.sqrt(1-k*k),tt=N*Math.sin(x),pt=Math.tan(Math.PI/4-x/2)/Math.pow((1-tt)/(1+tt),N/2);return x=-p*Math.log(Math.max(pt,1e-10)),new ft(n.lng*l*p,x)},unproject:function(n){for(var l=180/Math.PI,p=this.R,x=this.R_MINOR/p,k=Math.sqrt(1-x*x),N=Math.exp(-n.y/p),tt=Math.PI/2-2*Math.atan(N),pt=0,St=.1,Ft;pt<15&&Math.abs(St)>1e-7;pt++)Ft=k*Math.sin(tt),Ft=Math.pow((1-Ft)/(1+Ft),k/2),St=Math.PI/2-2*Math.atan(N*Ft)-tt,tt+=St;return new se(tt*l,n.x*l/p)}},or={__proto__:null,LonLat:$a,Mercator:Ii,SphericalMercator:cn},na=f({},Re,{code:"EPSG:3395",projection:Ii,transformation:(function(){var n=.5/(Math.PI*Ii.R);return jr(n,.5,-n,.5)})()}),Va=f({},Re,{code:"EPSG:4326",projection:$a,transformation:jr(1/180,1,-1/180,.5)}),Wa=f({},$e,{projection:$a,transformation:jr(1,0,-1,0),scale:function(n){return Math.pow(2,n)},zoom:function(n){return Math.log(n)/Math.LN2},distance:function(n,l){var p=l.lng-n.lng,x=l.lat-n.lat;return Math.sqrt(p*p+x*x)},infinite:!0});$e.Earth=Re,$e.EPSG3395=na,$e.EPSG3857=er,$e.EPSG900913=js,$e.EPSG4326=Va,$e.Simple=Wa;var ni=mt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(n){return n.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(n){return n&&n.removeLayer(this),this},getPane:function(n){return this._map.getPane(n?this.options[n]||n:this.options.pane)},addInteractiveTarget:function(n){return this._map._targets[E(n)]=this,this},removeInteractiveTarget:function(n){return delete this._map._targets[E(n)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(n){var l=n.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var p=this.getEvents();l.on(p,this),this.once("remove",function(){l.off(p,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});qe.include({addLayer:function(n){if(!n._layerAdd)throw new Error("The provided object is not a Layer.");var l=E(n);return this._layers[l]?this:(this._layers[l]=n,n._mapToAdd=this,n.beforeAdd&&n.beforeAdd(this),this.whenReady(n._layerAdd,n),this)},removeLayer:function(n){var l=E(n);return this._layers[l]?(this._loaded&&n.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:n}),n.fire("remove")),n._map=n._mapToAdd=null,this):this},hasLayer:function(n){return E(n)in this._layers},eachLayer:function(n,l){for(var p in this._layers)n.call(l,this._layers[p]);return this},_addLayers:function(n){n=n?Pt(n)?n:[n]:[];for(var l=0,p=n.length;l<p;l++)this.addLayer(n[l])},_addZoomLimit:function(n){(!isNaN(n.options.maxZoom)||!isNaN(n.options.minZoom))&&(this._zoomBoundLayers[E(n)]=n,this._updateZoomLevels())},_removeZoomLimit:function(n){var l=E(n);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var n=1/0,l=-1/0,p=this._getZoomSpan();for(var x in this._zoomBoundLayers){var k=this._zoomBoundLayers[x].options;n=k.minZoom===void 0?n:Math.min(n,k.minZoom),l=k.maxZoom===void 0?l:Math.max(l,k.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=n===1/0?void 0:n,p!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Kr=ni.extend({initialize:function(n,l){Z(this,l),this._layers={};var p,x;if(n)for(p=0,x=n.length;p<x;p++)this.addLayer(n[p])},addLayer:function(n){var l=this.getLayerId(n);return this._layers[l]=n,this._map&&this._map.addLayer(n),this},removeLayer:function(n){var l=n in this._layers?n:this.getLayerId(n);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(n){var l=typeof n=="number"?n:this.getLayerId(n);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(n){var l=Array.prototype.slice.call(arguments,1),p,x;for(p in this._layers)x=this._layers[p],x[n]&&x[n].apply(x,l);return this},onAdd:function(n){this.eachLayer(n.addLayer,n)},onRemove:function(n){this.eachLayer(n.removeLayer,n)},eachLayer:function(n,l){for(var p in this._layers)n.call(l,this._layers[p]);return this},getLayer:function(n){return this._layers[n]},getLayers:function(){var n=[];return this.eachLayer(n.push,n),n},setZIndex:function(n){return this.invoke("setZIndex",n)},getLayerId:function(n){return E(n)}}),Co=function(n,l){return new Kr(n,l)},$i=Kr.extend({addLayer:function(n){return this.hasLayer(n)?this:(n.addEventParent(this),Kr.prototype.addLayer.call(this,n),this.fire("layeradd",{layer:n}))},removeLayer:function(n){return this.hasLayer(n)?(n in this._layers&&(n=this._layers[n]),n.removeEventParent(this),Kr.prototype.removeLayer.call(this,n),this.fire("layerremove",{layer:n})):this},setStyle:function(n){return this.invoke("setStyle",n)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var n=new Dt;for(var l in this._layers){var p=this._layers[l];n.extend(p.getBounds?p.getBounds():p.getLatLng())}return n}}),fl=function(n,l){return new $i(n,l)},Ss=Ie.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(n){Z(this,n)},createIcon:function(n){return this._createIcon("icon",n)},createShadow:function(n){return this._createIcon("shadow",n)},_createIcon:function(n,l){var p=this._getIconUrl(n);if(!p){if(n==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var x=this._createImg(p,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(x,n),(this.options.crossOrigin||this.options.crossOrigin==="")&&(x.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),x},_setIconStyles:function(n,l){var p=this.options,x=p[l+"Size"];typeof x=="number"&&(x=[x,x]);var k=ct(x),N=ct(l==="shadow"&&p.shadowAnchor||p.iconAnchor||k&&k.divideBy(2,!0));n.className="leaflet-marker-"+l+" "+(p.className||""),N&&(n.style.marginLeft=-N.x+"px",n.style.marginTop=-N.y+"px"),k&&(n.style.width=k.x+"px",n.style.height=k.y+"px")},_createImg:function(n,l){return l=l||document.createElement("img"),l.src=n,l},_getIconUrl:function(n){return ye.retina&&this.options[n+"RetinaUrl"]||this.options[n+"Url"]}});function dl(n){return new Ss(n)}var to=Ss.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(n){return typeof to.imagePath!="string"&&(to.imagePath=this._detectIconPath()),(this.options.imagePath||to.imagePath)+Ss.prototype._getIconUrl.call(this,n)},_stripUrl:function(n){var l=function(p,x,k){var N=x.exec(p);return N&&N[k]};return n=l(n,/^url\((['"])?(.+)\1\)$/,2),n&&l(n,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var n=De("div","leaflet-default-icon-path",document.body),l=rr(n,"background-image")||rr(n,"backgroundImage");if(document.body.removeChild(n),l=this._stripUrl(l),l)return l;var p=document.querySelector('link[href$="leaflet.css"]');return p?p.href.substring(0,p.href.length-11-1):""}}),bo=Dn.extend({initialize:function(n){this._marker=n},addHooks:function(){var n=this._marker._icon;this._draggable||(this._draggable=new Hi(n,n,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),It(n,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Tt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(n){var l=this._marker,p=l._map,x=this._marker.options.autoPanSpeed,k=this._marker.options.autoPanPadding,N=we(l._icon),tt=p.getPixelBounds(),pt=p.getPixelOrigin(),St=_t(tt.min._subtract(pt).add(k),tt.max._subtract(pt).subtract(k));if(!St.contains(N)){var Ft=ct((Math.max(St.max.x,N.x)-St.max.x)/(tt.max.x-St.max.x)-(Math.min(St.min.x,N.x)-St.min.x)/(tt.min.x-St.min.x),(Math.max(St.max.y,N.y)-St.max.y)/(tt.max.y-St.max.y)-(Math.min(St.min.y,N.y)-St.min.y)/(tt.min.y-St.min.y)).multiplyBy(x);p.panBy(Ft,{animate:!1}),this._draggable._newPos._add(Ft),this._draggable._startPos._add(Ft),fe(l._icon,this._draggable._newPos),this._onDrag(n),this._panRequest=te(this._adjustPan.bind(this,n))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(n){this._marker.options.autoPan&&(ee(this._panRequest),this._panRequest=te(this._adjustPan.bind(this,n)))},_onDrag:function(n){var l=this._marker,p=l._shadow,x=we(l._icon),k=l._map.layerPointToLatLng(x);p&&fe(p,x),l._latlng=k,n.latlng=k,n.oldLatLng=this._oldLatLng,l.fire("move",n).fire("drag",n)},_onDragEnd:function(n){ee(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",n)}}),Nr=ni.extend({options:{icon:new to,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(n,l){Z(this,l),this._latlng=Jt(n)},onAdd:function(n){this._zoomAnimated=this._zoomAnimated&&n.options.markerZoomAnimation,this._zoomAnimated&&n.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(n){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&n.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(n){var l=this._latlng;return this._latlng=Jt(n),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(n){return this.options.zIndexOffset=n,this.update()},getIcon:function(){return this.options.icon},setIcon:function(n){return this.options.icon=n,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var n=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(n)}return this},_initIcon:function(){var n=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),p=n.icon.createIcon(this._icon),x=!1;p!==this._icon&&(this._icon&&this._removeIcon(),x=!0,n.title&&(p.title=n.title),p.tagName==="IMG"&&(p.alt=n.alt||"")),It(p,l),n.keyboard&&(p.tabIndex="0",p.setAttribute("role","button")),this._icon=p,n.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Pe(p,"focus",this._panOnFocus,this);var k=n.icon.createShadow(this._shadow),N=!1;k!==this._shadow&&(this._removeShadow(),N=!0),k&&(It(k,l),k.alt=""),this._shadow=k,n.opacity<1&&this._updateOpacity(),x&&this.getPane().appendChild(this._icon),this._initInteraction(),k&&N&&this.getPane(n.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Qe(this._icon,"focus",this._panOnFocus,this),tn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&tn(this._shadow),this._shadow=null},_setPos:function(n){this._icon&&fe(this._icon,n),this._shadow&&fe(this._shadow,n),this._zIndex=n.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(n){this._icon&&(this._icon.style.zIndex=this._zIndex+n)},_animateZoom:function(n){var l=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(It(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),bo)){var n=this.options.draggable;this.dragging&&(n=this.dragging.enabled(),this.dragging.disable()),this.dragging=new bo(this),n&&this.dragging.enable()}},setOpacity:function(n){return this.options.opacity=n,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var n=this.options.opacity;this._icon&&he(this._icon,n),this._shadow&&he(this._shadow,n)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var n=this._map;if(n){var l=this.options.icon.options,p=l.iconSize?ct(l.iconSize):ct(0,0),x=l.iconAnchor?ct(l.iconAnchor):ct(0,0);n.panInside(this._latlng,{paddingTopLeft:x,paddingBottomRight:p.subtract(x)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Vl(n,l){return new Nr(n,l)}var Fr=ni.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(n){this._renderer=n.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(n){return Z(this,n),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&n&&Object.prototype.hasOwnProperty.call(n,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ar=Fr.extend({options:{fill:!0,radius:10},initialize:function(n,l){Z(this,l),this._latlng=Jt(n),this._radius=this.options.radius},setLatLng:function(n){var l=this._latlng;return this._latlng=Jt(n),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(n){return this.options.radius=this._radius=n,this.redraw()},getRadius:function(){return this._radius},setStyle:function(n){var l=n&&n.radius||this._radius;return Fr.prototype.setStyle.call(this,n),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var n=this._radius,l=this._radiusY||n,p=this._clickTolerance(),x=[n+p,l+p];this._pxBounds=new K(this._point.subtract(x),this._point.add(x))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(n){return n.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Za(n,l){return new ar(n,l)}var ia=ar.extend({initialize:function(n,l,p){if(typeof l=="number"&&(l=f({},p,{radius:l})),Z(this,l),this._latlng=Jt(n),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(n){return this._mRadius=n,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var n=[this._radius,this._radiusY||this._radius];return new Dt(this._map.layerPointToLatLng(this._point.subtract(n)),this._map.layerPointToLatLng(this._point.add(n)))},setStyle:Fr.prototype.setStyle,_project:function(){var n=this._latlng.lng,l=this._latlng.lat,p=this._map,x=p.options.crs;if(x.distance===Re.distance){var k=Math.PI/180,N=this._mRadius/Re.R/k,tt=p.project([l+N,n]),pt=p.project([l-N,n]),St=tt.add(pt).divideBy(2),Ft=p.unproject(St).lat,ae=Math.acos((Math.cos(N*k)-Math.sin(l*k)*Math.sin(Ft*k))/(Math.cos(l*k)*Math.cos(Ft*k)))/k;(isNaN(ae)||ae===0)&&(ae=N/Math.cos(Math.PI/180*l)),this._point=St.subtract(p.getPixelOrigin()),this._radius=isNaN(ae)?0:St.x-p.project([Ft,n-ae]).x,this._radiusY=St.y-tt.y}else{var Se=x.unproject(x.project(this._latlng).subtract([this._mRadius,0]));this._point=p.latLngToLayerPoint(this._latlng),this._radius=this._point.x-p.latLngToLayerPoint(Se).x}this._updateBounds()}});function Vi(n,l,p){return new ia(n,l,p)}var Li=Fr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(n,l){Z(this,l),this._setLatLngs(n)},getLatLngs:function(){return this._latlngs},setLatLngs:function(n){return this._setLatLngs(n),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(n){for(var l=1/0,p=null,x=bs,k,N,tt=0,pt=this._parts.length;tt<pt;tt++)for(var St=this._parts[tt],Ft=1,ae=St.length;Ft<ae;Ft++){k=St[Ft-1],N=St[Ft];var Se=x(n,k,N,!0);Se<l&&(l=Se,p=x(n,k,N))}return p&&(p.distance=Math.sqrt(l)),p},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ha(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(n,l){return l=l||this._defaultShape(),n=Jt(n),l.push(n),this._bounds.extend(n),this.redraw()},_setLatLngs:function(n){this._bounds=new Dt,this._latlngs=this._convertLatLngs(n)},_defaultShape:function(){return gi(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(n){for(var l=[],p=gi(n),x=0,k=n.length;x<k;x++)p?(l[x]=Jt(n[x]),this._bounds.extend(l[x])):l[x]=this._convertLatLngs(n[x]);return l},_project:function(){var n=new K;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,n),this._bounds.isValid()&&n.isValid()&&(this._rawPxBounds=n,this._updateBounds())},_updateBounds:function(){var n=this._clickTolerance(),l=new ft(n,n);this._rawPxBounds&&(this._pxBounds=new K([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(n,l,p){var x=n[0]instanceof se,k=n.length,N,tt;if(x){for(tt=[],N=0;N<k;N++)tt[N]=this._map.latLngToLayerPoint(n[N]),p.extend(tt[N]);l.push(tt)}else for(N=0;N<k;N++)this._projectLatlngs(n[N],l,p)},_clipPoints:function(){var n=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(n))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,p,x,k,N,tt,pt,St;for(p=0,k=0,N=this._rings.length;p<N;p++)for(St=this._rings[p],x=0,tt=St.length;x<tt-1;x++)pt=Cs(St[x],St[x+1],n,x,!0),pt&&(l[k]=l[k]||[],l[k].push(pt[0]),(pt[1]!==St[x+1]||x===tt-2)&&(l[k].push(pt[1]),k++))}},_simplifyPoints:function(){for(var n=this._parts,l=this.options.smoothFactor,p=0,x=n.length;p<x;p++)n[p]=ea(n[p],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(n,l){var p,x,k,N,tt,pt,St=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(n))return!1;for(p=0,N=this._parts.length;p<N;p++)for(pt=this._parts[p],x=0,tt=pt.length,k=tt-1;x<tt;k=x++)if(!(!l&&x===0)&&Ua(n,pt[k],pt[x])<=St)return!0;return!1}});function Wl(n,l){return new Li(n,l)}Li._flat=Ri;var Wi=Li.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return hl(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(n){var l=Li.prototype._convertLatLngs.call(this,n),p=l.length;return p>=2&&l[0]instanceof se&&l[0].equals(l[p-1])&&l.pop(),l},_setLatLngs:function(n){Li.prototype._setLatLngs.call(this,n),gi(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return gi(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var n=this._renderer._bounds,l=this.options.weight,p=new ft(l,l);if(n=new K(n.min.subtract(p),n.max.add(p)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(n))){if(this.options.noClip){this._parts=this._rings;return}for(var x=0,k=this._rings.length,N;x<k;x++)N=za(this._rings[x],n,!0),N.length&&this._parts.push(N)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(n){var l=!1,p,x,k,N,tt,pt,St,Ft;if(!this._pxBounds||!this._pxBounds.contains(n))return!1;for(N=0,St=this._parts.length;N<St;N++)for(p=this._parts[N],tt=0,Ft=p.length,pt=Ft-1;tt<Ft;pt=tt++)x=p[tt],k=p[pt],x.y>n.y!=k.y>n.y&&n.x<(k.x-x.x)*(n.y-x.y)/(k.y-x.y)+x.x&&(l=!l);return l||Li.prototype._containsPoint.call(this,n,!0)}});function So(n,l){return new Wi(n,l)}var lr=$i.extend({initialize:function(n,l){Z(this,l),this._layers={},n&&this.addData(n)},addData:function(n){var l=Pt(n)?n:n.features,p,x,k;if(l){for(p=0,x=l.length;p<x;p++)k=l[p],(k.geometries||k.geometry||k.features||k.coordinates)&&this.addData(k);return this}var N=this.options;if(N.filter&&!N.filter(n))return this;var tt=eo(n,N);return tt?(tt.feature=oa(n),tt.defaultOptions=tt.options,this.resetStyle(tt),N.onEachFeature&&N.onEachFeature(n,tt),this.addLayer(tt)):this},resetStyle:function(n){return n===void 0?this.eachLayer(this.resetStyle,this):(n.options=f({},n.defaultOptions),this._setLayerStyle(n,this.options.style),this)},setStyle:function(n){return this.eachLayer(function(l){this._setLayerStyle(l,n)},this)},_setLayerStyle:function(n,l){n.setStyle&&(typeof l=="function"&&(l=l(n.feature)),n.setStyle(l))}});function eo(n,l){var p=n.type==="Feature"?n.geometry:n,x=p?p.coordinates:null,k=[],N=l&&l.pointToLayer,tt=l&&l.coordsToLatLng||ko,pt,St,Ft,ae;if(!x&&!p)return null;switch(p.type){case"Point":return pt=tt(x),ra(N,n,pt,l);case"MultiPoint":for(Ft=0,ae=x.length;Ft<ae;Ft++)pt=tt(x[Ft]),k.push(ra(N,n,pt,l));return new $i(k);case"LineString":case"MultiLineString":return St=Po(x,p.type==="LineString"?0:1,tt),new Li(St,l);case"Polygon":case"MultiPolygon":return St=Po(x,p.type==="Polygon"?1:2,tt),new Wi(St,l);case"GeometryCollection":for(Ft=0,ae=p.geometries.length;Ft<ae;Ft++){var Se=eo({geometry:p.geometries[Ft],type:"Feature",properties:n.properties},l);Se&&k.push(Se)}return new $i(k);case"FeatureCollection":for(Ft=0,ae=p.features.length;Ft<ae;Ft++){var He=eo(p.features[Ft],l);He&&k.push(He)}return new $i(k);default:throw new Error("Invalid GeoJSON object.")}}function ra(n,l,p,x){return n?n(l,p):new Nr(p,x&&x.markersInheritOptions&&x)}function ko(n){return new se(n[1],n[0],n[2])}function Po(n,l,p){for(var x=[],k=0,N=n.length,tt;k<N;k++)tt=l?Po(n[k],l-1,p):(p||ko)(n[k]),x.push(tt);return x}function Ao(n,l){return n=Jt(n),n.alt!==void 0?[B(n.lng,l),B(n.lat,l),B(n.alt,l)]:[B(n.lng,l),B(n.lat,l)]}function sa(n,l,p,x){for(var k=[],N=0,tt=n.length;N<tt;N++)k.push(l?sa(n[N],gi(n[N])?0:l-1,p,x):Ao(n[N],x));return!l&&p&&k.length>0&&k.push(k[0].slice()),k}function no(n,l){return n.feature?f({},n.feature,{geometry:l}):oa(l)}function oa(n){return n.type==="Feature"||n.type==="FeatureCollection"?n:{type:"Feature",properties:{},geometry:n}}var aa={toGeoJSON:function(n){return no(this,{type:"Point",coordinates:Ao(this.getLatLng(),n)})}};Nr.include(aa),ia.include(aa),ar.include(aa),Li.include({toGeoJSON:function(n){var l=!gi(this._latlngs),p=sa(this._latlngs,l?1:0,!1,n);return no(this,{type:(l?"Multi":"")+"LineString",coordinates:p})}}),Wi.include({toGeoJSON:function(n){var l=!gi(this._latlngs),p=l&&!gi(this._latlngs[0]),x=sa(this._latlngs,p?2:l?1:0,!0,n);return l||(x=[x]),no(this,{type:(p?"Multi":"")+"Polygon",coordinates:x})}}),Kr.include({toMultiPoint:function(n){var l=[];return this.eachLayer(function(p){l.push(p.toGeoJSON(n).geometry.coordinates)}),no(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(n){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(n);var p=l==="GeometryCollection",x=[];return this.eachLayer(function(k){if(k.toGeoJSON){var N=k.toGeoJSON(n);if(p)x.push(N.geometry);else{var tt=oa(N);tt.type==="FeatureCollection"?x.push.apply(x,tt.features):x.push(tt)}}}),p?no(this,{geometries:x,type:"GeometryCollection"}):{type:"FeatureCollection",features:x}}});function la(n,l){return new lr(n,l)}var Oi=la,ur=ni.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(n,l,p){this._url=n,this._bounds=Ht(l),Z(this,p)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(It(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){tn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(n){return this.options.opacity=n,this._image&&this._updateOpacity(),this},setStyle:function(n){return n.opacity&&this.setOpacity(n.opacity),this},bringToFront:function(){return this._map&&z(this._image),this},bringToBack:function(){return this._map&&bt(this._image),this},setUrl:function(n){return this._url=n,this._image&&(this._image.src=n),this},setBounds:function(n){return this._bounds=Ht(n),this._map&&this._reset(),this},getEvents:function(){var n={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},setZIndex:function(n){return this.options.zIndex=n,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var n=this._url.tagName==="IMG",l=this._image=n?this._url:De("img");if(It(l,"leaflet-image-layer"),this._zoomAnimated&&It(l,"leaflet-zoom-animated"),this.options.className&&It(l,this.options.className),l.onselectstart=P,l.onmousemove=P,l.onload=y(this.fire,this,"load"),l.onerror=y(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),n){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(n){var l=this._map.getZoomScale(n.zoom),p=this._map._latLngBoundsToNewLayerBounds(this._bounds,n.zoom,n.center).min;ce(this._image,p,l)},_reset:function(){var n=this._image,l=new K(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),p=l.getSize();fe(n,l.min),n.style.width=p.x+"px",n.style.height=p.y+"px"},_updateOpacity:function(){he(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var n=this.options.errorOverlayUrl;n&&this._url!==n&&(this._url=n,this._image.src=n)},getCenter:function(){return this._bounds.getCenter()}}),pl=function(n,l,p){return new ur(n,l,p)},io=ur.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var n=this._url.tagName==="VIDEO",l=this._image=n?this._url:De("video");if(It(l,"leaflet-image-layer"),this._zoomAnimated&&It(l,"leaflet-zoom-animated"),this.options.className&&It(l,this.options.className),l.onselectstart=P,l.onmousemove=P,l.onloadeddata=y(this.fire,this,"load"),n){for(var p=l.getElementsByTagName("source"),x=[],k=0;k<p.length;k++)x.push(p[k].src);this._url=p.length>0?x:[l.src];return}Pt(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var N=0;N<this._url.length;N++){var tt=De("source");tt.src=this._url[N],l.appendChild(tt)}}});function qa(n,l,p){return new io(n,l,p)}var Ka=ur.extend({_initImage:function(){var n=this._image=this._url;It(n,"leaflet-image-layer"),this._zoomAnimated&&It(n,"leaflet-zoom-animated"),this.options.className&&It(n,this.options.className),n.onselectstart=P,n.onmousemove=P}});function Ja(n,l,p){return new Ka(n,l,p)}var hr=ni.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(n,l){n&&(n instanceof se||Pt(n))?(this._latlng=Jt(n),Z(this,l)):(Z(this,n),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(n){return n=arguments.length?n:this._source._map,n.hasLayer(this)||n.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(n){return this._map?this.close():(arguments.length?this._source=n:n=this._source,this._prepareOpen(),this.openOn(n._map)),this},onAdd:function(n){this._zoomAnimated=n._zoomAnimated,this._container||this._initLayout(),n._fadeAnimated&&he(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),n._fadeAnimated&&he(this._container,1),this.bringToFront(),this.options.interactive&&(It(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(n){n._fadeAnimated?(he(this._container,0),this._removeTimeout=setTimeout(y(tn,void 0,this._container),200)):tn(this._container),this.options.interactive&&(Tt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(n){return this._latlng=Jt(n),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(n){return this._content=n,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var n={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&z(this._container),this},bringToBack:function(){return this._map&&bt(this._container),this},_prepareOpen:function(n){var l=this._source;if(!l._map)return!1;if(l instanceof $i){l=null;var p=this._source._layers;for(var x in p)if(p[x]._map){l=p[x];break}if(!l)return!1;this._source=l}if(!n)if(l.getCenter)n=l.getCenter();else if(l.getLatLng)n=l.getLatLng();else if(l.getBounds)n=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(n),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var n=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")n.innerHTML=l;else{for(;n.hasChildNodes();)n.removeChild(n.firstChild);n.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var n=this._map.latLngToLayerPoint(this._latlng),l=ct(this.options.offset),p=this._getAnchor();this._zoomAnimated?fe(this._container,n.add(p)):l=l.add(n).add(p);var x=this._containerBottom=-l.y,k=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=x+"px",this._container.style.left=k+"px"}},_getAnchor:function(){return[0,0]}});qe.include({_initOverlay:function(n,l,p,x){var k=l;return k instanceof n||(k=new n(x).setContent(l)),p&&k.setLatLng(p),k}}),ni.include({_initOverlay:function(n,l,p,x){var k=p;return k instanceof n?(Z(k,x),k._source=this):(k=l&&!x?l:new n(x,this),k.setContent(p)),k}});var Jr=hr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(n){return n=arguments.length?n:this._source._map,!n.hasLayer(this)&&n._popup&&n._popup.options.autoClose&&n.removeLayer(n._popup),n._popup=this,hr.prototype.openOn.call(this,n)},onAdd:function(n){hr.prototype.onAdd.call(this,n),n.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Fr||this._source.on("preclick",fi))},onRemove:function(n){hr.prototype.onRemove.call(this,n),n.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Fr||this._source.off("preclick",fi))},getEvents:function(){var n=hr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(n.preclick=this.close),this.options.keepInView&&(n.moveend=this._adjustPan),n},_initLayout:function(){var n="leaflet-popup",l=this._container=De("div",n+" "+(this.options.className||"")+" leaflet-zoom-animated"),p=this._wrapper=De("div",n+"-content-wrapper",l);if(this._contentNode=De("div",n+"-content",p),Ms(l),Xs(this._contentNode),Pe(l,"contextmenu",fi),this._tipContainer=De("div",n+"-tip-container",l),this._tip=De("div",n+"-tip",this._tipContainer),this.options.closeButton){var x=this._closeButton=De("a",n+"-close-button",l);x.setAttribute("role","button"),x.setAttribute("aria-label","Close popup"),x.href="#close",x.innerHTML='<span aria-hidden="true">&#215;</span>',Pe(x,"click",function(k){_n(k),this.close()},this)}},_updateLayout:function(){var n=this._contentNode,l=n.style;l.width="",l.whiteSpace="nowrap";var p=n.offsetWidth;p=Math.min(p,this.options.maxWidth),p=Math.max(p,this.options.minWidth),l.width=p+1+"px",l.whiteSpace="",l.height="";var x=n.offsetHeight,k=this.options.maxHeight,N="leaflet-popup-scrolled";k&&x>k?(l.height=k+"px",It(n,N)):Tt(n,N),this._containerWidth=this._container.offsetWidth},_animateZoom:function(n){var l=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center),p=this._getAnchor();fe(this._container,l.add(p))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var n=this._map,l=parseInt(rr(this._container,"marginBottom"),10)||0,p=this._container.offsetHeight+l,x=this._containerWidth,k=new ft(this._containerLeft,-p-this._containerBottom);k._add(we(this._container));var N=n.layerPointToContainerPoint(k),tt=ct(this.options.autoPanPadding),pt=ct(this.options.autoPanPaddingTopLeft||tt),St=ct(this.options.autoPanPaddingBottomRight||tt),Ft=n.getSize(),ae=0,Se=0;N.x+x+St.x>Ft.x&&(ae=N.x+x-Ft.x+St.x),N.x-ae-pt.x<0&&(ae=N.x-pt.x),N.y+p+St.y>Ft.y&&(Se=N.y+p-Ft.y+St.y),N.y-Se-pt.y<0&&(Se=N.y-pt.y),(ae||Se)&&(this.options.keepInView&&(this._autopanning=!0),n.fire("autopanstart").panBy([ae,Se]))}},_getAnchor:function(){return ct(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),ro=function(n,l){return new Jr(n,l)};qe.mergeOptions({closePopupOnClick:!0}),qe.include({openPopup:function(n,l,p){return this._initOverlay(Jr,n,l,p).openOn(this),this},closePopup:function(n){return n=arguments.length?n:this._popup,n&&n.close(),this}}),ni.include({bindPopup:function(n,l){return this._popup=this._initOverlay(Jr,this._popup,n,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(n){return this._popup&&(this instanceof $i||(this._popup._source=this),this._popup._prepareOpen(n||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(n){return this._popup&&this._popup.setContent(n),this},getPopup:function(){return this._popup},_openPopup:function(n){if(!(!this._popup||!this._map)){Ei(n);var l=n.layer||n.target;if(this._popup._source===l&&!(l instanceof Fr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(n.latlng);return}this._popup._source=l,this.openPopup(n.latlng)}},_movePopup:function(n){this._popup.setLatLng(n.latlng)},_onKeyPress:function(n){n.originalEvent.keyCode===13&&this._openPopup(n)}});var so=hr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(n){hr.prototype.onAdd.call(this,n),this.setOpacity(this.options.opacity),n.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(n){hr.prototype.onRemove.call(this,n),n.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var n=hr.prototype.getEvents.call(this);return this.options.permanent||(n.preclick=this.close),n},_initLayout:function(){var n="leaflet-tooltip",l=n+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=De("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+E(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(n){var l,p,x=this._map,k=this._container,N=x.latLngToContainerPoint(x.getCenter()),tt=x.layerPointToContainerPoint(n),pt=this.options.direction,St=k.offsetWidth,Ft=k.offsetHeight,ae=ct(this.options.offset),Se=this._getAnchor();pt==="top"?(l=St/2,p=Ft):pt==="bottom"?(l=St/2,p=0):pt==="center"?(l=St/2,p=Ft/2):pt==="right"?(l=0,p=Ft/2):pt==="left"?(l=St,p=Ft/2):tt.x<N.x?(pt="right",l=0,p=Ft/2):(pt="left",l=St+(ae.x+Se.x)*2,p=Ft/2),n=n.subtract(ct(l,p,!0)).add(ae).add(Se),Tt(k,"leaflet-tooltip-right"),Tt(k,"leaflet-tooltip-left"),Tt(k,"leaflet-tooltip-top"),Tt(k,"leaflet-tooltip-bottom"),It(k,"leaflet-tooltip-"+pt),fe(k,n)},_updatePosition:function(){var n=this._map.latLngToLayerPoint(this._latlng);this._setPosition(n)},setOpacity:function(n){this.options.opacity=n,this._container&&he(this._container,n)},_animateZoom:function(n){var l=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center);this._setPosition(l)},_getAnchor:function(){return ct(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Bo=function(n,l){return new so(n,l)};qe.include({openTooltip:function(n,l,p){return this._initOverlay(so,n,l,p).openOn(this),this},closeTooltip:function(n){return n.close(),this}}),ni.include({bindTooltip:function(n,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(so,this._tooltip,n,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(n){if(!(!n&&this._tooltipHandlersAdded)){var l=n?"off":"on",p={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?p.add=this._openTooltip:(p.mouseover=this._openTooltip,p.mouseout=this.closeTooltip,p.click=this._openTooltip,this._map?this._addFocusListeners():p.add=this._addFocusListeners),this._tooltip.options.sticky&&(p.mousemove=this._moveTooltip),this[l](p),this._tooltipHandlersAdded=!n}},openTooltip:function(n){return this._tooltip&&(this instanceof $i||(this._tooltip._source=this),this._tooltip._prepareOpen(n)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(n){return this._tooltip&&this._tooltip.setContent(n),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(n){var l=typeof n.getElement=="function"&&n.getElement();l&&(Pe(l,"focus",function(){this._tooltip._source=n,this.openTooltip()},this),Pe(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(n){var l=typeof n.getElement=="function"&&n.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(n){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(n)});return}this._tooltip._source=n.layer||n.target,this.openTooltip(this._tooltip.options.sticky?n.latlng:void 0)}},_moveTooltip:function(n){var l=n.latlng,p,x;this._tooltip.options.sticky&&n.originalEvent&&(p=this._map.mouseEventToContainerPoint(n.originalEvent),x=this._map.containerPointToLayerPoint(p),l=this._map.layerPointToLatLng(x)),this._tooltip.setLatLng(l)}});var ua=Ss.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(n){var l=n&&n.tagName==="DIV"?n:document.createElement("div"),p=this.options;if(p.html instanceof Element?(Wr(l),l.appendChild(p.html)):l.innerHTML=p.html!==!1?p.html:"",p.bgPos){var x=ct(p.bgPos);l.style.backgroundPosition=-x.x+"px "+-x.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function gl(n){return new ua(n)}Ss.Default=to;var Xr=ni.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ye.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(n){Z(this,n)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(n){n._addZoomLimit(this)},onRemove:function(n){this._removeAllTiles(),tn(this._container),n._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(z(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(bt(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(n){return this.options.opacity=n,this._updateOpacity(),this},setZIndex:function(n){return this.options.zIndex=n,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var n=this._clampZoom(this._map.getZoom());n!==this._tileZoom&&(this._tileZoom=n,this._updateLevels()),this._update()}return this},getEvents:function(){var n={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=A(this._onMoveEnd,this.options.updateInterval,this)),n.move=this._onMove),this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},createTile:function(){return document.createElement("div")},getTileSize:function(){var n=this.options.tileSize;return n instanceof ft?n:new ft(n,n)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(n){for(var l=this.getPane().children,p=-n(-1/0,1/0),x=0,k=l.length,N;x<k;x++)N=l[x].style.zIndex,l[x]!==this._container&&N&&(p=n(p,+N));isFinite(p)&&(this.options.zIndex=p+n(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ye.ielt9){he(this._container,this.options.opacity);var n=+new Date,l=!1,p=!1;for(var x in this._tiles){var k=this._tiles[x];if(!(!k.current||!k.loaded)){var N=Math.min(1,(n-k.loaded)/200);he(k.el,N),N<1?l=!0:(k.active?p=!0:this._onOpaqueTile(k),k.active=!0)}}p&&!this._noPrune&&this._pruneTiles(),l&&(ee(this._fadeFrame),this._fadeFrame=te(this._updateOpacity,this))}},_onOpaqueTile:P,_initContainer:function(){this._container||(this._container=De("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var n=this._tileZoom,l=this.options.maxZoom;if(n!==void 0){for(var p in this._levels)p=Number(p),this._levels[p].el.children.length||p===n?(this._levels[p].el.style.zIndex=l-Math.abs(n-p),this._onUpdateLevel(p)):(tn(this._levels[p].el),this._removeTilesAtZoom(p),this._onRemoveLevel(p),delete this._levels[p]);var x=this._levels[n],k=this._map;return x||(x=this._levels[n]={},x.el=De("div","leaflet-tile-container leaflet-zoom-animated",this._container),x.el.style.zIndex=l,x.origin=k.project(k.unproject(k.getPixelOrigin()),n).round(),x.zoom=n,this._setZoomTransform(x,k.getCenter(),k.getZoom()),P(x.el.offsetWidth),this._onCreateLevel(x)),this._level=x,x}},_onUpdateLevel:P,_onRemoveLevel:P,_onCreateLevel:P,_pruneTiles:function(){if(this._map){var n,l,p=this._map.getZoom();if(p>this.options.maxZoom||p<this.options.minZoom){this._removeAllTiles();return}for(n in this._tiles)l=this._tiles[n],l.retain=l.current;for(n in this._tiles)if(l=this._tiles[n],l.current&&!l.active){var x=l.coords;this._retainParent(x.x,x.y,x.z,x.z-5)||this._retainChildren(x.x,x.y,x.z,x.z+2)}for(n in this._tiles)this._tiles[n].retain||this._removeTile(n)}},_removeTilesAtZoom:function(n){for(var l in this._tiles)this._tiles[l].coords.z===n&&this._removeTile(l)},_removeAllTiles:function(){for(var n in this._tiles)this._removeTile(n)},_invalidateAll:function(){for(var n in this._levels)tn(this._levels[n].el),this._onRemoveLevel(Number(n)),delete this._levels[n];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(n,l,p,x){var k=Math.floor(n/2),N=Math.floor(l/2),tt=p-1,pt=new ft(+k,+N);pt.z=+tt;var St=this._tileCoordsToKey(pt),Ft=this._tiles[St];return Ft&&Ft.active?(Ft.retain=!0,!0):(Ft&&Ft.loaded&&(Ft.retain=!0),tt>x?this._retainParent(k,N,tt,x):!1)},_retainChildren:function(n,l,p,x){for(var k=2*n;k<2*n+2;k++)for(var N=2*l;N<2*l+2;N++){var tt=new ft(k,N);tt.z=p+1;var pt=this._tileCoordsToKey(tt),St=this._tiles[pt];if(St&&St.active){St.retain=!0;continue}else St&&St.loaded&&(St.retain=!0);p+1<x&&this._retainChildren(k,N,p+1,x)}},_resetView:function(n){var l=n&&(n.pinch||n.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(n){this._setView(n.center,n.zoom,!0,n.noUpdate)},_clampZoom:function(n){var l=this.options;return l.minNativeZoom!==void 0&&n<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<n?l.maxNativeZoom:n},_setView:function(n,l,p,x){var k=Math.round(l);this.options.maxZoom!==void 0&&k>this.options.maxZoom||this.options.minZoom!==void 0&&k<this.options.minZoom?k=void 0:k=this._clampZoom(k);var N=this.options.updateWhenZooming&&k!==this._tileZoom;(!x||N)&&(this._tileZoom=k,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),k!==void 0&&this._update(n),p||this._pruneTiles(),this._noPrune=!!p),this._setZoomTransforms(n,l)},_setZoomTransforms:function(n,l){for(var p in this._levels)this._setZoomTransform(this._levels[p],n,l)},_setZoomTransform:function(n,l,p){var x=this._map.getZoomScale(p,n.zoom),k=n.origin.multiplyBy(x).subtract(this._map._getNewPixelOrigin(l,p)).round();ye.any3d?ce(n.el,k,x):fe(n.el,k)},_resetGrid:function(){var n=this._map,l=n.options.crs,p=this._tileSize=this.getTileSize(),x=this._tileZoom,k=this._map.getPixelWorldBounds(this._tileZoom);k&&(this._globalTileRange=this._pxBoundsToTileRange(k)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(n.project([0,l.wrapLng[0]],x).x/p.x),Math.ceil(n.project([0,l.wrapLng[1]],x).x/p.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(n.project([l.wrapLat[0],0],x).y/p.x),Math.ceil(n.project([l.wrapLat[1],0],x).y/p.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(n){var l=this._map,p=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),x=l.getZoomScale(p,this._tileZoom),k=l.project(n,this._tileZoom).floor(),N=l.getSize().divideBy(x*2);return new K(k.subtract(N),k.add(N))},_update:function(n){var l=this._map;if(l){var p=this._clampZoom(l.getZoom());if(n===void 0&&(n=l.getCenter()),this._tileZoom!==void 0){var x=this._getTiledPixelBounds(n),k=this._pxBoundsToTileRange(x),N=k.getCenter(),tt=[],pt=this.options.keepBuffer,St=new K(k.getBottomLeft().subtract([pt,-pt]),k.getTopRight().add([pt,-pt]));if(!(isFinite(k.min.x)&&isFinite(k.min.y)&&isFinite(k.max.x)&&isFinite(k.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Ft in this._tiles){var ae=this._tiles[Ft].coords;(ae.z!==this._tileZoom||!St.contains(new ft(ae.x,ae.y)))&&(this._tiles[Ft].current=!1)}if(Math.abs(p-this._tileZoom)>1){this._setView(n,p);return}for(var Se=k.min.y;Se<=k.max.y;Se++)for(var He=k.min.x;He<=k.max.x;He++){var zn=new ft(He,Se);if(zn.z=this._tileZoom,!!this._isValidTile(zn)){var An=this._tiles[this._tileCoordsToKey(zn)];An?An.current=!0:tt.push(zn)}}if(tt.sort(function(xn,dr){return xn.distanceTo(N)-dr.distanceTo(N)}),tt.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var ii=document.createDocumentFragment();for(He=0;He<tt.length;He++)this._addTile(tt[He],ii);this._level.el.appendChild(ii)}}}},_isValidTile:function(n){var l=this._map.options.crs;if(!l.infinite){var p=this._globalTileRange;if(!l.wrapLng&&(n.x<p.min.x||n.x>p.max.x)||!l.wrapLat&&(n.y<p.min.y||n.y>p.max.y))return!1}if(!this.options.bounds)return!0;var x=this._tileCoordsToBounds(n);return Ht(this.options.bounds).overlaps(x)},_keyToBounds:function(n){return this._tileCoordsToBounds(this._keyToTileCoords(n))},_tileCoordsToNwSe:function(n){var l=this._map,p=this.getTileSize(),x=n.scaleBy(p),k=x.add(p),N=l.unproject(x,n.z),tt=l.unproject(k,n.z);return[N,tt]},_tileCoordsToBounds:function(n){var l=this._tileCoordsToNwSe(n),p=new Dt(l[0],l[1]);return this.options.noWrap||(p=this._map.wrapLatLngBounds(p)),p},_tileCoordsToKey:function(n){return n.x+":"+n.y+":"+n.z},_keyToTileCoords:function(n){var l=n.split(":"),p=new ft(+l[0],+l[1]);return p.z=+l[2],p},_removeTile:function(n){var l=this._tiles[n];l&&(tn(l.el),delete this._tiles[n],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(n)}))},_initTile:function(n){It(n,"leaflet-tile");var l=this.getTileSize();n.style.width=l.x+"px",n.style.height=l.y+"px",n.onselectstart=P,n.onmousemove=P,ye.ielt9&&this.options.opacity<1&&he(n,this.options.opacity)},_addTile:function(n,l){var p=this._getTilePos(n),x=this._tileCoordsToKey(n),k=this.createTile(this._wrapCoords(n),y(this._tileReady,this,n));this._initTile(k),this.createTile.length<2&&te(y(this._tileReady,this,n,null,k)),fe(k,p),this._tiles[x]={el:k,coords:n,current:!0},l.appendChild(k),this.fire("tileloadstart",{tile:k,coords:n})},_tileReady:function(n,l,p){l&&this.fire("tileerror",{error:l,tile:p,coords:n});var x=this._tileCoordsToKey(n);p=this._tiles[x],p&&(p.loaded=+new Date,this._map._fadeAnimated?(he(p.el,0),ee(this._fadeFrame),this._fadeFrame=te(this._updateOpacity,this)):(p.active=!0,this._pruneTiles()),l||(It(p.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:p.el,coords:n})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ye.ielt9||!this._map._fadeAnimated?te(this._pruneTiles,this):setTimeout(y(this._pruneTiles,this),250)))},_getTilePos:function(n){return n.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(n){var l=new ft(this._wrapX?G(n.x,this._wrapX):n.x,this._wrapY?G(n.y,this._wrapY):n.y);return l.z=n.z,l},_pxBoundsToTileRange:function(n){var l=this.getTileSize();return new K(n.min.unscaleBy(l).floor(),n.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var n in this._tiles)if(!this._tiles[n].loaded)return!1;return!0}});function oo(n){return new Xr(n)}var Yr=Xr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(n,l){this._url=n,l=Z(this,l),l.detectRetina&&ye.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(n,l){return this._url===n&&l===void 0&&(l=!0),this._url=n,l||this.redraw(),this},createTile:function(n,l){var p=document.createElement("img");return Pe(p,"load",y(this._tileOnLoad,this,l,p)),Pe(p,"error",y(this._tileOnError,this,l,p)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(p.referrerPolicy=this.options.referrerPolicy),p.alt="",p.src=this.getTileUrl(n),p},getTileUrl:function(n){var l={r:ye.retina?"@2x":"",s:this._getSubdomain(n),x:n.x,y:n.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var p=this._globalTileRange.max.y-n.y;this.options.tms&&(l.y=p),l["-y"]=p}return lt(this._url,f(l,this.options))},_tileOnLoad:function(n,l){ye.ielt9?setTimeout(y(n,this,null,l),0):n(null,l)},_tileOnError:function(n,l,p){var x=this.options.errorTileUrl;x&&l.getAttribute("src")!==x&&(l.src=x),n(p,l)},_onTileRemove:function(n){n.tile.onload=null},_getZoomForUrl:function(){var n=this._tileZoom,l=this.options.maxZoom,p=this.options.zoomReverse,x=this.options.zoomOffset;return p&&(n=l-n),n+x},_getSubdomain:function(n){var l=Math.abs(n.x+n.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var n,l;for(n in this._tiles)if(this._tiles[n].coords.z!==this._tileZoom&&(l=this._tiles[n].el,l.onload=P,l.onerror=P,!l.complete)){l.src=Ot;var p=this._tiles[n].coords;tn(l),delete this._tiles[n],this.fire("tileabort",{tile:l,coords:p})}},_removeTile:function(n){var l=this._tiles[n];if(l)return l.el.setAttribute("src",Ot),Xr.prototype._removeTile.call(this,n)},_tileReady:function(n,l,p){if(!(!this._map||p&&p.getAttribute("src")===Ot))return Xr.prototype._tileReady.call(this,n,l,p)}});function ha(n,l){return new Yr(n,l)}var ks=Yr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(n,l){this._url=n;var p=f({},this.defaultWmsParams);for(var x in l)x in this.options||(p[x]=l[x]);l=Z(this,l);var k=l.detectRetina&&ye.retina?2:1,N=this.getTileSize();p.width=N.x*k,p.height=N.y*k,this.wmsParams=p},onAdd:function(n){this._crs=this.options.crs||n.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,Yr.prototype.onAdd.call(this,n)},getTileUrl:function(n){var l=this._tileCoordsToNwSe(n),p=this._crs,x=_t(p.project(l[0]),p.project(l[1])),k=x.min,N=x.max,tt=(this._wmsVersion>=1.3&&this._crs===Va?[k.y,k.x,N.y,N.x]:[k.x,k.y,N.x,N.y]).join(","),pt=Yr.prototype.getTileUrl.call(this,n);return pt+Y(this.wmsParams,pt,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+tt},setParams:function(n,l){return f(this.wmsParams,n),l||this.redraw(),this}});function ml(n,l){return new ks(n,l)}Yr.WMS=ks,ha.wms=ml;var cr=ni.extend({options:{padding:.1},initialize:function(n){Z(this,n),E(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),It(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var n={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(n.zoomanim=this._onAnimZoom),n},_onAnimZoom:function(n){this._updateTransform(n.center,n.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(n,l){var p=this._map.getZoomScale(l,this._zoom),x=this._map.getSize().multiplyBy(.5+this.options.padding),k=this._map.project(this._center,l),N=x.multiplyBy(-p).add(k).subtract(this._map._getNewPixelOrigin(n,l));ye.any3d?ce(this._container,N,p):fe(this._container,N)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var n in this._layers)this._layers[n]._reset()},_onZoomEnd:function(){for(var n in this._layers)this._layers[n]._project()},_updatePaths:function(){for(var n in this._layers)this._layers[n]._update()},_update:function(){var n=this.options.padding,l=this._map.getSize(),p=this._map.containerPointToLayerPoint(l.multiplyBy(-n)).round();this._bounds=new K(p,p.add(l.multiplyBy(1+n*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ca=cr.extend({options:{tolerance:0},getEvents:function(){var n=cr.prototype.getEvents.call(this);return n.viewprereset=this._onViewPreReset,n},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){cr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var n=this._container=document.createElement("canvas");Pe(n,"mousemove",this._onMouseMove,this),Pe(n,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Pe(n,"mouseout",this._handleMouseOut,this),n._leaflet_disable_events=!0,this._ctx=n.getContext("2d")},_destroyContainer:function(){ee(this._redrawRequest),delete this._ctx,tn(this._container),Qe(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var n;this._redrawBounds=null;for(var l in this._layers)n=this._layers[l],n._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){cr.prototype._update.call(this);var n=this._bounds,l=this._container,p=n.getSize(),x=ye.retina?2:1;fe(l,n.min),l.width=x*p.x,l.height=x*p.y,l.style.width=p.x+"px",l.style.height=p.y+"px",ye.retina&&this._ctx.scale(2,2),this._ctx.translate(-n.min.x,-n.min.y),this.fire("update")}},_reset:function(){cr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(n){this._updateDashArray(n),this._layers[E(n)]=n;var l=n._order={layer:n,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(n){this._requestRedraw(n)},_removePath:function(n){var l=n._order,p=l.next,x=l.prev;p?p.prev=x:this._drawLast=x,x?x.next=p:this._drawFirst=p,delete n._order,delete this._layers[E(n)],this._requestRedraw(n)},_updatePath:function(n){this._extendRedrawBounds(n),n._project(),n._update(),this._requestRedraw(n)},_updateStyle:function(n){this._updateDashArray(n),this._requestRedraw(n)},_updateDashArray:function(n){if(typeof n.options.dashArray=="string"){var l=n.options.dashArray.split(/[, ]+/),p=[],x,k;for(k=0;k<l.length;k++){if(x=Number(l[k]),isNaN(x))return;p.push(x)}n.options._dashArray=p}else n.options._dashArray=n.options.dashArray},_requestRedraw:function(n){this._map&&(this._extendRedrawBounds(n),this._redrawRequest=this._redrawRequest||te(this._redraw,this))},_extendRedrawBounds:function(n){if(n._pxBounds){var l=(n.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new K,this._redrawBounds.extend(n._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(n._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var n=this._redrawBounds;if(n){var l=n.getSize();this._ctx.clearRect(n.min.x,n.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var n,l=this._redrawBounds;if(this._ctx.save(),l){var p=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,p.x,p.y),this._ctx.clip()}this._drawing=!0;for(var x=this._drawFirst;x;x=x.next)n=x.layer,(!l||n._pxBounds&&n._pxBounds.intersects(l))&&n._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(n,l){if(this._drawing){var p,x,k,N,tt=n._parts,pt=tt.length,St=this._ctx;if(pt){for(St.beginPath(),p=0;p<pt;p++){for(x=0,k=tt[p].length;x<k;x++)N=tt[p][x],St[x?"lineTo":"moveTo"](N.x,N.y);l&&St.closePath()}this._fillStroke(St,n)}}},_updateCircle:function(n){if(!(!this._drawing||n._empty())){var l=n._point,p=this._ctx,x=Math.max(Math.round(n._radius),1),k=(Math.max(Math.round(n._radiusY),1)||x)/x;k!==1&&(p.save(),p.scale(1,k)),p.beginPath(),p.arc(l.x,l.y/k,x,0,Math.PI*2,!1),k!==1&&p.restore(),this._fillStroke(p,n)}},_fillStroke:function(n,l){var p=l.options;p.fill&&(n.globalAlpha=p.fillOpacity,n.fillStyle=p.fillColor||p.color,n.fill(p.fillRule||"evenodd")),p.stroke&&p.weight!==0&&(n.setLineDash&&n.setLineDash(l.options&&l.options._dashArray||[]),n.globalAlpha=p.opacity,n.lineWidth=p.weight,n.strokeStyle=p.color,n.lineCap=p.lineCap,n.lineJoin=p.lineJoin,n.stroke())},_onClick:function(n){for(var l=this._map.mouseEventToLayerPoint(n),p,x,k=this._drawFirst;k;k=k.next)p=k.layer,p.options.interactive&&p._containsPoint(l)&&(!(n.type==="click"||n.type==="preclick")||!this._map._draggableMoved(p))&&(x=p);this._fireEvent(x?[x]:!1,n)},_onMouseMove:function(n){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(n);this._handleMouseHover(n,l)}},_handleMouseOut:function(n){var l=this._hoveredLayer;l&&(Tt(this._container,"leaflet-interactive"),this._fireEvent([l],n,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(n,l){if(!this._mouseHoverThrottled){for(var p,x,k=this._drawFirst;k;k=k.next)p=k.layer,p.options.interactive&&p._containsPoint(l)&&(x=p);x!==this._hoveredLayer&&(this._handleMouseOut(n),x&&(It(this._container,"leaflet-interactive"),this._fireEvent([x],n,"mouseover"),this._hoveredLayer=x)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,n),this._mouseHoverThrottled=!0,setTimeout(y(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(n,l,p){this._map._fireDOMEvent(l,p||l.type,n)},_bringToFront:function(n){var l=n._order;if(l){var p=l.next,x=l.prev;if(p)p.prev=x;else return;x?x.next=p:p&&(this._drawFirst=p),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(n)}},_bringToBack:function(n){var l=n._order;if(l){var p=l.next,x=l.prev;if(x)x.next=p;else return;p?p.prev=x:x&&(this._drawLast=x),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(n)}}});function To(n){return ye.canvas?new ca(n):null}var ao=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(n){return document.createElement("<lvml:"+n+' class="lvml">')}}catch{}return function(n){return document.createElement("<"+n+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),_l={_initContainer:function(){this._container=De("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(cr.prototype._update.call(this),this.fire("update"))},_initPath:function(n){var l=n._container=ao("shape");It(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",n._path=ao("path"),l.appendChild(n._path),this._updateStyle(n),this._layers[E(n)]=n},_addPath:function(n){var l=n._container;this._container.appendChild(l),n.options.interactive&&n.addInteractiveTarget(l)},_removePath:function(n){var l=n._container;tn(l),n.removeInteractiveTarget(l),delete this._layers[E(n)]},_updateStyle:function(n){var l=n._stroke,p=n._fill,x=n.options,k=n._container;k.stroked=!!x.stroke,k.filled=!!x.fill,x.stroke?(l||(l=n._stroke=ao("stroke")),k.appendChild(l),l.weight=x.weight+"px",l.color=x.color,l.opacity=x.opacity,x.dashArray?l.dashStyle=Pt(x.dashArray)?x.dashArray.join(" "):x.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=x.lineCap.replace("butt","flat"),l.joinstyle=x.lineJoin):l&&(k.removeChild(l),n._stroke=null),x.fill?(p||(p=n._fill=ao("fill")),k.appendChild(p),p.color=x.fillColor||x.color,p.opacity=x.fillOpacity):p&&(k.removeChild(p),n._fill=null)},_updateCircle:function(n){var l=n._point.round(),p=Math.round(n._radius),x=Math.round(n._radiusY||p);this._setPath(n,n._empty()?"M0 0":"AL "+l.x+","+l.y+" "+p+","+x+" 0,"+65535*360)},_setPath:function(n,l){n._path.v=l},_bringToFront:function(n){z(n._container)},_bringToBack:function(n){bt(n._container)}},Ci=ye.vml?ao:Ho,Pn=cr.extend({_initContainer:function(){this._container=Ci("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ci("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){tn(this._container),Qe(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){cr.prototype._update.call(this);var n=this._bounds,l=n.getSize(),p=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,p.setAttribute("width",l.x),p.setAttribute("height",l.y)),fe(p,n.min),p.setAttribute("viewBox",[n.min.x,n.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(n){var l=n._path=Ci("path");n.options.className&&It(l,n.options.className),n.options.interactive&&It(l,"leaflet-interactive"),this._updateStyle(n),this._layers[E(n)]=n},_addPath:function(n){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(n._path),n.addInteractiveTarget(n._path)},_removePath:function(n){tn(n._path),n.removeInteractiveTarget(n._path),delete this._layers[E(n)]},_updatePath:function(n){n._project(),n._update()},_updateStyle:function(n){var l=n._path,p=n.options;l&&(p.stroke?(l.setAttribute("stroke",p.color),l.setAttribute("stroke-opacity",p.opacity),l.setAttribute("stroke-width",p.weight),l.setAttribute("stroke-linecap",p.lineCap),l.setAttribute("stroke-linejoin",p.lineJoin),p.dashArray?l.setAttribute("stroke-dasharray",p.dashArray):l.removeAttribute("stroke-dasharray"),p.dashOffset?l.setAttribute("stroke-dashoffset",p.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),p.fill?(l.setAttribute("fill",p.fillColor||p.color),l.setAttribute("fill-opacity",p.fillOpacity),l.setAttribute("fill-rule",p.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(n,l){this._setPath(n,Ti(n._parts,l))},_updateCircle:function(n){var l=n._point,p=Math.max(Math.round(n._radius),1),x=Math.max(Math.round(n._radiusY),1)||p,k="a"+p+","+x+" 0 1,0 ",N=n._empty()?"M0 0":"M"+(l.x-p)+","+l.y+k+p*2+",0 "+k+-p*2+",0 ";this._setPath(n,N)},_setPath:function(n,l){n._path.setAttribute("d",l)},_bringToFront:function(n){z(n._path)},_bringToBack:function(n){bt(n._path)}});ye.vml&&Pn.include(_l);function Fn(n){return ye.svg||ye.vml?new Pn(n):null}qe.include({getRenderer:function(n){var l=n.options.renderer||this._getPaneRenderer(n.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(n){if(n==="overlayPane"||n===void 0)return!1;var l=this._paneRenderers[n];return l===void 0&&(l=this._createRenderer({pane:n}),this._paneRenderers[n]=l),l},_createRenderer:function(n){return this.options.preferCanvas&&To(n)||Fn(n)}});var Xa=Wi.extend({initialize:function(n,l){Wi.prototype.initialize.call(this,this._boundsToLatLngs(n),l)},setBounds:function(n){return this.setLatLngs(this._boundsToLatLngs(n))},_boundsToLatLngs:function(n){return n=Ht(n),[n.getSouthWest(),n.getNorthWest(),n.getNorthEast(),n.getSouthEast()]}});function Zi(n,l){return new Xa(n,l)}Pn.create=Ci,Pn.pointsToPath=Ti,lr.geometryToLayer=eo,lr.coordsToLatLng=ko,lr.coordsToLatLngs=Po,lr.latLngToCoords=Ao,lr.latLngsToCoords=sa,lr.getFeature=no,lr.asFeature=oa,qe.mergeOptions({boxZoom:!0});var Ae=Dn.extend({initialize:function(n){this._map=n,this._container=n._container,this._pane=n._panes.overlayPane,this._resetStateTimeout=0,n.on("unload",this._destroy,this)},addHooks:function(){Pe(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Qe(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){tn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(n){if(!n.shiftKey||n.which!==1&&n.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ve(),wi(),this._startPoint=this._map.mouseEventToContainerPoint(n),Pe(document,{contextmenu:Ei,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(n){this._moved||(this._moved=!0,this._box=De("div","leaflet-zoom-box",this._container),It(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(n);var l=new K(this._point,this._startPoint),p=l.getSize();fe(this._box,l.min),this._box.style.width=p.x+"px",this._box.style.height=p.y+"px"},_finish:function(){this._moved&&(tn(this._box),Tt(this._container,"leaflet-crosshair")),je(),ws(),Qe(document,{contextmenu:Ei,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(n){if(!(n.which!==1&&n.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(y(this._resetState,this),0);var l=new Dt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(n){n.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});qe.addInitHook("addHandler","boxZoom",Ae),qe.mergeOptions({doubleClickZoom:!0});var fa=Dn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(n){var l=this._map,p=l.getZoom(),x=l.options.zoomDelta,k=n.originalEvent.shiftKey?p-x:p+x;l.options.doubleClickZoom==="center"?l.setZoom(k):l.setZoomAround(n.containerPoint,k)}});qe.addInitHook("addHandler","doubleClickZoom",fa),qe.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Ro=Dn.extend({addHooks:function(){if(!this._draggable){var n=this._map;this._draggable=new Hi(n._mapPane,n._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),n.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),n.on("zoomend",this._onZoomEnd,this),n.whenReady(this._onZoomEnd,this))}It(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Tt(this._map._container,"leaflet-grab"),Tt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var n=this._map;if(n._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=Ht(this._map.options.maxBounds);this._offsetLimit=_t(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;n.fire("movestart").fire("dragstart"),n.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(n){if(this._map.options.inertia){var l=this._lastTime=+new Date,p=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(p),this._times.push(l),this._prunePositions(l)}this._map.fire("move",n).fire("drag",n)},_prunePositions:function(n){for(;this._positions.length>1&&n-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var n=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(n).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(n,l){return n-(n-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var n=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;n.x<l.min.x&&(n.x=this._viscousLimit(n.x,l.min.x)),n.y<l.min.y&&(n.y=this._viscousLimit(n.y,l.min.y)),n.x>l.max.x&&(n.x=this._viscousLimit(n.x,l.max.x)),n.y>l.max.y&&(n.y=this._viscousLimit(n.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(n)}},_onPreDragWrap:function(){var n=this._worldWidth,l=Math.round(n/2),p=this._initialWorldOffset,x=this._draggable._newPos.x,k=(x-l+p)%n+l-p,N=(x+l+p)%n-l-p,tt=Math.abs(k+p)<Math.abs(N+p)?k:N;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=tt},_onDragEnd:function(n){var l=this._map,p=l.options,x=!p.inertia||n.noInertia||this._times.length<2;if(l.fire("dragend",n),x)l.fire("moveend");else{this._prunePositions(+new Date);var k=this._lastPos.subtract(this._positions[0]),N=(this._lastTime-this._times[0])/1e3,tt=p.easeLinearity,pt=k.multiplyBy(tt/N),St=pt.distanceTo([0,0]),Ft=Math.min(p.inertiaMaxSpeed,St),ae=pt.multiplyBy(Ft/St),Se=Ft/(p.inertiaDeceleration*tt),He=ae.multiplyBy(-Se/2).round();!He.x&&!He.y?l.fire("moveend"):(He=l._limitOffset(He,l.options.maxBounds),te(function(){l.panBy(He,{duration:Se,easeLinearity:tt,noMoveStart:!0,animate:!0})}))}}});qe.addInitHook("addHandler","dragging",Ro),qe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var fr=Dn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(n){this._map=n,this._setPanDelta(n.options.keyboardPanDelta),this._setZoomDelta(n.options.zoomDelta)},addHooks:function(){var n=this._map._container;n.tabIndex<=0&&(n.tabIndex="0"),Pe(n,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Qe(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var n=document.body,l=document.documentElement,p=n.scrollTop||l.scrollTop,x=n.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(x,p)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(n){var l=this._panKeys={},p=this.keyCodes,x,k;for(x=0,k=p.left.length;x<k;x++)l[p.left[x]]=[-1*n,0];for(x=0,k=p.right.length;x<k;x++)l[p.right[x]]=[n,0];for(x=0,k=p.down.length;x<k;x++)l[p.down[x]]=[0,n];for(x=0,k=p.up.length;x<k;x++)l[p.up[x]]=[0,-1*n]},_setZoomDelta:function(n){var l=this._zoomKeys={},p=this.keyCodes,x,k;for(x=0,k=p.zoomIn.length;x<k;x++)l[p.zoomIn[x]]=n;for(x=0,k=p.zoomOut.length;x<k;x++)l[p.zoomOut[x]]=-n},_addHooks:function(){Pe(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Qe(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(n){if(!(n.altKey||n.ctrlKey||n.metaKey)){var l=n.keyCode,p=this._map,x;if(l in this._panKeys){if(!p._panAnim||!p._panAnim._inProgress)if(x=this._panKeys[l],n.shiftKey&&(x=ct(x).multiplyBy(3)),p.options.maxBounds&&(x=p._limitOffset(ct(x),p.options.maxBounds)),p.options.worldCopyJump){var k=p.wrapLatLng(p.unproject(p.project(p.getCenter()).add(x)));p.panTo(k)}else p.panBy(x)}else if(l in this._zoomKeys)p.setZoom(p.getZoom()+(n.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&p._popup&&p._popup.options.closeOnEscapeKey)p.closePopup();else return;Ei(n)}}});qe.addInitHook("addHandler","keyboard",fr),qe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Ge=Dn.extend({addHooks:function(){Pe(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Qe(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(n){var l=Yo(n),p=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(n),this._startTime||(this._startTime=+new Date);var x=Math.max(p-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(y(this._performZoom,this),x),Ei(n)},_performZoom:function(){var n=this._map,l=n.getZoom(),p=this._map.options.zoomSnap||0;n._stop();var x=this._delta/(this._map.options.wheelPxPerZoomLevel*4),k=4*Math.log(2/(1+Math.exp(-Math.abs(x))))/Math.LN2,N=p?Math.ceil(k/p)*p:k,tt=n._limitZoom(l+(this._delta>0?N:-N))-l;this._delta=0,this._startTime=null,tt&&(n.options.scrollWheelZoom==="center"?n.setZoom(l+tt):n.setZoomAround(this._lastMousePos,l+tt))}});qe.addInitHook("addHandler","scrollWheelZoom",Ge);var da=600;qe.mergeOptions({tapHold:ye.touchNative&&ye.safari&&ye.mobile,tapTolerance:15});var qn=Dn.extend({addHooks:function(){Pe(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Qe(this._map._container,"touchstart",this._onDown,this)},_onDown:function(n){if(clearTimeout(this._holdTimeout),n.touches.length===1){var l=n.touches[0];this._startPos=this._newPos=new ft(l.clientX,l.clientY),this._holdTimeout=setTimeout(y(function(){this._cancel(),this._isTapValid()&&(Pe(document,"touchend",_n),Pe(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),da),Pe(document,"touchend touchcancel contextmenu",this._cancel,this),Pe(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function n(){Qe(document,"touchend",_n),Qe(document,"touchend touchcancel",n)},_cancel:function(){clearTimeout(this._holdTimeout),Qe(document,"touchend touchcancel contextmenu",this._cancel,this),Qe(document,"touchmove",this._onMove,this)},_onMove:function(n){var l=n.touches[0];this._newPos=new ft(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(n,l){var p=new MouseEvent(n,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});p._simulated=!0,l.target.dispatchEvent(p)}});qe.addInitHook("addHandler","tapHold",qn),qe.mergeOptions({touchZoom:ye.touch,bounceAtZoomLimits:!0});var Gn=Dn.extend({addHooks:function(){It(this._map._container,"leaflet-touch-zoom"),Pe(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Tt(this._map._container,"leaflet-touch-zoom"),Qe(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(n){var l=this._map;if(!(!n.touches||n.touches.length!==2||l._animatingZoom||this._zooming)){var p=l.mouseEventToContainerPoint(n.touches[0]),x=l.mouseEventToContainerPoint(n.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(p.add(x)._divideBy(2))),this._startDist=p.distanceTo(x),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),Pe(document,"touchmove",this._onTouchMove,this),Pe(document,"touchend touchcancel",this._onTouchEnd,this),_n(n)}},_onTouchMove:function(n){if(!(!n.touches||n.touches.length!==2||!this._zooming)){var l=this._map,p=l.mouseEventToContainerPoint(n.touches[0]),x=l.mouseEventToContainerPoint(n.touches[1]),k=p.distanceTo(x)/this._startDist;if(this._zoom=l.getScaleZoom(k,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&k<1||this._zoom>l.getMaxZoom()&&k>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,k===1)return}else{var N=p._add(x)._divideBy(2)._subtract(this._centerPoint);if(k===1&&N.x===0&&N.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(N),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),ee(this._animRequest);var tt=y(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=te(tt,this,!0),_n(n)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,ee(this._animRequest),Qe(document,"touchmove",this._onTouchMove,this),Qe(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});qe.addInitHook("addHandler","touchZoom",Gn),qe.BoxZoom=Ae,qe.DoubleClickZoom=fa,qe.Drag=Ro,qe.Keyboard=fr,qe.ScrollWheelZoom=Ge,qe.TapHold=qn,qe.TouchZoom=Gn,o.Bounds=K,o.Browser=ye,o.CRS=$e,o.Canvas=ca,o.Circle=ia,o.CircleMarker=ar,o.Class=Ie,o.Control=Oe,o.DivIcon=ua,o.DivOverlay=hr,o.DomEvent=Es,o.DomUtil=Ln,o.Draggable=Hi,o.Evented=mt,o.FeatureGroup=$i,o.GeoJSON=lr,o.GridLayer=Xr,o.Handler=Dn,o.Icon=Ss,o.ImageOverlay=ur,o.LatLng=se,o.LatLngBounds=Dt,o.Layer=ni,o.LayerGroup=Kr,o.LineUtil=Lo,o.Map=qe,o.Marker=Nr,o.Mixin=Ga,o.Path=Fr,o.Point=ft,o.PolyUtil=Ul,o.Polygon=Wi,o.Polyline=Li,o.Popup=Jr,o.PosAnimation=Qo,o.Projection=or,o.Rectangle=Xa,o.Renderer=cr,o.SVG=Pn,o.SVGOverlay=Ka,o.TileLayer=Yr,o.Tooltip=so,o.Transformation=Bi,o.Util=Fe,o.VideoOverlay=io,o.bind=y,o.bounds=_t,o.canvas=To,o.circle=Vi,o.circleMarker=Za,o.control=sr,o.divIcon=gl,o.extend=f,o.featureGroup=fl,o.geoJSON=la,o.geoJson=Oi,o.gridLayer=oo,o.icon=dl,o.imageOverlay=pl,o.latLng=Jt,o.latLngBounds=Ht,o.layerGroup=Co,o.map=Or,o.marker=Vl,o.point=ct,o.polygon=So,o.polyline=Wl,o.popup=ro,o.rectangle=Zi,o.setOptions=Z,o.stamp=E,o.svg=Fn,o.svgOverlay=Ja,o.tileLayer=ha,o.tooltip=Bo,o.transformation=jr,o.version=c,o.videoOverlay=qa;var Qr=window.L;o.noConflict=function(){return window.L=Qr,this},window.L=o}))})(du,du.exports)),du.exports}var go=Bg();const ui=Dh(go),Tg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABSCAMAAAAhFXfZAAAC91BMVEVMaXEzeak2f7I4g7g3g7cua5gzeKg8hJo3grY4g7c3grU0gLI2frE0daAubJc2gbQwd6QzeKk2gLMtd5sxdKIua5g1frA2f7IydaM0e6w2fq41fK01eqo3grgubJgta5cxdKI1f7AydaQydaMxc6EubJgvbJkwcZ4ubZkwcJwubZgubJcydqUydKIxapgubJctbJcubZcubJcvbJYubJcvbZkubJctbJctbZcubJg2f7AubJcrbZcubJcubJcua5g3grY0fq8ubJcubJdEkdEwhsw6i88vhswuhcsuhMtBjMgthMsrg8srgss6is8qgcs8i9A9iMYtg8spgcoogMo7hcMngMonf8olfso4gr8kfck5iM8jfMk4iM8he8k1fro7itAgesk2hs8eecgzfLcofssdeMg0hc4cd8g2hcsxeLQbdsgZdcgxeLImfcszhM0vda4xgckzhM4xg84wf8Yxgs4udKsvfcQucqhUndROmdM1fK0wcZ8vb5w0eqpQm9MzeKhXoNVcpdYydKNWn9VZotVKltJFjsIwcJ1Rms9OlslLmtH///8+kc9epdYzd6dbo9VHkMM2f7FHmNBClM8ydqVcpNY9hro3gLM9hLczealQmcw3fa46f7A8gLMxc6I3eagyc6FIldJMl9JSnNRSntNNl9JPnNJFi75UnM9ZodVKksg8kM45jc09e6ZHltFBk883gbRBh7pDk9EwcaBzn784g7dKkcY2i81Om9M7j85Llc81is09g7Q4grY/j9A0eqxKmdFFltBEjcXf6fFImdBCiLxJl9FGlNFBi78yiMxVndEvbpo6js74+vx+psPP3+o/ks5HkcpGmNCjwdZCkNDM3ehYoNJEls+lxNkxh8xHks0+jdC1zd5Lg6r+/v/H2ufz9/o3jM3t8/edvdM/k89Th61OiLBSjbZklbaTt9BfptdjmL1AicBHj8hGk9FAgK1dkLNTjLRekrdClc/k7fM0icy0y9tgp9c4jc2NtM9Dlc8zicxeXZn3AAAAQ3RSTlMAHDdTb4yPA+LtnEQmC4L2EmHqB7XA0d0sr478x4/Yd5i1zOfyPkf1sLVq4Nh3FvjxopQ2/STNuFzUwFIwxKaejILpIBEV9wAABhVJREFUeF6s1NdyFEcYBeBeoQIhRAkLlRDGrhIgY3BJL8CVeKzuyXFzzjkn5ZxzzuScg3PO8cKzu70JkO0LfxdTU//pM9vTu7Xgf6KqOVTb9X7toRrVEfBf1HTVjZccrT/2by1VV928Yty9ZbVuucdz90frG8DBjl9pVApbOstvmMuvVgaNXSfAAd6pGxpy6yxf5ph43pS/4f3uoaGm2rdu72S9xzOvMymkZFq/ptDrk90mhW7e4zl7HLzhxGWPR20xmSxJ/VqldG5m9XhaVOA1DadsNh3Pu5L2N6QtPO/32JpqQBVVk20oy/Pi2s23WEvyfHbe1thadVQttvm7Llf65gGmXK67XtupyoM7HQhmXdLS8oGWJNeOJ3C5fG5XCEJnkez3/oFdsvgJ4l2ANZwhrJKk/7OSXa+3Vw2WJMlKnGkobouYk6T0TyX30klOUnTD9HJ5qpckL3EW/w4XF3Xd0FGywXUrstrclVsqz5Pd/sXFYyDnPdrLcQODmGOK47IZb4CmibmMn+MYRzFZ5jg33ZL/EJrWcszHmANy3ARBK/IXtciJy8VsitPSdE3uuHxzougojcUdr8/32atnz/ev3f/K5wtpxUTpcaI45zusVDpYtZi+jg0oU9b3x74h7+n9ABvYEZeKaVq0sh0AtLKsFtqNBdeT0MrSzwwlq9+x6xAO4tgOtSzbCjrNQQiNvQUbUEubvzBUeGw26yDCsRHCoLkTHDa7IdOLIThs/gHvChszh2CimE8peRs47cxANI0lYNB5y1DljpOF0IhzBDPOZnDOqYYbeGKECbPzWnXludPphw5c2YBq5zlwXphIbO4VDCZ0gnPfUO1TwZoYwAs2ExPCedAu9DAjfQUjzITQb3jNj0KG2Sgt6BHaQUdYzWz+XmBktOHwanXjaSTcwwziBcuMOtwBmqPrTOxFQR/DRKKPqyur0aiW6cULYsx6tBm0jXpR/AUWR6HRq9WVW6MRhIq5jLyjbaCTDCijyYJNpCajdyobP/eTw0iexBAKkJ3gA5KcQb2zBXsIBckn+xVv8jkZSaEFHE+jFEleAEfayRU0MouNoBmB/L50Ai/HSLIHxcrpCvnhSQAuakKp2C/YbCylJjXRVy/z3+Kv/RrNcCo+WUzlVEhzKffnTQnxeN9fWF88fiNCUdSTsaufaChKWInHeysygfpIqagoakW+vV20J8uyl6TyNKEZWV4oRSPyCkWpgOLSbkCObT8o2r6tlG58HQquf6O0v50tB7JM7F4EORd2dx/K0w/KHsVkLPaoYrwgP/y7krr3SSMA4zj+OBgmjYkxcdIJQyQRKgg2viX9Hddi9UBb29LrKR7CVVEEEXWojUkXNyfTNDE14W9gbHJNuhjDettN3ZvbOvdOqCD3Jp/9l+/wJE+9PkYGjx/fqkys3S2rMozM/o2106rfMUINo6hVqz+eu/hd1c4xTg0TAfy5kV+4UG6+IthHTU9woWmxuKNbTfuCSfovBCxq7EtHqvYL4Sm6F8GVxsSXHMQ07TOi1DKtZxjWaaIyi4CXWjxPccUw8WVbMYY5wxC1mzEyXMJWkllpRloi+Kkoq69sxBTlElF6aAxYUbjXNlhlDZilDnM4U5SlN5biRsRHnbx3mbeWjEh4mEyiuJDl5XcWVmX5GvNkFgLWZM5qwsop4/AWfLhU1cR7k1VVvcYCWRkOI6Xy5gmnphCYIkvzuNYzHzosq2oNk2RtSs8khfUOfHIDgR6ysYBaMpl4uEgk2U/oJTs9AaTSwma7dT69geAE2ZpEjUsn2ieJNHeKfrI3EcAGJ2ZaNgVuC8EBctCLc57P5u5led6IOBkIYkuQMrmmjChs4VkfOerHqSBkPzZlhe06RslZ3zMjk2sscqKwY0RcjKK+LWbzd7KiHhkncs/siFJ+V5eXxD34B8nVuJEpGJNmxN2gH3vSvp7J70tF+D1Ej8qUJD1TkErAND2GZwTFg/LubvmgiBG3SOvdlsqFQrkEzJCL1rstlnVFROixZoDDSuXQFHESwVGlcuQcMb/b42NgjLowh5MTDFE3vNB5qStRIErdCQEh6pLPR92anSUb/wAIhldAaDMpGgAAAABJRU5ErkJggg==",Rg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",Ig="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC";function Jp(e,i){const o=vt.useRef(i);vt.useEffect(function(){i!==o.current&&e.attributionControl!=null&&(o.current!=null&&e.attributionControl.removeAttribution(o.current),i!=null&&e.attributionControl.addAttribution(i)),o.current=i},[e,i])}var Og=Kp();const Dg=1;function Ng(e){return Object.freeze({__version:Dg,map:e})}function Nh(e,i){return Object.freeze({...e,...i})}const Xp=vt.createContext(null),lf=Xp.Provider;function Au(){const e=vt.useContext(Xp);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function Yp(e){function i(o,c){const{instance:f,context:g}=e(o).current;return vt.useImperativeHandle(c,()=>f),o.children==null?null:us.createElement(lf,{value:g},o.children)}return vt.forwardRef(i)}function Fg(e){function i(o,c){const[f,g]=vt.useState(!1),{instance:y}=e(o,g).current;vt.useImperativeHandle(c,()=>y),vt.useEffect(function(){f&&y.update()},[y,f,o.children]);const v=y._contentNode;return v?Og.createPortal(o.children,v):null}return vt.forwardRef(i)}function Gg(e){function i(o,c){const{instance:f}=e(o).current;return vt.useImperativeHandle(c,()=>f),null}return vt.forwardRef(i)}function zg(e){return function(o){const c=Au(),f=e(o,c),{instance:g}=f.current,y=vt.useRef(o.position),{position:v}=o;return vt.useEffect(function(){return g.addTo(c.map),function(){g.remove()}},[c.map,g]),vt.useEffect(function(){v!=null&&v!==y.current&&(g.setPosition(v),y.current=v)},[g,v]),f}}function Qp(e,i){const o=vt.useRef();vt.useEffect(function(){return i!=null&&e.instance.on(i),o.current=i,function(){o.current!=null&&e.instance.off(o.current),o.current=null}},[e,i])}function uf(e,i){const o=e.pane??i.pane;return o?{...e,pane:o}:e}function jg(e,i){return function(c,f){const g=Au(),y=e(uf(c,g),g);return Jp(g.map,c.attribution),Qp(y.current,c.eventHandlers),i(y.current,g,c,f),y}}function Bu(e,i,o){return Object.freeze({instance:e,context:i,container:o})}function Fh(e,i){return i==null?function(c,f){const g=vt.useRef();return g.current||(g.current=e(c,f)),g}:function(c,f){const g=vt.useRef();g.current||(g.current=e(c,f));const y=vt.useRef(c),{instance:v}=g.current;return vt.useEffect(function(){y.current!==c&&(i(v,c,y.current),y.current=c)},[v,c,f]),g}}function Ug(e,i){vt.useEffect(function(){return(i.layerContainer??i.map).addLayer(e.instance),function(){var g;(g=i.layerContainer)==null||g.removeLayer(e.instance),i.map.removeLayer(e.instance)}},[i,e])}function t0(e){return function(o){const c=Au(),f=e(uf(o,c),c);return Jp(c.map,o.attribution),Qp(f.current,o.eventHandlers),Ug(f.current,c),f}}function e0(e,i){const o=Fh(e,i),c=t0(o);return Yp(c)}function Hg(e,i){const o=Fh(e),c=jg(o,i);return Fg(c)}function $g(e,i){const o=Fh(e,i),c=t0(o);return Gg(c)}function Vg(e,i,o){const{opacity:c,zIndex:f}=i;c!=null&&c!==o.opacity&&e.setOpacity(c),f!=null&&f!==o.zIndex&&e.setZIndex(f)}function Wg(e,i,o){i.bounds instanceof go.LatLngBounds&&i.bounds!==o.bounds&&e.setBounds(i.bounds),i.opacity!=null&&i.opacity!==o.opacity&&e.setOpacity(i.opacity),i.zIndex!=null&&i.zIndex!==o.zIndex&&e.setZIndex(i.zIndex)}function jo(){return Au().map}function Zg(e){const i=jo();return vt.useEffect(function(){return i.on(e),function(){i.off(e)}},[i,e]),i}const qg=e0(function({bounds:i,url:o,...c},f){const g=new go.ImageOverlay(o,i,c);return Bu(g,Nh(f,{overlayContainer:g}))},function(i,o,c){if(Wg(i,o,c),o.bounds!==c.bounds){const f=o.bounds instanceof go.LatLngBounds?o.bounds:new go.LatLngBounds(o.bounds);i.setBounds(f)}o.url!==c.url&&i.setUrl(o.url)}),Kg=Fh(function({children:i,...o},c){const f=new go.Control.Layers(void 0,void 0,o);return Bu(f,Nh(c,{layersControl:f}))},function(i,o,c){o.collapsed!==c.collapsed&&(o.collapsed===!0?i.collapse():i.expand())}),Jg=zg(Kg),Tl=Yp(Jg);function n0(e){return function(o){const c=Au(),f=vt.useRef(o),[g,y]=vt.useState(null),{layersControl:v,map:E}=c,A=vt.useCallback(B=>{v!=null&&(f.current.checked&&E.addLayer(B),e(v,B,f.current.name),y(B))},[v,E]),G=vt.useCallback(B=>{v==null||v.removeLayer(B),y(null)},[v]),P=vt.useMemo(()=>Nh(c,{layerContainer:{addLayer:A,removeLayer:G}}),[c,A,G]);return vt.useEffect(()=>{g!==null&&f.current!==o&&(o.checked===!0&&(f.current.checked==null||f.current.checked===!1)?E.addLayer(g):f.current.checked===!0&&(o.checked==null||o.checked===!1)&&E.removeLayer(g),f.current=o)}),o.children?us.createElement(lf,{value:P},o.children):null}}Tl.BaseLayer=n0(function(i,o,c){i.addBaseLayer(o,c)});Tl.Overlay=n0(function(i,o,c){i.addOverlay(o,c)});function Vc(){return Vc=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(e[c]=o[c])}return e},Vc.apply(this,arguments)}function Xg({bounds:e,boundsOptions:i,center:o,children:c,className:f,id:g,placeholder:y,style:v,whenReady:E,zoom:A,...G},P){const[B]=vt.useState({className:f,id:g,style:v}),[V,q]=vt.useState(null);vt.useImperativeHandle(P,()=>(V==null?void 0:V.map)??null,[V]);const Z=vt.useCallback(ht=>{if(ht!==null&&V===null){const lt=new go.Map(ht,G);o!=null&&A!=null?lt.setView(o,A):e!=null&&lt.fitBounds(e,i),E!=null&&lt.whenReady(E),q(Ng(lt))}},[]);vt.useEffect(()=>()=>{V==null||V.map.remove()},[V]);const Y=V?us.createElement(lf,{value:V},c):y??null;return us.createElement("div",Vc({},B,{ref:Z}),Y)}const Yg=vt.forwardRef(Xg),Qg=e0(function({position:i,...o},c){const f=new go.Marker(i,o);return Bu(f,Nh(c,{overlayContainer:f}))},function(i,o,c){o.position!==c.position&&i.setLatLng(o.position),o.icon!=null&&o.icon!==c.icon&&i.setIcon(o.icon),o.zIndexOffset!=null&&o.zIndexOffset!==c.zIndexOffset&&i.setZIndexOffset(o.zIndexOffset),o.opacity!=null&&o.opacity!==c.opacity&&i.setOpacity(o.opacity),i.dragging!=null&&o.draggable!==c.draggable&&(o.draggable===!0?i.dragging.enable():i.dragging.disable())}),Rc=$g(function({url:i,...o},c){const f=new go.TileLayer(i,uf(o,c));return Bu(f,c)},function(i,o,c){Vg(i,o,c);const{url:f}=o;f!=null&&f!==c.url&&i.setUrl(f)}),tm=Hg(function(i,o){const c=new go.Tooltip(i,o.overlayContainer);return Bu(c,o)},function(i,o,{position:c},f){vt.useEffect(function(){const y=o.overlayContainer;if(y==null)return;const{instance:v}=i,E=G=>{G.tooltip===v&&(c!=null&&v.setLatLng(c),v.update(),f(!0))},A=G=>{G.tooltip===v&&f(!1)};return y.on({tooltipopen:E,tooltipclose:A}),y.bindTooltip(v),function(){y.off({tooltipopen:E,tooltipclose:A}),y._map!=null&&y.unbindTooltip()}},[i,o,f,c])});var Jd={},Xd;function em(){return Xd||(Xd=1,(()=>{var Ql,El;var e=Object.create,i=Object.defineProperty,o=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,f=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty,y=(s,a)=>()=>(a||s((a={exports:{}}).exports,a),a.exports),v=(s,a,h,d)=>{if(a&&typeof a=="object"||typeof a=="function")for(let _ of c(a))!g.call(s,_)&&_!==h&&i(s,_,{get:()=>a[_],enumerable:!(d=o(a,_))||d.enumerable});return s},E=(s,a,h)=>(h=s!=null?e(f(s)):{},v(a||!s||!s.__esModule?i(h,"default",{value:s,enumerable:!0}):h,s)),A=y((s,a)=>{function h(){this.__data__=[],this.size=0}a.exports=h}),G=y((s,a)=>{function h(d,_){return d===_||d!==d&&_!==_}a.exports=h}),P=y((s,a)=>{var h=G();function d(_,w){for(var b=_.length;b--;)if(h(_[b][0],w))return b;return-1}a.exports=d}),B=y((s,a)=>{var h=P(),d=Array.prototype,_=d.splice;function w(b){var S=this.__data__,T=h(S,b);if(T<0)return!1;var O=S.length-1;return T==O?S.pop():_.call(S,T,1),--this.size,!0}a.exports=w}),V=y((s,a)=>{var h=P();function d(_){var w=this.__data__,b=h(w,_);return b<0?void 0:w[b][1]}a.exports=d}),q=y((s,a)=>{var h=P();function d(_){return h(this.__data__,_)>-1}a.exports=d}),Z=y((s,a)=>{var h=P();function d(_,w){var b=this.__data__,S=h(b,_);return S<0?(++this.size,b.push([_,w])):b[S][1]=w,this}a.exports=d}),Y=y((s,a)=>{var h=A(),d=B(),_=V(),w=q(),b=Z();function S(T){var O=-1,X=T==null?0:T.length;for(this.clear();++O<X;){var W=T[O];this.set(W[0],W[1])}}S.prototype.clear=h,S.prototype.delete=d,S.prototype.get=_,S.prototype.has=w,S.prototype.set=b,a.exports=S}),ht=y((s,a)=>{var h=Y();function d(){this.__data__=new h,this.size=0}a.exports=d}),lt=y((s,a)=>{function h(d){var _=this.__data__,w=_.delete(d);return this.size=_.size,w}a.exports=h}),Pt=y((s,a)=>{function h(d){return this.__data__.get(d)}a.exports=h}),Ut=y((s,a)=>{function h(d){return this.__data__.has(d)}a.exports=h}),Ot=y((s,a)=>{var h=typeof ch=="object"&&ch&&ch.Object===Object&&ch;a.exports=h}),Gt=y((s,a)=>{var h=Ot(),d=typeof self=="object"&&self&&self.Object===Object&&self,_=h||d||Function("return this")();a.exports=_}),$t=y((s,a)=>{var h=Gt(),d=h.Symbol;a.exports=d}),Vt=y((s,a)=>{var h=$t(),d=Object.prototype,_=d.hasOwnProperty,w=d.toString,b=h?h.toStringTag:void 0;function S(T){var O=_.call(T,b),X=T[b];try{T[b]=void 0;var W=!0}catch{}var yt=w.call(T);return W&&(O?T[b]=X:delete T[b]),yt}a.exports=S}),Qt=y((s,a)=>{var h=Object.prototype,d=h.toString;function _(w){return d.call(w)}a.exports=_}),zt=y((s,a)=>{var h=$t(),d=Vt(),_=Qt(),w="[object Null]",b="[object Undefined]",S=h?h.toStringTag:void 0;function T(O){return O==null?O===void 0?b:w:S&&S in Object(O)?d(O):_(O)}a.exports=T}),te=y((s,a)=>{function h(d){var _=typeof d;return d!=null&&(_=="object"||_=="function")}a.exports=h}),ee=y((s,a)=>{var h=zt(),d=te(),_="[object AsyncFunction]",w="[object Function]",b="[object GeneratorFunction]",S="[object Proxy]";function T(O){if(!d(O))return!1;var X=h(O);return X==w||X==b||X==_||X==S}a.exports=T}),Fe=y((s,a)=>{var h=Gt(),d=h["__core-js_shared__"];a.exports=d}),Ie=y((s,a)=>{var h=Fe(),d=(function(){var w=/[^.]+$/.exec(h&&h.keys&&h.keys.IE_PROTO||"");return w?"Symbol(src)_1."+w:""})();function _(w){return!!d&&d in w}a.exports=_}),Mt=y((s,a)=>{var h=Function.prototype,d=h.toString;function _(w){if(w!=null){try{return d.call(w)}catch{}try{return w+""}catch{}}return""}a.exports=_}),At=y((s,a)=>{var h=ee(),d=Ie(),_=te(),w=Mt(),b=/[\\^$.*+?()[\]{}|]/g,S=/^\[object .+?Constructor\]$/,T=Function.prototype,O=Object.prototype,X=T.toString,W=O.hasOwnProperty,yt=RegExp("^"+X.call(W).replace(b,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Lt(jt){if(!_(jt)||d(jt))return!1;var ie=h(jt)?yt:S;return ie.test(w(jt))}a.exports=Lt}),mt=y((s,a)=>{function h(d,_){return d==null?void 0:d[_]}a.exports=h}),ft=y((s,a)=>{var h=At(),d=mt();function _(w,b){var S=d(w,b);return h(S)?S:void 0}a.exports=_}),Rt=y((s,a)=>{var h=ft(),d=Gt(),_=h(d,"Map");a.exports=_}),ct=y((s,a)=>{var h=ft(),d=h(Object,"create");a.exports=d}),K=y((s,a)=>{var h=ct();function d(){this.__data__=h?h(null):{},this.size=0}a.exports=d}),_t=y((s,a)=>{function h(d){var _=this.has(d)&&delete this.__data__[d];return this.size-=_?1:0,_}a.exports=h}),Dt=y((s,a)=>{var h=ct(),d="__lodash_hash_undefined__",_=Object.prototype,w=_.hasOwnProperty;function b(S){var T=this.__data__;if(h){var O=T[S];return O===d?void 0:O}return w.call(T,S)?T[S]:void 0}a.exports=b}),Ht=y((s,a)=>{var h=ct(),d=Object.prototype,_=d.hasOwnProperty;function w(b){var S=this.__data__;return h?S[b]!==void 0:_.call(S,b)}a.exports=w}),se=y((s,a)=>{var h=ct(),d="__lodash_hash_undefined__";function _(w,b){var S=this.__data__;return this.size+=this.has(w)?0:1,S[w]=h&&b===void 0?d:b,this}a.exports=_}),Jt=y((s,a)=>{var h=K(),d=_t(),_=Dt(),w=Ht(),b=se();function S(T){var O=-1,X=T==null?0:T.length;for(this.clear();++O<X;){var W=T[O];this.set(W[0],W[1])}}S.prototype.clear=h,S.prototype.delete=d,S.prototype.get=_,S.prototype.has=w,S.prototype.set=b,a.exports=S}),$e=y((s,a)=>{var h=Jt(),d=Y(),_=Rt();function w(){this.size=0,this.__data__={hash:new h,map:new(_||d),string:new h}}a.exports=w}),Re=y((s,a)=>{function h(d){var _=typeof d;return _=="string"||_=="number"||_=="symbol"||_=="boolean"?d!=="__proto__":d===null}a.exports=h}),Ye=y((s,a)=>{var h=Re();function d(_,w){var b=_.__data__;return h(w)?b[typeof w=="string"?"string":"hash"]:b.map}a.exports=d}),cn=y((s,a)=>{var h=Ye();function d(_){var w=h(this,_).delete(_);return this.size-=w?1:0,w}a.exports=d}),Bi=y((s,a)=>{var h=Ye();function d(_){return h(this,_).get(_)}a.exports=d}),jr=y((s,a)=>{var h=Ye();function d(_){return h(this,_).has(_)}a.exports=d}),er=y((s,a)=>{var h=Ye();function d(_,w){var b=h(this,_),S=b.size;return b.set(_,w),this.size+=b.size==S?0:1,this}a.exports=d}),js=y((s,a)=>{var h=$e(),d=cn(),_=Bi(),w=jr(),b=er();function S(T){var O=-1,X=T==null?0:T.length;for(this.clear();++O<X;){var W=T[O];this.set(W[0],W[1])}}S.prototype.clear=h,S.prototype.delete=d,S.prototype.get=_,S.prototype.has=w,S.prototype.set=b,a.exports=S}),Ho=y((s,a)=>{var h=Y(),d=Rt(),_=js(),w=200;function b(S,T){var O=this.__data__;if(O instanceof h){var X=O.__data__;if(!d||X.length<w-1)return X.push([S,T]),this.size=++O.size,this;O=this.__data__=new _(X)}return O.set(S,T),this.size=O.size,this}a.exports=b}),Ti=y((s,a)=>{var h=Y(),d=ht(),_=lt(),w=Pt(),b=Ut(),S=Ho();function T(O){var X=this.__data__=new h(O);this.size=X.size}T.prototype.clear=d,T.prototype.delete=_,T.prototype.get=w,T.prototype.has=b,T.prototype.set=S,a.exports=T}),Ur=y((s,a)=>{var h=ft(),d=(function(){try{var _=h(Object,"defineProperty");return _({},"",{}),_}catch{}})();a.exports=d}),Vn=y((s,a)=>{var h=Ur();function d(_,w,b){w=="__proto__"&&h?h(_,w,{configurable:!0,enumerable:!0,value:b,writable:!0}):_[w]=b}a.exports=d}),Hr=y((s,a)=>{var h=Vn(),d=G();function _(w,b,S){(S!==void 0&&!d(w[b],S)||S===void 0&&!(b in w))&&h(w,b,S)}a.exports=_}),Xn=y((s,a)=>{function h(d){return function(_,w,b){for(var S=-1,T=Object(_),O=b(_),X=O.length;X--;){var W=O[d?X:++S];if(w(T[W],W,T)===!1)break}return _}}a.exports=h}),Sr=y((s,a)=>{var h=Xn(),d=h();a.exports=d}),vi=y((s,a)=>{var h=Gt(),d=typeof s=="object"&&s&&!s.nodeType&&s,_=d&&typeof a=="object"&&a&&!a.nodeType&&a,w=_&&_.exports===d,b=w?h.Buffer:void 0,S=b?b.allocUnsafe:void 0;function T(O,X){if(X)return O.slice();var W=O.length,yt=S?S(W):new O.constructor(W);return O.copy(yt),yt}a.exports=T}),gn=y((s,a)=>{var h=Gt(),d=h.Uint8Array;a.exports=d}),$o=y((s,a)=>{var h=gn();function d(_){var w=new _.constructor(_.byteLength);return new h(w).set(new h(_)),w}a.exports=d}),ln=y((s,a)=>{var h=$o();function d(_,w){var b=w?h(_.buffer):_.buffer;return new _.constructor(b,_.byteOffset,_.length)}a.exports=d}),Us=y((s,a)=>{function h(d,_){var w=-1,b=d.length;for(_||(_=Array(b));++w<b;)_[w]=d[w];return _}a.exports=h}),Yn=y((s,a)=>{var h=te(),d=Object.create,_=(function(){function w(){}return function(b){if(!h(b))return{};if(d)return d(b);w.prototype=b;var S=new w;return w.prototype=void 0,S}})();a.exports=_}),cs=y((s,a)=>{function h(d,_){return function(w){return d(_(w))}}a.exports=h}),hi=y((s,a)=>{var h=cs(),d=h(Object.getPrototypeOf,Object);a.exports=d}),kr=y((s,a)=>{var h=Object.prototype;function d(_){var w=_&&_.constructor,b=typeof w=="function"&&w.prototype||h;return _===b}a.exports=d}),Qn=y((s,a)=>{var h=Yn(),d=hi(),_=kr();function w(b){return typeof b.constructor=="function"&&!_(b)?h(d(b)):{}}a.exports=w}),$r=y((s,a)=>{function h(d){return d!=null&&typeof d=="object"}a.exports=h}),fn=y((s,a)=>{var h=zt(),d=$r(),_="[object Arguments]";function w(b){return d(b)&&h(b)==_}a.exports=w}),nr=y((s,a)=>{var h=fn(),d=$r(),_=Object.prototype,w=_.hasOwnProperty,b=_.propertyIsEnumerable,S=h((function(){return arguments})())?h:function(T){return d(T)&&w.call(T,"callee")&&!b.call(T,"callee")};a.exports=S}),Sn=y((s,a)=>{var h=Array.isArray;a.exports=h}),fs=y((s,a)=>{var h=9007199254740991;function d(_){return typeof _=="number"&&_>-1&&_%1==0&&_<=h}a.exports=d}),kn=y((s,a)=>{var h=ee(),d=fs();function _(w){return w!=null&&d(w.length)&&!h(w)}a.exports=_}),_o=y((s,a)=>{var h=kn(),d=$r();function _(w){return d(w)&&h(w)}a.exports=_}),ci=y((s,a)=>{function h(){return!1}a.exports=h}),ds=y((s,a)=>{var h=Gt(),d=ci(),_=typeof s=="object"&&s&&!s.nodeType&&s,w=_&&typeof a=="object"&&a&&!a.nodeType&&a,b=w&&w.exports===_,S=b?h.Buffer:void 0,T=S?S.isBuffer:void 0,O=T||d;a.exports=O}),ke=y((s,a)=>{var h=zt(),d=hi(),_=$r(),w="[object Object]",b=Function.prototype,S=Object.prototype,T=b.toString,O=S.hasOwnProperty,X=T.call(Object);function W(yt){if(!_(yt)||h(yt)!=w)return!1;var Lt=d(yt);if(Lt===null)return!0;var jt=O.call(Lt,"constructor")&&Lt.constructor;return typeof jt=="function"&&jt instanceof jt&&T.call(jt)==X}a.exports=W}),ti=y((s,a)=>{var h=zt(),d=fs(),_=$r(),w="[object Arguments]",b="[object Array]",S="[object Boolean]",T="[object Date]",O="[object Error]",X="[object Function]",W="[object Map]",yt="[object Number]",Lt="[object Object]",jt="[object RegExp]",ie="[object Set]",de="[object String]",Ke="[object WeakMap]",J="[object ArrayBuffer]",et="[object DataView]",ot="[object Float32Array]",wt="[object Float64Array]",ut="[object Int8Array]",Et="[object Int16Array]",R="[object Int32Array]",F="[object Uint8Array]",U="[object Uint8ClampedArray]",j="[object Uint16Array]",$="[object Uint32Array]",H={};H[ot]=H[wt]=H[ut]=H[Et]=H[R]=H[F]=H[U]=H[j]=H[$]=!0,H[w]=H[b]=H[J]=H[S]=H[et]=H[T]=H[O]=H[X]=H[W]=H[yt]=H[Lt]=H[jt]=H[ie]=H[de]=H[Ke]=!1;function nt(it){return _(it)&&d(it.length)&&!!H[h(it)]}a.exports=nt}),Vo=y((s,a)=>{function h(d){return function(_){return d(_)}}a.exports=h}),Da=y((s,a)=>{var h=Ot(),d=typeof s=="object"&&s&&!s.nodeType&&s,_=d&&typeof a=="object"&&a&&!a.nodeType&&a,w=_&&_.exports===d,b=w&&h.process,S=(function(){try{var T=_&&_.require&&_.require("util").types;return T||b&&b.binding&&b.binding("util")}catch{}})();a.exports=S}),yo=y((s,a)=>{var h=ti(),d=Vo(),_=Da(),w=_&&_.isTypedArray,b=w?d(w):h;a.exports=b}),Wo=y((s,a)=>{function h(d,_){if(!(_==="constructor"&&typeof d[_]=="function")&&_!="__proto__")return d[_]}a.exports=h}),Pr=y((s,a)=>{var h=Vn(),d=G(),_=Object.prototype,w=_.hasOwnProperty;function b(S,T,O){var X=S[T];(!(w.call(S,T)&&d(X,O))||O===void 0&&!(T in S))&&h(S,T,O)}a.exports=b}),ps=y((s,a)=>{var h=Pr(),d=Vn();function _(w,b,S,T){var O=!S;S||(S={});for(var X=-1,W=b.length;++X<W;){var yt=b[X],Lt=T?T(S[yt],w[yt],yt,S,w):void 0;Lt===void 0&&(Lt=w[yt]),O?d(S,yt,Lt):h(S,yt,Lt)}return S}a.exports=_}),gs=y((s,a)=>{function h(d,_){for(var w=-1,b=Array(d);++w<d;)b[w]=_(w);return b}a.exports=h}),vn=y((s,a)=>{var h=9007199254740991,d=/^(?:0|[1-9]\d*)$/;function _(w,b){var S=typeof w;return b=b??h,!!b&&(S=="number"||S!="symbol"&&d.test(w))&&w>-1&&w%1==0&&w<b}a.exports=_}),ms=y((s,a)=>{var h=gs(),d=nr(),_=Sn(),w=ds(),b=vn(),S=yo(),T=Object.prototype,O=T.hasOwnProperty;function X(W,yt){var Lt=_(W),jt=!Lt&&d(W),ie=!Lt&&!jt&&w(W),de=!Lt&&!jt&&!ie&&S(W),Ke=Lt||jt||ie||de,J=Ke?h(W.length,String):[],et=J.length;for(var ot in W)(yt||O.call(W,ot))&&!(Ke&&(ot=="length"||ie&&(ot=="offset"||ot=="parent")||de&&(ot=="buffer"||ot=="byteLength"||ot=="byteOffset")||b(ot,et)))&&J.push(ot);return J}a.exports=X}),Ar=y((s,a)=>{function h(d){var _=[];if(d!=null)for(var w in Object(d))_.push(w);return _}a.exports=h}),Zo=y((s,a)=>{var h=te(),d=kr(),_=Ar(),w=Object.prototype,b=w.hasOwnProperty;function S(T){if(!h(T))return _(T);var O=d(T),X=[];for(var W in T)W=="constructor"&&(O||!b.call(T,W))||X.push(W);return X}a.exports=S}),In=y((s,a)=>{var h=ms(),d=Zo(),_=kn();function w(b){return _(b)?h(b,!0):d(b)}a.exports=w}),ye=y((s,a)=>{var h=ps(),d=In();function _(w){return h(w,d(w))}a.exports=_}),_s=y((s,a)=>{var h=Hr(),d=vi(),_=ln(),w=Us(),b=Qn(),S=nr(),T=Sn(),O=_o(),X=ds(),W=ee(),yt=te(),Lt=ke(),jt=yo(),ie=Wo(),de=ye();function Ke(J,et,ot,wt,ut,Et,R){var F=ie(J,ot),U=ie(et,ot),j=R.get(U);if(j){h(J,ot,j);return}var $=Et?Et(F,U,ot+"",J,et,R):void 0,H=$===void 0;if(H){var nt=T(U),it=!nt&&X(U),st=!nt&&!it&&jt(U);$=U,nt||it||st?T(F)?$=F:O(F)?$=w(F):it?(H=!1,$=d(U,!0)):st?(H=!1,$=_(U,!0)):$=[]:Lt(U)||S(U)?($=F,S(F)?$=de(F):(!yt(F)||W(F))&&($=b(U))):H=!1}H&&(R.set(U,$),ut($,U,wt,Et,R),R.delete(U)),h(J,ot,$)}a.exports=Ke}),ys=y((s,a)=>{var h=Ti(),d=Hr(),_=Sr(),w=_s(),b=te(),S=In(),T=Wo();function O(X,W,yt,Lt,jt){X!==W&&_(W,function(ie,de){if(jt||(jt=new h),b(ie))w(X,W,de,yt,O,Lt,jt);else{var Ke=Lt?Lt(T(X,de),ie,de+"",X,W,jt):void 0;Ke===void 0&&(Ke=ie),d(X,de,Ke)}},S)}a.exports=O}),Hs=y((s,a)=>{function h(d){return d}a.exports=h}),qo=y((s,a)=>{function h(d,_,w){switch(w.length){case 0:return d.call(_);case 1:return d.call(_,w[0]);case 2:return d.call(_,w[0],w[1]);case 3:return d.call(_,w[0],w[1],w[2])}return d.apply(_,w)}a.exports=h}),vo=y((s,a)=>{var h=qo(),d=Math.max;function _(w,b,S){return b=d(b===void 0?w.length-1:b,0),function(){for(var T=arguments,O=-1,X=d(T.length-b,0),W=Array(X);++O<X;)W[O]=T[b+O];O=-1;for(var yt=Array(b+1);++O<b;)yt[O]=T[O];return yt[b]=S(W),h(w,this,yt)}}a.exports=_}),ir=y((s,a)=>{function h(d){return function(){return d}}a.exports=h}),Br=y((s,a)=>{var h=ir(),d=Ur(),_=Hs(),w=d?function(b,S){return d(b,"toString",{configurable:!0,enumerable:!1,value:h(S),writable:!0})}:_;a.exports=w}),$s=y((s,a)=>{var h=800,d=16,_=Date.now;function w(b){var S=0,T=0;return function(){var O=_(),X=d-(O-T);if(T=O,X>0){if(++S>=h)return arguments[0]}else S=0;return b.apply(void 0,arguments)}}a.exports=w}),Na=y((s,a)=>{var h=Br(),d=$s(),_=d(h);a.exports=_}),Ko=y((s,a)=>{var h=Hs(),d=vo(),_=Na();function w(b,S){return _(d(b,S,h),b+"")}a.exports=w}),Jo=y((s,a)=>{var h=G(),d=kn(),_=vn(),w=te();function b(S,T,O){if(!w(O))return!1;var X=typeof T;return(X=="number"?d(O)&&_(T,O.length):X=="string"&&T in O)?h(O[T],S):!1}a.exports=b}),Vs=y((s,a)=>{var h=Ko(),d=Jo();function _(w){return h(function(b,S){var T=-1,O=S.length,X=O>1?S[O-1]:void 0,W=O>2?S[2]:void 0;for(X=w.length>3&&typeof X=="function"?(O--,X):void 0,W&&d(S[0],S[1],W)&&(X=O<3?void 0:X,O=1),b=Object(b);++T<O;){var yt=S[T];yt&&w(b,yt,T,X)}return b})}a.exports=_}),vs=y((s,a)=>{var h=ys(),d=Vs(),_=d(function(w,b,S){h(w,b,S)});a.exports=_}),xo=y((s,a)=>{var h=zt(),d=$r(),_="[object Symbol]";function w(b){return typeof b=="symbol"||d(b)&&h(b)==_}a.exports=w}),Ws=y((s,a)=>{var h=Sn(),d=xo(),_=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,w=/^\w*$/;function b(S,T){if(h(S))return!1;var O=typeof S;return O=="number"||O=="symbol"||O=="boolean"||S==null||d(S)?!0:w.test(S)||!_.test(S)||T!=null&&S in Object(T)}a.exports=b}),mn=y((s,a)=>{var h=js(),d="Expected a function";function _(w,b){if(typeof w!="function"||b!=null&&typeof b!="function")throw new TypeError(d);var S=function(){var T=arguments,O=b?b.apply(this,T):T[0],X=S.cache;if(X.has(O))return X.get(O);var W=w.apply(this,T);return S.cache=X.set(O,W)||X,W};return S.cache=new(_.Cache||h),S}_.Cache=h,a.exports=_}),Zs=y((s,a)=>{var h=mn(),d=500;function _(w){var b=h(w,function(T){return S.size===d&&S.clear(),T}),S=b.cache;return b}a.exports=_}),wo=y((s,a)=>{var h=Zs(),d=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_=/\\(\\)?/g,w=h(function(b){var S=[];return b.charCodeAt(0)===46&&S.push(""),b.replace(d,function(T,O,X,W){S.push(X?W.replace(_,"$1"):O||T)}),S});a.exports=w}),qs=y((s,a)=>{function h(d,_){for(var w=-1,b=d==null?0:d.length,S=Array(b);++w<b;)S[w]=_(d[w],w,d);return S}a.exports=h}),Tr=y((s,a)=>{var h=$t(),d=qs(),_=Sn(),w=xo(),b=h?h.prototype:void 0,S=b?b.toString:void 0;function T(O){if(typeof O=="string")return O;if(_(O))return d(O,T)+"";if(w(O))return S?S.call(O):"";var X=O+"";return X=="0"&&1/O==-1/0?"-0":X}a.exports=T}),Ks=y((s,a)=>{var h=Tr();function d(_){return _==null?"":h(_)}a.exports=d}),Vr=y((s,a)=>{var h=Sn(),d=Ws(),_=wo(),w=Ks();function b(S,T){return h(S)?S:d(S,T)?[S]:_(w(S))}a.exports=b}),xs=y((s,a)=>{var h=xo();function d(_){if(typeof _=="string"||h(_))return _;var w=_+"";return w=="0"&&1/_==-1/0?"-0":w}a.exports=d}),xi=y((s,a)=>{var h=Vr(),d=xs();function _(w,b){b=h(b,w);for(var S=0,T=b.length;w!=null&&S<T;)w=w[d(b[S++])];return S&&S==T?w:void 0}a.exports=_}),rr=y((s,a)=>{var h=xi();function d(_,w,b){var S=_==null?void 0:h(_,w);return S===void 0?b:S}a.exports=d}),De=y((s,a)=>{(function(h,d){typeof s=="object"&&typeof a<"u"?a.exports=d():(h=h||self).RBush=d()})(s,function(){function h(J,et,ot,wt,ut){(function Et(R,F,U,j,$){for(;j>U;){if(j-U>600){var H=j-U+1,nt=F-U+1,it=Math.log(H),st=.5*Math.exp(2*it/3),dt=.5*Math.sqrt(it*st*(H-st)/H)*(nt-H/2<0?-1:1),gt=Math.max(U,Math.floor(F-nt*st/H+dt)),Nt=Math.min(j,Math.floor(F+(H-nt)*st/H+dt));Et(R,F,gt,Nt,$)}var oe=R[F],me=U,Ee=j;for(d(R,U,F),$(R[j],oe)>0&&d(R,U,j);me<Ee;){for(d(R,me,Ee),me++,Ee--;$(R[me],oe)<0;)me++;for(;$(R[Ee],oe)>0;)Ee--}$(R[U],oe)===0?d(R,U,Ee):d(R,++Ee,j),Ee<=F&&(U=Ee+1),F<=Ee&&(j=Ee-1)}})(J,et,ot||0,wt||J.length-1,ut||_)}function d(J,et,ot){var wt=J[et];J[et]=J[ot],J[ot]=wt}function _(J,et){return J<et?-1:J>et?1:0}var w=function(J){J===void 0&&(J=9),this._maxEntries=Math.max(4,J),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function b(J,et,ot){if(!ot)return et.indexOf(J);for(var wt=0;wt<et.length;wt++)if(ot(J,et[wt]))return wt;return-1}function S(J,et){T(J,0,J.children.length,et,J)}function T(J,et,ot,wt,ut){ut||(ut=de(null)),ut.minX=1/0,ut.minY=1/0,ut.maxX=-1/0,ut.maxY=-1/0;for(var Et=et;Et<ot;Et++){var R=J.children[Et];O(ut,J.leaf?wt(R):R)}return ut}function O(J,et){return J.minX=Math.min(J.minX,et.minX),J.minY=Math.min(J.minY,et.minY),J.maxX=Math.max(J.maxX,et.maxX),J.maxY=Math.max(J.maxY,et.maxY),J}function X(J,et){return J.minX-et.minX}function W(J,et){return J.minY-et.minY}function yt(J){return(J.maxX-J.minX)*(J.maxY-J.minY)}function Lt(J){return J.maxX-J.minX+(J.maxY-J.minY)}function jt(J,et){return J.minX<=et.minX&&J.minY<=et.minY&&et.maxX<=J.maxX&&et.maxY<=J.maxY}function ie(J,et){return et.minX<=J.maxX&&et.minY<=J.maxY&&et.maxX>=J.minX&&et.maxY>=J.minY}function de(J){return{children:J,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Ke(J,et,ot,wt,ut){for(var Et=[et,ot];Et.length;)if(!((ot=Et.pop())-(et=Et.pop())<=wt)){var R=et+Math.ceil((ot-et)/wt/2)*wt;h(J,R,et,ot,ut),Et.push(et,R,R,ot)}}return w.prototype.all=function(){return this._all(this.data,[])},w.prototype.search=function(J){var et=this.data,ot=[];if(!ie(J,et))return ot;for(var wt=this.toBBox,ut=[];et;){for(var Et=0;Et<et.children.length;Et++){var R=et.children[Et],F=et.leaf?wt(R):R;ie(J,F)&&(et.leaf?ot.push(R):jt(J,F)?this._all(R,ot):ut.push(R))}et=ut.pop()}return ot},w.prototype.collides=function(J){var et=this.data;if(!ie(J,et))return!1;for(var ot=[];et;){for(var wt=0;wt<et.children.length;wt++){var ut=et.children[wt],Et=et.leaf?this.toBBox(ut):ut;if(ie(J,Et)){if(et.leaf||jt(J,Et))return!0;ot.push(ut)}}et=ot.pop()}return!1},w.prototype.load=function(J){if(!J||!J.length)return this;if(J.length<this._minEntries){for(var et=0;et<J.length;et++)this.insert(J[et]);return this}var ot=this._build(J.slice(),0,J.length-1,0);if(this.data.children.length)if(this.data.height===ot.height)this._splitRoot(this.data,ot);else{if(this.data.height<ot.height){var wt=this.data;this.data=ot,ot=wt}this._insert(ot,this.data.height-ot.height-1,!0)}else this.data=ot;return this},w.prototype.insert=function(J){return J&&this._insert(J,this.data.height-1),this},w.prototype.clear=function(){return this.data=de([]),this},w.prototype.remove=function(J,et){if(!J)return this;for(var ot,wt,ut,Et=this.data,R=this.toBBox(J),F=[],U=[];Et||F.length;){if(Et||(Et=F.pop(),wt=F[F.length-1],ot=U.pop(),ut=!0),Et.leaf){var j=b(J,Et.children,et);if(j!==-1)return Et.children.splice(j,1),F.push(Et),this._condense(F),this}ut||Et.leaf||!jt(Et,R)?wt?(ot++,Et=wt.children[ot],ut=!1):Et=null:(F.push(Et),U.push(ot),ot=0,wt=Et,Et=Et.children[0])}return this},w.prototype.toBBox=function(J){return J},w.prototype.compareMinX=function(J,et){return J.minX-et.minX},w.prototype.compareMinY=function(J,et){return J.minY-et.minY},w.prototype.toJSON=function(){return this.data},w.prototype.fromJSON=function(J){return this.data=J,this},w.prototype._all=function(J,et){for(var ot=[];J;)J.leaf?et.push.apply(et,J.children):ot.push.apply(ot,J.children),J=ot.pop();return et},w.prototype._build=function(J,et,ot,wt){var ut,Et=ot-et+1,R=this._maxEntries;if(Et<=R)return S(ut=de(J.slice(et,ot+1)),this.toBBox),ut;wt||(wt=Math.ceil(Math.log(Et)/Math.log(R)),R=Math.ceil(Et/Math.pow(R,wt-1))),(ut=de([])).leaf=!1,ut.height=wt;var F=Math.ceil(Et/R),U=F*Math.ceil(Math.sqrt(R));Ke(J,et,ot,U,this.compareMinX);for(var j=et;j<=ot;j+=U){var $=Math.min(j+U-1,ot);Ke(J,j,$,F,this.compareMinY);for(var H=j;H<=$;H+=F){var nt=Math.min(H+F-1,$);ut.children.push(this._build(J,H,nt,wt-1))}}return S(ut,this.toBBox),ut},w.prototype._chooseSubtree=function(J,et,ot,wt){for(;wt.push(et),!et.leaf&&wt.length-1!==ot;){for(var ut=1/0,Et=1/0,R=void 0,F=0;F<et.children.length;F++){var U=et.children[F],j=yt(U),$=(H=J,nt=U,(Math.max(nt.maxX,H.maxX)-Math.min(nt.minX,H.minX))*(Math.max(nt.maxY,H.maxY)-Math.min(nt.minY,H.minY))-j);$<Et?(Et=$,ut=j<ut?j:ut,R=U):$===Et&&j<ut&&(ut=j,R=U)}et=R||et.children[0]}var H,nt;return et},w.prototype._insert=function(J,et,ot){var wt=ot?J:this.toBBox(J),ut=[],Et=this._chooseSubtree(wt,this.data,et,ut);for(Et.children.push(J),O(Et,wt);et>=0&&ut[et].children.length>this._maxEntries;)this._split(ut,et),et--;this._adjustParentBBoxes(wt,ut,et)},w.prototype._split=function(J,et){var ot=J[et],wt=ot.children.length,ut=this._minEntries;this._chooseSplitAxis(ot,ut,wt);var Et=this._chooseSplitIndex(ot,ut,wt),R=de(ot.children.splice(Et,ot.children.length-Et));R.height=ot.height,R.leaf=ot.leaf,S(ot,this.toBBox),S(R,this.toBBox),et?J[et-1].children.push(R):this._splitRoot(ot,R)},w.prototype._splitRoot=function(J,et){this.data=de([J,et]),this.data.height=J.height+1,this.data.leaf=!1,S(this.data,this.toBBox)},w.prototype._chooseSplitIndex=function(J,et,ot){for(var wt,ut,Et,R,F,U,j,$=1/0,H=1/0,nt=et;nt<=ot-et;nt++){var it=T(J,0,nt,this.toBBox),st=T(J,nt,ot,this.toBBox),dt=(ut=it,Et=st,R=void 0,F=void 0,U=void 0,j=void 0,R=Math.max(ut.minX,Et.minX),F=Math.max(ut.minY,Et.minY),U=Math.min(ut.maxX,Et.maxX),j=Math.min(ut.maxY,Et.maxY),Math.max(0,U-R)*Math.max(0,j-F)),gt=yt(it)+yt(st);dt<$?($=dt,wt=nt,H=gt<H?gt:H):dt===$&&gt<H&&(H=gt,wt=nt)}return wt||ot-et},w.prototype._chooseSplitAxis=function(J,et,ot){var wt=J.leaf?this.compareMinX:X,ut=J.leaf?this.compareMinY:W;this._allDistMargin(J,et,ot,wt)<this._allDistMargin(J,et,ot,ut)&&J.children.sort(wt)},w.prototype._allDistMargin=function(J,et,ot,wt){J.children.sort(wt);for(var ut=this.toBBox,Et=T(J,0,et,ut),R=T(J,ot-et,ot,ut),F=Lt(Et)+Lt(R),U=et;U<ot-et;U++){var j=J.children[U];O(Et,J.leaf?ut(j):j),F+=Lt(Et)}for(var $=ot-et-1;$>=et;$--){var H=J.children[$];O(R,J.leaf?ut(H):H),F+=Lt(R)}return F},w.prototype._adjustParentBBoxes=function(J,et,ot){for(var wt=ot;wt>=0;wt--)O(et[wt],J)},w.prototype._condense=function(J){for(var et=J.length-1,ot=void 0;et>=0;et--)J[et].children.length===0?et>0?(ot=J[et-1].children).splice(ot.indexOf(J[et]),1):this.clear():S(J[et],this.toBBox)},w})}),tn=y(s=>{Object.defineProperty(s,"__esModule",{value:!0}),s.earthRadius=63710088e-1,s.factors={centimeters:s.earthRadius*100,centimetres:s.earthRadius*100,degrees:s.earthRadius/111325,feet:s.earthRadius*3.28084,inches:s.earthRadius*39.37,kilometers:s.earthRadius/1e3,kilometres:s.earthRadius/1e3,meters:s.earthRadius,metres:s.earthRadius,miles:s.earthRadius/1609.344,millimeters:s.earthRadius*1e3,millimetres:s.earthRadius*1e3,nauticalmiles:s.earthRadius/1852,radians:1,yards:s.earthRadius*1.0936},s.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/s.earthRadius,yards:1.0936133},s.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function a(j,$,H){H===void 0&&(H={});var nt={type:"Feature"};return(H.id===0||H.id)&&(nt.id=H.id),H.bbox&&(nt.bbox=H.bbox),nt.properties=$||{},nt.geometry=j,nt}s.feature=a;function h(j,$,H){switch(j){case"Point":return d($).geometry;case"LineString":return S($).geometry;case"Polygon":return w($).geometry;case"MultiPoint":return W($).geometry;case"MultiLineString":return X($).geometry;case"MultiPolygon":return yt($).geometry;default:throw new Error(j+" is invalid")}}s.geometry=h;function d(j,$,H){if(H===void 0&&(H={}),!j)throw new Error("coordinates is required");if(!Array.isArray(j))throw new Error("coordinates must be an Array");if(j.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Et(j[0])||!Et(j[1]))throw new Error("coordinates must contain numbers");var nt={type:"Point",coordinates:j};return a(nt,$,H)}s.point=d;function _(j,$,H){return H===void 0&&(H={}),O(j.map(function(nt){return d(nt,$)}),H)}s.points=_;function w(j,$,H){H===void 0&&(H={});for(var nt=0,it=j;nt<it.length;nt++){var st=it[nt];if(st.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var dt=0;dt<st[st.length-1].length;dt++)if(st[st.length-1][dt]!==st[0][dt])throw new Error("First and last Position are not equivalent.")}var gt={type:"Polygon",coordinates:j};return a(gt,$,H)}s.polygon=w;function b(j,$,H){return H===void 0&&(H={}),O(j.map(function(nt){return w(nt,$)}),H)}s.polygons=b;function S(j,$,H){if(H===void 0&&(H={}),j.length<2)throw new Error("coordinates must be an array of two or more positions");var nt={type:"LineString",coordinates:j};return a(nt,$,H)}s.lineString=S;function T(j,$,H){return H===void 0&&(H={}),O(j.map(function(nt){return S(nt,$)}),H)}s.lineStrings=T;function O(j,$){$===void 0&&($={});var H={type:"FeatureCollection"};return $.id&&(H.id=$.id),$.bbox&&(H.bbox=$.bbox),H.features=j,H}s.featureCollection=O;function X(j,$,H){H===void 0&&(H={});var nt={type:"MultiLineString",coordinates:j};return a(nt,$,H)}s.multiLineString=X;function W(j,$,H){H===void 0&&(H={});var nt={type:"MultiPoint",coordinates:j};return a(nt,$,H)}s.multiPoint=W;function yt(j,$,H){H===void 0&&(H={});var nt={type:"MultiPolygon",coordinates:j};return a(nt,$,H)}s.multiPolygon=yt;function Lt(j,$,H){H===void 0&&(H={});var nt={type:"GeometryCollection",geometries:j};return a(nt,$,H)}s.geometryCollection=Lt;function jt(j,$){if($===void 0&&($=0),$&&!($>=0))throw new Error("precision must be a positive number");var H=Math.pow(10,$||0);return Math.round(j*H)/H}s.round=jt;function ie(j,$){$===void 0&&($="kilometers");var H=s.factors[$];if(!H)throw new Error($+" units is invalid");return j*H}s.radiansToLength=ie;function de(j,$){$===void 0&&($="kilometers");var H=s.factors[$];if(!H)throw new Error($+" units is invalid");return j/H}s.lengthToRadians=de;function Ke(j,$){return et(de(j,$))}s.lengthToDegrees=Ke;function J(j){var $=j%360;return $<0&&($+=360),$}s.bearingToAzimuth=J;function et(j){var $=j%(2*Math.PI);return $*180/Math.PI}s.radiansToDegrees=et;function ot(j){var $=j%360;return $*Math.PI/180}s.degreesToRadians=ot;function wt(j,$,H){if($===void 0&&($="kilometers"),H===void 0&&(H="kilometers"),!(j>=0))throw new Error("length must be a positive number");return ie(de(j,$),H)}s.convertLength=wt;function ut(j,$,H){if($===void 0&&($="meters"),H===void 0&&(H="kilometers"),!(j>=0))throw new Error("area must be a positive number");var nt=s.areaFactors[$];if(!nt)throw new Error("invalid original units");var it=s.areaFactors[H];if(!it)throw new Error("invalid final units");return j/nt*it}s.convertArea=ut;function Et(j){return!isNaN(j)&&j!==null&&!Array.isArray(j)}s.isNumber=Et;function R(j){return!!j&&j.constructor===Object}s.isObject=R;function F(j){if(!j)throw new Error("bbox is required");if(!Array.isArray(j))throw new Error("bbox must be an Array");if(j.length!==4&&j.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");j.forEach(function($){if(!Et($))throw new Error("bbox must only contain numbers")})}s.validateBBox=F;function U(j){if(!j)throw new Error("id is required");if(["string","number"].indexOf(typeof j)===-1)throw new Error("id must be a number or a string")}s.validateId=U}),Wr=y(s=>{Object.defineProperty(s,"__esModule",{value:!0});var a=tn();function h(et,ot,wt){if(et!==null)for(var ut,Et,R,F,U,j,$,H=0,nt=0,it,st=et.type,dt=st==="FeatureCollection",gt=st==="Feature",Nt=dt?et.features.length:1,oe=0;oe<Nt;oe++){$=dt?et.features[oe].geometry:gt?et.geometry:et,it=$?$.type==="GeometryCollection":!1,U=it?$.geometries.length:1;for(var me=0;me<U;me++){var Ee=0,Je=0;if(F=it?$.geometries[me]:$,F!==null){j=F.coordinates;var rn=F.type;switch(H=wt&&(rn==="Polygon"||rn==="MultiPolygon")?1:0,rn){case null:break;case"Point":if(ot(j,nt,oe,Ee,Je)===!1)return!1;nt++,Ee++;break;case"LineString":case"MultiPoint":for(ut=0;ut<j.length;ut++){if(ot(j[ut],nt,oe,Ee,Je)===!1)return!1;nt++,rn==="MultiPoint"&&Ee++}rn==="LineString"&&Ee++;break;case"Polygon":case"MultiLineString":for(ut=0;ut<j.length;ut++){for(Et=0;Et<j[ut].length-H;Et++){if(ot(j[ut][Et],nt,oe,Ee,Je)===!1)return!1;nt++}rn==="MultiLineString"&&Ee++,rn==="Polygon"&&Je++}rn==="Polygon"&&Ee++;break;case"MultiPolygon":for(ut=0;ut<j.length;ut++){for(Je=0,Et=0;Et<j[ut].length;Et++){for(R=0;R<j[ut][Et].length-H;R++){if(ot(j[ut][Et][R],nt,oe,Ee,Je)===!1)return!1;nt++}Je++}Ee++}break;case"GeometryCollection":for(ut=0;ut<F.geometries.length;ut++)if(h(F.geometries[ut],ot,wt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function d(et,ot,wt,ut){var Et=wt;return h(et,function(R,F,U,j,$){F===0&&wt===void 0?Et=R:Et=ot(Et,R,F,U,j,$)},ut),Et}function _(et,ot){var wt;switch(et.type){case"FeatureCollection":for(wt=0;wt<et.features.length&&ot(et.features[wt].properties,wt)!==!1;wt++);break;case"Feature":ot(et.properties,0);break}}function w(et,ot,wt){var ut=wt;return _(et,function(Et,R){R===0&&wt===void 0?ut=Et:ut=ot(ut,Et,R)}),ut}function b(et,ot){if(et.type==="Feature")ot(et,0);else if(et.type==="FeatureCollection")for(var wt=0;wt<et.features.length&&ot(et.features[wt],wt)!==!1;wt++);}function S(et,ot,wt){var ut=wt;return b(et,function(Et,R){R===0&&wt===void 0?ut=Et:ut=ot(ut,Et,R)}),ut}function T(et){var ot=[];return h(et,function(wt){ot.push(wt)}),ot}function O(et,ot){var wt,ut,Et,R,F,U,j,$,H,nt,it=0,st=et.type==="FeatureCollection",dt=et.type==="Feature",gt=st?et.features.length:1;for(wt=0;wt<gt;wt++){for(U=st?et.features[wt].geometry:dt?et.geometry:et,$=st?et.features[wt].properties:dt?et.properties:{},H=st?et.features[wt].bbox:dt?et.bbox:void 0,nt=st?et.features[wt].id:dt?et.id:void 0,j=U?U.type==="GeometryCollection":!1,F=j?U.geometries.length:1,Et=0;Et<F;Et++){if(R=j?U.geometries[Et]:U,R===null){if(ot(null,it,$,H,nt)===!1)return!1;continue}switch(R.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(ot(R,it,$,H,nt)===!1)return!1;break}case"GeometryCollection":{for(ut=0;ut<R.geometries.length;ut++)if(ot(R.geometries[ut],it,$,H,nt)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}it++}}function X(et,ot,wt){var ut=wt;return O(et,function(Et,R,F,U,j){R===0&&wt===void 0?ut=Et:ut=ot(ut,Et,R,F,U,j)}),ut}function W(et,ot){O(et,function(wt,ut,Et,R,F){var U=wt===null?null:wt.type;switch(U){case null:case"Point":case"LineString":case"Polygon":return ot(a.feature(wt,Et,{bbox:R,id:F}),ut,0)===!1?!1:void 0}var j;switch(U){case"MultiPoint":j="Point";break;case"MultiLineString":j="LineString";break;case"MultiPolygon":j="Polygon";break}for(var $=0;$<wt.coordinates.length;$++){var H=wt.coordinates[$],nt={type:j,coordinates:H};if(ot(a.feature(nt,Et),ut,$)===!1)return!1}})}function yt(et,ot,wt){var ut=wt;return W(et,function(Et,R,F){R===0&&F===0&&wt===void 0?ut=Et:ut=ot(ut,Et,R,F)}),ut}function Lt(et,ot){W(et,function(wt,ut,Et){var R=0;if(wt.geometry){var F=wt.geometry.type;if(!(F==="Point"||F==="MultiPoint")){var U,j=0,$=0,H=0;if(h(wt,function(nt,it,st,dt,gt){if(U===void 0||ut>j||dt>$||gt>H){U=nt,j=ut,$=dt,H=gt,R=0;return}var Nt=a.lineString([U,nt],wt.properties);if(ot(Nt,ut,Et,gt,R)===!1)return!1;R++,U=nt})===!1)return!1}}})}function jt(et,ot,wt){var ut=wt,Et=!1;return Lt(et,function(R,F,U,j,$){Et===!1&&wt===void 0?ut=R:ut=ot(ut,R,F,U,j,$),Et=!0}),ut}function ie(et,ot){if(!et)throw new Error("geojson is required");W(et,function(wt,ut,Et){if(wt.geometry!==null){var R=wt.geometry.type,F=wt.geometry.coordinates;switch(R){case"LineString":if(ot(wt,ut,Et,0,0)===!1)return!1;break;case"Polygon":for(var U=0;U<F.length;U++)if(ot(a.lineString(F[U],wt.properties),ut,Et,U)===!1)return!1;break}}})}function de(et,ot,wt){var ut=wt;return ie(et,function(Et,R,F,U){R===0&&wt===void 0?ut=Et:ut=ot(ut,Et,R,F,U)}),ut}function Ke(et,ot){if(ot=ot||{},!a.isObject(ot))throw new Error("options is invalid");var wt=ot.featureIndex||0,ut=ot.multiFeatureIndex||0,Et=ot.geometryIndex||0,R=ot.segmentIndex||0,F=ot.properties,U;switch(et.type){case"FeatureCollection":wt<0&&(wt=et.features.length+wt),F=F||et.features[wt].properties,U=et.features[wt].geometry;break;case"Feature":F=F||et.properties,U=et.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":U=et;break;default:throw new Error("geojson is invalid")}if(U===null)return null;var j=U.coordinates;switch(U.type){case"Point":case"MultiPoint":return null;case"LineString":return R<0&&(R=j.length+R-1),a.lineString([j[R],j[R+1]],F,ot);case"Polygon":return Et<0&&(Et=j.length+Et),R<0&&(R=j[Et].length+R-1),a.lineString([j[Et][R],j[Et][R+1]],F,ot);case"MultiLineString":return ut<0&&(ut=j.length+ut),R<0&&(R=j[ut].length+R-1),a.lineString([j[ut][R],j[ut][R+1]],F,ot);case"MultiPolygon":return ut<0&&(ut=j.length+ut),Et<0&&(Et=j[ut].length+Et),R<0&&(R=j[ut][Et].length-R-1),a.lineString([j[ut][Et][R],j[ut][Et][R+1]],F,ot)}throw new Error("geojson is invalid")}function J(et,ot){if(ot=ot||{},!a.isObject(ot))throw new Error("options is invalid");var wt=ot.featureIndex||0,ut=ot.multiFeatureIndex||0,Et=ot.geometryIndex||0,R=ot.coordIndex||0,F=ot.properties,U;switch(et.type){case"FeatureCollection":wt<0&&(wt=et.features.length+wt),F=F||et.features[wt].properties,U=et.features[wt].geometry;break;case"Feature":F=F||et.properties,U=et.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":U=et;break;default:throw new Error("geojson is invalid")}if(U===null)return null;var j=U.coordinates;switch(U.type){case"Point":return a.point(j,F,ot);case"MultiPoint":return ut<0&&(ut=j.length+ut),a.point(j[ut],F,ot);case"LineString":return R<0&&(R=j.length+R),a.point(j[R],F,ot);case"Polygon":return Et<0&&(Et=j.length+Et),R<0&&(R=j[Et].length+R),a.point(j[Et][R],F,ot);case"MultiLineString":return ut<0&&(ut=j.length+ut),R<0&&(R=j[ut].length+R),a.point(j[ut][R],F,ot);case"MultiPolygon":return ut<0&&(ut=j.length+ut),Et<0&&(Et=j[ut].length+Et),R<0&&(R=j[ut][Et].length-R),a.point(j[ut][Et][R],F,ot)}throw new Error("geojson is invalid")}s.coordAll=T,s.coordEach=h,s.coordReduce=d,s.featureEach=b,s.featureReduce=S,s.findPoint=J,s.findSegment=Ke,s.flattenEach=W,s.flattenReduce=yt,s.geomEach=O,s.geomReduce=X,s.lineEach=ie,s.lineReduce=de,s.propEach=_,s.propReduce=w,s.segmentEach=Lt,s.segmentReduce=jt}),z=y(s=>{Object.defineProperty(s,"__esModule",{value:!0});var a=Wr();function h(d){var _=[1/0,1/0,-1/0,-1/0];return a.coordEach(d,function(w){_[0]>w[0]&&(_[0]=w[0]),_[1]>w[1]&&(_[1]=w[1]),_[2]<w[0]&&(_[2]=w[0]),_[3]<w[1]&&(_[3]=w[1])}),_}h.default=h,s.default=h}),bt=y((s,a)=>{var h=De(),d=tn(),_=Wr(),w=z().default,b=_.featureEach;_.coordEach,d.polygon;var S=d.featureCollection;function T(O){var X=new h(O);return X.insert=function(W){if(W.type!=="Feature")throw new Error("invalid feature");return W.bbox=W.bbox?W.bbox:w(W),h.prototype.insert.call(this,W)},X.load=function(W){var yt=[];return Array.isArray(W)?W.forEach(function(Lt){if(Lt.type!=="Feature")throw new Error("invalid features");Lt.bbox=Lt.bbox?Lt.bbox:w(Lt),yt.push(Lt)}):b(W,function(Lt){if(Lt.type!=="Feature")throw new Error("invalid features");Lt.bbox=Lt.bbox?Lt.bbox:w(Lt),yt.push(Lt)}),h.prototype.load.call(this,yt)},X.remove=function(W,yt){if(W.type!=="Feature")throw new Error("invalid feature");return W.bbox=W.bbox?W.bbox:w(W),h.prototype.remove.call(this,W,yt)},X.clear=function(){return h.prototype.clear.call(this)},X.search=function(W){var yt=h.prototype.search.call(this,this.toBBox(W));return S(yt)},X.collides=function(W){return h.prototype.collides.call(this,this.toBBox(W))},X.all=function(){var W=h.prototype.all.call(this);return S(W)},X.toJSON=function(){return h.prototype.toJSON.call(this)},X.fromJSON=function(W){return h.prototype.fromJSON.call(this,W)},X.toBBox=function(W){var yt;if(W.bbox)yt=W.bbox;else if(Array.isArray(W)&&W.length===4)yt=W;else if(Array.isArray(W)&&W.length===6)yt=[W[0],W[1],W[3],W[4]];else if(W.type==="Feature")yt=w(W);else if(W.type==="FeatureCollection")yt=w(W);else throw new Error("invalid geojson");return{minX:yt[0],minY:yt[1],maxX:yt[2],maxY:yt[3]}},X}a.exports=T,a.exports.default=T});Array.prototype.findIndex=Array.prototype.findIndex||function(s){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof s!="function")throw new TypeError("callback must be a function");for(var a=Object(this),h=a.length>>>0,d=arguments[1],_=0;_<h;_++)if(s.call(d,a[_],_,a))return _;return-1},Array.prototype.find=Array.prototype.find||function(s){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof s!="function")throw new TypeError("callback must be a function");for(var a=Object(this),h=a.length>>>0,d=arguments[1],_=0;_<h;_++){var w=a[_];if(s.call(d,w,_,a))return w}},typeof Object.assign!="function"&&(Object.assign=function(s){if(s==null)throw new TypeError("Cannot convert undefined or null to object");s=Object(s);for(var a=1;a<arguments.length;a++){var h=arguments[a];if(h!=null)for(var d in h)Object.prototype.hasOwnProperty.call(h,d)&&(s[d]=h[d])}return s}),(function(s){s.forEach(function(a){a.hasOwnProperty("remove")||Object.defineProperty(a,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})})([Element.prototype,CharacterData.prototype,DocumentType.prototype]),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(s,a){if(this==null)throw new TypeError('"this" is null or not defined');var h=Object(this),d=h.length>>>0;if(d===0)return!1;var _=a|0,w=Math.max(_>=0?_:d-Math.abs(_),0);function b(S,T){return S===T||typeof S=="number"&&typeof T=="number"&&isNaN(S)&&isNaN(T)}for(;w<d;){if(b(h[w],s))return!0;w++}return!1}});var Bt={version:"2.18.3"},It=E(vs()),Tt={tooltips:{placeMarker:"Click to place marker",firstVertex:"Click to place first vertex",continueLine:"Click to continue drawing",finishLine:"Click any existing marker to finish",finishPoly:"Click first marker to finish",finishRect:"Click to finish",startCircle:"Click to place circle center",finishCircle:"Click to finish circle",placeCircleMarker:"Click to place circle marker",placeText:"Click to place text",selectFirstLayerFor:"Select first layer for {action}",selectSecondLayerFor:"Select second layer for {action}"},actions:{finish:"Finish",cancel:"Cancel",removeLastVertex:"Remove Last Vertex"},buttonTitles:{drawMarkerButton:"Draw Marker",drawPolyButton:"Draw Polygons",drawLineButton:"Draw Polyline",drawCircleButton:"Draw Circle",drawRectButton:"Draw Rectangle",editButton:"Edit Layers",dragButton:"Drag Layers",cutButton:"Cut Layers",deleteButton:"Remove Layers",drawCircleMarkerButton:"Draw Circle Marker",snappingButton:"Snap dragged marker to other layers and vertices",pinningButton:"Pin shared vertices together",rotateButton:"Rotate Layers",drawTextButton:"Draw Text",scaleButton:"Scale Layers",autoTracingButton:"Auto trace Line",snapGuidesButton:"Show SnapGuides",unionButton:"Union layers",differenceButton:"Subtract layers"},measurements:{totalLength:"Length",segmentLength:"Segment length",area:"Area",radius:"Radius",perimeter:"Perimeter",height:"Height",width:"Width",coordinates:"Position",coordinatesMarker:"Position Marker"}},Zt={tooltips:{placeMarker:"Platziere den Marker mit Klick",firstVertex:"Platziere den ersten Marker mit Klick",continueLine:"Klicke, um weiter zu zeichnen",finishLine:"Beende mit Klick auf existierenden Marker",finishPoly:"Beende mit Klick auf ersten Marker",finishRect:"Beende mit Klick",startCircle:"Platziere das Kreiszentrum mit Klick",finishCircle:"Beende den Kreis mit Klick",placeCircleMarker:"Platziere den Kreismarker mit Klick",placeText:"Platziere den Text mit Klick"},actions:{finish:"Beenden",cancel:"Abbrechen",removeLastVertex:"Letzten Vertex lschen"},buttonTitles:{drawMarkerButton:"Marker zeichnen",drawPolyButton:"Polygon zeichnen",drawLineButton:"Polyline zeichnen",drawCircleButton:"Kreis zeichnen",drawRectButton:"Rechteck zeichnen",editButton:"Layer editieren",dragButton:"Layer bewegen",cutButton:"Layer schneiden",deleteButton:"Layer lschen",drawCircleMarkerButton:"Kreismarker zeichnen",snappingButton:"Bewegter Layer an andere Layer oder Vertexe einhacken",pinningButton:"Vertexe an der gleichen Position verknpfen",rotateButton:"Layer drehen",drawTextButton:"Text zeichnen",scaleButton:"Layer skalieren",autoTracingButton:"Linie automatisch nachzeichen"},measurements:{totalLength:"Lnge",segmentLength:"Segment Lnge",area:"Flche",radius:"Radius",perimeter:"Umfang",height:"Hhe",width:"Breite",coordinates:"Position",coordinatesMarker:"Position Marker"}},qt={tooltips:{placeMarker:"Clicca per posizionare un Marker",firstVertex:"Clicca per posizionare il primo vertice",continueLine:"Clicca per continuare a disegnare",finishLine:"Clicca qualsiasi marker esistente per terminare",finishPoly:"Clicca il primo marker per terminare",finishRect:"Clicca per terminare",startCircle:"Clicca per posizionare il punto centrale del cerchio",finishCircle:"Clicca per terminare il cerchio",placeCircleMarker:"Clicca per posizionare un Marker del cherchio"},actions:{finish:"Termina",cancel:"Annulla",removeLastVertex:"Rimuovi l'ultimo vertice"},buttonTitles:{drawMarkerButton:"Disegna Marker",drawPolyButton:"Disegna Poligoni",drawLineButton:"Disegna Polilinea",drawCircleButton:"Disegna Cerchio",drawRectButton:"Disegna Rettangolo",editButton:"Modifica Livelli",dragButton:"Sposta Livelli",cutButton:"Ritaglia Livelli",deleteButton:"Elimina Livelli",drawCircleMarkerButton:"Disegna Marker del Cerchio",snappingButton:"Snap ha trascinato il pennarello su altri strati e vertici",pinningButton:"Pin condiviso vertici insieme",rotateButton:"Ruota livello"}},he={tooltips:{placeMarker:"Klik untuk menempatkan marker",firstVertex:"Klik untuk menempatkan vertex pertama",continueLine:"Klik untuk meneruskan digitasi",finishLine:"Klik pada sembarang marker yang ada untuk mengakhiri",finishPoly:"Klik marker pertama untuk mengakhiri",finishRect:"Klik untuk mengakhiri",startCircle:"Klik untuk menempatkan titik pusat lingkaran",finishCircle:"Klik untuk mengakhiri lingkaran",placeCircleMarker:"Klik untuk menempatkan penanda lingkarann"},actions:{finish:"Selesai",cancel:"Batal",removeLastVertex:"Hilangkan Vertex Terakhir"},buttonTitles:{drawMarkerButton:"Digitasi Marker",drawPolyButton:"Digitasi Polygon",drawLineButton:"Digitasi Polyline",drawCircleButton:"Digitasi Lingkaran",drawRectButton:"Digitasi Segi Empat",editButton:"Edit Layer",dragButton:"Geser Layer",cutButton:"Potong Layer",deleteButton:"Hilangkan Layer",drawCircleMarkerButton:"Digitasi Penanda Lingkaran",snappingButton:"Jepretkan penanda yang ditarik ke lapisan dan simpul lain",pinningButton:"Sematkan simpul bersama bersama",rotateButton:"Putar lapisan"}},ue={tooltips:{placeMarker:"Adaug un punct",firstVertex:"Apas aici pentru a aduga primul Vertex",continueLine:"Apas aici pentru a continua desenul",finishLine:"Apas pe orice obiect pentru a finisa desenul",finishPoly:"Apas pe primul obiect pentru a finisa",finishRect:"Apas pentru a finisa",startCircle:"Apas pentru a desena un cerc",finishCircle:"Apas pentru a finisa un cerc",placeCircleMarker:"Adaug un punct"},actions:{finish:"Termin",cancel:"Anuleaz",removeLastVertex:"terge ultimul Vertex"},buttonTitles:{drawMarkerButton:"Adaug o bulin",drawPolyButton:"Deseneaz un poligon",drawLineButton:"Deseneaz o linie",drawCircleButton:"Deseneaz un cerc",drawRectButton:"Deseneaz un dreptunghi",editButton:"Editeaz straturile",dragButton:"Mut straturile",cutButton:"Taie straturile",deleteButton:"terge straturile",drawCircleMarkerButton:"Deseneaz marcatorul cercului",snappingButton:"Fixai marcatorul glisat pe alte straturi i vrfuri",pinningButton:"Fixai vrfurile partajate mpreun",rotateButton:"Rotii stratul"}},ge={tooltips:{placeMarker:",   ",firstVertex:",    ",continueLine:",   ",finishLine:"     ",finishPoly:"  ,  ",finishRect:",  ",startCircle:",    ",finishCircle:",   ",placeCircleMarker:",    "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"   ",rotateButton:" "}},ce={tooltips:{placeMarker:"Presiona para colocar un marcador",firstVertex:"Presiona para colocar el primer vrtice",continueLine:"Presiona para continuar dibujando",finishLine:"Presiona cualquier marcador existente para finalizar",finishPoly:"Presiona el primer marcador para finalizar",finishRect:"Presiona para finalizar",startCircle:"Presiona para colocar el centro del crculo",finishCircle:"Presiona para finalizar el crculo",placeCircleMarker:"Presiona para colocar un marcador de crculo"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Eliminar ltimo vrtice"},buttonTitles:{drawMarkerButton:"Dibujar Marcador",drawPolyButton:"Dibujar Polgono",drawLineButton:"Dibujar Lnea",drawCircleButton:"Dibujar Crculo",drawRectButton:"Dibujar Rectngulo",editButton:"Editar Capas",dragButton:"Arrastrar Capas",cutButton:"Cortar Capas",deleteButton:"Eliminar Capas",drawCircleMarkerButton:"Dibujar Marcador de Crculo",snappingButton:"El marcador de Snap arrastrado a otras capas y vrtices",pinningButton:"Fijar juntos los vrtices compartidos",rotateButton:"Rotar capa"}},fe={tooltips:{placeMarker:"Klik om een marker te plaatsen",firstVertex:"Klik om het eerste punt te plaatsen",continueLine:"Klik om te blijven tekenen",finishLine:"Klik op een bestaand punt om te beindigen",finishPoly:"Klik op het eerst punt om te beindigen",finishRect:"Klik om te beindigen",startCircle:"Klik om het middelpunt te plaatsen",finishCircle:"Klik om de cirkel te beindigen",placeCircleMarker:"Klik om een marker te plaatsen"},actions:{finish:"Bewaar",cancel:"Annuleer",removeLastVertex:"Verwijder laatste punt"},buttonTitles:{drawMarkerButton:"Plaats Marker",drawPolyButton:"Teken een vlak",drawLineButton:"Teken een lijn",drawCircleButton:"Teken een cirkel",drawRectButton:"Teken een vierkant",editButton:"Bewerk",dragButton:"Verplaats",cutButton:"Knip",deleteButton:"Verwijder",drawCircleMarkerButton:"Plaats Marker",snappingButton:"Snap gesleepte marker naar andere lagen en hoekpunten",pinningButton:"Speld gedeelde hoekpunten samen",rotateButton:"Laag roteren"}},we={tooltips:{placeMarker:"Cliquez pour placer un marqueur",firstVertex:"Cliquez pour placer le premier sommet",continueLine:"Cliquez pour continuer  dessiner",finishLine:"Cliquez sur n'importe quel marqueur pour terminer",finishPoly:"Cliquez sur le premier marqueur pour terminer",finishRect:"Cliquez pour terminer",startCircle:"Cliquez pour placer le centre du cercle",finishCircle:"Cliquez pour finir le cercle",placeCircleMarker:"Cliquez pour placer le marqueur circulaire"},actions:{finish:"Terminer",cancel:"Annuler",removeLastVertex:"Retirer le dernier sommet"},buttonTitles:{drawMarkerButton:"Placer des marqueurs",drawPolyButton:"Dessiner des polygones",drawLineButton:"Dessiner des polylignes",drawCircleButton:"Dessiner un cercle",drawRectButton:"Dessiner un rectangle",editButton:"diter des calques",dragButton:"Dplacer des calques",cutButton:"Couper des calques",deleteButton:"Supprimer des calques",drawCircleMarkerButton:"Dessiner un marqueur circulaire",snappingButton:"Glisser le marqueur vers d'autres couches et sommets",pinningButton:"pingler ensemble les sommets partags",rotateButton:"Tourner des calques"}},ve={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:""}},je={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:""}},We={tooltips:{placeMarker:"Clique para posicionar o marcador",firstVertex:"Clique para posicionar o primeiro vrtice",continueLine:"Clique para continuar desenhando",finishLine:"Clique em qualquer marcador existente para finalizar",finishPoly:"Clique no primeiro marcador para finalizar",finishRect:"Clique para finalizar",startCircle:"Clique para posicionar o centro do crculo",finishCircle:"Clique para finalizar o crculo",placeCircleMarker:"Clique para posicionar o marcador circular",placeText:"Clique para inserir texto"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Remover ltimo vrtice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polgonos",drawLineButton:"Desenhar Linha Poligonal",drawCircleButton:"Desenhar Crculo",drawRectButton:"Desenhar Retngulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Recortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Crculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vrtices",pinningButton:"Unir vrtices compartilhados",rotateButton:"Rotacionar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Redimensionar Camadas",autoTracingButton:"Traado Automtico de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"rea",radius:"Raio",perimeter:"Permetro",height:"Altura",width:"Largura",coordinates:"Posio",coordinatesMarker:"Marcador de Posio"}},Ve={tooltips:{placeMarker:"Clique para colocar marcador",firstVertex:"Clique para colocar primeiro vrtice",continueLine:"Clique para continuar a desenhar",finishLine:"Clique num marcador existente para terminar",finishPoly:"Clique no primeiro marcador para terminar",finishRect:"Clique para terminar",startCircle:"Clique para colocar o centro do crculo",finishCircle:"Clique para terminar o crculo",placeCircleMarker:"Clique para colocar marcador de crculo",placeText:"Clique para colocar texto"},actions:{finish:"Terminar",cancel:"Cancelar",removeLastVertex:"Remover ltimo Vrtice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polgonos",drawLineButton:"Desenhar Polilinha",drawCircleButton:"Desenhar Crculo",drawRectButton:"Desenhar Retngulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Cortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Crculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vrtices",pinningButton:"Unir vrtices partilhados",rotateButton:"Rodar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Escalar Camadas",autoTracingButton:"Traado Automtico de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"rea",radius:"Raio",perimeter:"Permetro",height:"Altura",width:"Largura",coordinates:"Posio",coordinatesMarker:"Marcador de Posio"}},wi={tooltips:{placeMarker:"Kliknij, aby umieci znacznik",firstVertex:"Kliknij, aby umieci pierwszy wierzchoek",continueLine:"Kliknij, aby kontynuowa rysowanie",finishLine:"Kliknij dowolny istniejcy znacznik, aby zakoczy",finishPoly:"Kliknij pierwszy znacznik, aby zakoczy",finishRect:"Kliknij, aby zakoczy",startCircle:"Kliknij, aby umieci rodek okrgu",finishCircle:"Kliknij, aby zakoczy okrg",placeCircleMarker:"Kliknij, aby umieci znacznik okrgu",placeText:"Kliknij, aby umieci tekst"},actions:{finish:"Zakocz",cancel:"Anuluj",removeLastVertex:"Usu ostatni wierzchoek"},buttonTitles:{drawMarkerButton:"Rysuj znacznik",drawPolyButton:"Rysuj wielokt",drawLineButton:"Rysuj lini",drawCircleButton:"Rysuj okrg",drawRectButton:"Rysuj prostokt",editButton:"Edytuj warstwy",dragButton:"Przecignij warstwy",cutButton:"Wytnij warstwy",deleteButton:"Usu warstwy",drawCircleMarkerButton:"Rysuj znacznik okrgy",snappingButton:"Przycignij przenoszony znacznik do innych warstw i wierzchokw",pinningButton:"Przypnij wsplne wierzchoki razem",rotateButton:"Obr warstwy",drawTextButton:"Rysuj tekst",scaleButton:"Skaluj warstwy",autoTracingButton:"Automatyczne ledzenie linii"},measurements:{totalLength:"Dugo",segmentLength:"Dugo odcinka",area:"Obszar",radius:"Promie",perimeter:"Obwd",height:"Wysoko",width:"Szeroko",coordinates:"Pozycja",coordinatesMarker:"Znacznik pozycji"}},ws={tooltips:{placeMarker:"Klicka fr att placera markr",firstVertex:"Klicka fr att placera frsta hrnet",continueLine:"Klicka fr att fortstta rita",finishLine:"Klicka p en existerande punkt fr att slutfra",finishPoly:"Klicka p den frsta punkten fr att slutfra",finishRect:"Klicka fr att slutfra",startCircle:"Klicka fr att placera cirkelns centrum",finishCircle:"Klicka fr att slutfra cirkeln",placeCircleMarker:"Klicka fr att placera cirkelmarkr"},actions:{finish:"Slutfr",cancel:"Avbryt",removeLastVertex:"Ta bort sista hrnet"},buttonTitles:{drawMarkerButton:"Rita Markr",drawPolyButton:"Rita Polygoner",drawLineButton:"Rita Linje",drawCircleButton:"Rita Cirkel",drawRectButton:"Rita Rektangel",editButton:"Redigera Lager",dragButton:"Dra Lager",cutButton:"Klipp i Lager",deleteButton:"Ta bort Lager",drawCircleMarkerButton:"Rita Cirkelmarkr",snappingButton:"Snpp dra markren till andra lager och hrn",pinningButton:"Fst delade hrn tillsammans",rotateButton:"Rotera lagret"}},Ce={tooltips:{placeMarker:"     ",firstVertex:"       ",continueLine:"      ",finishLine:"        ",finishPoly:"       ",finishRect:"    ",startCircle:"      ",finishCircle:"      ",placeCircleMarker:"      "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"        ",pinningButton:"   ",rotateButton:"  "}},Ne={tooltips:{placeMarker:"Kattintson a jell elhelyezshez",firstVertex:"Kattintson az els pont elhelyezshez",continueLine:"Kattintson a kvetkez pont elhelyezshez",finishLine:"A befejezshez kattintson egy meglv pontra",finishPoly:"A befejezshez kattintson az els pontra",finishRect:"Kattintson a befejezshez",startCircle:"Kattintson a kr kzppontjnak elhelyezshez",finishCircle:"Kattintson a kr befejezshez",placeCircleMarker:"Kattintson a krjell elhelyezshez"},actions:{finish:"Befejezs",cancel:"Mgse",removeLastVertex:"Utols pont eltvoltsa"},buttonTitles:{drawMarkerButton:"Jell rajzolsa",drawPolyButton:"Poligon rajzolsa",drawLineButton:"Vonal rajzolsa",drawCircleButton:"Kr rajzolsa",drawRectButton:"Ngyzet rajzolsa",editButton:"Elemek szerkesztse",dragButton:"Elemek mozgatsa",cutButton:"Elemek vgsa",deleteButton:"Elemek trlse",drawCircleMarkerButton:"Kr jell rajzolsa",snappingButton:"Kapcsolja a jelltt msik elemhez vagy ponthoz",pinningButton:"Kzs pontok sszektse",rotateButton:"Flia elforgatsa"}},On={tooltips:{placeMarker:"Tryk for at placere en markr",firstVertex:"Tryk for at placere det frste punkt",continueLine:"Tryk for at fortstte linjen",finishLine:"Tryk p et eksisterende punkt for at afslutte",finishPoly:"Tryk p det frste punkt for at afslutte",finishRect:"Tryk for at afslutte",startCircle:"Tryk for at placere cirklens center",finishCircle:"Tryk for at afslutte cirklen",placeCircleMarker:"Tryk for at placere en cirkelmarkr"},actions:{finish:"Afslut",cancel:"Afbryd",removeLastVertex:"Fjern sidste punkt"},buttonTitles:{drawMarkerButton:"Placer markr",drawPolyButton:"Tegn polygon",drawLineButton:"Tegn linje",drawCircleButton:"Tegn cirkel",drawRectButton:"Tegn firkant",editButton:"Rediger",dragButton:"Trk",cutButton:"Klip",deleteButton:"Fjern",drawCircleMarkerButton:"Tegn cirkelmarkr",snappingButton:"Fastgr trukket markr til andre elementer",pinningButton:"Sammenlg delte elementer",rotateButton:"Roter laget"}},Mn={tooltips:{placeMarker:"Klikk for  plassere punkt",firstVertex:"Klikk for  plassere frste punkt",continueLine:"Klikk for  tegne videre",finishLine:"Klikk p et eksisterende punkt for  fullfre",finishPoly:"Klikk frste punkt for  fullfre",finishRect:"Klikk for  fullfre",startCircle:"Klikk for  sette sirkel midtpunkt",finishCircle:"Klikk for  fullfre sirkel",placeCircleMarker:"Klikk for  plassere sirkel",placeText:"Klikk for  plassere tekst"},actions:{finish:"Fullfr",cancel:"Kanseller",removeLastVertex:"Fjern forrige punkt"},buttonTitles:{drawMarkerButton:"Tegn punkt",drawPolyButton:"Tegn flate",drawLineButton:"Tegn linje",drawCircleButton:"Tegn sirkel",drawRectButton:"Tegn rektangel",editButton:"Rediger objekter",dragButton:"Dra objekter",cutButton:"Kutt objekter",deleteButton:"Fjern objekter",drawCircleMarkerButton:"Tegn sirkel-punkt",snappingButton:"Fest dratt punkt til andre objekter og punkt",pinningButton:"Pin delte punkter sammen",rotateButton:"Rotr objekter",drawTextButton:"Tegn tekst",scaleButton:"Skalr objekter",autoTracingButton:"Automatisk sporing av linje"},measurements:{totalLength:"Lengde",segmentLength:"Segmentlengde",area:"Omrde",radius:"Radius",perimeter:"Omriss",height:"Hyde",width:"Bredde",coordinates:"Posisjon",coordinatesMarker:"Posisjonsmarkr"}},En={tooltips:{placeMarker:"   ",firstVertex:"    ",continueLine:"   ",finishLine:"      ",finishPoly:"     ",finishRect:"  ",startCircle:"    ",finishCircle:"    ",placeCircleMarker:"    ",placeText:"   "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"      ",rotateButton:" ",drawTextButton:" ",scaleButton:"",autoTracingButton:" "},measurements:{totalLength:"",segmentLength:" ",area:"",radius:"",perimeter:"",height:"",width:"",coordinates:"",coordinatesMarker:" "}},ei={tooltips:{placeMarker:",   ",firstVertex:",    ",continueLine:",   ",finishLine:" -    ",finishPoly:"  ,  ",finishRect:",  ",startCircle:",    ",finishCircle:",   ",placeCircleMarker:",    "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"'   ",rotateButton:" "}},Ln={tooltips:{placeMarker:"areti yerletirmek iin tklayn",firstVertex:"lk tepe noktasn yerletirmek iin tklayn",continueLine:"izime devam etmek iin tklayn",finishLine:"Bitirmek iin mevcut herhangi bir iaretiyi tklayn",finishPoly:"Bitirmek iin ilk iaretiyi tklayn",finishRect:"Bitirmek iin tklayn",startCircle:"Daire merkezine yerletirmek iin tklayn",finishCircle:"Daireyi bitirmek iin tklayn",placeCircleMarker:"Daire iaretisi yerletirmek iin tklayn"},actions:{finish:"Bitir",cancel:"ptal",removeLastVertex:"Son keyi kaldr"},buttonTitles:{drawMarkerButton:"izim aretisi",drawPolyButton:"okgenler iz",drawLineButton:"oklu izgi iz",drawCircleButton:"ember iz",drawRectButton:"Dikdrtgen iz",editButton:"Katmanlar dzenle",dragButton:"Katmanlar srkle",cutButton:"Katmanlar kes",deleteButton:"Katmanlar kaldr",drawCircleMarkerButton:"Daire iaretisi iz",snappingButton:"Srklenen iaretiyi dier katmanlara ve kelere yaptr",pinningButton:"Paylalan keleri birbirine sabitle",rotateButton:"Katman dndr"}},Pe={tooltips:{placeMarker:"Kliknutm vytvote znaku",firstVertex:"Kliknutm vytvote prvn objekt",continueLine:"Kliknutm pokraujte v kreslen",finishLine:"Kliknut na libovolnou existujc znaku pro dokonen",finishPoly:"Vyberte prvn bod pro dokonen",finishRect:"Kliknte pro dokonen",startCircle:"Kliknutm pidejte sted kruhu",finishCircle:",   ",placeCircleMarker:"Kliknutm nastavte polomr"},actions:{finish:"Dokonit",cancel:"Zruit",removeLastVertex:"Zruit posledn akci"},buttonTitles:{drawMarkerButton:"Pidat znaku",drawPolyButton:"Nakreslit polygon",drawLineButton:"Nakreslit kivku",drawCircleButton:"Nakreslit kruh",drawRectButton:"Nakreslit obdlnk",editButton:"Upravit vrstvu",dragButton:"Peneste vrstvu",cutButton:"Vyjmout vrstvu",deleteButton:"Smazat vrstvu",drawCircleMarkerButton:"Pidat kruhovou znaku",snappingButton:"Navzat tanou znaku k dalm vrstvm a vrcholm",pinningButton:"Spojit spolen body dohromady",rotateButton:"Otote vrstvu"}},on={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:"",placeText:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:"",drawTextButton:""}},Qe={tooltips:{placeMarker:"Klikkaa asettaaksesi merkin",firstVertex:"Klikkaa asettaakseni ensimmisen osuuden",continueLine:"Klikkaa jatkaaksesi piirtmist",finishLine:"Klikkaa olemassa olevaa merkki lopettaaksesi",finishPoly:"Klikkaa ensimmist merkki lopettaaksesi",finishRect:"Klikkaa lopettaaksesi",startCircle:"Klikkaa asettaaksesi ympyrn keskipisteen",finishCircle:"Klikkaa lopettaaksesi ympyrn",placeCircleMarker:"Klikkaa asettaaksesi ympyrmerkin",placeText:"Klikkaa asettaaksesi tekstin"},actions:{finish:"Valmis",cancel:"Peruuta",removeLastVertex:"Poista viimeinen osuus"},buttonTitles:{drawMarkerButton:"Piirr merkkej",drawPolyButton:"Piirr monikulmioita",drawLineButton:"Piirr viivoja",drawCircleButton:"Piirr ympyr",drawRectButton:"Piirr neliskulmioita",editButton:"Muokkaa",dragButton:"Siirr",cutButton:"Leikkaa",deleteButton:"Poista",drawCircleMarkerButton:"Piirr ympyrmerkki",snappingButton:"Kiinnit siirrettv merkki toisiin muotoihin",pinningButton:"Kiinnit jaetut muodot yhteen",rotateButton:"Knn",drawTextButton:"Piirr teksti"}},Js={tooltips:{placeMarker:"  ",firstVertex:"   ",continueLine:"  ",finishLine:"   ",finishPoly:"   ",finishRect:" ",startCircle:"    ",finishCircle:"  ",placeCircleMarker:"   ",placeText:"  "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"   ",rotateButton:" ",drawTextButton:" "}},Rr={tooltips:{placeMarker:"   ",firstVertex:"    ",continueLine:"    ",finishLine:"    ",finishPoly:"    ",finishRect:"  ",startCircle:"    ",finishCircle:"   ",placeCircleMarker:"    ",placeText:"   "},actions:{finish:"",cancel:" ",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:"  ",cutButton:"  ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"     ",pinningButton:"   ",rotateButton:" ",drawTextButton:" ",scaleButton:"  ",autoTracingButton:"  "},measurements:{totalLength:"",segmentLength:" ",area:"",radius:"",perimeter:"",height:"",width:"",coordinates:"",coordinatesMarker:" "}},Mo=Ve,Mi={en:Tt,de:Zt,it:qt,id:he,ro:ue,ru:ge,es:ce,nl:fe,fr:we,pt:Mo,pt_br:We,pt_pt:Ve,zh:ve,zh_tw:je,pl:wi,sv:ws,el:Ce,hu:Ne,da:On,no:Mn,fa:En,ua:ei,tr:Ln,cz:Pe,ja:on,fi:Qe,ko:Js,ky:Rr},fi={_globalEditModeEnabled:!1,enableGlobalEditMode(s){let a={...s};this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(h=>{this._isRelevantForEdit(h)&&h.pm.enable(a)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayersEdit={},this.map.on("layeradd",this._layerAddedEdit,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(s=>{s.pm.disable()}),this.map.off("layeradd",this._layerAddedEdit,this),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled(){return this.globalEditModeEnabled()},globalEditModeEnabled(){return this._globalEditModeEnabled},toggleGlobalEditMode(s=this.globalOptions){this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(s)},handleLayerAdditionInGlobalEditMode(){let s=this._addedLayersEdit;if(this._addedLayersEdit={},this.globalEditModeEnabled())for(let a in s){let h=s[a];this._isRelevantForEdit(h)&&h.pm.enable({...this.globalOptions})}},_layerAddedEdit({layer:s}){this._addedLayersEdit[L.stamp(s)]=s},_isRelevantForEdit(s){return s.pm&&!(s instanceof L.LayerGroup)&&(!L.PM.optIn&&!s.options.pmIgnore||L.PM.optIn&&s.options.pmIgnore===!1)&&!s._pmTempLayer&&s.pm.options.allowEditing}},Xs=fi,Ms={_globalDragModeEnabled:!1,enableGlobalDragMode(){let s=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},s.forEach(a=>{this._isRelevantForDrag(a)&&a.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode(){let s=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,s.forEach(a=>{a.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled(){return!!this._globalDragModeEnabled},toggleGlobalDragMode(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode(){let s=this._addedLayersDrag;if(this._addedLayersDrag={},this.globalDragModeEnabled())for(let a in s){let h=s[a];this._isRelevantForDrag(h)&&h.pm.enableLayerDrag()}},_layerAddedDrag({layer:s}){this._addedLayersDrag[L.stamp(s)]=s},_isRelevantForDrag(s){return s.pm&&!(s instanceof L.LayerGroup)&&(!L.PM.optIn&&!s.options.pmIgnore||L.PM.optIn&&s.options.pmIgnore===!1)&&!s._pmTempLayer&&s.pm.options.draggable}},_n=Ms,Ei={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode(){this._globalRemovalModeEnabled=!0,this.map.eachLayer(s=>{this._isRelevantForRemoval(s)&&(s.pm.enabled()&&s.pm.disable(),s.on("click",this.removeLayer,this))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.handleLayerAdditionInGlobalRemovalMode,100,this)),this._addedLayersRemoval={},this.map.on("layeradd",this._layerAddedRemoval,this),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode(){this._globalRemovalModeEnabled=!1,this.map.eachLayer(s=>{s.off("click",this.removeLayer,this)}),this.map.off("layeradd",this._layerAddedRemoval,this),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},removeLayer(s){let a=s.target;this._isRelevantForRemoval(a)&&!a.pm.dragging()&&(a.removeFrom(this.map.pm._getContainingLayer()),a.remove(),a instanceof L.LayerGroup?(this._fireRemoveLayerGroup(a),this._fireRemoveLayerGroup(this.map,a)):(a.pm._fireRemove(a),a.pm._fireRemove(this.map,a)))},_isRelevantForRemoval(s){return s.pm&&!(s instanceof L.LayerGroup)&&(!L.PM.optIn&&!s.options.pmIgnore||L.PM.optIn&&s.options.pmIgnore===!1)&&!s._pmTempLayer&&s.pm.options.allowRemoval},handleLayerAdditionInGlobalRemovalMode(){let s=this._addedLayersRemoval;if(this._addedLayersRemoval={},this.globalRemovalModeEnabled())for(let a in s){let h=s[a];this._isRelevantForRemoval(h)&&(h.pm.enabled()&&h.pm.disable(),h.on("click",this.removeLayer,this))}},_layerAddedRemoval({layer:s}){this._addedLayersRemoval[L.stamp(s)]=s}},Ui=Ei,Ir={_globalRotateModeEnabled:!1,enableGlobalRotateMode(){this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(s=>s instanceof L.Polyline).forEach(s=>{this._isRelevantForRotate(s)&&s.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this.handleLayerAdditionInGlobalRotateMode,100,this)),this._addedLayersRotate={},this.map.on("layeradd",this._layerAddedRotate,this),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(s=>s instanceof L.Polyline).forEach(s=>{s.pm.disableRotate()}),this.map.off("layeradd",this._layerAddedRotate,this),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_isRelevantForRotate(s){return s.pm&&s instanceof L.Polyline&&!(s instanceof L.LayerGroup)&&(!L.PM.optIn&&!s.options.pmIgnore||L.PM.optIn&&s.options.pmIgnore===!1)&&!s._pmTempLayer&&s.pm.options.allowRotation},handleLayerAdditionInGlobalRotateMode(){let s=this._addedLayersRotate;if(this._addedLayersRotate={},this.globalRotateModeEnabled())for(let a in s){let h=s[a];this._isRelevantForRemoval(h)&&h.pm.enableRotate()}},_layerAddedRotate({layer:s}){this._addedLayersRotate[L.stamp(s)]=s}},Xo=Ir,Yo=E(vs()),Eo={_fireDrawStart(s="Draw",a={}){this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},s,a)},_fireDrawEnd(s="Draw",a={}){this.__fire(this._map,"pm:drawend",{shape:this._shape},s,a)},_fireCreate(s,a="Draw",h={}){this.__fire(this._map,"pm:create",{shape:this._shape,marker:s,layer:s},a,h)},_fireCenterPlaced(s="Draw",a={}){let h=s==="Draw"?this._layer:void 0,d=s!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:h,layer:d,latlng:this._layer.getLatLng()},s,a)},_fireCut(s,a,h,d="Draw",_={}){this.__fire(s,"pm:cut",{shape:this._shape,layer:a,originalLayer:h},d,_)},_fireEdit(s=this._layer,a="Edit",h={}){this.__fire(s,"pm:edit",{layer:this._layer,shape:this.getShape()},a,h)},_fireEnable(s="Edit",a={}){this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},s,a)},_fireDisable(s="Edit",a={}){this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},s,a)},_fireUpdate(s="Edit",a={}){this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},s,a)},_fireMarkerDragStart(s,a=void 0,h="Edit",d={}){this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:s,shape:this.getShape(),indexPath:a},h,d)},_fireMarkerDrag(s,a=void 0,h="Edit",d={}){this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:s,shape:this.getShape(),indexPath:a},h,d)},_fireMarkerDragEnd(s,a=void 0,h=void 0,d="Edit",_={}){this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:s,shape:this.getShape(),indexPath:a,intersectionReset:h},d,_)},_fireDragStart(s="Edit",a={}){this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},s,a)},_fireDrag(s,a="Edit",h={}){this.__fire(this._layer,"pm:drag",{...s,shape:this.getShape()},a,h)},_fireDragEnd(s="Edit",a={}){this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},s,a)},_fireDragEnable(s="Edit",a={}){this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},s,a)},_fireDragDisable(s="Edit",a={}){this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},s,a)},_fireRemove(s,a=s,h="Edit",d={}){this.__fire(s,"pm:remove",{layer:a,shape:this.getShape()},h,d)},_fireVertexAdded(s,a,h,d="Edit",_={}){this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:s,indexPath:a,latlng:h,shape:this.getShape()},d,_)},_fireVertexRemoved(s,a,h="Edit",d={}){this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:s,indexPath:a,shape:this.getShape()},h,d)},_fireVertexClick(s,a,h="Edit",d={}){this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:s,indexPath:a,shape:this.getShape()},h,d)},_fireIntersect(s,a=this._layer,h="Edit",d={}){this.__fire(a,"pm:intersect",{layer:this._layer,intersection:s,shape:this.getShape()},h,d)},_fireLayerReset(s,a,h="Edit",d={}){this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:s,indexPath:a,shape:this.getShape()},h,d)},_fireChange(s,a="Edit",h={}){this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:s,shape:this.getShape()},a,h)},_fireTextChange(s,a="Edit",h={}){this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:s,shape:this.getShape()},a,h)},_fireTextFocus(s="Edit",a={}){this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},s,a)},_fireTextBlur(s="Edit",a={}){this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},s,a)},_fireSnapDrag(s,a,h="Snapping",d={}){this.__fire(s,"pm:snapdrag",a,h,d)},_fireSnap(s,a,h="Snapping",d={}){this.__fire(s,"pm:snap",a,h,d)},_fireUnsnap(s,a,h="Snapping",d={}){this.__fire(s,"pm:unsnap",a,h,d)},_fireRotationEnable(s,a,h="Rotation",d={}){this.__fire(s,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},h,d)},_fireRotationDisable(s,a="Rotation",h={}){this.__fire(s,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},a,h)},_fireRotationStart(s,a,h="Rotation",d={}){this.__fire(s,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:a},h,d)},_fireRotation(s,a,h,d=this._rotationLayer,_="Rotation",w={}){this.__fire(s,"pm:rotate",{layer:d,helpLayer:this._layer,startAngle:this._startAngle,angle:d.pm.getAngle(),angleDiff:a,oldLatLngs:h,newLatLngs:d.getLatLngs()},_,w)},_fireRotationEnd(s,a,h,d="Rotation",_={}){this.__fire(s,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:a,angle:this._rotationLayer.pm.getAngle(),originLatLngs:h,newLatLngs:this._rotationLayer.getLatLngs()},d,_)},_fireActionClick(s,a,h,d="Toolbar",_={}){this.__fire(this._map,"pm:actionclick",{text:s.text,action:s,btnName:a,button:h},d,_)},_fireButtonClick(s,a,h="Toolbar",d={}){this.__fire(this._map,"pm:buttonclick",{btnName:s,button:a},h,d)},_fireLangChange(s,a,h,d,_="Global",w={}){this.__fire(this.map,"pm:langchange",{oldLang:s,activeLang:a,fallback:h,translations:d},_,w)},_fireGlobalDragModeToggled(s,a="Global",h={}){this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:s,map:this.map},a,h)},_fireGlobalEditModeToggled(s,a="Global",h={}){this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:s,map:this.map},a,h)},_fireGlobalRemovalModeToggled(s,a="Global",h={}){this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:s,map:this.map},a,h)},_fireGlobalCutModeToggled(s="Global",a={}){this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},s,a)},_fireGlobalDrawModeToggled(s="Global",a={}){this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},s,a)},_fireGlobalRotateModeToggled(s="Global",a={}){this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},s,a)},_fireRemoveLayerGroup(s,a=s,h="Edit",d={}){this.__fire(s,"pm:remove",{layer:a,shape:void 0},h,d)},_fireKeyeventEvent(s,a,h,d="Global",_={}){this.__fire(this.map,"pm:keyevent",{event:s,eventType:a,focusOn:h},d,_)},__fire(s,a,h,d,_={}){h=(0,Yo.default)(h,_,{source:d}),L.PM.Utils._fireEvent(s,a,h)}},Es=Eo,Qo=()=>({_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener(s){this.map=s,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this),s.once("unload",this._unbindKeyListenerEvents,this)},_unbindKeyListenerEvents(){L.DomEvent.off(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.off(window,"blur",this._onBlur,this)},_onKeyListener(s){let a="document";this.map.getContainer().contains(s.target)&&(a="map");let h={event:s,eventType:s.type,focusOn:a};this._lastEvents[s.type]=h,this._lastEvents.current=h,this.map.pm._fireKeyeventEvent(s,s.type,a)},_onBlur(s){s.altKey=!1;let a={event:s,eventType:s.type,focusOn:"document"};this._lastEvents[s.type]=a,this._lastEvents.current=a},getLastKeyEvent(s="current"){return this._lastEvents[s]},isShiftKeyPressed(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.shiftKey},isAltKeyPressed(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.altKey},isCtrlKeyPressed(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.ctrlKey},isMetaKeyPressed(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.metaKey},getPressedKey(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.key}}),qe=Qo,Or=E(rr());function Oe(s){let a=L.PM.activeLang;return(0,Or.default)(Mi[a],s)||(0,Or.default)(Mi.en,s)||s}function sr(s){for(let a=0;a<s.length;a+=1){let h=s[a];if(Array.isArray(h)){if(sr(h))return!0}else if(h!=null&&h!=="")return!0}return!1}function Ys(s){return s.reduce((a,h)=>{if(h.length!==0){let d=Array.isArray(h)?Ys(h):h;Array.isArray(d)?d.length!==0&&a.push(d):a.push(d)}return a},[])}function ta(s,a,h){let d={a:L.CRS.Earth.R,b:63567523142e-4,f:.0033528106647474805},{a:_,b:w,f:b}=d,S=s.lng,T=s.lat,O=h,X=Math.PI,W=a*X/180,yt=Math.sin(W),Lt=Math.cos(W),jt=(1-b)*Math.tan(T*X/180),ie=1/Math.sqrt(1+jt*jt),de=jt*ie,Ke=Math.atan2(jt,Lt),J=ie*yt,et=1-J*J,ot=et*(_*_-w*w)/(w*w),wt=1+ot/16384*(4096+ot*(-768+ot*(320-175*ot))),ut=ot/1024*(256+ot*(-128+ot*(74-47*ot))),Et=O/(w*wt),R=2*Math.PI,F,U,j;for(;Math.abs(Et-R)>1e-12;){F=Math.cos(2*Ke+Et),U=Math.sin(Et),j=Math.cos(Et);let Nt=ut*U*(F+ut/4*(j*(-1+2*F*F)-ut/6*F*(-3+4*U*U)*(-3+4*F*F)));R=Et,Et=O/(w*wt)+Nt}let $=de*U-ie*j*Lt,H=Math.atan2(de*j+ie*U*Lt,(1-b)*Math.sqrt(J*J+$*$)),nt=Math.atan2(U*yt,ie*j-de*U*Lt),it=b/16*et*(4+b*(4-3*et)),st=nt-(1-it)*b*J*(Et+it*U*(F+it*j*(-1+2*F*F))),dt=S+st*180/X,gt=H*180/X;return L.latLng(dt,gt)}function Ls(s,a,h,d,_=!0){let w,b,S,T=[];for(let O=0;O<h;O+=1){if(_)w=O*360/h+d,b=ta(s,w,a),S=L.latLng(b.lng,b.lat);else{let X=s.lat+Math.cos(2*O*Math.PI/h)*a,W=s.lng+Math.sin(2*O*Math.PI/h)*a;S=L.latLng(X,W)}T.push(S)}return T}function ll(s,a,h){a=(a+360)%360;let d=Math.PI/180,_=180/Math.PI,{R:w}=L.CRS.Earth,b=s.lng*d,S=s.lat*d,T=a*d,O=Math.sin(S),X=Math.cos(S),W=Math.cos(h/w),yt=Math.sin(h/w),Lt=Math.asin(O*W+X*yt*Math.cos(T)),jt=b+Math.atan2(Math.sin(T)*yt*X,W-O*Math.sin(Lt));jt*=_;let ie=jt-360,de=jt<-180?jt+360:jt;return jt=jt>180?ie:de,L.latLng([Lt*_,jt])}function Wn(s,a,h){let d=s.latLngToContainerPoint(a),_=s.latLngToContainerPoint(h),w=Math.atan2(_.y-d.y,_.x-d.x)*180/Math.PI+90;return w+=w<0?360:0,w}function Dr(s,a,h,d){let _=Wn(s,a,h);return ll(a,_,d)}function Fa(s,a,h="asc"){if(!a||Object.keys(a).length===0)return(T,O)=>T-O;let d=Object.keys(a),_,w=d.length-1,b={};for(;w>=0;)_=d[w],b[_.toLowerCase()]=a[_],w-=1;function S(T){if(T instanceof L.Marker)return"Marker";if(T instanceof L.Circle)return"Circle";if(T instanceof L.CircleMarker)return"CircleMarker";if(T instanceof L.Rectangle)return"Rectangle";if(T instanceof L.Polygon)return"Polygon";if(T instanceof L.Polyline)return"Line"}return(T,O)=>{let X,W;if(X=S(T.layer).toLowerCase(),W=S(O.layer).toLowerCase(),!X||!W)return 0;let yt=X in b?b[X]:Number.MAX_SAFE_INTEGER,Lt=W in b?b[W]:Number.MAX_SAFE_INTEGER,jt=0;return yt<Lt?jt=-1:yt>Lt&&(jt=1),h==="desc"?jt*-1:jt}}function di(s,a=s.getLatLngs()){return s instanceof L.Polygon?L.polygon(a).getLatLngs():L.polyline(a).getLatLngs()}function ul(s,a){var h,d,_,w;if((d=(h=a.options.crs)==null?void 0:h.projection)!=null&&d.MAX_LATITUDE){let b=(w=(_=a.options.crs)==null?void 0:_.projection)==null?void 0:w.MAX_LATITUDE;s.lat=Math.max(Math.min(b,s.lat),-b)}return s}function Dn(s){return s.options.renderer||s._map&&(s._map._getPaneRenderer(s.options.pane)||s._map.options.renderer||s._map._renderer)||s._renderer}var Ga=L.Class.extend({includes:[Xs,_n,Ui,Xo,Es],initialize(s){this.map=s,this.Draw=new L.PM.Draw(s),this.Toolbar=new L.PM.Toolbar(s),this.Keyboard=qe(),this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(s)},setLang(s="en",a,h="en"){if(s=s.trim().toLowerCase(),!/^[a-z]{2}$/.test(s)){let _=s.replace(/[-_\s]/g,"-").replace(/^(\w{2})$/,"$1-").match(/([a-z]{2})-?([a-z]{2})?/);if(_){let w=[`${_[1]}_${_[2]}`,`${_[1]}`];for(let b of w)if(Mi[b]){s=b;break}}}let d=L.PM.activeLang;a&&(Mi[s]=(0,It.default)(Mi[h],a)),L.PM.activeLang=s,this.map.pm.Toolbar.reinit(),this._fireLangChange(d,s,h,Mi[s])},addControls(s){this.Toolbar.addControls(s)},removeControls(){this.Toolbar.removeControls()},toggleControls(){this.Toolbar.toggleControls()},controlsVisible(){return this.Toolbar.isVisible},enableDraw(s="Polygon",a){s==="Poly"&&(s="Polygon"),this.Draw.enable(s,a)},disableDraw(s="Polygon"){s==="Poly"&&(s="Polygon"),this.Draw.disable(s)},setPathOptions(s,a={}){let h=a.ignoreShapes||[],d=a.merge||!1;this.map.pm.Draw.shapes.forEach(_=>{h.indexOf(_)===-1&&this.map.pm.Draw[_].setPathOptions(s,d)})},getGlobalOptions(){return this.globalOptions},setGlobalOptions(s){let a=(0,It.default)(this.globalOptions,s);a.editable&&(a.resizeableCircleMarker=a.editable,delete a.editable);let h=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.resizeableCircleMarker!=!!a.resizeableCircleMarker&&(this.map.pm.Draw.CircleMarker.disable(),h=!0);let d=!1;this.map.pm.Draw.Circle.enabled()&&!!this.map.pm.Draw.Circle.options.resizeableCircle!=!!a.resizeableCircle&&(this.map.pm.Draw.Circle.disable(),d=!0),this.map.pm.Draw.shapes.forEach(_=>{this.map.pm.Draw[_].setOptions(a)}),h&&this.map.pm.Draw.CircleMarker.enable(),d&&this.map.pm.Draw.Circle.enable(),L.PM.Utils.findLayers(this.map).forEach(_=>{_.pm.setOptions(a)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=a,this.applyGlobalOptions()},applyGlobalOptions(){L.PM.Utils.findLayers(this.map).forEach(s=>{s.pm.enabled()&&s.pm.applyOptions()})},globalDrawModeEnabled(){return!!this.Draw.getActiveShape()},globalCutModeEnabled(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode(s){return this.Draw.Cut.enable(s)},toggleGlobalCutMode(s){return this.Draw.Cut.toggle(s)},disableGlobalCutMode(){return this.Draw.Cut.disable()},getGeomanLayers(s=!1){let a=L.PM.Utils.findLayers(this.map);if(!s)return a;let h=L.featureGroup();return h._pmTempLayer=!0,a.forEach(d=>{h.addLayer(d)}),h},getGeomanDrawLayers(s=!1){let a=L.PM.Utils.findLayers(this.map).filter(d=>d._drawnByGeoman===!0);if(!s)return a;let h=L.featureGroup();return h._pmTempLayer=!0,a.forEach(d=>{h.addLayer(d)}),h},_getContainingLayer(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents(s){this._touchEventCounter===0&&(L.DomEvent.on(s,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(s,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents(s){this._touchEventCounter===1&&(L.DomEvent.off(s,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(s,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove(s){Dn(this.map)._onMouseMove(this._createMouseEvent("mousemove",s))},_canvasTouchClick(s){let a="";s.type==="touchstart"||s.type==="pointerdown"?a="mousedown":(s.type==="touchend"||s.type==="pointerup"||s.type==="touchcancel"||s.type==="pointercancel")&&(a="mouseup"),a&&Dn(this.map)._onClick(this._createMouseEvent(a,s))},_createMouseEvent(s,a){let h,d=a.touches[0]||a.changedTouches[0];try{h=new MouseEvent(s,{bubbles:a.bubbles,cancelable:a.cancelable,view:a.view,detail:d.detail,screenX:d.screenX,screenY:d.screenY,clientX:d.clientX,clientY:d.clientY,ctrlKey:a.ctrlKey,altKey:a.altKey,shiftKey:a.shiftKey,metaKey:a.metaKey,button:a.button,relatedTarget:a.relatedTarget})}catch{h=document.createEvent("MouseEvents"),h.initMouseEvent(s,a.bubbles,a.cancelable,a.view,d.detail,d.screenX,d.screenY,d.clientX,d.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,a.button,a.relatedTarget)}return h}}),Qs=Ga,Hi=L.Control.extend({includes:[Es],options:{position:"topleft",disableByOtherButtons:!0},initialize(s){this._button=L.Util.extend({},this.options,s)},onAdd(s){return this._map=s,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this._renderButton(),this._container},_renderButton(){let s=this.buttonsDomNode;this.buttonsDomNode=this._makeButton(this._button),s?s.replaceWith(this.buttonsDomNode):this._container.appendChild(this.buttonsDomNode)},onRemove(){return this.buttonsDomNode.remove(),this._container},getText(){return this._button.text},getIconUrl(){return this._button.iconUrl},destroy(){this._button={},this._update()},toggle(s){return typeof s=="boolean"?this._button.toggleStatus=s:this._button.toggleStatus=!this._button.toggleStatus,this._applyStyleClasses(),this._updateActiveAction(this._button),this._button.toggleStatus},toggled(){return this._button.toggleStatus},onCreate(){this.toggle(!1)},disable(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable(){this._button.disabled=!1,this._updateDisabled(),this._updateActiveAction(this._button)},_triggerClick(s){s&&s.preventDefault(),!this._button.disabled&&(this._button.onClick(s,{button:this,event:s}),this._clicked(s),this._button.afterClick(s,{button:this,event:s}))},_makeButton(s){let a=this.options.position.indexOf("right")>-1?"pos-right":"",h=L.DomUtil.create("div",`button-container  ${a}`,this._container);s.title&&h.setAttribute("title",s.title);let d=L.DomUtil.create("a","leaflet-buttons-control-button",h);d.setAttribute("role","button"),d.setAttribute("tabindex","0"),d.href="#";let _=L.DomUtil.create("div",`leaflet-pm-actions-container ${a}`,h),w=s.actions,b={cancel:{text:Oe("actions.cancel"),title:Oe("actions.cancel"),onClick(){this._triggerClick()}},finishMode:{text:Oe("actions.finish"),title:Oe("actions.finish"),onClick(){this._triggerClick()}},removeLastVertex:{text:Oe("actions.removeLastVertex"),title:Oe("actions.removeLastVertex"),onClick(){this._map.pm.Draw[s.jsClass]._removeLastVertex()}},finish:{text:Oe("actions.finish"),title:Oe("actions.finish"),onClick(T){this._map.pm.Draw[s.jsClass]._finishShape(T)}}};s._preparedActions=w.map(T=>{let O=typeof T=="string"?T:T.name,X;if(b[O])X=b[O];else if(T.text)X=T;else return X;let W=L.DomUtil.create("a",`leaflet-pm-action ${a} action-${O}`,_);if(W.setAttribute("role","button"),W.setAttribute("tabindex","0"),W.href="#",X.title&&(W.title=X.title),W.innerHTML=X.text,L.DomEvent.disableClickPropagation(W),L.DomEvent.on(W,"click",L.DomEvent.stop),X._node=W,!s.disabled&&X.onClick){let yt=Lt=>{Lt.preventDefault();let jt="",{buttons:ie}=this._map.pm.Toolbar;for(let de in ie)if(ie[de]._button===s){jt=de;break}this._fireActionClick(X,jt,s)};L.DomEvent.addListener(W,"click",yt,this),L.DomEvent.addListener(W,"click",X.onClick,this),L.DomEvent.addListener(W,"click",()=>this._updateActiveAction(s))}return X}),this._updateActiveAction(s),s.toggleStatus&&L.DomUtil.addClass(h,"active");let S=L.DomUtil.create("div","control-icon",d);return s.iconUrl&&S.setAttribute("src",s.iconUrl),s.className&&L.DomUtil.addClass(S,s.className),L.DomEvent.disableClickPropagation(d),L.DomEvent.on(d,"click",L.DomEvent.stop),s.disabled||(L.DomEvent.addListener(d,"click",this._onBtnClick,this),L.DomEvent.addListener(d,"click",this._triggerClick,this)),s.disabled&&(L.DomUtil.addClass(d,"pm-disabled"),d.setAttribute("aria-disabled","true")),h},_applyStyleClasses(){this._container&&(!this._button.toggleStatus||this._button.cssToggle===!1?(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")):(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")))},_onBtnClick(){if(this._button.disabled)return;this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);let s="",{buttons:a}=this._map.pm.Toolbar;for(let h in a)if(a[h]._button===this._button){s=h;break}this._fireButtonClick(s,this._button)},_clicked(){this._button.doToggle&&this.toggle()},_updateDisabled(){if(!this._container)return;let s="pm-disabled",a=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(a,s),a.setAttribute("aria-disabled","true")):(L.DomUtil.removeClass(a,s),a.setAttribute("aria-disabled","false"))},_updateActiveAction(s){var a;(a=s._preparedActions)==null||a.forEach(h=>{h!=null&&h._node&&(h.isActive&&h.isActive.call(this)?L.DomUtil.addClass(h._node,"active-action"):L.DomUtil.removeClass(h._node,"active-action"))})}}),za=Hi;L.Control.PMButton=za;var hl=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize(s){this.customButtons=[],this.options.positions={draw:"",edit:"",options:"",custom:""},this.init(s)},reinit(){let s=this.isVisible;this.removeControls(),this._defineButtons(),s&&this.addControls()},init(s){this.map=s,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer(s){let a=`${s}Container`;return this[a]||(this[a]=L.DomUtil.create("div",`leaflet-pm-toolbar leaflet-pm-${s} leaflet-bar leaflet-control`)),this[a]},getButtons(){return this.buttons},addControls(s=this.options){typeof s.editPolygon<"u"&&(s.editMode=s.editPolygon),typeof s.deleteLayer<"u"&&(s.removalMode=s.deleteLayer),L.Util.setOptions(this,s),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle(){let s=this.getButtons(),a={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(let h in s){let d=s[h];L.Util.setOptions(d,{className:a.geomanIcons[h]})}},removeControls(){let s=this.getButtons();for(let a in s)s[a].remove();this.isVisible=!1},toggleControls(s=this.options){this.isVisible?this.removeControls():this.addControls(s)},_addButton(s,a){return this.buttons[s]=a,this.options[s]=!!this.options[s]||!1,this.buttons[s]},triggerClickOnToggledButtons(s){for(let a in this.buttons){let h=this.buttons[a];h._button.disableByOtherButtons&&h!==s&&h.toggled()&&h._triggerClick()}},toggleButton(s,a,h=!0){s==="editPolygon"&&(s="editMode"),s==="deleteLayer"&&(s="removalMode");let d=s;return h&&this.triggerClickOnToggledButtons(this.buttons[d]),this.buttons[d]?this.buttons[d].toggle(a):!1},_defineButtons(){let s={className:"control-icon leaflet-pm-icon-marker",title:Oe("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:()=>{},afterClick:(yt,Lt)=>{this.map.pm.Draw[Lt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},a={title:Oe("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:()=>{},afterClick:(yt,Lt)=>{this.map.pm.Draw[Lt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},h={className:"control-icon leaflet-pm-icon-polyline",title:Oe("buttonTitles.drawLineButton"),jsClass:"Line",onClick:()=>{},afterClick:(yt,Lt)=>{this.map.pm.Draw[Lt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},d={title:Oe("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:()=>{},afterClick:(yt,Lt)=>{this.map.pm.Draw[Lt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},_={title:Oe("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:()=>{},afterClick:(yt,Lt)=>{this.map.pm.Draw[Lt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},w={title:Oe("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:()=>{},afterClick:(yt,Lt)=>{this.map.pm.Draw[Lt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},b={title:Oe("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},S={title:Oe("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},T={title:Oe("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:()=>{},afterClick:(yt,Lt)=>{this.map.pm.Draw[Lt.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},O={title:Oe("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},X={title:Oe("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},W={className:"control-icon leaflet-pm-icon-text",title:Oe("buttonTitles.drawTextButton"),jsClass:"Text",onClick:()=>{},afterClick:(yt,Lt)=>{this.map.pm.Draw[Lt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(s)),this._addButton("drawPolyline",new L.Control.PMButton(h)),this._addButton("drawRectangle",new L.Control.PMButton(w)),this._addButton("drawPolygon",new L.Control.PMButton(a)),this._addButton("drawCircle",new L.Control.PMButton(d)),this._addButton("drawCircleMarker",new L.Control.PMButton(_)),this._addButton("drawText",new L.Control.PMButton(W)),this._addButton("editMode",new L.Control.PMButton(b)),this._addButton("dragMode",new L.Control.PMButton(S)),this._addButton("cutPolygon",new L.Control.PMButton(T)),this._addButton("removalMode",new L.Control.PMButton(O)),this._addButton("rotateMode",new L.Control.PMButton(X))},_showHideButtons(){if(!this.isVisible)return;this.removeControls(),this.isVisible=!0;let s=this.getButtons(),a=[];this.options.drawControls===!1&&(a=a.concat(Object.keys(s).filter(h=>!s[h]._button.tool))),this.options.editControls===!1&&(a=a.concat(Object.keys(s).filter(h=>s[h]._button.tool==="edit"))),this.options.optionsControls===!1&&(a=a.concat(Object.keys(s).filter(h=>s[h]._button.tool==="options"))),this.options.customControls===!1&&(a=a.concat(Object.keys(s).filter(h=>s[h]._button.tool==="custom")));for(let h in s)if(this.options[h]&&a.indexOf(h)===-1){let d=s[h]._button.tool;d||(d="draw"),s[h].setPosition(this._getBtnPosition(d)),s[h].addTo(this.map)}},_getBtnPosition(s){return this.options.positions&&this.options.positions[s]?this.options.positions[s]:this.options.position},setBlockPosition(s,a){this.options.positions[s]=a,this._showHideButtons(),this.changeControlOrder()},getBlockPositions(){return this.options.positions},copyDrawControl(s,a){if(a)typeof a!="object"&&(a={name:a});else throw new TypeError("Button has no name");let h=this._btnNameMapping(s);if(!a.name)throw new TypeError("Button has no name");if(this.buttons[a.name])throw new TypeError("Button with this name already exists");let d=this.map.pm.Draw.createNewDrawInstance(a.name,h);a={...this.buttons[h]._button,...a};let _=this.createCustomControl(a);return{drawInstance:d,control:_}},createCustomControl(s){if(!s.name)throw new TypeError("Button has no name");if(this.buttons[s.name])throw new TypeError("Button with this name already exists");s.onClick||(s.onClick=()=>{}),s.afterClick||(s.afterClick=()=>{}),s.toggle!==!1&&(s.toggle=!0),s.block&&(s.block=s.block.toLowerCase()),(!s.block||s.block==="draw")&&(s.block=""),s.className?s.className.indexOf("control-icon")===-1&&(s.className=`control-icon ${s.className}`):s.className="control-icon";let a={tool:s.block,className:s.className,title:s.title||"",jsClass:s.name,onClick:s.onClick,afterClick:s.afterClick,doToggle:s.toggle,toggleStatus:!1,disableOtherButtons:s.disableOtherButtons??!0,disableByOtherButtons:s.disableByOtherButtons??!0,cssToggle:s.toggle,position:this.options.position,actions:s.actions||[],disabled:!!s.disabled};this.options[s.name]!==!1&&(this.options[s.name]=!0);let h=this._addButton(s.name,new L.Control.PMButton(a));return this.changeControlOrder(),h},controlExists(s){return!!this.getButton(s)},getButton(s){return this.getButtons()[s]},getButtonsInBlock(s){let a={};if(s)for(let h in this.getButtons()){let d=this.getButtons()[h];(d._button.tool===s||s==="draw"&&!d._button.tool)&&(a[h]=d)}return a},changeControlOrder(s=[]){let a=this._shapeMapping(),h=[];s.forEach(w=>{a[w]?h.push(a[w]):h.push(w)});let d=this.getButtons(),_={};h.forEach(w=>{d[w]&&(_[w]=d[w])}),Object.keys(d).filter(w=>!d[w]._button.tool||d[w]._button.tool==="draw").forEach(w=>{h.indexOf(w)===-1&&(_[w]=d[w])}),Object.keys(d).filter(w=>d[w]._button.tool==="edit").forEach(w=>{h.indexOf(w)===-1&&(_[w]=d[w])}),Object.keys(d).filter(w=>d[w]._button.tool==="options").forEach(w=>{h.indexOf(w)===-1&&(_[w]=d[w])}),Object.keys(d).filter(w=>d[w]._button.tool==="custom").forEach(w=>{h.indexOf(w)===-1&&(_[w]=d[w])}),Object.keys(d).forEach(w=>{h.indexOf(w)===-1&&(_[w]=d[w])}),this.map.pm.Toolbar.buttons=_,this._showHideButtons()},getControlOrder(){let s=this.getButtons(),a=[];for(let h in s)a.push(h);return a},changeActionsOfControl(s,a){let h=this._btnNameMapping(s);if(!h)throw new TypeError("No name passed");if(!a)throw new TypeError("No actions passed");if(!this.buttons[h])throw new TypeError("Button with this name not exists");this.buttons[h]._button.actions=a,this.changeControlOrder()},setButtonDisabled(s,a){let h=this._btnNameMapping(s);a?this.buttons[h].disable():this.buttons[h].enable()},_shapeMapping(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping(s){let a=this._shapeMapping();return a[s]?a[s]:s}}),ja=hl,Ul=E(vs()),ea={_initSnappableMarkers(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents(s){s.forEach(a=>{if(Array.isArray(a)){this._assignEvents(a);return}a.off("drag",this._handleSnapping,this),a.on("drag",this._handleSnapping,this),a.off("dragend",this._cleanupSnapping,this),a.on("dragend",this._cleanupSnapping,this)})},_cleanupSnapping(s){if(s){let a=s.target;a._snapped=!1}delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("layerremove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(a=>{a.remove()})},_handleThrottleSnapping(){this.throttledList&&this._createSnapList()},_handleSnapping(s){var S,T,O;let a=s.target;if(a._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),((S=s==null?void 0:s.originalEvent)==null?void 0:S.altKey)||((O=(T=this._map)==null?void 0:T.pm)==null?void 0:O.Keyboard.isAltKeyPressed())||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;let h=this._calcClosestLayer(a.getLatLng(),this._snapList);if(Object.keys(h).length===0)return!1;let d=h.layer instanceof L.Marker||h.layer instanceof L.CircleMarker||!this.options.snapSegment,_;d?_=h.latlng:_=this._checkPrioritiySnapping(h);let w=this.options.snapDistance,b={marker:a,shape:this._shape,snapLatLng:_,segment:h.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:h.layer,distance:h.distance};if(this._fireSnapDrag(b.marker,b),this._fireSnapDrag(this._layer,b),h.distance<w){a._orgLatLng=a.getLatLng(),a.setLatLng(_),a._snapped=!0,a._snapInfo=b;let X=()=>{this._snapLatLng=_,this._fireSnap(a,b),this._fireSnap(this._layer,b)},W=this._snapLatLng||{},yt=_||{};(W.lat!==yt.lat||W.lng!==yt.lng)&&X()}else this._snapLatLng&&(this._unsnap(b),a._snapped=!1,a._snapInfo=void 0,this._fireUnsnap(b.marker,b),this._fireUnsnap(this._layer,b));return!0},_createSnapList(){let s=[],a=[],h=this._map;h.off("layerremove",this._handleSnapLayerRemoval,this),h.on("layerremove",this._handleSnapLayerRemoval,this),h.eachLayer(d=>{if((d instanceof L.Polyline||d instanceof L.Marker||d instanceof L.CircleMarker||d instanceof L.ImageOverlay)&&d.options.snapIgnore!==!0){if(d.options.snapIgnore===void 0&&(!L.PM.optIn&&d.options.pmIgnore===!0||L.PM.optIn&&d.options.pmIgnore!==!1))return;(d instanceof L.Circle||d instanceof L.CircleMarker)&&d.pm&&d.pm._hiddenPolyCircle?s.push(d.pm._hiddenPolyCircle):d instanceof L.ImageOverlay&&(d=L.rectangle(d.getBounds())),s.push(d);let _=L.polyline([],{color:"red",pmIgnore:!0});_._pmTempLayer=!0,a.push(_),(d instanceof L.Circle||d instanceof L.CircleMarker)&&a.push(_)}}),s=s.filter(d=>this._layer!==d),s=s.filter(d=>d._latlng||d._latlngs&&sr(d._latlngs)),s=s.filter(d=>!d._pmTempLayer),this._otherSnapLayers?(this._otherSnapLayers.forEach(()=>{let d=L.polyline([],{color:"red",pmIgnore:!0});d._pmTempLayer=!0,a.push(d)}),this._snapList=s.concat(this._otherSnapLayers)):this._snapList=s,this.debugIndicatorLines=a},_handleSnapLayerRemoval({layer:s}){if(!s._leaflet_id)return;let a=this._snapList.findIndex(h=>h._leaflet_id===s._leaflet_id);a>-1&&this._snapList.splice(a,1)},_calcClosestLayer(s,a){return this._calcClosestLayers(s,a,1)[0]},_calcClosestLayers(s,a,h=1){let d=[],_={};a.forEach((b,S)=>{var O;if(b._parentCopy&&b._parentCopy===this._layer||((O=b.getLatLngs)==null?void 0:O.call(b).flat(5).length)<2)return;let T=this._calcLayerDistances(s,b);if(T.distance=Math.floor(T.distance),this.debugIndicatorLines){if(!this.debugIndicatorLines[S]){let X=L.polyline([],{color:"red",pmIgnore:!0});X._pmTempLayer=!0,this.debugIndicatorLines[S]=X}this.debugIndicatorLines[S].setLatLngs([s,T.latlng])}h===1&&(_.distance===void 0||T.distance-5<=_.distance)?(T.distance+5<_.distance&&(d=[]),_=T,_.layer=b,d.push(_)):h!==1&&(_={},_=T,_.layer=b,d.push(_))}),h!==1&&(d=d.sort((b,S)=>b.distance-S.distance)),h===-1&&(h=d.length);let w=this._getClosestLayerByPriority(d,h);return L.Util.isArray(w)?w:[w]},_calcLayerDistances(s,a){let h=this._map,d=a instanceof L.Marker||a instanceof L.CircleMarker,_=a instanceof L.Polygon,w=s;if(d){let b=a.getLatLng();return{latlng:{...b},distance:this._getDistance(h,b,w)}}return this._calcLatLngDistances(w,a.getLatLngs(),h,_)},_calcLatLngDistances(s,a,h,d=!1){let _,w,b,S=T=>{T.forEach((O,X)=>{if(Array.isArray(O)){S(O);return}if(this.options.snapSegment){let W=O,yt;d?yt=X+1===T.length?0:X+1:yt=X+1===T.length?void 0:X+1;let Lt=T[yt];if(Lt){let jt=this._getDistanceToSegment(h,s,W,Lt);(w===void 0||jt<w)&&(w=jt,b=[W,Lt])}}else{let W=this._getDistance(h,s,O);(w===void 0||W<w)&&(w=W,_=O)}})};return S(a),this.options.snapSegment?{latlng:{...this._getClosestPointOnSegment(h,s,b[0],b[1])},segment:b,distance:w}:{latlng:_,distance:w}},_getClosestLayerByPriority(s,a=1){s=s.sort((b,S)=>b._leaflet_id-S._leaflet_id);let h=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],d=this._map.pm.globalOptions.snappingOrder||[],_=0,w={};return d.concat(h).forEach(b=>{w[b]||(_+=1,w[b]=_)}),s.sort(Fa("instanceofShape",w)),a===1?s[0]||{}:s.slice(0,a)},_checkPrioritiySnapping(s){let a=this._map,h=s.segment[0],d=s.segment[1],_=s.latlng,w=_;if(this.options.snapVertex){let b=this._getDistance(a,h,_),S=this._getDistance(a,d,_),T=b<S?h:d,O=b<S?b:S;if(this.options.snapMiddle){let W=L.PM.Utils.calcMiddleLatLng(a,h,d),yt=this._getDistance(a,W,_);yt<b&&yt<S&&(T=W,O=yt)}let X=this.options.snapDistance;O<X&&(w=T)}return{...w}},_unsnap(){delete this._snapLatLng},_getClosestPointOnSegment(s,a,h,d){let _=s.getMaxZoom();_===1/0&&(_=s.getZoom());let w=s.project(a,_),b=s.project(h,_),S=s.project(d,_),T=L.LineUtil.closestPointOnSegment(w,b,S);return s.unproject(T,_)},_getDistanceToSegment(s,a,h,d){let _=s.latLngToContainerPoint(a),w=s.latLngToContainerPoint(h),b=s.latLngToContainerPoint(d);return L.LineUtil.pointToSegmentDistance(_,w,b)},_getDistance(s,a,h){return s.latLngToContainerPoint(a).distanceTo(s.latLngToContainerPoint(h))}},Ua=ea,Hl=L.Class.extend({includes:[Ua,Es],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,resizeableCircleMarker:!1,resizeableCircle:!0,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1,rectangleAngle:0,textOptions:{text:null,focusAfterDraw:null,removeIfEmpty:null,className:null},snapVertex:!0},setOptions(s){L.Util.setOptions(this,s),this.setStyle(this.options)},setStyle(){},getOptions(){return this.options},initialize(s){let a=new L.Icon.Default;a.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=a,this._map=s,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(h=>{this[h]=new L.PM.Draw[h](this._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions(s,a=!1){a?this.options.pathOptions=(0,Ul.default)(this.options.pathOptions,s):this.options.pathOptions=s},getShapes(){return this.shapes},getShape(){return this._shape},enable(s,a){if(!s)throw new Error(`Error: Please pass a shape as a parameter. Possible shapes are: ${this.getShapes().join(",")}`);this.disable(),this[s].enable(a)},disable(){this.shapes.forEach(s=>{this[s].disable()})},addControls(){this.shapes.forEach(s=>{this[s].addButton()})},getActiveShape(){let s;return this.shapes.forEach(a=>{this[a]._enabled&&(s=a)}),s},_setGlobalDrawMode(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();let s=[];this._map.eachLayer(a=>{(a instanceof L.Polyline||a instanceof L.Marker||a instanceof L.Circle||a instanceof L.CircleMarker||a instanceof L.ImageOverlay)&&(a._pmTempLayer||s.push(a))}),this._enabled?s.forEach(a=>{L.PM.Utils.disablePopup(a)}):s.forEach(a=>{L.PM.Utils.enablePopup(a)})},createNewDrawInstance(s,a){let h=this._getShapeFromBtnName(a);if(this[s])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[h])throw new TypeError(`There is no class L.PM.Draw.${h}`);return this[s]=new L.PM.Draw[h](this._map),this[s].toolbarButtonName=s,this[s]._shape=s,this.shapes.push(s),this[a]&&this[s].setOptions(this[a].options),this[s].setOptions(this[s].options),this[s]},_getShapeFromBtnName(s){let a={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return a[s]?a[s]:this[s]?this[s]._shape:s},_finishLayer(s){s.pm&&(s.pm.setOptions(this.options),s.pm._shape=this._shape,s.pm._map=this._map),this._addDrawnLayerProp(s)},_addDrawnLayerProp(s){s._drawnByGeoman=!0},_setPane(s,a){a==="layerPane"?s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":a==="vertexPane"?s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":a==="markerPane"&&(s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}}),Nn=Hl;Nn.Marker=Nn.extend({initialize(s){this._map=s,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable(s){L.Util.setOptions(this,s),this._enabled=!0,this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(Oe("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(a=>{this.isRelevantMarker(a)&&a.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(s=>{this.isRelevantMarker(s)&&s.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},isRelevantMarker(s){return s instanceof L.Marker&&s.pm&&!s._pmTempLayer&&!s.pm._initTextMarker},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this.options.snappable){let a=s;a.target=this._hintMarker,this._handleSnapping(a)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker(s){if(!s.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let a=this._hintMarker.getLatLng(),h=new L.Marker(a,this.options.markerStyle);this._setPane(h,"markerPane"),this._finishLayer(h),h.pm||(h.options.draggable=!1),h.addTo(this._map.pm._getContainingLayer()),h.pm&&this.options.markerEditable?h.pm.enable():h.dragging&&h.dragging.disable(),this._fireCreate(h),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},setStyle(){var s,a;(s=this.options.markerStyle)!=null&&s.icon&&((a=this._hintMarker)==null||a.setIcon(this.options.markerStyle.icon))}});var Zn=63710088e-1,cl={centimeters:Zn*100,centimetres:Zn*100,degrees:Zn/111325,feet:Zn*3.28084,inches:Zn*39.37,kilometers:Zn/1e3,kilometres:Zn/1e3,meters:Zn,metres:Zn,miles:Zn/1609.344,millimeters:Zn*1e3,millimetres:Zn*1e3,nauticalmiles:Zn/1852,radians:1,yards:Zn*1.0936};function Zr(s,a,h){h===void 0&&(h={});var d={type:"Feature"};return(h.id===0||h.id)&&(d.id=h.id),h.bbox&&(d.bbox=h.bbox),d.properties=a||{},d.geometry=s,d}function Cs(s,a,h){if(h===void 0&&(h={}),!s)throw new Error("coordinates is required");if(!Array.isArray(s))throw new Error("coordinates must be an Array");if(s.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Ha(s[0])||!Ha(s[1]))throw new Error("coordinates must contain numbers");var d={type:"Point",coordinates:s};return Zr(d,a,h)}function qr(s,a,h){if(h===void 0&&(h={}),s.length<2)throw new Error("coordinates must be an array of two or more positions");var d={type:"LineString",coordinates:s};return Zr(d,a,h)}function pi(s,a){a===void 0&&(a={});var h={type:"FeatureCollection"};return a.id&&(h.id=a.id),a.bbox&&(h.bbox=a.bbox),h.features=s,h}function $l(s,a){a===void 0&&(a="kilometers");var h=cl[a];if(!h)throw new Error(a+" units is invalid");return s*h}function bs(s,a){a===void 0&&(a="kilometers");var h=cl[a];if(!h)throw new Error(a+" units is invalid");return s/h}function gi(s){var a=s%(2*Math.PI);return a*180/Math.PI}function Ri(s){var a=s%360;return a*Math.PI/180}function Ha(s){return!isNaN(s)&&s!==null&&!Array.isArray(s)}function Lo(s){var a,h,d={type:"FeatureCollection",features:[]};if(s.type==="Feature"?h=s.geometry:h=s,h.type==="LineString")a=[h.coordinates];else if(h.type==="MultiLineString")a=h.coordinates;else if(h.type==="MultiPolygon")a=[].concat.apply([],h.coordinates);else if(h.type==="Polygon")a=h.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return a.forEach(function(_){a.forEach(function(w){for(var b=0;b<_.length-1;b++)for(var S=b;S<w.length-1;S++)if(!(_===w&&(Math.abs(b-S)===1||b===0&&S===_.length-2&&_[b][0]===_[_.length-1][0]&&_[b][1]===_[_.length-1][1]))){var T=$a(_[b][0],_[b][1],_[b+1][0],_[b+1][1],w[S][0],w[S][1],w[S+1][0],w[S+1][1]);T&&d.features.push(Cs([T[0],T[1]]))}})}),d}function $a(s,a,h,d,_,w,b,S){var T,O,X,W,yt,Lt={x:null,y:null,onLine1:!1,onLine2:!1};return T=(S-w)*(h-s)-(b-_)*(d-a),T===0?Lt.x!==null&&Lt.y!==null?Lt:!1:(O=a-w,X=s-_,W=(b-_)*O-(S-w)*X,yt=(h-s)*O-(d-a)*X,O=W/T,X=yt/T,Lt.x=s+O*(h-s),Lt.y=a+O*(d-a),O>=0&&O<=1&&(Lt.onLine1=!0),X>=0&&X<=1&&(Lt.onLine2=!0),Lt.onLine1&&Lt.onLine2?[Lt.x,Lt.y]:!1)}Nn.Line=Nn.extend({initialize(s){this._map=s,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable(s){L.Util.setOptions(this,s),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],{...this.options.templineStyle,pmIgnore:!1}),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(Oe("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this.isRed=!1,this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},_syncHintLine(){let s=this._layer.getLatLngs();if(s.length>0){let a=s[s.length-1];this._hintline.setLatLngs([a,this._hintMarker.getLatLng()])}},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this.options.snappable){let h=s;h.target=this._hintMarker,this._handleSnapping(h)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());let a=this._layer._defaultShape().slice();a.push(this._hintMarker.getLatLng()),this._change(a)},hasSelfIntersection(){return Lo(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection(s,a){let h=L.polyline(this._layer.getLatLngs());s&&(a||(a=this._hintMarker.getLatLng()),h.addLatLng(a));let d=Lo(h.toGeoJSON(15));this._doesSelfIntersect=d.features.length>0,this._doesSelfIntersect?this.isRed||(this.isRed=!0,this._hintline.setStyle({color:"#f00000ff"}),this._fireIntersect(d,this._map,"Draw")):this._hintline.isEmpty()||(this.isRed=!1,this._hintline.setStyle(this.options.hintlineStyle))},_createVertex(s){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,s.latlng),this._doesSelfIntersect))return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let a=this._hintMarker.getLatLng(),h=this._layer.getLatLngs(),d=h[h.length-1];if(a.equals(h[0])||h.length>0&&a.equals(d)){this._finishShape();return}this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:a,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(a);let _=this._createMarker(a);this._setTooltipText(),this._setHintLineAfterNewVertex(a),this._fireVertexAdded(_,void 0,a,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(s)},_setHintLineAfterNewVertex(s){this._hintline.setLatLngs([s,s])},_removeLastVertex(){let s=this._markers;if(s.length<=1){this.disable();return}let a=this._layer.getLatLngs(),h=s[s.length-1],{indexPath:d}=L.PM.Utils.findDeepMarkerIndex(s,h);s.pop(),this._layerGroup.removeLayer(h);let _=s[s.length-1],w=a.indexOf(_.getLatLng());a=a.slice(0,w+1),this._layer.setLatLngs(a),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(h,d,"Draw"),this._change(this._layer.getLatLngs())},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!1),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let s=this._layer.getLatLngs();if(s.length<=1)return;let a=L.polyline(s,this.options.pathOptions);this._setPane(a,"layerPane"),this._finishLayer(a),a.addTo(this._map.pm._getContainingLayer()),this._fireCreate(a),this.options.snappable&&this._cleanupSnapping();let h=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(h))},_createMarker(s){let a=new L.Marker(s,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(a,"vertexPane"),a._pmTempLayer=!0,this._layerGroup.addLayer(a),this._markers.push(a),a.on("click",this._finishShape,this),a},_setTooltipText(){let{length:s}=this._layer.getLatLngs().flat(),a="";s<=1?a=Oe("tooltips.continueLine"):a=Oe("tooltips.finishLine"),this._hintMarker.setTooltipContent(a)},_change(s){this._fireChange(s,"Draw")},setStyle(){var s,a;(s=this._layer)==null||s.setStyle(this.options.templineStyle),(a=this._hintline)==null||a.setStyle(this.options.hintlineStyle)}}),Nn.Polygon=Nn.Line.extend({initialize(s){this._map=s,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable(s){L.PM.Draw.Line.prototype.enable.call(this,s),this._layer.pm._shape="Polygon"},_createMarker(s){let a=new L.Marker(s,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(a,"vertexPane"),a._pmTempLayer=!0,this._layerGroup.addLayer(a),this._markers.push(a),this._layer.getLatLngs().flat().length===1?(a.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(a)-1,this.options.snappable&&this._cleanupSnapping()):a.on("click",()=>1),a},_setTooltipText(){let{length:s}=this._layer.getLatLngs().flat(),a="";s<=2?a=Oe("tooltips.continueLine"):a=Oe("tooltips.finishPoly"),this._hintMarker.setTooltipContent(a)},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let s=this._layer.getLatLngs();if(s.length<=2)return;let a=L.polygon(s,this.options.pathOptions);this._setPane(a,"layerPane"),this._finishLayer(a),a.addTo(this._map.pm._getContainingLayer()),this._fireCreate(a),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex;let h=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(h))}}),Nn.Rectangle=Nn.extend({initialize(s){this._map=s,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable(s){if(L.Util.setOptions(this,s),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(Oe("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(let a=0;a<2;a+=1){let h=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(h,"vertexPane"),h._pmTempLayer=!0,this._layerGroup.addLayer(h),this._styleMarkers.push(h)}}this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},_placeStartingMarkers(s){this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let a=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(a),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(h=>{L.DomUtil.addClass(h._icon,"visible"),h.setLatLng(a)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(Oe("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin(){let s=this._startMarker.getLatLng();s&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([s,s]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this.options.snappable){let h=s;h.target=this._hintMarker,this._handleSnapping(h)}let a=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(a,"Draw")},_syncRectangleSize(){let s=ul(this._startMarker.getLatLng(),this._map),a=ul(this._hintMarker.getLatLng(),this._map),h=L.PM.Utils._getRotatedRectangle(s,a,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(h),this.options.cursorMarker&&this._styleMarkers){let d=[];h.forEach(_=>{!_.equals(s,1e-8)&&!_.equals(a,1e-8)&&d.push(_)}),d.forEach((_,w)=>{try{this._styleMarkers[w].setLatLng(_)}catch{}})}},_findCorners(){let s=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(s[0],s[2],this.options.rectangleAngle||0,this._map)},_finishShape(s){this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let a=this._hintMarker.getLatLng(),h=this._startMarker.getLatLng();if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||h.equals(a))return;let d=L.rectangle([h,a],this.options.pathOptions);if(this.options.rectangleAngle){let w=L.PM.Utils._getRotatedRectangle(h,a,this.options.rectangleAngle||0,this._map);d.setLatLngs(w),d.pm&&d.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(d,"layerPane"),this._finishLayer(d),d.addTo(this._map.pm._getContainingLayer()),this._fireCreate(d);let _=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(_))},setStyle(){var s;(s=this._layer)==null||s.setStyle(this.options.pathOptions)}}),Nn.CircleMarker=Nn.extend({initialize(s){this._map=s,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1,this._BaseCircleClass=L.CircleMarker,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._defaultRadius=10},enable(s){if(L.Util.setOptions(this,s),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._map.getContainer().classList.add("geoman-draw-cursor"),this.options[this._editableOption]){let a={};L.extend(a,this.options.templineStyle),a.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=new this._BaseCircleClass(this._map.getCenter(),a),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(Oe("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this)}else this._map.on("click",this._createMarker,this),this._hintMarker=new this._BaseCircleClass(this._map.getCenter(),{radius:this._defaultRadius,...this.options.templineStyle}),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(Oe("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),this._extendingEnable(),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},_extendingEnable(){!this.options[this._editableOption]&&this.options.markerEditable&&this._map.eachLayer(s=>{this.isRelevantMarker(s)&&s.pm.enable()}),this._layer.bringToBack()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this.options[this._editableOption]?(this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._extendingDisable(),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_extendingDisable(){this._map.eachLayer(s=>{this.isRelevantMarker(s)&&s.pm.disable()})},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},_placeCenterMarker(s){this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng),this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker);let a=this._hintMarker.getLatLng();this._centerMarker.setLatLng(a),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter(){let s=this._centerMarker.getLatLng();s&&(this._layer.setLatLng(s),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(Oe("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine(){let s=this._centerMarker.getLatLng(),a=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([s,a])},_syncCircleRadius(){let s=this._centerMarker.getLatLng(),a=this._hintMarker.getLatLng(),h=this._distanceCalculation(s,a);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(h)},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){let h=s;h.target=this._hintMarker,this._handleSnapping(h)}this._handleHintMarkerSnapping();let a=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(a,"Draw")},isRelevantMarker(s){return s instanceof L.CircleMarker&&!(s instanceof L.Circle)&&s.pm&&!s._pmTempLayer},_createMarker(s){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||!s.latlng||this._layerIsDragging)return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let a=this._hintMarker.getLatLng(),h=new this._BaseCircleClass(a,{radius:this._defaultRadius,...this.options.pathOptions});this._setPane(h,"layerPane"),this._finishLayer(h),h.addTo(this._map.pm._getContainingLayer()),this._extendingCreateMarker(h),this._fireCreate(h),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},_extendingCreateMarker(s){s.pm&&this.options.markerEditable&&s.pm.enable()},_finishShape(s){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let a=this._centerMarker.getLatLng(),h=this._defaultRadius;if(this.options[this._editableOption]){let b=this._hintMarker.getLatLng();h=this._distanceCalculation(a,b),this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?h=this.options[this._minRadiusOption]:this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&(h=this.options[this._maxRadiusOption])}let d={...this.options.pathOptions,radius:h},_=new this._BaseCircleClass(a,d);this._setPane(_,"layerPane"),this._finishLayer(_),_.addTo(this._map.pm._getContainingLayer()),_.pm&&_.pm._updateHiddenPolyCircle(),this._fireCreate(_);let w=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(w))},_getNewDestinationOfHintMarker(){let s=this._hintMarker.getLatLng();if(this.options[this._editableOption]){if(!this._layerGroup.hasLayer(this._centerMarker))return s;let a=this._centerMarker.getLatLng(),h=this._distanceCalculation(a,s);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?s=Dr(this._map,a,s,this._getMinDistanceInMeter()):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&(s=Dr(this._map,a,s,this._getMaxDistanceInMeter()))}return s},_getMinDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,this._centerMarker.getLatLng())},_getMaxDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,this._centerMarker.getLatLng())},_handleHintMarkerSnapping(){if(this.options[this._editableOption]){if(this._hintMarker._snapped){let s=this._centerMarker.getLatLng(),a=this._hintMarker.getLatLng(),h=this._distanceCalculation(s,a);this._layerGroup.hasLayer(this._centerMarker)&&(this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._hintMarker.setLatLng(this._hintMarker._orgLatLng):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng))}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},setStyle(){var a,h;let s={};L.extend(s,this.options.templineStyle),this.options[this._editableOption]&&(s.radius=0),(a=this._layer)==null||a.setStyle(s),(h=this._hintline)==null||h.setStyle(this.options.hintlineStyle)},_distanceCalculation(s,a){return this._map.project(s).distanceTo(this._map.project(a))}}),Nn.Circle=Nn.CircleMarker.extend({initialize(s){this._map=s,this._shape="Circle",this.toolbarButtonName="drawCircle",this._BaseCircleClass=L.Circle,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._defaultRadius=100},_extendingEnable(){},_extendingDisable(){},_extendingCreateMarker(){},isRelevantMarker(){},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_distanceCalculation(s,a){return this._map.distance(s,a)}});function Ii(s){if(!s)throw new Error("coord is required");if(!Array.isArray(s)){if(s.type==="Feature"&&s.geometry!==null&&s.geometry.type==="Point")return s.geometry.coordinates;if(s.type==="Point")return s.coordinates}if(Array.isArray(s)&&s.length>=2&&!Array.isArray(s[0])&&!Array.isArray(s[1]))return s;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function or(s){if(Array.isArray(s))return s;if(s.type==="Feature"){if(s.geometry!==null)return s.geometry.coordinates}else if(s.coordinates)return s.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function na(s){return s.type==="Feature"?s.geometry:s}function Va(s,a){return s.type==="FeatureCollection"?"FeatureCollection":s.type==="GeometryCollection"?"GeometryCollection":s.type==="Feature"&&s.geometry!==null?s.geometry.type:s.type}function Wa(s,a,h){if(s!==null)for(var d,_,w,b,S,T,O,X=0,W=0,yt,Lt=s.type,jt=Lt==="FeatureCollection",ie=Lt==="Feature",de=jt?s.features.length:1,Ke=0;Ke<de;Ke++){O=jt?s.features[Ke].geometry:ie?s.geometry:s,yt=O?O.type==="GeometryCollection":!1,S=yt?O.geometries.length:1;for(var J=0;J<S;J++){var et=0,ot=0;if(b=yt?O.geometries[J]:O,b!==null){T=b.coordinates;var wt=b.type;switch(X=0,wt){case null:break;case"Point":if(a(T,W,Ke,et,ot)===!1)return!1;W++,et++;break;case"LineString":case"MultiPoint":for(d=0;d<T.length;d++){if(a(T[d],W,Ke,et,ot)===!1)return!1;W++,wt==="MultiPoint"&&et++}wt==="LineString"&&et++;break;case"Polygon":case"MultiLineString":for(d=0;d<T.length;d++){for(_=0;_<T[d].length-X;_++){if(a(T[d][_],W,Ke,et,ot)===!1)return!1;W++}wt==="MultiLineString"&&et++,wt==="Polygon"&&ot++}wt==="Polygon"&&et++;break;case"MultiPolygon":for(d=0;d<T.length;d++){for(ot=0,_=0;_<T[d].length;_++){for(w=0;w<T[d][_].length-X;w++){if(a(T[d][_][w],W,Ke,et,ot)===!1)return!1;W++}ot++}et++}break;case"GeometryCollection":for(d=0;d<b.geometries.length;d++)if(Wa(b.geometries[d],a)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function ni(s,a){if(s.type==="Feature")a(s,0);else if(s.type==="FeatureCollection")for(var h=0;h<s.features.length&&a(s.features[h],h)!==!1;h++);}function Kr(s,a,h){var d=h;return ni(s,function(_,w){w===0&&h===void 0?d=_:d=a(d,_,w)}),d}function Co(s,a){var h,d,_,w,b,S,T,O,X,W,yt=0,Lt=s.type==="FeatureCollection",jt=s.type==="Feature",ie=Lt?s.features.length:1;for(h=0;h<ie;h++){for(S=Lt?s.features[h].geometry:jt?s.geometry:s,O=Lt?s.features[h].properties:jt?s.properties:{},X=Lt?s.features[h].bbox:jt?s.bbox:void 0,W=Lt?s.features[h].id:jt?s.id:void 0,T=S?S.type==="GeometryCollection":!1,b=T?S.geometries.length:1,_=0;_<b;_++){if(w=T?S.geometries[_]:S,w===null){if(a(null,yt,O,X,W)===!1)return!1;continue}switch(w.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(a(w,yt,O,X,W)===!1)return!1;break}case"GeometryCollection":{for(d=0;d<w.geometries.length;d++)if(a(w.geometries[d],yt,O,X,W)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}yt++}}function $i(s,a){Co(s,function(h,d,_,w,b){var S=h===null?null:h.type;switch(S){case null:case"Point":case"LineString":case"Polygon":return a(Zr(h,_,{bbox:w,id:b}),d,0)===!1?!1:void 0}var T;switch(S){case"MultiPoint":T="Point";break;case"MultiLineString":T="LineString";break;case"MultiPolygon":T="Polygon";break}for(var O=0;O<h.coordinates.length;O++){var X=h.coordinates[O],W={type:T,coordinates:X};if(a(Zr(W,_),d,O)===!1)return!1}})}function fl(s){if(!s)throw new Error("geojson is required");var a=[];return $i(s,function(h){Ss(h,a)}),pi(a)}function Ss(s,a){var h=[],d=s.geometry;if(d!==null){switch(d.type){case"Polygon":h=or(d);break;case"LineString":h=[or(d)]}h.forEach(function(_){var w=dl(_,s.properties);w.forEach(function(b){b.id=a.length,a.push(b)})})}}function dl(s,a){var h=[];return s.reduce(function(d,_){var w=qr([d,_],a);return w.bbox=to(d,_),h.push(w),_}),h}function to(s,a){var h=s[0],d=s[1],_=a[0],w=a[1],b=h<_?h:_,S=d<w?d:w,T=h>_?h:_,O=d>w?d:w;return[b,S,T,O]}var bo=fl,Nr=E(bt(),1);function Vl(s,a){var h={},d=[];if(s.type==="LineString"&&(s=Zr(s)),a.type==="LineString"&&(a=Zr(a)),s.type==="Feature"&&a.type==="Feature"&&s.geometry!==null&&a.geometry!==null&&s.geometry.type==="LineString"&&a.geometry.type==="LineString"&&s.geometry.coordinates.length===2&&a.geometry.coordinates.length===2){var _=Fr(s,a);return _&&d.push(_),pi(d)}var w=(0,Nr.default)();return w.load(bo(a)),ni(bo(s),function(b){ni(w.search(b),function(S){var T=Fr(b,S);if(T){var O=or(T).join(",");h[O]||(h[O]=!0,d.push(T))}})}),pi(d)}function Fr(s,a){var h=or(s),d=or(a);if(h.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(d.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var _=h[0][0],w=h[0][1],b=h[1][0],S=h[1][1],T=d[0][0],O=d[0][1],X=d[1][0],W=d[1][1],yt=(W-O)*(b-_)-(X-T)*(S-w),Lt=(X-T)*(w-O)-(W-O)*(_-T),jt=(b-_)*(w-O)-(S-w)*(_-T);if(yt===0)return null;var ie=Lt/yt,de=jt/yt;if(ie>=0&&ie<=1&&de>=0&&de<=1){var Ke=_+ie*(b-_),J=w+ie*(S-w);return Cs([Ke,J])}return null}var ar=Vl,Za=E(bt(),1);function ia(s,a,h){h===void 0&&(h={});var d=Ii(s),_=Ii(a),w=Ri(_[1]-d[1]),b=Ri(_[0]-d[0]),S=Ri(d[1]),T=Ri(_[1]),O=Math.pow(Math.sin(w/2),2)+Math.pow(Math.sin(b/2),2)*Math.cos(S)*Math.cos(T);return $l(2*Math.atan2(Math.sqrt(O),Math.sqrt(1-O)),h.units)}var Vi=ia;function Li(s){var a=s[0],h=s[1],d=s[2],_=s[3],w=Vi(s.slice(0,2),[d,h]),b=Vi(s.slice(0,2),[a,_]);if(w>=b){var S=(h+_)/2;return[a,S-(d-a)/2,d,S+(d-a)/2]}else{var T=(a+d)/2;return[T-(_-h)/2,h,T+(_-h)/2,_]}}var Wl=Li;function Wi(s){var a=[1/0,1/0,-1/0,-1/0];return Wa(s,function(h){a[0]>h[0]&&(a[0]=h[0]),a[1]>h[1]&&(a[1]=h[1]),a[2]<h[0]&&(a[2]=h[0]),a[3]<h[1]&&(a[3]=h[1])}),a}Wi.default=Wi;var So=Wi;function lr(s,a){a===void 0&&(a={});var h=a.precision,d=a.coordinates,_=a.mutate;if(h=h==null||isNaN(h)?6:h,d=d==null||isNaN(d)?3:d,!s)throw new Error("<geojson> is required");if(typeof h!="number")throw new Error("<precision> must be a number");if(typeof d!="number")throw new Error("<coordinates> must be a number");(_===!1||_===void 0)&&(s=JSON.parse(JSON.stringify(s)));var w=Math.pow(10,h);return Wa(s,function(b){eo(b,w,d)}),s}function eo(s,a,h){s.length>h&&s.splice(h,s.length);for(var d=0;d<s.length;d++)s[d]=Math.round(s[d]*a)/a;return s}var ra=lr;function ko(s,a,h){if(h===void 0&&(h={}),h.final===!0)return Po(s,a);var d=Ii(s),_=Ii(a),w=Ri(d[0]),b=Ri(_[0]),S=Ri(d[1]),T=Ri(_[1]),O=Math.sin(b-w)*Math.cos(T),X=Math.cos(S)*Math.sin(T)-Math.sin(S)*Math.cos(T)*Math.cos(b-w);return gi(Math.atan2(O,X))}function Po(s,a){var h=ko(a,s);return h=(h+180)%360,h}function Ao(s,a,h,d){d===void 0&&(d={});var _=Ii(s),w=Ri(_[0]),b=Ri(_[1]),S=Ri(h),T=bs(a,d.units),O=Math.asin(Math.sin(b)*Math.cos(T)+Math.cos(b)*Math.sin(T)*Math.cos(S)),X=w+Math.atan2(Math.sin(S)*Math.sin(T)*Math.cos(b),Math.cos(T)-Math.sin(b)*Math.sin(O)),W=gi(X),yt=gi(O);return Cs([W,yt],d.properties)}function sa(s,a,h){h===void 0&&(h={});var d=Cs([1/0,1/0],{dist:1/0}),_=0;return $i(s,function(w){for(var b=or(w),S=0;S<b.length-1;S++){var T=Cs(b[S]);T.properties.dist=Vi(a,T,h);var O=Cs(b[S+1]);O.properties.dist=Vi(a,O,h);var X=Vi(T,O,h),W=Math.max(T.properties.dist,O.properties.dist),yt=ko(T,O),Lt=Ao(a,W,yt+90,h),jt=Ao(a,W,yt-90,h),ie=ar(qr([Lt.geometry.coordinates,jt.geometry.coordinates]),qr([T.geometry.coordinates,O.geometry.coordinates])),de=null;ie.features.length>0&&(de=ie.features[0],de.properties.dist=Vi(a,de,h),de.properties.location=_+Vi(T,de,h)),T.properties.dist<d.properties.dist&&(d=T,d.properties.index=S,d.properties.location=_),O.properties.dist<d.properties.dist&&(d=O,d.properties.index=S+1,d.properties.location=_+X),de&&de.properties.dist<d.properties.dist&&(d=de,d.properties.index=S),_+=X}}),d}var no=sa;function oa(s,a){if(!s)throw new Error("line is required");if(!a)throw new Error("splitter is required");var h=Va(s),d=Va(a);if(h!=="LineString")throw new Error("line must be LineString");if(d==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(d==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var _=ra(a,{precision:7});switch(d){case"Point":return la(s,_);case"MultiPoint":return aa(s,_);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return aa(s,ar(s,_))}}function aa(s,a){var h=[],d=(0,Za.default)();return $i(a,function(_){if(h.forEach(function(S,T){S.id=T}),!h.length)h=la(s,_).features,h.forEach(function(S){S.bbox||(S.bbox=Wl(So(S)))}),d.load(pi(h));else{var w=d.search(_);if(w.features.length){var b=Oi(_,w);h=h.filter(function(S){return S.id!==b.id}),d.remove(b),ni(la(b,_),function(S){h.push(S),d.insert(S)})}}}),pi(h)}function la(s,a){var h=[],d=or(s)[0],_=or(s)[s.geometry.coordinates.length-1];if(ur(d,Ii(a))||ur(_,Ii(a)))return pi([s]);var w=(0,Za.default)(),b=bo(s);w.load(b);var S=w.search(a);if(!S.features.length)return pi([s]);var T=Oi(a,S),O=[d],X=Kr(b,function(W,yt,Lt){var jt=or(yt)[1],ie=Ii(a);return Lt===T.id?(W.push(ie),h.push(qr(W)),ur(ie,jt)?[ie]:[ie,jt]):(W.push(jt),W)},O);return X.length>1&&h.push(qr(X)),pi(h)}function Oi(s,a){if(!a.features.length)throw new Error("lines must contain features");if(a.features.length===1)return a.features[0];var h,d=1/0;return ni(a,function(_){var w=no(_,s),b=w.properties.dist;b<d&&(h=_,d=b)}),h}function ur(s,a){return s[0]===a[0]&&s[1]===a[1]}var pl=oa;function io(s,a,h){if(h===void 0&&(h={}),!s)throw new Error("point is required");if(!a)throw new Error("polygon is required");var d=Ii(s),_=na(a),w=_.type,b=a.bbox,S=_.coordinates;if(b&&Ka(d,b)===!1)return!1;w==="Polygon"&&(S=[S]);for(var T=!1,O=0;O<S.length&&!T;O++)if(qa(d,S[O][0],h.ignoreBoundary)){for(var X=!1,W=1;W<S[O].length&&!X;)qa(d,S[O][W],!h.ignoreBoundary)&&(X=!0),W++;X||(T=!0)}return T}function qa(s,a,h){var d=!1;a[0][0]===a[a.length-1][0]&&a[0][1]===a[a.length-1][1]&&(a=a.slice(0,a.length-1));for(var _=0,w=a.length-1;_<a.length;w=_++){var b=a[_][0],S=a[_][1],T=a[w][0],O=a[w][1],X=s[1]*(b-T)+S*(T-s[0])+O*(s[0]-b)===0&&(b-s[0])*(T-s[0])<=0&&(S-s[1])*(O-s[1])<=0;if(X)return!h;var W=S>s[1]!=O>s[1]&&s[0]<(T-b)*(s[1]-S)/(O-S)+b;W&&(d=!d)}return d}function Ka(s,a){return a[0]<=s[0]&&a[1]<=s[1]&&a[2]>=s[0]&&a[3]>=s[1]}function Ja(s,a,h){h===void 0&&(h={});for(var d=Ii(s),_=or(a),w=0;w<_.length-1;w++){var b=!1;if(h.ignoreEndVertices&&(w===0&&(b="start"),w===_.length-2&&(b="end"),w===0&&w+1===_.length-1&&(b="both")),hr(_[w],_[w+1],d,b,typeof h.epsilon>"u"?null:h.epsilon))return!0}return!1}function hr(s,a,h,d,_){var w=h[0],b=h[1],S=s[0],T=s[1],O=a[0],X=a[1],W=h[0]-S,yt=h[1]-T,Lt=O-S,jt=X-T,ie=W*jt-yt*Lt;if(_!==null){if(Math.abs(ie)>_)return!1}else if(ie!==0)return!1;if(d){if(d==="start")return Math.abs(Lt)>=Math.abs(jt)?Lt>0?S<w&&w<=O:O<=w&&w<S:jt>0?T<b&&b<=X:X<=b&&b<T;if(d==="end")return Math.abs(Lt)>=Math.abs(jt)?Lt>0?S<=w&&w<O:O<w&&w<=S:jt>0?T<=b&&b<X:X<b&&b<=T;if(d==="both")return Math.abs(Lt)>=Math.abs(jt)?Lt>0?S<w&&w<O:O<w&&w<S:jt>0?T<b&&b<X:X<b&&b<T}else return Math.abs(Lt)>=Math.abs(jt)?Lt>0?S<=w&&w<=O:O<=w&&w<=S:jt>0?T<=b&&b<=X:X<=b&&b<=T;return!1}var Jr=Ja;function ro(s,a){var h=na(s),d=na(a),_=h.type,w=d.type,b=h.coordinates,S=d.coordinates;switch(_){case"Point":switch(w){case"Point":return ks(b,S);default:throw new Error("feature2 "+w+" geometry not supported")}case"MultiPoint":switch(w){case"Point":return so(h,d);case"MultiPoint":return Bo(h,d);default:throw new Error("feature2 "+w+" geometry not supported")}case"LineString":switch(w){case"Point":return Jr(d,h,{ignoreEndVertices:!0});case"LineString":return Xr(h,d);case"MultiPoint":return ua(h,d);default:throw new Error("feature2 "+w+" geometry not supported")}case"Polygon":switch(w){case"Point":return io(d,h,{ignoreBoundary:!0});case"LineString":return oo(h,d);case"Polygon":return Yr(h,d);case"MultiPoint":return gl(h,d);default:throw new Error("feature2 "+w+" geometry not supported")}default:throw new Error("feature1 "+_+" geometry not supported")}}function so(s,a){var h,d=!1;for(h=0;h<s.coordinates.length;h++)if(ks(s.coordinates[h],a.coordinates)){d=!0;break}return d}function Bo(s,a){for(var h=0,d=a.coordinates;h<d.length;h++){for(var _=d[h],w=!1,b=0,S=s.coordinates;b<S.length;b++){var T=S[b];if(ks(_,T)){w=!0;break}}if(!w)return!1}return!0}function ua(s,a){for(var h=!1,d=0,_=a.coordinates;d<_.length;d++){var w=_[d];if(Jr(w,s,{ignoreEndVertices:!0})&&(h=!0),!Jr(w,s))return!1}return!!h}function gl(s,a){for(var h=0,d=a.coordinates;h<d.length;h++){var _=d[h];if(!io(_,s,{ignoreBoundary:!0}))return!1}return!0}function Xr(s,a){for(var h=!1,d=0,_=a.coordinates;d<_.length;d++){var w=_[d];if(Jr({type:"Point",coordinates:w},s,{ignoreEndVertices:!0})&&(h=!0),!Jr({type:"Point",coordinates:w},s,{ignoreEndVertices:!1}))return!1}return h}function oo(s,a){var h=!1,d=0,_=So(s),w=So(a);if(!ha(_,w))return!1;for(d;d<a.coordinates.length-1;d++){var b=ml(a.coordinates[d],a.coordinates[d+1]);if(io({type:"Point",coordinates:b},s,{ignoreBoundary:!0})){h=!0;break}}return h}function Yr(s,a){if(s.type==="Feature"&&s.geometry===null||a.type==="Feature"&&a.geometry===null)return!1;var h=So(s),d=So(a);if(!ha(h,d))return!1;for(var _=na(a).coordinates,w=0,b=_;w<b.length;w++)for(var S=b[w],T=0,O=S;T<O.length;T++){var X=O[T];if(!io(X,s))return!1}return!0}function ha(s,a){return!(s[0]>a[0]||s[2]<a[2]||s[1]>a[1]||s[3]<a[3])}function ks(s,a){return s[0]===a[0]&&s[1]===a[1]}function ml(s,a){return[(s[0]+a[0])/2,(s[1]+a[1])/2]}var cr=E(rr()),ca=s=>()=>s,To=s=>{let a=s?(h,d)=>d.minus(h).abs().isLessThanOrEqualTo(s):ca(!1);return(h,d)=>a(h,d)?0:h.comparedTo(d)};function ao(s){let a=s?(h,d,_,w,b)=>h.exponentiatedBy(2).isLessThanOrEqualTo(w.minus(d).exponentiatedBy(2).plus(b.minus(_).exponentiatedBy(2)).times(s)):ca(!1);return(h,d,_)=>{let w=h.x,b=h.y,S=_.x,T=_.y,O=b.minus(T).times(d.x.minus(S)).minus(w.minus(S).times(d.y.minus(T)));return a(O,w,b,S,T)?0:O.comparedTo(0)}}var _l=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,Ci=Math.ceil,Pn=Math.floor,Fn="[BigNumber Error] ",Xa=Fn+"Number primitive has more than 15 significant digits: ",Zi=1e14,Ae=14,fa=9007199254740991,Ro=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],fr=1e7,Ge=1e9;function da(s){var a,h,d,_=J.prototype={constructor:J,toString:null,valueOf:null},w=new J(1),b=20,S=4,T=-7,O=21,X=-1e7,W=1e7,yt=!1,Lt=1,jt=0,ie={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},de="0123456789abcdefghijklmnopqrstuvwxyz",Ke=!0;function J(R,F){var U,j,$,H,nt,it,st,dt,gt=this;if(!(gt instanceof J))return new J(R,F);if(F==null){if(R&&R._isBigNumber===!0){gt.s=R.s,!R.c||R.e>W?gt.c=gt.e=null:R.e<X?gt.c=[gt.e=0]:(gt.e=R.e,gt.c=R.c.slice());return}if((it=typeof R=="number")&&R*0==0){if(gt.s=1/R<0?(R=-R,-1):1,R===~~R){for(H=0,nt=R;nt>=10;nt/=10,H++);H>W?gt.c=gt.e=null:(gt.e=H,gt.c=[R]);return}dt=String(R)}else{if(!_l.test(dt=String(R)))return d(gt,dt,it);gt.s=dt.charCodeAt(0)==45?(dt=dt.slice(1),-1):1}(H=dt.indexOf("."))>-1&&(dt=dt.replace(".","")),(nt=dt.search(/e/i))>0?(H<0&&(H=nt),H+=+dt.slice(nt+1),dt=dt.substring(0,nt)):H<0&&(H=dt.length)}else{if(n(F,2,de.length,"Base"),F==10&&Ke)return gt=new J(R),ut(gt,b+gt.e+1,S);if(dt=String(R),it=typeof R=="number"){if(R*0!=0)return d(gt,dt,it,F);if(gt.s=1/R<0?(dt=dt.slice(1),-1):1,J.DEBUG&&dt.replace(/^0\.0*|\./,"").length>15)throw Error(Xa+R)}else gt.s=dt.charCodeAt(0)===45?(dt=dt.slice(1),-1):1;for(U=de.slice(0,F),H=nt=0,st=dt.length;nt<st;nt++)if(U.indexOf(j=dt.charAt(nt))<0){if(j=="."){if(nt>H){H=st;continue}}else if(!$&&(dt==dt.toUpperCase()&&(dt=dt.toLowerCase())||dt==dt.toLowerCase()&&(dt=dt.toUpperCase()))){$=!0,nt=-1,H=0;continue}return d(gt,String(R),it,F)}it=!1,dt=h(dt,F,10,gt.s),(H=dt.indexOf("."))>-1?dt=dt.replace(".",""):H=dt.length}for(nt=0;dt.charCodeAt(nt)===48;nt++);for(st=dt.length;dt.charCodeAt(--st)===48;);if(dt=dt.slice(nt,++st)){if(st-=nt,it&&J.DEBUG&&st>15&&(R>fa||R!==Pn(R)))throw Error(Xa+gt.s*R);if((H=H-nt-1)>W)gt.c=gt.e=null;else if(H<X)gt.c=[gt.e=0];else{if(gt.e=H,gt.c=[],nt=(H+1)%Ae,H<0&&(nt+=Ae),nt<st){for(nt&&gt.c.push(+dt.slice(0,nt)),st-=Ae;nt<st;)gt.c.push(+dt.slice(nt,nt+=Ae));nt=Ae-(dt=dt.slice(nt)).length}else nt-=st;for(;nt--;dt+="0");gt.c.push(+dt)}}else gt.c=[gt.e=0]}J.clone=da,J.ROUND_UP=0,J.ROUND_DOWN=1,J.ROUND_CEIL=2,J.ROUND_FLOOR=3,J.ROUND_HALF_UP=4,J.ROUND_HALF_DOWN=5,J.ROUND_HALF_EVEN=6,J.ROUND_HALF_CEIL=7,J.ROUND_HALF_FLOOR=8,J.EUCLID=9,J.config=J.set=function(R){var F,U;if(R!=null)if(typeof R=="object"){if(R.hasOwnProperty(F="DECIMAL_PLACES")&&(U=R[F],n(U,0,Ge,F),b=U),R.hasOwnProperty(F="ROUNDING_MODE")&&(U=R[F],n(U,0,8,F),S=U),R.hasOwnProperty(F="EXPONENTIAL_AT")&&(U=R[F],U&&U.pop?(n(U[0],-Ge,0,F),n(U[1],0,Ge,F),T=U[0],O=U[1]):(n(U,-Ge,Ge,F),T=-(O=U<0?-U:U))),R.hasOwnProperty(F="RANGE"))if(U=R[F],U&&U.pop)n(U[0],-Ge,-1,F),n(U[1],1,Ge,F),X=U[0],W=U[1];else if(n(U,-Ge,Ge,F),U)X=-(W=U<0?-U:U);else throw Error(Fn+F+" cannot be zero: "+U);if(R.hasOwnProperty(F="CRYPTO"))if(U=R[F],U===!!U)if(U)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))yt=U;else throw yt=!U,Error(Fn+"crypto unavailable");else yt=U;else throw Error(Fn+F+" not true or false: "+U);if(R.hasOwnProperty(F="MODULO_MODE")&&(U=R[F],n(U,0,9,F),Lt=U),R.hasOwnProperty(F="POW_PRECISION")&&(U=R[F],n(U,0,Ge,F),jt=U),R.hasOwnProperty(F="FORMAT"))if(U=R[F],typeof U=="object")ie=U;else throw Error(Fn+F+" not an object: "+U);if(R.hasOwnProperty(F="ALPHABET"))if(U=R[F],typeof U=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(U))Ke=U.slice(0,10)=="0123456789",de=U;else throw Error(Fn+F+" invalid: "+U)}else throw Error(Fn+"Object expected: "+R);return{DECIMAL_PLACES:b,ROUNDING_MODE:S,EXPONENTIAL_AT:[T,O],RANGE:[X,W],CRYPTO:yt,MODULO_MODE:Lt,POW_PRECISION:jt,FORMAT:ie,ALPHABET:de}},J.isBigNumber=function(R){if(!R||R._isBigNumber!==!0)return!1;if(!J.DEBUG)return!0;var F,U,j=R.c,$=R.e,H=R.s;t:if({}.toString.call(j)=="[object Array]"){if((H===1||H===-1)&&$>=-Ge&&$<=Ge&&$===Pn($)){if(j[0]===0){if($===0&&j.length===1)return!0;break t}if(F=($+1)%Ae,F<1&&(F+=Ae),String(j[0]).length==F){for(F=0;F<j.length;F++)if(U=j[F],U<0||U>=Zi||U!==Pn(U))break t;if(U!==0)return!0}}}else if(j===null&&$===null&&(H===null||H===1||H===-1))return!0;throw Error(Fn+"Invalid BigNumber: "+R)},J.maximum=J.max=function(){return ot(arguments,-1)},J.minimum=J.min=function(){return ot(arguments,1)},J.random=(function(){var R=9007199254740992,F=Math.random()*R&2097151?function(){return Pn(Math.random()*R)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(U){var j,$,H,nt,it,st=0,dt=[],gt=new J(w);if(U==null?U=b:n(U,0,Ge),nt=Ci(U/Ae),yt)if(crypto.getRandomValues){for(j=crypto.getRandomValues(new Uint32Array(nt*=2));st<nt;)it=j[st]*131072+(j[st+1]>>>11),it>=9e15?($=crypto.getRandomValues(new Uint32Array(2)),j[st]=$[0],j[st+1]=$[1]):(dt.push(it%1e14),st+=2);st=nt/2}else if(crypto.randomBytes){for(j=crypto.randomBytes(nt*=7);st<nt;)it=(j[st]&31)*281474976710656+j[st+1]*1099511627776+j[st+2]*4294967296+j[st+3]*16777216+(j[st+4]<<16)+(j[st+5]<<8)+j[st+6],it>=9e15?crypto.randomBytes(7).copy(j,st):(dt.push(it%1e14),st+=7);st=nt/7}else throw yt=!1,Error(Fn+"crypto unavailable");if(!yt)for(;st<nt;)it=F(),it<9e15&&(dt[st++]=it%1e14);for(nt=dt[--st],U%=Ae,nt&&U&&(it=Ro[Ae-U],dt[st]=Pn(nt/it)*it);dt[st]===0;dt.pop(),st--);if(st<0)dt=[H=0];else{for(H=-1;dt[0]===0;dt.splice(0,1),H-=Ae);for(st=1,it=dt[0];it>=10;it/=10,st++);st<Ae&&(H-=Ae-st)}return gt.e=H,gt.c=dt,gt}})(),J.sum=function(){for(var R=1,F=arguments,U=new J(F[0]);R<F.length;)U=U.plus(F[R++]);return U},h=(function(){var R="0123456789";function F(U,j,$,H){for(var nt,it=[0],st,dt=0,gt=U.length;dt<gt;){for(st=it.length;st--;it[st]*=j);for(it[0]+=H.indexOf(U.charAt(dt++)),nt=0;nt<it.length;nt++)it[nt]>$-1&&(it[nt+1]==null&&(it[nt+1]=0),it[nt+1]+=it[nt]/$|0,it[nt]%=$)}return it.reverse()}return function(U,j,$,H,nt){var it,st,dt,gt,Nt,oe,me,Ee,Je=U.indexOf("."),rn=b,Ze=S;for(Je>=0&&(gt=jt,jt=0,U=U.replace(".",""),Ee=new J(j),oe=Ee.pow(U.length-Je),jt=gt,Ee.c=F(x(Gn(oe.c),oe.e,"0"),10,$,R),Ee.e=Ee.c.length),me=F(U,j,$,nt?(it=de,R):(it=R,de)),dt=gt=me.length;me[--gt]==0;me.pop());if(!me[0])return it.charAt(0);if(Je<0?--dt:(oe.c=me,oe.e=dt,oe.s=H,oe=a(oe,Ee,rn,Ze,$),me=oe.c,Nt=oe.r,dt=oe.e),st=dt+rn+1,Je=me[st],gt=$/2,Nt=Nt||st<0||me[st+1]!=null,Nt=Ze<4?(Je!=null||Nt)&&(Ze==0||Ze==(oe.s<0?3:2)):Je>gt||Je==gt&&(Ze==4||Nt||Ze==6&&me[st-1]&1||Ze==(oe.s<0?8:7)),st<1||!me[0])U=Nt?x(it.charAt(1),-rn,it.charAt(0)):it.charAt(0);else{if(me.length=st,Nt)for(--$;++me[--st]>$;)me[st]=0,st||(++dt,me=[1].concat(me));for(gt=me.length;!me[--gt];);for(Je=0,U="";Je<=gt;U+=it.charAt(me[Je++]));U=x(U,dt,it.charAt(0))}return U}})(),a=(function(){function R(j,$,H){var nt,it,st,dt,gt=0,Nt=j.length,oe=$%fr,me=$/fr|0;for(j=j.slice();Nt--;)st=j[Nt]%fr,dt=j[Nt]/fr|0,nt=me*st+dt*oe,it=oe*st+nt%fr*fr+gt,gt=(it/H|0)+(nt/fr|0)+me*dt,j[Nt]=it%H;return gt&&(j=[gt].concat(j)),j}function F(j,$,H,nt){var it,st;if(H!=nt)st=H>nt?1:-1;else for(it=st=0;it<H;it++)if(j[it]!=$[it]){st=j[it]>$[it]?1:-1;break}return st}function U(j,$,H,nt){for(var it=0;H--;)j[H]-=it,it=j[H]<$[H]?1:0,j[H]=it*nt+j[H]-$[H];for(;!j[0]&&j.length>1;j.splice(0,1));}return function(j,$,H,nt,it){var st,dt,gt,Nt,oe,me,Ee,Je,rn,Ze,an,Kn,pn,va,Qa,yr,co,Di=j.s==$.s?1:-1,Cn=j.c,Ue=$.c;if(!Cn||!Cn[0]||!Ue||!Ue[0])return new J(!j.s||!$.s||(Cn?Ue&&Cn[0]==Ue[0]:!Ue)?NaN:Cn&&Cn[0]==0||!Ue?Di*0:Di/0);for(Je=new J(Di),rn=Je.c=[],dt=j.e-$.e,Di=H+dt+1,it||(it=Zi,dt=qn(j.e/Ae)-qn($.e/Ae),Di=Di/Ae|0),gt=0;Ue[gt]==(Cn[gt]||0);gt++);if(Ue[gt]>(Cn[gt]||0)&&dt--,Di<0)rn.push(1),Nt=!0;else{for(va=Cn.length,yr=Ue.length,gt=0,Di+=2,oe=Pn(it/(Ue[0]+1)),oe>1&&(Ue=R(Ue,oe,it),Cn=R(Cn,oe,it),yr=Ue.length,va=Cn.length),pn=yr,Ze=Cn.slice(0,yr),an=Ze.length;an<yr;Ze[an++]=0);co=Ue.slice(),co=[0].concat(co),Qa=Ue[0],Ue[1]>=it/2&&Qa++;do{if(oe=0,st=F(Ue,Ze,yr,an),st<0){if(Kn=Ze[0],yr!=an&&(Kn=Kn*it+(Ze[1]||0)),oe=Pn(Kn/Qa),oe>1)for(oe>=it&&(oe=it-1),me=R(Ue,oe,it),Ee=me.length,an=Ze.length;F(me,Ze,Ee,an)==1;)oe--,U(me,yr<Ee?co:Ue,Ee,it),Ee=me.length,st=1;else oe==0&&(st=oe=1),me=Ue.slice(),Ee=me.length;if(Ee<an&&(me=[0].concat(me)),U(Ze,me,an,it),an=Ze.length,st==-1)for(;F(Ue,Ze,yr,an)<1;)oe++,U(Ze,yr<an?co:Ue,an,it),an=Ze.length}else st===0&&(oe++,Ze=[0]);rn[gt++]=oe,Ze[0]?Ze[an++]=Cn[pn]||0:(Ze=[Cn[pn]],an=1)}while((pn++<va||Ze[0]!=null)&&Di--);Nt=Ze[0]!=null,rn[0]||rn.splice(0,1)}if(it==Zi){for(gt=1,Di=rn[0];Di>=10;Di/=10,gt++);ut(Je,H+(Je.e=gt+dt*Ae-1)+1,nt,Nt)}else Je.e=dt,Je.r=+Nt;return Je}})();function et(R,F,U,j){var $,H,nt,it,st;if(U==null?U=S:n(U,0,8),!R.c)return R.toString();if($=R.c[0],nt=R.e,F==null)st=Gn(R.c),st=j==1||j==2&&(nt<=T||nt>=O)?p(st,nt):x(st,nt,"0");else if(R=ut(new J(R),F,U),H=R.e,st=Gn(R.c),it=st.length,j==1||j==2&&(F<=H||H<=T)){for(;it<F;st+="0",it++);st=p(st,H)}else if(F-=nt,st=x(st,H,"0"),H+1>it){if(--F>0)for(st+=".";F--;st+="0");}else if(F+=H-it,F>0)for(H+1==it&&(st+=".");F--;st+="0");return R.s<0&&$?"-"+st:st}function ot(R,F){for(var U,j,$=1,H=new J(R[0]);$<R.length;$++)j=new J(R[$]),(!j.s||(U=Qr(H,j))===F||U===0&&H.s===F)&&(H=j);return H}function wt(R,F,U){for(var j=1,$=F.length;!F[--$];F.pop());for($=F[0];$>=10;$/=10,j++);return(U=j+U*Ae-1)>W?R.c=R.e=null:U<X?R.c=[R.e=0]:(R.e=U,R.c=F),R}d=(function(){var R=/^(-?)0([xbo])(?=\w[\w.]*$)/i,F=/^([^.]+)\.$/,U=/^\.([^.]+)$/,j=/^-?(Infinity|NaN)$/,$=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(H,nt,it,st){var dt,gt=it?nt:nt.replace($,"");if(j.test(gt))H.s=isNaN(gt)?null:gt<0?-1:1;else{if(!it&&(gt=gt.replace(R,function(Nt,oe,me){return dt=(me=me.toLowerCase())=="x"?16:me=="b"?2:8,!st||st==dt?oe:Nt}),st&&(dt=st,gt=gt.replace(F,"$1").replace(U,"0.$1")),nt!=gt))return new J(gt,dt);if(J.DEBUG)throw Error(Fn+"Not a"+(st?" base "+st:"")+" number: "+nt);H.s=null}H.c=H.e=null}})();function ut(R,F,U,j){var $,H,nt,it,st,dt,gt,Nt=R.c,oe=Ro;if(Nt){t:{for($=1,it=Nt[0];it>=10;it/=10,$++);if(H=F-$,H<0)H+=Ae,nt=F,st=Nt[dt=0],gt=Pn(st/oe[$-nt-1]%10);else if(dt=Ci((H+1)/Ae),dt>=Nt.length)if(j){for(;Nt.length<=dt;Nt.push(0));st=gt=0,$=1,H%=Ae,nt=H-Ae+1}else break t;else{for(st=it=Nt[dt],$=1;it>=10;it/=10,$++);H%=Ae,nt=H-Ae+$,gt=nt<0?0:Pn(st/oe[$-nt-1]%10)}if(j=j||F<0||Nt[dt+1]!=null||(nt<0?st:st%oe[$-nt-1]),j=U<4?(gt||j)&&(U==0||U==(R.s<0?3:2)):gt>5||gt==5&&(U==4||j||U==6&&(H>0?nt>0?st/oe[$-nt]:0:Nt[dt-1])%10&1||U==(R.s<0?8:7)),F<1||!Nt[0])return Nt.length=0,j?(F-=R.e+1,Nt[0]=oe[(Ae-F%Ae)%Ae],R.e=-F||0):Nt[0]=R.e=0,R;if(H==0?(Nt.length=dt,it=1,dt--):(Nt.length=dt+1,it=oe[Ae-H],Nt[dt]=nt>0?Pn(st/oe[$-nt]%oe[nt])*it:0),j)for(;;)if(dt==0){for(H=1,nt=Nt[0];nt>=10;nt/=10,H++);for(nt=Nt[0]+=it,it=1;nt>=10;nt/=10,it++);H!=it&&(R.e++,Nt[0]==Zi&&(Nt[0]=1));break}else{if(Nt[dt]+=it,Nt[dt]!=Zi)break;Nt[dt--]=0,it=1}for(H=Nt.length;Nt[--H]===0;Nt.pop());}R.e>W?R.c=R.e=null:R.e<X&&(R.c=[R.e=0])}return R}function Et(R){var F,U=R.e;return U===null?R.toString():(F=Gn(R.c),F=U<=T||U>=O?p(F,U):x(F,U,"0"),R.s<0?"-"+F:F)}return _.absoluteValue=_.abs=function(){var R=new J(this);return R.s<0&&(R.s=1),R},_.comparedTo=function(R,F){return Qr(this,new J(R,F))},_.decimalPlaces=_.dp=function(R,F){var U,j,$,H=this;if(R!=null)return n(R,0,Ge),F==null?F=S:n(F,0,8),ut(new J(H),R+H.e+1,F);if(!(U=H.c))return null;if(j=(($=U.length-1)-qn(this.e/Ae))*Ae,$=U[$])for(;$%10==0;$/=10,j--);return j<0&&(j=0),j},_.dividedBy=_.div=function(R,F){return a(this,new J(R,F),b,S)},_.dividedToIntegerBy=_.idiv=function(R,F){return a(this,new J(R,F),0,1)},_.exponentiatedBy=_.pow=function(R,F){var U,j,$,H,nt,it,st,dt,gt,Nt=this;if(R=new J(R),R.c&&!R.isInteger())throw Error(Fn+"Exponent not an integer: "+Et(R));if(F!=null&&(F=new J(F)),it=R.e>14,!Nt.c||!Nt.c[0]||Nt.c[0]==1&&!Nt.e&&Nt.c.length==1||!R.c||!R.c[0])return gt=new J(Math.pow(+Et(Nt),it?R.s*(2-l(R)):+Et(R))),F?gt.mod(F):gt;if(st=R.s<0,F){if(F.c?!F.c[0]:!F.s)return new J(NaN);j=!st&&Nt.isInteger()&&F.isInteger(),j&&(Nt=Nt.mod(F))}else{if(R.e>9&&(Nt.e>0||Nt.e<-1||(Nt.e==0?Nt.c[0]>1||it&&Nt.c[1]>=24e7:Nt.c[0]<8e13||it&&Nt.c[0]<=9999975e7)))return H=Nt.s<0&&l(R)?-0:0,Nt.e>-1&&(H=1/H),new J(st?1/H:H);jt&&(H=Ci(jt/Ae+2))}for(it?(U=new J(.5),st&&(R.s=1),dt=l(R)):($=Math.abs(+Et(R)),dt=$%2),gt=new J(w);;){if(dt){if(gt=gt.times(Nt),!gt.c)break;H?gt.c.length>H&&(gt.c.length=H):j&&(gt=gt.mod(F))}if($){if($=Pn($/2),$===0)break;dt=$%2}else if(R=R.times(U),ut(R,R.e+1,1),R.e>14)dt=l(R);else{if($=+Et(R),$===0)break;dt=$%2}Nt=Nt.times(Nt),H?Nt.c&&Nt.c.length>H&&(Nt.c.length=H):j&&(Nt=Nt.mod(F))}return j?gt:(st&&(gt=w.div(gt)),F?gt.mod(F):H?ut(gt,jt,S,nt):gt)},_.integerValue=function(R){var F=new J(this);return R==null?R=S:n(R,0,8),ut(F,F.e+1,R)},_.isEqualTo=_.eq=function(R,F){return Qr(this,new J(R,F))===0},_.isFinite=function(){return!!this.c},_.isGreaterThan=_.gt=function(R,F){return Qr(this,new J(R,F))>0},_.isGreaterThanOrEqualTo=_.gte=function(R,F){return(F=Qr(this,new J(R,F)))===1||F===0},_.isInteger=function(){return!!this.c&&qn(this.e/Ae)>this.c.length-2},_.isLessThan=_.lt=function(R,F){return Qr(this,new J(R,F))<0},_.isLessThanOrEqualTo=_.lte=function(R,F){return(F=Qr(this,new J(R,F)))===-1||F===0},_.isNaN=function(){return!this.s},_.isNegative=function(){return this.s<0},_.isPositive=function(){return this.s>0},_.isZero=function(){return!!this.c&&this.c[0]==0},_.minus=function(R,F){var U,j,$,H,nt=this,it=nt.s;if(R=new J(R,F),F=R.s,!it||!F)return new J(NaN);if(it!=F)return R.s=-F,nt.plus(R);var st=nt.e/Ae,dt=R.e/Ae,gt=nt.c,Nt=R.c;if(!st||!dt){if(!gt||!Nt)return gt?(R.s=-F,R):new J(Nt?nt:NaN);if(!gt[0]||!Nt[0])return Nt[0]?(R.s=-F,R):new J(gt[0]?nt:S==3?-0:0)}if(st=qn(st),dt=qn(dt),gt=gt.slice(),it=st-dt){for((H=it<0)?(it=-it,$=gt):(dt=st,$=Nt),$.reverse(),F=it;F--;$.push(0));$.reverse()}else for(j=(H=(it=gt.length)<(F=Nt.length))?it:F,it=F=0;F<j;F++)if(gt[F]!=Nt[F]){H=gt[F]<Nt[F];break}if(H&&($=gt,gt=Nt,Nt=$,R.s=-R.s),F=(j=Nt.length)-(U=gt.length),F>0)for(;F--;gt[U++]=0);for(F=Zi-1;j>it;){if(gt[--j]<Nt[j]){for(U=j;U&&!gt[--U];gt[U]=F);--gt[U],gt[j]+=Zi}gt[j]-=Nt[j]}for(;gt[0]==0;gt.splice(0,1),--dt);return gt[0]?wt(R,gt,dt):(R.s=S==3?-1:1,R.c=[R.e=0],R)},_.modulo=_.mod=function(R,F){var U,j,$=this;return R=new J(R,F),!$.c||!R.s||R.c&&!R.c[0]?new J(NaN):!R.c||$.c&&!$.c[0]?new J($):(Lt==9?(j=R.s,R.s=1,U=a($,R,0,3),R.s=j,U.s*=j):U=a($,R,0,Lt),R=$.minus(U.times(R)),!R.c[0]&&Lt==1&&(R.s=$.s),R)},_.multipliedBy=_.times=function(R,F){var U,j,$,H,nt,it,st,dt,gt,Nt,oe,me,Ee,Je,rn,Ze=this,an=Ze.c,Kn=(R=new J(R,F)).c;if(!an||!Kn||!an[0]||!Kn[0])return!Ze.s||!R.s||an&&!an[0]&&!Kn||Kn&&!Kn[0]&&!an?R.c=R.e=R.s=null:(R.s*=Ze.s,!an||!Kn?R.c=R.e=null:(R.c=[0],R.e=0)),R;for(j=qn(Ze.e/Ae)+qn(R.e/Ae),R.s*=Ze.s,st=an.length,Nt=Kn.length,st<Nt&&(Ee=an,an=Kn,Kn=Ee,$=st,st=Nt,Nt=$),$=st+Nt,Ee=[];$--;Ee.push(0));for(Je=Zi,rn=fr,$=Nt;--$>=0;){for(U=0,oe=Kn[$]%rn,me=Kn[$]/rn|0,nt=st,H=$+nt;H>$;)dt=an[--nt]%rn,gt=an[nt]/rn|0,it=me*dt+gt*oe,dt=oe*dt+it%rn*rn+Ee[H]+U,U=(dt/Je|0)+(it/rn|0)+me*gt,Ee[H--]=dt%Je;Ee[H]=U}return U?++j:Ee.splice(0,1),wt(R,Ee,j)},_.negated=function(){var R=new J(this);return R.s=-R.s||null,R},_.plus=function(R,F){var U,j=this,$=j.s;if(R=new J(R,F),F=R.s,!$||!F)return new J(NaN);if($!=F)return R.s=-F,j.minus(R);var H=j.e/Ae,nt=R.e/Ae,it=j.c,st=R.c;if(!H||!nt){if(!it||!st)return new J($/0);if(!it[0]||!st[0])return st[0]?R:new J(it[0]?j:$*0)}if(H=qn(H),nt=qn(nt),it=it.slice(),$=H-nt){for($>0?(nt=H,U=st):($=-$,U=it),U.reverse();$--;U.push(0));U.reverse()}for($=it.length,F=st.length,$-F<0&&(U=st,st=it,it=U,F=$),$=0;F;)$=(it[--F]=it[F]+st[F]+$)/Zi|0,it[F]=Zi===it[F]?0:it[F]%Zi;return $&&(it=[$].concat(it),++nt),wt(R,it,nt)},_.precision=_.sd=function(R,F){var U,j,$,H=this;if(R!=null&&R!==!!R)return n(R,1,Ge),F==null?F=S:n(F,0,8),ut(new J(H),R,F);if(!(U=H.c))return null;if($=U.length-1,j=$*Ae+1,$=U[$]){for(;$%10==0;$/=10,j--);for($=U[0];$>=10;$/=10,j++);}return R&&H.e+1>j&&(j=H.e+1),j},_.shiftedBy=function(R){return n(R,-fa,fa),this.times("1e"+R)},_.squareRoot=_.sqrt=function(){var R,F,U,j,$,H=this,nt=H.c,it=H.s,st=H.e,dt=b+4,gt=new J("0.5");if(it!==1||!nt||!nt[0])return new J(!it||it<0&&(!nt||nt[0])?NaN:nt?H:1/0);if(it=Math.sqrt(+Et(H)),it==0||it==1/0?(F=Gn(nt),(F.length+st)%2==0&&(F+="0"),it=Math.sqrt(+F),st=qn((st+1)/2)-(st<0||st%2),it==1/0?F="5e"+st:(F=it.toExponential(),F=F.slice(0,F.indexOf("e")+1)+st),U=new J(F)):U=new J(it+""),U.c[0]){for(st=U.e,it=st+dt,it<3&&(it=0);;)if($=U,U=gt.times($.plus(a(H,$,dt,1))),Gn($.c).slice(0,it)===(F=Gn(U.c)).slice(0,it))if(U.e<st&&--it,F=F.slice(it-3,it+1),F=="9999"||!j&&F=="4999"){if(!j&&(ut($,$.e+b+2,0),$.times($).eq(H))){U=$;break}dt+=4,it+=4,j=1}else{(!+F||!+F.slice(1)&&F.charAt(0)=="5")&&(ut(U,U.e+b+2,1),R=!U.times(U).eq(H));break}}return ut(U,U.e+b+1,S,R)},_.toExponential=function(R,F){return R!=null&&(n(R,0,Ge),R++),et(this,R,F,1)},_.toFixed=function(R,F){return R!=null&&(n(R,0,Ge),R=R+this.e+1),et(this,R,F)},_.toFormat=function(R,F,U){var j,$=this;if(U==null)R!=null&&F&&typeof F=="object"?(U=F,F=null):R&&typeof R=="object"?(U=R,R=F=null):U=ie;else if(typeof U!="object")throw Error(Fn+"Argument not an object: "+U);if(j=$.toFixed(R,F),$.c){var H,nt=j.split("."),it=+U.groupSize,st=+U.secondaryGroupSize,dt=U.groupSeparator||"",gt=nt[0],Nt=nt[1],oe=$.s<0,me=oe?gt.slice(1):gt,Ee=me.length;if(st&&(H=it,it=st,st=H,Ee-=H),it>0&&Ee>0){for(H=Ee%it||it,gt=me.substr(0,H);H<Ee;H+=it)gt+=dt+me.substr(H,it);st>0&&(gt+=dt+me.slice(H)),oe&&(gt="-"+gt)}j=Nt?gt+(U.decimalSeparator||"")+((st=+U.fractionGroupSize)?Nt.replace(new RegExp("\\d{"+st+"}\\B","g"),"$&"+(U.fractionGroupSeparator||"")):Nt):gt}return(U.prefix||"")+j+(U.suffix||"")},_.toFraction=function(R){var F,U,j,$,H,nt,it,st,dt,gt,Nt,oe,me=this,Ee=me.c;if(R!=null&&(it=new J(R),!it.isInteger()&&(it.c||it.s!==1)||it.lt(w)))throw Error(Fn+"Argument "+(it.isInteger()?"out of range: ":"not an integer: ")+Et(it));if(!Ee)return new J(me);for(F=new J(w),dt=U=new J(w),j=st=new J(w),oe=Gn(Ee),H=F.e=oe.length-me.e-1,F.c[0]=Ro[(nt=H%Ae)<0?Ae+nt:nt],R=!R||it.comparedTo(F)>0?H>0?F:dt:it,nt=W,W=1/0,it=new J(oe),st.c[0]=0;gt=a(it,F,0,1),$=U.plus(gt.times(j)),$.comparedTo(R)!=1;)U=j,j=$,dt=st.plus(gt.times($=dt)),st=$,F=it.minus(gt.times($=F)),it=$;return $=a(R.minus(U),j,0,1),st=st.plus($.times(dt)),U=U.plus($.times(j)),st.s=dt.s=me.s,H=H*2,Nt=a(dt,j,H,S).minus(me).abs().comparedTo(a(st,U,H,S).minus(me).abs())<1?[dt,j]:[st,U],W=nt,Nt},_.toNumber=function(){return+Et(this)},_.toPrecision=function(R,F){return R!=null&&n(R,1,Ge),et(this,R,F,2)},_.toString=function(R){var F,U=this,j=U.s,$=U.e;return $===null?j?(F="Infinity",j<0&&(F="-"+F)):F="NaN":(R==null?F=$<=T||$>=O?p(Gn(U.c),$):x(Gn(U.c),$,"0"):R===10&&Ke?(U=ut(new J(U),b+$+1,S),F=x(Gn(U.c),U.e,"0")):(n(R,2,de.length,"Base"),F=h(x(Gn(U.c),$,"0"),10,R,j,!0)),j<0&&U.c[0]&&(F="-"+F)),F},_.valueOf=_.toJSON=function(){return Et(this)},_._isBigNumber=!0,_[Symbol.toStringTag]="BigNumber",_[Symbol.for("nodejs.util.inspect.custom")]=_.valueOf,s!=null&&J.set(s),J}function qn(s){var a=s|0;return s>0||s===a?a:a-1}function Gn(s){for(var a,h,d=1,_=s.length,w=s[0]+"";d<_;){for(a=s[d++]+"",h=Ae-a.length;h--;a="0"+a);w+=a}for(_=w.length;w.charCodeAt(--_)===48;);return w.slice(0,_+1||1)}function Qr(s,a){var h,d,_=s.c,w=a.c,b=s.s,S=a.s,T=s.e,O=a.e;if(!b||!S)return null;if(h=_&&!_[0],d=w&&!w[0],h||d)return h?d?0:-S:b;if(b!=S)return b;if(h=b<0,d=T==O,!_||!w)return d?0:!_^h?1:-1;if(!d)return T>O^h?1:-1;for(S=(T=_.length)<(O=w.length)?T:O,b=0;b<S;b++)if(_[b]!=w[b])return _[b]>w[b]^h?1:-1;return T==O?0:T>O^h?1:-1}function n(s,a,h,d){if(s<a||s>h||s!==Pn(s))throw Error(Fn+(d||"Argument")+(typeof s=="number"?s<a||s>h?" out of range: ":" not an integer: ":" not a primitive number: ")+String(s))}function l(s){var a=s.c.length-1;return qn(s.e/Ae)==a&&s.c[a]%2!=0}function p(s,a){return(s.length>1?s.charAt(0)+"."+s.slice(1):s)+(a<0?"e":"e+")+a}function x(s,a,h){var d,_;if(a<0){for(_=h+".";++a;_+=h);s=_+s}else if(d=s.length,++a>d){for(_=h,a-=d;--a;_+=h);s+=_}else a<d&&(s=s.slice(0,a)+"."+s.slice(a));return s}var k=da(),N=k,tt=class{constructor(s){be(this,"key");be(this,"left",null);be(this,"right",null);this.key=s}},pt=class extends tt{constructor(s){super(s)}},St=class{constructor(){be(this,"size",0);be(this,"modificationCount",0);be(this,"splayCount",0)}splay(s){let a=this.root;if(a==null)return this.compare(s,s),-1;let h=null,d=null,_=null,w=null,b=a,S=this.compare,T;for(;;)if(T=S(b.key,s),T>0){let O=b.left;if(O==null||(T=S(O.key,s),T>0&&(b.left=O.right,O.right=b,b=O,O=b.left,O==null)))break;h==null?d=b:h.left=b,h=b,b=O}else if(T<0){let O=b.right;if(O==null||(T=S(O.key,s),T<0&&(b.right=O.left,O.left=b,b=O,O=b.right,O==null)))break;_==null?w=b:_.right=b,_=b,b=O}else break;return _!=null&&(_.right=b.left,b.left=w),h!=null&&(h.left=b.right,b.right=d),this.root!==b&&(this.root=b,this.splayCount++),T}splayMin(s){let a=s,h=a.left;for(;h!=null;){let d=h;a.left=d.right,d.right=a,a=d,h=a.left}return a}splayMax(s){let a=s,h=a.right;for(;h!=null;){let d=h;a.right=d.left,d.left=a,a=d,h=a.right}return a}_delete(s){if(this.root==null||this.splay(s)!=0)return null;let a=this.root,h=a,d=a.left;if(this.size--,d==null)this.root=a.right;else{let _=a.right;a=this.splayMax(d),a.right=_,this.root=a}return this.modificationCount++,h}addNewRoot(s,a){this.size++,this.modificationCount++;let h=this.root;if(h==null){this.root=s;return}a<0?(s.left=h,s.right=h.right,h.right=null):(s.right=h,s.left=h.left,h.left=null),this.root=s}_first(){let s=this.root;return s==null?null:(this.root=this.splayMin(s),this.root)}_last(){let s=this.root;return s==null?null:(this.root=this.splayMax(s),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(s){return this.validKey(s)&&this.splay(s)==0}defaultCompare(){return(s,a)=>s<a?-1:s>a?1:0}wrap(){return{getRoot:()=>this.root,setRoot:s=>{this.root=s},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:s=>{this.splayCount=s},splay:s=>this.splay(s),has:s=>this.has(s)}}},Ft=class pu extends St{constructor(h,d){super();be(this,"root",null);be(this,"compare");be(this,"validKey");be(this,Ql,"[object Set]");this.compare=h??this.defaultCompare(),this.validKey=d??(_=>_!=null&&_!=null)}delete(h){return this.validKey(h)?this._delete(h)!=null:!1}deleteAll(h){for(let d of h)this.delete(d)}forEach(h){let d=this[Symbol.iterator](),_;for(;_=d.next(),!_.done;)h(_.value,_.value,this)}add(h){let d=this.splay(h);return d!=0&&this.addNewRoot(new pt(h),d),this}addAndReturn(h){let d=this.splay(h);return d!=0&&this.addNewRoot(new pt(h),d),this.root.key}addAll(h){for(let d of h)this.add(d)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(h){if(h==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(h)<0)return this.root.key;let d=this.root.left;if(d==null)return null;let _=d.right;for(;_!=null;)d=_,_=d.right;return d.key}firstAfter(h){if(h==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(h)>0)return this.root.key;let d=this.root.right;if(d==null)return null;let _=d.left;for(;_!=null;)d=_,_=d.left;return d.key}retainAll(h){let d=new pu(this.compare,this.validKey),_=this.modificationCount;for(let w of h){if(_!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(w)&&this.splay(w)==0&&d.add(this.root.key)}d.size!=this.size&&(this.root=d.root,this.size=d.size,this.modificationCount++)}lookup(h){return!this.validKey(h)||this.splay(h)!=0?null:this.root.key}intersection(h){let d=new pu(this.compare,this.validKey);for(let _ of this)h.has(_)&&d.add(_);return d}difference(h){let d=new pu(this.compare,this.validKey);for(let _ of this)h.has(_)||d.add(_);return d}union(h){let d=this.clone();return d.addAll(h),d}clone(){let h=new pu(this.compare,this.validKey);return h.size=this.size,h.root=this.copyNode(this.root),h}copyNode(h){if(h==null)return null;function d(w,b){let S,T;do{if(S=w.left,T=w.right,S!=null){let O=new pt(S.key);b.left=O,d(S,O)}if(T!=null){let O=new pt(T.key);b.right=O,w=T,b=O}}while(T!=null)}let _=new pt(h.key);return d(h,_),_}toSet(){return this.clone()}entries(){return new He(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(El=Symbol.iterator,Ql=Symbol.toStringTag,El)](){return new Se(this.wrap())}},ae=class{constructor(s){be(this,"tree");be(this,"path",new Array);be(this,"modificationCount",null);be(this,"splayCount");this.tree=s,this.splayCount=s.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;let s=this.path[this.path.length-1];return this.getValue(s)}rebuildPath(s){this.path.splice(0,this.path.length),this.tree.splay(s),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(s){for(;s!=null;)this.path.push(s),s=s.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let h=this.tree.getRoot();for(;h!=null;)this.path.push(h),h=h.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let s=this.path[this.path.length-1],a=s.right;if(a!=null){for(;a!=null;)this.path.push(a),a=a.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===s;)s=this.path.pop();return this.path.length>0}},Se=class extends ae{getValue(s){return s.key}},He=class extends ae{getValue(s){return[s.key,s.key]}},zn=s=>s,An=s=>{if(s){let a=new Ft(To(s)),h=new Ft(To(s)),d=(w,b)=>b.addAndReturn(w),_=w=>({x:d(w.x,a),y:d(w.y,h)});return _({x:new N(0),y:new N(0)}),_}return zn},ii=s=>({set:a=>{xn=ii(a)},reset:()=>ii(s),compare:To(s),snap:An(s),orient:ao(s)}),xn=ii(),dr=(s,a)=>s.ll.x.isLessThanOrEqualTo(a.x)&&a.x.isLessThanOrEqualTo(s.ur.x)&&s.ll.y.isLessThanOrEqualTo(a.y)&&a.y.isLessThanOrEqualTo(s.ur.y),Io=(s,a)=>{if(a.ur.x.isLessThan(s.ll.x)||s.ur.x.isLessThan(a.ll.x)||a.ur.y.isLessThan(s.ll.y)||s.ur.y.isLessThan(a.ll.y))return null;let h=s.ll.x.isLessThan(a.ll.x)?a.ll.x:s.ll.x,d=s.ur.x.isLessThan(a.ur.x)?s.ur.x:a.ur.x,_=s.ll.y.isLessThan(a.ll.y)?a.ll.y:s.ll.y,w=s.ur.y.isLessThan(a.ur.y)?s.ur.y:a.ur.y;return{ll:{x:h,y:_},ur:{x:d,y:w}}},qi=(s,a)=>s.x.times(a.y).minus(s.y.times(a.x)),Ya=(s,a)=>s.x.times(a.x).plus(s.y.times(a.y)),pr=s=>Ya(s,s).sqrt(),gr=(s,a,h)=>{let d={x:a.x.minus(s.x),y:a.y.minus(s.y)},_={x:h.x.minus(s.x),y:h.y.minus(s.y)};return qi(_,d).div(pr(_)).div(pr(d))},lo=(s,a,h)=>{let d={x:a.x.minus(s.x),y:a.y.minus(s.y)},_={x:h.x.minus(s.x),y:h.y.minus(s.y)};return Ya(_,d).div(pr(_)).div(pr(d))},en=(s,a,h)=>a.y.isZero()?null:{x:s.x.plus(a.x.div(a.y).times(h.minus(s.y))),y:h},Ps=(s,a,h)=>a.x.isZero()?null:{x:h,y:s.y.plus(a.y.div(a.x).times(h.minus(s.x)))},Zl=(s,a,h,d)=>{if(a.x.isZero())return Ps(h,d,s.x);if(d.x.isZero())return Ps(s,a,h.x);if(a.y.isZero())return en(h,d,s.y);if(d.y.isZero())return en(s,a,h.y);let _=qi(a,d);if(_.isZero())return null;let w={x:h.x.minus(s.x),y:h.y.minus(s.y)},b=qi(w,a).div(_),S=qi(w,d).div(_),T=s.x.plus(S.times(a.x)),O=h.x.plus(b.times(d.x)),X=s.y.plus(S.times(a.y)),W=h.y.plus(b.times(d.y)),yt=T.plus(O).div(2),Lt=X.plus(W).div(2);return{x:yt,y:Lt}},mr=class i0{constructor(a,h){be(this,"point");be(this,"isLeft");be(this,"segment");be(this,"otherSE");be(this,"consumedBy");a.events===void 0?a.events=[this]:a.events.push(this),this.point=a,this.isLeft=h}static compare(a,h){let d=i0.comparePoints(a.point,h.point);return d!==0?d:(a.point!==h.point&&a.link(h),a.isLeft!==h.isLeft?a.isLeft?1:-1:_r.compare(a.segment,h.segment))}static comparePoints(a,h){return a.x.isLessThan(h.x)?-1:a.x.isGreaterThan(h.x)?1:a.y.isLessThan(h.y)?-1:a.y.isGreaterThan(h.y)?1:0}link(a){if(a.point===this.point)throw new Error("Tried to link already linked events");let h=a.point.events;for(let d=0,_=h.length;d<_;d++){let w=h[d];this.point.events.push(w),w.point=this.point}this.checkForConsuming()}checkForConsuming(){let a=this.point.events.length;for(let h=0;h<a;h++){let d=this.point.events[h];if(d.segment.consumedBy===void 0)for(let _=h+1;_<a;_++){let w=this.point.events[_];w.consumedBy===void 0&&d.otherSE.point.events===w.otherSE.point.events&&d.segment.consume(w.segment)}}}getAvailableLinkedEvents(){let a=[];for(let h=0,d=this.point.events.length;h<d;h++){let _=this.point.events[h];_!==this&&!_.segment.ringOut&&_.segment.isInResult()&&a.push(_)}return a}getLeftmostComparator(a){let h=new Map,d=_=>{let w=_.otherSE;h.set(_,{sine:gr(this.point,a.point,w.point),cosine:lo(this.point,a.point,w.point)})};return(_,w)=>{h.has(_)||d(_),h.has(w)||d(w);let{sine:b,cosine:S}=h.get(_),{sine:T,cosine:O}=h.get(w);return b.isGreaterThanOrEqualTo(0)&&T.isGreaterThanOrEqualTo(0)?S.isLessThan(O)?1:S.isGreaterThan(O)?-1:0:b.isLessThan(0)&&T.isLessThan(0)?S.isLessThan(O)?-1:S.isGreaterThan(O)?1:0:T.isLessThan(b)?-1:T.isGreaterThan(b)?1:0}}},As=0,_r=class _h{constructor(a,h,d,_){be(this,"id");be(this,"leftSE");be(this,"rightSE");be(this,"rings");be(this,"windings");be(this,"ringOut");be(this,"consumedBy");be(this,"prev");be(this,"_prevInResult");be(this,"_beforeState");be(this,"_afterState");be(this,"_isInResult");this.id=++As,this.leftSE=a,a.segment=this,a.otherSE=h,this.rightSE=h,h.segment=this,h.otherSE=a,this.rings=d,this.windings=_}static compare(a,h){let d=a.leftSE.point.x,_=h.leftSE.point.x,w=a.rightSE.point.x,b=h.rightSE.point.x;if(b.isLessThan(d))return 1;if(w.isLessThan(_))return-1;let S=a.leftSE.point.y,T=h.leftSE.point.y,O=a.rightSE.point.y,X=h.rightSE.point.y;if(d.isLessThan(_)){if(T.isLessThan(S)&&T.isLessThan(O))return 1;if(T.isGreaterThan(S)&&T.isGreaterThan(O))return-1;let W=a.comparePoint(h.leftSE.point);if(W<0)return 1;if(W>0)return-1;let yt=h.comparePoint(a.rightSE.point);return yt!==0?yt:-1}if(d.isGreaterThan(_)){if(S.isLessThan(T)&&S.isLessThan(X))return-1;if(S.isGreaterThan(T)&&S.isGreaterThan(X))return 1;let W=h.comparePoint(a.leftSE.point);if(W!==0)return W;let yt=a.comparePoint(h.rightSE.point);return yt<0?1:yt>0?-1:1}if(S.isLessThan(T))return-1;if(S.isGreaterThan(T))return 1;if(w.isLessThan(b)){let W=h.comparePoint(a.rightSE.point);if(W!==0)return W}if(w.isGreaterThan(b)){let W=a.comparePoint(h.rightSE.point);if(W<0)return 1;if(W>0)return-1}if(!w.eq(b)){let W=O.minus(S),yt=w.minus(d),Lt=X.minus(T),jt=b.minus(_);if(W.isGreaterThan(yt)&&Lt.isLessThan(jt))return 1;if(W.isLessThan(yt)&&Lt.isGreaterThan(jt))return-1}return w.isGreaterThan(b)?1:w.isLessThan(b)||O.isLessThan(X)?-1:O.isGreaterThan(X)?1:a.id<h.id?-1:a.id>h.id?1:0}static fromRing(a,h,d){let _,w,b,S=mr.comparePoints(a,h);if(S<0)_=a,w=h,b=1;else if(S>0)_=h,w=a,b=-1;else throw new Error(`Tried to create degenerate segment at [${a.x}, ${a.y}]`);let T=new mr(_,!0),O=new mr(w,!1);return new _h(T,O,[d],[b])}replaceRightSE(a){this.rightSE=a,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){let a=this.leftSE.point.y,h=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:a.isLessThan(h)?a:h},ur:{x:this.rightSE.point.x,y:a.isGreaterThan(h)?a:h}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(a){return a.x.eq(this.leftSE.point.x)&&a.y.eq(this.leftSE.point.y)||a.x.eq(this.rightSE.point.x)&&a.y.eq(this.rightSE.point.y)}comparePoint(a){return xn.orient(this.leftSE.point,a,this.rightSE.point)}getIntersection(a){let h=this.bbox(),d=a.bbox(),_=Io(h,d);if(_===null)return null;let w=this.leftSE.point,b=this.rightSE.point,S=a.leftSE.point,T=a.rightSE.point,O=dr(h,S)&&this.comparePoint(S)===0,X=dr(d,w)&&a.comparePoint(w)===0,W=dr(h,T)&&this.comparePoint(T)===0,yt=dr(d,b)&&a.comparePoint(b)===0;if(X&&O)return yt&&!W?b:!yt&&W?T:null;if(X)return W&&w.x.eq(T.x)&&w.y.eq(T.y)?null:w;if(O)return yt&&b.x.eq(S.x)&&b.y.eq(S.y)?null:S;if(yt&&W)return null;if(yt)return b;if(W)return T;let Lt=Zl(w,this.vector(),S,a.vector());return Lt===null||!dr(_,Lt)?null:xn.snap(Lt)}split(a){let h=[],d=a.events!==void 0,_=new mr(a,!0),w=new mr(a,!1),b=this.rightSE;this.replaceRightSE(w),h.push(w),h.push(_);let S=new _h(_,b,this.rings.slice(),this.windings.slice());return mr.comparePoints(S.leftSE.point,S.rightSE.point)>0&&S.swapEvents(),mr.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),d&&(_.checkForConsuming(),w.checkForConsuming()),h}swapEvents(){let a=this.rightSE;this.rightSE=this.leftSE,this.leftSE=a,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let h=0,d=this.windings.length;h<d;h++)this.windings[h]*=-1}consume(a){let h=this,d=a;for(;h.consumedBy;)h=h.consumedBy;for(;d.consumedBy;)d=d.consumedBy;let _=_h.compare(h,d);if(_!==0){if(_>0){let w=h;h=d,d=w}if(h.prev===d){let w=h;h=d,d=w}for(let w=0,b=d.rings.length;w<b;w++){let S=d.rings[w],T=d.windings[w],O=h.rings.indexOf(S);O===-1?(h.rings.push(S),h.windings.push(T)):h.windings[O]+=T}d.rings=null,d.windings=null,d.consumedBy=h,d.leftSE.consumedBy=h.leftSE,d.rightSE.consumedBy=h.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{let a=this.prev.consumedBy||this.prev;this._beforeState=a.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;let a=this.beforeState();this._afterState={rings:a.rings.slice(0),windings:a.windings.slice(0),multiPolys:[]};let h=this._afterState.rings,d=this._afterState.windings,_=this._afterState.multiPolys;for(let S=0,T=this.rings.length;S<T;S++){let O=this.rings[S],X=this.windings[S],W=h.indexOf(O);W===-1?(h.push(O),d.push(X)):d[W]+=X}let w=[],b=[];for(let S=0,T=h.length;S<T;S++){if(d[S]===0)continue;let O=h[S],X=O.poly;if(b.indexOf(X)===-1)if(O.isExterior)w.push(X);else{b.indexOf(X)===-1&&b.push(X);let W=w.indexOf(O.poly);W!==-1&&w.splice(W,1)}}for(let S=0,T=w.length;S<T;S++){let O=w[S].multiPoly;_.indexOf(O)===-1&&_.push(O)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;let a=this.beforeState().multiPolys,h=this.afterState().multiPolys;switch(ri.type){case"union":{let d=a.length===0,_=h.length===0;this._isInResult=d!==_;break}case"intersection":{let d,_;a.length<h.length?(d=a.length,_=h.length):(d=h.length,_=a.length),this._isInResult=_===ri.numMultiPolys&&d<_;break}case"xor":{let d=Math.abs(a.length-h.length);this._isInResult=d%2===1;break}case"difference":{let d=_=>_.length===1&&_[0].isSubject;this._isInResult=d(a)!==d(h);break}}return this._isInResult}},ts=class{constructor(s,a,h){be(this,"poly");be(this,"isExterior");be(this,"segments");be(this,"bbox");if(!Array.isArray(s)||s.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=a,this.isExterior=h,this.segments=[],typeof s[0][0]!="number"||typeof s[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let d=xn.snap({x:new N(s[0][0]),y:new N(s[0][1])});this.bbox={ll:{x:d.x,y:d.y},ur:{x:d.x,y:d.y}};let _=d;for(let w=1,b=s.length;w<b;w++){if(typeof s[w][0]!="number"||typeof s[w][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let S=xn.snap({x:new N(s[w][0]),y:new N(s[w][1])});S.x.eq(_.x)&&S.y.eq(_.y)||(this.segments.push(_r.fromRing(_,S,this)),S.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=S.x),S.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=S.y),S.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=S.x),S.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=S.y),_=S)}(!d.x.eq(_.x)||!d.y.eq(_.y))&&this.segments.push(_r.fromRing(_,d,this))}getSweepEvents(){let s=[];for(let a=0,h=this.segments.length;a<h;a++){let d=this.segments[a];s.push(d.leftSE),s.push(d.rightSE)}return s}},pa=class{constructor(s,a){be(this,"multiPoly");be(this,"exteriorRing");be(this,"interiorRings");be(this,"bbox");if(!Array.isArray(s))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new ts(s[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let h=1,d=s.length;h<d;h++){let _=new ts(s[h],this,!1);_.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=_.bbox.ll.x),_.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=_.bbox.ll.y),_.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=_.bbox.ur.x),_.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=_.bbox.ur.y),this.interiorRings.push(_)}this.multiPoly=a}getSweepEvents(){let s=this.exteriorRing.getSweepEvents();for(let a=0,h=this.interiorRings.length;a<h;a++){let d=this.interiorRings[a].getSweepEvents();for(let _=0,w=d.length;_<w;_++)s.push(d[_])}return s}},yl=class{constructor(s,a){be(this,"isSubject");be(this,"polys");be(this,"bbox");if(!Array.isArray(s))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof s[0][0][0]=="number"&&(s=[s])}catch{}this.polys=[],this.bbox={ll:{x:new N(Number.POSITIVE_INFINITY),y:new N(Number.POSITIVE_INFINITY)},ur:{x:new N(Number.NEGATIVE_INFINITY),y:new N(Number.NEGATIVE_INFINITY)}};for(let h=0,d=s.length;h<d;h++){let _=new pa(s[h],this);_.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=_.bbox.ll.x),_.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=_.bbox.ll.y),_.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=_.bbox.ur.x),_.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=_.bbox.ur.y),this.polys.push(_)}this.isSubject=a}getSweepEvents(){let s=[];for(let a=0,h=this.polys.length;a<h;a++){let d=this.polys[a].getSweepEvents();for(let _=0,w=d.length;_<w;_++)s.push(d[_])}return s}},ga=class Wc{constructor(a){be(this,"events");be(this,"poly");be(this,"_isExteriorRing");be(this,"_enclosingRing");this.events=a;for(let h=0,d=a.length;h<d;h++)a[h].segment.ringOut=this;this.poly=null}static factory(a){let h=[];for(let d=0,_=a.length;d<_;d++){let w=a[d];if(!w.isInResult()||w.ringOut)continue;let b=null,S=w.leftSE,T=w.rightSE,O=[S],X=S.point,W=[];for(;b=S,S=T,O.push(S),S.point!==X;)for(;;){let yt=S.getAvailableLinkedEvents();if(yt.length===0){let ie=O[0].point,de=O[O.length-1].point;throw new Error(`Unable to complete output ring starting at [${ie.x}, ${ie.y}]. Last matching segment found ends at [${de.x}, ${de.y}].`)}if(yt.length===1){T=yt[0].otherSE;break}let Lt=null;for(let ie=0,de=W.length;ie<de;ie++)if(W[ie].point===S.point){Lt=ie;break}if(Lt!==null){let ie=W.splice(Lt)[0],de=O.splice(ie.index);de.unshift(de[0].otherSE),h.push(new Wc(de.reverse()));continue}W.push({index:O.length,point:S.point});let jt=S.getLeftmostComparator(b);T=yt.sort(jt)[0].otherSE;break}h.push(new Wc(O))}return h}getGeom(){let a=this.events[0].point,h=[a];for(let O=1,X=this.events.length-1;O<X;O++){let W=this.events[O].point,yt=this.events[O+1].point;xn.orient(W,a,yt)!==0&&(h.push(W),a=W)}if(h.length===1)return null;let d=h[0],_=h[1];xn.orient(d,a,_)===0&&h.shift(),h.push(h[0]);let w=this.isExteriorRing()?1:-1,b=this.isExteriorRing()?0:h.length-1,S=this.isExteriorRing()?h.length:-1,T=[];for(let O=b;O!=S;O+=w)T.push([h[O].x.toNumber(),h[O].y.toNumber()]);return T}isExteriorRing(){if(this._isExteriorRing===void 0){let a=this.enclosingRing();this._isExteriorRing=a?!a.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var _,w;let a=this.events[0];for(let b=1,S=this.events.length;b<S;b++){let T=this.events[b];mr.compare(a,T)>0&&(a=T)}let h=a.segment.prevInResult(),d=h?h.prevInResult():null;for(;;){if(!h)return null;if(!d)return h.ringOut;if(d.ringOut!==h.ringOut)return((_=d.ringOut)==null?void 0:_.enclosingRing())!==h.ringOut?h.ringOut:(w=h.ringOut)==null?void 0:w.enclosingRing();h=d.prevInResult(),d=h?h.prevInResult():null}}},Bs=class{constructor(s){be(this,"exteriorRing");be(this,"interiorRings");this.exteriorRing=s,s.poly=this,this.interiorRings=[]}addInterior(s){this.interiorRings.push(s),s.poly=this}getGeom(){let s=this.exteriorRing.getGeom();if(s===null)return null;let a=[s];for(let h=0,d=this.interiorRings.length;h<d;h++){let _=this.interiorRings[h].getGeom();_!==null&&a.push(_)}return a}},yn=class{constructor(s){be(this,"rings");be(this,"polys");this.rings=s,this.polys=this._composePolys(s)}getGeom(){let s=[];for(let a=0,h=this.polys.length;a<h;a++){let d=this.polys[a].getGeom();d!==null&&s.push(d)}return s}_composePolys(s){var h;let a=[];for(let d=0,_=s.length;d<_;d++){let w=s[d];if(!w.poly)if(w.isExteriorRing())a.push(new Bs(w));else{let b=w.enclosingRing();b!=null&&b.poly||a.push(new Bs(b)),(h=b==null?void 0:b.poly)==null||h.addInterior(w)}}return a}},dn=class{constructor(s,a=_r.compare){be(this,"queue");be(this,"tree");be(this,"segments");this.queue=s,this.tree=new Ft(a),this.segments=[]}process(s){let a=s.segment,h=[];if(s.consumedBy)return s.isLeft?this.queue.delete(s.otherSE):this.tree.delete(a),h;s.isLeft&&this.tree.add(a);let d=a,_=a;do d=this.tree.lastBefore(d);while(d!=null&&d.consumedBy!=null);do _=this.tree.firstAfter(_);while(_!=null&&_.consumedBy!=null);if(s.isLeft){let w=null;if(d){let S=d.getIntersection(a);if(S!==null&&(a.isAnEndpoint(S)||(w=S),!d.isAnEndpoint(S))){let T=this._splitSafely(d,S);for(let O=0,X=T.length;O<X;O++)h.push(T[O])}}let b=null;if(_){let S=_.getIntersection(a);if(S!==null&&(a.isAnEndpoint(S)||(b=S),!_.isAnEndpoint(S))){let T=this._splitSafely(_,S);for(let O=0,X=T.length;O<X;O++)h.push(T[O])}}if(w!==null||b!==null){let S=null;w===null?S=b:b===null?S=w:S=mr.comparePoints(w,b)<=0?w:b,this.queue.delete(a.rightSE),h.push(a.rightSE);let T=a.split(S);for(let O=0,X=T.length;O<X;O++)h.push(T[O])}h.length>0?(this.tree.delete(a),h.push(s)):(this.segments.push(a),a.prev=d)}else{if(d&&_){let w=d.getIntersection(_);if(w!==null){if(!d.isAnEndpoint(w)){let b=this._splitSafely(d,w);for(let S=0,T=b.length;S<T;S++)h.push(b[S])}if(!_.isAnEndpoint(w)){let b=this._splitSafely(_,w);for(let S=0,T=b.length;S<T;S++)h.push(b[S])}}}this.tree.delete(a)}return h}_splitSafely(s,a){this.tree.delete(s);let h=s.rightSE;this.queue.delete(h);let d=s.split(a);return d.push(h),s.consumedBy===void 0&&this.tree.add(s),d}},uo=class{constructor(){be(this,"type");be(this,"numMultiPolys")}run(s,a,h){Bn.type=s;let d=[new yl(a,!0)];for(let T=0,O=h.length;T<O;T++)d.push(new yl(h[T],!1));if(Bn.numMultiPolys=d.length,Bn.type==="difference"){let T=d[0],O=1;for(;O<d.length;)Io(d[O].bbox,T.bbox)!==null?O++:d.splice(O,1)}if(Bn.type==="intersection")for(let T=0,O=d.length;T<O;T++){let X=d[T];for(let W=T+1,yt=d.length;W<yt;W++)if(Io(X.bbox,d[W].bbox)===null)return[]}let _=new Ft(mr.compare);for(let T=0,O=d.length;T<O;T++){let X=d[T].getSweepEvents();for(let W=0,yt=X.length;W<yt;W++)_.add(X[W])}let w=new dn(_),b=null;for(_.size!=0&&(b=_.first(),_.delete(b));b;){let T=w.process(b);for(let O=0,X=T.length;O<X;O++){let W=T[O];W.consumedBy===void 0&&_.add(W)}_.size!=0?(b=_.first(),_.delete(b)):b=null}xn.reset();let S=ga.factory(w.segments);return new yn(S).getGeom()}},Bn=new uo,ri=Bn,Oo=(s,...a)=>ri.run("intersection",s,a),ma=(s,...a)=>ri.run("difference",s,a);xn.set;function si(s){let a={type:"Feature"};return a.geometry=s,a}function Do(s){return s.type==="Feature"?s.geometry:s}function ql(s){return s&&s.geometry&&s.geometry.coordinates?s.geometry.coordinates:s}function Fu(s){return si({type:"LineString",coordinates:s})}function vl(s){return si({type:"MultiLineString",coordinates:s})}function Kl(s){return si({type:"Polygon",coordinates:s})}function es(s){return si({type:"MultiPolygon",coordinates:s})}function xl(s,a){let h=Do(s),d=Do(a),_=Oo(h.coordinates,d.coordinates);return _.length===0?null:_.length===1?Kl(_[0]):es(_)}function Jl(s,a){let h=Do(s),d=Do(a),_=ma(h.coordinates,d.coordinates);return _.length===0?null:_.length===1?Kl(_[0]):es(_)}function Xl(s){return Array.isArray(s)?1+Xl(s[0]):-1}function Uh(s){s instanceof L.Polyline&&(s=s.toGeoJSON(15));let a=ql(s),h=Xl(a),d=[];return h>1?a.forEach(_=>{d.push(Fu(_))}):d.push(s),d}function ho(s){let a=[];return s.eachLayer(h=>{a.push(ql(h.toGeoJSON(15)))}),vl(a)}Nn.Cut=Nn.Polygon.extend({initialize(s){this._map=s,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape(){if(this._editedLayers=[],!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let s=this._layer.getLatLngs();if(s.length<=2)return;let a=L.polygon(s,this.options.pathOptions);a._latlngInfos=this._layer._latlngInfo,this.cut(a),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(({layer:d,originalLayer:_})=>{this._fireCut(_,d,_),this._fireCut(this._map,d,_),_.pm._fireEdit()}),this._editedLayers=[];let h=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(h))},cut(s){let a=this._map._layers,h=s._latlngInfos||[];Object.keys(a).map(d=>a[d]).filter(d=>d.pm).filter(d=>!d._pmTempLayer).filter(d=>!L.PM.optIn&&!d.options.pmIgnore||L.PM.optIn&&d.options.pmIgnore===!1).filter(d=>d instanceof L.Polyline).filter(d=>d!==s).filter(d=>d.pm.options.allowCutting).filter(d=>this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0?this.options.layersToCut.indexOf(d)>-1:!0).filter(d=>!this._layerGroup.hasLayer(d)).filter(d=>{try{let _=!!ar(s.toGeoJSON(15),d.toGeoJSON(15)).features.length>0;return _||d instanceof L.Polyline&&!(d instanceof L.Polygon)?_:!!xl(s.toGeoJSON(15),d.toGeoJSON(15))}catch{return d instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}}).forEach(d=>{let _;if(d instanceof L.Polygon){_=L.polygon(d.getLatLngs());let T=_.getLatLngs();h.forEach(O=>{if(O&&O.snapInfo){let{latlng:X}=O,W=this._calcClosestLayer(X,[_]);if(W&&W.segment&&W.distance<this.options.snapDistance){let{segment:yt}=W;if(yt&&yt.length===2){let{indexPath:Lt,parentPath:jt,newIndex:ie}=L.PM.Utils._getIndexFromSegment(T,yt);(Lt.length>1?(0,cr.default)(T,jt):T).splice(ie,0,X)}}}})}else _=d;let w=this._cutLayer(s,_),b=L.geoJSON(w,d.options);b.getLayers().length===1&&([b]=b.getLayers()),this._setPane(b,"layerPane");let S=b.addTo(this._map.pm._getContainingLayer());if(S.pm.enable(d.pm.options),S.pm.disable(),d._pmTempLayer=!0,s._pmTempLayer=!0,d.remove(),d.removeFrom(this._map.pm._getContainingLayer()),s.remove(),s.removeFrom(this._map.pm._getContainingLayer()),S.getLayers&&S.getLayers().length===0&&this._map.pm.removeLayer({target:S}),S instanceof L.LayerGroup?(S.eachLayer(T=>{this._addDrawnLayerProp(T)}),this._addDrawnLayerProp(S)):this._addDrawnLayerProp(S),this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0){let T=this.options.layersToCut.indexOf(d);T>-1&&this.options.layersToCut.splice(T,1)}this._editedLayers.push({layer:S,originalLayer:d})})},_cutLayer(s,a){let h=L.geoJSON(),d;if(a instanceof L.Polygon)d=Jl(a.toGeoJSON(15),s.toGeoJSON(15));else{let _=Uh(a);_.forEach(w=>{let b=pl(w,s.toGeoJSON(15)),S;b&&b.features.length>0?S=L.geoJSON(b):S=L.geoJSON(w),S.getLayers().forEach(T=>{ro(s.toGeoJSON(15),T.toGeoJSON(15))||T.addTo(h)})}),_.length>1?d=ho(h):d=h.toGeoJSON(15)}return d},_change:L.Util.falseFn}),Nn.Text=Nn.extend({initialize(s){this._map=s,this._shape="Text",this.toolbarButtonName="drawText"},enable(s){L.Util.setOptions(this,s),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(Oe("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._map.getContainer().classList.add("geoman-draw-cursor"),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){var s;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),(s=this._hintMarker)==null||s.remove(),this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("mousemove",this._syncHintMarker,this),this._map.off("mousemove",this._showHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this.options.snappable){let a=s;a.target=this._hintMarker,this._handleSnapping(a)}},_createMarker(s){var _,w,b,S;if(!s.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let a=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(_=this.options.textOptions)==null?void 0:_.className){let T=this.options.textOptions.className.split(" ");this.textArea.classList.add(...T)}let h=this._createTextIcon(this.textArea),d=new L.Marker(a,{textMarker:!0,_textMarkerOverPM:!0,icon:h});if(this._setPane(d,"markerPane"),this._finishLayer(d),d.pm||(d.options.draggable=!1),d.addTo(this._map.pm._getContainingLayer()),d.pm){d.pm.textArea=this.textArea,L.setOptions(d.pm,{removeIfEmpty:((w=this.options.textOptions)==null?void 0:w.removeIfEmpty)??!0});let T=((b=this.options.textOptions)==null?void 0:b.focusAfterDraw)??!0;d.pm._createTextMarker(T),(S=this.options.textOptions)!=null&&S.text&&d.pm.setText(this.options.textOptions.text)}this._fireCreate(d),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this._map.once("mousemove",this._showHintMarkerAfterMoving,this)},_showHintMarkerAfterMoving(s){this.enable(),this._hintMarker.setLatLng(s.latlng)},_createTextArea(){let s=document.createElement("textarea");return s.readOnly=!0,s.classList.add("pm-textarea","pm-disabled"),s},_createTextIcon(s){return L.divIcon({className:"pm-text-marker",html:s})}});var _a={enableLayerDrag(){if(!this.options.draggable||!this._layer._map)return;this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,Dn(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;let s=this._getDOMElem();s&&(Dn(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(s)):L.DomEvent.on(s,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()},disableLayerDrag(){this._layerDragEnabled=!1,Dn(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();let s=this._getDOMElem();s&&(Dn(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(s)):L.DomEvent.off(s,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging(){return this._dragging},layerDragEnabled(){return!!this._layerDragEnabled},_simulateMouseDownEvent(s){let a=s.touches?s.touches[0]:s,h={originalEvent:a,target:this._layer};return h.containerPoint=this._map.mouseEventToContainerPoint(a),h.latlng=this._map.containerPointToLatLng(h.containerPoint),this._dragMixinOnMouseDown(h),!1},_simulateMouseMoveEvent(s){let a=s.touches?s.touches[0]:s,h={originalEvent:a,target:this._layer};return h.containerPoint=this._map.mouseEventToContainerPoint(a),h.latlng=this._map.containerPointToLatLng(h.containerPoint),this._dragMixinOnMouseMove(h),!1},_simulateMouseUpEvent(s){let a={originalEvent:s.touches?s.touches[0]:s,target:this._layer};return s.type.indexOf("touch")===-1&&(a.containerPoint=this._map.mouseEventToContainerPoint(s),a.latlng=this._map.containerPointToLatLng(a.containerPoint)),this._dragMixinOnMouseUp(a),!1},_dragMixinOnMouseDown(s){if(s.originalEvent.button>0)return;this._overwriteEventIfItComesFromMarker(s);let a=s._fromLayerSync,h=this._syncLayers("_dragMixinOnMouseDown",s);if(this._layer instanceof L.Marker&&(this.options.snappable&&!a&&!h?this._initSnappableMarkers():this._disableSnapping()),this._layer instanceof L.CircleMarker){let d="resizeableCircleMarker";this._layer instanceof L.Circle&&(d="resizeableCircle"),this.options.snappable&&!a&&!h?this._layer.pm.options[d]||this._initSnappableMarkersDrag():this._layer.pm.options[d]?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag()}this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=s.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)},_dragMixinOnMouseMove(s){this._overwriteEventIfItComesFromMarker(s);let a=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",s),this._dragging||(this._dragging=!0,L.DomUtil.addClass(a,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=s.latlng),this._onLayerDrag(s),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp(s){let a=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",s),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),this._dragging?(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(()=>{this._dragging=!1,a&&L.DomUtil.removeClass(a,"leaflet-pm-dragging"),this._fireDragEnd(),this._fireEdit(),this._layerEdited=!0},10),!0):!1},_onLayerDrag(s){let{latlng:a}=s,h={lat:a.lat-this._tempDragCoord.lat,lng:a.lng-this._tempDragCoord.lng},d=_=>_.map(w=>{if(Array.isArray(w))return d(w);let b={lat:w.lat+h.lat,lng:w.lng+h.lng};return(w.alt||w.alt===0)&&(b.alt=w.alt),b});if(this._layer instanceof L.Circle&&this._layer.options.resizeableCircle||this._layer instanceof L.CircleMarker&&this._layer.options.resizeableCircleMarker){let _=d([this._layer.getLatLng()]);this._layer.setLatLng(_[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){let _=this._layer.getLatLng();this._layer._snapped&&(_=this._layer._orgLatLng);let w=d([_]);this._layer.setLatLng(w[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){let _=d([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(_),this._fireChange(this._layer.getBounds(),"Edit")}else{let _=d(this._layer.getLatLngs());this._layer.setLatLngs(_),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=a,s.layer=this._layer,this._fireDrag(s)},addDraggingClass(){let s=this._getDOMElem();s&&L.DomUtil.addClass(s,"leaflet-pm-draggable")},removeDraggingClass(){let s=this._getDOMElem();s&&L.DomUtil.removeClass(s,"leaflet-pm-draggable")},_getDOMElem(){let s=null;return this._layer._path?s=this._layer._path:this._layer._renderer&&this._layer._renderer._container?s=this._layer._renderer._container:this._layer._image?s=this._layer._image:this._layer._icon&&(s=this._layer._icon),s},_overwriteEventIfItComesFromMarker(s){s.target.getLatLng&&(!s.target._radius||s.target._radius<=10)&&(s.containerPoint=this._map.mouseEventToContainerPoint(s.originalEvent),s.latlng=this._map.containerPointToLatLng(s.containerPoint))},_syncLayers(s,a){if(this.enabled())return!1;if(!a._fromLayerSync&&this._layer===a.target&&this.options.syncLayersOnDrag){a._fromLayerSync=!0;let h=[];if(L.Util.isArray(this.options.syncLayersOnDrag))h=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(d=>{d instanceof L.LayerGroup&&(h=h.concat(d.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(let d in this._parentLayerGroup){let _=this._parentLayerGroup[d];_.pm&&(h=_.pm.getLayers(!0))}return L.Util.isArray(h)&&h.length>0&&(h=h.filter(d=>!!d.pm).filter(d=>!!d.pm.options.draggable),h.forEach(d=>{d!==this._layer&&d.pm[s]&&(d._snapped=!1,d.pm[s](a))})),h.length>0}return!1},_stopDOMImageDrag(s){return s.preventDefault(),!1}},ya=_a,wl=E(rr());function Ml(s,a,h,d){return h.unproject(a.transform(h.project(s,d)),d)}function Ki(s,a,h){let d=h.getMaxZoom();if(d===1/0&&(d=h.getZoom()),L.Util.isArray(s)){let _=[];return s.forEach(w=>{_.push(Ki(w,a,h))}),_}return s instanceof L.LatLng?Ml(s,a,h,d):null}function oi(s,a){a instanceof L.Layer&&(a=a.getLatLng());let h=s.getMaxZoom();return h===1/0&&(h=s.getZoom()),s.project(a,h)}function ns(s,a){let h=s.getMaxZoom();return h===1/0&&(h=s.getZoom()),s.unproject(a,h)}var Ts={_onRotateStart(s){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=oi(this._map,this._rotationOriginLatLng),this._rotationStartPoint=oi(this._map,s.target.getLatLng()),this._initialRotateLatLng=di(this._layer),this._startAngle=this.getAngle();let a=di(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,a),this._fireRotationStart(this._map,a)},_onRotate(s){let a=oi(this._map,s.target.getLatLng()),h=this._rotationStartPoint,d=this._rotationOriginPoint,_=Math.atan2(a.y-d.y,a.x-d.x)-Math.atan2(h.y-d.y,h.x-d.x);this._layer.setLatLngs(this._rotateLayer(_,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let w=this;function b(X,W=[],yt=-1){if(yt>-1&&W.push(yt),L.Util.isArray(X[0]))X.forEach((Lt,jt)=>b(Lt,W.slice(),jt));else{let Lt=W.length>0?(0,wl.default)(w._markers,W):w._markers[0];X.forEach((jt,ie)=>{Lt[ie].setLatLng(jt)})}}b(this._layer.getLatLngs());let S=di(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(_,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let T=_*180/Math.PI;T=T<0?T+360:T;let O=T+this._startAngle;this._setAngle(O),this._rotationLayer.pm._setAngle(O),this._fireRotation(this._rotationLayer,T,S),this._fireRotation(this._map,T,S),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd(){let s=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;let a=di(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=di(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,s,a),this._fireRotationEnd(this._map,s,a),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer(s,a,h,d,_){let w=oi(_,h);return this._matrix=d.clone().rotate(s,w).flip(),Ki(a,this._matrix,_)},_setAngle(s){s=s<0?s+360:s,this._angle=s%360},_getRotationCenter(){if(this._rotationCenter)return this._rotationCenter;let s=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),a=s.getCenter();return s.removeFrom(this._layer._map),a},enableRotate(){if(!this.options.allowRotation){this.disableRotate();return}this.rotateEnabled()&&this.disableRotate(),this._layer instanceof L.Rectangle&&this._angle===void 0&&this.setInitAngle(Wn(this._layer._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let s={fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0};this._rotatePoly=L.polygon(this._layer.getLatLngs(),s),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setRotationCenter(this.getRotationCenter()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=di(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)},disableRotate(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled(){return!!this._rotateEnabled},rotateLayer(s){let a=this.getAngle(),h=this._layer.getLatLngs(),d=s*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(d,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+s),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(d,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());let _=this.getAngle()-a;_=_<0?_+360:_,this._startAngle=a,this._fireRotation(this._layer,_,h,this._layer),this._fireRotation(this._map||this._layer._map,_,h,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle(s){let a=s-this.getAngle();this.rotateLayer(a)},getAngle(){return this._angle||0},setInitAngle(s){this._setAngle(s)},getRotationCenter(){return this._getRotationCenter()},setRotationCenter(s){this._rotationCenter=s,this._rotatePoly&&this._rotatePoly.pm.setRotationCenter(s)}},Rs=Ts,No=L.Class.extend({includes:[ya,Ua,Rs,Es],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0,resizeableCircleMarker:!1,resizeableCircle:!0,snapMiddle:!1,snapVertex:!0},setOptions(s){L.Util.setOptions(this,s)},getOptions(){return this.options},applyOptions(){},isPolygon(){return this._layer instanceof L.Polygon},getShape(){return this._shape},_setPane(s,a){a==="layerPane"?s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":a==="vertexPane"?s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":a==="markerPane"&&(s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation(s,a){let h=a.target,d={layer:this._layer,marker:h,event:a},_="";return s==="move"?_="moveVertexValidation":s==="add"?_="addVertexValidation":s==="remove"&&(_="removeVertexValidation"),this.options[_]&&typeof this.options[_]=="function"&&!this.options[_](d)?(s==="move"&&(h._cancelDragEventChain=h.getLatLng()),!1):(h._cancelDragEventChain=null,!0)},_vertexValidationDrag(s){return s._cancelDragEventChain?(s._latlng=s._cancelDragEventChain,s.update(),!1):!0},_vertexValidationDragEnd(s){return s._cancelDragEventChain?(s._cancelDragEventChain=null,!1):!0}}),jn=No;jn.LayerGroup=L.Class.extend({initialize(s){this._layerGroup=s,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(d=>this._initLayer(d));let a=d=>{if(d.layer._pmTempLayer)return;this._layers=this.getLayers();let _=this._layers.filter(w=>!w.pm._parentLayerGroup||!(this._layerGroup._leaflet_id in w.pm._parentLayerGroup));_.forEach(w=>{this._initLayer(w)}),_.length>0&&this._getMap()&&this._getMap().pm.globalEditModeEnabled()&&this.enabled()&&this.enable(this.getOptions())};this._layerGroup.on("layeradd",L.Util.throttle(a,100,this),this),this._layerGroup.on("layerremove",d=>{this._removeLayerFromGroup(d.target)},this);let h=d=>{d.target._pmTempLayer||(this._layers=this.getLayers())};this._layerGroup.on("layerremove",L.Util.throttle(h,100,this),this)},enable(s,a=[]){a.length===0&&(this._layers=this.getLayers()),this._options=s,this._layers.forEach(h=>{h instanceof L.LayerGroup?a.indexOf(h._leaflet_id)===-1&&(a.push(h._leaflet_id),h.pm.enable(s,a)):h.pm.enable(s)})},disable(s=[]){s.length===0&&(this._layers=this.getLayers()),this._layers.forEach(a=>{a instanceof L.LayerGroup?s.indexOf(a._leaflet_id)===-1&&(s.push(a._leaflet_id),a.pm.disable(s)):a.pm.disable()})},enabled(s=[]){return s.length===0&&(this._layers=this.getLayers()),!!this._layers.find(a=>a instanceof L.LayerGroup?s.indexOf(a._leaflet_id)===-1?(s.push(a._leaflet_id),a.pm.enabled(s)):!1:a.pm.enabled())},toggleEdit(s,a=[]){a.length===0&&(this._layers=this.getLayers()),this._options=s,this._layers.forEach(h=>{h instanceof L.LayerGroup?a.indexOf(h._leaflet_id)===-1&&(a.push(h._leaflet_id),h.pm.toggleEdit(s,a)):h.pm.toggleEdit(s)})},_initLayer(s){let a=L.Util.stamp(this._layerGroup);s.pm._parentLayerGroup||(s.pm._parentLayerGroup={}),s.pm._parentLayerGroup[a]=this._layerGroup},_removeLayerFromGroup(s){if(s.pm&&s.pm._layerGroup){let a=L.Util.stamp(this._layerGroup);delete s.pm._layerGroup[a]}},dragging(){return this._layers=this.getLayers(),this._layers?!!this._layers.find(s=>s.pm.dragging()):!1},getOptions(){return this.options},_getMap(){var s;return this._map||((s=this._layers.find(a=>!!a._map))==null?void 0:s._map)||null},getLayers(s=!1,a=!0,h=!0,d=[]){let _=[];return s?this._layerGroup.getLayers().forEach(w=>{_.push(w),w instanceof L.LayerGroup&&d.indexOf(w._leaflet_id)===-1&&(d.push(w._leaflet_id),_=_.concat(w.pm.getLayers(!0,!0,!0,d)))}):_=this._layerGroup.getLayers(),h&&(_=_.filter(w=>!(w instanceof L.LayerGroup))),a&&(_=_.filter(w=>!!w.pm),_=_.filter(w=>!w._pmTempLayer),_=_.filter(w=>!L.PM.optIn&&!w.options.pmIgnore||L.PM.optIn&&w.options.pmIgnore===!1)),_},setOptions(s,a=[]){a.length===0&&(this._layers=this.getLayers()),this.options=s,this._layers.forEach(h=>{h.pm&&(h instanceof L.LayerGroup?a.indexOf(h._leaflet_id)===-1&&(a.push(h._leaflet_id),h.pm.setOptions(s,a)):h.pm.setOptions(s))})}}),jn.Marker=jn.extend({_shape:"Marker",initialize(s){this._layer=s,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable(s={draggable:!0}){if(L.Util.setOptions(this,s),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()},disable(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled(){return this._enabled},toggleEdit(s){this.enabled()?this.disable():this.enable(s)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker(s){let a=s.target;a.remove(),this._fireRemove(a),this._fireRemove(this._map,a)},_onDragEnd(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers(){let s=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,s.off("pm:drag",this._handleSnapping,this),s.on("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.on("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this),s.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let s=this._layer;s.off("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this)}});var is=E(rr()),Yl={filterMarkerGroup(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this._layer.on("remove",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache(){let s=[...this._markerGroup.getLayers(),...this.markerCache];this.markerCache=s.filter((a,h,d)=>d.indexOf(a)===h)},_removeFromCache(s){let a=this.markerCache.indexOf(s);a>-1&&this.markerCache.splice(a,1)},renderLimits(s){this.markerCache.forEach(a=>{s.includes(a)?this._markerGroup.addLayer(a):this._markerGroup.removeLayer(a)})},applyLimitFilters({latlng:s={lat:0,lng:0}}){if(this._preventRenderMarkers)return;let a=[...this._filterClosestMarkers(s)];this.renderLimits(a)},_filterClosestMarkers(s){let a=[...this.markerCache],h=this.options.limitMarkersToCount;return h===-1?a:(a.sort((d,_)=>{let w=d._latlng.distanceTo(s),b=_._latlng.distanceTo(s);return w-b}),a.filter((d,_)=>h>-1?_<h:!0))},_preventRenderMarkers:!1,_preventRenderingMarkers(s){this._preventRenderMarkers=!!s}},Ji=Yl;jn.Line=jn.extend({includes:[Ji],_shape:"Line",initialize(s){this._layer=s,this._enabled=!1},enable(s){if(L.Util.setOptions(this,s),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()}},disable(){if(!this.enabled()||this._dragging)return;this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);let s=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(s,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()},enabled(){return this._enabled},toggleEdit(s){return this.enabled()?this.disable():this.enable(s),this.enabled()},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers(){let s=this._map,a=this._layer.getLatLngs();this._markerGroup&&(this._markerGroup.removeFrom(s),this._markerGroup.clearLayers()),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0;let h=d=>{if(Array.isArray(d[0]))return d.map(h,this);let _=d.map(this._createMarker,this);return this.options.hideMiddleMarkers!==!0&&d.map((w,b)=>{let S=this.isPolygon()?(b+1)%d.length:b+1;return this._createMiddleMarker(_[b],_[S])}),_};this._markers=h(a),this.filterMarkerGroup(),s.addLayer(this._markerGroup)},_createMarker(s){let a=new L.Marker(s,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(a,"vertexPane"),a._pmTempLayer=!0,this.options.rotate?(a.on("dragstart",this._onRotateStart,this),a.on("drag",this._onRotate,this),a.on("dragend",this._onRotateEnd,this)):(a.on("click",this._onVertexClick,this),a.on("dragstart",this._onMarkerDragStart,this),a.on("move",this._onMarkerDrag,this),a.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||a.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(a),a},_createMiddleMarker(s,a){if(!s||!a)return!1;let h=L.PM.Utils.calcMiddleLatLng(this._map,s.getLatLng(),a.getLatLng()),d=this._createMarker(h),_=L.divIcon({className:"marker-icon marker-icon-middle"});return d.setIcon(_),d.leftM=s,d.rightM=a,s._middleMarkerNext=d,a._middleMarkerPrev=d,d.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),d.on("movestart",this._onMiddleMarkerMoveStart,this),d},_onMiddleMarkerClick(s){let a=s.target;if(!this._vertexValidation("add",s))return;let h=L.divIcon({className:"marker-icon"});a.setIcon(h),this._addMarker(a,a.leftM,a.rightM)},_onMiddleMarkerMoveStart(s){let a=s.target;if(a.on("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidation("add",s)){a.on("move",this._onMiddleMarkerMovePrevent,this);return}a._dragging=!0,this._addMarker(a,a.leftM,a.rightM)},_onMiddleMarkerMovePrevent(s){let a=s.target;this._vertexValidationDrag(a)},_onMiddleMarkerMoveEnd(s){let a=s.target;if(a.off("move",this._onMiddleMarkerMovePrevent,this),a.off("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidationDragEnd(a))return;let h=L.divIcon({className:"marker-icon"});a.setIcon(h),setTimeout(()=>{delete a._dragging},100)},_addMarker(s,a,h){s.off("movestart",this._onMiddleMarkerMoveStart,this),s.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);let d=s.getLatLng(),_=this._layer._latlngs;delete s.leftM,delete s.rightM;let{indexPath:w,index:b,parentPath:S}=L.PM.Utils.findDeepMarkerIndex(this._markers,a),T=w.length>1?(0,is.default)(_,S):_,O=w.length>1?(0,is.default)(this._markers,S):this._markers;T.splice(b+1,0,d),O.splice(b+1,0,s),this._layer.setLatLngs(_),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(a,s),this._createMiddleMarker(s,h)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(s,L.PM.Utils.findDeepMarkerIndex(this._markers,s).indexPath,d),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection(){return Lo(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval(){this._handleLayerStyle(!0)&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle(s){let a=this._layer,h,d;if(this.options.allowSelfIntersection?h=!1:(d=Lo(this._layer.toGeoJSON(15)),h=d.features.length>0),h){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return h;s?this._flashLayer():(a.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(d)}else a.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1);return h},_flashLayer(){this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(()=>{this._layer.setStyle({color:this.cachedColor}),this.isRed=!1},200)},_updateDisabledMarkerStyle(s,a){s.forEach(h=>{Array.isArray(h)?this._updateDisabledMarkerStyle(h,a):h._icon&&(a&&!this._checkMarkerAllowedToDrag(h)?L.DomUtil.addClass(h._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(h._icon,"vertexmarker-disabled"))})},_removeMarker(s){let a=s.target;if(!this._vertexValidation("remove",s))return;this.options.allowSelfIntersection||(this._coordsBeforeEdit=di(this._layer,this._layer.getLatLngs()));let h=this._layer.getLatLngs(),{indexPath:d,index:_,parentPath:w}=L.PM.Utils.findDeepMarkerIndex(this._markers,a);if(!d)return;let b=d.length>1?(0,is.default)(h,w):h,S=d.length>1?(0,is.default)(this._markers,w):this._markers,T=w[w.length-1]>0&&this._layer instanceof L.Polygon;if(!this.options.removeLayerBelowMinVertexCount&&!T&&(b.length<=2||this.isPolygon()&&b.length<=3)){this._flashLayer();return}b.splice(_,1),this._layer.setLatLngs(h),this.isPolygon()&&b.length<=2&&b.splice(0,b.length);let O=!1;if(b.length<=1&&(b.splice(0,b.length),w.length>1&&d.length>1&&(h=Ys(h)),this._layer.setLatLngs(h),this._initMarkers(),O=!0),sr(h)||this._layer.remove(),h=Ys(h),this._layer.setLatLngs(h),this._markers=Ys(this._markers),!O&&(S=d.length>1?(0,is.default)(this._markers,w):this._markers,a._middleMarkerPrev&&(this._markerGroup.removeLayer(a._middleMarkerPrev),this._removeFromCache(a._middleMarkerPrev)),a._middleMarkerNext&&(this._markerGroup.removeLayer(a._middleMarkerNext),this._removeFromCache(a._middleMarkerNext)),this._markerGroup.removeLayer(a),this._removeFromCache(a),S)){let X,W;if(this.isPolygon()?(X=(_+1)%S.length,W=(_+(S.length-1))%S.length):(W=_-1<0?void 0:_-1,X=_+1>=S.length?void 0:_+1),X!==W){let yt=S[W],Lt=S[X];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(yt,Lt)}S.splice(_,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(a,d),this._fireChange(this._layer.getLatLngs(),"Edit")},updatePolygonCoordsFromMarkerDrag(s){let a=this._layer.getLatLngs(),h=s.getLatLng(),{indexPath:d,index:_,parentPath:w}=L.PM.Utils.findDeepMarkerIndex(this._markers,s);(d.length>1?(0,is.default)(a,w):a).splice(_,1,h),this._layer.setLatLngs(a)},_getNeighborMarkers(s){let{indexPath:a,index:h,parentPath:d}=L.PM.Utils.findDeepMarkerIndex(this._markers,s),_=a.length>1?(0,is.default)(this._markers,d):this._markers,w=(h+1)%_.length,b=(h+(_.length-1))%_.length,S=_[b],T=_[w];return{prevMarker:S,nextMarker:T}},_checkMarkerAllowedToDrag(s){let{prevMarker:a,nextMarker:h}=this._getNeighborMarkers(s),d=L.polyline([a.getLatLng(),s.getLatLng()]),_=L.polyline([s.getLatLng(),h.getLatLng()]),w=ar(this._layer.toGeoJSON(15),d.toGeoJSON(15)).features.length,b=ar(this._layer.toGeoJSON(15),_.toGeoJSON(15)).features.length;return s.getLatLng()===this._markers[0][0].getLatLng()?b+=1:s.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(w+=1),!(w<=2&&b<=2)},_onMarkerDragStart(s){let a=s.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),!this._vertexValidation("move",s))return;let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,a);this._fireMarkerDragStart(s,h),this.options.allowSelfIntersection||(this._coordsBeforeEdit=di(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(a):this._markerAllowedToDrag=null},_onMarkerDrag(s){let a=s.target;if(!this._vertexValidationDrag(a))return;let{indexPath:h,index:d,parentPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,a);if(!h)return;if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1){this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),this._handleLayerStyle();return}this.updatePolygonCoordsFromMarkerDrag(a);let w=h.length>1?(0,is.default)(this._markers,_):this._markers,b=(d+1)%w.length,S=(d+(w.length-1))%w.length,T=a.getLatLng(),O=w[S].getLatLng(),X=w[b].getLatLng();if(a._middleMarkerNext){let W=L.PM.Utils.calcMiddleLatLng(this._map,T,X);a._middleMarkerNext.setLatLng(W)}if(a._middleMarkerPrev){let W=L.PM.Utils.calcMiddleLatLng(this._map,T,O);a._middleMarkerPrev.setLatLng(W)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(s,h),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(s){let a=s.target;if(!this._vertexValidationDragEnd(a))return;let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,a),d=!this.options.allowSelfIntersection&&this.hasSelfIntersection();d&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(d=!1);let _=!this.options.allowSelfIntersection&&d;if(this._fireMarkerDragEnd(s,h,_),_){this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),this._fireLayerReset(s,h);return}!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_onVertexClick(s){let a=s.target;if(a._dragging)return;let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,a);this._fireVertexClick(s,h)}}),jn.Polygon=jn.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag(s){let{prevMarker:a,nextMarker:h}=this._getNeighborMarkers(s),d=L.polyline([a.getLatLng(),s.getLatLng()]),_=L.polyline([s.getLatLng(),h.getLatLng()]),w=ar(this._layer.toGeoJSON(15),d.toGeoJSON(15)).features.length,b=ar(this._layer.toGeoJSON(15),_.toGeoJSON(15)).features.length;return!(w<=2&&b<=2)}}),jn.Rectangle=jn.Polygon.extend({_shape:"Rectangle",_initMarkers(){let s=this._map,a=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,s.addLayer(this._markerGroup),this._markers=[],this._markers[0]=a.map(this._createMarker,this),[this._cornerMarkers]=this._markers,this._layer.getLatLngs()[0].forEach((h,d)=>{let _=this._cornerMarkers.find(w=>w._index===d);_&&_.setLatLng(h)})},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker(s,a){let h=new L.Marker(s,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(h,"vertexPane"),h._origLatLng=s,h._index=a,h._pmTempLayer=!0,h.on("click",this._onVertexClick,this),this._markerGroup.addLayer(h),h},_addMarkerEvents(){this._markers[0].forEach(s=>{s.on("dragstart",this._onMarkerDragStart,this),s.on("drag",this._onMarkerDrag,this),s.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||s.on("contextmenu",this._removeMarker,this)})},_removeMarker(){return null},_onMarkerDragStart(s){if(!this._vertexValidation("move",s))return;let a=s.target,h=this._cornerMarkers;a._oppositeCornerLatLng=h.find(_=>_._index===(a._index+2)%4).getLatLng(),a._snapped=!1;let{indexPath:d}=L.PM.Utils.findDeepMarkerIndex(this._markers,a);this._fireMarkerDragStart(s,d)},_onMarkerDrag(s){let a=s.target;if(!this._vertexValidationDrag(a)||a._index===void 0)return;this._adjustRectangleForMarkerMove(a);let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,a);this._fireMarkerDrag(s,h),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(s){let a=s.target;if(!this._vertexValidationDragEnd(a))return;this._cornerMarkers.forEach(d=>{delete d._oppositeCornerLatLng});let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,a);this._fireMarkerDragEnd(s,h),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_adjustRectangleForMarkerMove(s){L.extend(s._origLatLng,s._latlng);let a=L.PM.Utils._getRotatedRectangle(s.getLatLng(),s._oppositeCornerLatLng,this.getAngle(),this._map);this._layer.setLatLngs(a),this._adjustAllMarkers(s),this._layer.redraw()},_adjustAllMarkers(s){let a=this._layer.getLatLngs()[0];if(a&&a.length!==4&&a.length>0)a.forEach((h,d)=>{this._cornerMarkers[d].setLatLng(h)}),this._cornerMarkers.slice(a.length).forEach(h=>{h.setLatLng(a[0])});else if(!a||!a.length)console.error("The layer has no LatLngs");else{let h=a.findIndex(d=>s.getLatLng().equals(d));h>-1?(this._cornerMarkers[(s._index+1)%4].setLatLng(a[(h+1)%4]),this._cornerMarkers[(s._index+2)%4].setLatLng(a[(h+2)%4]),this._cornerMarkers[(s._index+3)%4].setLatLng(a[(h+3)%4])):this._cornerMarkers.forEach(d=>{d.setLatLng(a[d._index])})}},_findCorners(){this._angle===void 0&&this.setInitAngle(Wn(this._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let s=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(s[0],s[2],this.getAngle(),this._map||this)}}),jn.CircleMarker=jn.extend({_shape:"CircleMarker",initialize(s){this._layer=s,this._enabled=!1,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._updateHiddenPolyCircle()},enable(s={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,s),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._extendingEnable(),this._updateHiddenPolyCircle(),this._fireEnable()},_extendingEnable(){this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this)},disable(){this.dragging()||(this._map||(this._map=this._layer._map),this._map&&this.enabled()&&(this.layerDragEnabled()&&this.disableLayerDrag(),this._helperLayers&&(this._helperLayers.clearLayers(),this._helperLayers.removeFrom(this._map)),this.options[this._editableOption]?(this._map.off("move",this._syncMarkers,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this),this._extendingDisable(),this._layer.off("remove",this.disable,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1))},_extendingDisable(){this._layer.off("contextmenu",this._removeMarker,this)},enabled(){return this._enabled},toggleEdit(s){this.enabled()?this.disable():this.enable(s)},applyOptions(){this.options[this._editableOption]?(this._initMarkers(),this._map.on("move",this._syncMarkers,this),this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._disableSnapping()):(this.options.draggable&&this.enableLayerDrag(),this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this._initSnappableMarkersDrag():this._disableSnappingDrag()),this._extendingApplyOptions()},_extendingApplyOptions(){this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers(){let s=this._map;this._helperLayers&&(this._helperLayers.removeFrom(s),this._helperLayers.clearLayers()),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(s);let a=this._layer.getLatLng(),h=this._layer._radius,d=this._getLatLngOnCircle(a,h);this._centerMarker=this._createCenterMarker(a),this._outerMarker=this._createOuterMarker(d),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle(s,a){let h=this._map.project(s),d=L.point(h.x+a,h.y);return this._map.unproject(d)},_createHintLine(s,a){let h=s.getLatLng(),d=a.getLatLng();this._hintline=L.polyline([h,d],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker(s){let a=this._createMarker(s);return this.options.draggable?(L.DomUtil.addClass(a._icon,"leaflet-pm-draggable"),a.on("move",this._moveCircle,this)):a.dragging.disable(),a},_createOuterMarker(s){let a=this._createMarker(s);return a.on("drag",this._resizeCircle,this),a},_createMarker(s){let a=new L.Marker(s,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(a,"vertexPane"),a._origLatLng=s,a._pmTempLayer=!0,a.on("dragstart",this._onMarkerDragStart,this),a.on("drag",this._onMarkerDrag,this),a.on("dragend",this._onMarkerDragEnd,this),a.on("click",this._onVertexClick,this),this._helperLayers.addLayer(a),a},_moveCircle(s){if(s.target._cancelDragEventChain)return;let a=this._centerMarker.getLatLng();this._layer.setLatLng(a);let h=this._layer._radius,d=this._getLatLngOnCircle(a,h);this._outerMarker._latlng=d,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers(){let s=this._layer.getLatLng(),a=this._layer._radius,h=this._getLatLngOnCircle(s,a);this._outerMarker.setLatLng(h),this._centerMarker.setLatLng(s),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius(){let s=this._centerMarker.getLatLng(),a=this._outerMarker.getLatLng(),h=this._distanceCalculation(s,a);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(h),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine(){let s=this._centerMarker.getLatLng(),a=this._outerMarker.getLatLng();this._hintline.setLatLngs([s,a])},_removeMarker(){this.options[this._editableOption]&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart(s){this._vertexValidation("move",s)&&this._fireMarkerDragStart(s)},_onMarkerDrag(s){let a=s.target;a instanceof L.Marker&&!this._vertexValidationDrag(a)||this._fireMarkerDrag(s)},_onMarkerDragEnd(s){this._extedingMarkerDragEnd();let a=s.target;this._vertexValidationDragEnd(a)&&(this.options[this._editableOption]&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(s))},_extedingMarkerDragEnd(){this._map.pm.Draw.CircleMarker._layerIsDragging=!1},_initSnappableMarkersDrag(){let s=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,s.off("pm:drag",this._handleSnapping,this),s.on("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.on("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this),s.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag(){let s=this._layer;s.off("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle(){let s=this._layer._map||this._map;if(s){let a=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),s,this._layer.getLatLng()),h=L.circle(this._layer.getLatLng(),this._layer.options);h.setRadius(a);let d=s&&s.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(h,200,!d).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(h,200,!d),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker(){let s=this._centerMarker.getLatLng(),a=this._outerMarker.getLatLng(),h=this._distanceCalculation(s,a);return this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?a=Dr(this._map,s,a,this._getMinDistanceInMeter(s)):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&(a=Dr(this._map,s,a,this._getMaxDistanceInMeter(s))),a},_handleOuterMarkerSnapping(){if(this._outerMarker._snapped){let s=this._centerMarker.getLatLng(),a=this._outerMarker.getLatLng(),h=this._distanceCalculation(s,a);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._outerMarker.setLatLng(this._outerMarker._orgLatLng):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_distanceCalculation(s,a){return this._map.project(s).distanceTo(this._map.project(a))},_getMinDistanceInMeter(s){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,s)},_getMaxDistanceInMeter(s){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,s)},_onVertexClick(s){s.target._dragging||this._fireVertexClick(s,void 0)}}),jn.Circle=jn.CircleMarker.extend({_shape:"Circle",initialize(s){this._layer=s,this._enabled=!1,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._updateHiddenPolyCircle()},enable(s){L.PM.Edit.CircleMarker.prototype.enable.call(this,s||{})},_extendingEnable(){},_extendingDisable(){this._layer.off("remove",this.disable,this);let s=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(s,"leaflet-pm-draggable")},_extendingApplyOptions(){},_syncMarkers(){},_removeMarker(){},_onDragStart(){},_extedingMarkerDragEnd(){},_updateHiddenPolyCircle(){let s=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!s).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!s),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_distanceCalculation(s,a){return this._map.distance(s,a)},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_onVertexClick(s){s.target._dragging||this._fireVertexClick(s,void 0)}}),jn.ImageOverlay=jn.extend({_shape:"ImageOverlay",initialize(s){this._layer=s,this._enabled=!1},toggleEdit(s){this.enabled()?this.disable():this.enable(s)},enabled(){return this._enabled},enable(s={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,s),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()}},disable(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners(){let s=this._layer.getBounds(),a=s.getNorthWest(),h=s.getNorthEast(),d=s.getSouthEast(),_=s.getSouthWest();return[a,h,d,_]}}),jn.Text=jn.extend({_shape:"Text",initialize(s){this._layer=s,this._enabled=!1},enable(s){if(L.Util.setOptions(this,s),!!this.textArea){if(!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()}},disable(){if(!this.enabled())return;this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");let s=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),s.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1},enabled(){return this._enabled},toggleEdit(s){this.enabled()?this.disable():this.enable(s)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers(){let s=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,s.off("pm:drag",this._handleSnapping,this),s.on("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.on("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this),s.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let s=this._layer;s.off("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this)},_autoResize(){this.textArea.style.height="1px",this.textArea.style.width="1px";let s=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,a=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height=`${s}px`,this.textArea.style.width=`${a}px`,this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur(){this._disableOnBlurActive=!0,setTimeout(()=>{this.enabled()&&L.DomEvent.on(document,"click",this._documentClick,this)},100)},_documentClick(s){s.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange(s={}){let a=this._hasFocus;this._hasFocus=s.type==="focus",!a!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus(){return this._hasFocus},getElement(){return this.textArea},setText(s){s&&(this.textArea.value=s),this._autoResize()},getText(){return this.textArea.value},_initTextMarker(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){let a=this.options.className.split(" ");this.textArea.classList.add(...a)}let s=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(s),this._layer.once("add",this._createTextMarker,this)},_createTextMarker(s=!1){this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),s===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection(s){s.preventDefault()}});var bi=function(s,a,h,d,_,w){this._matrix=[s,a,h,d,_,w]};bi.init=()=>new L.PM.Matrix(1,0,0,1,0,0),bi.prototype={transform(s){return this._transform(s.clone())},_transform(s){let a=this._matrix,{x:h,y:d}=s;return s.x=a[0]*h+a[1]*d+a[4],s.y=a[2]*h+a[3]*d+a[5],s},untransform(s){let a=this._matrix;return new L.Point((s.x/a[0]-a[4])/a[0],(s.y/a[2]-a[5])/a[2])},clone(){let s=this._matrix;return new L.PM.Matrix(s[0],s[1],s[2],s[3],s[4],s[5])},translate(s){if(s===void 0)return new L.Point(this._matrix[4],this._matrix[5]);let a,h;return typeof s=="number"?(a=s,h=s):(a=s.x,h=s.y),this._add(1,0,0,1,a,h)},scale(s,a){if(s===void 0)return new L.Point(this._matrix[0],this._matrix[3]);let h,d;return a=a||L.point(0,0),typeof s=="number"?(h=s,d=s):(h=s.x,d=s.y),this._add(h,0,0,d,a.x,a.y)._add(1,0,0,1,-a.x,-a.y)},rotate(s,a){let h=Math.cos(s),d=Math.sin(s);return a=a||new L.Point(0,0),this._add(h,d,-d,h,a.x,a.y)._add(1,0,0,1,-a.x,-a.y)},flip(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add(s,a,h,d,_,w){let b=[[],[],[]],S=this._matrix,T=[[S[0],S[2],S[4]],[S[1],S[3],S[5]],[0,0,1]],O=[[s,h,_],[a,d,w],[0,0,1]],X;s&&s instanceof L.PM.Matrix&&(S=s._matrix,O=[[S[0],S[2],S[4]],[S[1],S[3],S[5]],[0,0,1]]);for(let W=0;W<3;W+=1)for(let yt=0;yt<3;yt+=1){X=0;for(let Lt=0;Lt<3;Lt+=1)X+=T[W][Lt]*O[Lt][yt];b[W][yt]=X}return this._matrix=[b[0][0],b[1][0],b[0][1],b[1][1],b[0][2],b[1][2]],this}};var wn=bi,Gr={calcMiddleLatLng(s,a,h){let d=s.project(a),_=s.project(h);return s.unproject(d._add(_)._divideBy(2))},findLayers(s){let a=[];return s.eachLayer(h=>{(h instanceof L.Polyline||h instanceof L.Marker||h instanceof L.Circle||h instanceof L.CircleMarker||h instanceof L.ImageOverlay)&&a.push(h)}),a=a.filter(h=>!!h.pm),a=a.filter(h=>!h._pmTempLayer),a=a.filter(h=>!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1),a},circleToPolygon(s,a=60,h=!0){let d=s.getLatLng(),_=s.getRadius(),w=Ls(d,_,a,0,h),b=[];for(let S=0;S<w.length;S+=1){let T=[w[S].lat,w[S].lng];b.push(T)}return L.polygon(b,s.options)},disablePopup(s){s.getPopup()&&(s._tempPopupCopy=s.getPopup(),s.unbindPopup())},enablePopup(s){s._tempPopupCopy&&(s.bindPopup(s._tempPopupCopy),delete s._tempPopupCopy)},_fireEvent(s,a,h,d=!1){s.fire(a,h,d);let{groups:_}=this.getAllParentGroups(s);_.forEach(w=>{w.fire(a,h,d)})},getAllParentGroups(s){let a=[],h=[],d=_=>{for(let w in _._eventParents)if(a.indexOf(w)===-1){a.push(w);let b=_._eventParents[w];h.push(b),d(b)}};return!s._pmLastGroupFetch||!s._pmLastGroupFetch.time||new Date().getTime()-s._pmLastGroupFetch.time>1e3?(d(s),s._pmLastGroupFetch={time:new Date().getTime(),groups:h,groupIds:a},{groupIds:a,groups:h}):{groups:s._pmLastGroupFetch.groups,groupIds:s._pmLastGroupFetch.groupIds}},createGeodesicPolygon:Ls,getTranslation:Oe,findDeepCoordIndex(s,a,h=!0){let d,_=b=>(S,T)=>{let O=b.concat(T);if(h){if(S.lat&&S.lat===a.lat&&S.lng===a.lng)return d=O,!0}else if(S.lat&&L.latLng(S).equals(a))return d=O,!0;return Array.isArray(S)&&S.some(_(O))};s.some(_([]));let w={};return d&&(w={indexPath:d,index:d[d.length-1],parentPath:d.slice(0,d.length-1)}),w},findDeepMarkerIndex(s,a){let h,d=w=>(b,S)=>{let T=w.concat(S);return b._leaflet_id===a._leaflet_id?(h=T,!0):Array.isArray(b)&&b.some(d(T))};s.some(d([]));let _={};return h&&(_={indexPath:h,index:h[h.length-1],parentPath:h.slice(0,h.length-1)}),_},_getIndexFromSegment(s,a){if(a&&a.length===2){let h=this.findDeepCoordIndex(s,a[0]),d=this.findDeepCoordIndex(s,a[1]),_=Math.max(h.index,d.index);return(h.index===0||d.index===0)&&_!==1&&(_+=1),{indexA:h,indexB:d,newIndex:_,indexPath:h.indexPath,parentPath:h.parentPath}}return null},_getRotatedRectangle(s,a,h,d){let _=oi(d,s),w=oi(d,a),b=h*Math.PI/180,S=Math.cos(b),T=Math.sin(b),O=(w.x-_.x)*S+(w.y-_.y)*T,X=(w.y-_.y)*S-(w.x-_.x)*T,W=O*S+_.x,yt=O*T+_.y,Lt=-X*T+_.x,jt=X*S+_.y,ie=ns(d,_),de=ns(d,{x:W,y:yt}),Ke=ns(d,w),J=ns(d,{x:Lt,y:jt});return[ie,de,Ke,J]},pxRadiusToMeterRadius(s,a,h){let d=a.project(h),_=L.point(d.x+s,d.y);return a.distance(a.unproject(_),h)}},Gu=Gr;L.PM=L.PM||{version:Bt.version,Map:Qs,Toolbar:ja,Draw:Nn,Edit:jn,Utils:Gu,Matrix:wn,activeLang:"en",optIn:!1,initialize(s){this.addInitHooks(s)},setOptIn(s){this.optIn=!!s},addInitHooks(){function s(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}L.Map.addInitHook(s);function a(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}L.LayerGroup.addInitHook(a);function h(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}L.Marker.addInitHook(h);function d(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}L.CircleMarker.addInitHook(d);function _(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}L.Polyline.addInitHook(_);function w(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}L.Polygon.addInitHook(w);function b(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}L.Rectangle.addInitHook(b);function S(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}L.Circle.addInitHook(S);function T(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))}L.ImageOverlay.addInitHook(T)},reInitLayer(s){s instanceof L.LayerGroup&&s.eachLayer(a=>{this.reInitLayer(a)}),s.pm||L.PM.optIn&&s.options.pmIgnore!==!1||s.options.pmIgnore||(s instanceof L.Map?s.pm=new L.PM.Map(s):s instanceof L.Marker?s.options.textMarker?(s.pm=new L.PM.Edit.Text(s),s.pm._initTextMarker(),s.pm._createTextMarker(!1)):s.pm=new L.PM.Edit.Marker(s):s instanceof L.Circle?s.pm=new L.PM.Edit.Circle(s):s instanceof L.CircleMarker?s.pm=new L.PM.Edit.CircleMarker(s):s instanceof L.Rectangle?s.pm=new L.PM.Edit.Rectangle(s):s instanceof L.Polygon?s.pm=new L.PM.Edit.Polygon(s):s instanceof L.Polyline?s.pm=new L.PM.Edit.Line(s):s instanceof L.LayerGroup?s.pm=new L.PM.Edit.LayerGroup(s):s instanceof L.ImageOverlay&&(s.pm=new L.PM.Edit.ImageOverlay(s)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick(s){let a=this._map.mouseEventToLayerPoint(s),h,d;for(let _=this._drawFirst;_;_=_.next)h=_.layer,h.options.interactive&&h._containsPoint(a)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(h))&&(d=h);d&&(L.DomEvent.fakeStop(s),this._fireEvent([d],s))}}),L.PM.initialize()})()),Jd}em();const yu="http://127.0.0.1:8000".trim()||"http://127.0.0.1:8000";function Ai(e){const i=yu.endsWith("/")?yu.slice(0,-1):yu,o=e.startsWith("/")?e:`/${e}`;return`${i}${o}`}const nm=yu;console.log("[rasterApi] API_BASE_URL =",yu);async function im(){const e=await fetch(Ai("/api/v1/aoi")),i=await e.text();if(!e.ok)throw console.error("[rasterApi] fetchGlobalAOI failed:",e.status,i),new Error("Failed to load global AOI");return JSON.parse(i)}async function rm({rasterLayerId:e,userClipGeoJSON:i,zoom:o}){const c=await fetch(Ai("/api/v1/rasters/clip"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({raster_layer_id:e,user_clip_geojson:i})}),f=await c.text();if(!c.ok){console.error("[rasterApi] clipRaster failed:",c.status,f);let g="Clip failed";try{const v=JSON.parse(f),E=(v==null?void 0:v.detail)||(v==null?void 0:v.message)||f;c.status===422&&(E.includes("AOI contains no raster data")||E.includes("no raster data for this layer")||E.includes("AOI outside raster extent")||E.includes("AOI too small")||E.includes("no intersect"))?g="AOI doesn't overlap this raster. Try a different area.":g=E}catch{g=f||"Clip failed"}const y=new Error(g);throw y.status=c.status,y.detail=g,y}return f?JSON.parse(f):{}}async function sm({rasterLayerId:e,lat:i,lng:o}){const c=await fetch(Ai("/api/v1/rasters/sample"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rasterLayerId:e,lon:o,lat:i})}),f=await c.text();if(!c.ok)throw console.error("[rasterApi] sampleRasterValue failed:",c.status,f),new Error("Failed to sample raster value");return f?JSON.parse(f):{}}async function om({rasterLayerId:e,lat:i,lon:o}){const c=Ai(`/api/v1/rasters/value?layer_id=${e}&lat=${i}&lon=${o}`),f=await fetch(c,{method:"GET",headers:{"Content-Type":"application/json"}}),g=await f.text();if(!f.ok)throw console.error("[rasterApi] getRasterValueAt failed:",f.status,g),new Error("Failed to get value at point");return g?JSON.parse(g):{}}async function am(e){const i=await fetch(Ai(`/api/v1/geopdf/${e}`),{method:"DELETE"}),o=await i.text();if(!i.ok)try{const c=JSON.parse(o),f=(c==null?void 0:c.detail)||JSON.stringify(c);throw new Error(`Delete failed (${i.status}): ${f}`)}catch{throw new Error(`Delete failed (${i.status})`)}return o?JSON.parse(o):{}}async function lm(){const e=await fetch(Ai("/api/v1/datasets")),i=await e.text();if(!e.ok)throw new Error(`Failed to list datasets: ${e.status}`);return i?JSON.parse(i):{}}function um(e){const i=Ai(`/api/v1/datasets/${e}/download`);window.open(i,"_blank")}async function Yd(e){const i=e.split("/").pop();if(!i)throw new Error("Invalid overlay URL: cannot extract filename");const o=await fetch(Ai(`/api/v1/rasters/overlays/${i}`),{method:"DELETE"}),c=await o.text();if(!o.ok){console.error("[rasterApi] deleteOverlay failed:",o.status,c);try{const f=JSON.parse(c),g=(f==null?void 0:f.detail)||JSON.stringify(f);throw new Error(`Delete failed (${o.status}): ${g}`)}catch{throw new Error(`Delete failed (${o.status})`)}}return c?JSON.parse(c):{}}async function dh(e,i){console.log("[rasterApi] Downloading blob:",e);const o=await fetch(e,{credentials:"omit"});if(!o.ok)throw new Error(`Download failed: ${o.status}`);const c=await o.blob(),f=URL.createObjectURL(c),g=document.createElement("a");g.href=f,g.download=i,document.body.appendChild(g),g.click(),g.remove(),URL.revokeObjectURL(f),console.log("[rasterApi] Blob downloaded successfully:",i)}var Ic={exports:{}},Oc,Qd;function hm(){if(Qd)return Oc;Qd=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Oc=e,Oc}var Dc,tp;function cm(){if(tp)return Dc;tp=1;var e=hm();function i(){}function o(){}return o.resetWarningCache=i,Dc=function(){function c(y,v,E,A,G,P){if(P!==e){var B=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw B.name="Invariant Violation",B}}c.isRequired=c;function f(){return c}var g={array:c,bigint:c,bool:c,func:c,number:c,object:c,string:c,symbol:c,any:c,arrayOf:f,element:c,elementType:c,instanceOf:f,node:c,objectOf:f,oneOf:f,oneOfType:f,shape:f,exact:f,checkPropTypes:o,resetWarningCache:i};return g.PropTypes=g,g},Dc}var ep;function fm(){return ep||(ep=1,Ic.exports=cm()()),Ic.exports}var dm=fm();const Pl=Dh(dm),pm="http://127.0.0.1:8000";function Zc({overlayUrl:e,bounds:i}){if(!e||!i)return console.warn("RasterOverlay: Missing overlayUrl or bounds, not rendering"),null;if(typeof i.west!="number"||typeof i.south!="number"||typeof i.east!="number"||typeof i.north!="number")return console.error("RasterOverlay: Invalid bounds structure",i),null;const o=e.startsWith("http")?e:`${pm}${e}`,c=[[i.south,i.west],[i.north,i.east]];return console.log("RasterOverlay: Rendering with bounds:",{west:i.west,south:i.south,east:i.east,north:i.north,leafletBounds:c}),I.jsx(qg,{url:o,bounds:c,opacity:1,interactive:!1,zIndex:200,className:"vmrc-raster-overlay raster-overlay-pixelated"})}Zc.propTypes={overlayUrl:Pl.string,bounds:Pl.shape({north:Pl.number,south:Pl.number,east:Pl.number,west:Pl.number})};function gm(e){try{return JSON.stringify(e)}catch(i){return console.warn("[LayerGroupManager] safeStringify failed, using fallback:",i),String((e==null?void 0:e.id)||(e==null?void 0:e.type)||"unstringifiable")}}function np(e){var i,o;if(!e)return null;try{let c=[];if(e.type==="FeatureCollection"?c=e.features||[]:e.type==="Feature"?c=[e]:e.type&&e.coordinates&&(c=[{geometry:e}]),c.length===0)return null;const f=(o=(i=c[0])==null?void 0:i.geometry)==null?void 0:o.coordinates;if(!f)return null;const g=v=>Array.isArray(v[0])?v.map(g):v.map(E=>typeof E=="number"?Number(E.toFixed(6)):E),y=g(f);return JSON.stringify(y)}catch(c){return console.warn("[LayerGroupManager] Error computing geometry hash:",c),null}}function mm({globalAoi:e,uploadedAois:i=[],drawnAoi:o,createdRasters:c=[],onRemoveAoi:f,onRemoveRaster:g,onRemoveRasterByAoiId:y}){const v=jo(),E=vt.useRef(null),A=vt.useRef(null),G=vt.useRef(null),P=vt.useRef(new Map),B=vt.useRef(null),V=vt.useRef(null),q=vt.useRef(new Map),Z=vt.useRef(new Map),Y=vt.useRef(new Map),ht=vt.useRef(new Map),lt=vt.useRef(new Map),Pt=vt.useRef(null),Ut=vt.useRef(new Map),Ot=vt.useRef(new Map),Gt=vt.useRef(!1),$t=vt.useCallback((Mt,At)=>{if(!Mt||typeof Mt!="object"){console.warn("[LayerGroupManager] tagAoiLayer skipped: not a Leaflet layer",{layer:Mt,aoiId:At,layerType:typeof Mt});return}Mt.__aoiId=At,Mt.options=Mt.options||{},Mt.options.__aoiId=At},[]),Vt=vt.useCallback((Mt,At)=>{if(!Mt||typeof Mt!="object"){console.warn("[LayerGroupManager] tagRasterOverlay skipped: not a Leaflet layer",{layer:Mt,rasterId:At,layerType:typeof Mt});return}Mt.__rasterId=At,Mt.options=Mt.options||{},Mt.options.__rasterId=At},[]),Qt=vt.useCallback(()=>{if(!v)return;const Mt=mt=>{var ft,Rt,ct,K;if(mt===V.current||mt.__locked||(ft=mt.options)!=null&&ft.__locked)return!1;if((Rt=E.current)!=null&&Rt.hasLayer(mt)||(ct=A.current)!=null&&ct.hasLayer(mt))return!0;for(const[_t,Dt]of P.current.entries()){if(Dt===mt)return!0;Dt.eachLayer&&Dt.eachLayer(Ht=>{if(Ht===mt)return!0})}return!!(B.current===mt||mt.__aoiId||(K=mt.options)!=null&&K.__aoiId)},At=[];v.eachLayer(mt=>{var ct,K,_t,Dt;if(!mt.options||!(mt instanceof ui.GeoJSON||mt instanceof ui.Polygon||mt instanceof ui.Rectangle||mt instanceof ui.Path)||mt.__locked||(ct=mt.options)!=null&&ct.__locked||mt===V.current||Mt(mt))return;const ft=((K=mt.options)==null?void 0:K.pmTempLayer)||((_t=mt.options)==null?void 0:_t._pmTempLayer)||mt._pmTempLayer,Rt=!!((Dt=mt.options)!=null&&Dt.dashArray)&&String(mt.options.dashArray).length>0;(ft||Rt&&!Mt(mt))&&At.push(mt)});for(const mt of At)try{console.log("[LayerGroupManager] clearPmTempLayers: Removing Geoman temp/hint layer:",mt),v.removeLayer(mt)}catch(ft){console.warn("[LayerGroupManager] clearPmTempLayers: Error removing temp layer:",ft)}At.length>0&&console.log(`[LayerGroupManager] clearPmTempLayers: Cleared ${At.length} Geoman temp/hint layer(s)`)},[v]),zt=vt.useCallback((Mt,At,mt,ft,Rt)=>{if(!Mt||!At)return console.warn("[LayerGroupManager] registerAoiLayer: Missing aoiId or geojson"),null;const ct=gm(At),K=q.current.get(Mt);if(K){if(K.hash===ct)return console.log(`[LayerGroupManager]  AOI ${Mt} already registered (same hash) - returning existing layer`),console.log("[AOI] registry size",q.current.size),K.layer;if(console.log(`[LayerGroupManager] AOI ${Mt} hash changed - removing old layer`),K.layer&&v)try{Rt&&Rt.hasLayer(K.layer)?Rt.removeLayer(K.layer):v.hasLayer&&v.hasLayer(K.layer)&&v.removeLayer(K.layer)}catch(Ht){console.warn("[LayerGroupManager] Error removing old AOI layer:",Ht)}q.current.delete(Mt)}const _t=ui.geoJSON(At,mt);$t(_t,Mt),_t.__locked=!1,q.current.set(Mt,{layer:_t,hash:ct}),ht.current.set(Mt,_t),ft==="upload"?P.current.set(Mt,_t):ft==="draw"&&(B.current=_t),console.log(`[LayerGroupManager]  Registered AOI layer: aoiId=${Mt}, type=${ft}`),console.log("[AOI] registry size",q.current.size);const Dt=Ot.current.get(Mt);return Dt&&(console.log(`[LayerGroupManager] Attaching pending overlay for aoiId=${Mt}`),Ot.current.delete(Mt),Vt(Dt.overlayLayer,Dt.rasterId),$t(Dt.overlayLayer,Mt),Dt.overlayLayer.__createdRasterId=Dt.rasterId,Z.current.set(Dt.rasterId,{layer:Dt.overlayLayer,bounds:Dt.overlayLayer.__bounds,aoiId:Mt}),Y.current.set(Mt,Dt.rasterId),lt.current.set(Mt,{aoiLayer:_t,overlayLayer:Dt.overlayLayer,createdRasterId:Dt.rasterId}),console.log(`[PAIR] attached pending overlay: aoiId=${Mt}, rasterId=${Dt.rasterId}`)),_t},[v]),te=vt.useCallback((Mt,At,mt,ft)=>{var K,_t;if(!Mt||!At||!mt){console.warn("[LayerGroupManager] setRasterOverlayForAoi: Missing aoiId, rasterId, or overlayLayer");return}if(!q.current.has(Mt)&&!ht.current.has(Mt)){console.warn(`[LayerGroupManager] setRasterOverlayForAoi: AOI layer not found for aoiId=${Mt} - storing as pending`),setTimeout(()=>{q.current.has(Mt)||ht.current.has(Mt)?te(Mt,At,mt,ft):Ot.current.set(Mt,{overlayLayer:mt,rasterId:At})},0);return}const Rt=Y.current.get(Mt);if(Rt){const Dt=Z.current.get(Rt);if(Dt&&Dt.layer){console.log(`[LayerGroupManager] Replacing overlay for AOI ${Mt} (old raster: ${Rt}, new raster: ${At})`);try{(K=G.current)!=null&&K.hasLayer(Dt.layer)&&G.current.removeLayer(Dt.layer),v.hasLayer&&v.hasLayer(Dt.layer)&&v.removeLayer(Dt.layer)}catch(Ht){console.warn("[LayerGroupManager] Error removing old overlay:",Ht)}Z.current.delete(Rt)}}Vt(mt,At),$t(mt,Mt),mt.__createdRasterId=At,mt.__bounds=ft,Z.current.set(At,{layer:mt,bounds:ft,aoiId:Mt}),Y.current.set(Mt,At);const ct=((_t=q.current.get(Mt))==null?void 0:_t.layer)||ht.current.get(Mt);ct&&lt.current.set(Mt,{aoiLayer:ct,overlayLayer:mt,createdRasterId:At}),console.log(`[LayerGroupManager]  Set raster overlay for AOI: aoiId=${Mt}, rasterId=${At}`),console.log("[Overlay] overlays size",Z.current.size,"pairs",Y.current.size)},[v]),ee=te,Fe=vt.useCallback(Mt=>{var Rt;if(!Mt){console.warn("[LayerGroupManager] removeOverlayForAoiId: No aoiId provided");return}const At=lt.current.get(Mt);if(!At){console.log(`[LayerGroupManager] removeOverlayForAoiId: No pair found for aoiId: ${Mt}`);return}const{overlayLayer:mt,createdRasterId:ft}=At;if(console.log(`[LayerGroupManager] removeOverlayForAoiId: Removing overlay only (Raster: ${ft}, AOI: ${Mt}) - AOI layer preserved`),mt)try{(Rt=G.current)!=null&&Rt.hasLayer(mt)&&G.current.removeLayer(mt),v.hasLayer&&v.hasLayer(mt)&&v.removeLayer(mt),console.log("[LayerGroupManager] removeOverlayForAoiId: Removed overlay layer from map")}catch(ct){console.warn("[LayerGroupManager] Error removing overlay:",ct)}return lt.current.delete(Mt),y&&Mt?(console.log(`[LayerGroupManager] removeOverlayForAoiId: Calling onRemoveRasterByAoiId(${Mt}) to remove raster from React state`),y(Mt)):g&&ft&&(console.log(`[LayerGroupManager] removeOverlayForAoiId: Calling onRemoveRaster(${ft}) to remove raster from React state`),g(ft)),console.log(`[LayerGroupManager] removeOverlayForAoiId:  Completed overlay removal (Raster: ${ft}, AOI: ${Mt}) - AOI layer preserved`),!0},[v,g,y]),Ie=vt.useCallback(Mt=>{var ct,K,_t,Dt;if(!Mt){console.warn("[LayerGroupManager] deletePairByAoiId: No aoiId provided");return}const At=lt.current.get(Mt);if(!At){console.warn(`[LayerGroupManager] deletePairByAoiId: No pair found for aoiId: ${Mt}`),console.warn("[LayerGroupManager] Available keys in pairsRef:",Array.from(lt.current.keys()));return}const{aoiLayer:mt,overlayLayer:ft,createdRasterId:Rt}=At;if(console.log(`[LayerGroupManager] deletePairByAoiId: Deleting pair (Raster: ${Rt}, AOI: ${Mt}) - FULL DELETE`),mt!=null&&mt.__locked||(ct=mt==null?void 0:mt.options)!=null&&ct.__locked||mt===V.current){console.log("[LayerGroupManager] deletePairByAoiId: Blocked deletion of locked AOI (base AOI)");return}if(ft)try{(K=G.current)!=null&&K.hasLayer(ft)&&G.current.removeLayer(ft),v.hasLayer&&v.hasLayer(ft)&&v.removeLayer(ft),console.log("[LayerGroupManager] deletePairByAoiId: Removed overlay layer from map")}catch(Ht){console.warn("[LayerGroupManager] Error removing overlay:",Ht)}if(mt&&v.hasLayer&&v.hasLayer(mt))try{(_t=E.current)!=null&&_t.hasLayer(mt)?E.current.removeLayer(mt):(Dt=A.current)!=null&&Dt.hasLayer(mt)?A.current.removeLayer(mt):v.removeLayer(mt),console.log("[LayerGroupManager] deletePairByAoiId: Removed AOI layer from map")}catch(Ht){console.warn("[LayerGroupManager] Error removing AOI layer:",Ht)}return lt.current.delete(Mt),Y.current.delete(Mt),P.current.has(Mt)&&P.current.delete(Mt),B.current===mt&&(B.current=null),ht.current.delete(Mt),q.current.delete(Mt),y&&Mt?(console.log(`[LayerGroupManager] deletePairByAoiId: Calling onRemoveRasterByAoiId(${Mt}) to remove raster from React state`),y(Mt)):g&&Rt&&(console.log(`[LayerGroupManager] deletePairByAoiId: Calling onRemoveRaster(${Rt}) to remove raster from React state`),g(Rt)),f&&Mt&&(console.log(`[LayerGroupManager] deletePairByAoiId: Calling onRemoveAoi(${Mt}) to remove AOI from React state`),f(Mt)),console.log(`[LayerGroupManager] deletePairByAoiId:  Completed FULL deletion of pair (Raster: ${Rt}, AOI: ${Mt})`),!0},[v,f,g,y]);return vt.useCallback(Mt=>{var mt,ft,Rt;if(!Mt)return;if(Mt.__locked||(mt=Mt.options)!=null&&mt.__locked||Mt===V.current){console.log("[LayerGroupManager] deletePairByAoiLayer: Blocked deletion of locked AOI (base AOI)");return}const At=Mt.__aoiId||((ft=Mt.options)==null?void 0:ft.__aoiId);if(!At){console.warn("[LayerGroupManager] deletePairByAoiLayer: AOI layer has no __aoiId");for(const[ct,K]of P.current.entries())if(K===Mt){Ie(ct);return}if(B.current===Mt){const ct=(Rt=Mt.options)==null?void 0:Rt.__aoiKey;ct&&f&&f(ct)}return}Ie(At)},[Ie,f]),vt.useEffect(()=>{if(v){if(!v.getPane("baseAoiPane")){const Mt=v.createPane("baseAoiPane");Mt.style.zIndex=350,Mt.style.pointerEvents="none",console.log("[LayerGroupManager] Created baseAoiPane (zIndex: 350, pointerEvents: none)")}if(!v.getPane("userAoiPane")){const Mt=v.createPane("userAoiPane");Mt.style.zIndex=450,console.log("[LayerGroupManager] Created userAoiPane (zIndex: 450)")}if(!v.getPane("rasterPane")){const Mt=v.createPane("rasterPane");Mt.style.zIndex=200,console.log("[LayerGroupManager] Created rasterPane (zIndex: 200)")}E.current||(E.current=ui.layerGroup().addTo(v),console.log("[LayerGroupManager] Created uploadedAoiLayerGroup")),A.current||(A.current=ui.layerGroup().addTo(v),console.log("[LayerGroupManager] Created drawnAoiLayerGroup")),G.current||(G.current=ui.layerGroup().addTo(v),console.log("[LayerGroupManager] Created overlayLayerGroup"))}},[v]),vt.useEffect(()=>{if(!v)return;const Mt=()=>{console.log("[LayerGroupManager] pm:create - clearing temp layers"),Qt()},At=()=>{console.log("[LayerGroupManager] pm:drawend - clearing temp layers"),Qt()},mt=Rt=>{Rt.enabled||(console.log("[LayerGroupManager] pm:globaldrawmodetoggled (disabled) - clearing temp layers"),Qt())},ft=Rt=>{Rt.enabled&&(console.log("[LayerGroupManager] pm:globalremovalmodetoggled (enabled) - clearing temp layers"),Qt())};return v.on("pm:create",Mt),v.on("pm:drawend",At),v.on("pm:globaldrawmodetoggled",mt),v.on("pm:globalremovalmodetoggled",ft),()=>{v.off("pm:create",Mt),v.off("pm:drawend",At),v.off("pm:globaldrawmodetoggled",mt),v.off("pm:globalremovalmodetoggled",ft)}},[v,Qt]),vt.useEffect(()=>{if(!v)return;const Mt=At=>{var Rt,ct,K,_t,Dt;const mt=At.layer;if(!mt)return;if(mt.__locked||(Rt=mt.options)!=null&&Rt.__locked||mt===V.current){console.log("[LayerGroupManager] pm:remove: Blocked removal of locked layer (AOI_diss)"),(ct=At.preventDefault)==null||ct.call(At);return}const ft=mt.__aoiId||((K=mt.options)==null?void 0:K.__aoiId)||((Dt=(_t=mt.feature)==null?void 0:_t.properties)==null?void 0:Dt.__aoiId);if(!ft){console.warn("[LayerGroupManager] pm:remove: Layer has no __aoiId, cannot delete pair"),console.warn("[LayerGroupManager] Available keys in pairsRef:",Array.from(lt.current.keys()));return}console.log("[PAIR] erase",ft,mt._leaflet_id),Ie(ft)};return v.on("pm:remove",Mt),()=>{v.off("pm:remove",Mt)}},[v,Ie]),vt.useEffect(()=>{if(!v)return;const Mt=mt=>{Gt.current=!!mt.enabled,console.log(`[LayerGroupManager] Removal mode ${Gt.current?"enabled":"disabled"}`)};v.on("pm:globalremovalmodetoggled",Mt);const At=mt=>{if(!Gt.current||!(mt!=null&&mt.latlng)||!Number.isFinite(mt.latlng.lat)||!Number.isFinite(mt.latlng.lng))return;const ft=mt.latlng;G.current&&G.current.eachLayer(Rt=>{var K,_t,Dt,Ht,se;let ct=null;if(Rt.__bounds)try{ct=ui.latLngBounds(Rt.__bounds)}catch{ct=(K=Rt.getBounds)==null?void 0:K.call(Rt)}else ct=(_t=Rt.getBounds)==null?void 0:_t.call(Rt);if(!ct){const Jt=((Dt=Rt.options)==null?void 0:Dt.__overlayId)||Rt._leaflet_id;console.warn(`[LayerGroupManager] Overlay ${Jt} has no bounds, skipping erase check`);return}try{if(!ct.isValid||!ct.isValid())return;if(ct.contains(ft)){const Jt=Rt.__aoiId||((Ht=Rt.options)==null?void 0:Ht.__aoiId);if(!Jt){const $e=((se=Rt.options)==null?void 0:se.__overlayId)||Rt._leaflet_id;console.warn(`[LayerGroupManager] erase click hit overlay ${$e} but no aoiId found`);return}console.log("[LayerGroupManager]  Erase click hit overlay - deleting pair",{overlayAoiId:Jt,overlayId:Rt._leaflet_id,rasterId:Rt.__createdRasterId}),Ie(Jt);return}}catch(Jt){console.warn("[LayerGroupManager] Error checking bounds for overlay:",Jt)}})};return v.on("click",At),()=>{v.off("pm:globalremovalmodetoggled",Mt),v.off("click",At)}},[v,Ie]),vt.useEffect(()=>{if(v){if(V.current&&(v.removeLayer(V.current),V.current=null),e){const Mt=ui.geoJSON(e,{style:{color:"#00BFFF",weight:3,fillColor:"#00BFFF",fillOpacity:.05},pane:"baseAoiPane",interactive:!1,pmIgnore:!0});Mt.options.__locked=!0,Mt.__locked=!0,Mt.options.pmIgnore=!0,Mt._pmIgnore=!0,Mt.pm&&Mt.pm.disable(),Mt.eachLayer&&Mt.eachLayer(At=>{At.options.__locked=!0,At.__locked=!0,At.options.pmIgnore=!0,At.options.interactive=!1,At._pmIgnore=!0,At.pm&&At.pm.disable()}),Mt.addTo(v),V.current=Mt,console.log("[LayerGroupManager] Added AOI_diss directly to map:",{interactive:Mt.options.interactive,pmIgnore:Mt.options.pmIgnore,__locked:Mt.options.__locked,pane:Mt.options.pane})}return()=>{V.current&&(v.removeLayer(V.current),V.current=null)}}},[v,e]),vt.useEffect(()=>{if(!v||!E.current)return;const Mt=new Set(i.map(mt=>mt.id)),At=new Set(P.current.keys());At.forEach(mt=>{if(!Mt.has(mt)){const ft=P.current.get(mt);if(ft)if(i.length>0||At.size===1)console.log(`[LayerGroupManager] Explicit removal of uploaded AOI ${mt} - deleting pair`),Ie(mt);else{console.log(`[LayerGroupManager] Skipping removal of uploaded AOI ${mt} - may be temporary re-render (array empty)`);return}else E.current.hasLayer(ft)&&E.current.removeLayer(ft),P.current.delete(mt),ht.current.delete(mt)}}),i.forEach(mt=>{if(!P.current.has(mt.id)&&mt.geojson){const ft=mt.geojson;if(!(ft&&(ft.type==="FeatureCollection"||ft.type==="Feature"||ft.type==="Polygon"||ft.type==="MultiPolygon"))){console.warn("[LayerGroupManager] Skipping invalid GeoJSON for uploaded AOI:",ft);return}const ct=zt(mt.id,ft,{color:"#f97316",weight:2,fillOpacity:.15,pane:"userAoiPane",interactive:!0,pmIgnore:!1},"upload",E.current);if(!ct){console.warn("[LayerGroupManager] Failed to register uploaded AOI layer:",mt.id);return}ct.options.__aoiKey||(ct.options.__aoiKey=mt.id,ct.options.__aoiType="uploaded",ct.options.__aoiId=mt.id,ct.__aoiId=mt.id,ct.__locked=!1,ct.eachLayer?ct.eachLayer(K=>{K.options.__aoiKey=mt.id,K.options.__aoiType="uploaded",K.options.__aoiId=mt.id,K.__aoiId=mt.id,K.__locked=!1,K.options.interactive=!0,K.options.pmIgnore=!1,K.pm&&K.pm.disable()}):ct.pm&&ct.pm.disable()),E.current.hasLayer(ct)||E.current.addLayer(ct),P.current.set(mt.id,ct),ht.current.set(mt.id,ct),console.log(`[LayerGroupManager] Added uploaded AOI layer: ${mt.id}`)}})},[v,i,Ie]),vt.useEffect(()=>{var ct,K;if(!v||!A.current)return;const Mt=!!B.current,At=o&&o.geojson,mt=Pt.current&&Pt.current.geojson,ft=!o&&mt&&Mt;let Rt=!1;if(At&&Mt){const _t=B.current.__aoiId||((ct=B.current.options)==null?void 0:ct.__aoiId),Dt=o.id;if(_t===Dt){const Ht=Ut.current.get(_t),se=np(o.geojson);Ht&&se?(Rt=Ht!==se,Rt||console.log(`[LayerGroupManager] Drawn AOI ${_t} geometry unchanged (same hash) - skipping replace`)):Rt=!0}else Rt=!0}else At&&!Mt&&(Rt=!0);if(Mt&&(At&&Rt||ft)){const _t=B.current.__aoiId||((K=B.current.options)==null?void 0:K.__aoiId);if(_t&&(At&&Rt?(console.log(`[LayerGroupManager] Replacing drawn AOI ${_t} with new geometry - removing old overlay only`),Fe(_t)):ft&&(console.log(`[LayerGroupManager] Explicit removal of drawn AOI ${_t} - full delete`),Ie(_t),Ut.current.delete(_t)),ht.current.delete(_t)),B.current&&A.current.hasLayer(B.current))try{A.current.removeLayer(B.current)}catch(Dt){console.warn("[LayerGroupManager] Error removing drawn layer:",Dt)}B.current=null}if(o&&o.geojson){const _t=o.geojson;if(!(_t&&(_t.type==="FeatureCollection"||_t.type==="Feature"||_t.type==="Polygon"||_t.type==="MultiPolygon"))){console.warn("[LayerGroupManager] Skipping invalid GeoJSON for drawn AOI:",_t);return}const Ht=zt(o.id,_t,{color:"#2563eb",weight:3,fillColor:"#2563eb",fillOpacity:.1,dashArray:"5, 5",pane:"userAoiPane",interactive:!0,pmIgnore:!1},"draw",A.current);if(!Ht){console.warn("[LayerGroupManager] Failed to register drawn AOI layer:",o.id);return}Ht.options.__aoiKey||(Ht.options.__aoiKey=o.id,Ht.options.__aoiType="drawn",Ht.options.__aoiId=o.id,Ht.__aoiId=o.id,Ht.__locked=!1,Ht.eachLayer?Ht.eachLayer(Jt=>{Jt.options.__aoiKey=o.id,Jt.options.__aoiType="drawn",Jt.options.__aoiId=o.id,Jt.__aoiId=o.id,Jt.__locked=!1,Jt.options.interactive=!0,Jt.options.pmIgnore=!1,Jt.pm&&Jt.pm.disable()}):Ht.pm&&Ht.pm.disable()),A.current.hasLayer(Ht)||A.current.addLayer(Ht),B.current=Ht,ht.current.set(o.id,Ht);const se=np(o.geojson);se&&Ut.current.set(o.id,se),console.log(`[LayerGroupManager] Added drawn AOI layer: ${o.id}`)}else Mt&&!At&&!ft&&console.log("[LayerGroupManager] Preserving drawn AOI layer - drawnAoi is temporarily null (likely re-render, not explicit removal)");Pt.current=o},[v,o,Ie,Fe,zt]),vt.useEffect(()=>{if(console.log("[LayerGroupManager]  useEffect createdRasters triggered - count:",(c==null?void 0:c.length)||0),!v||!G.current)return;const Mt=new Set(c.map(At=>At.id));for(const[At,mt]of lt.current.entries())Mt.has(mt.createdRasterId)||(lt.current.delete(At),mt.overlayLayer&&G.current.hasLayer(mt.overlayLayer)&&(G.current.removeLayer(mt.overlayLayer),v.removeLayer(mt.overlayLayer)),console.log(`[LayerGroupManager] Removed raster overlay pair: ${mt.createdRasterId}`));if(c.length!==0)for(const At of c){if(!At.overlayUrl||!At.overlayBounds){console.warn(`[LayerGroupManager] Skipping raster ${At.id}: missing overlayUrl or overlayBounds`);continue}const mt=At.aoiId;if(mt&&lt.current.has(mt)){const Dt=lt.current.get(mt),Ht=Dt==null?void 0:Dt.createdRasterId;if(Ht&&Ht!==At.id)console.log(`[LayerGroupManager] Replacing overlay for AOI ${mt} (regenerating with new raster: ${Ht} -> ${At.id})`),Fe(mt);else{console.log(`[LayerGroupManager] Skipping overlay replacement - same raster ID (${At.id}), likely UI re-render`);continue}}const Rt=At.overlayUrl.startsWith("http")?At.overlayUrl:`http://127.0.0.1:8000${At.overlayUrl}`;let ct;if(Array.isArray(At.overlayBounds)&&At.overlayBounds.length===2){const[Dt,Ht]=At.overlayBounds;if(!Dt||!Ht||!Array.isArray(Dt)||!Array.isArray(Ht)||Dt.length<2||Ht.length<2||!Number.isFinite(Dt[0])||!Number.isFinite(Dt[1])||!Number.isFinite(Ht[0])||!Number.isFinite(Ht[1])){console.warn(`[LayerGroupManager] Invalid bounds array format for raster ${At.id}:`,At.overlayBounds);continue}ct=At.overlayBounds}else if(At.overlayBounds.south!==void 0){const{south:Dt,west:Ht,north:se,east:Jt}=At.overlayBounds;if(!Number.isFinite(Dt)||!Number.isFinite(Ht)||!Number.isFinite(se)||!Number.isFinite(Jt)){console.warn(`[LayerGroupManager] Invalid bounds object format for raster ${At.id}:`,At.overlayBounds);continue}ct=[[Dt,Ht],[se,Jt]]}else{console.warn(`[LayerGroupManager] Invalid bounds format for raster ${At.id}:`,At.overlayBounds);continue}try{if(!ui.latLngBounds(ct).isValid()){console.warn(`[LayerGroupManager] Invalid Leaflet bounds for raster ${At.id}:`,ct);continue}}catch(Dt){console.warn(`[LayerGroupManager] Error validating bounds for raster ${At.id}:`,Dt);continue}const K=ui.imageOverlay(Rt,ct,{opacity:1,interactive:!1,pane:"rasterPane",className:"raster-overlay-pixelated"});K.options.__overlayId=At.id,K._pmIgnore=!0,K.__bounds=ct,G.current.addLayer(K);const _t=mt;_t?te(_t,At.id,K,ct):console.warn(`[LayerGroupManager]  Could not register overlay for raster ${At.id}: missing aoiId`)}},[v,c,ee,Fe]),vt.useEffect(()=>{v&&(v._layerGroups={uploaded:E.current,drawn:A.current,overlay:G.current},v._clearPmTempLayers=Qt,v._clearGeomanTempLayers=Qt)},[v,Qt]),null}delete ui.Icon.Default.prototype._getIconUrl;ui.Icon.Default.mergeOptions({iconRetinaUrl:Tg,iconUrl:Rg,shadowUrl:Ig});function _m({onUserClipChange:e,onRemoveAoi:i,aois:o=[],onDrawStart:c=null,onClearDrawnAoi:f=null,lastDrawnAoiRef:g,onAoiErased:y=null}){const v=jo(),E=vt.useRef(null),A=vt.useRef([]),G=vt.useRef(o.length),P=vt.useRef(null),B=vt.useCallback(()=>{if(v){if(P.current){console.log(" Removing previous AOI geometry layer");try{v.removeLayer(P.current)}catch{console.log("Previous AOI layer already removed or not on map")}P.current=null}E.current=null}},[v]),V=vt.useCallback(()=>{v&&(console.log(" Clearing drawn AOI geometry layers"),B(),A.current=[],f&&f())},[v,f,B]);return vt.useEffect(()=>{if(!v||v.pmInitialized)return;v.pmInitialized=!0,v.pm.addControls({position:"topleft",drawPolygon:!0,drawRectangle:!0,removalMode:!0,drawMarker:!1,drawCircle:!1,drawPolyline:!1,drawCircleMarker:!1,drawText:!1,editControls:!0,editMode:!1,dragMode:!1,rotateMode:!1,cutPolygon:!1}),setTimeout(()=>{if(v.pm&&v.pm.Toolbar)try{v.pm.Toolbar.removeControl("Text"),v.pm.Toolbar.removeControl("RotateMode"),v.pm.Toolbar.removeControl("Cut"),v.pm.Toolbar.removeControl("EditMode"),v.pm.Toolbar.removeControl("editMode"),v.pm.Toolbar.removeControl("edit");const Z=["RemovalMode","removalMode","Remove","Delete","Erase"];let Y=null;for(const ht of Z)try{const lt=v.pm.Toolbar.getControl(ht);if(lt){Y=lt,console.log(` RemovalMode (erase) control found as "${ht}"`);break}}catch{}if(!Y){try{const ht=v.pm.Toolbar._toolbars;console.warn(" RemovalMode control not found. Available controls:",Object.keys(ht||{}))}catch{console.warn(" Could not list available controls")}console.warn(" Make sure removalMode: true is set in addControls()")}}catch(Z){console.warn("Error managing Geoman toolbar controls:",Z)}},200);const q=Z=>{console.log(" PM DRAW START  Clearing old drawn AOI geometry"),B(),V()};return v.on("pm:drawstart",q),v.on("pm:globaldrawmodetoggled",Z=>{Z.enabled&&(Z.shape==="Polygon"||Z.shape==="Rectangle")&&(console.log(" PM DRAW MODE TOGGLED  Clearing old drawn AOI geometry"),V())}),v.on("pm:create",Z=>{console.log("[BaseMap] pm:create fired");const Y=Z.layer;if(A.current.length>0&&(console.log(" Clearing all previous drawn AOI layers before adding new one"),A.current.forEach(Ot=>{try{Ot&&v.hasLayer(Ot)&&v.removeLayer(Ot)}catch{}})),A.current=[],P.current&&P.current!==Y){console.log(" Removing previous AOI layer before storing new one");try{v.hasLayer(P.current)&&v.removeLayer(P.current)}catch{console.log("Previous AOI layer already removed")}}P.current=Y,E.current=Y,A.current=[Y];const ht=`drawn-${Date.now()}`;Y.__aoiId=ht,Y.options&&(Y.options.__aoiId=ht);const lt=Y.toGeoJSON(),Pt=lt.type==="FeatureCollection"?lt.features[0]:lt;Pt&&(Pt.properties={...Pt.properties||{},__aoiId:ht,__aoiType:"draw"});const Ut=lt.type==="FeatureCollection"?{...lt,features:lt.features.map(Ot=>({...Ot,properties:{...Ot.properties||{},__aoiId:ht,__aoiType:"draw"}}))}:{type:"FeatureCollection",features:[{...lt,properties:{...lt.properties||{},__aoiId:ht,__aoiType:"draw"}}]};g&&(g.current=Ut,console.log("[MapTools]  Saved drawn AOI to persistent ref:",ht)),e(Ut);try{v.hasLayer(Y)&&v.removeLayer(Y)}catch(Ot){console.warn("[MapTools] Could not remove Geoman layer after create:",Ot)}P.current=null,E.current=null,A.current=[]}),v.on("pm:update",Z=>{var ht,lt;const Y=Z.layer;if(Y===P.current||Y===E.current){console.log(" PM UPDATE FIRED  DRAWN AOI EDITED");const Pt=Y.__aoiId||((ht=Y.options)==null?void 0:ht.__aoiId);Pt||console.warn("[MapTools] pm:update: Layer has no __aoiId, cannot preserve aoiId");const Ut=Y.toGeoJSON(),Ot=Ut.type==="FeatureCollection"?Ut.features[0]:Ut;Ot&&Pt&&(Ot.properties={...Ot.properties||{},__aoiId:Pt,__aoiType:"draw"});const Gt=Ut.type==="FeatureCollection"?{...Ut,features:Ut.features.map($t=>{var Vt;return{...$t,properties:{...$t.properties||{},__aoiId:Pt||((Vt=$t.properties)==null?void 0:Vt.__aoiId),__aoiType:"draw"}}})}:{type:"FeatureCollection",features:[{...Ut,properties:{...Ut.properties||{},__aoiId:Pt||((lt=Ut.properties)==null?void 0:lt.__aoiId),__aoiType:"draw"}}]};g&&(g.current=Gt,console.log("[MapTools]  Updated drawn AOI in persistent ref")),e(Gt)}}),v.on("pm:remove",Z=>{var ht,lt;console.log(" PM REMOVE FIRED  LAYER REMOVED");const Y=Z.layer;if(Y.options&&Y.options.__locked){console.warn("[MapTools] Attempted to remove locked layer (AOI_diss) - blocked"),(ht=Z.preventDefault)==null||ht.call(Z);return}if(Y===E.current||Y===P.current){console.log("[MapTools] Removing drawn AOI layer - clearing persistent ref");const Pt=Y.__aoiId||((lt=Y.options)==null?void 0:lt.__aoiId);E.current=null,P.current=null,g&&(g.current=null),Pt&&i&&(console.log("[MapTools] Calling onRemoveAoi with aoiId:",Pt,"(triggers LayerGroupManager cleanup)"),i(Pt)),Pt&&y&&(console.log("[MapTools] Calling onAoiErased with aoiId:",Pt),y(Pt)),e(null)}}),()=>{v.off("pm:drawstart",q),v.off("pm:globaldrawmodetoggled")}},[v,e,c,V]),vt.useEffect(()=>{o.length>G.current&&G.current>0&&(console.log(" New AOIs detected (likely import) - clearing old drawn geometry"),V()),G.current=o.length},[o.length,V]),null}const ym=[{color:"#006400",label:"010"},{color:"#228B22",label:"1020"},{color:"#9ACD32",label:"2030"},{color:"#FFD700",label:"3040"},{color:"#FFA500",label:"4050"},{color:"#FF8C00",label:"5060"},{color:"#FF6B00",label:"6070"},{color:"#FF4500",label:"7080"},{color:"#DC143C",label:"8090"},{color:"#B22222",label:"90100"}];function vm(){const e=jo(),i=vt.useRef(null),o=vt.useRef(null);return vt.useEffect(()=>{if(!e||i.current)return;const c=ui.Control.extend({onAdd:function(g){const y=ui.DomUtil.create("div","leaflet-control vmrc-legend");y.style.pointerEvents="none",y.style.zIndex="1000",o.current=y;const v=`
          <div class="legend-card">
            <div class="legend-title">Value (%)</div>
            ${ym.map(E=>`
              <div class="legend-row">
                <span class="legend-swatch" style="background-color: ${E.color}; pointer-events: none;"></span>
                <span class="legend-label" style="pointer-events: none;">${E.label}</span>
              </div>
            `).join("")}
          </div>
        `;return y.innerHTML=v,y},onRemove:function(g){}}),f=new c({position:"topleft"});f.addTo(e),i.current=f},[e]),null}function xm({onMapReady:e}){const i=jo();return vt.useEffect(()=>{i&&e&&e(i)},[i,e]),null}function wm({overlayUrl:e,overlayBounds:i}){const o=jo(),c=vt.useRef(null),f=vt.useRef(null),g=750,y=e&&i;vt.useEffect(()=>{if(!o)return;if(!y){c.current&&(o.removeControl(c.current),c.current=null,f.current=null);return}if(c.current)return;const E=ui.Control.extend({onAdd:function(G){const P=ui.DomUtil.create("div","leaflet-control zoom-resolution-indicator");return P.style.pointerEvents="none",P.style.zIndex="1000",f.current=P,P},onRemove:function(G){}}),A=new E({position:"bottomright"});A.addTo(o),c.current=A},[o,y]);const v=vt.useCallback(()=>{if(!f.current||!y)return;const E=o.getZoom(),A=o.getCenter(),G=156543.03392*Math.cos(A.lat*Math.PI/180)/Math.pow(2,E),P=g/G;let B;P<=30?B="good":P<=80?B="warning":B="error";const q={good:{color:"#10b981",text:"True to size",label:"GOOD"},warning:{color:"#f59e0b",text:"Getting blocky",label:"WARNING"},error:{color:"#ef4444",text:"Too zoomed in  pixels huge",label:"ERROR"}}[B];f.current.innerHTML=`
      <div class="zoom-resolution-badge zoom-resolution-${B}" style="border-left-color: ${q.color}; pointer-events: none;">
        <div class="zoom-resolution-label" style="color: ${q.color}; pointer-events: none;">
          ${q.label}
        </div>
        <div class="zoom-resolution-text" style="pointer-events: none;">
          ${q.text}
        </div>
        <div class="zoom-resolution-size" style="pointer-events: none;">
          ${P.toFixed(0)}px/pixel
        </div>
      </div>
    `},[o,y]);return vt.useEffect(()=>{v()},[v]),vt.useEffect(()=>{if(f.current)return o.on("zoomend",v),()=>{o.off("zoomend",v)}},[o,v]),null}function Mm({trigger:e}){const i=jo();return vt.useEffect(()=>{if(!i)return;const o=setTimeout(()=>i.invalidateSize(!0),80);return()=>clearTimeout(o)},[i,e]),null}function Em({activeRasterId:e,overlayBounds:i,onSample:o}){return Zg({async click(c){if(!(c!=null&&c.latlng)||!Number.isFinite(c.latlng.lat)||!Number.isFinite(c.latlng.lng)||(console.log(" Map clicked:",c.latlng),!e)||!i)return;const{lat:f,lng:g}=c.latlng;try{const y=await sm({rasterLayerId:e,lat:f,lng:g});console.log(" Sample Result from .tif:",y),o({lat:f,lon:g,value:y.value,isNoData:y.is_nodata})}catch(y){console.error(" Sample failed:",y)}}}),null}function Lm(){const e=jo(),[i,o]=vt.useState(!1);return vt.useEffect(()=>{if(!e)return;const c=G=>{o(G.enabled),G.enabled?console.log("[GeomanState] Removal mode enabled - disabling tooltip"):console.log("[GeomanState] Removal mode disabled - enabling tooltip")},f=G=>{o(G.enabled),G.enabled?console.log("[GeomanState] Draw mode enabled - disabling tooltip"):console.log("[GeomanState] Draw mode disabled - enabling tooltip")},g=G=>{o(G.enabled),G.enabled?console.log("[GeomanState] Edit mode enabled - disabling tooltip"):console.log("[GeomanState] Edit mode disabled - enabling tooltip")},y=()=>{o(!0),console.log("[GeomanState] Draw started - disabling tooltip")},v=()=>{const G=e.pm;if(G){const P=G.globalRemovalModeEnabled()||G.globalDrawModeEnabled()||G.globalEditModeEnabled();o(P),P||console.log("[GeomanState] Draw ended and no modes active - enabling tooltip")}else o(!1)},E=()=>{o(!0),setTimeout(()=>{const G=e.pm;if(G){const P=G.globalRemovalModeEnabled()||G.globalDrawModeEnabled()||G.globalEditModeEnabled();o(P)}else o(!1)},100)};e.on("pm:globalremovalmodetoggled",c),e.on("pm:globaldrawmodetoggled",f),e.on("pm:globaleditmodetoggled",g),e.on("pm:drawstart",y),e.on("pm:drawend",v),e.on("pm:remove",E);const A=e.pm;if(A){const G=A.globalRemovalModeEnabled()||A.globalDrawModeEnabled()||A.globalEditModeEnabled();o(G)}return()=>{e.off("pm:globalremovalmodetoggled",c),e.off("pm:globaldrawmodetoggled",f),e.off("pm:globaleditmodetoggled",g),e.off("pm:drawstart",y),e.off("pm:drawend",v),e.off("pm:remove",E)}},[e]),i}function Cm({activeRasterId:e,createdRasters:i=[],activeCreatedRasterId:o=null}){const c=Lm();return I.jsx(bm,{activeRasterId:e,createdRasters:i,activeCreatedRasterId:o,isGeomanBusy:c})}function bm({activeRasterId:e,createdRasters:i=[],activeCreatedRasterId:o=null,isGeomanBusy:c=!1}){const f=jo(),[g,y]=vt.useState(null),[v,E]=vt.useState(null),[A,G]=vt.useState(!1),P=vt.useRef(null),B=vt.useRef({lat:null,lng:null,timestamp:0}),V=100,q=vt.useRef(new Map),Z=i.find(Ot=>Ot.id===o)||(i.length>0?i[0]:null),Y=(Z==null?void 0:Z.overlayBounds)||null,ht=(Z==null?void 0:Z.activeRasterId)||e,lt=vt.useCallback((Ot,Gt)=>{if(!Number.isFinite(Ot)||!Number.isFinite(Gt)||!Y)return!1;let $t,Vt,Qt,zt;if(Array.isArray(Y)&&Y.length===2){const[te,ee]=Y;if(!Array.isArray(te)||!Array.isArray(ee)||te.length<2||ee.length<2)return!1;$t=te[0],Vt=te[1],Qt=ee[0],zt=ee[1]}else if(Y.south!==void 0)$t=Y.south,Vt=Y.west,Qt=Y.north,zt=Y.east;else return!1;return!Number.isFinite($t)||!Number.isFinite(Vt)||!Number.isFinite(Qt)||!Number.isFinite(zt)?!1:Ot>=$t&&Ot<=Qt&&Gt>=Vt&&Gt<=zt},[Y]),Pt=Ot=>Math.round(Ot*1e4)/1e4,Ut=vt.useCallback(async(Ot,Gt)=>{if(!ht)return null;const $t=Pt(Ot),Vt=Pt(Gt),Qt=`${$t},${Vt}`,zt=q.current.get(Qt);if(zt&&Date.now()-zt.timestamp<5e3)return zt.value;const te=Date.now();if(te-B.current.timestamp<V||B.current.lat===$t&&B.current.lng===Vt)return null;B.current={lat:$t,lng:Vt,timestamp:te};try{const ee=await om({rasterLayerId:ht,lat:Ot,lon:Gt});if(q.current.set(Qt,{value:ee,timestamp:te}),q.current.size>100){const Fe=q.current.keys().next().value;q.current.delete(Fe)}return ee}catch(ee){return console.error("[RasterHoverTooltip] Failed to get raster value:",ee),null}},[ht]);return vt.useEffect(()=>{if(c&&(y(null),E(null),G(!1),P.current&&f&&f.hasLayer&&f.hasLayer(P.current)))try{f.closePopup(P.current)}catch{}},[c,f]),vt.useEffect(()=>{if(!f||!ht||!Y){if(y(null),E(null),P.current&&f&&f.hasLayer&&f.hasLayer(P.current))try{f.closePopup(P.current)}catch{}return}if(c)return;const Ot=async $t=>{if(A)return;if(c){y(null),E(null);return}if(!($t!=null&&$t.latlng)||!Number.isFinite($t.latlng.lat)||!Number.isFinite($t.latlng.lng)){y(null),E(null);return}const Vt=$t.latlng.lat,Qt=$t.latlng.lng;if(!lt(Vt,Qt)){y(null),E(null);return}E({lat:Vt,lng:Qt});const zt=await Ut(Vt,Qt);zt&&(zt.nodata||zt.value===null||zt.value===void 0?y(null):y({lat:Vt,lng:Qt,value:zt.value}))},Gt=$t=>{if(c||!($t!=null&&$t.latlng)||!Number.isFinite($t.latlng.lat)||!Number.isFinite($t.latlng.lng))return;const Vt=$t.latlng.lat,Qt=$t.latlng.lng;A?(G(!1),y(null),E(null)):lt(Vt,Qt)&&(G(!0),E({lat:Vt,lng:Qt}),Ut(Vt,Qt).then(zt=>{zt&&!zt.nodata&&zt.value!==null&&zt.value!==void 0&&y({lat:Vt,lng:Qt,value:zt.value})}))};return f.on("mousemove",Ot),f.on("click",Gt),()=>{f.off("mousemove",Ot),f.off("click",Gt)}},[f,ht,Y,lt,Ut,A,c]),vt.useEffect(()=>{if(f){if(c){if(P.current&&f.hasLayer&&f.hasLayer(P.current))try{f.closePopup(P.current)}catch{}return}if(g&&v&&Number.isFinite(v.lat)&&Number.isFinite(v.lng)&&Number.isFinite(g.lat)&&Number.isFinite(g.lng)&&Number.isFinite(g.value)){P.current||(P.current=ui.popup({closeButton:!1,className:"raster-hover-tooltip",offset:[10,10],autoPan:!1}));const Ot=`
        <div class="raster-tooltip-content">
          <div class="raster-tooltip-title">Location Info</div>
          <div class="raster-tooltip-line"><strong>Lat:</strong> ${g.lat.toFixed(4)}</div>
          <div class="raster-tooltip-line"><strong>Lon:</strong> ${g.lng.toFixed(4)}</div>
          <div class="raster-tooltip-line"><strong>Value:</strong> ${g.value.toFixed(2)}%</div>
        </div>
      `;try{P.current.setLatLng([v.lat,v.lng]).setContent(Ot).openOn(f)}catch(Gt){console.error("[RasterHoverTooltip] Failed to set tooltip position:",Gt),y(null),E(null)}}else if(P.current&&f.hasLayer&&f.hasLayer(P.current))try{f.closePopup(P.current)}catch{}return()=>{if(P.current&&f&&f.hasLayer&&f.hasLayer(P.current))try{f.closePopup(P.current)}catch{}}}},[f,g,v,c]),null}function Sm({globalAoi:e,uploadedAois:i=[],aois:o=[],userClip:c,overlayUrl:f=null,overlayBounds:g=null,createdRasters:y=[],onUserClipChange:v,onRemoveAoi:E=null,onRemoveRaster:A=null,onRemoveRasterByAoiId:G=null,onDrawStart:P=null,onClearDrawnAoi:B=null,activeRasterId:V,activeCreatedRasterId:q=null,datasetPreview:Z=null,onMapReady:Y,onLastDrawnAoiRefReady:ht=null,onAoiErased:lt=null}){const[Pt,Ut]=vt.useState(null),Ot=vt.useRef(null);return vt.useEffect(()=>{ht&&ht(Ot)},[ht]),console.log("[BaseMap]  MapContainer rendering - createdRasters:",(y==null?void 0:y.length)||0,"overlayUrl:",!!f),I.jsx("div",{className:"map-container",children:I.jsxs(Yg,{center:[44,-123],zoom:7,scrollWheelZoom:!0,className:"vmrc-map",style:{width:"100%",height:"100%"},children:[I.jsxs(Tl,{position:"topright",children:[I.jsx(Tl.BaseLayer,{checked:!0,name:"Topographic",children:I.jsx(Rc,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"})}),I.jsx(Tl.BaseLayer,{name:"Satellite (Esri)",children:I.jsx(Rc,{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"})}),I.jsx(Tl.BaseLayer,{name:"Dark",children:I.jsx(Rc,{url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png"})})]}),I.jsx(mm,{globalAoi:e,uploadedAois:i.filter(Gt=>Gt.type==="upload"),drawnAoi:o.find(Gt=>Gt.type==="draw")||null,createdRasters:y,onRemoveAoi:E,onRemoveRaster:A,onRemoveRasterByAoiId:G}),f&&g&&(!y||y.length===0)&&(o.length===0||!o.some(Gt=>Gt.overlayUrl&&Gt.overlayBounds))&&I.jsx(Zc,{overlayUrl:f,bounds:g}),Z&&Z.preview_url&&Z.preview_bounds&&I.jsx(Zc,{overlayUrl:Z.preview_url,bounds:Z.preview_bounds}),I.jsx(_m,{onUserClipChange:v,onRemoveAoi:E,aois:o,onDrawStart:P,onClearDrawnAoi:B}),I.jsx(vm,{}),I.jsx(wm,{overlayUrl:f,overlayBounds:g}),I.jsx(xm,{onMapReady:Y}),I.jsx(Em,{activeRasterId:V,overlayBounds:g,onSample:Ut}),I.jsx(Cm,{activeRasterId:V,createdRasters:y,activeCreatedRasterId:q||(y.length>0?y[0].id:null)}),I.jsx(Mm,{trigger:y.length}),Pt&&!Pt.isNoData&&I.jsx(Qg,{position:[Pt.lat,Pt.lon],children:I.jsx(tm,{permanent:!0,direction:"top",offset:[0,-18],className:"inspect-tooltip",children:I.jsxs("div",{className:"inspect-tooltip-inner",children:[I.jsx("div",{className:"inspect-title",children:"Location Info"}),I.jsxs("div",{className:"inspect-line",children:[I.jsx("strong",{children:"Lat:"})," ",Pt.lat.toFixed(4)]}),I.jsxs("div",{className:"inspect-line",children:[I.jsx("strong",{children:"Lon:"})," ",Pt.lon.toFixed(4)]}),I.jsxs("div",{className:"inspect-line",children:[I.jsx("strong",{children:"Value:"})," ",Pt.value.toFixed(2)]})]})})})]})})}var r0={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},ip=us.createContext&&us.createContext(r0),km=["attr","size","title"];function Pm(e,i){if(e==null)return{};var o=Am(e,i),c,f;if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(f=0;f<g.length;f++)c=g[f],!(i.indexOf(c)>=0)&&Object.prototype.propertyIsEnumerable.call(e,c)&&(o[c]=e[c])}return o}function Am(e,i){if(e==null)return{};var o={};for(var c in e)if(Object.prototype.hasOwnProperty.call(e,c)){if(i.indexOf(c)>=0)continue;o[c]=e[c]}return o}function Eh(){return Eh=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(e[c]=o[c])}return e},Eh.apply(this,arguments)}function rp(e,i){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);i&&(c=c.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),o.push.apply(o,c)}return o}function Lh(e){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?rp(Object(o),!0).forEach(function(c){Bm(e,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):rp(Object(o)).forEach(function(c){Object.defineProperty(e,c,Object.getOwnPropertyDescriptor(o,c))})}return e}function Bm(e,i,o){return i=Tm(i),i in e?Object.defineProperty(e,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[i]=o,e}function Tm(e){var i=Rm(e,"string");return typeof i=="symbol"?i:i+""}function Rm(e,i){if(typeof e!="object"||!e)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var c=o.call(e,i);if(typeof c!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}function s0(e){return e&&e.map((i,o)=>us.createElement(i.tag,Lh({key:o},i.attr),s0(i.child)))}function Gh(e){return i=>us.createElement(Im,Eh({attr:Lh({},e.attr)},i),s0(e.child))}function Im(e){var i=o=>{var{attr:c,size:f,title:g}=e,y=Pm(e,km),v=f||o.size||"1em",E;return o.className&&(E=o.className),e.className&&(E=(E?E+" ":"")+e.className),us.createElement("svg",Eh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},o.attr,c,y,{className:E,style:Lh(Lh({color:e.color||o.color},o.style),e.style),height:v,width:v,xmlns:"http://www.w3.org/2000/svg"}),g&&us.createElement("title",null,g),e.children)};return ip!==void 0?us.createElement(ip.Consumer,null,o=>i(o)):i(r0)}function Om(e){return Gh({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 18 9 12 15 6"},child:[]}]})(e)}function Dm(e){return Gh({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 18 15 12 9 6"},child:[]}]})(e)}function Nm({width:e=350,children:i}){const[o,c]=vt.useState(!0),f=o?e:0;return I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"sliding-panel",style:{width:`${f}px`,minWidth:`${f}px`},children:o&&I.jsx("div",{className:"sliding-panel-inner",children:i})}),I.jsx("button",{className:"panel-toggle-button",style:{right:o?`calc(18px + ${e}px)`:"18px"},onClick:()=>c(g=>!g),"aria-label":"Toggle side panel",children:o?I.jsx(Dm,{size:20}):I.jsx(Om,{size:20})})]})}const sp=["010","1020","2030","3040","4050","5060","6070","7080","8090","90100"],Fm=["#006400","#228B22","#9ACD32","#FFD700","#FFA500","#FF8C00","#FF6B00","#FF4500","#DC143C","#B22222"];function Gm({values:e,pixels:i,pixelValues:o,stats:c,histogram:f}){let g,y,v;if(f&&Array.isArray(f.counts)&&f.counts.length===10){g=f.counts.map(Z=>Number(Z)||0),y=Number(f.total_valid_pixels)||0;const V=Number(f.pixels_in_range)||g.reduce((Z,Y)=>Z+Y,0);if(Array.isArray(f.percentages)&&f.percentages.length===10)v=f.percentages.map(Z=>Number(Z)||0),console.log("[HistogramPanel] Using backend-provided percentages");else{const Z=V||g.reduce((Y,ht)=>Y+ht,0)||1;v=g.map(Y=>Y/Z*100),console.log("[HistogramPanel] Computing percentages from counts")}console.log("[HistogramPanel] Using backend histogram (matches map overlay exactly)"),console.log("[HistogramPanel] Backend histogram counts:",g),console.log("[HistogramPanel] Backend histogram percentages:",v.map(Z=>`${Z.toFixed(2)}%`)),console.log("[HistogramPanel] Total valid pixels:",y),console.log("[HistogramPanel] Pixels in [0, 100] range:",V),console.log("[HistogramPanel] Sum of bins:",g.reduce((Z,Y)=>Z+Y,0));const q=g.reduce((Z,Y)=>Z+Y,0);q!==V&&V>0?console.warn(`[HistogramPanel] Backend histogram mismatch: sum=${q}, pixels_in_range=${V}`):console.log(`[HistogramPanel]  Bin count verified: sum=${q} equals pixels in range`)}else{const V=e??i??o??[];if(!V||V.length===0)return I.jsx("div",{className:"panel-body",children:I.jsx("p",{style:{color:"#64748b",fontSize:13},children:"No data available. Draw a clip region."})});const q=[-9999,-32768,null,void 0],Z=V.map(zt=>Number(zt)).filter(zt=>Number.isFinite(zt)&&zt!==null&&zt!==void 0&&!q.includes(zt));if(!Z.length)return I.jsx("div",{className:"panel-body",children:I.jsx("p",{style:{color:"#64748b",fontSize:13},children:"No numeric data available."})});const Y=Math.min(...Z),ht=Math.max(...Z),lt=c==null?void 0:c.min,Pt=c==null?void 0:c.max,Ut=lt??Y,Ot=Pt??ht,Gt=Ot<=1.5&&Ut>=0,$t=Gt?Z.map(zt=>Math.max(0,Math.min(100,zt*100))):Z.map(zt=>Math.max(0,Math.min(100,zt)));console.log("[HistogramPanel] Computing histogram from pixel values (fallback)"),console.log("[HistogramPanel] Debug Info:",{inputCount:V.length,numericCount:Z.length,nodataFiltered:V.length-Z.length,valueRange:{min:Y,max:ht},statsRange:c?{min:lt,max:Pt}:null,detectedRange:{min:Ut,max:Ot},needsScaling:Gt,scaledRange:{min:Math.min(...$t),max:Math.max(...$t)}}),g=new Array(10).fill(0),$t.forEach(zt=>{const te=Math.max(0,Math.min(100,zt)),ee=te===100?9:Math.max(0,Math.min(9,Math.floor(te/10)));g[ee]+=1}),y=$t.length;const Vt=g.reduce((zt,te)=>zt+te,0);Vt!==y?console.warn(`[HistogramPanel] Bin count mismatch: sum=${Vt}, input=${y}`):console.log(`[HistogramPanel]  Bin count verified: sum=${Vt} equals input count`),console.log("[HistogramPanel] Used values range:",{min:Math.min(...$t),max:Math.max(...$t)});const Qt=g.reduce((zt,te)=>zt+te,0)||1;v=g.map(zt=>zt/Qt*100)}const E=180,A=44,G=10,P=2,B=[0,25,50,75,100];return I.jsxs("div",{className:"panel-body",style:{padding:12,width:"100%"},children:[I.jsx("h3",{style:{color:"#111827",fontSize:25,fontWeight:700,marginBottom:0},children:"Histogram"}),I.jsx("div",{style:{background:"#fff",border:"1px solid #e5e7eb",borderRadius:0,padding:"6px 10px 10px 0px"},children:I.jsxs("div",{style:{display:"flex",alignItems:"stretch",gap:G},children:[I.jsxs("div",{style:{width:A,position:"relative",height:E,flexShrink:0},children:[B.map(V=>{const q=E-V/100*E;return I.jsxs("div",{style:{position:"absolute",top:q-7,right:0,fontSize:10,color:"#6b7280",fontWeight:600},children:[V,"%"]},V)}),I.jsx("div",{style:{position:"absolute",left:-34,top:"50%",transform:"rotate(-90deg) translateX(50%)",transformOrigin:"left center",fontSize:11,color:"#374151",fontWeight:700,whiteSpace:"nowrap"}})]}),I.jsxs("div",{style:{flex:1,minWidth:0},children:[I.jsxs("div",{style:{position:"relative",height:E,borderLeft:"1px solid #9ca3af",borderBottom:"1px solid #9ca3af",paddingLeft:0,paddingBottom:0},children:[B.slice(1).map(V=>I.jsx("div",{style:{position:"absolute",left:0,right:0,bottom:`${V/100*E}px`,height:1,background:"#e5e7eb",opacity:.9,pointerEvents:"none"}},V)),I.jsx("div",{style:{position:"absolute",left:0,right:0,bottom:0,top:0,display:"flex",alignItems:"flex-end",gap:P,padding:"0 2px 0 2px"},children:v.map((V,q)=>{const Z=Math.max(2,V/100*E);return I.jsx("div",{style:{flex:1,height:Z,background:Fm[q],borderRadius:0,cursor:"pointer"},title:`${sp[q]}: ${V.toFixed(2)}% (${g[q]} pixels)`,onMouseEnter:Y=>Y.currentTarget.style.opacity="0.85",onMouseLeave:Y=>Y.currentTarget.style.opacity="1"},q)})})]}),I.jsx("div",{style:{display:"flex",gap:P,marginTop:6,padding:"0 2px"},children:sp.map((V,q)=>I.jsx("div",{style:{flex:1,textAlign:"center",fontSize:9,color:"#6b7280",fontWeight:600,lineHeight:1.1},children:V},q))}),I.jsx("div",{style:{textAlign:"center",marginTop:8,fontSize:11,color:"#374151",fontWeight:700},children:"Value Range (%)"})]})]})})]})}function zm({stats:e,values:i,rasterName:o,rasterPath:c}){var ht;const f=Array.isArray(i)?i.map(lt=>Number(lt)).filter(lt=>Number.isFinite(lt)):[],g=f.length>0,y=e&&typeof e=="object";if(!g&&!y)return I.jsx("div",{className:"panel-body",children:I.jsx("p",{style:{color:"#64748b",fontSize:13},children:"No statistics available. Draw a clip region and generate a map."})});let v={};if(g){const lt=[...f].sort((Qt,zt)=>Qt-zt),Pt=lt.length,Ot=lt.reduce((Qt,zt)=>Qt+zt,0)/Pt,Gt=lt.reduce((Qt,zt)=>Qt+Math.pow(zt-Ot,2),0)/Pt,$t=Math.sqrt(Gt),Vt=(Qt,zt)=>{if(Qt.length===0)return null;const te=zt/100*(Qt.length-1),ee=Math.floor(te),Fe=Math.ceil(te),Ie=te-ee;return Qt[ee]*(1-Ie)+Qt[Fe]*Ie};v={count:Pt,min:lt[0],max:lt[lt.length-1],mean:Ot,std:$t,median:Vt(lt,50),p10:Vt(lt,10),p25:Vt(lt,25),p50:Vt(lt,50),p75:Vt(lt,75),p90:Vt(lt,90)}}const E={...v,...y?e:{}},A=g?{pct70Plus:f.filter(lt=>lt>=70).length/f.length*100,pct50Plus:f.filter(lt=>lt>=50).length/f.length*100,pct30Minus:f.filter(lt=>lt<=30).length/f.length*100}:{pct70Plus:null,pct50Plus:null,pct30Minus:null},G=new Array(10).fill(0);g&&f.forEach(lt=>{const Pt=Math.max(0,Math.min(100,lt)),Ut=Pt===100?9:Math.max(0,Math.min(9,Math.floor(Pt/10)));G[Ut]+=1});const P=G.reduce((lt,Pt)=>lt+Pt,0)||1,B=Math.max(...G),V=G.indexOf(B),q=V===9?"90100":`${V*10}${(V+1)*10}`,Z=B/P*100,Y=(lt,Pt=2)=>lt==null||isNaN(lt)?"--":Number(lt).toFixed(Pt);return I.jsxs("div",{className:"panel-body",style:{padding:"12px",width:"100%"},children:[I.jsx("h3",{style:{color:"#111827",fontSize:20,fontWeight:700,marginBottom:16},children:"Statistics Summary"}),I.jsxs("div",{style:{marginBottom:20,padding:"12px",background:"#f9fafb",border:"1px solid #e5e7eb",borderRadius:0},children:[I.jsx("h4",{style:{color:"#374151",fontSize:13,fontWeight:700,marginBottom:4,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Raster Overview"}),I.jsx("p",{style:{fontSize:11,color:"#9ca3af",marginBottom:10,marginTop:0,lineHeight:1.4},children:"Information about the raster dataset being analyzed."}),I.jsx("div",{style:{fontSize:12,color:"#6b7280",lineHeight:1.8},children:I.jsxs("div",{children:[I.jsx("strong",{style:{color:"#374151"},children:"Raster Name:"})," ",o||"(not provided)"]})})]}),I.jsxs("div",{style:{marginBottom:20,padding:"12px",background:"#f9fafb",border:"1px solid #e5e7eb",borderRadius:0},children:[I.jsx("h4",{style:{color:"#374151",fontSize:13,fontWeight:700,marginBottom:4,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Area Summary (Within Selected AOI)"}),I.jsx("p",{style:{fontSize:11,color:"#9ca3af",marginBottom:12,marginTop:0,lineHeight:1.4},children:"Statistical measures computed from all pixel values within the selected area of interest."}),I.jsx("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12},children:I.jsxs("tbody",{children:[I.jsxs("tr",{children:[I.jsx("td",{style:{padding:"6px 8px",color:"#6b7280",fontWeight:600},children:"Total Pixels"}),I.jsx("td",{style:{padding:"6px 8px",textAlign:"right",color:"#111827",fontWeight:600},children:((ht=E.count)==null?void 0:ht.toLocaleString())||"--"})]}),I.jsxs("tr",{children:[I.jsx("td",{style:{padding:"6px 8px",color:"#6b7280",fontWeight:600},children:"Minimum Value"}),I.jsx("td",{style:{padding:"6px 8px",textAlign:"right",color:"#111827",fontWeight:600},children:Y(E.min)})]}),I.jsxs("tr",{children:[I.jsx("td",{style:{padding:"6px 8px",color:"#6b7280",fontWeight:600},children:"Maximum Value"}),I.jsx("td",{style:{padding:"6px 8px",textAlign:"right",color:"#111827",fontWeight:600},children:Y(E.max)})]}),I.jsxs("tr",{children:[I.jsx("td",{style:{padding:"6px 8px",color:"#6b7280",fontWeight:600},children:"Average (Mean)"}),I.jsx("td",{style:{padding:"6px 8px",textAlign:"right",color:"#111827",fontWeight:600},children:Y(E.mean)})]}),I.jsxs("tr",{children:[I.jsx("td",{style:{padding:"6px 8px",color:"#6b7280",fontWeight:600},children:"Median Value"}),I.jsx("td",{style:{padding:"6px 8px",textAlign:"right",color:"#111827",fontWeight:600},children:Y(E.median)})]}),I.jsxs("tr",{children:[I.jsx("td",{style:{padding:"6px 8px",color:"#6b7280",fontWeight:600},children:"Variability (Std. Dev)"}),I.jsx("td",{style:{padding:"6px 8px",textAlign:"right",color:"#111827",fontWeight:600},children:Y(E.std)})]})]})})]}),I.jsxs("div",{style:{marginBottom:20,padding:"12px",background:"#f9fafb",border:"1px solid #e5e7eb",borderRadius:0},children:[I.jsx("h4",{style:{color:"#374151",fontSize:13,fontWeight:700,marginBottom:4,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Area by Threshold"}),I.jsx("p",{style:{fontSize:11,color:"#9ca3af",marginBottom:12,marginTop:0,lineHeight:1.4},children:"Percentage of pixels that fall within specific value ranges."}),I.jsx("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12},children:I.jsxs("tbody",{children:[I.jsxs("tr",{children:[I.jsx("td",{style:{padding:"6px 8px",color:"#6b7280",fontWeight:600},children:"High Values ( 70)"}),I.jsxs("td",{style:{padding:"6px 8px",textAlign:"right",color:"#111827",fontWeight:600},children:[Y(A.pct70Plus),"%"]})]}),I.jsxs("tr",{children:[I.jsx("td",{style:{padding:"6px 8px",color:"#6b7280",fontWeight:600},children:"ModerateHigh Values ( 50)"}),I.jsxs("td",{style:{padding:"6px 8px",textAlign:"right",color:"#111827",fontWeight:600},children:[Y(A.pct50Plus),"%"]})]}),I.jsxs("tr",{children:[I.jsx("td",{style:{padding:"6px 8px",color:"#6b7280",fontWeight:600},children:"Low Values ( 30)"}),I.jsxs("td",{style:{padding:"6px 8px",textAlign:"right",color:"#111827",fontWeight:600},children:[Y(A.pct30Minus),"%"]})]})]})})]}),I.jsxs("div",{style:{marginBottom:20,padding:"12px",background:"#f9fafb",border:"1px solid #e5e7eb",borderRadius:0},children:[I.jsx("h4",{style:{color:"#374151",fontSize:13,fontWeight:700,marginBottom:4,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Most Common Value Range"}),I.jsx("p",{style:{fontSize:11,color:"#9ca3af",marginBottom:12,marginTop:0,lineHeight:1.4},children:"The value range that contains the most pixels in the selected area."}),I.jsx("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12},children:I.jsxs("tbody",{children:[I.jsxs("tr",{children:[I.jsx("td",{style:{padding:"6px 8px",color:"#6b7280",fontWeight:600},children:"Dominant Range"}),I.jsx("td",{style:{padding:"6px 8px",textAlign:"right",color:"#111827",fontWeight:600},children:q})]}),I.jsxs("tr",{children:[I.jsx("td",{style:{padding:"6px 8px",color:"#6b7280",fontWeight:600},children:"Coverage"}),I.jsxs("td",{style:{padding:"6px 8px",textAlign:"right",color:"#111827",fontWeight:600},children:[Y(Z),"%"]})]})]})})]})]})}const jm=["#006400","#228B22","#9ACD32","#FFD700","#FFA500","#FF8C00","#FF6B00","#FF4500","#DC143C","#B22222"],Um=["010","1020","2030","3040","4050","5060","6070","7080","8090","90100"];function Hm({ramp:e}){const i=(e==null?void 0:e.colors)||jm,o=(e==null?void 0:e.labels)||Um;return I.jsx("div",{style:{display:"flex",height:"20px",borderRadius:"2px",overflow:"hidden",border:"1px solid #e5e7eb",marginTop:"8px"},children:i.map((c,f)=>I.jsx("div",{style:{flex:1,backgroundColor:c,display:"flex",alignItems:"center",justifyContent:"center"},title:o[f]||`${f*10}${(f+1)*10}`},f))})}function $m({raster:e,isActive:i,onShow:o,onRemove:c}){const f=new Date(e.createdAt),g=f.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),y=f.toLocaleDateString([],{month:"short",day:"numeric"}),v=e.overlayUrl?e.overlayUrl.startsWith("http")?e.overlayUrl:Ai(e.overlayUrl):null;return I.jsxs("div",{className:`raster-item ${i?"raster-item-active":""}`,style:{padding:"10px",border:`1px solid ${i?"#2563eb":"#e5e7eb"}`,borderRadius:"4px",backgroundColor:i?"#eff6ff":"#ffffff",marginBottom:"8px"},children:[I.jsx("div",{style:{fontSize:"13px",fontWeight:600,color:"#111827",marginBottom:"8px",wordBreak:"break-word"},children:e.name}),v&&I.jsx("div",{className:"raster-thumbnail-container",onClick:o,style:{cursor:"pointer",marginBottom:"8px"},title:"Click to activate this raster",children:I.jsx("div",{className:"raster-thumbnail-checkerboard",children:I.jsx("img",{src:v,alt:"Raster preview",className:"raster-thumbnail-image",onError:E=>{E.target.style.display="none"}})})}),I.jsx(Hm,{ramp:e.ramp}),I.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"8px"},children:[I.jsxs("div",{style:{fontSize:"11px",color:"#6b7280"},children:[y," ",g]}),I.jsxs("div",{style:{display:"flex",gap:"6px"},children:[I.jsx("button",{onClick:o,style:{padding:"4px 10px",fontSize:"11px",background:i?"#2563eb":"#f3f4f6",color:i?"#ffffff":"#374151",border:"none",borderRadius:"3px",cursor:"pointer",fontWeight:500},disabled:i,children:i?"Active":"Show"}),I.jsx("button",{onClick:c,style:{padding:"4px 10px",fontSize:"11px",background:"#ef4444",color:"#ffffff",border:"none",borderRadius:"3px",cursor:"pointer",fontWeight:500},children:"Remove"})]})]})]})}function Vm({rasters:e=[],activeRasterId:i=null,onShowRaster:o,onRemoveRaster:c,onClearAll:f=null}){return e.length===0?I.jsx("div",{style:{padding:"12px",fontSize:"12px",color:"#6b7280",textAlign:"center"},children:"No rasters created yet. Generate a map to add rasters to this list."}):I.jsxs("div",{style:{maxHeight:"400px",overflowY:"auto",padding:"12px"},children:[I.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[I.jsxs("h3",{style:{fontSize:"16px",fontWeight:700,color:"#111827",margin:0},children:["Created Rasters (",e.length,")"]}),f&&I.jsx("button",{onClick:f,style:{padding:"6px 12px",fontSize:"12px",background:"#ef4444",color:"#ffffff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500},title:"Remove all rasters from map and list",children:"Clear All"})]}),e.map(g=>I.jsx($m,{raster:g,isActive:g.id===i,onShow:()=>o(g.id),onRemove:()=>c(g.id)},g.id))]})}function Wm({metadata:e,isLoading:i}){const[o,c]=vt.useState(!1);if(i)return I.jsx("div",{style:{padding:"16px",fontSize:"13px",color:"#6b7280",textAlign:"center"},children:"Loading layer metadata..."});if(!e)return null;const f=()=>{navigator.clipboard.writeText(JSON.stringify(e,null,2)),c(!0),setTimeout(()=>c(!1),2e3)},g=v=>{if(!v||!Array.isArray(v)||v.length!==2)return"N/A";const[[E,A],[G,P]]=v;return`[${E.toFixed(6)}, ${A.toFixed(6)}], [${G.toFixed(6)}, ${P.toFixed(6)}]`},y=v=>{if(!v)return"N/A";try{return new Date(v).toLocaleString()}catch{return v}};return I.jsxs("div",{style:{padding:"16px",backgroundColor:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"4px"},children:[I.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px"},children:[I.jsx("h3",{style:{fontSize:"18px",fontWeight:700,color:"#111827",margin:0},children:e.title||"Layer Info"}),I.jsx("button",{onClick:f,style:{padding:"4px 10px",fontSize:"11px",background:o?"#10b981":"#f3f4f6",color:o?"#ffffff":"#374151",border:"none",borderRadius:"3px",cursor:"pointer",fontWeight:500},children:o?"Copied!":"Copy JSON"})]}),e.summary&&I.jsx("p",{style:{fontSize:"13px",color:"#374151",lineHeight:"1.6",marginBottom:"16px"},children:e.summary}),e.tags&&e.tags.length>0&&I.jsx("div",{style:{marginBottom:"16px"},children:I.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px"},children:e.tags.map((v,E)=>I.jsx("span",{style:{padding:"4px 8px",fontSize:"11px",backgroundColor:"#eff6ff",color:"#1e40af",borderRadius:"3px",fontWeight:500},children:v},E))})}),I.jsx("div",{style:{marginBottom:"16px"},children:I.jsx("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"12px"},children:I.jsxs("tbody",{children:[I.jsxs("tr",{children:[I.jsx("td",{style:{padding:"6px 8px",fontWeight:600,color:"#6b7280",borderBottom:"1px solid #e5e7eb",width:"40%"},children:"Source Type"}),I.jsx("td",{style:{padding:"6px 8px",color:"#111827",borderBottom:"1px solid #e5e7eb"},children:e.source_type||"N/A"})]}),I.jsxs("tr",{children:[I.jsx("td",{style:{padding:"6px 8px",fontWeight:600,color:"#6b7280",borderBottom:"1px solid #e5e7eb"},children:"CRS"}),I.jsx("td",{style:{padding:"6px 8px",color:"#111827",borderBottom:"1px solid #e5e7eb"},children:e.crs||"N/A"})]}),e.bounds&&I.jsxs("tr",{children:[I.jsx("td",{style:{padding:"6px 8px",fontWeight:600,color:"#6b7280",borderBottom:"1px solid #e5e7eb"},children:"Bounds (EPSG:4326)"}),I.jsx("td",{style:{padding:"6px 8px",color:"#111827",borderBottom:"1px solid #e5e7eb",fontFamily:"monospace",fontSize:"11px"},children:g(e.bounds)})]}),e.pixel_size&&I.jsxs("tr",{children:[I.jsx("td",{style:{padding:"6px 8px",fontWeight:600,color:"#6b7280",borderBottom:"1px solid #e5e7eb"},children:"Pixel Size"}),I.jsxs("td",{style:{padding:"6px 8px",color:"#111827",borderBottom:"1px solid #e5e7eb"},children:[e.pixel_size[0].toFixed(1),"m  ",e.pixel_size[1].toFixed(1),"m"]})]}),e.units&&I.jsxs("tr",{children:[I.jsx("td",{style:{padding:"6px 8px",fontWeight:600,color:"#6b7280",borderBottom:"1px solid #e5e7eb"},children:"Units"}),I.jsx("td",{style:{padding:"6px 8px",color:"#111827",borderBottom:"1px solid #e5e7eb"},children:e.units})]}),e.created_at&&I.jsxs("tr",{children:[I.jsx("td",{style:{padding:"6px 8px",fontWeight:600,color:"#6b7280",borderBottom:"1px solid #e5e7eb"},children:"Created"}),I.jsx("td",{style:{padding:"6px 8px",color:"#111827",borderBottom:"1px solid #e5e7eb"},children:y(e.created_at)})]}),e.credits&&I.jsxs("tr",{children:[I.jsx("td",{style:{padding:"6px 8px",fontWeight:600,color:"#6b7280",borderBottom:"1px solid #e5e7eb"},children:"Credits"}),I.jsx("td",{style:{padding:"6px 8px",color:"#111827",borderBottom:"1px solid #e5e7eb"},children:e.credits})]})]})})}),e.stats&&I.jsxs("div",{style:{marginTop:"16px",padding:"12px",backgroundColor:"#f9fafb",borderRadius:"4px"},children:[I.jsx("h4",{style:{fontSize:"13px",fontWeight:700,color:"#111827",marginBottom:"10px"},children:"Statistics"}),I.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px",fontSize:"12px"},children:[e.stats.min!==null&&e.stats.min!==void 0&&I.jsxs(I.Fragment,{children:[I.jsx("div",{style:{color:"#6b7280",fontWeight:600},children:"Min:"}),I.jsx("div",{style:{color:"#111827"},children:e.stats.min.toFixed(2)})]}),e.stats.max!==null&&e.stats.max!==void 0&&I.jsxs(I.Fragment,{children:[I.jsx("div",{style:{color:"#6b7280",fontWeight:600},children:"Max:"}),I.jsx("div",{style:{color:"#111827"},children:e.stats.max.toFixed(2)})]}),e.stats.mean!==null&&e.stats.mean!==void 0&&I.jsxs(I.Fragment,{children:[I.jsx("div",{style:{color:"#6b7280",fontWeight:600},children:"Mean:"}),I.jsx("div",{style:{color:"#111827"},children:e.stats.mean.toFixed(2)})]}),e.stats.std!==null&&e.stats.std!==void 0&&I.jsxs(I.Fragment,{children:[I.jsx("div",{style:{color:"#6b7280",fontWeight:600},children:"Std Dev:"}),I.jsx("div",{style:{color:"#111827"},children:e.stats.std.toFixed(2)})]}),e.stats.nodata!==null&&e.stats.nodata!==void 0&&I.jsxs(I.Fragment,{children:[I.jsx("div",{style:{color:"#6b7280",fontWeight:600},children:"NoData:"}),I.jsx("div",{style:{color:"#111827"},children:e.stats.nodata})]}),e.stats.count!==null&&e.stats.count!==void 0&&I.jsxs(I.Fragment,{children:[I.jsx("div",{style:{color:"#6b7280",fontWeight:600},children:"Valid Pixels:"}),I.jsx("div",{style:{color:"#111827"},children:e.stats.count.toLocaleString()})]})]})]})]})}function Zm(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var i=1;i<=60;++i)e("EPSG:"+(32600+i),"+proj=utm +zone="+i+" +datum=WGS84 +units=m"),e("EPSG:"+(32700+i),"+proj=utm +zone="+i+" +south +datum=WGS84 +units=m");e("EPSG:5041","+title=WGS 84 / UPS North (E,N) +proj=stere +lat_0=90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),e("EPSG:5042","+title=WGS 84 / UPS South (E,N) +proj=stere +lat_0=-90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),e.WGS84=e["EPSG:4326"],e["EPSG:3785"]=e["EPSG:3857"],e.GOOGLE=e["EPSG:3857"],e["EPSG:900913"]=e["EPSG:3857"],e["EPSG:102113"]=e["EPSG:3857"]}var ol=1,al=2,Nl=3,qm=4,qc=5,op=6378137,Km=6356752314e-3,ap=.0066943799901413165,vu=484813681109536e-20,Kt=Math.PI/2,Jm=.16666666666666666,Xm=.04722222222222222,Ym=.022156084656084655,re=1e-10,Rn=.017453292519943295,Cr=57.29577951308232,un=Math.PI/4,Lu=Math.PI*2,Hn=3.14159265359,br={};br.greenwich=0;br.lisbon=-9.131906111111;br.paris=2.337229166667;br.bogota=-74.080916666667;br.madrid=-3.687938888889;br.rome=12.452333333333;br.bern=7.439583333333;br.jakarta=106.807719444444;br.ferro=-17.666666666667;br.brussels=4.367975;br.stockholm=18.058277777778;br.athens=23.7163375;br.oslo=10.722916666667;const Qm={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.1},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var lp=/[\s_\-\/\(\)]/g;function Ta(e,i){if(e[i])return e[i];for(var o=Object.keys(e),c=i.toLowerCase().replace(lp,""),f=-1,g,y;++f<o.length;)if(g=o[f],y=g.toLowerCase().replace(lp,""),y===c)return e[g]}function Kc(e){var i={},o=e.split("+").map(function(v){return v.trim()}).filter(function(v){return v}).reduce(function(v,E){var A=E.split("=");return A.push(!0),v[A[0].toLowerCase()]=A[1],v},{}),c,f,g,y={proj:"projName",datum:"datumCode",rf:function(v){i.rf=parseFloat(v)},lat_0:function(v){i.lat0=v*Rn},lat_1:function(v){i.lat1=v*Rn},lat_2:function(v){i.lat2=v*Rn},lat_ts:function(v){i.lat_ts=v*Rn},lon_0:function(v){i.long0=v*Rn},lon_1:function(v){i.long1=v*Rn},lon_2:function(v){i.long2=v*Rn},alpha:function(v){i.alpha=parseFloat(v)*Rn},gamma:function(v){i.rectified_grid_angle=parseFloat(v)*Rn},lonc:function(v){i.longc=v*Rn},x_0:function(v){i.x0=parseFloat(v)},y_0:function(v){i.y0=parseFloat(v)},k_0:function(v){i.k0=parseFloat(v)},k:function(v){i.k0=parseFloat(v)},a:function(v){i.a=parseFloat(v)},b:function(v){i.b=parseFloat(v)},r:function(v){i.a=i.b=parseFloat(v)},r_a:function(){i.R_A=!0},zone:function(v){i.zone=parseInt(v,10)},south:function(){i.utmSouth=!0},towgs84:function(v){i.datum_params=v.split(",").map(function(E){return parseFloat(E)})},to_meter:function(v){i.to_meter=parseFloat(v)},units:function(v){i.units=v;var E=Ta(Qm,v);E&&(i.to_meter=E.to_meter)},from_greenwich:function(v){i.from_greenwich=v*Rn},pm:function(v){var E=Ta(br,v);i.from_greenwich=(E||parseFloat(v))*Rn},nadgrids:function(v){v==="@null"?i.datumCode="none":i.nadgrids=v},axis:function(v){var E="ewnsud";v.length===3&&E.indexOf(v.substr(0,1))!==-1&&E.indexOf(v.substr(1,1))!==-1&&E.indexOf(v.substr(2,1))!==-1&&(i.axis=v)},approx:function(){i.approx=!0},over:function(){i.over=!0}};for(c in o)f=o[c],c in y?(g=y[c],typeof g=="function"?g(f):i[g]=f):i[c]=f;return typeof i.datumCode=="string"&&i.datumCode!=="WGS84"&&(i.datumCode=i.datumCode.toLowerCase()),i.projStr=e,i}class o0{static getId(i){const o=i.find(c=>Array.isArray(c)&&c[0]==="ID");return o&&o.length>=3?{authority:o[1],code:parseInt(o[2],10)}:null}static convertUnit(i,o="unit"){if(!i||i.length<3)return{type:o,name:"unknown",conversion_factor:null};const c=i[1],f=parseFloat(i[2])||null,g=i.find(v=>Array.isArray(v)&&v[0]==="ID"),y=g?{authority:g[1],code:parseInt(g[2],10)}:null;return{type:o,name:c,conversion_factor:f,id:y}}static convertAxis(i){const o=i[1]||"Unknown";let c;const f=o.match(/^\((.)\)$/);if(f){const A=f[1].toUpperCase();if(A==="E")c="east";else if(A==="N")c="north";else if(A==="U")c="up";else throw new Error(`Unknown axis abbreviation: ${A}`)}else c=i[2]?i[2].toLowerCase():"unknown";const g=i.find(A=>Array.isArray(A)&&A[0]==="ORDER"),y=g?parseInt(g[1],10):null,v=i.find(A=>Array.isArray(A)&&(A[0]==="LENGTHUNIT"||A[0]==="ANGLEUNIT"||A[0]==="SCALEUNIT")),E=this.convertUnit(v);return{name:o,direction:c,unit:E,order:y}}static extractAxes(i){return i.filter(o=>Array.isArray(o)&&o[0]==="AXIS").map(o=>this.convertAxis(o)).sort((o,c)=>(o.order||0)-(c.order||0))}static convert(i,o={}){switch(i[0]){case"PROJCRS":o.type="ProjectedCRS",o.name=i[1],o.base_crs=i.find(B=>Array.isArray(B)&&B[0]==="BASEGEOGCRS")?this.convert(i.find(B=>Array.isArray(B)&&B[0]==="BASEGEOGCRS")):null,o.conversion=i.find(B=>Array.isArray(B)&&B[0]==="CONVERSION")?this.convert(i.find(B=>Array.isArray(B)&&B[0]==="CONVERSION")):null;const c=i.find(B=>Array.isArray(B)&&B[0]==="CS");c&&(o.coordinate_system={type:c[1],axis:this.extractAxes(i)});const f=i.find(B=>Array.isArray(B)&&B[0]==="LENGTHUNIT");if(f){const B=this.convertUnit(f);o.coordinate_system.unit=B}o.id=this.getId(i);break;case"BASEGEOGCRS":case"GEOGCRS":o.type="GeographicCRS",o.name=i[1];const g=i.find(B=>Array.isArray(B)&&(B[0]==="DATUM"||B[0]==="ENSEMBLE"));if(g){const B=this.convert(g);g[0]==="ENSEMBLE"?o.datum_ensemble=B:o.datum=B;const V=i.find(q=>Array.isArray(q)&&q[0]==="PRIMEM");V&&V[1]!=="Greenwich"&&(B.prime_meridian={name:V[1],longitude:parseFloat(V[2])})}o.coordinate_system={type:"ellipsoidal",axis:this.extractAxes(i)},o.id=this.getId(i);break;case"DATUM":o.type="GeodeticReferenceFrame",o.name=i[1],o.ellipsoid=i.find(B=>Array.isArray(B)&&B[0]==="ELLIPSOID")?this.convert(i.find(B=>Array.isArray(B)&&B[0]==="ELLIPSOID")):null;break;case"ENSEMBLE":o.type="DatumEnsemble",o.name=i[1],o.members=i.filter(B=>Array.isArray(B)&&B[0]==="MEMBER").map(B=>({type:"DatumEnsembleMember",name:B[1],id:this.getId(B)}));const y=i.find(B=>Array.isArray(B)&&B[0]==="ENSEMBLEACCURACY");y&&(o.accuracy=parseFloat(y[1]));const v=i.find(B=>Array.isArray(B)&&B[0]==="ELLIPSOID");v&&(o.ellipsoid=this.convert(v)),o.id=this.getId(i);break;case"ELLIPSOID":o.type="Ellipsoid",o.name=i[1],o.semi_major_axis=parseFloat(i[2]),o.inverse_flattening=parseFloat(i[3]),i.find(B=>Array.isArray(B)&&B[0]==="LENGTHUNIT")&&this.convert(i.find(B=>Array.isArray(B)&&B[0]==="LENGTHUNIT"),o);break;case"CONVERSION":o.type="Conversion",o.name=i[1],o.method=i.find(B=>Array.isArray(B)&&B[0]==="METHOD")?this.convert(i.find(B=>Array.isArray(B)&&B[0]==="METHOD")):null,o.parameters=i.filter(B=>Array.isArray(B)&&B[0]==="PARAMETER").map(B=>this.convert(B));break;case"METHOD":o.type="Method",o.name=i[1],o.id=this.getId(i);break;case"PARAMETER":o.type="Parameter",o.name=i[1],o.value=parseFloat(i[2]),o.unit=this.convertUnit(i.find(B=>Array.isArray(B)&&(B[0]==="LENGTHUNIT"||B[0]==="ANGLEUNIT"||B[0]==="SCALEUNIT"))),o.id=this.getId(i);break;case"BOUNDCRS":o.type="BoundCRS";const E=i.find(B=>Array.isArray(B)&&B[0]==="SOURCECRS");if(E){const B=E.find(V=>Array.isArray(V));o.source_crs=B?this.convert(B):null}const A=i.find(B=>Array.isArray(B)&&B[0]==="TARGETCRS");if(A){const B=A.find(V=>Array.isArray(V));o.target_crs=B?this.convert(B):null}const G=i.find(B=>Array.isArray(B)&&B[0]==="ABRIDGEDTRANSFORMATION");G?o.transformation=this.convert(G):o.transformation=null;break;case"ABRIDGEDTRANSFORMATION":if(o.type="Transformation",o.name=i[1],o.method=i.find(B=>Array.isArray(B)&&B[0]==="METHOD")?this.convert(i.find(B=>Array.isArray(B)&&B[0]==="METHOD")):null,o.parameters=i.filter(B=>Array.isArray(B)&&(B[0]==="PARAMETER"||B[0]==="PARAMETERFILE")).map(B=>{if(B[0]==="PARAMETER")return this.convert(B);if(B[0]==="PARAMETERFILE")return{name:B[1],value:B[2],id:{authority:"EPSG",code:8656}}}),o.parameters.length===7){const B=o.parameters[6];B.name==="Scale difference"&&(B.value=Math.round((B.value-1)*1e12)/1e6)}o.id=this.getId(i);break;case"AXIS":o.coordinate_system||(o.coordinate_system={type:"unspecified",axis:[]}),o.coordinate_system.axis.push(this.convertAxis(i));break;case"LENGTHUNIT":const P=this.convertUnit(i,"LinearUnit");o.coordinate_system&&o.coordinate_system.axis&&o.coordinate_system.axis.forEach(B=>{B.unit||(B.unit=P)}),P.conversion_factor&&P.conversion_factor!==1&&o.semi_major_axis&&(o.semi_major_axis={value:o.semi_major_axis,unit:P});break;default:o.keyword=i[0];break}return o}}class t_ extends o0{static convert(i,o={}){return super.convert(i,o),o.coordinate_system&&o.coordinate_system.subtype==="Cartesian"&&delete o.coordinate_system,o.usage&&delete o.usage,o}}class e_ extends o0{static convert(i,o={}){super.convert(i,o);const c=i.find(g=>Array.isArray(g)&&g[0]==="CS");c&&(o.coordinate_system={subtype:c[1],axis:this.extractAxes(i)});const f=i.find(g=>Array.isArray(g)&&g[0]==="USAGE");if(f){const g=f.find(E=>Array.isArray(E)&&E[0]==="SCOPE"),y=f.find(E=>Array.isArray(E)&&E[0]==="AREA"),v=f.find(E=>Array.isArray(E)&&E[0]==="BBOX");o.usage={},g&&(o.usage.scope=g[1]),y&&(o.usage.area=y[1]),v&&(o.usage.bbox=v.slice(1))}return o}}function n_(e){return e.find(i=>Array.isArray(i)&&i[0]==="USAGE")?"2019":(e.find(i=>Array.isArray(i)&&i[0]==="CS")||e[0]==="BOUNDCRS"||e[0]==="PROJCRS"||e[0]==="GEOGCRS","2015")}function i_(e){return(n_(e)==="2019"?e_:t_).convert(e)}function r_(e){const i=e.toUpperCase();return i.includes("PROJCRS")||i.includes("GEOGCRS")||i.includes("BOUNDCRS")||i.includes("VERTCRS")||i.includes("LENGTHUNIT")||i.includes("ANGLEUNIT")||i.includes("SCALEUNIT")?"WKT2":(i.includes("PROJCS")||i.includes("GEOGCS")||i.includes("LOCAL_CS")||i.includes("VERT_CS")||i.includes("UNIT"),"WKT1")}var Cu=1,a0=2,l0=3,Ch=4,u0=5,hf=-1,s_=/\s/,o_=/[A-Za-z]/,a_=/[A-Za-z84_]/,zh=/[,\]]/,h0=/[\d\.E\-\+]/;function Uo(e){if(typeof e!="string")throw new Error("not a string");this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=Cu}Uo.prototype.readCharicter=function(){var e=this.text[this.place++];if(this.state!==Ch)for(;s_.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case Cu:return this.neutral(e);case a0:return this.keyword(e);case Ch:return this.quoted(e);case u0:return this.afterquote(e);case l0:return this.number(e);case hf:return}};Uo.prototype.afterquote=function(e){if(e==='"'){this.word+='"',this.state=Ch;return}if(zh.test(e)){this.word=this.word.trim(),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in afterquote yet, index '+this.place)};Uo.prototype.afterItem=function(e){if(e===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=Cu;return}if(e==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=Cu,this.currentObject=this.stack.pop(),this.currentObject||(this.state=hf);return}};Uo.prototype.number=function(e){if(h0.test(e)){this.word+=e;return}if(zh.test(e)){this.word=parseFloat(this.word),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in number yet, index '+this.place)};Uo.prototype.quoted=function(e){if(e==='"'){this.state=u0;return}this.word+=e};Uo.prototype.keyword=function(e){if(a_.test(e)){this.word+=e;return}if(e==="["){var i=[];i.push(this.word),this.level++,this.root===null?this.root=i:this.currentObject.push(i),this.stack.push(this.currentObject),this.currentObject=i,this.state=Cu;return}if(zh.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in keyword yet, index '+this.place)};Uo.prototype.neutral=function(e){if(o_.test(e)){this.word=e,this.state=a0;return}if(e==='"'){this.word="",this.state=Ch;return}if(h0.test(e)){this.word=e,this.state=l0;return}if(zh.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in neutral yet, index '+this.place)};Uo.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===hf)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function l_(e){var i=new Uo(e);return i.output()}function Nc(e,i,o){Array.isArray(i)&&(o.unshift(i),i=null);var c=i?{}:e,f=o.reduce(function(g,y){return Rl(y,g),g},c);i&&(e[i]=f)}function Rl(e,i){if(!Array.isArray(e)){i[e]=!0;return}var o=e.shift();if(o==="PARAMETER"&&(o=e.shift()),e.length===1){if(Array.isArray(e[0])){i[o]={},Rl(e[0],i[o]);return}i[o]=e[0];return}if(!e.length){i[o]=!0;return}if(o==="TOWGS84"){i[o]=e;return}if(o==="AXIS"){o in i||(i[o]=[]),i[o].push(e);return}Array.isArray(o)||(i[o]={});var c;switch(o){case"UNIT":case"PRIMEM":case"VERT_DATUM":i[o]={name:e[0].toLowerCase(),convert:e[1]},e.length===3&&Rl(e[2],i[o]);return;case"SPHEROID":case"ELLIPSOID":i[o]={name:e[0],a:e[1],rf:e[2]},e.length===4&&Rl(e[3],i[o]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":e[0]=["name",e[0]],Nc(i,o,e);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":e[0]=["name",e[0]],Nc(i,o,e),i[o].type=o;return;default:for(c=-1;++c<e.length;)if(!Array.isArray(e[c]))return Rl(e,i[o]);return Nc(i,o,e)}}var u_=.017453292519943295;function Fs(e){return e*u_}function c0(e){const i=(e.projName||"").toLowerCase().replace(/_/g," ");!e.long0&&e.longc&&(i==="albers conic equal area"||i==="lambert azimuthal equal area")&&(e.long0=e.longc),!e.lat_ts&&e.lat1&&(i==="stereographic south pole"||i==="polar stereographic (variant b)")?(e.lat0=Fs(e.lat1>0?90:-90),e.lat_ts=e.lat1,delete e.lat1):!e.lat_ts&&e.lat0&&(i==="polar stereographic"||i==="polar stereographic (variant a)")&&(e.lat_ts=e.lat0,e.lat0=Fs(e.lat0>0?90:-90),delete e.lat1)}function up(e){let i={units:null,to_meter:void 0};return typeof e=="string"?(i.units=e.toLowerCase(),i.units==="metre"&&(i.units="meter"),i.units==="meter"&&(i.to_meter=1)):e&&e.name&&(i.units=e.name.toLowerCase(),i.units==="metre"&&(i.units="meter"),i.to_meter=e.conversion_factor),i}function hp(e){return typeof e=="object"?e.value*e.unit.conversion_factor:e}function cp(e,i){e.ellipsoid.radius?(i.a=e.ellipsoid.radius,i.rf=0):(i.a=hp(e.ellipsoid.semi_major_axis),e.ellipsoid.inverse_flattening!==void 0?i.rf=e.ellipsoid.inverse_flattening:e.ellipsoid.semi_major_axis!==void 0&&e.ellipsoid.semi_minor_axis!==void 0&&(i.rf=i.a/(i.a-hp(e.ellipsoid.semi_minor_axis))))}function bh(e,i={}){return!e||typeof e!="object"?e:e.type==="BoundCRS"?(bh(e.source_crs,i),e.transformation&&(e.transformation.method&&e.transformation.method.name==="NTv2"?i.nadgrids=e.transformation.parameters[0].value:i.datum_params=e.transformation.parameters.map(o=>o.value)),i):(Object.keys(e).forEach(o=>{const c=e[o];if(c!==null)switch(o){case"name":if(i.srsCode)break;i.name=c,i.srsCode=c;break;case"type":c==="GeographicCRS"?i.projName="longlat":c==="ProjectedCRS"&&e.conversion&&e.conversion.method&&(i.projName=e.conversion.method.name);break;case"datum":case"datum_ensemble":c.ellipsoid&&(i.ellps=c.ellipsoid.name,cp(c,i)),c.prime_meridian&&(i.from_greenwich=c.prime_meridian.longitude*Math.PI/180);break;case"ellipsoid":i.ellps=c.name,cp(c,i);break;case"prime_meridian":i.long0=(c.longitude||0)*Math.PI/180;break;case"coordinate_system":if(c.axis){if(i.axis=c.axis.map(f=>{const g=f.direction;if(g==="east")return"e";if(g==="north")return"n";if(g==="west")return"w";if(g==="south")return"s";throw new Error(`Unknown axis direction: ${g}`)}).join("")+"u",c.unit){const{units:f,to_meter:g}=up(c.unit);i.units=f,i.to_meter=g}else if(c.axis[0]&&c.axis[0].unit){const{units:f,to_meter:g}=up(c.axis[0].unit);i.units=f,i.to_meter=g}}break;case"id":c.authority&&c.code&&(i.title=c.authority+":"+c.code);break;case"conversion":c.method&&c.method.name&&(i.projName=c.method.name),c.parameters&&c.parameters.forEach(f=>{const g=f.name.toLowerCase().replace(/\s+/g,"_"),y=f.value;f.unit&&f.unit.conversion_factor?i[g]=y*f.unit.conversion_factor:f.unit==="degree"?i[g]=y*Math.PI/180:i[g]=y});break;case"unit":c.name&&(i.units=c.name.toLowerCase(),i.units==="metre"&&(i.units="meter")),c.conversion_factor&&(i.to_meter=c.conversion_factor);break;case"base_crs":bh(c,i),i.datumCode=c.id?c.id.authority+"_"+c.id.code:c.name;break}}),i.latitude_of_false_origin!==void 0&&(i.lat0=i.latitude_of_false_origin),i.longitude_of_false_origin!==void 0&&(i.long0=i.longitude_of_false_origin),i.latitude_of_standard_parallel!==void 0&&(i.lat0=i.latitude_of_standard_parallel,i.lat1=i.latitude_of_standard_parallel),i.latitude_of_1st_standard_parallel!==void 0&&(i.lat1=i.latitude_of_1st_standard_parallel),i.latitude_of_2nd_standard_parallel!==void 0&&(i.lat2=i.latitude_of_2nd_standard_parallel),i.latitude_of_projection_centre!==void 0&&(i.lat0=i.latitude_of_projection_centre),i.longitude_of_projection_centre!==void 0&&(i.longc=i.longitude_of_projection_centre),i.easting_at_false_origin!==void 0&&(i.x0=i.easting_at_false_origin),i.northing_at_false_origin!==void 0&&(i.y0=i.northing_at_false_origin),i.latitude_of_natural_origin!==void 0&&(i.lat0=i.latitude_of_natural_origin),i.longitude_of_natural_origin!==void 0&&(i.long0=i.longitude_of_natural_origin),i.longitude_of_origin!==void 0&&(i.long0=i.longitude_of_origin),i.false_easting!==void 0&&(i.x0=i.false_easting),i.easting_at_projection_centre&&(i.x0=i.easting_at_projection_centre),i.false_northing!==void 0&&(i.y0=i.false_northing),i.northing_at_projection_centre&&(i.y0=i.northing_at_projection_centre),i.standard_parallel_1!==void 0&&(i.lat1=i.standard_parallel_1),i.standard_parallel_2!==void 0&&(i.lat2=i.standard_parallel_2),i.scale_factor_at_natural_origin!==void 0&&(i.k0=i.scale_factor_at_natural_origin),i.scale_factor_at_projection_centre!==void 0&&(i.k0=i.scale_factor_at_projection_centre),i.scale_factor_on_pseudo_standard_parallel!==void 0&&(i.k0=i.scale_factor_on_pseudo_standard_parallel),i.azimuth!==void 0&&(i.alpha=i.azimuth),i.azimuth_at_projection_centre!==void 0&&(i.alpha=i.azimuth_at_projection_centre),i.angle_from_rectified_to_skew_grid&&(i.rectified_grid_angle=i.angle_from_rectified_to_skew_grid),c0(i),i)}var h_=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function c_(e,i){var o=i[0],c=i[1];!(o in e)&&c in e&&(e[o]=e[c],i.length===3&&(e[o]=i[2](e[o])))}function f0(e){for(var i=Object.keys(e),o=0,c=i.length;o<c;++o){var f=i[o];h_.indexOf(f)!==-1&&f_(e[f]),typeof e[f]=="object"&&f0(e[f])}}function f_(e){if(e.AUTHORITY){var i=Object.keys(e.AUTHORITY)[0];i&&i in e.AUTHORITY&&(e.title=i+":"+e.AUTHORITY[i])}if(e.type==="GEOGCS"?e.projName="longlat":e.type==="LOCAL_CS"?(e.projName="identity",e.local=!0):typeof e.PROJECTION=="object"?e.projName=Object.keys(e.PROJECTION)[0]:e.projName=e.PROJECTION,e.AXIS){for(var o="",c=0,f=e.AXIS.length;c<f;++c){var g=[e.AXIS[c][0].toLowerCase(),e.AXIS[c][1].toLowerCase()];g[0].indexOf("north")!==-1||(g[0]==="y"||g[0]==="lat")&&g[1]==="north"?o+="n":g[0].indexOf("south")!==-1||(g[0]==="y"||g[0]==="lat")&&g[1]==="south"?o+="s":g[0].indexOf("east")!==-1||(g[0]==="x"||g[0]==="lon")&&g[1]==="east"?o+="e":(g[0].indexOf("west")!==-1||(g[0]==="x"||g[0]==="lon")&&g[1]==="west")&&(o+="w")}o.length===2&&(o+="u"),o.length===3&&(e.axis=o)}e.UNIT&&(e.units=e.UNIT.name.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.UNIT.convert&&(e.type==="GEOGCS"?e.DATUM&&e.DATUM.SPHEROID&&(e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a):e.to_meter=e.UNIT.convert));var y=e.GEOGCS;e.type==="GEOGCS"&&(y=e),y&&(y.DATUM?e.datumCode=y.DATUM.name.toLowerCase():e.datumCode=y.name.toLowerCase(),e.datumCode.slice(0,2)==="d_"&&(e.datumCode=e.datumCode.slice(2)),e.datumCode==="new_zealand_1949"&&(e.datumCode="nzgd49"),(e.datumCode==="wgs_1984"||e.datumCode==="world_geodetic_system_1984")&&(e.PROJECTION==="Mercator_Auxiliary_Sphere"&&(e.sphere=!0),e.datumCode="wgs84"),e.datumCode==="belge_1972"&&(e.datumCode="rnb72"),y.DATUM&&y.DATUM.SPHEROID&&(e.ellps=y.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),e.ellps.toLowerCase().slice(0,13)==="international"&&(e.ellps="intl"),e.a=y.DATUM.SPHEROID.a,e.rf=parseFloat(y.DATUM.SPHEROID.rf,10)),y.DATUM&&y.DATUM.TOWGS84&&(e.datum_params=y.DATUM.TOWGS84),~e.datumCode.indexOf("osgb_1936")&&(e.datumCode="osgb36"),~e.datumCode.indexOf("osni_1952")&&(e.datumCode="osni52"),(~e.datumCode.indexOf("tm65")||~e.datumCode.indexOf("geodetic_datum_of_1965"))&&(e.datumCode="ire65"),e.datumCode==="ch1903+"&&(e.datumCode="ch1903"),~e.datumCode.indexOf("israel")&&(e.datumCode="isr93")),e.b&&!isFinite(e.b)&&(e.b=e.a),e.rectified_grid_angle&&(e.rectified_grid_angle=Fs(e.rectified_grid_angle));function v(G){var P=e.to_meter||1;return G*P}var E=function(G){return c_(e,G)},A=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Fs],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Fs],["x0","false_easting",v],["y0","false_northing",v],["long0","central_meridian",Fs],["lat0","latitude_of_origin",Fs],["lat0","standard_parallel_1",Fs],["lat1","standard_parallel_1",Fs],["lat2","standard_parallel_2",Fs],["azimuth","Azimuth"],["alpha","azimuth",Fs],["srsCode","name"]];A.forEach(E),c0(e)}function Sh(e){if(typeof e=="object")return bh(e);const i=r_(e);var o=l_(e);if(i==="WKT2"){const g=i_(o);return bh(g)}var c=o[0],f={};return Rl(o,f),f0(f),f[c]}function Pi(e){var i=this;if(arguments.length===2){var o=arguments[1];typeof o=="string"?o.charAt(0)==="+"?Pi[e]=Kc(arguments[1]):Pi[e]=Sh(arguments[1]):o&&typeof o=="object"&&!("projName"in o)?Pi[e]=Sh(arguments[1]):(Pi[e]=o,o||delete Pi[e])}else if(arguments.length===1){if(Array.isArray(e))return e.map(function(c){return Array.isArray(c)?Pi.apply(i,c):Pi(c)});if(typeof e=="string"){if(e in Pi)return Pi[e]}else"EPSG"in e?Pi["EPSG:"+e.EPSG]=e:"ESRI"in e?Pi["ESRI:"+e.ESRI]=e:"IAU2000"in e?Pi["IAU2000:"+e.IAU2000]=e:console.log(e);return}}Zm(Pi);function d_(e){return typeof e=="string"}function p_(e){return e in Pi}function g_(e){return e.indexOf("+")!==0&&e.indexOf("[")!==-1||typeof e=="object"&&!("srsCode"in e)}var m_=["3857","900913","3785","102113"];function __(e){var i=Ta(e,"authority");if(i){var o=Ta(i,"epsg");return o&&m_.indexOf(o)>-1}}function y_(e){var i=Ta(e,"extension");if(i)return Ta(i,"proj4")}function v_(e){return e[0]==="+"}function x_(e){if(d_(e)){if(p_(e))return Pi[e];if(g_(e)){var i=Sh(e);if(__(i))return Pi["EPSG:3857"];var o=y_(i);return o?Kc(o):i}if(v_(e))return Kc(e)}else return"projName"in e?e:Sh(e)}function fp(e,i){e=e||{};var o,c;if(!i)return e;for(c in i)o=i[c],o!==void 0&&(e[c]=o);return e}function mo(e,i,o){var c=e*i;return o/Math.sqrt(1-c*c)}function Tu(e){return e<0?-1:1}function le(e,i){return i||Math.abs(e)<=Hn?e:e-Tu(e)*Lu}function zs(e,i,o){var c=e*o,f=.5*e;return c=Math.pow((1-c)/(1+c),f),Math.tan(.5*(Kt-i))/c}function bu(e,i){for(var o=.5*e,c,f,g=Kt-2*Math.atan(i),y=0;y<=15;y++)if(c=e*Math.sin(g),f=Kt-2*Math.atan(i*Math.pow((1-c)/(1+c),o))-g,g+=f,Math.abs(f)<=1e-10)return g;return-9999}function w_(){var e=this.b/this.a;this.es=1-e*e,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=mo(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function M_(e){var i=e.x,o=e.y;if(o*Cr>90&&o*Cr<-90&&i*Cr>180&&i*Cr<-180)return null;var c,f;if(Math.abs(Math.abs(o)-Kt)<=re)return null;if(this.sphere)c=this.x0+this.a*this.k0*le(i-this.long0,this.over),f=this.y0+this.a*this.k0*Math.log(Math.tan(un+.5*o));else{var g=Math.sin(o),y=zs(this.e,o,g);c=this.x0+this.a*this.k0*le(i-this.long0,this.over),f=this.y0-this.a*this.k0*Math.log(y)}return e.x=c,e.y=f,e}function E_(e){var i=e.x-this.x0,o=e.y-this.y0,c,f;if(this.sphere)f=Kt-2*Math.atan(Math.exp(-o/(this.a*this.k0)));else{var g=Math.exp(-o/(this.a*this.k0));if(f=bu(this.e,g),f===-9999)return null}return c=le(this.long0+i/(this.a*this.k0),this.over),e.x=c,e.y=f,e}var L_=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","Mercator_Variant_A","merc"];const C_={init:w_,forward:M_,inverse:E_,names:L_};function b_(){}function dp(e){return e}var d0=["longlat","identity"];const S_={init:b_,forward:dp,inverse:dp,names:d0};var k_=[C_,S_],sl={},Il=[];function p0(e,i){var o=Il.length;return e.names?(Il[o]=e,e.names.forEach(function(c){sl[c.toLowerCase()]=o}),this):(console.log(i),!0)}function g0(e){return e.replace(/[-\(\)\s]+/g," ").trim().replace(/ /g,"_")}function P_(e){if(!e)return!1;var i=e.toLowerCase();if(typeof sl[i]<"u"&&Il[sl[i]]||(i=g0(i),i in sl&&Il[sl[i]]))return Il[sl[i]]}function A_(){k_.forEach(p0)}const B_={start:A_,add:p0,get:P_};var m0={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"},andrae:{a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"},clrk80:{a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:63558348467e-4,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"},WGS84:{a:6378137,rf:298.257223563,ellipseName:"WGS 84"},sphere:{a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}};const T_=m0.WGS84;function R_(e,i,o,c){var f=e*e,g=i*i,y=(f-g)/f,v=0;c?(e*=1-y*(Jm+y*(Xm+y*Ym)),f=e*e,y=0):v=Math.sqrt(y);var E=(f-g)/g;return{es:y,e:v,ep2:E}}function I_(e,i,o,c,f){if(!e){var g=Ta(m0,c);g||(g=T_),e=g.a,i=g.b,o=g.rf}return o&&!i&&(i=(1-1/o)*e),(o===0||Math.abs(e-i)<re)&&(f=!0,i=e),{a:e,b:i,rf:o,sphere:f}}var yh={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},EPSG_5451:{towgs84:"6.41,-49.05,-11.28,1.5657,0.5242,6.9718,-5.7649"},IGNF_LURESG:{towgs84:"-192.986,13.673,-39.309,-0.4099,-2.9332,2.6881,0.43"},EPSG_4614:{towgs84:"-119.4248,-303.65872,-11.00061,1.164298,0.174458,1.096259,3.657065"},EPSG_4615:{towgs84:"-494.088,-312.129,279.877,-1.423,-1.013,1.59,-0.748"},ESRI_37241:{towgs84:"-76.822,257.457,-12.817,2.136,-0.033,-2.392,-0.031"},ESRI_37249:{towgs84:"-440.296,58.548,296.265,1.128,10.202,4.559,-0.438"},ESRI_37245:{towgs84:"-511.151,-181.269,139.609,1.05,2.703,1.798,3.071"},EPSG_4178:{towgs84:"24.9,-126.4,-93.2,-0.063,-0.247,-0.041,1.01"},EPSG_4622:{towgs84:"-472.29,-5.63,-304.12,0.4362,-0.8374,0.2563,1.8984"},EPSG_4625:{towgs84:"126.93,547.94,130.41,-2.7867,5.1612,-0.8584,13.8227"},EPSG_5252:{towgs84:"0.023,0.036,-0.068,0.00176,0.00912,-0.01136,0.00439"},EPSG_4314:{towgs84:"597.1,71.4,412.1,0.894,0.068,-1.563,7.58"},EPSG_4282:{towgs84:"-178.3,-316.7,-131.5,5.278,6.077,10.979,19.166"},EPSG_4231:{towgs84:"-83.11,-97.38,-117.22,0.0276,-0.2167,0.2147,0.1218"},EPSG_4274:{towgs84:"-230.994,102.591,25.199,0.633,-0.239,0.9,1.95"},EPSG_4134:{towgs84:"-180.624,-225.516,173.919,-0.81,-1.898,8.336,16.71006"},EPSG_4254:{towgs84:"18.38,192.45,96.82,0.056,-0.142,-0.2,-0.0013"},EPSG_4159:{towgs84:"-194.513,-63.978,-25.759,-3.4027,3.756,-3.352,-0.9175"},EPSG_4687:{towgs84:"0.072,-0.507,-0.245,0.0183,-0.0003,0.007,-0.0093"},EPSG_4227:{towgs84:"-83.58,-397.54,458.78,-17.595,-2.847,4.256,3.225"},EPSG_4746:{towgs84:"599.4,72.4,419.2,-0.062,-0.022,-2.723,6.46"},EPSG_4745:{towgs84:"612.4,77,440.2,-0.054,0.057,-2.797,2.55"},EPSG_6311:{towgs84:"8.846,-4.394,-1.122,-0.00237,-0.146528,0.130428,0.783926"},EPSG_4289:{towgs84:"565.7381,50.4018,465.2904,-1.91514,1.60363,-9.09546,4.07244"},EPSG_4230:{towgs84:"-68.863,-134.888,-111.49,-0.53,-0.14,0.57,-3.4"},EPSG_4154:{towgs84:"-123.02,-158.95,-168.47"},EPSG_4156:{towgs84:"570.8,85.7,462.8,4.998,1.587,5.261,3.56"},EPSG_4299:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4179:{towgs84:"33.4,-146.6,-76.3,-0.359,-0.053,0.844,-0.84"},EPSG_4313:{towgs84:"-106.8686,52.2978,-103.7239,0.3366,-0.457,1.8422,-1.2747"},EPSG_4194:{towgs84:"163.511,127.533,-159.789"},EPSG_4195:{towgs84:"105,326,-102.5"},EPSG_4196:{towgs84:"-45,417,-3.5"},EPSG_4611:{towgs84:"-162.619,-276.959,-161.764,0.067753,-2.243649,-1.158827,-1.094246"},EPSG_4633:{towgs84:"137.092,131.66,91.475,-1.9436,-11.5993,-4.3321,-7.4824"},EPSG_4641:{towgs84:"-408.809,366.856,-412.987,1.8842,-0.5308,2.1655,-121.0993"},EPSG_4643:{towgs84:"-480.26,-438.32,-643.429,16.3119,20.1721,-4.0349,-111.7002"},EPSG_4300:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4188:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4660:{towgs84:"982.6087,552.753,-540.873,32.39344,-153.25684,-96.2266,16.805"},EPSG_4662:{towgs84:"97.295,-263.247,310.882,-1.5999,0.8386,3.1409,13.3259"},EPSG_3906:{towgs84:"577.88891,165.22205,391.18289,4.9145,-0.94729,-13.05098,7.78664"},EPSG_4307:{towgs84:"-209.3622,-87.8162,404.6198,0.0046,3.4784,0.5805,-1.4547"},EPSG_6892:{towgs84:"-76.269,-16.683,68.562,-6.275,10.536,-4.286,-13.686"},EPSG_4690:{towgs84:"221.597,152.441,176.523,2.403,1.3893,0.884,11.4648"},EPSG_4691:{towgs84:"218.769,150.75,176.75,3.5231,2.0037,1.288,10.9817"},EPSG_4629:{towgs84:"72.51,345.411,79.241,-1.5862,-0.8826,-0.5495,1.3653"},EPSG_4630:{towgs84:"165.804,216.213,180.26,-0.6251,-0.4515,-0.0721,7.4111"},EPSG_4692:{towgs84:"217.109,86.452,23.711,0.0183,-0.0003,0.007,-0.0093"},EPSG_9333:{towgs84:"0,0,0,-8.393,0.749,-10.276,0"},EPSG_9059:{towgs84:"0,0,0"},EPSG_4312:{towgs84:"601.705,84.263,485.227,4.7354,1.3145,5.393,-2.3887"},EPSG_4123:{towgs84:"-96.062,-82.428,-121.753,4.801,0.345,-1.376,1.496"},EPSG_4309:{towgs84:"-124.45,183.74,44.64,-0.4384,0.5446,-0.9706,-2.1365"},ESRI_104106:{towgs84:"-283.088,-70.693,117.445,-1.157,0.059,-0.652,-4.058"},EPSG_4281:{towgs84:"-219.247,-73.802,269.529"},EPSG_4322:{towgs84:"0,0,4.5"},EPSG_4324:{towgs84:"0,0,1.9"},EPSG_4284:{towgs84:"43.822,-108.842,-119.585,1.455,-0.761,0.737,0.549"},EPSG_4277:{towgs84:"446.448,-125.157,542.06,0.15,0.247,0.842,-20.489"},EPSG_4207:{towgs84:"-282.1,-72.2,120,-1.529,0.145,-0.89,-4.46"},EPSG_4688:{towgs84:"347.175,1077.618,2623.677,33.9058,-70.6776,9.4013,186.0647"},EPSG_4689:{towgs84:"410.793,54.542,80.501,-2.5596,-2.3517,-0.6594,17.3218"},EPSG_4720:{towgs84:"0,0,4.5"},EPSG_4273:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},EPSG_4240:{towgs84:"204.64,834.74,293.8"},EPSG_4817:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},ESRI_104131:{towgs84:"426.62,142.62,460.09,4.98,4.49,-12.42,-17.1"},EPSG_4265:{towgs84:"-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68"},EPSG_4263:{towgs84:"-111.92,-87.85,114.5,1.875,0.202,0.219,0.032"},EPSG_4298:{towgs84:"-689.5937,623.84046,-65.93566,-0.02331,1.17094,-0.80054,5.88536"},EPSG_4270:{towgs84:"-253.4392,-148.452,386.5267,0.15605,0.43,-0.1013,-0.0424"},EPSG_4229:{towgs84:"-121.8,98.1,-10.7"},EPSG_4220:{towgs84:"-55.5,-348,-229.2"},EPSG_4214:{towgs84:"12.646,-155.176,-80.863"},EPSG_4232:{towgs84:"-345,3,223"},EPSG_4238:{towgs84:"-1.977,-13.06,-9.993,0.364,0.254,0.689,-1.037"},EPSG_4168:{towgs84:"-170,33,326"},EPSG_4131:{towgs84:"199,931,318.9"},EPSG_4152:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_5228:{towgs84:"572.213,85.334,461.94,4.9732,1.529,5.2484,3.5378"},EPSG_8351:{towgs84:"485.021,169.465,483.839,7.786342,4.397554,4.102655,0"},EPSG_4683:{towgs84:"-127.62,-67.24,-47.04,-3.068,4.903,1.578,-1.06"},EPSG_4133:{towgs84:"0,0,0"},EPSG_7373:{towgs84:"0.819,-0.5762,-1.6446,-0.00378,-0.03317,0.00318,0.0693"},EPSG_9075:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9072:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9294:{towgs84:"1.16835,-1.42001,-2.24431,-0.00822,-0.05508,0.01818,0.23388"},EPSG_4212:{towgs84:"-267.434,173.496,181.814,-13.4704,8.7154,7.3926,14.7492"},EPSG_4191:{towgs84:"-44.183,-0.58,-38.489,2.3867,2.7072,-3.5196,-8.2703"},EPSG_4237:{towgs84:"52.684,-71.194,-13.975,-0.312,-0.1063,-0.3729,1.0191"},EPSG_4740:{towgs84:"-1.08,-0.27,-0.9"},EPSG_4124:{towgs84:"419.3836,99.3335,591.3451,0.850389,1.817277,-7.862238,-0.99496"},EPSG_5681:{towgs84:"584.9636,107.7175,413.8067,1.1155,0.2824,-3.1384,7.9922"},EPSG_4141:{towgs84:"23.772,17.49,17.859,-0.3132,-1.85274,1.67299,-5.4262"},EPSG_4204:{towgs84:"-85.645,-273.077,-79.708,2.289,-1.421,2.532,3.194"},EPSG_4319:{towgs84:"226.702,-193.337,-35.371,-2.229,-4.391,9.238,0.9798"},EPSG_4200:{towgs84:"24.82,-131.21,-82.66"},EPSG_4130:{towgs84:"0,0,0"},EPSG_4127:{towgs84:"-82.875,-57.097,-156.768,-2.158,1.524,-0.982,-0.359"},EPSG_4149:{towgs84:"674.374,15.056,405.346"},EPSG_4617:{towgs84:"-0.991,1.9072,0.5129,1.25033e-7,4.6785e-8,5.6529e-8,0"},EPSG_4663:{towgs84:"-210.502,-66.902,-48.476,2.094,-15.067,-5.817,0.485"},EPSG_4664:{towgs84:"-211.939,137.626,58.3,-0.089,0.251,0.079,0.384"},EPSG_4665:{towgs84:"-105.854,165.589,-38.312,-0.003,-0.026,0.024,-0.048"},EPSG_4666:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},EPSG_4756:{towgs84:"-192.873,-39.382,-111.202,-0.00205,-0.0005,0.00335,0.0188"},EPSG_4723:{towgs84:"-179.483,-69.379,-27.584,-7.862,8.163,6.042,-13.925"},EPSG_4726:{towgs84:"8.853,-52.644,180.304,-0.393,-2.323,2.96,-24.081"},EPSG_4267:{towgs84:"-8.0,160.0,176.0"},EPSG_5365:{towgs84:"-0.16959,0.35312,0.51846,0.03385,-0.16325,0.03446,0.03693"},EPSG_4218:{towgs84:"304.5,306.5,-318.1"},EPSG_4242:{towgs84:"-33.722,153.789,94.959,-8.581,-4.478,4.54,8.95"},EPSG_4216:{towgs84:"-292.295,248.758,429.447,4.9971,2.99,6.6906,1.0289"},ESRI_104105:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},ESRI_104129:{towgs84:"0,0,0"},EPSG_4673:{towgs84:"174.05,-25.49,112.57"},EPSG_4202:{towgs84:"-124,-60,154"},EPSG_4203:{towgs84:"-117.763,-51.51,139.061,0.292,0.443,0.277,-0.191"},EPSG_3819:{towgs84:"595.48,121.69,515.35,4.115,-2.9383,0.853,-3.408"},EPSG_8694:{towgs84:"-93.799,-132.737,-219.073,-1.844,0.648,-6.37,-0.169"},EPSG_4145:{towgs84:"275.57,676.78,229.6"},EPSG_4283:{towgs84:"61.55,-10.87,-40.19,39.4924,32.7221,32.8979,-9.994"},EPSG_4317:{towgs84:"2.3287,-147.0425,-92.0802,-0.3092483,0.32482185,0.49729934,5.68906266"},EPSG_4272:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993"},EPSG_4248:{towgs84:"-307.7,265.3,-363.5"},EPSG_5561:{towgs84:"24,-121,-76"},EPSG_5233:{towgs84:"-0.293,766.95,87.713,0.195704,1.695068,3.473016,-0.039338"},ESRI_104130:{towgs84:"-86,-98,-119"},ESRI_104102:{towgs84:"682,-203,480"},ESRI_37207:{towgs84:"7,-10,-26"},EPSG_4675:{towgs84:"59.935,118.4,-10.871"},ESRI_104109:{towgs84:"-89.121,-348.182,260.871"},ESRI_104112:{towgs84:"-185.583,-230.096,281.361"},ESRI_104113:{towgs84:"25.1,-275.6,222.6"},IGNF_WGS72G:{towgs84:"0,12,6"},IGNF_NTFG:{towgs84:"-168,-60,320"},IGNF_EFATE57G:{towgs84:"-127,-769,472"},IGNF_PGP50G:{towgs84:"324.8,153.6,172.1"},IGNF_REUN47G:{towgs84:"94,-948,-1262"},IGNF_CSG67G:{towgs84:"-186,230,110"},IGNF_GUAD48G:{towgs84:"-467,-16,-300"},IGNF_TAHI51G:{towgs84:"162,117,154"},IGNF_TAHAAG:{towgs84:"65,342,77"},IGNF_NUKU72G:{towgs84:"84,274,65"},IGNF_PETRELS72G:{towgs84:"365,194,166"},IGNF_WALL78G:{towgs84:"253,-133,-127"},IGNF_MAYO50G:{towgs84:"-382,-59,-262"},IGNF_TANNAG:{towgs84:"-139,-967,436"},IGNF_IGN72G:{towgs84:"-13,-348,292"},IGNF_ATIGG:{towgs84:"1118,23,66"},IGNF_FANGA84G:{towgs84:"150.57,158.33,118.32"},IGNF_RUSAT84G:{towgs84:"202.13,174.6,-15.74"},IGNF_KAUE70G:{towgs84:"126.74,300.1,-75.49"},IGNF_MOP90G:{towgs84:"-10.8,-1.8,12.77"},IGNF_MHPF67G:{towgs84:"338.08,212.58,-296.17"},IGNF_TAHI79G:{towgs84:"160.61,116.05,153.69"},IGNF_ANAA92G:{towgs84:"1.5,3.84,4.81"},IGNF_MARQUI72G:{towgs84:"330.91,-13.92,58.56"},IGNF_APAT86G:{towgs84:"143.6,197.82,74.05"},IGNF_TUBU69G:{towgs84:"237.17,171.61,-77.84"},IGNF_STPM50G:{towgs84:"11.363,424.148,373.13"},EPSG_4150:{towgs84:"674.374,15.056,405.346"},EPSG_4754:{towgs84:"-208.4058,-109.8777,-2.5764"},ESRI_104101:{towgs84:"374,150,588"},EPSG_4693:{towgs84:"0,-0.15,0.68"},EPSG_6207:{towgs84:"293.17,726.18,245.36"},EPSG_4153:{towgs84:"-133.63,-157.5,-158.62"},EPSG_4132:{towgs84:"-241.54,-163.64,396.06"},EPSG_4221:{towgs84:"-154.5,150.7,100.4"},EPSG_4266:{towgs84:"-80.7,-132.5,41.1"},EPSG_4193:{towgs84:"-70.9,-151.8,-41.4"},EPSG_5340:{towgs84:"-0.41,0.46,-0.35"},EPSG_4246:{towgs84:"-294.7,-200.1,525.5"},EPSG_4318:{towgs84:"-3.2,-5.7,2.8"},EPSG_4121:{towgs84:"-199.87,74.79,246.62"},EPSG_4223:{towgs84:"-260.1,5.5,432.2"},EPSG_4158:{towgs84:"-0.465,372.095,171.736"},EPSG_4285:{towgs84:"-128.16,-282.42,21.93"},EPSG_4613:{towgs84:"-404.78,685.68,45.47"},EPSG_4607:{towgs84:"195.671,332.517,274.607"},EPSG_4475:{towgs84:"-381.788,-57.501,-256.673"},EPSG_4208:{towgs84:"-157.84,308.54,-146.6"},EPSG_4743:{towgs84:"70.995,-335.916,262.898"},EPSG_4710:{towgs84:"-323.65,551.39,-491.22"},EPSG_7881:{towgs84:"-0.077,0.079,0.086"},EPSG_4682:{towgs84:"283.729,735.942,261.143"},EPSG_4739:{towgs84:"-156,-271,-189"},EPSG_4679:{towgs84:"-80.01,253.26,291.19"},EPSG_4750:{towgs84:"-56.263,16.136,-22.856"},EPSG_4644:{towgs84:"-10.18,-350.43,291.37"},EPSG_4695:{towgs84:"-103.746,-9.614,-255.95"},EPSG_4292:{towgs84:"-355,21,72"},EPSG_4302:{towgs84:"-61.702,284.488,472.052"},EPSG_4143:{towgs84:"-124.76,53,466.79"},EPSG_4606:{towgs84:"-153,153,307"},EPSG_4699:{towgs84:"-770.1,158.4,-498.2"},EPSG_4247:{towgs84:"-273.5,110.6,-357.9"},EPSG_4160:{towgs84:"8.88,184.86,106.69"},EPSG_4161:{towgs84:"-233.43,6.65,173.64"},EPSG_9251:{towgs84:"-9.5,122.9,138.2"},EPSG_9253:{towgs84:"-78.1,101.6,133.3"},EPSG_4297:{towgs84:"-198.383,-240.517,-107.909"},EPSG_4269:{towgs84:"0,0,0"},EPSG_4301:{towgs84:"-147,506,687"},EPSG_4618:{towgs84:"-59,-11,-52"},EPSG_4612:{towgs84:"0,0,0"},EPSG_4678:{towgs84:"44.585,-131.212,-39.544"},EPSG_4250:{towgs84:"-130,29,364"},EPSG_4144:{towgs84:"214,804,268"},EPSG_4147:{towgs84:"-17.51,-108.32,-62.39"},EPSG_4259:{towgs84:"-254.1,-5.36,-100.29"},EPSG_4164:{towgs84:"-76,-138,67"},EPSG_4211:{towgs84:"-378.873,676.002,-46.255"},EPSG_4182:{towgs84:"-422.651,-172.995,84.02"},EPSG_4224:{towgs84:"-143.87,243.37,-33.52"},EPSG_4225:{towgs84:"-205.57,168.77,-4.12"},EPSG_5527:{towgs84:"-67.35,3.88,-38.22"},EPSG_4752:{towgs84:"98,390,-22"},EPSG_4310:{towgs84:"-30,190,89"},EPSG_9248:{towgs84:"-192.26,65.72,132.08"},EPSG_4680:{towgs84:"124.5,-63.5,-281"},EPSG_4701:{towgs84:"-79.9,-158,-168.9"},EPSG_4706:{towgs84:"-146.21,112.63,4.05"},EPSG_4805:{towgs84:"682,-203,480"},EPSG_4201:{towgs84:"-165,-11,206"},EPSG_4210:{towgs84:"-157,-2,-299"},EPSG_4183:{towgs84:"-104,167,-38"},EPSG_4139:{towgs84:"11,72,-101"},EPSG_4668:{towgs84:"-86,-98,-119"},EPSG_4717:{towgs84:"-2,151,181"},EPSG_4732:{towgs84:"102,52,-38"},EPSG_4280:{towgs84:"-377,681,-50"},EPSG_4209:{towgs84:"-138,-105,-289"},EPSG_4261:{towgs84:"31,146,47"},EPSG_4658:{towgs84:"-73,46,-86"},EPSG_4721:{towgs84:"265.025,384.929,-194.046"},EPSG_4222:{towgs84:"-136,-108,-292"},EPSG_4601:{towgs84:"-255,-15,71"},EPSG_4602:{towgs84:"725,685,536"},EPSG_4603:{towgs84:"72,213.7,93"},EPSG_4605:{towgs84:"9,183,236"},EPSG_4621:{towgs84:"137,248,-430"},EPSG_4657:{towgs84:"-28,199,5"},EPSG_4316:{towgs84:"103.25,-100.4,-307.19"},EPSG_4642:{towgs84:"-13,-348,292"},EPSG_4698:{towgs84:"145,-187,103"},EPSG_4192:{towgs84:"-206.1,-174.7,-87.7"},EPSG_4311:{towgs84:"-265,120,-358"},EPSG_4135:{towgs84:"58,-283,-182"},ESRI_104138:{towgs84:"198,-226,-347"},EPSG_4245:{towgs84:"-11,851,5"},EPSG_4142:{towgs84:"-125,53,467"},EPSG_4213:{towgs84:"-106,-87,188"},EPSG_4253:{towgs84:"-133,-77,-51"},EPSG_4129:{towgs84:"-132,-110,-335"},EPSG_4713:{towgs84:"-77,-128,142"},EPSG_4239:{towgs84:"217,823,299"},EPSG_4146:{towgs84:"295,736,257"},EPSG_4155:{towgs84:"-83,37,124"},EPSG_4165:{towgs84:"-173,253,27"},EPSG_4672:{towgs84:"175,-38,113"},EPSG_4236:{towgs84:"-637,-549,-203"},EPSG_4251:{towgs84:"-90,40,88"},EPSG_4271:{towgs84:"-2,374,172"},EPSG_4175:{towgs84:"-88,4,101"},EPSG_4716:{towgs84:"298,-304,-375"},EPSG_4315:{towgs84:"-23,259,-9"},EPSG_4744:{towgs84:"-242.2,-144.9,370.3"},EPSG_4244:{towgs84:"-97,787,86"},EPSG_4293:{towgs84:"616,97,-251"},EPSG_4714:{towgs84:"-127,-769,472"},EPSG_4736:{towgs84:"260,12,-147"},EPSG_6883:{towgs84:"-235,-110,393"},EPSG_6894:{towgs84:"-63,176,185"},EPSG_4205:{towgs84:"-43,-163,45"},EPSG_4256:{towgs84:"41,-220,-134"},EPSG_4262:{towgs84:"639,405,60"},EPSG_4604:{towgs84:"174,359,365"},EPSG_4169:{towgs84:"-115,118,426"},EPSG_4620:{towgs84:"-106,-129,165"},EPSG_4184:{towgs84:"-203,141,53"},EPSG_4616:{towgs84:"-289,-124,60"},EPSG_9403:{towgs84:"-307,-92,127"},EPSG_4684:{towgs84:"-133,-321,50"},EPSG_4708:{towgs84:"-491,-22,435"},EPSG_4707:{towgs84:"114,-116,-333"},EPSG_4709:{towgs84:"145,75,-272"},EPSG_4712:{towgs84:"-205,107,53"},EPSG_4711:{towgs84:"124,-234,-25"},EPSG_4718:{towgs84:"230,-199,-752"},EPSG_4719:{towgs84:"211,147,111"},EPSG_4724:{towgs84:"208,-435,-229"},EPSG_4725:{towgs84:"189,-79,-202"},EPSG_4735:{towgs84:"647,1777,-1124"},EPSG_4722:{towgs84:"-794,119,-298"},EPSG_4728:{towgs84:"-307,-92,127"},EPSG_4734:{towgs84:"-632,438,-609"},EPSG_4727:{towgs84:"912,-58,1227"},EPSG_4729:{towgs84:"185,165,42"},EPSG_4730:{towgs84:"170,42,84"},EPSG_4733:{towgs84:"276,-57,149"},ESRI_37218:{towgs84:"230,-199,-752"},ESRI_37240:{towgs84:"-7,215,225"},ESRI_37221:{towgs84:"252,-209,-751"},ESRI_4305:{towgs84:"-123,-206,219"},ESRI_104139:{towgs84:"-73,-247,227"},EPSG_4748:{towgs84:"51,391,-36"},EPSG_4219:{towgs84:"-384,664,-48"},EPSG_4255:{towgs84:"-333,-222,114"},EPSG_4257:{towgs84:"-587.8,519.75,145.76"},EPSG_4646:{towgs84:"-963,510,-359"},EPSG_6881:{towgs84:"-24,-203,268"},EPSG_6882:{towgs84:"-183,-15,273"},EPSG_4715:{towgs84:"-104,-129,239"},IGNF_RGF93GDD:{towgs84:"0,0,0"},IGNF_RGM04GDD:{towgs84:"0,0,0"},IGNF_RGSPM06GDD:{towgs84:"0,0,0"},IGNF_RGTAAF07GDD:{towgs84:"0,0,0"},IGNF_RGFG95GDD:{towgs84:"0,0,0"},IGNF_RGNCG:{towgs84:"0,0,0"},IGNF_RGPFGDD:{towgs84:"0,0,0"},IGNF_ETRS89G:{towgs84:"0,0,0"},IGNF_RGR92GDD:{towgs84:"0,0,0"},EPSG_4173:{towgs84:"0,0,0"},EPSG_4180:{towgs84:"0,0,0"},EPSG_4619:{towgs84:"0,0,0"},EPSG_4667:{towgs84:"0,0,0"},EPSG_4075:{towgs84:"0,0,0"},EPSG_6706:{towgs84:"0,0,0"},EPSG_7798:{towgs84:"0,0,0"},EPSG_4661:{towgs84:"0,0,0"},EPSG_4669:{towgs84:"0,0,0"},EPSG_8685:{towgs84:"0,0,0"},EPSG_4151:{towgs84:"0,0,0"},EPSG_9702:{towgs84:"0,0,0"},EPSG_4758:{towgs84:"0,0,0"},EPSG_4761:{towgs84:"0,0,0"},EPSG_4765:{towgs84:"0,0,0"},EPSG_8997:{towgs84:"0,0,0"},EPSG_4023:{towgs84:"0,0,0"},EPSG_4670:{towgs84:"0,0,0"},EPSG_4694:{towgs84:"0,0,0"},EPSG_4148:{towgs84:"0,0,0"},EPSG_4163:{towgs84:"0,0,0"},EPSG_4167:{towgs84:"0,0,0"},EPSG_4189:{towgs84:"0,0,0"},EPSG_4190:{towgs84:"0,0,0"},EPSG_4176:{towgs84:"0,0,0"},EPSG_4659:{towgs84:"0,0,0"},EPSG_3824:{towgs84:"0,0,0"},EPSG_3889:{towgs84:"0,0,0"},EPSG_4046:{towgs84:"0,0,0"},EPSG_4081:{towgs84:"0,0,0"},EPSG_4558:{towgs84:"0,0,0"},EPSG_4483:{towgs84:"0,0,0"},EPSG_5013:{towgs84:"0,0,0"},EPSG_5264:{towgs84:"0,0,0"},EPSG_5324:{towgs84:"0,0,0"},EPSG_5354:{towgs84:"0,0,0"},EPSG_5371:{towgs84:"0,0,0"},EPSG_5373:{towgs84:"0,0,0"},EPSG_5381:{towgs84:"0,0,0"},EPSG_5393:{towgs84:"0,0,0"},EPSG_5489:{towgs84:"0,0,0"},EPSG_5593:{towgs84:"0,0,0"},EPSG_6135:{towgs84:"0,0,0"},EPSG_6365:{towgs84:"0,0,0"},EPSG_5246:{towgs84:"0,0,0"},EPSG_7886:{towgs84:"0,0,0"},EPSG_8431:{towgs84:"0,0,0"},EPSG_8427:{towgs84:"0,0,0"},EPSG_8699:{towgs84:"0,0,0"},EPSG_8818:{towgs84:"0,0,0"},EPSG_4757:{towgs84:"0,0,0"},EPSG_9140:{towgs84:"0,0,0"},EPSG_8086:{towgs84:"0,0,0"},EPSG_4686:{towgs84:"0,0,0"},EPSG_4737:{towgs84:"0,0,0"},EPSG_4702:{towgs84:"0,0,0"},EPSG_4747:{towgs84:"0,0,0"},EPSG_4749:{towgs84:"0,0,0"},EPSG_4674:{towgs84:"0,0,0"},EPSG_4755:{towgs84:"0,0,0"},EPSG_4759:{towgs84:"0,0,0"},EPSG_4762:{towgs84:"0,0,0"},EPSG_4763:{towgs84:"0,0,0"},EPSG_4764:{towgs84:"0,0,0"},EPSG_4166:{towgs84:"0,0,0"},EPSG_4170:{towgs84:"0,0,0"},EPSG_5546:{towgs84:"0,0,0"},EPSG_7844:{towgs84:"0,0,0"},EPSG_4818:{towgs84:"589,76,480"}};for(var O_ in yh){var Fc=yh[O_];Fc.datumName&&(yh[Fc.datumName]=Fc)}function D_(e,i,o,c,f,g,y){var v={};return e===void 0||e==="none"?v.datum_type=qc:v.datum_type=qm,i&&(v.datum_params=i.map(parseFloat),(v.datum_params[0]!==0||v.datum_params[1]!==0||v.datum_params[2]!==0)&&(v.datum_type=ol),v.datum_params.length>3&&(v.datum_params[3]!==0||v.datum_params[4]!==0||v.datum_params[5]!==0||v.datum_params[6]!==0)&&(v.datum_type=al,v.datum_params[3]*=vu,v.datum_params[4]*=vu,v.datum_params[5]*=vu,v.datum_params[6]=v.datum_params[6]/1e6+1)),y&&(v.datum_type=Nl,v.grids=y),v.a=o,v.b=c,v.es=f,v.ep2=g,v}var cf={};function N_(e,i,o){return i instanceof ArrayBuffer?F_(e,i,o):{ready:G_(e,i)}}function F_(e,i,o){var c=!0;o!==void 0&&o.includeErrorFields===!1&&(c=!1);var f=new DataView(i),g=U_(f),y=H_(f,g),v=$_(f,y,g,c),E={header:y,subgrids:v};return cf[e]=E,E}async function G_(e,i){for(var o=[],c=await i.getImageCount(),f=c-1;f>=0;f--){var g=await i.getImage(f),y=await g.readRasters(),v=y,E=[g.getWidth(),g.getHeight()],A=g.getBoundingBox().map(pp),G=[g.fileDirectory.ModelPixelScale[0],g.fileDirectory.ModelPixelScale[1]].map(pp),P=A[0]+(E[0]-1)*G[0],B=A[3]-(E[1]-1)*G[1],V=v[0],q=v[1],Z=[];for(let lt=E[1]-1;lt>=0;lt--)for(let Pt=E[0]-1;Pt>=0;Pt--){var Y=lt*E[0]+Pt;Z.push([-ka(q[Y]),ka(V[Y])])}o.push({del:G,lim:E,ll:[-P,B],cvs:Z})}var ht={header:{nSubgrids:c},subgrids:o};return cf[e]=ht,ht}function z_(e){if(e===void 0)return null;var i=e.split(",");return i.map(j_)}function j_(e){if(e.length===0)return null;var i=e[0]==="@";return i&&(e=e.slice(1)),e==="null"?{name:"null",mandatory:!i,grid:null,isNull:!0}:{name:e,mandatory:!i,grid:cf[e]||null,isNull:!1}}function pp(e){return e*Math.PI/180}function ka(e){return e/3600*Math.PI/180}function U_(e){var i=e.getInt32(8,!1);return i===11?!1:(i=e.getInt32(8,!0),i!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function H_(e,i){return{nFields:e.getInt32(8,i),nSubgridFields:e.getInt32(24,i),nSubgrids:e.getInt32(40,i),shiftType:Jc(e,56,64).trim(),fromSemiMajorAxis:e.getFloat64(120,i),fromSemiMinorAxis:e.getFloat64(136,i),toSemiMajorAxis:e.getFloat64(152,i),toSemiMinorAxis:e.getFloat64(168,i)}}function Jc(e,i,o){return String.fromCharCode.apply(null,new Uint8Array(e.buffer.slice(i,o)))}function $_(e,i,o,c){for(var f=176,g=[],y=0;y<i.nSubgrids;y++){var v=W_(e,f,o),E=Z_(e,f,v,o,c),A=Math.round(1+(v.upperLongitude-v.lowerLongitude)/v.longitudeInterval),G=Math.round(1+(v.upperLatitude-v.lowerLatitude)/v.latitudeInterval);g.push({ll:[ka(v.lowerLongitude),ka(v.lowerLatitude)],del:[ka(v.longitudeInterval),ka(v.latitudeInterval)],lim:[A,G],count:v.gridNodeCount,cvs:V_(E)});var P=16;c===!1&&(P=8),f+=176+v.gridNodeCount*P}return g}function V_(e){return e.map(function(i){return[ka(i.longitudeShift),ka(i.latitudeShift)]})}function W_(e,i,o){return{name:Jc(e,i+8,i+16).trim(),parent:Jc(e,i+24,i+24+8).trim(),lowerLatitude:e.getFloat64(i+72,o),upperLatitude:e.getFloat64(i+88,o),lowerLongitude:e.getFloat64(i+104,o),upperLongitude:e.getFloat64(i+120,o),latitudeInterval:e.getFloat64(i+136,o),longitudeInterval:e.getFloat64(i+152,o),gridNodeCount:e.getInt32(i+168,o)}}function Z_(e,i,o,c,f){var g=i+176,y=16;f===!1&&(y=8);for(var v=[],E=0;E<o.gridNodeCount;E++){var A={latitudeShift:e.getFloat32(g+E*y,c),longitudeShift:e.getFloat32(g+E*y+4,c)};f!==!1&&(A.latitudeAccuracy=e.getFloat32(g+E*y+8,c),A.longitudeAccuracy=e.getFloat32(g+E*y+12,c)),v.push(A)}return v}function hs(e,i){if(!(this instanceof hs))return new hs(e);this.forward=null,this.inverse=null,this.init=null,this.name,this.names=null,this.title,i=i||function(A){if(A)throw A};var o=x_(e);if(typeof o!="object"){i("Could not parse to valid json: "+e);return}var c=hs.projections.get(o.projName);if(!c){i("Could not get projection name from: "+e);return}if(o.datumCode&&o.datumCode!=="none"){var f=Ta(yh,o.datumCode);f&&(o.datum_params=o.datum_params||(f.towgs84?f.towgs84.split(","):null),o.ellps=f.ellipse,o.datumName=f.datumName?f.datumName:o.datumCode)}o.k0=o.k0||1,o.axis=o.axis||"enu",o.ellps=o.ellps||"wgs84",o.lat1=o.lat1||o.lat0;var g=I_(o.a,o.b,o.rf,o.ellps,o.sphere),y=R_(g.a,g.b,g.rf,o.R_A),v=z_(o.nadgrids),E=o.datum||D_(o.datumCode,o.datum_params,g.a,g.b,y.es,y.ep2,v);fp(this,o),fp(this,c),this.a=g.a,this.b=g.b,this.rf=g.rf,this.sphere=g.sphere,this.es=y.es,this.e=y.e,this.ep2=y.ep2,this.datum=E,"init"in this&&typeof this.init=="function"&&this.init(),i(null,this)}hs.projections=B_;hs.projections.start();function q_(e,i){return e.datum_type!==i.datum_type||e.a!==i.a||Math.abs(e.es-i.es)>5e-11?!1:e.datum_type===ol?e.datum_params[0]===i.datum_params[0]&&e.datum_params[1]===i.datum_params[1]&&e.datum_params[2]===i.datum_params[2]:e.datum_type===al?e.datum_params[0]===i.datum_params[0]&&e.datum_params[1]===i.datum_params[1]&&e.datum_params[2]===i.datum_params[2]&&e.datum_params[3]===i.datum_params[3]&&e.datum_params[4]===i.datum_params[4]&&e.datum_params[5]===i.datum_params[5]&&e.datum_params[6]===i.datum_params[6]:!0}function _0(e,i,o){var c=e.x,f=e.y,g=e.z?e.z:0,y,v,E,A;if(f<-Kt&&f>-1.001*Kt)f=-Kt;else if(f>Kt&&f<1.001*Kt)f=Kt;else{if(f<-Kt)return{x:-1/0,y:-1/0,z:e.z};if(f>Kt)return{x:1/0,y:1/0,z:e.z}}return c>Math.PI&&(c-=2*Math.PI),v=Math.sin(f),A=Math.cos(f),E=v*v,y=o/Math.sqrt(1-i*E),{x:(y+g)*A*Math.cos(c),y:(y+g)*A*Math.sin(c),z:(y*(1-i)+g)*v}}function y0(e,i,o,c){var f=1e-12,g=f*f,y=30,v,E,A,G,P,B,V,q,Z,Y,ht,lt,Pt,Ut=e.x,Ot=e.y,Gt=e.z?e.z:0,$t,Vt,Qt;if(v=Math.sqrt(Ut*Ut+Ot*Ot),E=Math.sqrt(Ut*Ut+Ot*Ot+Gt*Gt),v/o<f){if($t=0,E/o<f)return Vt=Kt,Qt=-c,{x:e.x,y:e.y,z:e.z}}else $t=Math.atan2(Ot,Ut);A=Gt/E,G=v/E,P=1/Math.sqrt(1-i*(2-i)*G*G),q=G*(1-i)*P,Z=A*P,Pt=0;do Pt++,V=o/Math.sqrt(1-i*Z*Z),Qt=v*q+Gt*Z-V*(1-i*Z*Z),B=i*V/(V+Qt),P=1/Math.sqrt(1-B*(2-B)*G*G),Y=G*(1-B)*P,ht=A*P,lt=ht*q-Y*Z,q=Y,Z=ht;while(lt*lt>g&&Pt<y);return Vt=Math.atan(ht/Math.abs(Y)),{x:$t,y:Vt,z:Qt}}function K_(e,i,o){if(i===ol)return{x:e.x+o[0],y:e.y+o[1],z:e.z+o[2]};if(i===al){var c=o[0],f=o[1],g=o[2],y=o[3],v=o[4],E=o[5],A=o[6];return{x:A*(e.x-E*e.y+v*e.z)+c,y:A*(E*e.x+e.y-y*e.z)+f,z:A*(-v*e.x+y*e.y+e.z)+g}}}function J_(e,i,o){if(i===ol)return{x:e.x-o[0],y:e.y-o[1],z:e.z-o[2]};if(i===al){var c=o[0],f=o[1],g=o[2],y=o[3],v=o[4],E=o[5],A=o[6],G=(e.x-c)/A,P=(e.y-f)/A,B=(e.z-g)/A;return{x:G+E*P-v*B,y:-E*G+P+y*B,z:v*G-y*P+B}}}function ph(e){return e===ol||e===al}function X_(e,i,o){if(q_(e,i)||e.datum_type===qc||i.datum_type===qc)return o;var c=e.a,f=e.es;if(e.datum_type===Nl){var g=gp(e,!1,o);if(g!==0)return;c=op,f=ap}var y=i.a,v=i.b,E=i.es;if(i.datum_type===Nl&&(y=op,v=Km,E=ap),f===E&&c===y&&!ph(e.datum_type)&&!ph(i.datum_type))return o;if(o=_0(o,f,c),ph(e.datum_type)&&(o=K_(o,e.datum_type,e.datum_params)),ph(i.datum_type)&&(o=J_(o,i.datum_type,i.datum_params)),o=y0(o,E,y,v),i.datum_type===Nl){var A=gp(i,!0,o);if(A!==0)return}return o}function gp(e,i,o){if(e.grids===null||e.grids.length===0)return console.log("Grid shift grids not found"),-1;var c={x:-o.x,y:o.y},f={x:Number.NaN,y:Number.NaN},g=[];t:for(var y=0;y<e.grids.length;y++){var v=e.grids[y];if(g.push(v.name),v.isNull){f=c;break}if(v.grid===null){if(v.mandatory)return console.log("Unable to find mandatory grid '"+v.name+"'"),-1;continue}for(var E=v.grid.subgrids,A=0,G=E.length;A<G;A++){var P=E[A],B=(Math.abs(P.del[1])+Math.abs(P.del[0]))/1e4,V=P.ll[0]-B,q=P.ll[1]-B,Z=P.ll[0]+(P.lim[0]-1)*P.del[0]+B,Y=P.ll[1]+(P.lim[1]-1)*P.del[1]+B;if(!(q>c.y||V>c.x||Y<c.y||Z<c.x)&&(f=Y_(c,i,P),!isNaN(f.x)))break t}}return isNaN(f.x)?(console.log("Failed to find a grid shift table for location '"+-c.x*Cr+" "+c.y*Cr+" tried: '"+g+"'"),-1):(o.x=-f.x,o.y=f.y,0)}function Y_(e,i,o){var c={x:Number.NaN,y:Number.NaN};if(isNaN(e.x))return c;var f={x:e.x,y:e.y};f.x-=o.ll[0],f.y-=o.ll[1],f.x=le(f.x-Math.PI)+Math.PI;var g=mp(f,o);if(i){if(isNaN(g.x))return c;g.x=f.x-g.x,g.y=f.y-g.y;var y=9,v=1e-12,E,A;do{if(A=mp(g,o),isNaN(A.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}E={x:f.x-(A.x+g.x),y:f.y-(A.y+g.y)},g.x+=E.x,g.y+=E.y}while(y--&&Math.abs(E.x)>v&&Math.abs(E.y)>v);if(y<0)return console.log("Inverse grid shift iterator failed to converge."),c;c.x=le(g.x+o.ll[0]),c.y=g.y+o.ll[1]}else isNaN(g.x)||(c.x=e.x+g.x,c.y=e.y+g.y);return c}function mp(e,i){var o={x:e.x/i.del[0],y:e.y/i.del[1]},c={x:Math.floor(o.x),y:Math.floor(o.y)},f={x:o.x-1*c.x,y:o.y-1*c.y},g={x:Number.NaN,y:Number.NaN},y;if(c.x<0||c.x>=i.lim[0]||c.y<0||c.y>=i.lim[1])return g;y=c.y*i.lim[0]+c.x;var v={x:i.cvs[y][0],y:i.cvs[y][1]};y++;var E={x:i.cvs[y][0],y:i.cvs[y][1]};y+=i.lim[0];var A={x:i.cvs[y][0],y:i.cvs[y][1]};y--;var G={x:i.cvs[y][0],y:i.cvs[y][1]},P=f.x*f.y,B=f.x*(1-f.y),V=(1-f.x)*(1-f.y),q=(1-f.x)*f.y;return g.x=V*v.x+B*E.x+q*G.x+P*A.x,g.y=V*v.y+B*E.y+q*G.y+P*A.y,g}function _p(e,i,o){var c=o.x,f=o.y,g=o.z||0,y,v,E,A={};for(E=0;E<3;E++)if(!(i&&E===2&&o.z===void 0))switch(E===0?(y=c,"ew".indexOf(e.axis[E])!==-1?v="x":v="y"):E===1?(y=f,"ns".indexOf(e.axis[E])!==-1?v="y":v="x"):(y=g,v="z"),e.axis[E]){case"e":A[v]=y;break;case"w":A[v]=-y;break;case"n":A[v]=y;break;case"s":A[v]=-y;break;case"u":o[v]!==void 0&&(A.z=y);break;case"d":o[v]!==void 0&&(A.z=-y);break;default:return null}return A}function v0(e){var i={x:e[0],y:e[1]};return e.length>2&&(i.z=e[2]),e.length>3&&(i.m=e[3]),i}function Q_(e){yp(e.x),yp(e.y)}function yp(e){if(typeof Number.isFinite=="function"){if(Number.isFinite(e))return;throw new TypeError("coordinates must be finite numbers")}if(typeof e!="number"||e!==e||!isFinite(e))throw new TypeError("coordinates must be finite numbers")}function ty(e,i){return(e.datum.datum_type===ol||e.datum.datum_type===al||e.datum.datum_type===Nl)&&i.datumCode!=="WGS84"||(i.datum.datum_type===ol||i.datum.datum_type===al||i.datum.datum_type===Nl)&&e.datumCode!=="WGS84"}function kh(e,i,o,c){var f;Array.isArray(o)?o=v0(o):o={x:o.x,y:o.y,z:o.z,m:o.m};var g=o.z!==void 0;if(Q_(o),e.datum&&i.datum&&ty(e,i)&&(f=new hs("WGS84"),o=kh(e,f,o,c),e=f),c&&e.axis!=="enu"&&(o=_p(e,!1,o)),e.projName==="longlat")o={x:o.x*Rn,y:o.y*Rn,z:o.z||0};else if(e.to_meter&&(o={x:o.x*e.to_meter,y:o.y*e.to_meter,z:o.z||0}),o=e.inverse(o),!o)return;if(e.from_greenwich&&(o.x+=e.from_greenwich),o=X_(e.datum,i.datum,o),!!o)return o=o,i.from_greenwich&&(o={x:o.x-i.from_greenwich,y:o.y,z:o.z||0}),i.projName==="longlat"?o={x:o.x*Cr,y:o.y*Cr,z:o.z||0}:(o=i.forward(o),i.to_meter&&(o={x:o.x/i.to_meter,y:o.y/i.to_meter,z:o.z||0})),c&&i.axis!=="enu"?_p(i,!0,o):(o&&!g&&delete o.z,o)}var vp=hs("WGS84");function Gc(e,i,o,c){var f,g,y;return Array.isArray(o)?(f=kh(e,i,o,c)||{x:NaN,y:NaN},o.length>2?typeof e.name<"u"&&e.name==="geocent"||typeof i.name<"u"&&i.name==="geocent"?typeof f.z=="number"?[f.x,f.y,f.z].concat(o.slice(3)):[f.x,f.y,o[2]].concat(o.slice(3)):[f.x,f.y].concat(o.slice(2)):[f.x,f.y]):(g=kh(e,i,o,c),y=Object.keys(o),y.length===2||y.forEach(function(v){if(typeof e.name<"u"&&e.name==="geocent"||typeof i.name<"u"&&i.name==="geocent"){if(v==="x"||v==="y"||v==="z")return}else if(v==="x"||v==="y")return;g[v]=o[v]}),g)}function gh(e){return e instanceof hs?e:typeof e=="object"&&"oProj"in e?e.oProj:hs(e)}function ey(e,i,o){var c,f,g=!1,y;return typeof i>"u"?(f=gh(e),c=vp,g=!0):(typeof i.x<"u"||Array.isArray(i))&&(o=i,f=gh(e),c=vp,g=!0),c||(c=gh(e)),f||(f=gh(i)),o?Gc(c,f,o):(y={forward:function(v,E){return Gc(c,f,v,E)},inverse:function(v,E){return Gc(f,c,v,E)}},g&&(y.oProj=f),y)}var xp=6,x0="AJSAJS",w0="AFAFAF",Ol=65,Er=73,as=79,gu=86,mu=90;const ny={forward:M0,inverse:iy,toPoint:E0};function M0(e,i){return i=i||5,oy(ry({lat:e[1],lon:e[0]}),i)}function iy(e){var i=ff(C0(e.toUpperCase()));return i.lat&&i.lon?[i.lon,i.lat,i.lon,i.lat]:[i.left,i.bottom,i.right,i.top]}function E0(e){var i=ff(C0(e.toUpperCase()));return i.lat&&i.lon?[i.lon,i.lat]:[(i.left+i.right)/2,(i.top+i.bottom)/2]}function zc(e){return e*(Math.PI/180)}function wp(e){return 180*(e/Math.PI)}function ry(e){var i=e.lat,o=e.lon,c=6378137,f=.00669438,g=.9996,y,v,E,A,G,P,B,V=zc(i),q=zc(o),Z,Y;Y=Math.floor((o+180)/6)+1,o===180&&(Y=60),i>=56&&i<64&&o>=3&&o<12&&(Y=32),i>=72&&i<84&&(o>=0&&o<9?Y=31:o>=9&&o<21?Y=33:o>=21&&o<33?Y=35:o>=33&&o<42&&(Y=37)),y=(Y-1)*6-180+3,Z=zc(y),v=f/(1-f),E=c/Math.sqrt(1-f*Math.sin(V)*Math.sin(V)),A=Math.tan(V)*Math.tan(V),G=v*Math.cos(V)*Math.cos(V),P=Math.cos(V)*(q-Z),B=c*((1-f/4-3*f*f/64-5*f*f*f/256)*V-(3*f/8+3*f*f/32+45*f*f*f/1024)*Math.sin(2*V)+(15*f*f/256+45*f*f*f/1024)*Math.sin(4*V)-35*f*f*f/3072*Math.sin(6*V));var ht=g*E*(P+(1-A+G)*P*P*P/6+(5-18*A+A*A+72*G-58*v)*P*P*P*P*P/120)+5e5,lt=g*(B+E*Math.tan(V)*(P*P/2+(5-A+9*G+4*G*G)*P*P*P*P/24+(61-58*A+A*A+600*G-330*v)*P*P*P*P*P*P/720));return i<0&&(lt+=1e7),{northing:Math.round(lt),easting:Math.round(ht),zoneNumber:Y,zoneLetter:sy(i)}}function ff(e){var i=e.northing,o=e.easting,c=e.zoneLetter,f=e.zoneNumber;if(f<0||f>60)return null;var g=.9996,y=6378137,v=.00669438,E,A=(1-Math.sqrt(1-v))/(1+Math.sqrt(1-v)),G,P,B,V,q,Z,Y,ht,lt,Pt=o-5e5,Ut=i;c<"N"&&(Ut-=1e7),Y=(f-1)*6-180+3,E=v/(1-v),Z=Ut/g,ht=Z/(y*(1-v/4-3*v*v/64-5*v*v*v/256)),lt=ht+(3*A/2-27*A*A*A/32)*Math.sin(2*ht)+(21*A*A/16-55*A*A*A*A/32)*Math.sin(4*ht)+151*A*A*A/96*Math.sin(6*ht),G=y/Math.sqrt(1-v*Math.sin(lt)*Math.sin(lt)),P=Math.tan(lt)*Math.tan(lt),B=E*Math.cos(lt)*Math.cos(lt),V=y*(1-v)/Math.pow(1-v*Math.sin(lt)*Math.sin(lt),1.5),q=Pt/(G*g);var Ot=lt-G*Math.tan(lt)/V*(q*q/2-(5+3*P+10*B-4*B*B-9*E)*q*q*q*q/24+(61+90*P+298*B+45*P*P-252*E-3*B*B)*q*q*q*q*q*q/720);Ot=wp(Ot);var Gt=(q-(1+2*P+B)*q*q*q/6+(5-2*B+28*P-3*B*B+8*E+24*P*P)*q*q*q*q*q/120)/Math.cos(lt);Gt=Y+wp(Gt);var $t;if(e.accuracy){var Vt=ff({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});$t={top:Vt.lat,right:Vt.lon,bottom:Ot,left:Gt}}else $t={lat:Ot,lon:Gt};return $t}function sy(e){var i="Z";return 84>=e&&e>=72?i="X":72>e&&e>=64?i="W":64>e&&e>=56?i="V":56>e&&e>=48?i="U":48>e&&e>=40?i="T":40>e&&e>=32?i="S":32>e&&e>=24?i="R":24>e&&e>=16?i="Q":16>e&&e>=8?i="P":8>e&&e>=0?i="N":0>e&&e>=-8?i="M":-8>e&&e>=-16?i="L":-16>e&&e>=-24?i="K":-24>e&&e>=-32?i="J":-32>e&&e>=-40?i="H":-40>e&&e>=-48?i="G":-48>e&&e>=-56?i="F":-56>e&&e>=-64?i="E":-64>e&&e>=-72?i="D":-72>e&&e>=-80&&(i="C"),i}function oy(e,i){var o="00000"+e.easting,c="00000"+e.northing;return e.zoneNumber+e.zoneLetter+ay(e.easting,e.northing,e.zoneNumber)+o.substr(o.length-5,i)+c.substr(c.length-5,i)}function ay(e,i,o){var c=L0(o),f=Math.floor(e/1e5),g=Math.floor(i/1e5)%20;return ly(f,g,c)}function L0(e){var i=e%xp;return i===0&&(i=xp),i}function ly(e,i,o){var c=o-1,f=x0.charCodeAt(c),g=w0.charCodeAt(c),y=f+e-1,v=g+i,E=!1;y>mu&&(y=y-mu+Ol-1,E=!0),(y===Er||f<Er&&y>Er||(y>Er||f<Er)&&E)&&y++,(y===as||f<as&&y>as||(y>as||f<as)&&E)&&(y++,y===Er&&y++),y>mu&&(y=y-mu+Ol-1),v>gu?(v=v-gu+Ol-1,E=!0):E=!1,(v===Er||g<Er&&v>Er||(v>Er||g<Er)&&E)&&v++,(v===as||g<as&&v>as||(v>as||g<as)&&E)&&(v++,v===Er&&v++),v>gu&&(v=v-gu+Ol-1);var A=String.fromCharCode(y)+String.fromCharCode(v);return A}function C0(e){if(e&&e.length===0)throw"MGRSPoint coverting from nothing";for(var i=e.length,o=null,c="",f,g=0;!/[A-Z]/.test(f=e.charAt(g));){if(g>=2)throw"MGRSPoint bad conversion from: "+e;c+=f,g++}var y=parseInt(c,10);if(g===0||g+3>i)throw"MGRSPoint bad conversion from: "+e;var v=e.charAt(g++);if(v<="A"||v==="B"||v==="Y"||v>="Z"||v==="I"||v==="O")throw"MGRSPoint zone letter "+v+" not handled: "+e;o=e.substring(g,g+=2);for(var E=L0(y),A=uy(o.charAt(0),E),G=hy(o.charAt(1),E);G<cy(v);)G+=2e6;var P=i-g;if(P%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+e;var B=P/2,V=0,q=0,Z,Y,ht,lt,Pt;return B>0&&(Z=1e5/Math.pow(10,B),Y=e.substring(g,g+B),V=parseFloat(Y)*Z,ht=e.substring(g+B),q=parseFloat(ht)*Z),lt=V+A,Pt=q+G,{easting:lt,northing:Pt,zoneLetter:v,zoneNumber:y,accuracy:Z}}function uy(e,i){for(var o=x0.charCodeAt(i-1),c=1e5,f=!1;o!==e.charCodeAt(0);){if(o++,o===Er&&o++,o===as&&o++,o>mu){if(f)throw"Bad character: "+e;o=Ol,f=!0}c+=1e5}return c}function hy(e,i){if(e>"V")throw"MGRSPoint given invalid Northing "+e;for(var o=w0.charCodeAt(i-1),c=0,f=!1;o!==e.charCodeAt(0);){if(o++,o===Er&&o++,o===as&&o++,o>gu){if(f)throw"Bad character: "+e;o=Ol,f=!0}c+=1e5}return c}function cy(e){var i;switch(e){case"C":i=11e5;break;case"D":i=2e6;break;case"E":i=28e5;break;case"F":i=37e5;break;case"G":i=46e5;break;case"H":i=55e5;break;case"J":i=64e5;break;case"K":i=73e5;break;case"L":i=82e5;break;case"M":i=91e5;break;case"N":i=0;break;case"P":i=8e5;break;case"Q":i=17e5;break;case"R":i=26e5;break;case"S":i=35e5;break;case"T":i=44e5;break;case"U":i=53e5;break;case"V":i=62e5;break;case"W":i=7e6;break;case"X":i=79e5;break;default:i=-1}if(i>=0)return i;throw"Invalid zone letter: "+e}function Gl(e,i,o){if(!(this instanceof Gl))return new Gl(e,i,o);if(Array.isArray(e))this.x=e[0],this.y=e[1],this.z=e[2]||0;else if(typeof e=="object")this.x=e.x,this.y=e.y,this.z=e.z||0;else if(typeof e=="string"&&typeof i>"u"){var c=e.split(",");this.x=parseFloat(c[0]),this.y=parseFloat(c[1]),this.z=parseFloat(c[2])||0}else this.x=e,this.y=i,this.z=o||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Gl.fromMGRS=function(e){return new Gl(E0(e))};Gl.prototype.toMGRS=function(e){return M0([this.x,this.y],e)};var fy=1,dy=.25,Mp=.046875,Ep=.01953125,Lp=.01068115234375,py=.75,gy=.46875,my=.013020833333333334,_y=.007120768229166667,yy=.3645833333333333,vy=.005696614583333333,xy=.3076171875;function df(e){var i=[];i[0]=fy-e*(dy+e*(Mp+e*(Ep+e*Lp))),i[1]=e*(py-e*(Mp+e*(Ep+e*Lp)));var o=e*e;return i[2]=o*(gy-e*(my+e*_y)),o*=e,i[3]=o*(yy-e*vy),i[4]=o*e*xy,i}function jl(e,i,o,c){return o*=i,i*=i,c[0]*e-o*(c[1]+i*(c[2]+i*(c[3]+i*c[4])))}var wy=20;function pf(e,i,o){for(var c=1/(1-i),f=e,g=wy;g;--g){var y=Math.sin(f),v=1-i*y*y;if(v=(jl(f,y,Math.cos(f),o)-e)*(v*Math.sqrt(v))*c,f-=v,Math.abs(v)<re)return f}return f}function My(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=df(this.es),this.ml0=jl(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function Ey(e){var i=e.x,o=e.y,c=le(i-this.long0,this.over),f,g,y,v=Math.sin(o),E=Math.cos(o);if(this.es){var G=E*c,P=Math.pow(G,2),B=this.ep2*Math.pow(E,2),V=Math.pow(B,2),q=Math.abs(E)>re?Math.tan(o):0,Z=Math.pow(q,2),Y=Math.pow(Z,2);f=1-this.es*Math.pow(v,2),G=G/Math.sqrt(f);var ht=jl(o,v,E,this.en);g=this.a*(this.k0*G*(1+P/6*(1-Z+B+P/20*(5-18*Z+Y+14*B-58*Z*B+P/42*(61+179*Y-Y*Z-479*Z)))))+this.x0,y=this.a*(this.k0*(ht-this.ml0+v*c*G/2*(1+P/12*(5-Z+9*B+4*V+P/30*(61+Y-58*Z+270*B-330*Z*B+P/56*(1385+543*Y-Y*Z-3111*Z))))))+this.y0}else{var A=E*Math.sin(c);if(Math.abs(Math.abs(A)-1)<re)return 93;if(g=.5*this.a*this.k0*Math.log((1+A)/(1-A))+this.x0,y=E*Math.cos(c)/Math.sqrt(1-Math.pow(A,2)),A=Math.abs(y),A>=1){if(A-1>re)return 93;y=0}else y=Math.acos(y);o<0&&(y=-y),y=this.a*this.k0*(y-this.lat0)+this.y0}return e.x=g,e.y=y,e}function Ly(e){var i,o,c,f,g=(e.x-this.x0)*(1/this.a),y=(e.y-this.y0)*(1/this.a);if(this.es)if(i=this.ml0+y/this.k0,o=pf(i,this.es,this.en),Math.abs(o)<Kt){var P=Math.sin(o),B=Math.cos(o),V=Math.abs(B)>re?Math.tan(o):0,q=this.ep2*Math.pow(B,2),Z=Math.pow(q,2),Y=Math.pow(V,2),ht=Math.pow(Y,2);i=1-this.es*Math.pow(P,2);var lt=g*Math.sqrt(i)/this.k0,Pt=Math.pow(lt,2);i=i*V,c=o-i*Pt/(1-this.es)*.5*(1-Pt/12*(5+3*Y-9*q*Y+q-4*Z-Pt/30*(61+90*Y-252*q*Y+45*ht+46*q-Pt/56*(1385+3633*Y+4095*ht+1574*ht*Y)))),f=le(this.long0+lt*(1-Pt/6*(1+2*Y+q-Pt/20*(5+28*Y+24*ht+8*q*Y+6*q-Pt/42*(61+662*Y+1320*ht+720*ht*Y))))/B,this.over)}else c=Kt*Tu(y),f=0;else{var v=Math.exp(g/this.k0),E=.5*(v-1/v),A=this.lat0+y/this.k0,G=Math.cos(A);i=Math.sqrt((1-Math.pow(G,2))/(1+Math.pow(E,2))),c=Math.asin(i),y<0&&(c=-c),E===0&&G===0?f=0:f=le(Math.atan2(E,G)+this.long0,this.over)}return e.x=f,e.y=c,e}var Cy=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const vh={init:My,forward:Ey,inverse:Ly,names:Cy};function b0(e){var i=Math.exp(e);return i=(i-1/i)/2,i}function Lr(e,i){e=Math.abs(e),i=Math.abs(i);var o=Math.max(e,i),c=Math.min(e,i)/(o||1);return o*Math.sqrt(1+Math.pow(c,2))}function by(e){var i=1+e,o=i-1;return o===0?e:e*Math.log(i)/o}function Sy(e){var i=Math.abs(e);return i=by(i*(1+i/(Lr(1,i)+1))),e<0?-i:i}function gf(e,i){for(var o=2*Math.cos(2*i),c=e.length-1,f=e[c],g=0,y;--c>=0;)y=-g+o*f+e[c],g=f,f=y;return i+y*Math.sin(2*i)}function ky(e,i){for(var o=2*Math.cos(i),c=e.length-1,f=e[c],g=0,y;--c>=0;)y=-g+o*f+e[c],g=f,f=y;return Math.sin(i)*y}function Py(e){var i=Math.exp(e);return i=(i+1/i)/2,i}function S0(e,i,o){for(var c=Math.sin(i),f=Math.cos(i),g=b0(o),y=Py(o),v=2*f*y,E=-2*c*g,A=e.length-1,G=e[A],P=0,B=0,V=0,q,Z;--A>=0;)q=B,Z=P,B=G,P=V,G=-q+v*B-E*P+e[A],V=-Z+E*B+v*P;return v=c*y,E=f*g,[v*G-E*V,v*V+E*G]}function Ay(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(vh.init.apply(this),this.forward=vh.forward,this.inverse=vh.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var e=this.es/(1+Math.sqrt(1-this.es)),i=e/(2-e),o=i;this.cgb[0]=i*(2+i*(-2/3+i*(-2+i*(116/45+i*(26/45+i*(-2854/675)))))),this.cbg[0]=i*(-2+i*(2/3+i*(4/3+i*(-82/45+i*(32/45+i*(4642/4725)))))),o=o*i,this.cgb[1]=o*(7/3+i*(-8/5+i*(-227/45+i*(2704/315+i*(2323/945))))),this.cbg[1]=o*(5/3+i*(-16/15+i*(-13/9+i*(904/315+i*(-1522/945))))),o=o*i,this.cgb[2]=o*(56/15+i*(-136/35+i*(-1262/105+i*(73814/2835)))),this.cbg[2]=o*(-26/15+i*(34/21+i*(8/5+i*(-12686/2835)))),o=o*i,this.cgb[3]=o*(4279/630+i*(-332/35+i*(-399572/14175))),this.cbg[3]=o*(1237/630+i*(-12/5+i*(-24832/14175))),o=o*i,this.cgb[4]=o*(4174/315+i*(-144838/6237)),this.cbg[4]=o*(-734/315+i*(109598/31185)),o=o*i,this.cgb[5]=o*(601676/22275),this.cbg[5]=o*(444337/155925),o=Math.pow(i,2),this.Qn=this.k0/(1+i)*(1+o*(1/4+o*(1/64+o/256))),this.utg[0]=i*(-.5+i*(2/3+i*(-37/96+i*(1/360+i*(81/512+i*(-96199/604800)))))),this.gtu[0]=i*(.5+i*(-2/3+i*(5/16+i*(41/180+i*(-127/288+i*(7891/37800)))))),this.utg[1]=o*(-1/48+i*(-1/15+i*(437/1440+i*(-46/105+i*(1118711/3870720))))),this.gtu[1]=o*(13/48+i*(-3/5+i*(557/1440+i*(281/630+i*(-1983433/1935360))))),o=o*i,this.utg[2]=o*(-17/480+i*(37/840+i*(209/4480+i*(-5569/90720)))),this.gtu[2]=o*(61/240+i*(-103/140+i*(15061/26880+i*(167603/181440)))),o=o*i,this.utg[3]=o*(-4397/161280+i*(11/504+i*(830251/7257600))),this.gtu[3]=o*(49561/161280+i*(-179/168+i*(6601661/7257600))),o=o*i,this.utg[4]=o*(-4583/161280+i*(108847/3991680)),this.gtu[4]=o*(34729/80640+i*(-3418889/1995840)),o=o*i,this.utg[5]=o*(-20648693/638668800),this.gtu[5]=o*(212378941/319334400);var c=gf(this.cbg,this.lat0);this.Zb=-this.Qn*(c+ky(this.gtu,2*c))}function By(e){var i=le(e.x-this.long0,this.over),o=e.y;o=gf(this.cbg,o);var c=Math.sin(o),f=Math.cos(o),g=Math.sin(i),y=Math.cos(i);o=Math.atan2(c,y*f),i=Math.atan2(g*f,Lr(c,f*y)),i=Sy(Math.tan(i));var v=S0(this.gtu,2*o,2*i);o=o+v[0],i=i+v[1];var E,A;return Math.abs(i)<=2.623395162778?(E=this.a*(this.Qn*i)+this.x0,A=this.a*(this.Qn*o+this.Zb)+this.y0):(E=1/0,A=1/0),e.x=E,e.y=A,e}function Ty(e){var i=(e.x-this.x0)*(1/this.a),o=(e.y-this.y0)*(1/this.a);o=(o-this.Zb)/this.Qn,i=i/this.Qn;var c,f;if(Math.abs(i)<=2.623395162778){var g=S0(this.utg,2*o,2*i);o=o+g[0],i=i+g[1],i=Math.atan(b0(i));var y=Math.sin(o),v=Math.cos(o),E=Math.sin(i),A=Math.cos(i);o=Math.atan2(y*A,Lr(E,A*v)),i=Math.atan2(E,A*v),c=le(i+this.long0,this.over),f=gf(this.cgb,o)}else c=1/0,f=1/0;return e.x=c,e.y=f,e}var Ry=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const xh={init:Ay,forward:By,inverse:Ty,names:Ry};function Iy(e,i){if(e===void 0){if(e=Math.floor((le(i)+Math.PI)*30/Math.PI)+1,e<0)return 0;if(e>60)return 60}return e}var Oy="etmerc";function Dy(){var e=Iy(this.zone,this.long0);if(e===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(e)-183)*Rn,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,xh.init.apply(this),this.forward=xh.forward,this.inverse=xh.inverse}var Ny=["Universal Transverse Mercator System","utm"];const Fy={init:Dy,names:Ny,dependsOn:Oy};function mf(e,i){return Math.pow((1-e)/(1+e),i)}var Gy=20;function zy(){var e=Math.sin(this.lat0),i=Math.cos(this.lat0);i*=i,this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e),this.C=Math.sqrt(1+this.es*i*i/(1-this.es)),this.phic0=Math.asin(e/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+un)/(Math.pow(Math.tan(.5*this.lat0+un),this.C)*mf(this.e*e,this.ratexp))}function jy(e){var i=e.x,o=e.y;return e.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*o+un),this.C)*mf(this.e*Math.sin(o),this.ratexp))-Kt,e.x=this.C*i,e}function Uy(e){for(var i=1e-14,o=e.x/this.C,c=e.y,f=Math.pow(Math.tan(.5*c+un)/this.K,1/this.C),g=Gy;g>0&&(c=2*Math.atan(f*mf(this.e*Math.sin(e.y),-.5*this.e))-Kt,!(Math.abs(c-e.y)<i));--g)e.y=c;return g?(e.x=o,e.y=c,e):null}const _f={init:zy,forward:jy,inverse:Uy};function Hy(){_f.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function $y(e){var i,o,c,f;return e.x=le(e.x-this.long0,this.over),_f.forward.apply(this,[e]),i=Math.sin(e.y),o=Math.cos(e.y),c=Math.cos(e.x),f=this.k0*this.R2/(1+this.sinc0*i+this.cosc0*o*c),e.x=f*o*Math.sin(e.x),e.y=f*(this.cosc0*i-this.sinc0*o*c),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function Vy(e){var i,o,c,f,g;if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,g=Lr(e.x,e.y)){var y=2*Math.atan2(g,this.R2);i=Math.sin(y),o=Math.cos(y),f=Math.asin(o*this.sinc0+e.y*i*this.cosc0/g),c=Math.atan2(e.x*i,g*this.cosc0*o-e.y*this.sinc0*i)}else f=this.phic0,c=0;return e.x=c,e.y=f,_f.inverse.apply(this,[e]),e.x=le(e.x+this.long0,this.over),e}var Wy=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const Zy={init:Hy,forward:$y,inverse:Vy,names:Wy};function yf(e,i,o){return i*=o,Math.tan(.5*(Kt+e))*Math.pow((1-i)/(1+i),.5*o)}function qy(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=re&&(this.k0=.5*(1+Tu(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=re&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=re&&Math.abs(Math.cos(this.lat_ts))>re&&(this.k0=.5*this.cons*mo(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/zs(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=mo(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(yf(this.lat0,this.sinlat0,this.e))-Kt,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function Ky(e){var i=e.x,o=e.y,c=Math.sin(o),f=Math.cos(o),g,y,v,E,A,G,P=le(i-this.long0,this.over);return Math.abs(Math.abs(i-this.long0)-Math.PI)<=re&&Math.abs(o+this.lat0)<=re?(e.x=NaN,e.y=NaN,e):this.sphere?(g=2*this.k0/(1+this.sinlat0*c+this.coslat0*f*Math.cos(P)),e.x=this.a*g*f*Math.sin(P)+this.x0,e.y=this.a*g*(this.coslat0*c-this.sinlat0*f*Math.cos(P))+this.y0,e):(y=2*Math.atan(yf(o,c,this.e))-Kt,E=Math.cos(y),v=Math.sin(y),Math.abs(this.coslat0)<=re?(A=zs(this.e,o*this.con,this.con*c),G=2*this.a*this.k0*A/this.cons,e.x=this.x0+G*Math.sin(i-this.long0),e.y=this.y0-this.con*G*Math.cos(i-this.long0),e):(Math.abs(this.sinlat0)<re?(g=2*this.a*this.k0/(1+E*Math.cos(P)),e.y=g*v):(g=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*v+this.cosX0*E*Math.cos(P))),e.y=g*(this.cosX0*v-this.sinX0*E*Math.cos(P))+this.y0),e.x=g*E*Math.sin(P)+this.x0,e))}function Jy(e){e.x-=this.x0,e.y-=this.y0;var i,o,c,f,g,y=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere){var v=2*Math.atan(y/(2*this.a*this.k0));return i=this.long0,o=this.lat0,y<=re?(e.x=i,e.y=o,e):(o=Math.asin(Math.cos(v)*this.sinlat0+e.y*Math.sin(v)*this.coslat0/y),Math.abs(this.coslat0)<re?this.lat0>0?i=le(this.long0+Math.atan2(e.x,-1*e.y),this.over):i=le(this.long0+Math.atan2(e.x,e.y),this.over):i=le(this.long0+Math.atan2(e.x*Math.sin(v),y*this.coslat0*Math.cos(v)-e.y*this.sinlat0*Math.sin(v)),this.over),e.x=i,e.y=o,e)}else if(Math.abs(this.coslat0)<=re){if(y<=re)return o=this.lat0,i=this.long0,e.x=i,e.y=o,e;e.x*=this.con,e.y*=this.con,c=y*this.cons/(2*this.a*this.k0),o=this.con*bu(this.e,c),i=this.con*le(this.con*this.long0+Math.atan2(e.x,-1*e.y),this.over)}else f=2*Math.atan(y*this.cosX0/(2*this.a*this.k0*this.ms1)),i=this.long0,y<=re?g=this.X0:(g=Math.asin(Math.cos(f)*this.sinX0+e.y*Math.sin(f)*this.cosX0/y),i=le(this.long0+Math.atan2(e.x*Math.sin(f),y*this.cosX0*Math.cos(f)-e.y*this.sinX0*Math.sin(f)),this.over)),o=-1*bu(this.e,Math.tan(.5*(Kt+g)));return e.x=i,e.y=o,e}var Xy=["stere","Stereographic_South_Pole","Polar_Stereographic_variant_A","Polar_Stereographic_variant_B","Polar_Stereographic"];const Yy={init:qy,forward:Ky,inverse:Jy,names:Xy,ssfn_:yf};function Qy(){var e=this.lat0;this.lambda0=this.long0;var i=Math.sin(e),o=this.a,c=this.rf,f=1/c,g=2*f-Math.pow(f,2),y=this.e=Math.sqrt(g);this.R=this.k0*o*Math.sqrt(1-g)/(1-g*Math.pow(i,2)),this.alpha=Math.sqrt(1+g/(1-g)*Math.pow(Math.cos(e),4)),this.b0=Math.asin(i/this.alpha);var v=Math.log(Math.tan(Math.PI/4+this.b0/2)),E=Math.log(Math.tan(Math.PI/4+e/2)),A=Math.log((1+y*i)/(1-y*i));this.K=v-this.alpha*E+this.alpha*y/2*A}function tv(e){var i=Math.log(Math.tan(Math.PI/4-e.y/2)),o=this.e/2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y))),c=-this.alpha*(i+o)+this.K,f=2*(Math.atan(Math.exp(c))-Math.PI/4),g=this.alpha*(e.x-this.lambda0),y=Math.atan(Math.sin(g)/(Math.sin(this.b0)*Math.tan(f)+Math.cos(this.b0)*Math.cos(g))),v=Math.asin(Math.cos(this.b0)*Math.sin(f)-Math.sin(this.b0)*Math.cos(f)*Math.cos(g));return e.y=this.R/2*Math.log((1+Math.sin(v))/(1-Math.sin(v)))+this.y0,e.x=this.R*y+this.x0,e}function ev(e){for(var i=e.x-this.x0,o=e.y-this.y0,c=i/this.R,f=2*(Math.atan(Math.exp(o/this.R))-Math.PI/4),g=Math.asin(Math.cos(this.b0)*Math.sin(f)+Math.sin(this.b0)*Math.cos(f)*Math.cos(c)),y=Math.atan(Math.sin(c)/(Math.cos(this.b0)*Math.cos(c)-Math.sin(this.b0)*Math.tan(f))),v=this.lambda0+y/this.alpha,E=0,A=g,G=-1e3,P=0;Math.abs(A-G)>1e-7;){if(++P>20)return;E=1/this.alpha*(Math.log(Math.tan(Math.PI/4+g/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(A))/2)),G=A,A=2*Math.atan(Math.exp(E))-Math.PI/2}return e.x=v,e.y=A,e}var nv=["somerc"];const iv={init:Qy,forward:tv,inverse:ev,names:nv};var Bl=1e-7;function rv(e){var i=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],o=typeof e.projName=="object"?Object.keys(e.projName)[0]:e.projName;return"no_uoff"in e||"no_off"in e||i.indexOf(o)!==-1||i.indexOf(g0(o))!==-1}function sv(){var e,i,o,c,f,g,y,v,E,A,G=0,P,B=0,V=0,q=0,Z=0,Y=0,ht=0;this.no_off=rv(this),this.no_rot="no_rot"in this;var lt=!1;"alpha"in this&&(lt=!0);var Pt=!1;if("rectified_grid_angle"in this&&(Pt=!0),lt&&(ht=this.alpha),Pt&&(G=this.rectified_grid_angle),lt||Pt)B=this.longc;else if(V=this.long1,Z=this.lat1,q=this.long2,Y=this.lat2,Math.abs(Z-Y)<=Bl||(e=Math.abs(Z))<=Bl||Math.abs(e-Kt)<=Bl||Math.abs(Math.abs(this.lat0)-Kt)<=Bl||Math.abs(Math.abs(Y)-Kt)<=Bl)throw new Error;var Ut=1-this.es;i=Math.sqrt(Ut),Math.abs(this.lat0)>re?(v=Math.sin(this.lat0),o=Math.cos(this.lat0),e=1-this.es*v*v,this.B=o*o,this.B=Math.sqrt(1+this.es*this.B*this.B/Ut),this.A=this.B*this.k0*i/e,c=this.B*i/(o*Math.sqrt(e)),f=c*c-1,f<=0?f=0:(f=Math.sqrt(f),this.lat0<0&&(f=-f)),this.E=f+=c,this.E*=Math.pow(zs(this.e,this.lat0,v),this.B)):(this.B=1/i,this.A=this.k0,this.E=c=f=1),lt||Pt?(lt?(P=Math.asin(Math.sin(ht)/c),Pt||(G=ht)):(P=G,ht=Math.asin(c*Math.sin(P))),this.lam0=B-Math.asin(.5*(f-1/f)*Math.tan(P))/this.B):(g=Math.pow(zs(this.e,Z,Math.sin(Z)),this.B),y=Math.pow(zs(this.e,Y,Math.sin(Y)),this.B),f=this.E/g,E=(y-g)/(y+g),A=this.E*this.E,A=(A-y*g)/(A+y*g),e=V-q,e<-Math.PI?q-=Lu:e>Math.PI&&(q+=Lu),this.lam0=le(.5*(V+q)-Math.atan(A*Math.tan(.5*this.B*(V-q))/E)/this.B,this.over),P=Math.atan(2*Math.sin(this.B*le(V-this.lam0,this.over))/(f-1/f)),G=ht=Math.asin(c*Math.sin(P))),this.singam=Math.sin(P),this.cosgam=Math.cos(P),this.sinrot=Math.sin(G),this.cosrot=Math.cos(G),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(c*c-1)/Math.cos(ht))),this.lat0<0&&(this.u_0=-this.u_0)),f=.5*P,this.v_pole_n=this.ArB*Math.log(Math.tan(un-f)),this.v_pole_s=this.ArB*Math.log(Math.tan(un+f))}function ov(e){var i={},o,c,f,g,y,v,E,A;if(e.x=e.x-this.lam0,Math.abs(Math.abs(e.y)-Kt)>re){if(y=this.E/Math.pow(zs(this.e,e.y,Math.sin(e.y)),this.B),v=1/y,o=.5*(y-v),c=.5*(y+v),g=Math.sin(this.B*e.x),f=(o*this.singam-g*this.cosgam)/c,Math.abs(Math.abs(f)-1)<re)throw new Error;A=.5*this.ArB*Math.log((1-f)/(1+f)),v=Math.cos(this.B*e.x),Math.abs(v)<Bl?E=this.A*e.x:E=this.ArB*Math.atan2(o*this.cosgam+g*this.singam,v)}else A=e.y>0?this.v_pole_n:this.v_pole_s,E=this.ArB*e.y;return this.no_rot?(i.x=E,i.y=A):(E-=this.u_0,i.x=A*this.cosrot+E*this.sinrot,i.y=E*this.cosrot-A*this.sinrot),i.x=this.a*i.x+this.x0,i.y=this.a*i.y+this.y0,i}function av(e){var i,o,c,f,g,y,v,E={};if(e.x=(e.x-this.x0)*(1/this.a),e.y=(e.y-this.y0)*(1/this.a),this.no_rot?(o=e.y,i=e.x):(o=e.x*this.cosrot-e.y*this.sinrot,i=e.y*this.cosrot+e.x*this.sinrot+this.u_0),c=Math.exp(-this.BrA*o),f=.5*(c-1/c),g=.5*(c+1/c),y=Math.sin(this.BrA*i),v=(y*this.cosgam+f*this.singam)/g,Math.abs(Math.abs(v)-1)<re)E.x=0,E.y=v<0?-Kt:Kt;else{if(E.y=this.E/Math.sqrt((1+v)/(1-v)),E.y=bu(this.e,Math.pow(E.y,1/this.B)),E.y===1/0)throw new Error;E.x=-this.rB*Math.atan2(f*this.cosgam-y*this.singam,Math.cos(this.BrA*i))}return E.x+=this.lam0,E}var lv=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Variant_B","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const uv={init:sv,forward:ov,inverse:av,names:lv};function hv(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<re)){var e=this.b/this.a;this.e=Math.sqrt(1-e*e);var i=Math.sin(this.lat1),o=Math.cos(this.lat1),c=mo(this.e,i,o),f=zs(this.e,this.lat1,i),g=Math.sin(this.lat2),y=Math.cos(this.lat2),v=mo(this.e,g,y),E=zs(this.e,this.lat2,g),A=Math.abs(Math.abs(this.lat0)-Kt)<re?0:zs(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>re?this.ns=Math.log(c/v)/Math.log(f/E):this.ns=i,isNaN(this.ns)&&(this.ns=i),this.f0=c/(this.ns*Math.pow(f,this.ns)),this.rh=this.a*this.f0*Math.pow(A,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function cv(e){var i=e.x,o=e.y;Math.abs(2*Math.abs(o)-Math.PI)<=re&&(o=Tu(o)*(Kt-2*re));var c=Math.abs(Math.abs(o)-Kt),f,g;if(c>re)f=zs(this.e,o,Math.sin(o)),g=this.a*this.f0*Math.pow(f,this.ns);else{if(c=o*this.ns,c<=0)return null;g=0}var y=this.ns*le(i-this.long0,this.over);return e.x=this.k0*(g*Math.sin(y))+this.x0,e.y=this.k0*(this.rh-g*Math.cos(y))+this.y0,e}function fv(e){var i,o,c,f,g,y=(e.x-this.x0)/this.k0,v=this.rh-(e.y-this.y0)/this.k0;this.ns>0?(i=Math.sqrt(y*y+v*v),o=1):(i=-Math.sqrt(y*y+v*v),o=-1);var E=0;if(i!==0&&(E=Math.atan2(o*y,o*v)),i!==0||this.ns>0){if(o=1/this.ns,c=Math.pow(i/(this.a*this.f0),o),f=bu(this.e,c),f===-9999)return null}else f=-Kt;return g=le(E/this.ns+this.long0,this.over),e.x=g,e.y=f,e}var dv=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const pv={init:hv,forward:cv,inverse:fv,names:dv};function gv(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function mv(e){var i,o,c,f,g,y,v,E=e.x,A=e.y,G=le(E-this.long0,this.over);return i=Math.pow((1+this.e*Math.sin(A))/(1-this.e*Math.sin(A)),this.alfa*this.e/2),o=2*(Math.atan(this.k*Math.pow(Math.tan(A/2+this.s45),this.alfa)/i)-this.s45),c=-G*this.alfa,f=Math.asin(Math.cos(this.ad)*Math.sin(o)+Math.sin(this.ad)*Math.cos(o)*Math.cos(c)),g=Math.asin(Math.cos(o)*Math.sin(c)/Math.cos(f)),y=this.n*g,v=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(f/2+this.s45),this.n),e.y=v*Math.cos(y)/1,e.x=v*Math.sin(y)/1,this.czech||(e.y*=-1,e.x*=-1),e}function _v(e){var i,o,c,f,g,y,v,E,A=e.x;e.x=e.y,e.y=A,this.czech||(e.y*=-1,e.x*=-1),y=Math.sqrt(e.x*e.x+e.y*e.y),g=Math.atan2(e.y,e.x),f=g/Math.sin(this.s0),c=2*(Math.atan(Math.pow(this.ro0/y,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),i=Math.asin(Math.cos(this.ad)*Math.sin(c)-Math.sin(this.ad)*Math.cos(c)*Math.cos(f)),o=Math.asin(Math.cos(c)*Math.sin(f)/Math.cos(i)),e.x=this.long0-o/this.alfa,v=i,E=0;var G=0;do e.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(i/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(v))/(1-this.e*Math.sin(v)),this.e/2))-this.s45),Math.abs(v-e.y)<1e-10&&(E=1),v=e.y,G+=1;while(E===0&&G<15);return G>=15?null:e}var yv=["Krovak","krovak"];const vv={init:gv,forward:mv,inverse:_v,names:yv};function tr(e,i,o,c,f){return e*f-i*Math.sin(2*f)+o*Math.sin(4*f)-c*Math.sin(6*f)}function Ru(e){return 1-.25*e*(1+e/16*(3+1.25*e))}function Iu(e){return .375*e*(1+.25*e*(1+.46875*e))}function Ou(e){return .05859375*e*e*(1+.75*e)}function Du(e){return e*e*e*(35/3072)}function vf(e,i,o){var c=i*o;return e/Math.sqrt(1-c*c)}function Oa(e){return Math.abs(e)<Kt?e:e-Tu(e)*Math.PI}function Ph(e,i,o,c,f){var g,y;g=e/i;for(var v=0;v<15;v++)if(y=(e-(i*g-o*Math.sin(2*g)+c*Math.sin(4*g)-f*Math.sin(6*g)))/(i-2*o*Math.cos(2*g)+4*c*Math.cos(4*g)-6*f*Math.cos(6*g)),g+=y,Math.abs(y)<=1e-10)return g;return NaN}function xv(){this.sphere||(this.e0=Ru(this.es),this.e1=Iu(this.es),this.e2=Ou(this.es),this.e3=Du(this.es),this.ml0=this.a*tr(this.e0,this.e1,this.e2,this.e3,this.lat0))}function wv(e){var i,o,c=e.x,f=e.y;if(c=le(c-this.long0,this.over),this.sphere)i=this.a*Math.asin(Math.cos(f)*Math.sin(c)),o=this.a*(Math.atan2(Math.tan(f),Math.cos(c))-this.lat0);else{var g=Math.sin(f),y=Math.cos(f),v=vf(this.a,this.e,g),E=Math.tan(f)*Math.tan(f),A=c*Math.cos(f),G=A*A,P=this.es*y*y/(1-this.es),B=this.a*tr(this.e0,this.e1,this.e2,this.e3,f);i=v*A*(1-G*E*(1/6-(8-E+8*P)*G/120)),o=B-this.ml0+v*g/y*G*(.5+(5-E+6*P)*G/24)}return e.x=i+this.x0,e.y=o+this.y0,e}function Mv(e){e.x-=this.x0,e.y-=this.y0;var i=e.x/this.a,o=e.y/this.a,c,f;if(this.sphere){var g=o+this.lat0;c=Math.asin(Math.sin(g)*Math.cos(i)),f=Math.atan2(Math.tan(i),Math.cos(g))}else{var y=this.ml0/this.a+o,v=Ph(y,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(v)-Kt)<=re)return e.x=this.long0,e.y=Kt,o<0&&(e.y*=-1),e;var E=vf(this.a,this.e,Math.sin(v)),A=E*E*E/this.a/this.a*(1-this.es),G=Math.pow(Math.tan(v),2),P=i*this.a/E,B=P*P;c=v-E*Math.tan(v)/A*P*P*(.5-(1+3*G)*P*P/24),f=P*(1-B*(G/3+(1+3*G)*G*B/15))/Math.cos(v)}return e.x=le(f+this.long0,this.over),e.y=Oa(c),e}var Ev=["Cassini","Cassini_Soldner","cass"];const Lv={init:xv,forward:wv,inverse:Mv,names:Ev};function Aa(e,i){var o;return e>1e-7?(o=e*i,(1-e*e)*(i/(1-o*o)-.5/e*Math.log((1-o)/(1+o)))):2*i}var Xc=1,Yc=2,Qc=3,wh=4;function Cv(){var e=Math.abs(this.lat0);if(Math.abs(e-Kt)<re?this.mode=this.lat0<0?Xc:Yc:Math.abs(e)<re?this.mode=Qc:this.mode=wh,this.es>0){var i;switch(this.qp=Aa(this.e,1),this.mmf=.5/(1-this.es),this.apa=Iv(this.es),this.mode){case Yc:this.dd=1;break;case Xc:this.dd=1;break;case Qc:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case wh:this.rq=Math.sqrt(.5*this.qp),i=Math.sin(this.lat0),this.sinb1=Aa(this.e,i)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*i*i)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===wh&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function bv(e){var i,o,c,f,g,y,v,E,A,G,P=e.x,B=e.y;if(P=le(P-this.long0,this.over),this.sphere){if(g=Math.sin(B),G=Math.cos(B),c=Math.cos(P),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(o=this.mode===this.EQUIT?1+G*c:1+this.sinph0*g+this.cosph0*G*c,o<=re)return null;o=Math.sqrt(2/o),i=o*G*Math.sin(P),o*=this.mode===this.EQUIT?g:this.cosph0*g-this.sinph0*G*c}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(c=-c),Math.abs(B+this.lat0)<re)return null;o=un-B*.5,o=2*(this.mode===this.S_POLE?Math.cos(o):Math.sin(o)),i=o*Math.sin(P),o*=c}}else{switch(v=0,E=0,A=0,c=Math.cos(P),f=Math.sin(P),g=Math.sin(B),y=Aa(this.e,g),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(v=y/this.qp,E=Math.sqrt(1-v*v)),this.mode){case this.OBLIQ:A=1+this.sinb1*v+this.cosb1*E*c;break;case this.EQUIT:A=1+E*c;break;case this.N_POLE:A=Kt+B,y=this.qp-y;break;case this.S_POLE:A=B-Kt,y=this.qp+y;break}if(Math.abs(A)<re)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:A=Math.sqrt(2/A),this.mode===this.OBLIQ?o=this.ymf*A*(this.cosb1*v-this.sinb1*E*c):o=(A=Math.sqrt(2/(1+E*c)))*v*this.ymf,i=this.xmf*A*E*f;break;case this.N_POLE:case this.S_POLE:y>=0?(i=(A=Math.sqrt(y))*f,o=c*(this.mode===this.S_POLE?A:-A)):i=o=0;break}}return e.x=this.a*i+this.x0,e.y=this.a*o+this.y0,e}function Sv(e){e.x-=this.x0,e.y-=this.y0;var i=e.x/this.a,o=e.y/this.a,c,f,g,y,v,E,A;if(this.sphere){var G=0,P,B=0;if(P=Math.sqrt(i*i+o*o),f=P*.5,f>1)return null;switch(f=2*Math.asin(f),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(B=Math.sin(f),G=Math.cos(f)),this.mode){case this.EQUIT:f=Math.abs(P)<=re?0:Math.asin(o*B/P),i*=B,o=G*P;break;case this.OBLIQ:f=Math.abs(P)<=re?this.lat0:Math.asin(G*this.sinph0+o*B*this.cosph0/P),i*=B*this.cosph0,o=(G-Math.sin(f)*this.sinph0)*P;break;case this.N_POLE:o=-o,f=Kt-f;break;case this.S_POLE:f-=Kt;break}c=o===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(i,o)}else{if(A=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(i/=this.dd,o*=this.dd,E=Math.sqrt(i*i+o*o),E<re)return e.x=this.long0,e.y=this.lat0,e;y=2*Math.asin(.5*E/this.rq),g=Math.cos(y),i*=y=Math.sin(y),this.mode===this.OBLIQ?(A=g*this.sinb1+o*y*this.cosb1/E,v=this.qp*A,o=E*this.cosb1*g-o*this.sinb1*y):(A=o*y/E,v=this.qp*A,o=E*g)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(o=-o),v=i*i+o*o,!v)return e.x=this.long0,e.y=this.lat0,e;A=1-v/this.qp,this.mode===this.S_POLE&&(A=-A)}c=Math.atan2(i,o),f=Ov(Math.asin(A),this.apa)}return e.x=le(this.long0+c,this.over),e.y=f,e}var kv=.3333333333333333,Pv=.17222222222222222,Av=.10257936507936508,Bv=.06388888888888888,Tv=.0664021164021164,Rv=.016415012942191543;function Iv(e){var i,o=[];return o[0]=e*kv,i=e*e,o[0]+=i*Pv,o[1]=i*Bv,i*=e,o[0]+=i*Av,o[1]+=i*Tv,o[2]=i*Rv,o}function Ov(e,i){var o=e+e;return e+i[0]*Math.sin(o)+i[1]*Math.sin(o+o)+i[2]*Math.sin(o+o+o)}var Dv=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const Nv={init:Cv,forward:bv,inverse:Sv,names:Dv,S_POLE:Xc,N_POLE:Yc,EQUIT:Qc,OBLIQ:wh};function Ra(e){return Math.abs(e)>1&&(e=e>1?1:-1),Math.asin(e)}function Fv(){Math.abs(this.lat1+this.lat2)<re||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=mo(this.e3,this.sin_po,this.cos_po),this.qs1=Aa(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=mo(this.e3,this.sin_po,this.cos_po),this.qs2=Aa(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Aa(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>re?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function Gv(e){var i=e.x,o=e.y;this.sin_phi=Math.sin(o),this.cos_phi=Math.cos(o);var c=Aa(this.e3,this.sin_phi),f=this.a*Math.sqrt(this.c-this.ns0*c)/this.ns0,g=this.ns0*le(i-this.long0,this.over),y=f*Math.sin(g)+this.x0,v=this.rh-f*Math.cos(g)+this.y0;return e.x=y,e.y=v,e}function zv(e){var i,o,c,f,g,y;return e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns0>=0?(i=Math.sqrt(e.x*e.x+e.y*e.y),c=1):(i=-Math.sqrt(e.x*e.x+e.y*e.y),c=-1),f=0,i!==0&&(f=Math.atan2(c*e.x,c*e.y)),c=i*this.ns0/this.a,this.sphere?y=Math.asin((this.c-c*c)/(2*this.ns0)):(o=(this.c-c*c)/this.ns0,y=this.phi1z(this.e3,o)),g=le(f/this.ns0+this.long0,this.over),e.x=g,e.y=y,e}function jv(e,i){var o,c,f,g,y,v=Ra(.5*i);if(e<re)return v;for(var E=e*e,A=1;A<=25;A++)if(o=Math.sin(v),c=Math.cos(v),f=e*o,g=1-f*f,y=.5*g*g/c*(i/(1-E)-o/g+.5/e*Math.log((1-f)/(1+f))),v=v+y,Math.abs(y)<=1e-7)return v;return null}var Uv=["Albers_Conic_Equal_Area","Albers_Equal_Area","Albers","aea"];const Hv={init:Fv,forward:Gv,inverse:zv,names:Uv,phi1z:jv};function $v(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function Vv(e){var i,o,c,f,g,y,v,E,A=e.x,G=e.y;return c=le(A-this.long0,this.over),i=Math.sin(G),o=Math.cos(G),f=Math.cos(c),y=this.sin_p14*i+this.cos_p14*o*f,g=1,y>0||Math.abs(y)<=re?(v=this.x0+this.a*g*o*Math.sin(c)/y,E=this.y0+this.a*g*(this.cos_p14*i-this.sin_p14*o*f)/y):(v=this.x0+this.infinity_dist*o*Math.sin(c),E=this.y0+this.infinity_dist*(this.cos_p14*i-this.sin_p14*o*f)),e.x=v,e.y=E,e}function Wv(e){var i,o,c,f,g,y;return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,(i=Math.sqrt(e.x*e.x+e.y*e.y))?(f=Math.atan2(i,this.rc),o=Math.sin(f),c=Math.cos(f),y=Ra(c*this.sin_p14+e.y*o*this.cos_p14/i),g=Math.atan2(e.x*o,i*this.cos_p14*c-e.y*this.sin_p14*o),g=le(this.long0+g,this.over)):(y=this.phic0,g=0),e.x=g,e.y=y,e}var Zv=["gnom"];const qv={init:$v,forward:Vv,inverse:Wv,names:Zv};function Kv(e,i){var o=1-(1-e*e)/(2*e)*Math.log((1-e)/(1+e));if(Math.abs(Math.abs(i)-o)<1e-6)return i<0?-1*Kt:Kt;for(var c=Math.asin(.5*i),f,g,y,v,E=0;E<30;E++)if(g=Math.sin(c),y=Math.cos(c),v=e*g,f=Math.pow(1-v*v,2)/(2*y)*(i/(1-e*e)-g/(1-v*v)+.5/e*Math.log((1-v)/(1+v))),c+=f,Math.abs(f)<=1e-10)return c;return NaN}function Jv(){this.sphere||(this.k0=mo(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function Xv(e){var i=e.x,o=e.y,c,f,g=le(i-this.long0,this.over);if(this.sphere)c=this.x0+this.a*g*Math.cos(this.lat_ts),f=this.y0+this.a*Math.sin(o)/Math.cos(this.lat_ts);else{var y=Aa(this.e,Math.sin(o));c=this.x0+this.a*this.k0*g,f=this.y0+this.a*y*.5/this.k0}return e.x=c,e.y=f,e}function Yv(e){e.x-=this.x0,e.y-=this.y0;var i,o;return this.sphere?(i=le(this.long0+e.x/this.a/Math.cos(this.lat_ts),this.over),o=Math.asin(e.y/this.a*Math.cos(this.lat_ts))):(o=Kv(this.e,2*e.y*this.k0/this.a),i=le(this.long0+e.x/(this.a*this.k0),this.over)),e.x=i,e.y=o,e}var Qv=["cea"];const t1={init:Jv,forward:Xv,inverse:Yv,names:Qv};function e1(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function n1(e){var i=e.x,o=e.y,c=le(i-this.long0,this.over),f=Oa(o-this.lat0);return e.x=this.x0+this.a*c*this.rc,e.y=this.y0+this.a*f,e}function i1(e){var i=e.x,o=e.y;return e.x=le(this.long0+(i-this.x0)/(this.a*this.rc),this.over),e.y=Oa(this.lat0+(o-this.y0)/this.a),e}var r1=["Equirectangular","Equidistant_Cylindrical","Equidistant_Cylindrical_Spherical","eqc"];const s1={init:e1,forward:n1,inverse:i1,names:r1};var Cp=20;function o1(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Ru(this.es),this.e1=Iu(this.es),this.e2=Ou(this.es),this.e3=Du(this.es),this.ml0=this.a*tr(this.e0,this.e1,this.e2,this.e3,this.lat0)}function a1(e){var i=e.x,o=e.y,c,f,g,y=le(i-this.long0,this.over);if(g=y*Math.sin(o),this.sphere)Math.abs(o)<=re?(c=this.a*y,f=-1*this.a*this.lat0):(c=this.a*Math.sin(g)/Math.tan(o),f=this.a*(Oa(o-this.lat0)+(1-Math.cos(g))/Math.tan(o)));else if(Math.abs(o)<=re)c=this.a*y,f=-1*this.ml0;else{var v=vf(this.a,this.e,Math.sin(o))/Math.tan(o);c=v*Math.sin(g),f=this.a*tr(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+v*(1-Math.cos(g))}return e.x=c+this.x0,e.y=f+this.y0,e}function l1(e){var i,o,c,f,g,y,v,E,A;if(c=e.x-this.x0,f=e.y-this.y0,this.sphere)if(Math.abs(f+this.a*this.lat0)<=re)i=le(c/this.a+this.long0,this.over),o=0;else{y=this.lat0+f/this.a,v=c*c/this.a/this.a+y*y,E=y;var G;for(g=Cp;g;--g)if(G=Math.tan(E),A=-1*(y*(E*G+1)-E-.5*(E*E+v)*G)/((E-y)/G-1),E+=A,Math.abs(A)<=re){o=E;break}i=le(this.long0+Math.asin(c*Math.tan(E)/this.a)/Math.sin(o),this.over)}else if(Math.abs(f+this.ml0)<=re)o=0,i=le(this.long0+c/this.a,this.over);else{y=(this.ml0+f)/this.a,v=c*c/this.a/this.a+y*y,E=y;var P,B,V,q,Z;for(g=Cp;g;--g)if(Z=this.e*Math.sin(E),P=Math.sqrt(1-Z*Z)*Math.tan(E),B=this.a*tr(this.e0,this.e1,this.e2,this.e3,E),V=this.e0-2*this.e1*Math.cos(2*E)+4*this.e2*Math.cos(4*E)-6*this.e3*Math.cos(6*E),q=B/this.a,A=(y*(P*q+1)-q-.5*P*(q*q+v))/(this.es*Math.sin(2*E)*(q*q+v-2*y*q)/(4*P)+(y-q)*(P*V-2/Math.sin(2*E))-V),E-=A,Math.abs(A)<=re){o=E;break}P=Math.sqrt(1-this.es*Math.pow(Math.sin(o),2))*Math.tan(o),i=le(this.long0+Math.asin(c*P/this.a)/Math.sin(o),this.over)}return e.x=i,e.y=o,e}var u1=["Polyconic","American_Polyconic","poly"];const h1={init:o1,forward:a1,inverse:l1,names:u1};function c1(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function f1(e){var i,o=e.x,c=e.y,f=c-this.lat0,g=o-this.long0,y=f/vu*1e-5,v=g,E=1,A=0;for(i=1;i<=10;i++)E=E*y,A=A+this.A[i]*E;var G=A,P=v,B=1,V=0,q,Z,Y=0,ht=0;for(i=1;i<=6;i++)q=B*G-V*P,Z=V*G+B*P,B=q,V=Z,Y=Y+this.B_re[i]*B-this.B_im[i]*V,ht=ht+this.B_im[i]*B+this.B_re[i]*V;return e.x=ht*this.a+this.x0,e.y=Y*this.a+this.y0,e}function d1(e){var i,o=e.x,c=e.y,f=o-this.x0,g=c-this.y0,y=g/this.a,v=f/this.a,E=1,A=0,G,P,B=0,V=0;for(i=1;i<=6;i++)G=E*y-A*v,P=A*y+E*v,E=G,A=P,B=B+this.C_re[i]*E-this.C_im[i]*A,V=V+this.C_im[i]*E+this.C_re[i]*A;for(var q=0;q<this.iterations;q++){var Z=B,Y=V,ht,lt,Pt=y,Ut=v;for(i=2;i<=6;i++)ht=Z*B-Y*V,lt=Y*B+Z*V,Z=ht,Y=lt,Pt=Pt+(i-1)*(this.B_re[i]*Z-this.B_im[i]*Y),Ut=Ut+(i-1)*(this.B_im[i]*Z+this.B_re[i]*Y);Z=1,Y=0;var Ot=this.B_re[1],Gt=this.B_im[1];for(i=2;i<=6;i++)ht=Z*B-Y*V,lt=Y*B+Z*V,Z=ht,Y=lt,Ot=Ot+i*(this.B_re[i]*Z-this.B_im[i]*Y),Gt=Gt+i*(this.B_im[i]*Z+this.B_re[i]*Y);var $t=Ot*Ot+Gt*Gt;B=(Pt*Ot+Ut*Gt)/$t,V=(Ut*Ot-Pt*Gt)/$t}var Vt=B,Qt=V,zt=1,te=0;for(i=1;i<=9;i++)zt=zt*Vt,te=te+this.D[i]*zt;var ee=this.lat0+te*vu*1e5,Fe=this.long0+Qt;return e.x=Fe,e.y=ee,e}var p1=["New_Zealand_Map_Grid","nzmg"];const g1={init:c1,forward:f1,inverse:d1,names:p1};function m1(){}function _1(e){var i=e.x,o=e.y,c=le(i-this.long0,this.over),f=this.x0+this.a*c,g=this.y0+this.a*Math.log(Math.tan(Math.PI/4+o/2.5))*1.25;return e.x=f,e.y=g,e}function y1(e){e.x-=this.x0,e.y-=this.y0;var i=le(this.long0+e.x/this.a,this.over),o=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);return e.x=i,e.y=o,e}var v1=["Miller_Cylindrical","mill"];const x1={init:m1,forward:_1,inverse:y1,names:v1};var w1=20;function M1(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=df(this.es)}function E1(e){var i,o,c=e.x,f=e.y;if(c=le(c-this.long0,this.over),this.sphere){if(!this.m)f=this.n!==1?Math.asin(this.n*Math.sin(f)):f;else for(var g=this.n*Math.sin(f),y=w1;y;--y){var v=(this.m*f+Math.sin(f)-g)/(this.m+Math.cos(f));if(f-=v,Math.abs(v)<re)break}i=this.a*this.C_x*c*(this.m+Math.cos(f)),o=this.a*this.C_y*f}else{var E=Math.sin(f),A=Math.cos(f);o=this.a*jl(f,E,A,this.en),i=this.a*c*A/Math.sqrt(1-this.es*E*E)}return e.x=i,e.y=o,e}function L1(e){var i,o,c,f;return e.x-=this.x0,c=e.x/this.a,e.y-=this.y0,i=e.y/this.a,this.sphere?(i/=this.C_y,c=c/(this.C_x*(this.m+Math.cos(i))),this.m?i=Ra((this.m*i+Math.sin(i))/this.n):this.n!==1&&(i=Ra(Math.sin(i)/this.n)),c=le(c+this.long0,this.over),i=Oa(i)):(i=pf(e.y/this.a,this.es,this.en),f=Math.abs(i),f<Kt?(f=Math.sin(i),o=this.long0+e.x*Math.sqrt(1-this.es*f*f)/(this.a*Math.cos(i)),c=le(o,this.over)):f-re<Kt&&(c=this.long0)),e.x=c,e.y=i,e}var C1=["Sinusoidal","sinu"];const b1={init:M1,forward:E1,inverse:L1,names:C1};function S1(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0}function k1(e){for(var i=e.x,o=e.y,c=le(i-this.long0,this.over),f=o,g=Math.PI*Math.sin(o);;){var y=-(f+Math.sin(f)-g)/(1+Math.cos(f));if(f+=y,Math.abs(y)<re)break}f/=2,Math.PI/2-Math.abs(o)<re&&(c=0);var v=.900316316158*this.a*c*Math.cos(f)+this.x0,E=1.4142135623731*this.a*Math.sin(f)+this.y0;return e.x=v,e.y=E,e}function P1(e){var i,o;e.x-=this.x0,e.y-=this.y0,o=e.y/(1.4142135623731*this.a),Math.abs(o)>.999999999999&&(o=.999999999999),i=Math.asin(o);var c=le(this.long0+e.x/(.900316316158*this.a*Math.cos(i)),this.over);c<-Math.PI&&(c=-Math.PI),c>Math.PI&&(c=Math.PI),o=(2*i+Math.sin(2*i))/Math.PI,Math.abs(o)>1&&(o=1);var f=Math.asin(o);return e.x=c,e.y=f,e}var A1=["Mollweide","moll"];const B1={init:S1,forward:k1,inverse:P1,names:A1};function T1(){Math.abs(this.lat1+this.lat2)<re||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Ru(this.es),this.e1=Iu(this.es),this.e2=Ou(this.es),this.e3=Du(this.es),this.sin_phi=Math.sin(this.lat1),this.cos_phi=Math.cos(this.lat1),this.ms1=mo(this.e,this.sin_phi,this.cos_phi),this.ml1=tr(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<re?this.ns=this.sin_phi:(this.sin_phi=Math.sin(this.lat2),this.cos_phi=Math.cos(this.lat2),this.ms2=mo(this.e,this.sin_phi,this.cos_phi),this.ml2=tr(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=tr(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function R1(e){var i=e.x,o=e.y,c;if(this.sphere)c=this.a*(this.g-o);else{var f=tr(this.e0,this.e1,this.e2,this.e3,o);c=this.a*(this.g-f)}var g=this.ns*le(i-this.long0,this.over),y=this.x0+c*Math.sin(g),v=this.y0+this.rh-c*Math.cos(g);return e.x=y,e.y=v,e}function I1(e){e.x-=this.x0,e.y=this.rh-e.y+this.y0;var i,o,c,f;this.ns>=0?(o=Math.sqrt(e.x*e.x+e.y*e.y),i=1):(o=-Math.sqrt(e.x*e.x+e.y*e.y),i=-1);var g=0;if(o!==0&&(g=Math.atan2(i*e.x,i*e.y)),this.sphere)return f=le(this.long0+g/this.ns,this.over),c=Oa(this.g-o/this.a),e.x=f,e.y=c,e;var y=this.g-o/this.a;return c=Ph(y,this.e0,this.e1,this.e2,this.e3),f=le(this.long0+g/this.ns,this.over),e.x=f,e.y=c,e}var O1=["Equidistant_Conic","eqdc"];const D1={init:T1,forward:R1,inverse:I1,names:O1};function N1(){this.R=this.a}function F1(e){var i=e.x,o=e.y,c=le(i-this.long0,this.over),f,g;Math.abs(o)<=re&&(f=this.x0+this.R*c,g=this.y0);var y=Ra(2*Math.abs(o/Math.PI));(Math.abs(c)<=re||Math.abs(Math.abs(o)-Kt)<=re)&&(f=this.x0,o>=0?g=this.y0+Math.PI*this.R*Math.tan(.5*y):g=this.y0+Math.PI*this.R*-Math.tan(.5*y));var v=.5*Math.abs(Math.PI/c-c/Math.PI),E=v*v,A=Math.sin(y),G=Math.cos(y),P=G/(A+G-1),B=P*P,V=P*(2/A-1),q=V*V,Z=Math.PI*this.R*(v*(P-q)+Math.sqrt(E*(P-q)*(P-q)-(q+E)*(B-q)))/(q+E);c<0&&(Z=-Z),f=this.x0+Z;var Y=E+P;return Z=Math.PI*this.R*(V*Y-v*Math.sqrt((q+E)*(E+1)-Y*Y))/(q+E),o>=0?g=this.y0+Z:g=this.y0-Z,e.x=f,e.y=g,e}function G1(e){var i,o,c,f,g,y,v,E,A,G,P,B,V;return e.x-=this.x0,e.y-=this.y0,P=Math.PI*this.R,c=e.x/P,f=e.y/P,g=c*c+f*f,y=-Math.abs(f)*(1+g),v=y-2*f*f+c*c,E=-2*y+1+2*f*f+g*g,V=f*f/E+(2*v*v*v/E/E/E-9*y*v/E/E)/27,A=(y-v*v/3/E)/E,G=2*Math.sqrt(-A/3),P=3*V/A/G,Math.abs(P)>1&&(P>=0?P=1:P=-1),B=Math.acos(P)/3,e.y>=0?o=(-G*Math.cos(B+Math.PI/3)-v/3/E)*Math.PI:o=-(-G*Math.cos(B+Math.PI/3)-v/3/E)*Math.PI,Math.abs(c)<re?i=this.long0:i=le(this.long0+Math.PI*(g-1+Math.sqrt(1+2*(c*c-f*f)+g*g))/2/c,this.over),e.x=i,e.y=o,e}var z1=["Van_der_Grinten_I","VanDerGrinten","Van_der_Grinten","vandg"];const j1={init:N1,forward:F1,inverse:G1,names:z1};function U1(e,i,o,c,f,g){const y=c-i,v=Math.atan((1-g)*Math.tan(e)),E=Math.atan((1-g)*Math.tan(o)),A=Math.sin(v),G=Math.cos(v),P=Math.sin(E),B=Math.cos(E);let V=y,q,Z=100,Y,ht,lt,Pt,Ut,Ot,Gt,$t,Vt,Qt,zt,te,ee,Fe;do{if(Y=Math.sin(V),ht=Math.cos(V),lt=Math.sqrt(B*Y*(B*Y)+(G*P-A*B*ht)*(G*P-A*B*ht)),lt===0)return{azi1:0,s12:0};Pt=A*P+G*B*ht,Ut=Math.atan2(lt,Pt),Ot=G*B*Y/lt,Gt=1-Ot*Ot,$t=Gt!==0?Pt-2*A*P/Gt:0,Vt=g/16*Gt*(4+g*(4-3*Gt)),q=V,V=y+(1-Vt)*g*Ot*(Ut+Vt*lt*($t+Vt*Pt*(-1+2*$t*$t)))}while(Math.abs(V-q)>1e-12&&--Z>0);return Z===0?{azi1:NaN,s12:NaN}:(Qt=Gt*(f*f-f*(1-g)*(f*(1-g)))/(f*(1-g)*(f*(1-g))),zt=1+Qt/16384*(4096+Qt*(-768+Qt*(320-175*Qt))),te=Qt/1024*(256+Qt*(-128+Qt*(74-47*Qt))),ee=te*lt*($t+te/4*(Pt*(-1+2*$t*$t)-te/6*$t*(-3+4*lt*lt)*(-3+4*$t*$t))),Fe=f*(1-g)*zt*(Ut-ee),{azi1:Math.atan2(B*Y,G*P-A*B*ht),s12:Fe})}function H1(e,i,o,c,f,g){const y=Math.atan((1-g)*Math.tan(e)),v=Math.sin(y),E=Math.cos(y),A=Math.sin(o),G=Math.cos(o),P=Math.atan2(v,E*G),B=E*A,V=1-B*B,q=V*(f*f-f*(1-g)*(f*(1-g)))/(f*(1-g)*(f*(1-g))),Z=1+q/16384*(4096+q*(-768+q*(320-175*q))),Y=q/1024*(256+q*(-128+q*(74-47*q)));let ht=c/(f*(1-g)*Z),lt,Pt=100,Ut,Ot,Gt,$t;do Ut=Math.cos(2*P+ht),Ot=Math.sin(ht),Gt=Math.cos(ht),$t=Y*Ot*(Ut+Y/4*(Gt*(-1+2*Ut*Ut)-Y/6*Ut*(-3+4*Ot*Ot)*(-3+4*Ut*Ut))),lt=ht,ht=c/(f*(1-g)*Z)+$t;while(Math.abs(ht-lt)>1e-12&&--Pt>0);if(Pt===0)return{lat2:NaN,lon2:NaN};const Vt=v*Ot-E*Gt*G,Qt=Math.atan2(v*Gt+E*Ot*G,(1-g)*Math.sqrt(B*B+Vt*Vt)),zt=Math.atan2(Ot*A,E*Gt-v*Ot*G),te=g/16*V*(4+g*(4-3*V)),ee=zt-(1-te)*g*B*(ht+te*Ot*(Ut+te*Gt*(-1+2*Ut*Ut))),Fe=i+ee;return{lat2:Qt,lon2:Fe}}function $1(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0),this.f=this.es/(1+Math.sqrt(1-this.es))}function V1(e){var i=e.x,o=e.y,c=Math.sin(e.y),f=Math.cos(e.y),g=le(i-this.long0,this.over),y,v,E,A,G,P,B,V,q,Z,Y;return this.sphere?Math.abs(this.sin_p12-1)<=re?(e.x=this.x0+this.a*(Kt-o)*Math.sin(g),e.y=this.y0-this.a*(Kt-o)*Math.cos(g),e):Math.abs(this.sin_p12+1)<=re?(e.x=this.x0+this.a*(Kt+o)*Math.sin(g),e.y=this.y0+this.a*(Kt+o)*Math.cos(g),e):(q=this.sin_p12*c+this.cos_p12*f*Math.cos(g),B=Math.acos(q),V=B?B/Math.sin(B):1,e.x=this.x0+this.a*V*f*Math.sin(g),e.y=this.y0+this.a*V*(this.cos_p12*c-this.sin_p12*f*Math.cos(g)),e):(y=Ru(this.es),v=Iu(this.es),E=Ou(this.es),A=Du(this.es),Math.abs(this.sin_p12-1)<=re?(G=this.a*tr(y,v,E,A,Kt),P=this.a*tr(y,v,E,A,o),e.x=this.x0+(G-P)*Math.sin(g),e.y=this.y0-(G-P)*Math.cos(g),e):Math.abs(this.sin_p12+1)<=re?(G=this.a*tr(y,v,E,A,Kt),P=this.a*tr(y,v,E,A,o),e.x=this.x0+(G+P)*Math.sin(g),e.y=this.y0+(G+P)*Math.cos(g),e):Math.abs(i)<re&&Math.abs(o-this.lat0)<re?(e.x=e.y=0,e):(Z=U1(this.lat0,this.long0,o,i,this.a,this.f),Y=Z.azi1,e.x=Z.s12*Math.sin(Y),e.y=Z.s12*Math.cos(Y),e))}function W1(e){e.x-=this.x0,e.y-=this.y0;var i,o,c,f,g,y,v,E,A,G,P,B,V,q,Z,Y;return this.sphere?(i=Math.sqrt(e.x*e.x+e.y*e.y),i>2*Kt*this.a?void 0:(o=i/this.a,c=Math.sin(o),f=Math.cos(o),g=this.long0,Math.abs(i)<=re?y=this.lat0:(y=Ra(f*this.sin_p12+e.y*c*this.cos_p12/i),v=Math.abs(this.lat0)-Kt,Math.abs(v)<=re?this.lat0>=0?g=le(this.long0+Math.atan2(e.x,-e.y),this.over):g=le(this.long0-Math.atan2(-e.x,e.y),this.over):g=le(this.long0+Math.atan2(e.x*c,i*this.cos_p12*f-e.y*this.sin_p12*c),this.over)),e.x=g,e.y=y,e)):(E=Ru(this.es),A=Iu(this.es),G=Ou(this.es),P=Du(this.es),Math.abs(this.sin_p12-1)<=re?(B=this.a*tr(E,A,G,P,Kt),i=Math.sqrt(e.x*e.x+e.y*e.y),V=B-i,y=Ph(V/this.a,E,A,G,P),g=le(this.long0+Math.atan2(e.x,-1*e.y),this.over),e.x=g,e.y=y,e):Math.abs(this.sin_p12+1)<=re?(B=this.a*tr(E,A,G,P,Kt),i=Math.sqrt(e.x*e.x+e.y*e.y),V=i-B,y=Ph(V/this.a,E,A,G,P),g=le(this.long0+Math.atan2(e.x,e.y),this.over),e.x=g,e.y=y,e):(q=Math.atan2(e.x,e.y),Z=Math.sqrt(e.x*e.x+e.y*e.y),Y=H1(this.lat0,this.long0,q,Z,this.a,this.f),e.x=Y.lon2,e.y=Y.lat2,e))}var Z1=["Azimuthal_Equidistant","aeqd"];const q1={init:$1,forward:V1,inverse:W1,names:Z1};function K1(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function J1(e){var i,o,c,f,g,y,v,E,A=e.x,G=e.y;return c=le(A-this.long0,this.over),i=Math.sin(G),o=Math.cos(G),f=Math.cos(c),y=this.sin_p14*i+this.cos_p14*o*f,g=1,(y>0||Math.abs(y)<=re)&&(v=this.a*g*o*Math.sin(c),E=this.y0+this.a*g*(this.cos_p14*i-this.sin_p14*o*f)),e.x=v,e.y=E,e}function X1(e){var i,o,c,f,g,y,v;return e.x-=this.x0,e.y-=this.y0,i=Math.sqrt(e.x*e.x+e.y*e.y),o=Ra(i/this.a),c=Math.sin(o),f=Math.cos(o),y=this.long0,Math.abs(i)<=re?(v=this.lat0,e.x=y,e.y=v,e):(v=Ra(f*this.sin_p14+e.y*c*this.cos_p14/i),g=Math.abs(this.lat0)-Kt,Math.abs(g)<=re?(this.lat0>=0?y=le(this.long0+Math.atan2(e.x,-e.y),this.over):y=le(this.long0-Math.atan2(-e.x,e.y),this.over),e.x=y,e.y=v,e):(y=le(this.long0+Math.atan2(e.x*c,i*this.cos_p14*f-e.y*this.sin_p14*c),this.over),e.x=y,e.y=v,e))}var Y1=["ortho"];const Q1={init:K1,forward:J1,inverse:X1,names:Y1};var bn={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},hn={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function t4(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=Kt-un/2?this.face=bn.TOP:this.lat0<=-(Kt-un/2)?this.face=bn.BOTTOM:Math.abs(this.long0)<=un?this.face=bn.FRONT:Math.abs(this.long0)<=Kt+un?this.face=this.long0>0?bn.RIGHT:bn.LEFT:this.face=bn.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function e4(e){var i={x:0,y:0},o,c,f,g,y,v,E={value:0};if(e.x-=this.long0,this.es!==0?o=Math.atan(this.one_minus_f_squared*Math.tan(e.y)):o=e.y,c=e.x,this.face===bn.TOP)g=Kt-o,c>=un&&c<=Kt+un?(E.value=hn.AREA_0,f=c-Kt):c>Kt+un||c<=-(Kt+un)?(E.value=hn.AREA_1,f=c>0?c-Hn:c+Hn):c>-(Kt+un)&&c<=-un?(E.value=hn.AREA_2,f=c+Kt):(E.value=hn.AREA_3,f=c);else if(this.face===bn.BOTTOM)g=Kt+o,c>=un&&c<=Kt+un?(E.value=hn.AREA_0,f=-c+Kt):c<un&&c>=-un?(E.value=hn.AREA_1,f=-c):c<-un&&c>=-(Kt+un)?(E.value=hn.AREA_2,f=-c-Kt):(E.value=hn.AREA_3,f=c>0?-c+Hn:-c-Hn);else{var A,G,P,B,V,q,Z;this.face===bn.RIGHT?c=Fl(c,+Kt):this.face===bn.BACK?c=Fl(c,+Hn):this.face===bn.LEFT&&(c=Fl(c,-Kt)),B=Math.sin(o),V=Math.cos(o),q=Math.sin(c),Z=Math.cos(c),A=V*Z,G=V*q,P=B,this.face===bn.FRONT?(g=Math.acos(A),f=mh(g,P,G,E)):this.face===bn.RIGHT?(g=Math.acos(G),f=mh(g,P,-A,E)):this.face===bn.BACK?(g=Math.acos(-A),f=mh(g,P,-G,E)):this.face===bn.LEFT?(g=Math.acos(-G),f=mh(g,P,A,E)):(g=f=0,E.value=hn.AREA_0)}return v=Math.atan(12/Hn*(f+Math.acos(Math.sin(f)*Math.cos(un))-Kt)),y=Math.sqrt((1-Math.cos(g))/(Math.cos(v)*Math.cos(v))/(1-Math.cos(Math.atan(1/Math.cos(f))))),E.value===hn.AREA_1?v+=Kt:E.value===hn.AREA_2?v+=Hn:E.value===hn.AREA_3&&(v+=1.5*Hn),i.x=y*Math.cos(v),i.y=y*Math.sin(v),i.x=i.x*this.a+this.x0,i.y=i.y*this.a+this.y0,e.x=i.x,e.y=i.y,e}function n4(e){var i={lam:0,phi:0},o,c,f,g,y,v,E,A,G,P={value:0};if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,c=Math.atan(Math.sqrt(e.x*e.x+e.y*e.y)),o=Math.atan2(e.y,e.x),e.x>=0&&e.x>=Math.abs(e.y)?P.value=hn.AREA_0:e.y>=0&&e.y>=Math.abs(e.x)?(P.value=hn.AREA_1,o-=Kt):e.x<0&&-e.x>=Math.abs(e.y)?(P.value=hn.AREA_2,o=o<0?o+Hn:o-Hn):(P.value=hn.AREA_3,o+=Kt),G=Hn/12*Math.tan(o),y=Math.sin(G)/(Math.cos(G)-1/Math.sqrt(2)),v=Math.atan(y),f=Math.cos(o),g=Math.tan(c),E=1-f*f*g*g*(1-Math.cos(Math.atan(1/Math.cos(v)))),E<-1?E=-1:E>1&&(E=1),this.face===bn.TOP)A=Math.acos(E),i.phi=Kt-A,P.value===hn.AREA_0?i.lam=v+Kt:P.value===hn.AREA_1?i.lam=v<0?v+Hn:v-Hn:P.value===hn.AREA_2?i.lam=v-Kt:i.lam=v;else if(this.face===bn.BOTTOM)A=Math.acos(E),i.phi=A-Kt,P.value===hn.AREA_0?i.lam=-v+Kt:P.value===hn.AREA_1?i.lam=-v:P.value===hn.AREA_2?i.lam=-v-Kt:i.lam=v<0?-v-Hn:-v+Hn;else{var B,V,q;B=E,G=B*B,G>=1?q=0:q=Math.sqrt(1-G)*Math.sin(v),G+=q*q,G>=1?V=0:V=Math.sqrt(1-G),P.value===hn.AREA_1?(G=V,V=-q,q=G):P.value===hn.AREA_2?(V=-V,q=-q):P.value===hn.AREA_3&&(G=V,V=q,q=-G),this.face===bn.RIGHT?(G=B,B=-V,V=G):this.face===bn.BACK?(B=-B,V=-V):this.face===bn.LEFT&&(G=B,B=V,V=-G),i.phi=Math.acos(-q)-Kt,i.lam=Math.atan2(V,B),this.face===bn.RIGHT?i.lam=Fl(i.lam,-Kt):this.face===bn.BACK?i.lam=Fl(i.lam,-Hn):this.face===bn.LEFT&&(i.lam=Fl(i.lam,+Kt))}if(this.es!==0){var Z,Y,ht;Z=i.phi<0?1:0,Y=Math.tan(i.phi),ht=this.b/Math.sqrt(Y*Y+this.one_minus_f_squared),i.phi=Math.atan(Math.sqrt(this.a*this.a-ht*ht)/(this.one_minus_f*ht)),Z&&(i.phi=-i.phi)}return i.lam+=this.long0,e.x=i.lam,e.y=i.phi,e}function mh(e,i,o,c){var f;return e<re?(c.value=hn.AREA_0,f=0):(f=Math.atan2(i,o),Math.abs(f)<=un?c.value=hn.AREA_0:f>un&&f<=Kt+un?(c.value=hn.AREA_1,f-=Kt):f>Kt+un||f<=-(Kt+un)?(c.value=hn.AREA_2,f=f>=0?f-Hn:f+Hn):(c.value=hn.AREA_3,f+=Kt)),f}function Fl(e,i){var o=e+i;return o<-Hn?o+=Lu:o>+Hn&&(o-=Lu),o}var i4=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const r4={init:t4,forward:e4,inverse:n4,names:i4};var tf=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],_u=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],k0=.8487,P0=1.3523,A0=Cr/5,s4=1/A0,Dl=18,Ah=function(e,i){return e[0]+i*(e[1]+i*(e[2]+i*e[3]))},o4=function(e,i){return e[1]+i*(2*e[2]+i*3*e[3])};function a4(e,i,o,c){for(var f=i;c;--c){var g=e(f);if(f-=g,Math.abs(g)<o)break}return f}function l4(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function u4(e){var i=le(e.x-this.long0,this.over),o=Math.abs(e.y),c=Math.floor(o*A0);c<0?c=0:c>=Dl&&(c=Dl-1),o=Cr*(o-s4*c);var f={x:Ah(tf[c],o)*i,y:Ah(_u[c],o)};return e.y<0&&(f.y=-f.y),f.x=f.x*this.a*k0+this.x0,f.y=f.y*this.a*P0+this.y0,f}function h4(e){var i={x:(e.x-this.x0)/(this.a*k0),y:Math.abs(e.y-this.y0)/(this.a*P0)};if(i.y>=1)i.x/=tf[Dl][0],i.y=e.y<0?-Kt:Kt;else{var o=Math.floor(i.y*Dl);for(o<0?o=0:o>=Dl&&(o=Dl-1);;)if(_u[o][0]>i.y)--o;else if(_u[o+1][0]<=i.y)++o;else break;var c=_u[o],f=5*(i.y-c[0])/(_u[o+1][0]-c[0]);f=a4(function(g){return(Ah(c,g)-i.y)/o4(c,g)},f,re,100),i.x/=Ah(tf[o],f),i.y=(5*o+f)*Rn,e.y<0&&(i.y=-i.y)}return i.x=le(i.x+this.long0,this.over),i}var c4=["Robinson","robin"];const f4={init:l4,forward:u4,inverse:h4,names:c4};function d4(){this.name="geocent"}function p4(e){var i=_0(e,this.es,this.a);return i}function g4(e){var i=y0(e,this.es,this.a,this.b);return i}var m4=["Geocentric","geocentric","geocent","Geocent"];const _4={init:d4,forward:p4,inverse:g4,names:m4};var ji={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},cu={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function y4(){if(Object.keys(cu).forEach((function(o){if(typeof this[o]>"u")this[o]=cu[o].def;else{if(cu[o].num&&isNaN(this[o]))throw new Error("Invalid parameter value, must be numeric "+o+" = "+this[o]);cu[o].num&&(this[o]=parseFloat(this[o]))}cu[o].degrees&&(this[o]=this[o]*Rn)}).bind(this)),Math.abs(Math.abs(this.lat0)-Kt)<re?this.mode=this.lat0<0?ji.S_POLE:ji.N_POLE:Math.abs(this.lat0)<re?this.mode=ji.EQUIT:(this.mode=ji.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var e=this.tilt,i=this.azi;this.cg=Math.cos(i),this.sg=Math.sin(i),this.cw=Math.cos(e),this.sw=Math.sin(e)}function v4(e){e.x-=this.long0;var i=Math.sin(e.y),o=Math.cos(e.y),c=Math.cos(e.x),f,g;switch(this.mode){case ji.OBLIQ:g=this.sinph0*i+this.cosph0*o*c;break;case ji.EQUIT:g=o*c;break;case ji.S_POLE:g=-i;break;case ji.N_POLE:g=i;break}switch(g=this.pn1/(this.p-g),f=g*o*Math.sin(e.x),this.mode){case ji.OBLIQ:g*=this.cosph0*i-this.sinph0*o*c;break;case ji.EQUIT:g*=i;break;case ji.N_POLE:g*=-(o*c);break;case ji.S_POLE:g*=o*c;break}var y,v;return y=g*this.cg+f*this.sg,v=1/(y*this.sw*this.h1+this.cw),f=(f*this.cg-g*this.sg)*this.cw*v,g=y*v,e.x=f*this.a,e.y=g*this.a,e}function x4(e){e.x/=this.a,e.y/=this.a;var i={x:e.x,y:e.y},o,c,f;f=1/(this.pn1-e.y*this.sw),o=this.pn1*e.x*f,c=this.pn1*e.y*this.cw*f,e.x=o*this.cg+c*this.sg,e.y=c*this.cg-o*this.sg;var g=Lr(e.x,e.y);if(Math.abs(g)<re)i.x=0,i.y=e.y;else{var y,v;switch(v=1-g*g*this.pfact,v=(this.p-Math.sqrt(v))/(this.pn1/g+g/this.pn1),y=Math.sqrt(1-v*v),this.mode){case ji.OBLIQ:i.y=Math.asin(y*this.sinph0+e.y*v*this.cosph0/g),e.y=(y-this.sinph0*Math.sin(i.y))*g,e.x*=v*this.cosph0;break;case ji.EQUIT:i.y=Math.asin(e.y*v/g),e.y=y*g,e.x*=v;break;case ji.N_POLE:i.y=Math.asin(y),e.y=-e.y;break;case ji.S_POLE:i.y=-Math.asin(y);break}i.x=Math.atan2(e.x,e.y)}return e.x=i.x+this.long0,e.y=i.y,e}var w4=["Tilted_Perspective","tpers"];const M4={init:y4,forward:v4,inverse:x4,names:w4};function E4(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var e=1-this.es,i=1/e;this.radius_p=Math.sqrt(e),this.radius_p2=e,this.radius_p_inv2=i,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function L4(e){var i=e.x,o=e.y,c,f,g,y;if(i=i-this.long0,this.shape==="ellipse"){o=Math.atan(this.radius_p2*Math.tan(o));var v=this.radius_p/Lr(this.radius_p*Math.cos(o),Math.sin(o));if(f=v*Math.cos(i)*Math.cos(o),g=v*Math.sin(i)*Math.cos(o),y=v*Math.sin(o),(this.radius_g-f)*f-g*g-y*y*this.radius_p_inv2<0)return e.x=Number.NaN,e.y=Number.NaN,e;c=this.radius_g-f,this.flip_axis?(e.x=this.radius_g_1*Math.atan(g/Lr(y,c)),e.y=this.radius_g_1*Math.atan(y/c)):(e.x=this.radius_g_1*Math.atan(g/c),e.y=this.radius_g_1*Math.atan(y/Lr(g,c)))}else this.shape==="sphere"&&(c=Math.cos(o),f=Math.cos(i)*c,g=Math.sin(i)*c,y=Math.sin(o),c=this.radius_g-f,this.flip_axis?(e.x=this.radius_g_1*Math.atan(g/Lr(y,c)),e.y=this.radius_g_1*Math.atan(y/c)):(e.x=this.radius_g_1*Math.atan(g/c),e.y=this.radius_g_1*Math.atan(y/Lr(g,c))));return e.x=e.x*this.a,e.y=e.y*this.a,e}function C4(e){var i=-1,o=0,c=0,f,g,y,v;if(e.x=e.x/this.a,e.y=e.y/this.a,this.shape==="ellipse"){this.flip_axis?(c=Math.tan(e.y/this.radius_g_1),o=Math.tan(e.x/this.radius_g_1)*Lr(1,c)):(o=Math.tan(e.x/this.radius_g_1),c=Math.tan(e.y/this.radius_g_1)*Lr(1,o));var E=c/this.radius_p;if(f=o*o+E*E+i*i,g=2*this.radius_g*i,y=g*g-4*f*this.C,y<0)return e.x=Number.NaN,e.y=Number.NaN,e;v=(-g-Math.sqrt(y))/(2*f),i=this.radius_g+v*i,o*=v,c*=v,e.x=Math.atan2(o,i),e.y=Math.atan(c*Math.cos(e.x)/i),e.y=Math.atan(this.radius_p_inv2*Math.tan(e.y))}else if(this.shape==="sphere"){if(this.flip_axis?(c=Math.tan(e.y/this.radius_g_1),o=Math.tan(e.x/this.radius_g_1)*Math.sqrt(1+c*c)):(o=Math.tan(e.x/this.radius_g_1),c=Math.tan(e.y/this.radius_g_1)*Math.sqrt(1+o*o)),f=o*o+c*c+i*i,g=2*this.radius_g*i,y=g*g-4*f*this.C,y<0)return e.x=Number.NaN,e.y=Number.NaN,e;v=(-g-Math.sqrt(y))/(2*f),i=this.radius_g+v*i,o*=v,c*=v,e.x=Math.atan2(o,i),e.y=Math.atan(c*Math.cos(e.x)/i)}return e.x=e.x+this.long0,e}var b4=["Geostationary Satellite View","Geostationary_Satellite","geos"];const S4={init:E4,forward:L4,inverse:C4,names:b4};var xu=1.340264,wu=-.081106,Mu=893e-6,Eu=.003796,Bh=Math.sqrt(3)/2;function k4(){this.es=0,this.long0=this.long0!==void 0?this.long0:0,this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0}function P4(e){var i=le(e.x-this.long0,this.over),o=e.y,c=Math.asin(Bh*Math.sin(o)),f=c*c,g=f*f*f;return e.x=i*Math.cos(c)/(Bh*(xu+3*wu*f+g*(7*Mu+9*Eu*f))),e.y=c*(xu+wu*f+g*(Mu+Eu*f)),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function A4(e){e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a;var i=1e-9,o=12,c=e.y,f,g,y,v,E,A;for(A=0;A<o&&(f=c*c,g=f*f*f,y=c*(xu+wu*f+g*(Mu+Eu*f))-e.y,v=xu+3*wu*f+g*(7*Mu+9*Eu*f),c-=E=y/v,!(Math.abs(E)<i));++A);return f=c*c,g=f*f*f,e.x=Bh*e.x*(xu+3*wu*f+g*(7*Mu+9*Eu*f))/Math.cos(c),e.y=Math.asin(Math.sin(c)/Bh),e.x=le(e.x+this.long0,this.over),e}var B4=["eqearth","Equal Earth","Equal_Earth"];const T4={init:k4,forward:P4,inverse:A4,names:B4};var Su=1e-10;function R4(){var e;if(this.phi1=this.lat1,Math.abs(this.phi1)<Su)throw new Error;this.es?(this.en=df(this.es),this.m1=jl(this.phi1,this.am1=Math.sin(this.phi1),e=Math.cos(this.phi1),this.en),this.am1=e/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=O4,this.forward=I4):(Math.abs(this.phi1)+Su>=Kt?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=N4,this.forward=D4)}function I4(e){var i=le(e.x-(this.long0||0),this.over),o=e.y,c,f,g;return c=this.am1+this.m1-jl(o,f=Math.sin(o),g=Math.cos(o),this.en),f=g*i/(c*Math.sqrt(1-this.es*f*f)),e.x=c*Math.sin(f),e.y=this.am1-c*Math.cos(f),e.x=this.a*e.x+(this.x0||0),e.y=this.a*e.y+(this.y0||0),e}function O4(e){e.x=(e.x-(this.x0||0))/this.a,e.y=(e.y-(this.y0||0))/this.a;var i,o,c,f;if(o=Lr(e.x,e.y=this.am1-e.y),f=pf(this.am1+this.m1-o,this.es,this.en),(i=Math.abs(f))<Kt)i=Math.sin(f),c=o*Math.atan2(e.x,e.y)*Math.sqrt(1-this.es*i*i)/Math.cos(f);else if(Math.abs(i-Kt)<=Su)c=0;else throw new Error;return e.x=le(c+(this.long0||0),this.over),e.y=Oa(f),e}function D4(e){var i=le(e.x-(this.long0||0),this.over),o=e.y,c,f;return f=this.cphi1+this.phi1-o,Math.abs(f)>Su?(e.x=f*Math.sin(c=i*Math.cos(o)/f),e.y=this.cphi1-f*Math.cos(c)):e.x=e.y=0,e.x=this.a*e.x+(this.x0||0),e.y=this.a*e.y+(this.y0||0),e}function N4(e){e.x=(e.x-(this.x0||0))/this.a,e.y=(e.y-(this.y0||0))/this.a;var i,o,c=Lr(e.x,e.y=this.cphi1-e.y);if(o=this.cphi1+this.phi1-c,Math.abs(o)>Kt)throw new Error;return Math.abs(Math.abs(o)-Kt)<=Su?i=0:i=c*Math.atan2(e.x,e.y)/Math.cos(o),e.x=le(i+(this.long0||0),this.over),e.y=Oa(o),e}var F4=["bonne","Bonne (Werner lat_1=90)"];const G4={init:R4,names:F4},bp={OBLIQUE:{forward:$4,inverse:W4},TRANSVERSE:{forward:V4,inverse:Z4}},Th={ROTATE:{o_alpha:"oAlpha",o_lon_c:"oLongC",o_lat_c:"oLatC"},NEW_POLE:{o_lat_p:"oLatP",o_lon_p:"oLongP"},NEW_EQUATOR:{o_lon_1:"oLong1",o_lat_1:"oLat1",o_lon_2:"oLong2",o_lat_2:"oLat2"}};function z4(){if(this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.title=this.title||"General Oblique Transformation",this.isIdentity=d0.includes(this.o_proj),!this.o_proj)throw new Error("Missing parameter: o_proj");if(this.o_proj==="ob_tran")throw new Error("Invalid value for o_proj: "+this.o_proj);const e=this.projStr.replace("+proj=ob_tran","").replace("+o_proj=","+proj=").trim(),i=hs(e);if(!i)throw new Error("Invalid parameter: o_proj. Unknown projection "+this.o_proj);i.long0=0,this.obliqueProjection=i;let o;const c=Object.keys(Th),f=v=>{if(typeof this[v]>"u")return;const E=parseFloat(this[v])*Rn;if(isNaN(E))throw new Error("Invalid value for "+v+": "+this[v]);return E};for(let v=0;v<c.length;v++){const E=c[v],A=Th[E],G=Object.entries(A);if(G.some(([B])=>typeof this[B]<"u")){o=A;for(let B=0;B<G.length;B++){const[V,q]=G[B],Z=f(V);if(typeof Z>"u")throw new Error("Missing parameter: "+V+".");this[q]=Z}break}}if(!o)throw new Error("No valid parameters provided for ob_tran projection.");const{lamp:g,phip:y}=H4(this,o);this.lamp=g,Math.abs(y)>re?(this.cphip=Math.cos(y),this.sphip=Math.sin(y),this.projectionType=bp.OBLIQUE):this.projectionType=bp.TRANSVERSE}function j4(e){return this.projectionType.forward(this,e)}function U4(e){return this.projectionType.inverse(this,e)}function H4(e,i){let o,c;if(i===Th.ROTATE){let f=e.oLongC,g=e.oLatC,y=e.oAlpha;if(Math.abs(Math.abs(g)-Kt)<=re)throw new Error("Invalid value for o_lat_c: "+e.o_lat_c+" should be < 90");c=f+Math.atan2(-1*Math.cos(y),-1*Math.sin(y)*Math.sin(g)),o=Math.asin(Math.cos(g)*Math.sin(y))}else if(i===Th.NEW_POLE)c=e.oLongP,o=e.oLatP;else{let f=e.oLong1,g=e.oLat1,y=e.oLong2,v=e.oLat2,E=Math.abs(g);if(Math.abs(g)>Kt-re)throw new Error("Invalid value for o_lat_1: "+e.o_lat_1+" should be < 90");if(Math.abs(v)>Kt-re)throw new Error("Invalid value for o_lat_2: "+e.o_lat_2+" should be < 90");if(Math.abs(g-v)<re)throw new Error("Invalid value for o_lat_1 and o_lat_2: o_lat_1 should be different from o_lat_2");if(E<re)throw new Error("Invalid value for o_lat_1: o_lat_1 should be different from zero");c=Math.atan2(Math.cos(g)*Math.sin(v)*Math.cos(f)-Math.sin(g)*Math.cos(v)*Math.cos(y),Math.sin(g)*Math.cos(v)*Math.sin(y)-Math.cos(g)*Math.sin(v)*Math.sin(f)),o=Math.atan(-1*Math.cos(c-f)/Math.tan(g))}return{lamp:c,phip:o}}function $4(e,i){let{x:o,y:c}=i;o+=e.long0;const f=Math.cos(o),g=Math.sin(c),y=Math.cos(c);i.x=le(Math.atan2(y*Math.sin(o),e.sphip*y*f+e.cphip*g)+e.lamp),i.y=Math.asin(e.sphip*g-e.cphip*y*f);const v=e.obliqueProjection.forward(i);return e.isIdentity&&(v.x*=Cr,v.y*=Cr),v}function V4(e,i){let{x:o,y:c}=i;o+=e.long0;const f=Math.cos(c),g=Math.cos(o);i.x=le(Math.atan2(f*Math.sin(o),Math.sin(c))+e.lamp),i.y=Math.asin(-1*f*g);const y=e.obliqueProjection.forward(i);return e.isIdentity&&(y.x*=Cr,y.y*=Cr),y}function W4(e,i){e.isIdentity&&(i.x*=Rn,i.y*=Rn);const o=e.obliqueProjection.inverse(i);let{x:c,y:f}=o;if(c<Number.MAX_VALUE){c-=e.lamp;const g=Math.cos(c),y=Math.sin(f),v=Math.cos(f);i.x=Math.atan2(v*Math.sin(c),e.sphip*v*g-e.cphip*y),i.y=Math.asin(e.sphip*y+e.cphip*v*g)}return i.x=le(i.x+e.long0),i}function Z4(e,i){e.isIdentity&&(i.x*=Rn,i.y*=Rn);const o=e.obliqueProjection.inverse(i);let{x:c,y:f}=o;if(c<Number.MAX_VALUE){const g=Math.cos(f);c-=e.lamp,i.x=Math.atan2(g*Math.sin(c),-1*Math.sin(f)),i.y=Math.asin(g*Math.cos(c))}return i.x=le(i.x+e.long0),i}var q4=["General Oblique Transformation","General_Oblique_Transformation","ob_tran"];const K4={init:z4,forward:j4,inverse:U4,names:q4};function J4(e){e.Proj.projections.add(vh),e.Proj.projections.add(xh),e.Proj.projections.add(Fy),e.Proj.projections.add(Zy),e.Proj.projections.add(Yy),e.Proj.projections.add(iv),e.Proj.projections.add(uv),e.Proj.projections.add(pv),e.Proj.projections.add(vv),e.Proj.projections.add(Lv),e.Proj.projections.add(Nv),e.Proj.projections.add(Hv),e.Proj.projections.add(qv),e.Proj.projections.add(t1),e.Proj.projections.add(s1),e.Proj.projections.add(h1),e.Proj.projections.add(g1),e.Proj.projections.add(x1),e.Proj.projections.add(b1),e.Proj.projections.add(B1),e.Proj.projections.add(D1),e.Proj.projections.add(j1),e.Proj.projections.add(q1),e.Proj.projections.add(Q1),e.Proj.projections.add(r4),e.Proj.projections.add(f4),e.Proj.projections.add(_4),e.Proj.projections.add(M4),e.Proj.projections.add(S4),e.Proj.projections.add(T4),e.Proj.projections.add(G4),e.Proj.projections.add(K4)}const jh=Object.assign(ey,{defaultDatum:"WGS84",Proj:hs,WGS84:new hs("WGS84"),Point:Gl,toPoint:v0,defs:Pi,nadgrid:N_,transform:kh,mgrs:ny,version:"__VERSION__"});J4(jh);var B0,Sp=()=>new DecompressionStream("deflate-raw");try{Sp(),B0=async e=>{let i=Sp(),o=i.writable.getWriter(),c=i.readable.getReader(),f,g=[],y=0,v=0,E;for(o.write(e),o.close();!(E=await c.read()).done;)f=E.value,g.push(f),y+=f.length;return!g[1]&&f||(f=new Uint8Array(y),g.map(A=>(f.set(A,v),v+=A.length))),f}}catch{}var X4=new TextDecoder,jc=e=>{throw new Error("but-unzip~"+e)},kp=e=>X4.decode(e);function*Y4(e,i=B0){let o=e.length-20,c=Math.max(o-65516,2);for(;(o=e.lastIndexOf(80,o-1))!==-1&&!(e[o+1]===75&&e[o+2]===5&&e[o+3]===6)&&o>c;);o===-1&&jc(2);let f=(A,G)=>e.subarray(o+=A,o+=G),g=new DataView(e.buffer,e.byteOffset),y=A=>g.getUint16(A+o,!0),v=A=>g.getUint32(A+o,!0),E=y(10);for(E!==y(8)&&jc(3),o=v(16);E--;){let A=y(10),G=y(30),P=y(32),B=v(20),V=v(42),q=kp(f(46,y(28))),Z=kp(f(G,P)),Y=o,ht;o=V,ht=f(30+y(26)+y(28),B),yield{filename:q,comment:Z,read:()=>A&8?i(ht):A?jc(1):ht},o=Y}}const Q4=/.+\.(shp|dbf|json|prj|cpg)$/i,t3=async e=>{const i={},o=[];for(const g of Y4(e))Q4.test(g.filename)&&o.push(Promise.resolve(g.read()).then(y=>i[g.filename]=y));await Promise.all(o);const c={},f=new TextDecoder;for(const[g,y]of Object.entries(i))g.slice(-3).toLowerCase()==="shp"||g.slice(-3).toLowerCase()==="dbf"?c[g]=new DataView(y.buffer,y.byteOffset,y.byteLength):c[g]=f.decode(y);return c},e3=globalThis.URL,n3=(e,i)=>{if(!i)return e;const o=new e3(e);return o.pathname=`${o.pathname}.${i}`,o.href};async function ku(e,i){const o=n3(e,i),c=i==="prj"||i==="cpg";try{const f=await fetch(o);if(f.status>399)throw new Error(f.statusText);if(c)return f.text();const g=await f.arrayBuffer();return new DataView(g)}catch(f){if(c||i==="dbf")return!1;throw f}}function i3(e){let i=0,o=1;const c=e.length;let f,g;const y=[e[0][0],e[0][1],e[0][0],e[0][1]];for(;o<c;)f=g||e[0],g=e[o],i+=(g[0]-f[0])*(g[1]+f[1]),o++,g[0]<y[0]&&(y[0]=g[0]),g[1]<y[1]&&(y[1]=g[1]),g[0]>y[2]&&(y[2]=g[0]),g[1]>y[3]&&(y[3]=g[1]);return{ring:e,clockWise:i>0,bbox:y,children:[]}}function Pp(e,i){return!(e.bbox[0]>i.bbox[0]||e.bbox[1]>i.bbox[1]||e.bbox[2]<i.bbox[2]||e.bbox[3]<i.bbox[3])}function T0(e,i=!1){const o=[],c=[];for(const y of e){const v=i3(y);v.clockWise!==i?o.push(v):c.push(v)}const f=[];for(const y of c){let v;for(const E of o)Pp(E,y)&&(v?Pp(v,E)&&(v=E):v=E);v?v.children.push(y.ring):f.push(y)}if(i)return{outers:o,orphens:f};if(f.length&&!i){const y=T0(e,!0);if(y.orphens.length===0){const v=[];for(const E of y.outers)v.push([E.ring.toReversed()].concat(E.children.map(A=>A.toReversed())));return v}}const g=[];for(const y of o)g.push([y.ring].concat(y.children));return g}$n.prototype.parsePoint=function(e){return{type:"Point",coordinates:this.parseCoord(e,0)}};$n.prototype.parseZPoint=function(e){const i=this.parsePoint(e);return i.coordinates.push(e.getFloat64(16,!0)),i};$n.prototype.parsePointArray=function(e,i,o){const c=[];let f=0;for(;f<o;)c.push(this.parseCoord(e,i)),i+=16,f++;return c};$n.prototype.parseZPointArray=function(e,i,o,c){let f=0;for(;f<o;)c[f].push(e.getFloat64(i,!0)),f++,i+=8;return c};$n.prototype.parseArrayGroup=function(e,i,o,c,f){const g=[];let y=0,v,E=0,A;for(;y<c;)y++,o+=4,v=E,y===c?E=f:E=e.getInt32(o,!0),A=E-v,A&&(g.push(this.parsePointArray(e,i,A)),i+=A<<4);return g};$n.prototype.parseZArrayGroup=function(e,i,o,c){let f=0;for(;f<o;)c[f]=this.parseZPointArray(e,i,c[f].length,c[f]),i+=c[f].length<<3,f++;return c};$n.prototype.parseMultiPoint=function(e){const i={},o=e.getInt32(32,!0);if(!o)return null;const c=this.parseCoord(e,0),f=this.parseCoord(e,16);i.bbox=[c[0],c[1],f[0],f[1]];const g=36;return o===1?(i.type="Point",i.coordinates=this.parseCoord(e,g)):(i.type="MultiPoint",i.coordinates=this.parsePointArray(e,g,o)),i};$n.prototype.parseZMultiPoint=function(e){const i=this.parseMultiPoint(e);if(!i)return null;let o;if(i.type==="Point")return i.coordinates.push(e.getFloat64(72,!0)),i;o=i.coordinates.length;const c=52+(o<<4);return i.coordinates=this.parseZPointArray(e,c,o,i.coordinates),i};$n.prototype.parsePolyline=function(e){const i={},o=e.getInt32(32,!0);if(!o)return null;const c=this.parseCoord(e,0),f=this.parseCoord(e,16);i.bbox=[c[0],c[1],f[0],f[1]];const g=e.getInt32(36,!0);let y,v;return o===1?(i.type="LineString",y=44,i.coordinates=this.parsePointArray(e,y,g)):(i.type="MultiLineString",y=40+(o<<2),v=40,i.coordinates=this.parseArrayGroup(e,y,v,o,g)),i};$n.prototype.parseZPolyline=function(e){const i=this.parsePolyline(e);if(!i)return null;const o=i.coordinates.length;let c;return i.type==="LineString"?(c=60+(o<<4),i.coordinates=this.parseZPointArray(e,c,o,i.coordinates),i):(c=56+(i.coordinates.reduce(function(g,y){return g+y.length},0)<<4)+(o<<2),i.coordinates=this.parseZArrayGroup(e,c,o,i.coordinates),i)};$n.prototype.polyFuncs=function(e){return e&&(e.type==="LineString"?(e.type="Polygon",e.coordinates=[e.coordinates],e):(e.coordinates=T0(e.coordinates),e.coordinates.length===1?(e.type="Polygon",e.coordinates=e.coordinates[0],e):(e.type="MultiPolygon",e)))};$n.prototype.parsePolygon=function(e){return this.polyFuncs(this.parsePolyline(e))};$n.prototype.parseZPolygon=function(e){return this.polyFuncs(this.parseZPolyline(e))};const Ap={1:"parsePoint",3:"parsePolyline",5:"parsePolygon",8:"parseMultiPoint",11:"parseZPoint",13:"parseZPolyline",15:"parseZPolygon",18:"parseZMultiPoint"};function r3(e){return e?function(i,o){const c=[i.getFloat64(o,!0),i.getFloat64(o+8,!0)];return e.inverse(c)}:function(i,o){return[i.getFloat64(o,!0),i.getFloat64(o+8,!0)]}}function $n(e,i){if(!(this instanceof $n))return new $n(e,i);this.buffer=e,this.headers=this.parseHeader(),this.shpFuncs(i),this.rows=this.getRows()}$n.prototype.shpFuncs=function(e){let i=this.headers.shpCode;if(i>20&&(i-=20),!(i in Ap))throw new Error(`I don't know shp type "${i}"`);this.parseFunc=this[Ap[i]],this.parseCoord=r3(e)};$n.prototype.getShpCode=function(){return this.parseHeader().shpCode};$n.prototype.parseHeader=function(){const e=this.buffer;return{length:e.getInt32(24)<<1,version:e.getInt32(28,!0),shpCode:e.getInt32(32,!0),bbox:[e.getFloat64(36,!0),e.getFloat64(44,!0),e.getFloat64(52,!0),e.getFloat64(60,!0)]}};$n.prototype.getRows=function(){let e=100;const i=this.buffer.byteLength-8,o=[];let c;for(;e<=i&&(c=this.getRow(e),!!c);)e+=8,e+=c.len,c.type?o.push(this.parseFunc(c.data)):o.push(null);return o};$n.prototype.getRow=function(e){const i=this.buffer.getInt32(e),o=this.buffer.getInt32(e+4)<<1;if(o===0)return{id:i,len:o,type:0};if(!(e+o+8>this.buffer.byteLength))return{id:i,len:o,data:new DataView(this.buffer.buffer,this.buffer.byteOffset+e+12,o-4),type:this.buffer.getInt32(e+8,!0)}};function xf(e,i){return new $n(e,i).rows}var s3=/^(?:ANSI\s)?(\d+)$/m;function R0(e,i){if(!e)return c;try{new TextDecoder(e.trim())}catch{var o=s3.exec(e);return o&&!i?R0("windows-"+o[1],!0):(e=void 0,c)}return c;function c(f){var g=new TextDecoder(e||void 0),y=g.decode(f,{stream:!0})+g.decode();return y.replace(/\0/g,"").trim()}}function o3(e){var i={};return i.lastUpdated=new Date(e.getUint8(1)+1900,e.getUint8(2),e.getUint8(3)),i.records=e.getUint32(4,!0),i.headerLen=e.getUint16(8,!0),i.recLen=e.getUint16(10,!0),i}function a3(e,i,o){for(var c=[],f=32;f<i&&(c.push({name:o(new Uint8Array(e.buffer.slice(e.byteOffset+f,e.byteOffset+f+11))),dataType:String.fromCharCode(e.getUint8(f+11)),len:e.getUint8(f+16),decimal:e.getUint8(f+17)}),e.getUint8(f+32)!==13);)f+=32;return c}function l3(e,i,o,c,f){const g=new Uint8Array(e.buffer.slice(e.byteOffset+i,e.byteOffset+i+o));var y=f(g);switch(c){case"N":case"F":case"O":return parseFloat(y,10);case"D":return new Date(y.slice(0,4),parseInt(y.slice(4,6),10)-1,y.slice(6,8));case"L":return y.toLowerCase()==="y"||y.toLowerCase()==="t";default:return y}}function u3(e,i,o,c){for(var f={},g=0,y=o.length,v,E;g<y;)E=o[g],v=l3(e,i,E.len,E.dataType,c),i+=E.len,typeof v<"u"&&(f[E.name]=v),g++;return f}function wf(e,i){for(var o=R0(i),c=o3(e),f=a3(e,c.headerLen-1,o),g=(f.length+1<<5)+2,y=c.recLen,v=c.records,E=[];v;)E.push(u3(e,g,f,o)),g+=y,v--;return E}const h3=globalThis.URL,c3=e=>{if(!e)throw new Error("forgot to pass buffer");if(zl(e))return new Uint8Array(e);if(zl(e.buffer))return e.BYTES_PER_ELEMENT===1?e:new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("invalid buffer like object")},f3=new TextDecoder,I0=e=>{if(e){if(typeof e=="string")return e;if(zl(e)||ArrayBuffer.isView(e)||Mf(e))return f3.decode(e)}},O0=e=>{if(!e)throw new Error("forgot to pass buffer");if(Mf(e))return e;if(zl(e))return new DataView(e);if(zl(e.buffer))return new DataView(e.buffer,e.byteOffset,e.byteLength);throw new Error("invalid buffer like object")};function zl(e){return e instanceof globalThis.ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]"}function Mf(e){return e instanceof globalThis.DataView||Object.prototype.toString.call(e)==="[object DataView]"}const Ef=function([e,i]){const o={};o.type="FeatureCollection",o.features=[];let c=0;const f=e.length;for(i||(i=[]);c<f;)o.features.push({type:"Feature",geometry:e[c],properties:i[c]||{}}),c++;return o},D0=async function(e,i){let o;e=c3(e);const c=await t3(e),f=[];i=i||[];for(o in c)o.indexOf("__MACOSX")===-1&&(o.slice(-4).toLowerCase()===".shp"?(f.push(o.slice(0,-4)),c[o.slice(0,-3)+o.slice(-3).toLowerCase()]=c[o]):o.slice(-4).toLowerCase()===".prj"?c[o.slice(0,-3)+o.slice(-3).toLowerCase()]=jh(c[o]):o.slice(-5).toLowerCase()===".json"||i.indexOf(o.split(".").pop())>-1?f.push(o.slice(0,-3)+o.slice(-3).toLowerCase()):(o.slice(-4).toLowerCase()===".dbf"||o.slice(-4).toLowerCase()===".cpg")&&(c[o.slice(0,-3)+o.slice(-3).toLowerCase()]=c[o]));if(!f.length)throw new Error("no layers founds");const g=f.map(function(y){let v,E;const A=y.lastIndexOf(".");return A>-1&&y.slice(A).indexOf("json")>-1?(v=JSON.parse(c[y]),v.fileName=y.slice(0,A)):i.indexOf(y.slice(A+1))>-1?(v=c[y],v.fileName=y):(c[y+".dbf"]&&(E=wf(c[y+".dbf"],c[y+".cpg"])),v=Ef([xf(c[y+".shp"],c[y+".prj"]),E]),v.fileName=y),v});return g.length===1?g[0]:g};async function d3(e,i){const o=await ku(e);return D0(o,i)}const p3=async e=>{const i=await Promise.all([ku(e,"shp"),ku(e,"prj")]);let o=!1;try{i[1]&&(o=jh(i[1]))}catch{o=!1}return xf(i[0],o)},g3=async e=>{const[i,o]=await Promise.all([ku(e,"dbf"),ku(e,"cpg")]);if(i)return wf(i,o)},Bp=(e,i)=>{var c;return new h3(e,(c=globalThis==null?void 0:globalThis.document)==null?void 0:c.location).pathname.slice(-4).toLowerCase()===i},m3=({shp:e,dbf:i,cpg:o,prj:c})=>{const f=[y3(e,c)];return i&&f.push(v3(i,o)),Ef(f)},_3=async function(e,i){if(typeof e!="string"){if(zl(e)||ArrayBuffer.isView(e)||Mf(e))return D0(e);if(e.shp)return m3(e);throw new TypeError("must be a string, some sort of Buffer, or an object with at least a .shp property")}if(Bp(e,".zip"))return d3(e,i);Bp(e,".shp")&&(e=e.slice(0,-4));const o=await Promise.all([p3(e),g3(e)]);return Ef(o)},y3=function(e,i){if(e=O0(e),i=I0(i),typeof i=="string")try{i=jh(i)}catch{i=!1}return xf(e,i)},v3=function(e,i){return e=O0(e),i=I0(i),wf(e,i)};function Rh(e){if(!e)throw new Error("Invalid GeoJSON: null or undefined");if(e.type==="FeatureCollection"){if(!Array.isArray(e.features))throw new Error("Invalid FeatureCollection: features must be an array");return e}if(e.type==="Feature")return{type:"FeatureCollection",features:[e]};if(e.type&&["Point","LineString","Polygon","MultiPoint","MultiLineString","MultiPolygon","GeometryCollection"].includes(e.type))return{type:"FeatureCollection",features:[{type:"Feature",geometry:e,properties:{}}]};throw new Error(`Unsupported GeoJSON type: ${e.type||"unknown"}`)}async function x3(e){const i=await e.text(),o=JSON.parse(i);return Rh(o)}async function w3(e){const i=await e.arrayBuffer(),o=await _3(i);return Array.isArray(o)?o.map(Rh):[Rh(o)]}async function M3(e){const i=await e.text(),c=new DOMParser().parseFromString(i,"text/xml");if(c.querySelector("parsererror"))throw new Error("Invalid KML file: XML parsing failed. Please ensure the file is a valid KML document.");const g=c.querySelectorAll("Placemark"),y=[];if(g.forEach(v=>{const E=v.querySelector("name"),A=v.querySelector("coordinates");if(A){const P=A.textContent.trim().split(/\s+/).map(B=>{const V=B.split(",");if(V.length<2)throw new Error("Invalid KML coordinates: each coordinate must have at least longitude and latitude");const[q,Z]=[Number(V[0]),Number(V[1])];if(isNaN(q)||isNaN(Z))throw new Error("Invalid KML coordinates: longitude and latitude must be numbers");return[q,Z]});if(P.length>=3){const B=[...P,P[0]];y.push({type:"Feature",geometry:{type:"Polygon",coordinates:[B]},properties:{name:(E==null?void 0:E.textContent)||"Unnamed"}})}}}),y.length===0)throw new Error("No valid polygon features found in KML file. KML must contain Placemark elements with at least 3 coordinates to form a polygon.");return{type:"FeatureCollection",features:y}}async function E3(e){const o=e.name.toLowerCase().split(".").pop();try{if(o==="geojson"||o==="json")return[await x3(e)];if(o==="zip")return await w3(e);if(o==="kml")return[await M3(e)];throw new Error(`Unsupported file type: .${o}`)}catch(c){throw new Error(`Failed to parse ${e.name}: ${c.message}`)}}function L3(e){if(!e||!e.features||e.features.length===0)return null;let i=1/0,o=-1/0,c=1/0,f=-1/0;const g=(y,v=!1)=>{if(Array.isArray(y[0]))y.forEach(E=>g(E,v));else if(y.length>=2){const[E,A]=y;i=Math.min(i,A),o=Math.max(o,A),c=Math.min(c,E),f=Math.max(f,E)}};return e.features.forEach(y=>{if(y.geometry){const{type:v,coordinates:E}=y.geometry;v==="Point"||v==="LineString"||v==="MultiPoint"?g(E):v==="Polygon"||v==="MultiLineString"?E.forEach(A=>g(A)):v==="MultiPolygon"&&E.forEach(A=>{A.forEach(G=>g(G))})}}),i===1/0?null:[[i,c],[o,f]]}function N0(e,i,o){o===void 0&&(o={});var c={type:"Feature"};return(o.id===0||o.id)&&(c.id=o.id),o.bbox&&(c.bbox=o.bbox),c.properties=i||{},c.geometry=e,c}function C3(e,i,o){o===void 0&&(o={});for(var c=0,f=e;c<f.length;c++){var g=f[c];if(g.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var y=0;y<g[g.length-1].length;y++)if(g[g.length-1][y]!==g[0][y])throw new Error("First and last Position are not equivalent.")}var v={type:"Polygon",coordinates:e};return N0(v,i,o)}function b3(e,i,o){o===void 0&&(o={});var c={type:"MultiPolygon",coordinates:e};return N0(c,i,o)}function S3(e,i){var o,c,f,g,y,v,E,A,G,P,B=0,V=e.type==="FeatureCollection",q=e.type==="Feature",Z=V?e.features.length:1;for(o=0;o<Z;o++){for(v=V?e.features[o].geometry:q?e.geometry:e,A=V?e.features[o].properties:q?e.properties:{},G=V?e.features[o].bbox:q?e.bbox:void 0,P=V?e.features[o].id:q?e.id:void 0,E=v?v.type==="GeometryCollection":!1,y=E?v.geometries.length:1,f=0;f<y;f++){if(g=E?v.geometries[f]:v,g===null){if(i(null,B,A,G,P)===!1)return!1;continue}switch(g.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(i(g,B,A,G,P)===!1)return!1;break}case"GeometryCollection":{for(c=0;c<g.geometries.length;c++)if(i(g.geometries[c],B,A,G,P)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}B++}}function k3(e,i,o){var c=o;return S3(e,function(f,g,y,v,E){g===0&&o===void 0?c=f:c=i(c,f,g,y,v,E)}),c}function Tp(e){return e.type==="Feature"?e.geometry:e}const zo=11102230246251565e-32,zi=134217729,P3=(3+8*zo)*zo;function Uc(e,i,o,c,f){let g,y,v,E,A=i[0],G=c[0],P=0,B=0;G>A==G>-A?(g=A,A=i[++P]):(g=G,G=c[++B]);let V=0;if(P<e&&B<o)for(G>A==G>-A?(y=A+g,v=g-(y-A),A=i[++P]):(y=G+g,v=g-(y-G),G=c[++B]),g=y,v!==0&&(f[V++]=v);P<e&&B<o;)G>A==G>-A?(y=g+A,E=y-g,v=g-(y-E)+(A-E),A=i[++P]):(y=g+G,E=y-g,v=g-(y-E)+(G-E),G=c[++B]),g=y,v!==0&&(f[V++]=v);for(;P<e;)y=g+A,E=y-g,v=g-(y-E)+(A-E),A=i[++P],g=y,v!==0&&(f[V++]=v);for(;B<o;)y=g+G,E=y-g,v=g-(y-E)+(G-E),G=c[++B],g=y,v!==0&&(f[V++]=v);return(g!==0||V===0)&&(f[V++]=g),V}function A3(e,i){let o=i[0];for(let c=1;c<e;c++)o+=i[c];return o}function Nu(e){return new Float64Array(e)}const B3=(3+16*zo)*zo,T3=(2+12*zo)*zo,R3=(9+64*zo)*zo*zo,Al=Nu(4),Rp=Nu(8),Ip=Nu(12),Op=Nu(16),Qi=Nu(4);function I3(e,i,o,c,f,g,y){let v,E,A,G,P,B,V,q,Z,Y,ht,lt,Pt,Ut,Ot,Gt,$t,Vt;const Qt=e-f,zt=o-f,te=i-g,ee=c-g;Ut=Qt*ee,B=zi*Qt,V=B-(B-Qt),q=Qt-V,B=zi*ee,Z=B-(B-ee),Y=ee-Z,Ot=q*Y-(Ut-V*Z-q*Z-V*Y),Gt=te*zt,B=zi*te,V=B-(B-te),q=te-V,B=zi*zt,Z=B-(B-zt),Y=zt-Z,$t=q*Y-(Gt-V*Z-q*Z-V*Y),ht=Ot-$t,P=Ot-ht,Al[0]=Ot-(ht+P)+(P-$t),lt=Ut+ht,P=lt-Ut,Pt=Ut-(lt-P)+(ht-P),ht=Pt-Gt,P=Pt-ht,Al[1]=Pt-(ht+P)+(P-Gt),Vt=lt+ht,P=Vt-lt,Al[2]=lt-(Vt-P)+(ht-P),Al[3]=Vt;let Fe=A3(4,Al),Ie=T3*y;if(Fe>=Ie||-Fe>=Ie||(P=e-Qt,v=e-(Qt+P)+(P-f),P=o-zt,A=o-(zt+P)+(P-f),P=i-te,E=i-(te+P)+(P-g),P=c-ee,G=c-(ee+P)+(P-g),v===0&&E===0&&A===0&&G===0)||(Ie=R3*y+P3*Math.abs(Fe),Fe+=Qt*G+ee*v-(te*A+zt*E),Fe>=Ie||-Fe>=Ie))return Fe;Ut=v*ee,B=zi*v,V=B-(B-v),q=v-V,B=zi*ee,Z=B-(B-ee),Y=ee-Z,Ot=q*Y-(Ut-V*Z-q*Z-V*Y),Gt=E*zt,B=zi*E,V=B-(B-E),q=E-V,B=zi*zt,Z=B-(B-zt),Y=zt-Z,$t=q*Y-(Gt-V*Z-q*Z-V*Y),ht=Ot-$t,P=Ot-ht,Qi[0]=Ot-(ht+P)+(P-$t),lt=Ut+ht,P=lt-Ut,Pt=Ut-(lt-P)+(ht-P),ht=Pt-Gt,P=Pt-ht,Qi[1]=Pt-(ht+P)+(P-Gt),Vt=lt+ht,P=Vt-lt,Qi[2]=lt-(Vt-P)+(ht-P),Qi[3]=Vt;const Mt=Uc(4,Al,4,Qi,Rp);Ut=Qt*G,B=zi*Qt,V=B-(B-Qt),q=Qt-V,B=zi*G,Z=B-(B-G),Y=G-Z,Ot=q*Y-(Ut-V*Z-q*Z-V*Y),Gt=te*A,B=zi*te,V=B-(B-te),q=te-V,B=zi*A,Z=B-(B-A),Y=A-Z,$t=q*Y-(Gt-V*Z-q*Z-V*Y),ht=Ot-$t,P=Ot-ht,Qi[0]=Ot-(ht+P)+(P-$t),lt=Ut+ht,P=lt-Ut,Pt=Ut-(lt-P)+(ht-P),ht=Pt-Gt,P=Pt-ht,Qi[1]=Pt-(ht+P)+(P-Gt),Vt=lt+ht,P=Vt-lt,Qi[2]=lt-(Vt-P)+(ht-P),Qi[3]=Vt;const At=Uc(Mt,Rp,4,Qi,Ip);Ut=v*G,B=zi*v,V=B-(B-v),q=v-V,B=zi*G,Z=B-(B-G),Y=G-Z,Ot=q*Y-(Ut-V*Z-q*Z-V*Y),Gt=E*A,B=zi*E,V=B-(B-E),q=E-V,B=zi*A,Z=B-(B-A),Y=A-Z,$t=q*Y-(Gt-V*Z-q*Z-V*Y),ht=Ot-$t,P=Ot-ht,Qi[0]=Ot-(ht+P)+(P-$t),lt=Ut+ht,P=lt-Ut,Pt=Ut-(lt-P)+(ht-P),ht=Pt-Gt,P=Pt-ht,Qi[1]=Pt-(ht+P)+(P-Gt),Vt=lt+ht,P=Vt-lt,Qi[2]=lt-(Vt-P)+(ht-P),Qi[3]=Vt;const mt=Uc(At,Ip,4,Qi,Op);return Op[mt-1]}function O3(e,i,o,c,f,g){const y=(i-g)*(o-f),v=(e-f)*(c-g),E=y-v,A=Math.abs(y+v);return Math.abs(E)>=B3*A?E:-I3(e,i,o,c,f,g,A)}var Dp=6378137;function D3(e){return k3(e,function(i,o){return i+N3(o)},0)}function N3(e){var i=0,o;switch(e.type){case"Polygon":return Np(e.coordinates);case"MultiPolygon":for(o=0;o<e.coordinates.length;o++)i+=Np(e.coordinates[o]);return i;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function Np(e){var i=0;if(e&&e.length>0){i+=Math.abs(Fp(e[0]));for(var o=1;o<e.length;o++)i-=Math.abs(Fp(e[o]))}return i}function Fp(e){var i,o,c,f,g,y,v,E=0,A=e.length;if(A>2){for(v=0;v<A;v++)v===A-2?(f=A-2,g=A-1,y=0):v===A-1?(f=A-1,g=0,y=1):(f=v,g=v+1,y=v+2),i=e[f],o=e[g],c=e[y],E+=(Hc(c[0])-Hc(i[0]))*Math.sin(Hc(o[1]));E=E*Dp*Dp/2}return E}function Hc(e){return e*Math.PI/180}class Ia{constructor(i,o){this.next=null,this.key=i,this.data=o,this.left=null,this.right=null}}function F3(e,i){return e>i?1:e<i?-1:0}function Sa(e,i,o){const c=new Ia(null,null);let f=c,g=c;for(;;){const y=o(e,i.key);if(y<0){if(i.left===null)break;if(o(e,i.left.key)<0){const v=i.left;if(i.left=v.right,v.right=i,i=v,i.left===null)break}g.left=i,g=i,i=i.left}else if(y>0){if(i.right===null)break;if(o(e,i.right.key)>0){const v=i.right;if(i.right=v.left,v.left=i,i=v,i.right===null)break}f.right=i,f=i,i=i.right}else break}return f.right=i.left,g.left=i.right,i.left=c.right,i.right=c.left,i}function $c(e,i,o,c){const f=new Ia(e,i);if(o===null)return f.left=f.right=null,f;o=Sa(e,o,c);const g=c(e,o.key);return g<0?(f.left=o.left,f.right=o,o.left=null):g>=0&&(f.right=o.right,f.left=o,o.right=null),f}function Gp(e,i,o){let c=null,f=null;if(i){i=Sa(e,i,o);const g=o(i.key,e);g===0?(c=i.left,f=i.right):g<0?(f=i.right,i.right=null,c=i):(c=i.left,i.left=null,f=i)}return{left:c,right:f}}function G3(e,i,o){return i===null?e:(e===null||(i=Sa(e.key,i,o),i.left=e),i)}function ef(e,i,o,c,f){if(e){c(`${i}${o?" ":" "}${f(e)}
`);const g=i+(o?"    ":"   ");e.left&&ef(e.left,g,!1,c,f),e.right&&ef(e.right,g,!0,c,f)}}class Lf{constructor(i=F3){this._root=null,this._size=0,this._comparator=i}insert(i,o){return this._size++,this._root=$c(i,o,this._root,this._comparator)}add(i,o){const c=new Ia(i,o);this._root===null&&(c.left=c.right=null,this._size++,this._root=c);const f=this._comparator,g=Sa(i,this._root,f),y=f(i,g.key);return y===0?this._root=g:(y<0?(c.left=g.left,c.right=g,g.left=null):y>0&&(c.right=g.right,c.left=g,g.right=null),this._size++,this._root=c),this._root}remove(i){this._root=this._remove(i,this._root,this._comparator)}_remove(i,o,c){let f;return o===null?null:(o=Sa(i,o,c),c(i,o.key)===0?(o.left===null?f=o.right:(f=Sa(i,o.left,c),f.right=o.right),this._size--,f):o)}pop(){let i=this._root;if(i){for(;i.left;)i=i.left;return this._root=Sa(i.key,this._root,this._comparator),this._root=this._remove(i.key,this._root,this._comparator),{key:i.key,data:i.data}}return null}findStatic(i){let o=this._root;const c=this._comparator;for(;o;){const f=c(i,o.key);if(f===0)return o;f<0?o=o.left:o=o.right}return null}find(i){return this._root&&(this._root=Sa(i,this._root,this._comparator),this._comparator(i,this._root.key)!==0)?null:this._root}contains(i){let o=this._root;const c=this._comparator;for(;o;){const f=c(i,o.key);if(f===0)return!0;f<0?o=o.left:o=o.right}return!1}forEach(i,o){let c=this._root;const f=[];let g=!1;for(;!g;)c!==null?(f.push(c),c=c.left):f.length!==0?(c=f.pop(),i.call(o,c),c=c.right):g=!0;return this}range(i,o,c,f){const g=[],y=this._comparator;let v=this._root,E;for(;g.length!==0||v;)if(v)g.push(v),v=v.left;else{if(v=g.pop(),E=y(v.key,o),E>0)break;if(y(v.key,i)>=0&&c.call(f,v))return this;v=v.right}return this}keys(){const i=[];return this.forEach(({key:o})=>{i.push(o)}),i}values(){const i=[];return this.forEach(({data:o})=>{i.push(o)}),i}min(){return this._root?this.minNode(this._root).key:null}max(){return this._root?this.maxNode(this._root).key:null}minNode(i=this._root){if(i)for(;i.left;)i=i.left;return i}maxNode(i=this._root){if(i)for(;i.right;)i=i.right;return i}at(i){let o=this._root,c=!1,f=0;const g=[];for(;!c;)if(o)g.push(o),o=o.left;else if(g.length>0){if(o=g.pop(),f===i)return o;f++,o=o.right}else c=!0;return null}next(i){let o=this._root,c=null;if(i.right){for(c=i.right;c.left;)c=c.left;return c}const f=this._comparator;for(;o;){const g=f(i.key,o.key);if(g===0)break;g<0?(c=o,o=o.left):o=o.right}return c}prev(i){let o=this._root,c=null;if(i.left!==null){for(c=i.left;c.right;)c=c.right;return c}const f=this._comparator;for(;o;){const g=f(i.key,o.key);if(g===0)break;g<0?o=o.left:(c=o,o=o.right)}return c}clear(){return this._root=null,this._size=0,this}toList(){return j3(this._root)}load(i,o=[],c=!1){let f=i.length;const g=this._comparator;if(c&&sf(i,o,0,f-1,g),this._root===null)this._root=nf(i,o,0,f),this._size=f;else{const y=U3(this.toList(),z3(i,o),g);f=this._size+f,this._root=rf({head:y},0,f)}return this}isEmpty(){return this._root===null}get size(){return this._size}get root(){return this._root}toString(i=o=>String(o.key)){const o=[];return ef(this._root,"",!0,c=>o.push(c),i),o.join("")}update(i,o,c){const f=this._comparator;let{left:g,right:y}=Gp(i,this._root,f);f(i,o)<0?y=$c(o,c,y,f):g=$c(o,c,g,f),this._root=G3(g,y,f)}split(i){return Gp(i,this._root,this._comparator)}*[Symbol.iterator](){let i=this._root;const o=[];let c=!1;for(;!c;)i!==null?(o.push(i),i=i.left):o.length!==0?(i=o.pop(),yield i,i=i.right):c=!0}}function nf(e,i,o,c){const f=c-o;if(f>0){const g=o+Math.floor(f/2),y=e[g],v=i[g],E=new Ia(y,v);return E.left=nf(e,i,o,g),E.right=nf(e,i,g+1,c),E}return null}function z3(e,i){const o=new Ia(null,null);let c=o;for(let f=0;f<e.length;f++)c=c.next=new Ia(e[f],i[f]);return c.next=null,o.next}function j3(e){let i=e;const o=[];let c=!1;const f=new Ia(null,null);let g=f;for(;!c;)i?(o.push(i),i=i.left):o.length>0?(i=g=g.next=o.pop(),i=i.right):c=!0;return g.next=null,f.next}function rf(e,i,o){const c=o-i;if(c>0){const f=i+Math.floor(c/2),g=rf(e,i,f),y=e.head;return y.left=g,e.head=e.head.next,y.right=rf(e,f+1,o),y}return null}function U3(e,i,o){const c=new Ia(null,null);let f=c,g=e,y=i;for(;g!==null&&y!==null;)o(g.key,y.key)<0?(f.next=g,g=g.next):(f.next=y,y=y.next),f=f.next;return g!==null?f.next=g:y!==null&&(f.next=y),c.next}function sf(e,i,o,c,f){if(o>=c)return;const g=e[o+c>>1];let y=o-1,v=c+1;for(;;){do y++;while(f(e[y],g)<0);do v--;while(f(e[v],g)>0);if(y>=v)break;let E=e[y];e[y]=e[v],e[v]=E,E=i[y],i[y]=i[v],i[v]=E}sf(e,i,o,v,f),sf(e,i,v+1,c,f)}var F0={};const fu=(e,i)=>e.ll.x<=i.x&&i.x<=e.ur.x&&e.ll.y<=i.y&&i.y<=e.ur.y,of=(e,i)=>{if(i.ur.x<e.ll.x||e.ur.x<i.ll.x||i.ur.y<e.ll.y||e.ur.y<i.ll.y)return null;const o=e.ll.x<i.ll.x?i.ll.x:e.ll.x,c=e.ur.x<i.ur.x?e.ur.x:i.ur.x,f=e.ll.y<i.ll.y?i.ll.y:e.ll.y,g=e.ur.y<i.ur.y?e.ur.y:i.ur.y;return{ll:{x:o,y:f},ur:{x:c,y:g}}};let Pa=Number.EPSILON;Pa===void 0&&(Pa=Math.pow(2,-52));const H3=Pa*Pa,zp=(e,i)=>{if(-Pa<e&&e<Pa&&-Pa<i&&i<Pa)return 0;const o=e-i;return o*o<H3*e*i?0:e<i?-1:1};class $3{constructor(){this.reset()}reset(){this.xRounder=new jp,this.yRounder=new jp}round(i,o){return{x:this.xRounder.round(i),y:this.yRounder.round(o)}}}class jp{constructor(){this.tree=new Lf,this.round(0)}round(i){const o=this.tree.add(i),c=this.tree.prev(o);if(c!==null&&zp(o.key,c.key)===0)return this.tree.remove(i),c.key;const f=this.tree.next(o);return f!==null&&zp(o.key,f.key)===0?(this.tree.remove(i),f.key):i}}const Pu=new $3,Mh=(e,i)=>e.x*i.y-e.y*i.x,G0=(e,i)=>e.x*i.x+e.y*i.y,Up=(e,i,o)=>{const c=O3(e.x,e.y,i.x,i.y,o.x,o.y);return c>0?-1:c<0?1:0},Ih=e=>Math.sqrt(G0(e,e)),V3=(e,i,o)=>{const c={x:i.x-e.x,y:i.y-e.y},f={x:o.x-e.x,y:o.y-e.y};return Mh(f,c)/Ih(f)/Ih(c)},W3=(e,i,o)=>{const c={x:i.x-e.x,y:i.y-e.y},f={x:o.x-e.x,y:o.y-e.y};return G0(f,c)/Ih(f)/Ih(c)},Hp=(e,i,o)=>i.y===0?null:{x:e.x+i.x/i.y*(o-e.y),y:o},$p=(e,i,o)=>i.x===0?null:{x:o,y:e.y+i.y/i.x*(o-e.x)},Z3=(e,i,o,c)=>{if(i.x===0)return $p(o,c,e.x);if(c.x===0)return $p(e,i,o.x);if(i.y===0)return Hp(o,c,e.y);if(c.y===0)return Hp(e,i,o.y);const f=Mh(i,c);if(f==0)return null;const g={x:o.x-e.x,y:o.y-e.y},y=Mh(g,i)/f,v=Mh(g,c)/f,E=e.x+v*i.x,A=o.x+y*c.x,G=e.y+v*i.y,P=o.y+y*c.y,B=(E+A)/2,V=(G+P)/2;return{x:B,y:V}};class ls{static compare(i,o){const c=ls.comparePoints(i.point,o.point);return c!==0?c:(i.point!==o.point&&i.link(o),i.isLeft!==o.isLeft?i.isLeft?1:-1:Ba.compare(i.segment,o.segment))}static comparePoints(i,o){return i.x<o.x?-1:i.x>o.x?1:i.y<o.y?-1:i.y>o.y?1:0}constructor(i,o){i.events===void 0?i.events=[this]:i.events.push(this),this.point=i,this.isLeft=o}link(i){if(i.point===this.point)throw new Error("Tried to link already linked events");const o=i.point.events;for(let c=0,f=o.length;c<f;c++){const g=o[c];this.point.events.push(g),g.point=this.point}this.checkForConsuming()}checkForConsuming(){const i=this.point.events.length;for(let o=0;o<i;o++){const c=this.point.events[o];if(c.segment.consumedBy===void 0)for(let f=o+1;f<i;f++){const g=this.point.events[f];g.consumedBy===void 0&&c.otherSE.point.events===g.otherSE.point.events&&c.segment.consume(g.segment)}}}getAvailableLinkedEvents(){const i=[];for(let o=0,c=this.point.events.length;o<c;o++){const f=this.point.events[o];f!==this&&!f.segment.ringOut&&f.segment.isInResult()&&i.push(f)}return i}getLeftmostComparator(i){const o=new Map,c=f=>{const g=f.otherSE;o.set(f,{sine:V3(this.point,i.point,g.point),cosine:W3(this.point,i.point,g.point)})};return(f,g)=>{o.has(f)||c(f),o.has(g)||c(g);const{sine:y,cosine:v}=o.get(f),{sine:E,cosine:A}=o.get(g);return y>=0&&E>=0?v<A?1:v>A?-1:0:y<0&&E<0?v<A?-1:v>A?1:0:E<y?-1:E>y?1:0}}}let q3=0;class Ba{static compare(i,o){const c=i.leftSE.point.x,f=o.leftSE.point.x,g=i.rightSE.point.x,y=o.rightSE.point.x;if(y<c)return 1;if(g<f)return-1;const v=i.leftSE.point.y,E=o.leftSE.point.y,A=i.rightSE.point.y,G=o.rightSE.point.y;if(c<f){if(E<v&&E<A)return 1;if(E>v&&E>A)return-1;const P=i.comparePoint(o.leftSE.point);if(P<0)return 1;if(P>0)return-1;const B=o.comparePoint(i.rightSE.point);return B!==0?B:-1}if(c>f){if(v<E&&v<G)return-1;if(v>E&&v>G)return 1;const P=o.comparePoint(i.leftSE.point);if(P!==0)return P;const B=i.comparePoint(o.rightSE.point);return B<0?1:B>0?-1:1}if(v<E)return-1;if(v>E)return 1;if(g<y){const P=o.comparePoint(i.rightSE.point);if(P!==0)return P}if(g>y){const P=i.comparePoint(o.rightSE.point);if(P<0)return 1;if(P>0)return-1}if(g!==y){const P=A-v,B=g-c,V=G-E,q=y-f;if(P>B&&V<q)return 1;if(P<B&&V>q)return-1}return g>y?1:g<y||A<G?-1:A>G?1:i.id<o.id?-1:i.id>o.id?1:0}constructor(i,o,c,f){this.id=++q3,this.leftSE=i,i.segment=this,i.otherSE=o,this.rightSE=o,o.segment=this,o.otherSE=i,this.rings=c,this.windings=f}static fromRing(i,o,c){let f,g,y;const v=ls.comparePoints(i,o);if(v<0)f=i,g=o,y=1;else if(v>0)f=o,g=i,y=-1;else throw new Error(`Tried to create degenerate segment at [${i.x}, ${i.y}]`);const E=new ls(f,!0),A=new ls(g,!1);return new Ba(E,A,[c],[y])}replaceRightSE(i){this.rightSE=i,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const i=this.leftSE.point.y,o=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:i<o?i:o},ur:{x:this.rightSE.point.x,y:i>o?i:o}}}vector(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}isAnEndpoint(i){return i.x===this.leftSE.point.x&&i.y===this.leftSE.point.y||i.x===this.rightSE.point.x&&i.y===this.rightSE.point.y}comparePoint(i){if(this.isAnEndpoint(i))return 0;const o=this.leftSE.point,c=this.rightSE.point,f=this.vector();if(o.x===c.x)return i.x===o.x?0:i.x<o.x?1:-1;const g=(i.y-o.y)/f.y,y=o.x+g*f.x;if(i.x===y)return 0;const v=(i.x-o.x)/f.x,E=o.y+v*f.y;return i.y===E?0:i.y<E?-1:1}getIntersection(i){const o=this.bbox(),c=i.bbox(),f=of(o,c);if(f===null)return null;const g=this.leftSE.point,y=this.rightSE.point,v=i.leftSE.point,E=i.rightSE.point,A=fu(o,v)&&this.comparePoint(v)===0,G=fu(c,g)&&i.comparePoint(g)===0,P=fu(o,E)&&this.comparePoint(E)===0,B=fu(c,y)&&i.comparePoint(y)===0;if(G&&A)return B&&!P?y:!B&&P?E:null;if(G)return P&&g.x===E.x&&g.y===E.y?null:g;if(A)return B&&y.x===v.x&&y.y===v.y?null:v;if(B&&P)return null;if(B)return y;if(P)return E;const V=Z3(g,this.vector(),v,i.vector());return V===null||!fu(f,V)?null:Pu.round(V.x,V.y)}split(i){const o=[],c=i.events!==void 0,f=new ls(i,!0),g=new ls(i,!1),y=this.rightSE;this.replaceRightSE(g),o.push(g),o.push(f);const v=new Ba(f,y,this.rings.slice(),this.windings.slice());return ls.comparePoints(v.leftSE.point,v.rightSE.point)>0&&v.swapEvents(),ls.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),c&&(f.checkForConsuming(),g.checkForConsuming()),o}swapEvents(){const i=this.rightSE;this.rightSE=this.leftSE,this.leftSE=i,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let o=0,c=this.windings.length;o<c;o++)this.windings[o]*=-1}consume(i){let o=this,c=i;for(;o.consumedBy;)o=o.consumedBy;for(;c.consumedBy;)c=c.consumedBy;const f=Ba.compare(o,c);if(f!==0){if(f>0){const g=o;o=c,c=g}if(o.prev===c){const g=o;o=c,c=g}for(let g=0,y=c.rings.length;g<y;g++){const v=c.rings[g],E=c.windings[g],A=o.rings.indexOf(v);A===-1?(o.rings.push(v),o.windings.push(E)):o.windings[A]+=E}c.rings=null,c.windings=null,c.consumedBy=o,c.leftSE.consumedBy=o.leftSE,c.rightSE.consumedBy=o.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const i=this.prev.consumedBy||this.prev;this._beforeState=i.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const i=this.beforeState();this._afterState={rings:i.rings.slice(0),windings:i.windings.slice(0),multiPolys:[]};const o=this._afterState.rings,c=this._afterState.windings,f=this._afterState.multiPolys;for(let v=0,E=this.rings.length;v<E;v++){const A=this.rings[v],G=this.windings[v],P=o.indexOf(A);P===-1?(o.push(A),c.push(G)):c[P]+=G}const g=[],y=[];for(let v=0,E=o.length;v<E;v++){if(c[v]===0)continue;const A=o[v],G=A.poly;if(y.indexOf(G)===-1)if(A.isExterior)g.push(G);else{y.indexOf(G)===-1&&y.push(G);const P=g.indexOf(A.poly);P!==-1&&g.splice(P,1)}}for(let v=0,E=g.length;v<E;v++){const A=g[v].multiPoly;f.indexOf(A)===-1&&f.push(A)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const i=this.beforeState().multiPolys,o=this.afterState().multiPolys;switch(Gs.type){case"union":{const c=i.length===0,f=o.length===0;this._isInResult=c!==f;break}case"intersection":{let c,f;i.length<o.length?(c=i.length,f=o.length):(c=o.length,f=i.length),this._isInResult=f===Gs.numMultiPolys&&c<f;break}case"xor":{const c=Math.abs(i.length-o.length);this._isInResult=c%2===1;break}case"difference":{const c=f=>f.length===1&&f[0].isSubject;this._isInResult=c(i)!==c(o);break}default:throw new Error(`Unrecognized operation type found ${Gs.type}`)}return this._isInResult}}class Vp{constructor(i,o,c){if(!Array.isArray(i)||i.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=o,this.isExterior=c,this.segments=[],typeof i[0][0]!="number"||typeof i[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const f=Pu.round(i[0][0],i[0][1]);this.bbox={ll:{x:f.x,y:f.y},ur:{x:f.x,y:f.y}};let g=f;for(let y=1,v=i.length;y<v;y++){if(typeof i[y][0]!="number"||typeof i[y][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let E=Pu.round(i[y][0],i[y][1]);E.x===g.x&&E.y===g.y||(this.segments.push(Ba.fromRing(g,E,this)),E.x<this.bbox.ll.x&&(this.bbox.ll.x=E.x),E.y<this.bbox.ll.y&&(this.bbox.ll.y=E.y),E.x>this.bbox.ur.x&&(this.bbox.ur.x=E.x),E.y>this.bbox.ur.y&&(this.bbox.ur.y=E.y),g=E)}(f.x!==g.x||f.y!==g.y)&&this.segments.push(Ba.fromRing(g,f,this))}getSweepEvents(){const i=[];for(let o=0,c=this.segments.length;o<c;o++){const f=this.segments[o];i.push(f.leftSE),i.push(f.rightSE)}return i}}class K3{constructor(i,o){if(!Array.isArray(i))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Vp(i[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let c=1,f=i.length;c<f;c++){const g=new Vp(i[c],this,!1);g.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=g.bbox.ll.x),g.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=g.bbox.ll.y),g.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=g.bbox.ur.x),g.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=g.bbox.ur.y),this.interiorRings.push(g)}this.multiPoly=o}getSweepEvents(){const i=this.exteriorRing.getSweepEvents();for(let o=0,c=this.interiorRings.length;o<c;o++){const f=this.interiorRings[o].getSweepEvents();for(let g=0,y=f.length;g<y;g++)i.push(f[g])}return i}}class Wp{constructor(i,o){if(!Array.isArray(i))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof i[0][0][0]=="number"&&(i=[i])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(let c=0,f=i.length;c<f;c++){const g=new K3(i[c],this);g.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=g.bbox.ll.x),g.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=g.bbox.ll.y),g.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=g.bbox.ur.x),g.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=g.bbox.ur.y),this.polys.push(g)}this.isSubject=o}getSweepEvents(){const i=[];for(let o=0,c=this.polys.length;o<c;o++){const f=this.polys[o].getSweepEvents();for(let g=0,y=f.length;g<y;g++)i.push(f[g])}return i}}class Oh{static factory(i){const o=[];for(let c=0,f=i.length;c<f;c++){const g=i[c];if(!g.isInResult()||g.ringOut)continue;let y=null,v=g.leftSE,E=g.rightSE;const A=[v],G=v.point,P=[];for(;y=v,v=E,A.push(v),v.point!==G;)for(;;){const B=v.getAvailableLinkedEvents();if(B.length===0){const Z=A[0].point,Y=A[A.length-1].point;throw new Error(`Unable to complete output ring starting at [${Z.x}, ${Z.y}]. Last matching segment found ends at [${Y.x}, ${Y.y}].`)}if(B.length===1){E=B[0].otherSE;break}let V=null;for(let Z=0,Y=P.length;Z<Y;Z++)if(P[Z].point===v.point){V=Z;break}if(V!==null){const Z=P.splice(V)[0],Y=A.splice(Z.index);Y.unshift(Y[0].otherSE),o.push(new Oh(Y.reverse()));continue}P.push({index:A.length,point:v.point});const q=v.getLeftmostComparator(y);E=B.sort(q)[0].otherSE;break}o.push(new Oh(A))}return o}constructor(i){this.events=i;for(let o=0,c=i.length;o<c;o++)i[o].segment.ringOut=this;this.poly=null}getGeom(){let i=this.events[0].point;const o=[i];for(let A=1,G=this.events.length-1;A<G;A++){const P=this.events[A].point,B=this.events[A+1].point;Up(P,i,B)!==0&&(o.push(P),i=P)}if(o.length===1)return null;const c=o[0],f=o[1];Up(c,i,f)===0&&o.shift(),o.push(o[0]);const g=this.isExteriorRing()?1:-1,y=this.isExteriorRing()?0:o.length-1,v=this.isExteriorRing()?o.length:-1,E=[];for(let A=y;A!=v;A+=g)E.push([o[A].x,o[A].y]);return E}isExteriorRing(){if(this._isExteriorRing===void 0){const i=this.enclosingRing();this._isExteriorRing=i?!i.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){let i=this.events[0];for(let f=1,g=this.events.length;f<g;f++){const y=this.events[f];ls.compare(i,y)>0&&(i=y)}let o=i.segment.prevInResult(),c=o?o.prevInResult():null;for(;;){if(!o)return null;if(!c)return o.ringOut;if(c.ringOut!==o.ringOut)return c.ringOut.enclosingRing()!==o.ringOut?o.ringOut:o.ringOut.enclosingRing();o=c.prevInResult(),c=o?o.prevInResult():null}}}class Zp{constructor(i){this.exteriorRing=i,i.poly=this,this.interiorRings=[]}addInterior(i){this.interiorRings.push(i),i.poly=this}getGeom(){const i=[this.exteriorRing.getGeom()];if(i[0]===null)return null;for(let o=0,c=this.interiorRings.length;o<c;o++){const f=this.interiorRings[o].getGeom();f!==null&&i.push(f)}return i}}class J3{constructor(i){this.rings=i,this.polys=this._composePolys(i)}getGeom(){const i=[];for(let o=0,c=this.polys.length;o<c;o++){const f=this.polys[o].getGeom();f!==null&&i.push(f)}return i}_composePolys(i){const o=[];for(let c=0,f=i.length;c<f;c++){const g=i[c];if(!g.poly)if(g.isExteriorRing())o.push(new Zp(g));else{const y=g.enclosingRing();y.poly||o.push(new Zp(y)),y.poly.addInterior(g)}}return o}}class X3{constructor(i){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ba.compare;this.queue=i,this.tree=new Lf(o),this.segments=[]}process(i){const o=i.segment,c=[];if(i.consumedBy)return i.isLeft?this.queue.remove(i.otherSE):this.tree.remove(o),c;const f=i.isLeft?this.tree.add(o):this.tree.find(o);if(!f)throw new Error(`Unable to find segment #${o.id} [${o.leftSE.point.x}, ${o.leftSE.point.y}] -> [${o.rightSE.point.x}, ${o.rightSE.point.y}] in SweepLine tree.`);let g=f,y=f,v,E;for(;v===void 0;)g=this.tree.prev(g),g===null?v=null:g.key.consumedBy===void 0&&(v=g.key);for(;E===void 0;)y=this.tree.next(y),y===null?E=null:y.key.consumedBy===void 0&&(E=y.key);if(i.isLeft){let A=null;if(v){const P=v.getIntersection(o);if(P!==null&&(o.isAnEndpoint(P)||(A=P),!v.isAnEndpoint(P))){const B=this._splitSafely(v,P);for(let V=0,q=B.length;V<q;V++)c.push(B[V])}}let G=null;if(E){const P=E.getIntersection(o);if(P!==null&&(o.isAnEndpoint(P)||(G=P),!E.isAnEndpoint(P))){const B=this._splitSafely(E,P);for(let V=0,q=B.length;V<q;V++)c.push(B[V])}}if(A!==null||G!==null){let P=null;A===null?P=G:G===null?P=A:P=ls.comparePoints(A,G)<=0?A:G,this.queue.remove(o.rightSE),c.push(o.rightSE);const B=o.split(P);for(let V=0,q=B.length;V<q;V++)c.push(B[V])}c.length>0?(this.tree.remove(o),c.push(i)):(this.segments.push(o),o.prev=v)}else{if(v&&E){const A=v.getIntersection(E);if(A!==null){if(!v.isAnEndpoint(A)){const G=this._splitSafely(v,A);for(let P=0,B=G.length;P<B;P++)c.push(G[P])}if(!E.isAnEndpoint(A)){const G=this._splitSafely(E,A);for(let P=0,B=G.length;P<B;P++)c.push(G[P])}}}this.tree.remove(o)}return c}_splitSafely(i,o){this.tree.remove(i);const c=i.rightSE;this.queue.remove(c);const f=i.split(o);return f.push(c),i.consumedBy===void 0&&this.tree.add(i),f}}const qp=typeof process<"u"&&F0.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Y3=typeof process<"u"&&F0.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6;class Q3{run(i,o,c){Gs.type=i,Pu.reset();const f=[new Wp(o,!0)];for(let P=0,B=c.length;P<B;P++)f.push(new Wp(c[P],!1));if(Gs.numMultiPolys=f.length,Gs.type==="difference"){const P=f[0];let B=1;for(;B<f.length;)of(f[B].bbox,P.bbox)!==null?B++:f.splice(B,1)}if(Gs.type==="intersection")for(let P=0,B=f.length;P<B;P++){const V=f[P];for(let q=P+1,Z=f.length;q<Z;q++)if(of(V.bbox,f[q].bbox)===null)return[]}const g=new Lf(ls.compare);for(let P=0,B=f.length;P<B;P++){const V=f[P].getSweepEvents();for(let q=0,Z=V.length;q<Z;q++)if(g.insert(V[q]),g.size>qp)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big).")}const y=new X3(g);let v=g.size,E=g.pop();for(;E;){const P=E.key;if(g.size===v){const V=P.segment;throw new Error(`Unable to pop() ${P.isLeft?"left":"right"} SweepEvent [${P.point.x}, ${P.point.y}] from segment #${V.id} [${V.leftSE.point.x}, ${V.leftSE.point.y}] -> [${V.rightSE.point.x}, ${V.rightSE.point.y}] from queue.`)}if(g.size>qp)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big).");if(y.segments.length>Y3)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments).");const B=y.process(P);for(let V=0,q=B.length;V<q;V++){const Z=B[V];Z.consumedBy===void 0&&g.insert(Z)}v=g.size,E=g.pop()}Pu.reset();const A=Oh.factory(y.segments);return new J3(A).getGeom()}}const Gs=new Q3,tx=function(e){for(var i=arguments.length,o=new Array(i>1?i-1:0),c=1;c<i;c++)o[c-1]=arguments[c];return Gs.run("union",e,o)},ex=function(e){for(var i=arguments.length,o=new Array(i>1?i-1:0),c=1;c<i;c++)o[c-1]=arguments[c];return Gs.run("intersection",e,o)},nx=function(e){for(var i=arguments.length,o=new Array(i>1?i-1:0),c=1;c<i;c++)o[c-1]=arguments[c];return Gs.run("xor",e,o)},ix=function(e){for(var i=arguments.length,o=new Array(i>1?i-1:0),c=1;c<i;c++)o[c-1]=arguments[c];return Gs.run("difference",e,o)};var rx={union:tx,intersection:ex,xor:nx,difference:ix};function sx(e,i,o){o===void 0&&(o={});var c=Tp(e),f=Tp(i),g=rx.intersection(c.coordinates,f.coordinates);return g.length===0?null:g.length===1?C3(g[0],o.properties):b3(g,o.properties)}function ox(e){return Gh({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M332.8 320h38.4c6.4 0 12.8-6.4 12.8-12.8V172.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v134.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V76.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v230.4c0 6.4 6.4 12.8 12.8 12.8zm-288 0h38.4c6.4 0 12.8-6.4 12.8-12.8v-70.4c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v70.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V108.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v198.4c0 6.4 6.4 12.8 12.8 12.8zM496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"},child:[]}]})(e)}function ax(e){return Gh({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zM224 416H64v-96h160v96zm0-160H64v-96h160v96zm224 160H288v-96h160v96zm0-160H288v-96h160v96z"},child:[]}]})(e)}function lx(){var Wr;const[e,i]=vt.useState(null),[o,c]=vt.useState(null),[f,g]=vt.useState(null),[y,v]=vt.useState(""),[E,A]=vt.useState({png:!0,tif:!0,geojson:!1,pdf:!1}),[G,P]=vt.useState(!1),[B,V]=vt.useState(null),[q,Z]=vt.useState([]),[Y,ht]=vt.useState(null),[lt,Pt]=vt.useState(null),[Ut,Ot]=vt.useState(!1),[Gt,$t]=vt.useState({current:0,total:0}),[Vt,Qt]=vt.useState(null),zt=vt.useRef(null),te=vt.useRef(null),[ee,Fe]=vt.useState([]),Ie=vt.useRef([]),Mt=vt.useRef(!1);vt.useRef(null);const At=vt.useRef(null),mt=vt.useRef(null),ft=vt.useRef([]),[Rt,ct]=vt.useState([]),[K,_t]=vt.useState({source:null,id:null,geoJSON:null,name:null}),[Dt,Ht]=vt.useState("table"),[se,Jt]=vt.useState(null),[$e,Re]=vt.useState([]),[Ye,cn]=vt.useState(null),[Bi,jr]=vt.useState([]),[er,js]=vt.useState(!1),[Ho,Ti]=vt.useState(null),[Ur,Vn]=vt.useState(null),[Hr,Xn]=vt.useState(null),[Sr,vi]=vt.useState(null),[gn,$o]=vt.useState("hsl"),[ln,Us]=vt.useState("Douglas-fir"),[Yn,cs]=vt.useState("04"),[hi,kr]=vt.useState("Dry"),[Qn,$r]=vt.useState("Low Stress"),[fn,nr]=vt.useState("50"),[Sn,fs]=vt.useState("D"),[kn,_o]=vt.useState("l"),ci=vt.useRef(null),ds=vt.useRef(null),[ke,ti]=vt.useState([]),[Vo,Da]=vt.useState(null),[yo,Wo]=vt.useState(!1),Pr=vt.useRef(null),[ps,gs]=vt.useState([]),[vn,ms]=vt.useState(null);vt.useEffect(()=>{try{const z=sessionStorage.getItem("vmrc_created_rasters"),bt=sessionStorage.getItem("vmrc_active_created_raster_id");let Bt=null;if(z&&(Bt=JSON.parse(z),Array.isArray(Bt)?(console.log(`[Session] Restored ${Bt.length} created raster(s) from sessionStorage`),ti(Bt)):(console.warn("[Session] Invalid saved rasters format, skipping restore"),Bt=null)),bt){const It=JSON.parse(bt);if(console.log(`[Session] Restored active raster ID: ${It}`),Pt(It),Bt){const Tt=Bt.find(Zt=>Zt.id===It);Tt&&(ht(Tt.activeRasterId),Jt(Tt.stats||null),Re(Tt.pixelValues||[]),cn(Tt.histogram||null))}}}catch(z){console.error("[Session] Failed to load from sessionStorage:",z),sessionStorage.removeItem("vmrc_created_rasters"),sessionStorage.removeItem("vmrc_active_created_raster_id")}},[]),vt.useEffect(()=>{try{sessionStorage.setItem("vmrc_created_rasters",JSON.stringify(ke)),console.log(`[Session] Saved ${ke.length} created raster(s) to sessionStorage`)}catch(z){console.error("[Session] Failed to save createdRasters to sessionStorage:",z);try{sessionStorage.removeItem("vmrc_created_rasters"),sessionStorage.setItem("vmrc_created_rasters",JSON.stringify(ke))}catch(bt){console.error("[Session] Failed to clear and retry:",bt)}}},[ke]),vt.useEffect(()=>{try{sessionStorage.setItem("vmrc_active_created_raster_id",JSON.stringify(lt))}catch(z){console.error("[Session] Failed to save activeCreatedRasterId to sessionStorage:",z)}},[lt]),vt.useEffect(()=>{Ti(null),Vn(null),Xn(null),vi(null)},[gn,ln]),vt.useEffect(()=>{const z={userClip:!!Vt,userClipRef:!!zt.current,uploadedAois:(ee==null?void 0:ee.length)||0,aois:q.length,activeAoi:!!K.geoJSON,activeAoiId:K.id,createdRasters:ke.length,overlayUrl:!!o};console.log("[FilterChange]  BEFORE cleanup:",z),console.trace("[CLEAR_OVERLAYS] Filter change useEffect - clearing stats ONLY (preserving overlay state)"),ht(null),Pt(null),Jt(null),Re([]),cn(null),console.log("[FilterChange]  AFTER cleanup - State setters called for overlays/stats only, AOI state preserved in closure"),console.log("[FilterChange]  Closure state (may be stale):",{userClip:!!Vt,userClipRef:!!zt.current,uploadedAois:(ee==null?void 0:ee.length)||0,aois:q.length,activeAoi:!!K.geoJSON})},[gn,ln,Yn,hi,Qn,fn,Sn,kn]),vt.useEffect(()=>{var Bt;const z=new Error().stack,bt=((Bt=z==null?void 0:z.split(`
`)[2])==null?void 0:Bt.trim())||"unknown";console.log("[AOIState]  AOI state changed:",{aois:q.length,aoisDetails:q.map(It=>({id:It.id,type:It.type})),uploadedAois:(ee==null?void 0:ee.length)||0,userClip:!!Vt,userClipRef:!!zt.current,activeAoi:!!K.geoJSON,activeAoiId:K.id,caller:bt.substring(0,100)})},[q,ee,Vt,K]),vt.useEffect(()=>{var It,Tt,Zt;const z=new Error().stack,bt=((It=z==null?void 0:z.split(`
`)[2])==null?void 0:It.trim())||"unknown";((Tt=Ie.current)==null?void 0:Tt.length)>0&&ke.length===0&&console.error("[OverlayState]  WARNING: createdRasters was cleared!",{previousCount:((Zt=Ie.current)==null?void 0:Zt.length)||0,currentCount:ke.length,caller:bt.substring(0,150),fullStack:z}),console.log("[OverlayState]  Overlay state changed:",{overlayUrl:!!o,overlayBounds:!!f,createdRasters:ke.length,activeRasterId:Y,activeCreatedRasterId:lt,caller:bt.substring(0,100)}),Ie.current=ke},[o,f,ke,Y,lt]),vt.useEffect(()=>{im().then(z=>{const bt=(z==null?void 0:z.geojson)??z;i(bt)}).catch(z=>console.error("Failed to load global AOI:",z)),fetch(Ai("/api/v1/rasters/list")).then(z=>z.json()).then(z=>{console.log("Loaded rasters:",z);const bt=z.items??[];jr(bt);const It=bt.filter(Zt=>Zt.dataset_type==="hsl").filter(Zt=>{const qt=Zt.name.replace(/\.tif$/,"").toUpperCase();return/^HSL_\d+_(DRY|WET|NORMAL)$/.test(qt)}),Tt=It.length>0;js(Tt),console.log(`[INFO] WH HSL rasters detected: ${Tt?"YES":"NO"} (found ${It.length} WH HSL files)`),Tt&&console.log("[INFO] WH HSL raster examples:",It.slice(0,5).map(Zt=>Zt.name))}).catch(z=>{console.error("Failed to load raster list:",z)}),lm().then(z=>{console.log("Loaded datasets:",z),gs(z.datasets||[])}).catch(z=>{console.error("Failed to load datasets:",z)})},[]);function Ar(z){if(!z)return null;try{return Rh(z)}catch(bt){return console.error("Failed to normalize GeoJSON:",bt),null}}function Zo(z="draw-start"){if(Mt.current){console.warn("[MapExplorer]  BLOCKED: handleStartNewAoi called during export - export must not clear overlays"),console.trace("[CLEAR_OVERLAY]  BLOCKED: setCreatedRasters([]) prevented during export");return}if(z==="export-ui"||z==="ui-render"){console.warn("[MapExplorer]  BLOCKED: handleStartNewAoi called with reason:",z,"- export UI must not clear overlays");return}console.log("[MapExplorer] Starting new AOI - clearing overlays ONLY (preserving all AOIs)"),console.log("[MapExplorer] Reason:",z),console.trace("[CLEAR_OVERLAYS] handleStartNewAoi - clearing createdRasters ONLY"),console.log("[CLEAR_OVERLAY]  setCreatedRasters([]) called from handleStartNewAoi"),ti([]),ht(null),Pt(null),Jt(null),Re([]),cn(null);try{sessionStorage.removeItem("vmrc_created_rasters"),sessionStorage.removeItem("vmrc_active_created_raster_id"),console.log("[Session] Cleared sessionStorage for new AOI")}catch(bt){console.error("[Session] Failed to clear sessionStorage:",bt)}c(null),g(null),Ti(null),Vn(null),Xn(null),vi(null)}function In(){console.log("[MapExplorer] Clearing drawn AOI geometry (handled by BaseMap)")}const ye=vt.useCallback(z=>{var he,ue,ge;if(!z){console.log("[MapExplorer]  EXPLICIT CLEAR: userClip cleared (both state and ref)"),console.trace("[AOI_CLEAR] handleUserClipChange(null) - explicit user action"),Qt(null),zt.current=null,te.current=null,At.current=null,mt.current=null,c(null),g(null),Re([]),Jt(null),cn(null),ht(null),Pt(null),Ti(null),Vn(null),Xn(null),vi(null),_t({source:null,id:null,geoJSON:null,name:null}),console.log("[MapExplorer] Cleared active AOI (clip cleared)");return}console.log("[MapExplorer]  AOI SET/UPDATE: handleUserClipChange with GeoJSON"),console.trace("[AOI_SET] handleUserClipChange(GeoJSON) - explicit user action");const bt=Vs(z,Rt);if(bt.overlaps){alert(bt.message||"This AOI overlaps with an existing selected AOI. Please choose a different area.");return}const Bt=Ar(z);if(!Bt){console.error("[handleUserClipChange] Failed to normalize GeoJSON");return}const It={id:null,geojson:Bt,name:"Drawn AOI",type:"draw",overlayUrl:null,overlayBounds:null,stats:null,pixelValues:[],activeRasterId:null,visible:!0},Tt=((ge=(ue=(he=Bt==null?void 0:Bt.features)==null?void 0:he[0])==null?void 0:ue.properties)==null?void 0:ge.__aoiId)||null;te.current=Tt,console.log("[MapExplorer] Extracted aoiId from GeoJSON:",Tt);const Zt=Tt||`drawn-${Date.now()}`,qt={...It,id:Zt};At.current=Bt,mt.current=Zt,console.log("[MapExplorer]  Updated persistent AOI refs:",{hasGeoJSON:!!At.current,aoiId:mt.current}),Z(ce=>{const we=[...ce.filter(ve=>ve.type!=="draw"),qt];return ft.current=we,we}),ct(ce=>[...ce.filter(we=>we.source!=="drawn"),{id:Zt,source:"drawn",geojson:Bt}]),Qt(Bt),zt.current=Bt,console.log("[MapExplorer] userClip updated:",!!Bt,"with stable aoiId:",Zt),_t({source:"drawn",id:Zt,geoJSON:Bt,name:"Drawn AOI"}),console.log("[MapExplorer] Set active AOI to drawn AOI:",Zt)},[Rt]);function _s(z){return{"04":"April","05":"May","06":"June","07":"July","08":"August","09":"September"}[z]||z}function ys(z){return{l:"Low",ml:"Medium-Low",m:"Medium",mh:"Medium-High",h:"High",vh:"Very High"}[z]||z}function Hs(z){return z.includes("Low Stress")?"l":z.includes("Medium-Low Stress")?"ml":z.includes("Medium Stress")&&!z.includes("High")?"m":z.includes("Medium-High Stress")?"mh":z.includes("High Stress")?"h":z.includes("Very High")?"vh":"l"}function qo(z,bt,Bt,It,Tt,Zt,qt,he){const ue=[];if(z==="mortality"?ue.push("Mortality"):z==="hsl"&&ue.push("HSL"),ue.push(bt),z==="mortality")ue.push(It),ue.push(_s(Bt));else if(z==="hsl"){const ge={D:"Dry",W:"Wet",N:"Normal"};ue.push(ge[qt]||qt)}if(z==="mortality"&&bt==="Douglas-fir"){const ge=Hs(Tt);ue.push(ys(ge))}else z==="hsl"&&bt==="Douglas-fir"&&ue.push(ys(he));return(z==="mortality"&&bt==="Douglas-fir"||z==="hsl"&&bt==="Douglas-fir")&&Zt&&ue.push(`Cover ${Zt}%`),ue.join("  ")}function vo(z,bt,Bt,It,Tt,Zt,qt=""){const he=z==="hsl"?"HSL":"Mortality",ue=bt==="Douglas-fir"?"DF":"WH",ge=Tt||"0";let ce="DRY";return z==="hsl"?Zt==="W"?ce="WET":Zt==="N"?ce="NORMAL":ce="DRY":It==="Wet"?ce="WET":It==="Normal"?ce="NORMAL":ce="DRY",`${he}_${ue}_${ge}_${ce}_${Bt||"04"}${qt?`.${qt}`:""}`}function ir(z,bt){let Bt="";return z==="Dry"?Bt="D":z==="Wet"?Bt="W":z==="Normal"?Bt="N":Bt=z[0],`M2.5_${Bt}${bt}`}function Br(z,bt,Bt,It,Tt){if(!Bi.length)return console.warn("No rasters loaded"),null;const Zt=Bi.filter(he=>he.dataset_type==="mortality"||!he.dataset_type);let qt="";if(z==="Western Hemlock"){if(!Tt||Tt.trim()==="")return alert("Please select a Cover % value for Western Hemlock mortality rasters."),null;qt=ir(Bt,bt),console.log("WH Mortality pattern:",qt),console.log("  Species: WH | Condition:",Bt,"| Month:",bt,"| Cover:",Tt+"%");const he=`\\${Tt}\\`,ue=`/${Tt}/`;console.log(`[DEBUG] Filtering WH rasters by cover folder: ${Tt} (looking for ${he} or ${ue} in path)`);const ge=Zt.filter(we=>{if(!we.path)return console.warn(`[WARN] Raster ${we.name} has no path property`),!1;const ve=we.path.includes(he)||we.path.includes(ue);return ve&&console.log(`[DEBUG] Raster ${we.name} matches cover folder: ${we.path}`),ve});if(console.log(`[DEBUG] Found ${ge.length} WH rasters in cover ${Tt}% folder`),ge.length===0)return console.error(` No WH rasters found in cover ${Tt}% folder`),alert(`No raster found for Cover ${Tt}%. Please check if this cover value exists in the dataset.`),null;const ce=ge.find(we=>we.name.replace(/\.tif$/,"")===qt);if(ce){const we=ce.name.replace(/\.tif$/,"");return console.log(" Found exact match:",we,"| Cover:",Tt+"%","| ID:",ce.id),console.log("  Full path:",ce.path),!ce.path.includes(he)&&!ce.path.includes(ue)?(console.error(` CRITICAL: Matched raster path does not contain cover ${Tt}% folder:`,ce.path),alert(`Error: Matched raster does not match selected cover ${Tt}%. This is a bug.`),null):{id:ce.id,name:we,path:ce.path}}console.error(` No WH raster found matching pattern "${qt}" in cover ${Tt}% folder`),console.error(`   Searched ${ge.length} rasters in cover ${Tt}% folder`);const fe=ge.slice(0,10).map(we=>we.name.replace(/\.tif$/,""));return console.error(`   Available files in cover ${Tt}% folder (first 10):`,fe),alert(`No raster found matching pattern "${qt}" for Cover ${Tt}%. Available files: ${fe.slice(0,5).join(", ")}`),null}else{if(!Tt||Tt.trim()==="")return alert("Please select a Cover % value for Douglas-fir mortality rasters."),null;const he=Hs(It);let ue="";Bt==="Dry"?ue="D":Bt==="Wet"?ue="W":Bt==="Normal"?ue="N":ue=Bt[0],qt=`M2.5_DF_${ue}${bt}_${he}`,console.log("DF Mortality pattern:",qt),console.log("  Species: DF | Condition:",ue,"| Month:",bt,"| Stress:",he,"| Cover:",Tt+"%");const ge=`\\${Tt}\\`,ce=`/${Tt}/`;console.log(`[DEBUG] Filtering rasters by cover folder: ${Tt} (looking for ${ge} or ${ce} in path)`);const fe=Zt.filter(je=>{if(!je.path)return console.warn(`[WARN] Raster ${je.name} has no path property`),!1;const We=je.path.includes(ge)||je.path.includes(ce);return We&&console.log(`[DEBUG] Raster ${je.name} matches cover folder: ${je.path}`),We});if(console.log(`[DEBUG] Found ${fe.length} rasters in cover ${Tt}% folder`),fe.length===0)return console.error(` No rasters found in cover ${Tt}% folder`),alert(`No raster found for Cover ${Tt}%. Please check if this cover value exists in the dataset.`),null;const we=fe.find(je=>je.name.replace(/\.tif$/,"")===qt);if(we){const je=we.name.replace(/\.tif$/,"");return console.log(" Found exact match:",je,"| Cover:",Tt+"%","| ID:",we.id),console.log("  Full path:",we.path),!we.path.includes(ge)&&!we.path.includes(ce)?(console.error(` CRITICAL: Matched raster path does not contain cover ${Tt}% folder:`,we.path),alert(`Error: Matched raster does not match selected cover ${Tt}%. This is a bug.`),null):{id:we.id,name:je,path:we.path}}console.error(` No raster found matching pattern "${qt}" in cover ${Tt}% folder`),console.error(`   Searched ${fe.length} rasters in cover ${Tt}% folder`);const ve=fe.slice(0,10).map(je=>je.name.replace(/\.tif$/,""));return console.error(`   Available files in cover ${Tt}% folder (first 10):`,ve),alert(`No raster found matching pattern "${qt}" for Cover ${Tt}%. Available files: ${ve.slice(0,5).join(", ")}`),null}}function $s(z,bt,Bt,It=null){if(!Bi.length)return null;const Tt=It==="Western Hemlock"||ln==="Western Hemlock";let Zt="";if(Tt){if(!z||z.trim()==="")return alert("Please select a Cover % value for Western Hemlock HSL rasters."),null;let ge="";bt==="D"||bt==="DRY"?ge="DRY":bt==="W"||bt==="WET"?ge="WET":bt==="N"||bt==="NORMAL"?ge="NORMAL":ge=bt.toUpperCase(),Zt=`HSL_${z}_${ge}`,console.log("WH HSL pattern:",Zt),console.log("  Species: WH | Cover:",z,"| Condition:",ge);const ce=`\\${z}\\`,fe=`/${z}/`;console.log(`[DEBUG] Filtering WH HSL rasters by cover folder: ${z} (looking for ${ce} or ${fe} in path)`);const ve=Bi.filter(Ve=>{const wi=Ve.name.replace(/\.tif$/,"").toUpperCase();return Ve.dataset_type==="hsl"||wi.includes("HSL")}).filter(Ve=>{if(!Ve.path)return console.warn(`[WARN] Raster ${Ve.name} has no path property`),!1;const wi=Ve.path.includes(ce)||Ve.path.includes(fe);return wi&&console.log(`[DEBUG] Raster ${Ve.name} matches cover folder: ${Ve.path}`),wi});if(console.log(`[DEBUG] Found ${ve.length} WH HSL rasters in cover ${z}% folder`),ve.length===0)return console.error(` No WH HSL rasters found in cover ${z}% folder`),alert(`No raster found for Cover ${z}%. Please check if this cover value exists in the dataset.`),null;const je=ve.find(Ve=>Ve.name.replace(/\.tif$/,"")===Zt);if(je){const Ve=je.name.replace(/\.tif$/,"");return console.log(" Found WH HSL raster:",Ve,"| Cover:",z+"%","| ID:",je.id,"Path:",je.path),!je.path.includes(ce)&&!je.path.includes(fe)?(console.error(` CRITICAL: Matched raster path does not contain cover ${z}% folder:`,je.path),alert(`Error: Matched raster does not match selected cover ${z}%. This is a bug.`),null):{id:je.id,name:Ve,path:je.path}}const We=ve.find(Ve=>Ve.name.replace(/\.tif$/,"").toUpperCase()===Zt.toUpperCase());if(We){const Ve=We.name.replace(/\.tif$/,"");return console.log(" Found WH HSL raster (case-insensitive):",Ve,"| Cover:",z+"%","| ID:",We.id,"Path:",We.path),{id:We.id,name:Ve,path:We.path}}return console.warn(" No WH HSL raster found matching pattern:",Zt),console.warn("   Checked",ve.length,"WH HSL rasters in cover",z+"%"),null}else Zt=`HSL2.5_DF_${z}_${bt}_${Bt}`,console.log("DF HSL pattern:",Zt),console.log("  Species: DF | Cover:",z,"| Condition:",bt,"| Class:",Bt);const qt=Bi.filter(ge=>{const ce=ge.name.replace(/\.tif$/,"").toUpperCase();return ge.dataset_type==="hsl"||ce.includes("HSL")});console.log(`[DEBUG] Searching in ${qt.length} HSL rasters for: ${Zt}`),qt.length>0&&console.log("[DEBUG] Available HSL raster names (first 20):",qt.slice(0,20).map(ge=>ge.name.replace(/\.tif$/,"")));const he=qt.find(ge=>ge.name.replace(/\.tif$/,"")===Zt);if(he){const ge=he.name.replace(/\.tif$/,"");return console.log(" Found HSL raster:",ge,"ID:",he.id,"Path:",he.path),{id:he.id,name:ge,path:he.path}}const ue=qt.find(ge=>ge.name.replace(/\.tif$/,"").toUpperCase()===Zt.toUpperCase());if(ue){const ge=ue.name.replace(/\.tif$/,"");return console.log(" Found HSL raster (case-insensitive):",ge,"ID:",ue.id,"Path:",ue.path),{id:ue.id,name:ge,path:ue.path}}return console.warn(" No HSL raster found matching pattern:",Zt),console.warn("   Checked",qt.length,"HSL rasters"),null}const Na=vt.useCallback((z,bt)=>!z||!bt?!1:JSON.stringify(z)===JSON.stringify(bt),[]),Ko=vt.useCallback(z=>{ti(bt=>[...bt.filter(It=>It.aoiId!==z.aoiId),z])},[]);async function Jo(){var ws;const z={userClip:!!Vt,userClipRef:!!zt.current,uploadedAois:(ee==null?void 0:ee.length)||0,aois:q.length,aoisDetails:q.map(Ce=>({id:Ce.id,type:Ce.type,hasGeojson:!!Ce.geojson})),activeAoi:!!K.geoJSON,activeAoiId:K.id,createdRasters:ke.length,drawnAoiIdRef:te.current};console.log("[Generate]  START - Full state:",z);const bt=At.current,Bt=ft.current,It=q.filter(Ce=>Ce.type!=="base"&&Ce.geojson),Tt=It.length>0,Zt=bt||zt.current||Vt,qt=!!Zt,he=((ee==null?void 0:ee.length)??0)>0;bt&&!Vt&&!zt.current&&q.length>0&&(console.log("[Generate]  RESTORING: React state lost, restoring from persistent refs (other AOIs exist)"),Qt(bt),zt.current=bt,te.current=mt.current),Bt.length>0&&q.length===0&&console.warn("[Generate]  Skipping restore: aois array is empty (likely all AOIs were erased)"),console.log("[Generate]  Detection check:",{aoisInState:Tt,aoisInStateCount:It.length,hasDrawn:qt,hasUploads:he,decision:Tt||qt||he?"HAS_AOI":"NO_AOI"});let ue=It;const ge=q.find(Ce=>Ce.type==="draw"),ce=ue.some(Ce=>Ce.type==="draw");if(ge&&!ce?(console.log("[Generate]  Adding drawn AOI from aois array to targets"),ue.push(ge)):!ge&&qt&&Zt&&(console.warn("[Generate]  WARNING: Drawn AOI found in refs but NOT in aois array - skipping (likely erased)"),console.warn("[Generate] This AOI should have been removed from state. Ref data:",{persistentDrawnGeo:!!bt,userClipRef:!!zt.current,userClip:!!Vt,drawnAoiIdRef:te.current})),ue.length===0){console.error("[Generate]  NO TARGETS - Decision breakdown:",{aoisInState:Tt,aoisInStateCount:It.length,hasDrawn:qt,hasUploads:he,aoisArray:q.map(Ce=>({id:Ce.id,type:Ce.type,hasGeojson:!!Ce.geojson})),userClip:!!Vt,userClipRef:!!zt.current}),alert("Draw or upload an AOI first.");return}if(console.log(`[Generate] Will generate for ${ue.length} AOI(s):`,ue.map(Ce=>({id:Ce.id,name:Ce.name,type:Ce.type}))),console.log(`[MapExplorer] Generating rasters for ${ue.length} AOI(s)`),gn==="hsl"&&ln==="Western Hemlock"&&!er){alert("HSL is only available for Douglas-fir. Please select Douglas-fir or switch to Mortality map type."),Ti(null),Vn(null),Xn(null),vi(null);return}let fe=null;if(gn==="mortality")fe=Br(ln,Yn,hi,Qn,fn);else if(gn==="hsl"){const Ce=Sn;if(ln==="Douglas-fir"){if(!fn||fn.trim()===""){alert("Please select a Cover % value for Douglas-fir HSL rasters."),Ti(null),Vn(null),Xn(null),vi(null);return}fe=$s(fn,Ce,kn,ln)}else if(ln==="Western Hemlock"){if(!fn||fn.trim()===""){alert("Please select a Cover % value for Western Hemlock HSL rasters."),Ti(null),Vn(null),Xn(null),vi(null);return}fe=$s(fn,Ce,null,ln)}}if(!fe||!fe.id){Ti(null),Vn(null),Xn(null),vi(null),console.error(" No raster found matching filters"),console.error("   Map Type:",gn),console.error("   Species:",ln),gn==="mortality"?(console.error("   Month:",Yn,"| Condition:",hi),ln==="Douglas-fir"&&console.error("   Stress:",Qn,"| Cover:",fn)):gn==="hsl"&&console.error("   Condition:",Sn,"| Class:",kn,"| Cover:",fn),alert("No raster found matching filters. Check console for details.");return}const we=fe.path||null,ve=fe.name.endsWith(".tif")?fe.name:`${fe.name}.tif`;Xn(we),Vn(ve),Ti(null),vi(null),console.log("[INFO] Selected Raster - Path:",we,"| Filename:",ve);const je=fe.id;if(ci.current)try{const Ce=ci.current,Ne=Ce.getZoom(),On=Ce.getCenter(),Mn=750,En=90,ei=156543.03392*Math.cos(On.lat*Math.PI/180)/Math.pow(2,Ne);Mn/ei>En&&console.warn(`[MapExplorer] Generating at high zoom (z=${Ne}). Overlay may look blocky at this view resolution, but generation will proceed.`)}catch(Ce){console.warn("[MapExplorer] Zoom warning calculation failed (ignored):",Ce)}Ot(!0),$t({current:0,total:ue.length});const We=[],Ve=[],wi={mapType:gn,species:ln,month:Yn,condition:hi,dfStress:Qn,coverPercent:fn,hslCondition:Sn,hslClass:kn};try{for(let Ce=0;Ce<ue.length;Ce++){const Ne=ue[Ce];$t({current:Ce+1,total:ue.length});try{const On=Ne.type==="draw"&&te.current||Ne.id,Mn=ke.find(Yo=>Yo.aoiId===On);if(Mn&&Mn.filtersUsed&&Na(Mn.filtersUsed,wi)){console.log(`[MapExplorer]  Skipping AOI ${Ne.name||Ne.id}: Already generated with same filters`);continue}const En=Ne.geojson||(Ne.type==="draw"&&(zt.current||Vt)?zt.current||Vt:null);if(!En){console.warn(`[MapExplorer] Skipping AOI ${Ne.id}: No geometry available`),Ve.push({aoi:Ne,error:"No geometry available"});continue}const ei=Ar(En);if(!ei){console.warn(`[MapExplorer] Skipping AOI ${Ne.id}: Invalid geometry`),Ve.push({aoi:Ne,error:"Invalid geometry"});continue}console.log(`[MapExplorer] Generating raster ${Ce+1}/${ue.length} for AOI: ${Ne.name||Ne.id}`);const Ln=await rm({rasterLayerId:je,userClipGeoJSON:ei});console.log("[MapExplorer] GENERATE RESPONSE for AOI:",Ne.name||Ne.id,Ln);const Pe=Ln.overlay_url??Ln.overlayUrl??null,on=Ln.bounds??Ln.overlayBounds??null;let Qe=Ln.stats??null;const Js=Ln.pixel_values??Ln.pixelValues??Ln.pixels??Ln.values??[];let Rr=Ln.histogram??null;Qe?console.log("[MapExplorer]  Stats received:",Qe):(console.error("[MapExplorer]  WARNING: No stats in generate response for AOI:",Ne.name||Ne.id),console.error("[MapExplorer] Response keys:",Object.keys(Ln)));const Mo=qo(gn,ln,Yn,hi,Qn,fn,Sn,kn),Mi=Ne.name||(Ne.type==="upload"?"Uploaded AOI":"Drawn AOI"),fi=new Date().toISOString(),Xs=new Date(fi).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),Ms=new Date(fi).toLocaleDateString([],{month:"short",day:"numeric"}),_n=`${Mo}  ${Mi}  ${Ms} ${Xs}`,Ei={colors:["#006400","#228B22","#9ACD32","#FFD700","#FFA500","#FF8C00","#FF6B00","#FF4500","#DC143C","#B22222"],labels:["010","1020","2030","3040","4050","5060","6070","7080","8090","90100"]};let Ui=on;on&&typeof on=="object"&&!Array.isArray(on)&&on.south!==void 0&&(Ui=[[on.south,on.west],[on.north,on.east]]);const Ir=Ne.id;if(!Ir)throw console.error("[MapExplorer]  WARNING: AOI missing id:",Ne),new Error(`AOI missing id (type: ${Ne.type})`);console.log("[PAIR] register overlay for aoiId:",Ir,"aoiType:",Ne.type);const Xo={id:`raster-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:_n,createdAt:fi,overlayUrl:Pe,overlayBounds:Ui,bounds:Ui,stats:Qe,pixelValues:Array.isArray(Js)?Js:[],histogram:Rr,activeRasterId:je,ramp:Ei,aoiId:Ir,aoiName:Mi,aoiType:Ne.type||"draw",aoiGeojson:Ne.geojson,filtersUsed:{mapType:gn,species:ln,month:Yn,condition:hi,dfStress:Qn,coverPercent:fn,hslCondition:Sn,hslClass:kn},meta:{mapType:gn,species:ln,month:Yn,condition:hi,dfStress:Qn,coverPercent:fn,hslCondition:Sn,hslClass:kn}};Ko(Xo),We.push(Xo),console.log(`[MapExplorer]  Successfully generated raster for AOI: ${Mi}`)}catch(On){console.error(`[MapExplorer]  Failed to generate raster for AOI ${Ne.name||Ne.id}:`,On);let Mn=On.message||"Unknown error";if(On.status===422||On.detail){const En=On.detail||On.message||"";En.includes("AOI contains no raster data")||En.includes("no raster data for this layer")||En.includes("AOI outside raster extent")||En.includes("AOI too small")||En.includes("no intersect")?(alert("AOI doesn't overlap this raster. Try a different area."),Mn="AOI doesn't overlap this raster"):Mn=En}Ve.push({aoi:Ne,error:Mn})}}}finally{Ot(!1),$t({current:0,total:0})}if(console.log("[Generate] AFTER - AOI state preserved:",{userClip:!!Vt,lastDrawnAoiRef:!!((ws=ds.current)!=null&&ws.current),uploadedAoisLen:ee==null?void 0:ee.length,aoisLen:q.length,hasDrawn:q.some(Ce=>Ce.type==="draw"),hasUploads:q.some(Ce=>Ce.type==="upload")}),We.length>0){const Ce=We[We.length-1];ht(je),Pt(Ce.id),Jt(Ce.stats||null),Re(Ce.pixelValues||[]),cn(Ce.histogram||null),console.log("[MapExplorer] Set active raster:",Ce.id,"with stats:",Ce.stats?"":"")}if(We.length===ue.length)ue.length===1?alert(`Successfully generated raster for ${ue[0].name||"AOI"}.`):alert(`Successfully generated ${We.length} raster(s) for ${ue.length} AOI(s).`);else if(We.length>0){const Ce=Ve.map(Ne=>Ne.aoi.name||Ne.aoi.id).join(", ");alert(`${We.length}/${ue.length} AOI(s) generated successfully.

Failed: ${Ce}
`+Ve.map(Ne=>`- ${Ne.aoi.name||Ne.aoi.id}: ${Ne.error}`).join(`
`))}else alert(`Failed to generate rasters for all ${ue.length} AOI(s).

`+Ve.map(Ce=>`- ${Ce.aoi.name||Ce.aoi.id}: ${Ce.error}`).join(`
`))}function Vs(z,bt){if(!z||!bt||bt.length===0)return{overlaps:!1,message:null};try{let Bt=null;if(z.type==="FeatureCollection"){if(z.features.length===0)return{overlaps:!1,message:null};Bt=z.features[0]}else if(z.type==="Feature")Bt=z;else if(z.type==="Polygon"||z.type==="MultiPolygon")Bt={type:"Feature",geometry:z,properties:{}};else return{overlaps:!1,message:null};for(const It of bt)try{let Tt=null;if(It.geojson.type==="FeatureCollection"){if(It.geojson.features.length===0)continue;Tt=It.geojson.features[0]}else if(It.geojson.type==="Feature")Tt=It.geojson;else if(It.geojson.type==="Polygon"||It.geojson.type==="MultiPolygon")Tt={type:"Feature",geometry:It.geojson,properties:{}};else continue;const Zt=sx(Bt,Tt);if(Zt&&D3(Zt)>0)return{overlaps:!0,message:"This AOI overlaps with an existing selected AOI. Please choose a different area."}}catch(Tt){console.log(`[Overlap check] No intersection with AOI ${It.id}:`,Tt.message);continue}return{overlaps:!1,message:null}}catch(Bt){return console.error("[Overlap check] Error checking overlap:",Bt),{overlaps:!1,message:null}}}function vs(z){if(!z||typeof z!="object")return{valid:!1,error:"Invalid GeoJSON: must be an object"};const bt=["FeatureCollection","Feature","Polygon","MultiPolygon"];if(!z.type||!bt.includes(z.type))return{valid:!1,error:`Invalid GeoJSON type: "${z.type}". Supported types: ${bt.join(", ")}`};if(z.type==="FeatureCollection"){if(!Array.isArray(z.features))return{valid:!1,error:"Invalid FeatureCollection: features must be an array"};if(z.features.length===0)return{valid:!1,error:"Invalid FeatureCollection: must contain at least one feature"};for(const Bt of z.features){if(Bt.type!=="Feature")return{valid:!1,error:"Invalid FeatureCollection: all items must be Features"};if(!Bt.geometry||!Bt.geometry.type)return{valid:!1,error:"Invalid Feature: geometry is required"};const It=Bt.geometry.type;if(It!=="Polygon"&&It!=="MultiPolygon")return{valid:!1,error:`Invalid geometry type: "${It}". Only Polygon and MultiPolygon are supported for AOI.`}}}if(z.type==="Feature"){if(!z.geometry||!z.geometry.type)return{valid:!1,error:"Invalid Feature: geometry is required"};const Bt=z.geometry.type;if(Bt!=="Polygon"&&Bt!=="MultiPolygon")return{valid:!1,error:`Invalid geometry type: "${Bt}". Only Polygon and MultiPolygon are supported for AOI.`}}return(z.type==="Polygon"||z.type==="MultiPolygon")&&(!z.coordinates||!Array.isArray(z.coordinates))?{valid:!1,error:`Invalid ${z.type}: coordinates must be an array`}:{valid:!0}}async function xo(z){const Bt=z.name.toLowerCase().split(".").pop();if(!["geojson","json","kml","zip"].includes(Bt))return{success:!1,added:0,skipped:0,errors:[`Invalid file type: .${Bt}. Please upload a GeoJSON (.geojson/.json), KML (.kml), or Shapefile (.zip) file.`]};try{const Tt=await E3(z);if(Tt.length===0)return{success:!1,added:0,skipped:0,errors:[`No valid features found in ${z.name}.`]};const Zt=[],qt=[];for(const ce of Tt){const fe=vs(ce);if(!fe.valid){let we=Bt==="zip"?"Shapefile":Bt==="kml"?"KML":"GeoJSON";qt.push(`${z.name}: ${fe.error}`);continue}Zt.push(ce)}if(Zt.length===0)return{success:!1,added:0,skipped:0,errors:qt};const he=[],ue=z.name.replace(/\.[^/.]+$/,"");let ge=0;for(const ce of Zt){const fe=Ar(ce);if(fe.features&&fe.features.length>1)for(let we=0;we<fe.features.length;we++){const je={type:"FeatureCollection",features:[fe.features[we]]},We=Vs(je,Rt);if(We.overlaps){qt.push(`${z.name} #${we+1}: ${We.message||"Overlaps with existing AOI. Choose something else."}`);continue}ge++;const Ve=`upload-${ue}-${ge}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;he.push({id:Ve,geojson:je,name:`${ue} #${ge}`,type:"upload",overlayUrl:null,overlayBounds:null,stats:null,pixelValues:[],activeRasterId:null,visible:!0,_fileName:z.name})}else{const we=Vs(fe,Rt);if(we.overlaps){qt.push(`${z.name}: ${we.message||"Overlaps with existing AOI. Choose something else."}`);continue}ge++;const ve=`upload-${ue}-${ge}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;he.push({id:ve,geojson:fe,name:ge===1&&Zt.length===1?ue:`${ue} #${ge}`,type:"upload",overlayUrl:null,overlayBounds:null,stats:null,pixelValues:[],activeRasterId:null,visible:!0,_fileName:z.name})}}if(he.length===0)return{success:!1,added:0,skipped:Zt.length,errors:qt};if(Fe(ce=>[...ce,...he]),ct(ce=>[...ce,...he.map(fe=>({id:fe.id,source:"uploaded",geojson:fe.geojson}))]),Z(ce=>[...ce,...he]),he.length>0){Qt(he[0].geojson);const ce=he[0];_t({source:"uploaded",key:ce.id,geoJSON:ce.geojson,name:ce.name||ce._fileName||"Uploaded AOI"}),console.log("[MapExplorer] Set active AOI to uploaded AOI:",ce.id)}return{success:!0,added:he.length,skipped:Zt.length-he.length,errors:qt,newAois:he}}catch(Tt){console.error(`AOI upload error for ${z.name}:`,Tt);let Zt=Tt.message||"Unknown error";return Bt==="zip"&&(Zt.toLowerCase().includes("shp")||Zt.toLowerCase().includes("shx")||Zt.toLowerCase().includes("dbf")?Zt=`Invalid shapefile: ${Zt}

A valid shapefile ZIP must contain .shp, .shx, and .dbf files.`:Zt.includes("shapefile")||(Zt=`Invalid shapefile: ${Zt}

Please ensure the ZIP file contains a valid shapefile with .shp, .shx, and .dbf files.`)),{success:!1,added:0,skipped:0,errors:[`${z.name}: ${Zt}`]}}}async function Ws(z){const bt=Array.from(z.target.files||[]);if(bt.length===0)return;const Bt=[];for(const qt of bt){const he=await xo(qt);Bt.push({file:qt.name,...he})}const It=Bt.reduce((qt,he)=>qt+he.added,0),Tt=Bt.reduce((qt,he)=>qt+he.skipped,0),Zt=Bt.flatMap(qt=>qt.errors);if(It>0){let qt=`Successfully uploaded ${It} AOI(s)`;Tt>0&&(qt+=` (${Tt} skipped due to overlaps or validation errors)`),Zt.length>0&&Zt.length<=3?qt+=`

Errors:
${Zt.join(`
`)}`:Zt.length>3&&(qt+=`

${Zt.length} error(s) occurred. Check console for details.`,console.warn("Upload errors:",Zt)),alert(qt)}else{const qt=Zt.length>0?`Failed to upload AOIs:

${Zt.slice(0,5).join(`
`)}${Zt.length>5?`
... and ${Zt.length-5} more`:""}`:"No valid AOIs found in uploaded files.";alert(qt)}if(It>0&&ci.current){const qt=[];for(const he of Bt)he.newAois&&he.newAois.length>0&&qt.push(...he.newAois);if(qt.length>0){const he=qt.map(ue=>L3(ue.geojson)).filter(ue=>ue!==null);if(he.length>0){let ue=1/0,ge=-1/0,ce=1/0,fe=-1/0;he.forEach(([[we,ve],[je,We]])=>{ue=Math.min(ue,we),ge=Math.max(ge,je),ce=Math.min(ce,ve),fe=Math.max(fe,We)}),ue!==1/0&&ci.current.fitBounds([[ue,ce],[ge,fe]],{padding:[50,50],maxZoom:12})}}}Pr.current&&(Pr.current.value="")}function mn(){console.log("[MapExplorer]  EXPLICIT CLEAR ALL: handleClearUploadedAois"),console.trace("[AOI_CLEAR] handleClearUploadedAois - explicit user action"),Z([]),Fe([]),ct([]),Qt(null),At.current=null,mt.current=null,ft.current=[],zt.current=null,te.current=null,Zo("clear-all"),Pr.current&&(Pr.current.value="")}const Zs=vt.useCallback(z=>{if(console.error("[DEBUG] onRemoveRasterByAoiId CALLED",z,new Error().stack),Mt.current){console.warn("[MapExplorer]  BLOCKED: onRemoveRasterByAoiId called during export - export must not clear overlays"),console.trace("[CLEAR_OVERLAY]  BLOCKED: setCreatedRasters prevented during export");return}console.log(`[MapExplorer] onRemoveRasterByAoiId: Removing rasters with aoiId=${z} from createdRasters state`),ti(bt=>{const Bt=bt.filter(It=>It.aoiId!==z);return console.log(`[MapExplorer] onRemoveRasterByAoiId: State updated - ${bt.length} -> ${Bt.length} rasters`),Bt})},[]),wo=vt.useCallback(z=>{if(Mt.current){console.warn("[MapExplorer]  BLOCKED: handleAoiErased called during export - export must not clear overlays"),console.trace("[CLEAR_OVERLAY]  BLOCKED: setCreatedRasters prevented during export");return}console.log("[MapExplorer] handleAoiErased called with aoiId:",z),qs(z),ti(Bt=>{const It=Bt.filter(Tt=>Tt.aoiId!==z);return console.log(`[MapExplorer] Removed ${Bt.length-It.length} raster(s) for erased AOI ${z}`),It}),(te.current===z||mt.current===z)&&(console.log("[MapExplorer]  EXPLICIT ERASE: Clearing drawn AOI refs for erased AOI"),console.trace("[AOI_CLEAR] handleAoiErased - explicit user action"),te.current=null,zt.current=null,Qt(null),At.current=null,mt.current=null,Z(Bt=>{const It=Bt.filter(Tt=>Tt.id!==z);return ft.current=It,console.log(`[MapExplorer] Removed drawn AOI ${z} from aois array: ${Bt.length} -> ${It.length}`),It}),ct(Bt=>Bt.filter(It=>It.id!==z))),Zs&&Zs(z)},[Zs]);function qs(z){console.log("[MapExplorer] handleRemoveAoi called with aoiId:",z),Z(bt=>{const Bt=bt.find(Zt=>Zt.id===z),It=(Bt==null?void 0:Bt.type)==="draw"||te.current===z;(Bt||It)&&(It&&(console.log("[MapExplorer] Removing drawn AOI - clearing refs"),te.current=null,zt.current=null,Qt(null),At.current=null,mt.current=null),(Bt==null?void 0:Bt.type)==="upload"&&Fe(Zt=>Zt.filter(qt=>qt.id!==z)),ct(Zt=>Zt.filter(qt=>qt.id!==z)),Bt&&Vt&&JSON.stringify(Bt.geojson)===JSON.stringify(Vt)&&(Jt(null),Re([]),cn(null),ht(null),Pt(null)));const Tt=bt.filter(Zt=>Zt.id!==z);return console.log(`[MapExplorer] Removed AOI ${z} from aois array: ${bt.length} -> ${Tt.length}`),Tt})}function Tr(z){const bt=ke.find(Bt=>Bt.id===z);bt&&(Pt(z),ht(bt.activeRasterId),Jt(bt.stats),Re(bt.pixelValues||[]),cn(bt.histogram))}async function Ks(z){if(Mt.current){console.warn("[MapExplorer]  BLOCKED: handleRemoveRaster called during export - export must not clear overlays"),console.trace("[CLEAR_OVERLAY]  BLOCKED: setCreatedRasters prevented during export");return}const bt=ke.find(Tt=>Tt.id===z);if(!bt)return;const Bt=z===lt,It=bt.aoiId;if(bt.overlayUrl)try{await Yd(bt.overlayUrl),console.log(`[MapExplorer] Deleted overlay file: ${bt.overlayUrl}`)}catch(Tt){console.warn(`[MapExplorer] Failed to delete overlay file: ${Tt.message}`)}if(console.log(`[MapExplorer] handleRemoveRaster: Removing raster ${z} (aoiId: ${It}) from createdRasters state - AOI preserved`),ti(Tt=>{const Zt=Tt.filter(qt=>qt.id!==z);return console.log(`[MapExplorer] handleRemoveRaster: State updated - ${Tt.length} -> ${Zt.length} rasters`),Zt}),Bt){const Tt=ke.filter(Zt=>Zt.id!==z);if(Tt.length>0){const Zt=Tt[0];Tr(Zt.id)}else Pt(null),ht(null),Jt(null),Re([]),cn(null)}}async function Vr(){if(Mt.current){console.warn("[MapExplorer]  BLOCKED: handleClearAllRasters called during export - export must not clear overlays"),console.trace("[CLEAR_OVERLAY]  BLOCKED: setCreatedRasters([]) prevented during export");return}const z=ke.filter(bt=>bt.overlayUrl).map(bt=>Yd(bt.overlayUrl).catch(Bt=>{console.warn(`[MapExplorer] Failed to delete overlay ${bt.overlayUrl}: ${Bt.message}`)}));await Promise.all(z),console.log("[CLEAR_OVERLAY] setCreatedRasters([]) called from handleClearAllRasters"),ti([]),console.log("[CLEAR_OVERLAY] setActiveCreatedRasterId(null) called from handleClearAllRasters"),Pt(null),console.log("[CLEAR_OVERLAY] setActiveRasterId(null) called from handleClearAllRasters"),ht(null),Jt(null),Re([]),cn(null),_t({source:null,key:null,geoJSON:null,name:null}),console.log("[MapExplorer] Cleared active AOI (Clear All)");try{sessionStorage.removeItem("vmrc_created_rasters"),sessionStorage.removeItem("vmrc_active_created_raster_id"),console.log("[Session] Cleared sessionStorage (Clear All)")}catch(bt){console.error("[Session] Failed to clear sessionStorage:",bt)}ci.current&&(ci.current._clearPmTempLayers||ci.current._clearGeomanTempLayers)&&(ci.current._clearPmTempLayers||ci.current._clearGeomanTempLayers)(),console.log("[MapExplorer] Cleared all rasters")}function xs(z){if(!z.preview_url||!z.preview_bounds){alert("Preview not available for this dataset. The GeoPDF may not have georeferencing information.");return}vn&&vn.id===z.id?ms(null):ms({id:z.id,preview_url:z.preview_url,preview_bounds:z.preview_bounds})}async function xi(z){if(confirm("Are you sure you want to delete this dataset? This action cannot be undone."))try{await am(z),gs(bt=>bt.filter(Bt=>Bt.id!==z)),vn&&vn.id===z&&ms(null),alert("Dataset deleted successfully")}catch(bt){console.error("Failed to delete dataset:",bt),alert((bt==null?void 0:bt.message)||"Failed to delete dataset. Check console for details.")}}const rr=async z=>{var It,Tt;(It=z==null?void 0:z.preventDefault)==null||It.call(z),(Tt=z==null?void 0:z.stopPropagation)==null||Tt.call(z);const bt=(ke==null?void 0:ke.length)||0;console.log("[Export]  REGRESSION CHECK: Export starting",{createdRastersCount:bt,overlayUrl:!!o}),bt===0&&console.error("[Export]  REGRESSION: createdRasters is already empty before export!"),console.log("[Export] api base:",nm),console.log("[Export] full url:",Ai("/api/v1/rasters/export")),console.log("[Export] clicked",{createdRastersLen:ke==null?void 0:ke.length,exportFormats:E,filename:y,activeCreatedRasterId:lt,activeRasterId:Y});try{if(!ke||ke.length===0){alert("Generate a map first.");return}if(!Object.values(E||{}).some(Boolean)){alert("Select at least one export format.");return}console.log("[Export] Starting export..."),Mt.current=!0,P(!0);const qt=ke.find(We=>We.id===lt)||ke[ke.length-1];if(!qt)throw new Error("No raster selected to export.");console.log("[Export]  Active raster for export:",{activeRasterId:lt,rasterId:qt.id,rasterName:qt.name,hasStats:!!qt.stats,stats:qt.stats,hasHistogram:!!qt.histogram,hasBounds:!!qt.bounds});const he=Object.entries(E||{}).filter(([We,Ve])=>!!Ve).map(([We])=>We),ue=vo(gn,ln,Yn,hi,fn,Sn,"").replace(/\.\w+$/,""),ge=(y||"").trim()||ue,ce={...qt.filtersUsed||qt.context||{mapType:gn,species:ln,month:Yn,condition:hi,coverPercent:fn,hslCondition:Sn},stats:qt.stats||null,histogram:qt.histogram||null,bounds:qt.bounds||qt.overlayBounds||null,pixelValues:qt.pixelValues||[]},fe={raster_layer_id:qt.activeRasterId??qt.raster_layer_id??qt.layerId??qt.layer_id??qt.id,user_clip_geojson:qt.aoiGeojson??qt.user_clip_geojson??qt.userClipGeojson??(K==null?void 0:K.geoJSON)??Vt,filename:ge,formats:he,context:ce,overlay_url:qt.overlayUrl??qt.overlay_url??null,aoi_name:qt.aoiName??qt.aoi_name??(K==null?void 0:K.name)??null};console.log("[Export] payload:",fe);const we=await fetch(Ai("/api/v1/rasters/export"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(fe)});if(!we.ok){const We=await we.text();throw new Error(`Export failed (${we.status}): ${We}`)}const ve=await we.json();console.log("[Export]  Export request successful:",ve);const je=ve.files||ve;console.log("[Export] Export files:",je),V(je),console.log("[Export] Export complete. Download links available in UI.")}catch(Zt){console.error("[Export]  Export failed:",Zt),alert((Zt==null?void 0:Zt.message)||String(Zt))}finally{console.log("[Export] Export finished. Clearing export guard."),Mt.current=!1,P(!1)}},De=[{id:"table",icon:I.jsx(ax,{size:18}),label:"Statistics"},{id:"histogram",icon:I.jsx(ox,{size:20}),label:"Histogram"}],tn=gn==="hsl"&&ln==="Western Hemlock"&&!er;return I.jsxs("div",{className:"layout-3col",children:[I.jsxs("aside",{className:"panel-left card",children:[I.jsx("h2",{className:"panel-title",children:"Filters"}),I.jsxs("div",{className:"filter-block",children:[I.jsx("label",{children:"Map Type"}),I.jsxs("select",{value:gn,onChange:z=>$o(z.target.value),className:"input",children:[I.jsx("option",{value:"mortality",children:"Mortality (Monthly)"}),I.jsx("option",{value:"hsl",children:"High Stress Level (HSL)"})]})]}),I.jsxs("div",{className:"filter-block",children:[I.jsx("label",{children:"Species"}),I.jsxs("select",{value:ln,onChange:z=>Us(z.target.value),className:"input",children:[I.jsx("option",{value:"Douglas-fir",children:"Douglas-fir"}),I.jsx("option",{value:"Western Hemlock",children:"Western Hemlock"})]})]}),tn&&I.jsx("div",{className:"filter-block",style:{backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:0,padding:"10px",marginBottom:"12px",fontSize:"12px",color:"#991b1b"},children:" HSL is only available for Douglas-fir. Please select Douglas-fir or switch to Mortality map type."}),gn==="hsl"&&ln==="Douglas-fir"&&I.jsxs(I.Fragment,{children:[I.jsxs("div",{className:"filter-block",children:[I.jsx("label",{children:"HSL Condition"}),I.jsxs("select",{value:Sn,onChange:z=>fs(z.target.value),className:"input",children:[I.jsx("option",{value:"D",children:"D (Dry)"}),I.jsx("option",{value:"W",children:"W (Wet)"}),I.jsx("option",{value:"N",children:"N (Normal)"})]})]}),I.jsxs("div",{className:"filter-block",children:[I.jsx("label",{children:"HSL Class"}),I.jsxs("select",{value:kn,onChange:z=>_o(z.target.value),className:"input",children:[I.jsx("option",{value:"l",children:"l (Low)"}),I.jsx("option",{value:"ml",children:"ml (Medium-Low)"}),I.jsx("option",{value:"m",children:"m (Medium)"}),I.jsx("option",{value:"mh",children:"mh (Medium-High)"}),I.jsx("option",{value:"h",children:"h (High)"}),I.jsx("option",{value:"vh",children:"vh (Very High)"})]})]}),I.jsxs("div",{className:"filter-block",children:[I.jsx("label",{children:"Cover %"}),I.jsxs("select",{value:fn,onChange:z=>nr(z.target.value),className:"input",children:[I.jsx("option",{value:"0",children:"0%"}),I.jsx("option",{value:"25",children:"25%"}),I.jsx("option",{value:"50",children:"50%"}),I.jsx("option",{value:"75",children:"75%"}),I.jsx("option",{value:"100",children:"100%"})]})]})]}),gn==="hsl"&&ln==="Western Hemlock"&&er&&I.jsxs(I.Fragment,{children:[I.jsxs("div",{className:"filter-block",children:[I.jsx("label",{children:"HSL Condition"}),I.jsxs("select",{value:Sn,onChange:z=>fs(z.target.value),className:"input",children:[I.jsx("option",{value:"D",children:"D (Dry)"}),I.jsx("option",{value:"W",children:"W (Wet)"}),I.jsx("option",{value:"N",children:"N (Normal)"})]})]}),I.jsxs("div",{className:"filter-block",children:[I.jsx("label",{children:"Cover %"}),I.jsxs("select",{value:fn,onChange:z=>nr(z.target.value),className:"input",children:[I.jsx("option",{value:"0",children:"0%"}),I.jsx("option",{value:"25",children:"25%"}),I.jsx("option",{value:"50",children:"50%"}),I.jsx("option",{value:"75",children:"75%"}),I.jsx("option",{value:"100",children:"100%"})]})]})]}),gn==="mortality"&&I.jsxs(I.Fragment,{children:[I.jsxs("div",{className:"filter-block",children:[I.jsx("label",{children:"Month"}),I.jsxs("select",{value:Yn,onChange:z=>cs(z.target.value),className:"input",children:[I.jsx("option",{value:"04",children:"April"}),I.jsx("option",{value:"05",children:"May"}),I.jsx("option",{value:"06",children:"June"}),I.jsx("option",{value:"07",children:"July"}),I.jsx("option",{value:"08",children:"August"}),I.jsx("option",{value:"09",children:"September"})]})]}),I.jsxs("div",{className:"filter-block",children:[I.jsx("label",{children:"Condition"}),I.jsxs("select",{value:hi,onChange:z=>kr(z.target.value),className:"input",children:[I.jsx("option",{value:"Dry",children:"Dry"}),I.jsx("option",{value:"Wet",children:"Wet"}),I.jsx("option",{value:"Normal",children:"Normal"})]})]}),ln==="Douglas-fir"&&I.jsxs(I.Fragment,{children:[I.jsxs("div",{className:"filter-block",children:[I.jsx("label",{children:"Cover %"}),I.jsxs("select",{value:fn,onChange:z=>nr(z.target.value),className:"input",children:[I.jsx("option",{value:"0",children:"0%"}),I.jsx("option",{value:"25",children:"25%"}),I.jsx("option",{value:"50",children:"50%"}),I.jsx("option",{value:"75",children:"75%"}),I.jsx("option",{value:"100",children:"100%"})]})]}),I.jsxs("div",{className:"filter-block",children:[I.jsx("label",{children:"Stress Level"}),I.jsxs("select",{value:Qn,onChange:z=>$r(z.target.value),className:"input",children:[I.jsx("option",{value:"Low Stress",children:"Low Stress"}),I.jsx("option",{value:"Medium-Low Stress",children:"Medium-Low Stress"}),I.jsx("option",{value:"Medium Stress",children:"Medium Stress"}),I.jsx("option",{value:"Medium-High Stress",children:"Medium-High Stress"}),I.jsx("option",{value:"High Stress",children:"High Stress"})]})]})]}),ln==="Western Hemlock"&&I.jsxs("div",{className:"filter-block",children:[I.jsx("label",{children:"Cover %"}),I.jsxs("select",{value:fn,onChange:z=>nr(z.target.value),className:"input",children:[I.jsx("option",{value:"0",children:"0%"}),I.jsx("option",{value:"25",children:"25%"}),I.jsx("option",{value:"50",children:"50%"}),I.jsx("option",{value:"75",children:"75%"}),I.jsx("option",{value:"100",children:"100%"})]})]})]}),Hr&&I.jsx("div",{className:"filter-block",style:{backgroundColor:"#ffffff",border:"1px solid #e2e8f0",borderRadius:0,padding:"10px 12px",marginBottom:"12px"},children:I.jsxs("div",{style:{fontSize:"12px",color:"#1e293b",lineHeight:"1.5",fontFamily:"monospace",wordBreak:"break-all",whiteSpace:"pre-wrap"},children:[I.jsx("div",{style:{fontWeight:600,marginBottom:"4px",fontSize:"11px",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Raster:"}),Hr]})}),I.jsx("div",{className:"filter-block",children:(()=>{const z=!!((q==null?void 0:q.length)>0&&q.some(Bt=>Bt.type!=="base"&&Bt.geojson)||(ee==null?void 0:ee.length)>0||K!=null&&K.key),bt=tn||!z||Ut;return I.jsx("button",{className:"btn-primary full-width",onClick:Jo,disabled:bt,style:{opacity:bt?.5:1},children:Ut?`Generating ${Gt.current}/${Gt.total}...`:"Generate Map"})})()}),I.jsxs("div",{className:"filter-section",children:[I.jsx("h3",{className:"section-title",children:"Export"}),ke.length===0?I.jsx("div",{style:{padding:"12px",textAlign:"center",color:"#6b7280",fontSize:"13px"},children:"Generate a map first."}):I.jsxs(I.Fragment,{children:[I.jsxs("div",{className:"filter-block",style:{marginBottom:"14px"},onMouseDown:z=>z.stopPropagation(),onClick:z=>z.stopPropagation(),children:[I.jsx("label",{className:"sidebar-label",children:"Filename (optional)"}),I.jsx("input",{type:"text",className:"input",placeholder:"e.g., dry_df_04",value:y,onChange:z=>v(z.target.value),style:{width:"100%",boxSizing:"border-box"}}),I.jsx("p",{className:"sidebar-help",style:{marginTop:"4px",marginBottom:0},children:"Base name only (extensions added automatically)."})]}),I.jsxs("div",{className:"filter-block",style:{marginBottom:"14px"},onMouseDown:z=>z.stopPropagation(),onClick:z=>z.stopPropagation(),children:[I.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"13px",fontWeight:500,color:"#374151"},children:"Export Formats:"}),I.jsxs("label",{className:"checkbox-row",children:[I.jsx("input",{type:"checkbox",checked:E.png,onChange:z=>A({...E,png:z.target.checked})}),I.jsx("span",{children:"PNG"})]}),I.jsxs("label",{className:"checkbox-row",children:[I.jsx("input",{type:"checkbox",checked:E.tif,onChange:z=>A({...E,tif:z.target.checked})}),I.jsx("span",{children:"GeoTIFF (.tif)"})]}),I.jsxs("label",{className:"checkbox-row",children:[I.jsx("input",{type:"checkbox",checked:E.geojson,onChange:z=>A({...E,geojson:z.target.checked})}),I.jsx("span",{children:"GeoJSON (AOI)"})]}),I.jsxs("label",{className:"checkbox-row",children:[I.jsx("input",{type:"checkbox",checked:E.pdf,onChange:z=>A({...E,pdf:z.target.checked})}),I.jsx("span",{children:"PDF (report)"})]})]}),I.jsx("div",{className:"filter-block",children:I.jsx("button",{type:"button",className:"btn-primary full-width",disabled:ke.length===0||tn||G,onClick:rr,style:{display:"block",width:"100%",boxSizing:"border-box",opacity:ke.length>0&&!tn&&!G?1:.5},children:G?"Exporting...":"Export"})}),B&&Object.keys(B).length>0&&I.jsxs("div",{className:"filter-block",style:{marginTop:"12px",padding:"12px",background:"#f9fafb",border:"1px solid #e5e7eb",borderRadius:"4px",boxSizing:"border-box",width:"100%"},onMouseDown:z=>z.stopPropagation(),onClick:z=>z.stopPropagation(),children:[I.jsx("h4",{style:{color:"#374151",fontSize:12,fontWeight:700,marginBottom:"10px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Export Results"}),I.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[B.png&&I.jsx("button",{type:"button",onClick:async z=>{z.preventDefault(),z.stopPropagation();try{const bt=Ai(B.png),Bt=B.png.split("/").pop()||"export.png";await dh(bt,Bt)}catch(bt){console.error("[Export] Failed to download PNG:",bt),alert(`Failed to download PNG: ${bt.message}`)}},style:{fontSize:12,color:"#2563eb",textDecoration:"underline",background:"none",border:"none",padding:0,cursor:"pointer",textAlign:"left"},children:"Download PNG"}),B.tif&&I.jsx("button",{type:"button",onClick:async z=>{z.preventDefault(),z.stopPropagation();try{const bt=Ai(B.tif),Bt=B.tif.split("/").pop()||"export.zip";await dh(bt,Bt)}catch(bt){console.error("[Export] Failed to download GeoTIFF:",bt),alert(`Failed to download GeoTIFF: ${bt.message}`)}},style:{fontSize:12,color:"#2563eb",textDecoration:"underline",background:"none",border:"none",padding:0,cursor:"pointer",textAlign:"left"},children:"Download GeoTIFF (ZIP with metadata)"}),B.geojson&&I.jsx("button",{type:"button",onClick:async z=>{z.preventDefault(),z.stopPropagation();try{const bt=Ai(B.geojson),Bt=B.geojson.split("/").pop()||"export.geojson";await dh(bt,Bt)}catch(bt){console.error("[Export] Failed to download GeoJSON:",bt),alert(`Failed to download GeoJSON: ${bt.message}`)}},style:{fontSize:12,color:"#2563eb",textDecoration:"underline",background:"none",border:"none",padding:0,cursor:"pointer",textAlign:"left"},children:"Download GeoJSON"}),B.pdf&&I.jsx("button",{type:"button",onClick:async z=>{z.preventDefault(),z.stopPropagation();try{const bt=Ai(B.pdf),Bt=B.pdf.split("/").pop()||"export.pdf";await dh(bt,Bt)}catch(bt){console.error("[Export] Failed to download PDF:",bt),alert(`Failed to download PDF: ${bt.message}`)}},style:{fontSize:12,color:"#2563eb",textDecoration:"underline",fontWeight:600,background:"none",border:"none",padding:0,cursor:"pointer",textAlign:"left"},children:"Download PDF Report"})]})]})]})]}),I.jsxs("div",{className:"filter-section",children:[I.jsx("h3",{className:"section-title",children:"Upload AOI"}),I.jsx("p",{className:"section-help",children:"Upload GeoJSON (.geojson/.json), KML (.kml), or Shapefile (.zip). Uploaded AOIs are displayed but not editable."}),I.jsxs("div",{className:"file-input-wrapper",children:[I.jsx("input",{ref:Pr,type:"file",multiple:!0,accept:".geojson,.json,.kml,.zip,application/geo+json,application/json,application/vnd.google-earth.kml+xml,application/zip",onChange:Ws,style:{display:"none"},id:"aoi-file-input"}),I.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>{var z;return(z=Pr.current)==null?void 0:z.click()},children:"Upload"}),I.jsx("span",{className:"file-hint",children:".geojson / .kml / .zip"})]}),ee.length>0&&I.jsxs("div",{style:{marginTop:"12px"},children:[I.jsxs("div",{style:{fontSize:"12px",color:"#64748b",marginBottom:"6px"},children:["Uploaded (",ee.length,"):"]}),ee.map(z=>I.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"4px 8px",marginBottom:"4px",background:"#f1f5f9",fontSize:"11px"},children:[I.jsx("span",{style:{color:"#475569"},children:z.name||z._fileName||`AOI ${z.id}`}),I.jsx("button",{type:"button",onClick:()=>qs(z.id),style:{background:"none",border:"none",color:"#ef4444",cursor:"pointer",fontSize:"12px",padding:"2px 6px"},title:"Remove this AOI",children:""})]},z.id)),I.jsx("button",{type:"button",onClick:mn,className:"btn-secondary",style:{marginTop:"8px",width:"100%",fontSize:"11px"},children:"Clear All"})]})]}),ps.length>0&&I.jsxs("div",{className:"filter-section",children:[I.jsxs("h3",{className:"section-title",children:["Datasets (",ps.length,")"]}),I.jsx("div",{style:{maxHeight:"300px",overflowY:"auto"},children:ps.map(z=>I.jsxs("div",{style:{padding:"8px",marginBottom:"8px",background:"#f9fafb",border:"1px solid #e5e7eb",borderRadius:0,fontSize:"12px"},children:[I.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[z.preview_url&&I.jsx("img",{src:Ai(z.preview_url),alt:"Preview",style:{width:"40px",height:"40px",objectFit:"cover",border:"1px solid #d1d5db"},onError:bt=>{bt.target.style.display="none"}}),I.jsxs("div",{style:{flex:1},children:[I.jsx("div",{style:{fontWeight:600,color:"#111827",marginBottom:"2px"},children:z.name}),I.jsxs("div",{style:{color:"#6b7280",fontSize:"11px"},children:[z.type_label||z.type,z.size_bytes&&`  ${(z.size_bytes/1024/1024).toFixed(1)} MB`,z.created_at&&`  ${new Date(z.created_at).toLocaleDateString()}`]})]})]}),I.jsxs("div",{style:{display:"flex",gap:"6px",marginTop:"6px",flexWrap:"wrap"},children:[I.jsx("button",{type:"button",onClick:()=>um(z.id),style:{padding:"4px 8px",fontSize:"11px",background:"#2563eb",color:"white",border:"none",borderRadius:0,cursor:"pointer"},children:"Download"}),I.jsx("button",{type:"button",onClick:()=>xs(z),disabled:!z.preview_url||!z.preview_bounds,title:!z.preview_url||!z.preview_bounds?"Preview not available":(vn==null?void 0:vn.id)===z.id?"Hide preview":"Show preview on map",style:{padding:"4px 8px",fontSize:"11px",background:(vn==null?void 0:vn.id)===z.id?"#10b981":"#6b7280",color:"white",border:"none",borderRadius:0,cursor:!z.preview_url||!z.preview_bounds?"not-allowed":"pointer",opacity:!z.preview_url||!z.preview_bounds?.5:1},children:(vn==null?void 0:vn.id)===z.id?"Hide":"Preview"}),I.jsx("button",{type:"button",onClick:()=>xi(z.id),style:{padding:"4px 8px",fontSize:"11px",background:"#ef4444",color:"white",border:"none",borderRadius:0,cursor:"pointer"},children:"Remove"})]})]},z.id))})]})]}),I.jsx("section",{className:"panel-map card",children:I.jsx(Sm,{globalAoi:e,uploadedAois:ee,aois:q,userClip:Vt,overlayUrl:o||null,overlayBounds:f||null,createdRasters:ke,onUserClipChange:ye,onRemoveAoi:qs,onRemoveRaster:Ks,onRemoveRasterByAoiId:Zs,onDrawStart:Zo,onClearDrawnAoi:In,activeRasterId:Y,activeCreatedRasterId:lt,datasetPreview:vn,onMapReady:z=>{ci.current=z},onAoiErased:wo},"base-map-persistent")}),I.jsxs(Nm,{width:550,children:[I.jsx("div",{className:"tab-bar",children:De.map(z=>I.jsx("button",{className:`tab-button ${Dt===z.id?"active":""}`,onClick:()=>Ht(z.id),title:z.label,children:z.icon},z.id))}),I.jsxs("div",{className:"tab-content",children:[(Y||vn)&&I.jsx("div",{style:{marginBottom:"16px"},children:I.jsx(Wm,{metadata:Vo,isLoading:yo})}),Dt==="table"&&I.jsxs(I.Fragment,{children:[ke.length>0&&I.jsxs("div",{style:{marginBottom:"16px"},children:[I.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"13px",fontWeight:500,color:"#374151"},children:"Statistics for:"}),I.jsx("select",{value:lt||"",onChange:z=>{const bt=z.target.value;bt&&Tr(bt)},style:{width:"100%",padding:"8px 12px",fontSize:"13px",border:"1px solid #d1d5db",borderRadius:"4px",backgroundColor:"#ffffff",color:"#111827"},children:ke.map(z=>I.jsx("option",{value:z.id,children:z.aoiName||z.name||`Raster ${z.id}`},z.id))})]}),ke.length===0?I.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#6b7280",fontSize:"13px"},children:"Generate a map to see statistics."}):I.jsxs(I.Fragment,{children:[lt&&!se&&I.jsx("div",{style:{padding:"12px",marginBottom:"16px",backgroundColor:"#fef3c7",border:"1px solid #fbbf24",borderRadius:"4px",fontSize:"13px",color:"#92400e"},children:" Statistics not available for this raster. The backend may not have returned stats in the generate response. Check the console for details."}),I.jsx(zm,{stats:se,values:$e,rasterName:Ur||(lt?(Wr=ke.find(z=>z.id===lt))==null?void 0:Wr.name:null),rasterPath:Hr})]})]}),Dt==="histogram"&&I.jsxs(I.Fragment,{children:[ke.length>0&&I.jsxs("div",{style:{marginBottom:"16px"},children:[I.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"13px",fontWeight:500,color:"#374151"},children:"Histogram for AOI:"}),I.jsx("select",{value:lt||"",onChange:z=>{const bt=z.target.value;bt&&Tr(bt)},style:{width:"100%",padding:"8px 12px",fontSize:"13px",border:"1px solid #d1d5db",borderRadius:"4px",backgroundColor:"#ffffff",color:"#111827"},children:ke.map(z=>I.jsx("option",{value:z.id,children:z.aoiName||z.name||`AOI ${z.aoiId}`},z.id))})]}),ke.length===0?I.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#6b7280",fontSize:"13px"},children:"Generate a map to see histogram."}):lt&&ke.find(z=>z.id===lt)?I.jsx(Gm,{values:$e,stats:se,histogram:Ye}):I.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#6b7280",fontSize:"13px"},children:"Select a raster from the list below to view its histogram."}),I.jsx(Vm,{rasters:ke,activeRasterId:lt,onShowRaster:Tr,onRemoveRaster:Ks,onClearAll:ke.length>0?Vr:null})]})]})]})]})}function ux(){return I.jsxs("div",{className:"app-shell",children:[I.jsxs("header",{className:"app-header",children:[I.jsx("div",{className:"app-header-side app-header-left",children:I.jsx("img",{src:"/oregon.jpg",alt:"Left logo",className:"header-logo-img"})}),I.jsx("div",{className:"app-header-center",children:I.jsx("h1",{className:"app-title",children:"VMRC Mortality Calculation"})}),I.jsx("div",{className:"app-header-side app-header-right",children:I.jsx("img",{src:"/vmrc.png",alt:"Right logo",className:"header-logo-img"})})]}),I.jsx("main",{className:"app-main",children:I.jsx(lx,{})})]})}const hx="http://127.0.0.1:8000";console.log("[main] API Base URL:",hx);console.log("[main] Environment mode:","production");Pg.createRoot(document.getElementById("root")).render(I.jsx(us.StrictMode,{children:I.jsx(ux,{})}));
